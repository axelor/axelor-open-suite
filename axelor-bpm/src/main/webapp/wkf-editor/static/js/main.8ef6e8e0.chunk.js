/*
 * Axelor Business Solutions
 *
 * Copyright (C) 2022 Axelor (<http://axelor.com>).
 *
 * This program is free software: you can redistribute it and/or  modify
 * it under the terms of the GNU Affero General Public License, version 3,
 * as published by the Free Software Foundation.
 *
 * This program is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 * GNU Affero General Public License for more details.
 *
 * You should have received a copy of the GNU Affero General Public License
 * along with this program.  If not, see <http://www.gnu.org/licenses/>.
 */
(this.webpackJsonpbpmnjs=this.webpackJsonpbpmnjs||[]).push([[0],{396:function(e,t,n){},417:function(e){e.exports=JSON.parse('{"name":"Camunda","uri":"http://camunda.org/schema/1.0/bpmn","prefix":"camunda","xml":{"tagAlias":"lowerCase"},"associations":[],"types":[{"name":"Definitions","isAbstract":true,"extends":["bpmn:Definitions"],"properties":[{"name":"diagramRelationId","isAttr":true,"type":"String"}]},{"name":"InOutBinding","superClass":["Element"],"isAbstract":true,"properties":[{"name":"source","isAttr":true,"type":"String"},{"name":"sourceExpression","isAttr":true,"type":"String"},{"name":"target","isAttr":true,"type":"String"},{"name":"businessKey","isAttr":true,"type":"String"},{"name":"local","isAttr":true,"type":"Boolean","default":false},{"name":"variables","isAttr":true,"type":"String"}]},{"name":"In","superClass":["InOutBinding"],"meta":{"allowedIn":["bpmn:CallActivity","bpmn:SignalEventDefinition"]}},{"name":"Out","superClass":["InOutBinding"],"meta":{"allowedIn":["bpmn:CallActivity"]}},{"name":"AsyncCapable","isAbstract":true,"extends":["bpmn:Activity","bpmn:Gateway","bpmn:Event"],"properties":[{"name":"async","isAttr":true,"type":"Boolean","default":false},{"name":"asyncBefore","isAttr":true,"type":"Boolean","default":false},{"name":"asyncAfter","isAttr":true,"type":"Boolean","default":false},{"name":"exclusive","isAttr":true,"type":"Boolean","default":true}]},{"name":"JobPriorized","isAbstract":true,"extends":["bpmn:Process","camunda:AsyncCapable"],"properties":[{"name":"jobPriority","isAttr":true,"type":"String"}]},{"name":"SignalEventDefinition","isAbstract":true,"extends":["bpmn:SignalEventDefinition"],"properties":[{"name":"async","isAttr":true,"type":"Boolean","default":false}]},{"name":"ErrorEventDefinition","isAbstract":true,"extends":["bpmn:ErrorEventDefinition"],"properties":[{"name":"errorCodeVariable","isAttr":true,"type":"String"},{"name":"errorMessageVariable","isAttr":true,"type":"String"}]},{"name":"Error","isAbstract":true,"extends":["bpmn:Error"],"properties":[{"name":"camunda:errorMessage","isAttr":true,"type":"String"}]},{"name":"PotentialStarter","superClass":["Element"],"properties":[{"name":"resourceAssignmentExpression","type":"bpmn:ResourceAssignmentExpression"}]},{"name":"FormSupported","isAbstract":true,"extends":["bpmn:StartEvent","bpmn:UserTask"],"properties":[{"name":"formHandlerClass","isAttr":true,"type":"String"},{"name":"formKey","isAttr":true,"type":"String"}]},{"name":"TemplateSupported","isAbstract":true,"extends":["bpmn:Process","bpmn:FlowElement"],"properties":[{"name":"modelerTemplate","isAttr":true,"type":"String"}]},{"name":"Initiator","isAbstract":true,"extends":["bpmn:StartEvent"],"properties":[{"name":"initiator","isAttr":true,"type":"String"}]},{"name":"ScriptTask","isAbstract":true,"extends":["bpmn:ScriptTask"],"properties":[{"name":"resultVariable","isAttr":true,"type":"String"},{"name":"resource","isAttr":true,"type":"String"}]},{"name":"Process","isAbstract":true,"extends":["bpmn:Process"],"properties":[{"name":"candidateStarterGroups","isAttr":true,"type":"String"},{"name":"candidateStarterUsers","isAttr":true,"type":"String"},{"name":"versionTag","isAttr":true,"type":"String"},{"name":"historyTimeToLive","isAttr":true,"type":"String"},{"name":"isStartableInTasklist","isAttr":true,"type":"Boolean","default":true}]},{"name":"EscalationEventDefinition","isAbstract":true,"extends":["bpmn:EscalationEventDefinition"],"properties":[{"name":"escalationCodeVariable","isAttr":true,"type":"String"}]},{"name":"FormalExpression","isAbstract":true,"extends":["bpmn:FormalExpression"],"properties":[{"name":"resource","isAttr":true,"type":"String"}]},{"name":"Assignable","extends":["bpmn:UserTask"],"properties":[{"name":"assignee","isAttr":true,"type":"String"},{"name":"candidateUsers","isAttr":true,"type":"String"},{"name":"candidateGroups","isAttr":true,"type":"String"},{"name":"dueDate","isAttr":true,"type":"String"},{"name":"followUpDate","isAttr":true,"type":"String"},{"name":"priority","isAttr":true,"type":"String"}]},{"name":"CallActivity","extends":["bpmn:CallActivity"],"properties":[{"name":"calledElementBinding","isAttr":true,"type":"String","default":"latest"},{"name":"calledElementVersion","isAttr":true,"type":"String"},{"name":"calledElementVersionTag","isAttr":true,"type":"String"},{"name":"calledElementTenantId","isAttr":true,"type":"String"},{"name":"caseRef","isAttr":true,"type":"String"},{"name":"caseBinding","isAttr":true,"type":"String","default":"latest"},{"name":"caseVersion","isAttr":true,"type":"String"},{"name":"caseTenantId","isAttr":true,"type":"String"},{"name":"variableMappingClass","isAttr":true,"type":"String"},{"name":"variableMappingDelegateExpression","isAttr":true,"type":"String"}]},{"name":"ServiceTaskLike","extends":["bpmn:ServiceTask","bpmn:BusinessRuleTask","bpmn:SendTask","bpmn:MessageEventDefinition"],"properties":[{"name":"expression","isAttr":true,"type":"String"},{"name":"class","isAttr":true,"type":"String"},{"name":"delegateExpression","isAttr":true,"type":"String"},{"name":"resultVariable","isAttr":true,"type":"String"}]},{"name":"DmnCapable","extends":["bpmn:BusinessRuleTask"],"properties":[{"name":"decisionRef","isAttr":true,"type":"String"},{"name":"decisionRefBinding","isAttr":true,"type":"String","default":"latest"},{"name":"decisionRefVersion","isAttr":true,"type":"String"},{"name":"mapDecisionResult","isAttr":true,"type":"String","default":"resultList"},{"name":"decisionRefTenantId","isAttr":true,"type":"String"}]},{"name":"ExternalCapable","extends":["camunda:ServiceTaskLike"],"properties":[{"name":"type","isAttr":true,"type":"String"},{"name":"topic","isAttr":true,"type":"String"}]},{"name":"TaskPriorized","extends":["bpmn:Process","camunda:ExternalCapable"],"properties":[{"name":"taskPriority","isAttr":true,"type":"String"}]},{"name":"Properties","superClass":["Element"],"meta":{"allowedIn":["*"]},"properties":[{"name":"values","type":"Property","isMany":true}]},{"name":"Property","superClass":["Element"],"properties":[{"name":"id","type":"String","isAttr":true},{"name":"name","type":"String","isAttr":true},{"name":"value","type":"String","isAttr":true}]},{"name":"Connector","superClass":["Element"],"meta":{"allowedIn":["camunda:ServiceTaskLike"]},"properties":[{"name":"inputOutput","type":"InputOutput"},{"name":"connectorId","type":"String"}]},{"name":"InputOutput","superClass":["Element"],"meta":{"allowedIn":["bpmn:FlowNode","camunda:Connector"]},"properties":[{"name":"inputOutput","type":"InputOutput"},{"name":"connectorId","type":"String"},{"name":"inputParameters","isMany":true,"type":"InputParameter"},{"name":"outputParameters","isMany":true,"type":"OutputParameter"}]},{"name":"InputOutputParameter","properties":[{"name":"name","isAttr":true,"type":"String"},{"name":"value","isBody":true,"type":"String"},{"name":"definition","type":"InputOutputParameterDefinition"}]},{"name":"InputOutputParameterDefinition","isAbstract":true},{"name":"List","superClass":["InputOutputParameterDefinition"],"properties":[{"name":"items","isMany":true,"type":"InputOutputParameterDefinition"}]},{"name":"Map","superClass":["InputOutputParameterDefinition"],"properties":[{"name":"entries","isMany":true,"type":"Entry"}]},{"name":"Entry","properties":[{"name":"key","isAttr":true,"type":"String"},{"name":"value","isBody":true,"type":"String"},{"name":"definition","type":"InputOutputParameterDefinition"}]},{"name":"Value","superClass":["InputOutputParameterDefinition"],"properties":[{"name":"id","isAttr":true,"type":"String"},{"name":"name","isAttr":true,"type":"String"},{"name":"value","isBody":true,"type":"String"}]},{"name":"Script","superClass":["InputOutputParameterDefinition"],"properties":[{"name":"scriptFormat","isAttr":true,"type":"String"},{"name":"resource","isAttr":true,"type":"String"},{"name":"scriptValue","isAttr":true,"type":"String"},{"name":"value","isBody":true,"type":"String"}]},{"name":"Field","superClass":["Element"],"meta":{"allowedIn":["camunda:ServiceTaskLike","camunda:ExecutionListener","camunda:TaskListener"]},"properties":[{"name":"name","isAttr":true,"type":"String"},{"name":"expression","type":"String"},{"name":"stringValue","isAttr":true,"type":"String"},{"name":"string","type":"String"}]},{"name":"InputParameter","superClass":["InputOutputParameter"]},{"name":"OutputParameter","superClass":["InputOutputParameter"]},{"name":"Collectable","isAbstract":true,"extends":["bpmn:MultiInstanceLoopCharacteristics"],"superClass":["camunda:AsyncCapable"],"properties":[{"name":"collection","isAttr":true,"type":"String"},{"name":"elementVariable","isAttr":true,"type":"String"}]},{"name":"FailedJobRetryTimeCycle","superClass":["Element"],"meta":{"allowedIn":["camunda:AsyncCapable","bpmn:MultiInstanceLoopCharacteristics"]},"properties":[{"name":"body","isBody":true,"type":"String"}]},{"name":"ExecutionListener","superClass":["Element"],"meta":{"allowedIn":["bpmn:Task","bpmn:ServiceTask","bpmn:UserTask","bpmn:BusinessRuleTask","bpmn:ScriptTask","bpmn:ReceiveTask","bpmn:ManualTask","bpmn:ExclusiveGateway","bpmn:SequenceFlow","bpmn:ParallelGateway","bpmn:InclusiveGateway","bpmn:EventBasedGateway","bpmn:StartEvent","bpmn:IntermediateCatchEvent","bpmn:IntermediateThrowEvent","bpmn:EndEvent","bpmn:BoundaryEvent","bpmn:CallActivity","bpmn:SubProcess","bpmn:Process"]},"properties":[{"name":"expression","isAttr":true,"type":"String"},{"name":"class","isAttr":true,"type":"String"},{"name":"delegateExpression","isAttr":true,"type":"String"},{"name":"event","isAttr":true,"type":"String"},{"name":"script","type":"Script"},{"name":"fields","type":"Field","isMany":true}]},{"name":"TaskListener","superClass":["Element"],"meta":{"allowedIn":["bpmn:UserTask"]},"properties":[{"name":"expression","isAttr":true,"type":"String"},{"name":"class","isAttr":true,"type":"String"},{"name":"delegateExpression","isAttr":true,"type":"String"},{"name":"event","isAttr":true,"type":"String"},{"name":"script","type":"Script"},{"name":"fields","type":"Field","isMany":true},{"name":"id","type":"String","isAttr":true},{"name":"eventDefinitions","type":"bpmn:TimerEventDefinition","isMany":true}]},{"name":"FormProperty","superClass":["Element"],"meta":{"allowedIn":["bpmn:StartEvent","bpmn:UserTask"]},"properties":[{"name":"id","type":"String","isAttr":true},{"name":"name","type":"String","isAttr":true},{"name":"type","type":"String","isAttr":true},{"name":"required","type":"String","isAttr":true},{"name":"readable","type":"String","isAttr":true},{"name":"writable","type":"String","isAttr":true},{"name":"variable","type":"String","isAttr":true},{"name":"expression","type":"String","isAttr":true},{"name":"datePattern","type":"String","isAttr":true},{"name":"default","type":"String","isAttr":true},{"name":"values","type":"Value","isMany":true}]},{"name":"FormData","superClass":["Element"],"meta":{"allowedIn":["bpmn:StartEvent","bpmn:UserTask"]},"properties":[{"name":"fields","type":"FormField","isMany":true},{"name":"businessKey","type":"String","isAttr":true}]},{"name":"FormField","superClass":["Element"],"properties":[{"name":"id","type":"String","isAttr":true},{"name":"label","type":"String","isAttr":true},{"name":"type","type":"String","isAttr":true},{"name":"datePattern","type":"String","isAttr":true},{"name":"defaultValue","type":"String","isAttr":true},{"name":"properties","type":"Properties"},{"name":"validation","type":"Validation"},{"name":"values","type":"Value","isMany":true}]},{"name":"Validation","superClass":["Element"],"properties":[{"name":"constraints","type":"Constraint","isMany":true}]},{"name":"Constraint","superClass":["Element"],"properties":[{"name":"name","type":"String","isAttr":true},{"name":"config","type":"String","isAttr":true}]},{"name":"ConditionalEventDefinition","isAbstract":true,"extends":["bpmn:ConditionalEventDefinition"],"properties":[{"name":"variableName","isAttr":true,"type":"String"},{"name":"variableEvent","isAttr":true,"type":"String"},{"name":"scriptValue","isAttr":true,"type":"String"},{"name":"combinator","isAttr":true,"type":"String"}]},{"name":"ContextMap","superClass":["Element"],"properties":[{"name":"contextMapParameters","isMany":true,"type":"ContextMapParameter"},{"name":"contextUserMapParameters","isMany":true,"type":"ContextUserMapParameter"}]},{"name":"ContextMapParameter","properties":[{"name":"contextDefinition","type":"ContextMapDefinition"}]},{"name":"ContextUserMapParameter","properties":[{"name":"contextDefinition","type":"ContextMapDefinition"}]},{"name":"ContextMapDefinition","isAbstract":true},{"name":"Map","superClass":["ContextMapDefinition"],"properties":[{"name":"entries","isMany":true,"type":"Entry"}]},{"name":"ProcessConfiguration","superClass":["Element"],"properties":[{"name":"processConfigurationParameters","isMany":true,"type":"ProcessConfigurationParameter"}]},{"name":"ProcessConfigurationParameter","properties":[{"name":"metaModel","isAttr":true,"type":"String"},{"name":"metaJsonModel","isAttr":true,"type":"String"},{"name":"processPath","isAttr":true,"type":"String"},{"name":"pathCondition","isAttr":true,"type":"String"},{"name":"isStartModel","isAttr":true,"type":"String"},{"name":"isDirectCreation","isAttr":true,"type":"String"},{"name":"isCustom","isAttr":true,"type":"String"},{"name":"userDefaultPath","isAttr":true,"type":"String"},{"name":"model","isAttr":true,"type":"String"},{"name":"metaModelFullName","isAttr":true,"type":"String"},{"name":"pathConditionValue","isAttr":true,"type":"String"},{"name":"title","isAttr":true,"type":"String"},{"name":"isTranslations","isAttr":true,"type":"Boolean"}]}],"emumerations":[]}')},460:function(e,t,n){e.exports=n(742)},726:function(e,t,n){},727:function(e,t,n){},730:function(e,t,n){},740:function(e,t,n){},741:function(e,t,n){},742:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),i=n(47),o=n.n(i),l=n(6),c=n(9),s=n(18),u=n(8),m=n.n(u),d=n(20),p=n(14),b=n(68),f=n.n(b),v=n(245),g=n(399),y=n.n(g),h=n(400),O=n.n(h),E=n(30),j=n.n(E),x=n(26),w=n.n(x),k=n(52),C=n.n(k),N=n(848),S=n(401),M=n.n(S),T=n(22),P=n(2),F=n(104),_=n(809),R=n(860),L=n(854),D=n(251),I=n(745),A=n(263),V=n(800),B=Object(F.a)((function(e){return{arrow:{color:e.palette.common.black},tooltip:{backgroundColor:e.palette.common.black,fontSize:"1em"}}}));function $(e){var t=e.title,n=e.children,a=B();return r.a.createElement(V.a,{arrow:!0,classes:a,title:t},r.a.createElement("div",null,n))}var W=function(e,t){var n=encodeURIComponent(e),a=document.createElement("a");document.body.appendChild(a),a.setAttribute("href","data:image/svg+xml;utf-8,"+n),a.setAttribute("download",t),a.click()};function J(e){return window._t&&"string"===typeof e?window._t(e):e}function z(e){return!(!e||!["false","true",!0,!1].includes(e))&&!!JSON.parse(String(e).toLowerCase())}function G(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;return e.sort((function(e,n){var a=e[t],r=n[t];return a<r?-1:a>r?1:0}))}function U(e){return e.file}function H(e,t){return function e(n){var a=n.items,r=void 0===a?[]:a,i=n.jsonFields,o=void 0===i?[]:i;return[].concat(Object(s.a)(r),Object(s.a)(o)).reduce((function(t,n){return[].concat(Object(s.a)(t),Object(s.a)(e(n)))}),n.type===t?[n]:[])}(e)}function q(e){if(e)return e.trim().toLowerCase()}function K(e){if(e){var t=e.match(/[A-Z][a-z]+/g);if(t){if(t.join("").trim().length!==e.length)return"fetchAPI";var n=t&&t.join("-");return"".concat(n.toLowerCase(),"-form")}}}function Y(e){if(e)return e.charAt(0).toLowerCase()+e.slice(1)}var X=Object(F.a)((function(e){return{logo:{padding:"0 20px",height:"3%",display:"flex",justifyContent:"flex-end",alignItems:"center"},divider:{background:"#404040",height:4},axelor:{color:"#404040",fontWeight:"800",fontSize:16,letterSpacing:-1,fontFamily:"-apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Oxygen', 'Ubuntu', 'Cantarell', 'Fira Sans', 'Droid Sans', 'Helvetica Neue', sans-serif"},axelorLogo:{marginRight:10,cursor:"pointer"},dialogPaper:{maxWidth:300},anchor:{color:"black",textDecoration:"none"}}})),Z=r.a.forwardRef((function(){return r.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 14.02 5.57",width:"53",height:"21",style:{verticalAlign:"middle"}},r.a.createElement("path",{fill:"currentColor",d:"M1.88.92v.14c0 .41-.13.68-.4.8.33.14.46.44.46.86v.33c0 .61-.33.95-.95.95H0V0h.95c.65 0 .93.3.93.92zM.63.57v1.06h.24c.24 0 .38-.1.38-.43V.98c0-.28-.1-.4-.32-.4zm0 1.63v1.22h.36c.2 0 .32-.1.32-.39v-.35c0-.37-.12-.48-.4-.48H.63zM4.18.99v.52c0 .64-.31.98-.94.98h-.3V4h-.62V0h.92c.63 0 .94.35.94.99zM2.94.57v1.35h.3c.2 0 .3-.09.3-.37v-.6c0-.29-.1-.38-.3-.38h-.3zm2.89 2.27L6.25 0h.88v4h-.6V1.12L6.1 3.99h-.6l-.46-2.82v2.82h-.55V0h.87zM8.14 1.1V4h-.56V0h.79L9 2.4V0h.56v4h-.64zm2.49 2.29v.6h-.6v-.6zM12.12 1c0-.63.33-1 .95-1 .61 0 .95.37.95 1v2.04c0 .64-.34 1-.95 1-.62 0-.95-.37-.95-1zm.62 2.08c0 .28.13.39.33.39s.32-.1.32-.4V.98c0-.29-.12-.4-.32-.4s-.33.11-.33.4z"}),r.a.createElement("path",{fill:"currentColor",d:"M0 4.53h14.02v1.04H0zM11.08 0h.63v.62h-.63zm.63 4V1h-.63v2.98z"}))}));var Q=r.a.memo((function(){var e=Object(a.useState)({open:!1,type:"bpm"}),t=Object(l.a)(e,2),n=t[0],i=t[1],o=X(),c=function(e){i({open:!0,type:e})},s=r.a.forwardRef((function(){return r.a.createElement("div",{className:o.axelorLogo,onClick:function(){c("axelor")}},r.a.createElement("img",{src:"axelor.png",alt:"axelor",style:{width:52,height:24,marginTop:3}}))}));return r.a.createElement("div",{className:o.logo},r.a.createElement($,{title:J("Powered by Axelor"),children:r.a.createElement(s,null)}),r.a.createElement("div",{style:{cursor:"pointer"},onClick:function(){c("bpm")}},r.a.createElement($,{title:J("Powered by bpmn.io"),children:r.a.createElement(Z,null)})),n.open&&r.a.createElement(I.a,{onClose:function(){i({open:!1,type:"bpm"})},"aria-labelledby":"simple-dialog-title",open:n.open,classes:{paper:o.dialogPaper}},r.a.createElement(A.a,{container:!0,style:{padding:15,display:"flex",alignItems:"center",justifyContent:"center"}},r.a.createElement(A.a,{item:!0,xs:6,style:{textAlign:"center",display:"flex",justifyContent:"center"}},"bpm"===n.type?r.a.createElement("a",{href:"https://bpmn.io/",target:"_blank",rel:"noopener noreferrer",className:o.anchor},r.a.createElement(Z,null)):r.a.createElement("a",{href:"https://www.axelor.com/",target:"_blank",rel:"noopener noreferrer",className:o.anchor},r.a.createElement(s,null))),r.a.createElement(A.a,{item:!0,xs:6},"bpm"===n.type?r.a.createElement("a",{href:"https://bpmn.io/",target:"_blank",rel:"noopener noreferrer",className:o.anchor},"Web-based tooling for BPMN, DMN and CMMN diagrams powered by bpmn.io"):r.a.createElement("a",{href:"https://www.axelor.com/",target:"_blank",rel:"noopener noreferrer",className:o.anchor},"Web-based tooling for No-code BPM apps powered by Axelor")))))})),ee=n(151),te=n(29),ne=n.n(te),ae=n(747),re=n(756),ie=Object(re.a)({desciption:{marginTop:5,color:"#999"},error:{color:"#CC3333"}});function oe(e){var t=e.desciption,n=e.type,a=ie();return r.a.createElement("div",{className:ne()(a.desciption,n&&a.error)},t)}var le,ce=n(39),se=n.n(ce),ue=n(171),me=n(172),de={};function pe(e){var t=document.cookie||"";return t!==le&&(le=t,de=t.split("; ").reduce((function(e,t){var n=t.split("=");return e[n[0]]=n[1],e}),{})),de[e]}function be(e,t){var n=e.file;if(n){var a={"X-File-Name":n.name,"X-File-Offset":t,"X-File-Size":n.size,"X-File-Type":n.type,"X-CSRF-Token":pe("CSRF-TOKEN")};return e.id&&(a["X-File-Id"]=e.id),a}}var fe=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n="".concat(e).lastIndexOf("/")===e.length-1?"":"/";return"".concat(e).concat(n).concat(t)},ve=new(function(){function e(){Object(ue.a)(this,e);var t=new Headers;t.append("Accept","application/json"),t.append("Content-Type","application/json"),t.append("X-Requested-With","XMLHttpRequest"),t.append("X-CSRF-Token",pe("CSRF-TOKEN")),this.baseURL="..",this.headers=t}return Object(me.a)(e,[{key:"fetch",value:function(e){function t(t,n,a){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(e,t,n){return fetch(e,n).then((function(e){return-1!==["head"].indexOf(t.toLowerCase())?e:e.headers.get("content-type").includes("application/json")?e.json():e})).catch((function(e){}))}))},{key:"request",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=Object.assign({method:"POST",credentials:"include",headers:this.headers,mode:"cors",body:JSON.stringify(n)},t);return"GET"===t.method&&delete a.body,this.fetch("".concat(this.baseURL).concat(0===e.indexOf("/")?e:"/".concat(e)),t.method,a)}},{key:"get",value:function(e){return this.request(e,{method:"GET"})}},{key:"post",value:function(e,t){return this.request(e,{method:"POST"},t)}},{key:"add",value:function(e,t){var n={data:t},a="ws/rest/".concat(e);return this.post(a,n)}},{key:"fetchId",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a="ws/rest/".concat(e,"/").concat(t,"/fetch");return this.post(a,n)}},{key:"delete",value:function(e,t){var n="ws/rest/".concat(e,"/").concat(t);return this.request(n,{method:"DELETE"})}},{key:"search",value:function(e,t){var n=Object(c.a)({offset:0},t),a="ws/rest/".concat(e,"/search");return this.post(a,n)}},{key:"action",value:function(e){return this.post("ws/action",e)}},{key:"view",value:function(e){return this.post("/ws/meta/view",e)}},{key:"fields",value:function(e){return this.post("/ws/meta/view/fields",e)}},{key:"fetchFields",value:function(e){var t="/ws/meta/fields/".concat(e);return this.get(t)}},{key:"fetchRecord",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a="ws/rest/".concat(e,"/").concat(t,"/fetch");return this.post(a,n)}},{key:"upload",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){return!0},r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return new Promise((function(i,o){var l=e.baseURL,c=new XMLHttpRequest,s=fe(e.baseURL,"ws/files/upload"),u=function(){return n["X-File-Id"]?e.intercept((function(){return e.http.delete(fe(e.baseURL,"ws/files/upload/"+n["X-File-Id"]))})):Promise.resolve(!0)};c.open("POST",s,!0),Object.keys(n).forEach((function(e){c.setRequestHeader(e,n[e])})),c.withCredentials=!0,c.overrideMimeType("application/octet-stream"),c.setRequestHeader("Content-Type","application/octet-stream"),c.setRequestHeader("X-Requested-With","XMLHttpRequest"),c.onload=function(){a(100)},r.abort=function(){return c.abort(),u()},c.onreadystatechange=function(){if(4===c.readyState)switch(c.status){case 401:throw this.callbackInterceptor(),new Error("Unauthorized");case 200:try{var e=JSON.parse(c.responseText);i({result:e,url:"".concat(l,"ws/rest/com.axelor.meta.db.MetaFile/").concat(e.id,"/content/download?v=0")})}catch(t){i(c.responseText)}break;default:u(),o({status:c.status})}},c.upload.onprogress=function(e){var t=n["X-File-Size"],i=parseFloat(n["X-File-Offset"])+e.loaded,o=Math.round(i/t*100);r.progress=o>95?"95%":o+"%",r.transfer=function(e,t){var n=function(e){return e>1e9?parseFloat(e/1e9).toFixed(2)+" GB":e>1e6?parseFloat(e/1e6).toFixed(2)+" MB":e>=1e3?parseFloat(e/1e3).toFixed(2)+" KB":e+" B"};return n(e||0)+"/"+n(t)}(i,t),r.loaded=i===t,e.lengthComputable&&a(e.loaded/e.total*100,r)},c.send(t)}))}},{key:"download",value:function(e,t){var n="".concat(this.baseURL,"/").concat(e);return new Promise((function(e,a){var r=new XMLHttpRequest;r.open("GET",n,!0),r.responseType="blob",r.onload=function(e){var n=r.response,a=URL.createObjectURL(new Blob([n])),i=document.createElement("a");i.href=a,i.download="".concat(t,".xlsx"),i.click(),i.remove(),URL.revokeObjectURL(a)},r.send()}))}}]),e}()),ge=n(259),ye=n(258),he=n(260),Oe=n(802),Ee=n(803),je=n(257),xe=n(256),we=n(804),ke=n(805),Ce={"bpmn:Task":"#cfe7f4","bpmn:UserTask":"#c5ebf3","bpmn:SendTask":"#fddeb3","bpmn:ReceiveTask":"#fde8b3","bpmn:ManualTask":"#c5e0fc","bpmn:BusinessRuleTask":"#f8cfde","bpmn:ServiceTask":"#c5ece4","bpmn:ScriptTask":"#ffeed4","bpmn:CallActivity":"#fee5bf","bpmn:SubProcess":"#E4EBF8","bpmn:StartEvent":"#ccecc6","bpmn:EndEvent":"#ffd4c7","bpmn:Gateway":"#fdecb3","bpmn:IntermediateThrowEvent":"#ffe0b3","bpmn:IntermediateCatchEvent":"#ffe0b3","bpmn:BoundaryEvent":"#ffe0b3","bpmn:DataOutputAssociation":"#8095B3","bpmn:Transaction":"#E4EBF8","bpmn:DataObjectReference":"#eeceee","bpmn:DataStoreReference":"#ffcfd4","bpmn:AdHocSubProcess":"#E4EBF8"},Ne=["bpmn:DataOutputAssociation","bpmn:DataObjectReference","bpmn:DataStoreReference"],Se={"bpmn:Task":"#5EAEDA","bpmn:UserTask":"#3FBDD6","bpmn:SendTask":"#F79000","bpmn:ReceiveTask":"#F8B200","bpmn:ManualTask":"#3F97F6","bpmn:BusinessRuleTask":"#E76092","bpmn:ServiceTask":"#3EBFA5","bpmn:ScriptTask":"#FF9E0F","bpmn:CallActivity":"#FBA729","bpmn:SubProcess":"#6097fc","bpmn:AdHocSubProcess":"#6097fc","bpmn:Transaction":"#6097fc","bpmn:SequenceFlow":"#8095B3","bpmn:StartEvent":"#55c041","bpmn:EndEvent":"#ff7043","bpmn:Gateway":"#f9c000","bpmn:IntermediateThrowEvent":"#ff9800","bpmn:IntermediateCatchEvent":"#ff9800","bpmn:Participant":"#c8c8c8","bpmn:Lane":"#c8c8c8","bpmn:Group":"#c8c8c8","bpmn:Association":"#8095B3","bpmn:TextAnnotation":"#A9B1BD","bpmn:BoundaryEvent":"#ff9800","bpmn:DataObjectReference":"#a80ca8","bpmn:DataStoreReference":"#e53935","bpmn:DataOutputAssociation":"#8095B3"},Me={"#5eaeda":"#cfe7f4","#3fbdd6":"#c5ebf3","#f79000":"#fddeb3","#f8b200":"#fde8b3","#3f97f6":"#c5e0fc","#e76092":"#f8cfde","#3ebfa5":"#c5ece4","#ff9e0f":"#ffeed4","#fba729":"#fee5bf","#6097fc":"#e4ebf8","#55c041":"#ccecc6","#ff7043":"#ffd4c7","#f9c000":"#fdecb3","#ff9800":"#ffe0b3","#a80ca8":"#eeceee","#e53935":"#ffcfd4","#000000":"#ffffff"},Te=["bpmn:UserTask","bpmn:ReceiveTask","bpmn:CallActivity","bpmn:SubProcess"],Pe=["bpmn:subprocess","bpmn:transaction","multiinstancesequential","multiinstanceparallel"],Fe=[{name:"red",title:"Red",color:"#f44336"},{name:"pink",title:"Pink",color:"#e91e63"},{name:"purple",title:"Purple",color:"#9c27b0"},{name:"deeppurple",title:"Deep Purple",color:"#673ab7"},{name:"indigo",title:"Indigo",color:"#3f51b5"},{name:"blue",title:"Blue",color:"#2196f3"},{name:"lightblue",title:"Light Blue",color:"#03a9f4"},{name:"cyan",title:"Cyan",color:"#00bcd4"},{name:"teal",title:"Teal",color:"#009688"},{name:"green",title:"Green",color:"#4caf50"},{name:"lightgreen",title:"Light Green",color:"#8bc34a",border:"black"},{name:"lime",title:"Lime",color:"#cddc39",border:"black"},{name:"yellow",title:"Yellow",color:"#ffeb3b",border:"black"},{name:"amber",title:"Amber",color:"#ffc107",border:"black"},{name:"orange",title:"Orange",color:"#ff9800",border:"black"},{name:"deeporange",title:"Deep Orange",color:"#ff5722"},{name:"brown",title:"Brown",color:"#795548"},{name:"grey",title:"Grey",color:"#9e9e9e",border:"black"},{name:"bluegrey",title:"Blue Grey",color:"#607d8b"},{name:"black",title:"Black",color:"black"},{name:"white",title:"White",color:"whitesmoke",border:"black"}],_e=["importOrigin","code","diagramXml","description","isActive","wkfTaskConfigList","deploymentId","dmnFileSet","generatedFromCallActivity","id","processInstanceId","previousVersion","previousVersion.statusSelect","wkfProcessList","versionTag","oldNodes","version","attrs","statusSelect","name","wkfStatusColor","appBuilder"],Re=["name","processId","wkfProcessConfigList"],Le={1:"New",2:"On Going",3:"Terminated"},De=[ge.a[600],ye.a[600],he.a[600],Oe.a[600],Ee.a[600],je.a[600],xe.a[600],we.a[600],ke.a[600],ge.a[700],ye.a[700],he.a[700],Oe.a[700],Ee.a[700],je.a[700],xe.a[700],we.a[700],ke.a[700],ge.a[800],ye.a[800],he.a[800],Oe.a[800],je.a[800],Ee.a[800],xe.a[800],we.a[800],ke.a[800],ge.a[900],ye.a[900],he.a[900],Oe.a[900],Ee.a[900],je.a[900],xe.a[900],we.a[900],ke.a[900],ge.a[500],ye.a[500],he.a[500],Oe.a[500],Ee.a[500],je.a[500],xe.a[500],we.a[500],ke.a[500]],Ie=["bpmn:EventBasedGateway","bpmn:ExclusiveGateway","bpmn:InclusiveGateway","bpmn:ComplexGateway","bpmn:ParallelGateway","bpmn:SequenceFlow","label","bpmn:IntermediateThrowEvent","bpmn:Collaboration","bpmn:Lane","bpmn:TextAnnotation","bpmn:MessageFlow","bpmn:Participant"],Ae=[{name:"FEEL",value:"feel"},{name:"JUEL",value:"juel"},{name:"JavaScript",value:"javascript"},{name:"Groovy",value:"groovy"},{name:"Python",value:"python"},{name:"JRuby",value:"jruby"}],Ve=[{name:"string",value:"string"},{name:"boolean",value:"boolean"},{name:"integer",value:"integer"},{name:"long",value:"long"},{name:"double",value:"double"},{name:"date",value:"date"}],Be=[{name:"Match one",id:"disjunction"},{name:"Match none",id:"negation"}],$e=[{name:"Yes",id:"true"},{name:"No",id:"false"},{name:"-",id:""}],We=[{name:"Comparison",id:"comparison"},{name:"Range",id:"range"}],Je=[{name:"Equals",id:"equals"},{name:"Less",id:"less"},{name:"Less or equals",id:"lessEquals"},{name:"Greater",id:"greater"},{name:"Greater or equals",id:"greaterEquals"}],ze=[{name:"Include",id:"include"},{name:"Exclude",id:"exclude"}],Ge=[{name:"Exactly",id:"exact"},{name:"Before",id:"before"},{name:"After",id:"after"},{name:"Between",id:"between"}],Ue=["one_to_one","many_to_one","many_to_many","one_to_many","json_one_to_one","json_many_to_one","json_many_to_many","json_one_to_many","one-to-one","many-to-one","many-to-many","one-to-many","json-one-to-one","json-many-to-one","json-many-to-many","json-one-to-many"],He=["string","boolean","double","integer","date","long"],qe=[].concat(He,Ue,["selection","date-time","time","decimal"]),Ke=["panel","label","spacer","button"];function Ye(){return Xe.apply(this,arguments)}function Xe(){return(Xe=Object(p.a)(m.a.mark((function e(){var t,n,a,r,i,o,l,s,u,d=arguments;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=d.length>0&&void 0!==d[0]?d[0]:{},n=d.length>1?d[1]:void 0,a=d.length>2?d[2]:void 0,e.t1=!n||"metaModel"===n,!e.t1){e.next=8;break}return e.next=7,Ot(t);case 7:e.t1=e.sent;case 8:if(e.t0=e.t1,e.t0){e.next=11;break}e.t0=[];case 11:if(r=e.t0,e.t3=!n||"metaJsonModel"===n,!e.t3){e.next=17;break}return e.next=16,jt(t);case 16:e.t3=e.sent;case 17:if(e.t2=e.t3,e.t2){e.next=20;break}e.t2=[];case 20:for(i=e.t2,o=[],l=0;l<r.length;l++)o.push(Object(c.a)(Object(c.a)({},r[l]),{},{type:"metaModel"}));for(s=0;s<i.length;s++)o.push(Object(c.a)(Object(c.a)({},i[s]),{},{type:"metaJsonModel"}));if(a)for(u=0;u<a.length;u++)o.push(Object(c.a)(Object(c.a)({},a[u]),{},{type:"dmnModel"}));return e.abrupt("return",o||[]);case 26:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ze(e){return Qe.apply(this,arguments)}function Qe(){return(Qe=Object(p.a)(m.a.mark((function e(t){var n,a,r;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ve.search("com.axelor.studio.db.AppBuilder",t);case 2:return n=e.sent,a=(n||{}).data,r=void 0===a?[]:a,e.abrupt("return",r);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var et=function(){var e=Object(p.a)(m.a.mark((function e(){var t,n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ve.search("com.axelor.apps.bpm.db.WkfModel",{fields:_e,related:{wkfProcessList:Re},data:{_domain:"self.isActive is true"}});case 2:return t=e.sent,n=t&&t.data||[],e.abrupt("return",n);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),tt=function(){var e=Object(p.a)(m.a.mark((function e(t){var n,a;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ve.delete("com.axelor.apps.bpm.db.WkfModel",t);case 2:if(!(n=e.sent)||-1!==n.status){e.next=5;break}return e.abrupt("return",n.data&&n.data.message);case 5:return a=n&&n.data&&n.data[0]||{},e.abrupt("return",a);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),nt=function(){var e=Object(p.a)(m.a.mark((function e(t){var n,a;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ve.fetchId("com.axelor.apps.base.db.AppBpm",t);case 2:return n=e.sent,a=n&&n.data&&n.data[0]||{},e.abrupt("return",a);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),at=function(){var e=Object(p.a)(m.a.mark((function e(t){var n,a;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ve.search("com.axelor.apps.base.db.App",t);case 2:return n=e.sent,a=n&&n.data&&n.data[0]||{},e.abrupt("return",a);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),rt=function(){var e=Object(p.a)(m.a.mark((function e(t){var n,a;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ve.fetchId("com.axelor.apps.bpm.db.WkfModel",t,{fields:_e,related:{wkfProcessList:Re}});case 2:return n=e.sent,a=n&&n.data&&n.data[0]||{},e.abrupt("return",a);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();function it(e){return ot.apply(this,arguments)}function ot(){return(ot=Object(p.a)(m.a.mark((function e(t){var n,a,r,i,o,l,c=arguments;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=c.length>1&&void 0!==c[1]?c[1]:[],a=c.length>2&&void 0!==c[2]?c[2]:"form",t&&t.name){e.next=4;break}return e.abrupt("return",[]);case 4:if(r=[{fieldName:"type",operator:"=",value:a}],"metaJsonModel"!==t.type){e.next=9;break}r.push({fieldName:"name",operator:"=",value:"custom-model-".concat(t.name,"-").concat(a)}),e.next=12;break;case 9:if(t.fullName){e.next=11;break}return e.abrupt("return");case 11:r.push({fieldName:"model",operator:"=",value:t.fullName});case 12:return e.next=14,ve.search("com.axelor.meta.db.MetaView",{fields:["name","title"],data:{criteria:[].concat(r,Object(s.a)(n)),operator:"and"}});case 14:return i=e.sent,o=(i||{}).data,l=(void 0===o?[]:o).filter((function(e){return null!==e.name})),l=ce.uniqBy(l||[],"name")||[],e.abrupt("return",l);case 19:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function lt(){return(lt=Object(p.a)(m.a.mark((function e(t,n,a){var r,i,o,l,c,u,d,p,b,f,v,g,y,h,O,E,j,x;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n){e.next=2;break}return e.abrupt("return",[]);case 2:if(!t||!n.fullName){e.next=16;break}return e.next=5,ve.post("/ws/meta/view",{data:{context:{"json-enhance":"true",_id:null},name:t,type:"form",criteria:a},model:n.fullName});case 5:return r=e.sent,i=(r||{}).data,l=(o=void 0===i?[]:i).fields,c=void 0===l?[]:l,u=o.jsonAttrs,d=void 0===u?[]:u,p=o.view,b=[].concat(Object(s.a)(c),Object(s.a)(d)),f=[],p&&p.items&&p.items.forEach((function(e){if(f.push(e),e){var t=e.items||[];t&&t.forEach((function(e){f.push(e);var t=(e||{}).jsonFields,n=void 0===t?[]:t;n.length>0&&n.forEach((function(e){f.push(e)}))}))}})),v=[].concat(Object(s.a)(b),f),g=ce.uniqBy(v,"name")||[],e.abrupt("return",[].concat(Object(s.a)(g),[{name:"self",label:"Self"}]));case 16:if(y=[],h=[],"metaModel"!==n.type){e.next=32;break}return e.next=20,ve.search("com.axelor.meta.db.MetaField",{data:{_domain:"self.metaModel.fullName = '".concat(n.fullName,"'"),_domainContext:{_model:"com.axelor.meta.db.MetaModel"}}});case 20:if(e.t0=e.sent,e.t0){e.next=23;break}e.t0={};case 23:return O=e.t0,y=ce.uniqBy(O.data||[],"label")||[],e.next=27,ve.search("com.axelor.meta.db.MetaJsonField",{data:{_domain:"self.model = '".concat(n.fullName,"' AND self.jsonModel is null"),_domainContext:{_model:"com.axelor.meta.db.MetaJsonField"}}});case 27:if(e.t1=e.sent,e.t1){e.next=30;break}e.t1={};case 30:E=e.t1,h=E.data||[];case 32:return e.next=34,ve.search("com.axelor.meta.db.MetaJsonField",{data:{_domain:"self.jsonModel.name = '".concat(n.name,"'"),_domainContext:{_model:"com.axelor.meta.db.MetaJsonField"}},fields:["name","model","type","title"]});case 34:if(e.t2=e.sent,e.t2){e.next=37;break}e.t2={};case 37:return j=e.t2,x=[].concat(Object(s.a)(y||[]),Object(s.a)(h||[]),Object(s.a)(j.data||[])),e.abrupt("return",x);case 40:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var ct=function(e){var t=e&&e.data,n=t&&t.fields,a=Object.values(t&&t.jsonFields||[{}]),r=[];return r=n||[],a&&a.forEach((function(e){var t=Object.values(e||{})||[];r=[].concat(Object(s.a)(r),Object(s.a)(t))})),r};function st(e){return ut.apply(this,arguments)}function ut(){return(ut=Object(p.a)(m.a.mark((function e(t){var n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ve.search("com.axelor.meta.db.MetaModel",{data:t});case 2:return n=e.sent,e.abrupt("return",n&&n.data&&n.data[0]);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function mt(){return(mt=Object(p.a)(m.a.mark((function e(t,n){var a,r,i,o,l,c,s,u,d,p,b=arguments;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=b.length>2&&void 0!==b[2]&&b[2],r=b.length>3&&void 0!==b[3]&&b[3],i=b.length>4&&void 0!==b[4]&&b[4],"com.axelor.meta.db.MetaJsonRecord"!==t||!n){e.next=11;break}return e.next=6,ve.get("ws/meta/fields/com.axelor.meta.db.MetaJsonRecord?jsonModel=".concat(n));case 6:return o=e.sent,l=ct(o)||[],e.abrupt("return",l&&l.filter((function(e){return i?!Ke.includes(e.type&&e.type.toLowerCase()):a?["many_to_one","one_to_many","many_to_many"].includes(e.type.toLowerCase()):r?e:["many_to_one","many-to-one"].includes(e.type.toLowerCase())})));case 11:return c={criteria:[{fieldName:"fullName",operator:"=",value:t}]},e.next=14,st(c);case 14:if(s=e.sent){e.next=17;break}return e.abrupt("return",[]);case 17:return u=s&&s.metaFields.map((function(e){return e.name})),e.next=20,ve.fields({fields:u,model:s.fullName});case 20:return d=e.sent,p=d&&d.data&&d.data.fields,e.abrupt("return",p&&p.filter((function(e){return i?!Ke.includes(e.type&&e.type.toLowerCase()):a?["many_to_one","one_to_many","many_to_many"].includes(e.type.toLowerCase()):r?e:["many_to_one","many-to-one"].includes(e.type.toLowerCase())})));case 23:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function dt(e){return pt.apply(this,arguments)}function pt(){return(pt=Object(p.a)(m.a.mark((function e(t){var n,a,r,i;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return",[]);case 2:if("metaModel"!==t.type){e.next=12;break}if(t.fullName){e.next=5;break}return e.abrupt("return",[]);case 5:return e.next=7,ve.get("ws/meta/fields/".concat(t.fullName));case 7:return n=e.sent,a=ct(n),e.abrupt("return",a);case 12:if(t.name){e.next=14;break}return e.abrupt("return",[]);case 14:return e.next=16,ve.get("ws/meta/fields/com.axelor.meta.db.MetaJsonRecord?jsonModel=".concat(t.name));case 16:return r=e.sent,i=ct(r),e.abrupt("return",i||[]);case 19:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function bt(){return(bt=Object(p.a)(m.a.mark((function e(t){var n,a,r;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ve.search("com.axelor.auth.db.Role",{fields:["name"],data:{criteria:Object(s.a)(t),operator:"and"}});case 2:return n=e.sent,a=(n||{}).data,r=void 0===a?[]:a,e.abrupt("return",r);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ft(){return(ft=Object(p.a)(m.a.mark((function e(t){var n,a,r;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ve.search("com.axelor.apps.message.db.Template",{data:t});case 2:if(-1!==(n=e.sent).status){e.next=5;break}return e.abrupt("return",[]);case 5:return a=(n||{}).data,r=void 0===a?[]:a,e.abrupt("return",r);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function vt(){return gt.apply(this,arguments)}function gt(){return(gt=Object(p.a)(m.a.mark((function e(){var t,n,a,r=arguments;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=r.length>0&&void 0!==r[0]?r[0]:{},e.next=3,ve.action({action:"action-wkf-process-config-attrs-set-model",data:{context:Object(c.a)({},t)},model:"com.axelor.apps.bpm.db.WkfProcessConfig"});case 3:if(!((n=e.sent)&&n.data&&n.data[0]&&n.data[0].attrs&&n.data[0].attrs.model)){e.next=7;break}return a=n.data[0].attrs.model.value,e.abrupt("return",a);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function yt(e){return ht.apply(this,arguments)}function ht(){return(ht=Object(p.a)(m.a.mark((function e(t){var n,a,r;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ve.search("com.axelor.meta.db.MetaView",{data:{_domain:"self.type = :type and self.extension IS NULL and self.name in :names",_domainContext:{type:"form",names:t&&t.length>0?t:[""]}},fields:["name","title","model"]});case 2:return n=e.sent,a=(n||{}).data,r=void 0===a?[]:a,e.abrupt("return",r);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ot(){return Et.apply(this,arguments)}function Et(){return(Et=Object(p.a)(m.a.mark((function e(){var t,n,a,r,i,o,l,s,u=arguments;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=u.length>0&&void 0!==u[0]?u[0]:{},e.next=3,ve.search("com.axelor.meta.db.MetaModel",{data:t});case 3:if(!(n=e.sent)||-1!==n.status){e.next=6;break}return e.abrupt("return",[]);case 6:return a=(n||{}).data,i=(r=void 0===a?[]:a).reduce(function(){var e=Object(p.a)(m.a.mark((function e(t,n){var a,r,i;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.then();case 2:if(a=e.sent,"fetchAPI"!==(r=K(n.name))){e.next=11;break}return e.next=7,it(Object(c.a)(Object(c.a)({},n),{},{type:"metaModel"}));case 7:(i=e.sent)&&i[0]&&a.push(i[0].name),e.next=12;break;case 11:r&&a.push(r);case 12:return e.abrupt("return",Promise.resolve(a));case 13:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),Promise.resolve([])),e.next=10,i;case 10:return o=e.sent,e.next=13,yt(o);case 13:return l=e.sent,s=r.reduce(function(){var e=Object(p.a)(m.a.mark((function e(t,n){var a,r,i,o;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.then();case 2:if(a=e.sent,"fetchAPI"!==(r=K(n.name))){e.next=11;break}return e.next=7,it(Object(c.a)(Object(c.a)({},n),{},{type:"metaModel"}));case 7:(i=e.sent)&&i[0]&&a.push(Object(c.a)(Object(c.a)({},n),{},{title:i[0].title})),e.next=12;break;case 11:r&&(o=l.find((function(e){return e.name===r})),a.push(Object(c.a)(Object(c.a)({},n),{},{title:o&&o.title})));case 12:return e.abrupt("return",Promise.resolve(a));case 13:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),Promise.resolve([])),e.abrupt("return",s);case 16:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function jt(){return xt.apply(this,arguments)}function xt(){return(xt=Object(p.a)(m.a.mark((function e(){var t,n,a,r,i=arguments;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=i.length>0&&void 0!==i[0]?i[0]:{},e.next=3,ve.search("com.axelor.meta.db.MetaJsonModel",{data:t});case 3:if(!(n=e.sent)||-1!==n.status){e.next=6;break}return e.abrupt("return",[]);case 6:return a=(n||{}).data,r=void 0===a?[]:a,e.abrupt("return",r);case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function wt(){return kt.apply(this,arguments)}function kt(){return(kt=Object(p.a)(m.a.mark((function e(){var t,n,a,r,i=arguments;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=i.length>0&&void 0!==i[0]?i[0]:{},e.next=3,Ot(t);case 3:if(e.t0=e.sent,e.t0){e.next=6;break}e.t0=[];case 6:return n=e.t0,e.next=9,jt(t);case 9:if(e.t1=e.sent,e.t1){e.next=12;break}e.t1=[];case 12:return a=e.t1,r=[].concat(Object(s.a)(n),Object(s.a)(a)),e.abrupt("return",r);case 15:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ct(){return Nt.apply(this,arguments)}function Nt(){return(Nt=Object(p.a)(m.a.mark((function e(){var t,n,a,r;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ve.search("com.axelor.meta.db.MetaMenu",{data:{_domain:"self.action is null"}});case 2:if(t=e.sent,n=(t||{}).data,-1!==(a=void 0===n?[]:n).status){e.next=6;break}return e.abrupt("return",[]);case 6:return r=a&&Object.values(a.reduce((function(e,t){return e[t.name]=t,e}),{})),e.abrupt("return",r);case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function St(e){return Mt.apply(this,arguments)}function Mt(){return(Mt=Object(p.a)(m.a.mark((function e(t){var n,a,r;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t&&t.name){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,ve.search("com.axelor.meta.db.MetaMenu",{data:{criteria:[{fieldName:"parent.name",operator:"=",value:t.name}],operator:"and"}});case 4:if(n=e.sent,a=(n||{}).data,-1!==(r=void 0===a?[]:a).status){e.next=8;break}return e.abrupt("return",[]);case 8:return e.abrupt("return",ce.uniqBy(r||[],"name")||[]);case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Tt(e){return Pt.apply(this,arguments)}function Pt(){return(Pt=Object(p.a)(m.a.mark((function e(t){var n,a,r;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ve.search("com.axelor.meta.db.MetaTranslation",{data:{_domain:"self.key = :key",_domainContext:{key:"value:".concat(t)}},sortBy:["id"]});case 2:return n=e.sent,a=(n||{}).data,r=void 0===a?[]:a,e.abrupt("return",r);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ft(e){return _t.apply(this,arguments)}function _t(){return(_t=Object(p.a)(m.a.mark((function e(t){var n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"ws/rest/com.axelor.meta.db.MetaTranslation/removeAll",e.next=3,ve.post("ws/rest/com.axelor.meta.db.MetaTranslation/removeAll",{records:t});case 3:if(n=e.sent,0!==(n||{}).status){e.next=7;break}return e.abrupt("return",!0);case 7:return e.abrupt("return",!1);case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Rt(e){return Lt.apply(this,arguments)}function Lt(){return(Lt=Object(p.a)(m.a.mark((function e(t){var n,a,r;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"ws/rest/com.axelor.meta.db.MetaTranslation",e.next=3,ve.post("ws/rest/com.axelor.meta.db.MetaTranslation",{records:t});case 3:return n=e.sent,a=(n||{}).data,r=void 0===a?[]:a,e.abrupt("return",r);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Dt(e){return It.apply(this,arguments)}function It(){return(It=Object(p.a)(m.a.mark((function e(t){var n,a,r;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,ve.search("com.axelor.apps.bpm.db.WkfDmnModel",{data:{_domain:null,_domainContext:{_id:null,_model:"com.axelor.apps.bpm.db.WkfDmnModel"},operator:"and",criteria:[{fieldName:"dmnTableList.decisionId",operator:"=",value:t}]}});case 4:return n=e.sent,a=(n||{}).data,r=(void 0===a?[]:a)[0],e.abrupt("return",r);case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function At(){return Vt.apply(this,arguments)}function Vt(){return(Vt=Object(p.a)(m.a.mark((function e(){var t;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"ws/app/info",e.next=3,ve.get("ws/app/info");case 3:return t=e.sent,e.abrupt("return",t);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Bt(){return $t.apply(this,arguments)}function $t(){return($t=Object(p.a)(m.a.mark((function e(){var t,n,a,r,i=arguments;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=i.length>0&&void 0!==i[0]?i[0]:[],e.next=3,ve.search("com.axelor.apps.bpm.db.BamlModel",{data:{criteria:t}});case 3:return n=e.sent,a=(n||{}).data,r=void 0===a?[]:a,e.abrupt("return",r);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Wt(){return Jt.apply(this,arguments)}function Jt(){return(Jt=Object(p.a)(m.a.mark((function e(){var t,n,a,r,i=arguments;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=i.length>0&&void 0!==i[0]?i[0]:[],e.next=3,ve.search("com.axelor.apps.bpm.db.DmnTable",{data:{criteria:t}});case 3:return n=e.sent,a=(n||{}).data,r=void 0===a?[]:a,e.abrupt("return",r);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function zt(e){return Gt.apply(this,arguments)}function Gt(){return(Gt=Object(p.a)(m.a.mark((function e(t){var n,a,r;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ve.search("com.axelor.apps.bpm.db.DmnField",t);case 2:return n=e.sent,a=(n||{}).data,r=void 0===a?[]:a,e.abrupt("return",r);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ut(e){return Ht.apply(this,arguments)}function Ht(){return(Ht=Object(p.a)(m.a.mark((function e(t){var n,a,r;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ve.search("com.axelor.apps.bpm.db.WkfProcess",Object(c.a)({},t));case 2:return n=e.sent,a=(n||{}).data,r=void 0===a?[]:a,e.abrupt("return",r);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function qt(){return Kt.apply(this,arguments)}function Kt(){return(Kt=Object(p.a)(m.a.mark((function e(){var t,n,a,r,i,o,l,c,u,d,p,b,f,v,g,y,h,O,E,j,x,w=arguments;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=w.length>0&&void 0!==w[0]?w[0]:[],n=[],a=[],r=[],!(t.length>0)){e.next=51;break}i=0;case 6:if(!(i<t.length)){e.next=27;break}if(o=t[i],l=o.type,c=o.model,u=o.modelFullName,"fetchAPI"!==(d=K(c))){e.next=14;break}return e.next=12,it({name:c,type:l,fullName:u});case 12:(p=e.sent)&&p[0]&&(d=p[0].name);case 14:if(!d){e.next=23;break}return"metaModel"===l&&a.push(u),e.next=18,ve.view({data:{name:"metaModel"===l?d:"custom-model-".concat(c,"-form"),type:"form"},model:c});case 18:b=e.sent,(f=b&&b.data&&b.data.view)&&(v=H(f,"button"),n=[].concat(Object(s.a)(n),Object(s.a)(v||[]))),e.next=24;break;case 23:"metaJsonModel"===l&&r.push(c);case 24:i++,e.next=6;break;case 27:if(!(a&&a.length>0)){e.next=38;break}g=0;case 29:if(!(g<a.length)){e.next=38;break}return e.next=32,ve.search("com.axelor.meta.db.MetaJsonField",{data:{criteria:[{fieldName:"model",operator:"like",value:a[g]},{fieldName:"type",operator:"=",value:"button"}],operator:"and"}});case 32:y=e.sent,(h=y&&y.data)&&h.length>0&&(n=[].concat(Object(s.a)(n),Object(s.a)(h||[])));case 35:g++,e.next=29;break;case 38:if(!(r&&r.length>0)){e.next=50;break}O=0;case 40:if(!(O<r.length)){e.next=50;break}return e.next=43,ve.get("ws/meta/fields/com.axelor.meta.db.MetaJsonRecord?jsonModel=".concat(r[O]));case 43:E=e.sent,j=ct(E),x=j.filter((function(e){return"button"===e.type})),n=[].concat(Object(s.a)(n),Object(s.a)(x||[]));case 47:O++,e.next=40;break;case 50:return e.abrupt("return",n);case 51:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Yt(e,t){return Xt.apply(this,arguments)}function Xt(){return(Xt=Object(p.a)(m.a.mark((function e(t,n){var a;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ve.upload(t,n);case 2:if(!(a=e.sent)||!a.result){e.next=5;break}return e.abrupt("return",a.result);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Zt(){return(Zt=Object(p.a)(m.a.mark((function e(t,n){var a,r,i,o,l,c;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return");case 2:if(!t.includes(".")){e.next=10;break}return e.next=5,ve.search(t,n);case 5:return a=e.sent,r=(a||{}).data,i=void 0===r?[]:r,e.abrupt("return",i);case 10:return e.next=12,ve.search("com.axelor.meta.db.MetaJsonRecord",{data:{_domain:"self.jsonModel = '".concat(t,"'")}});case 12:return o=e.sent,l=(o||{}).data,c=void 0===l?[]:l,e.abrupt("return",c);case 15:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Qt=Object(re.a)({root:{display:"flex",flexDirection:"column",marginTop:5},label:{fontWeight:"bolder",display:"inline-block",verticalAlign:"middle",color:"#666",marginBottom:3},textarea:{fontFamily:"Helvetica Neue, Helvetica, Arial, sans-serif",resize:"vertical","&:focus":{boxShadow:"rgba(82, 180, 21, 0.2) 0px 0px 1px 2px",outline:"none",borderColor:"rgb(82, 180, 21)"}},error:{borderColor:"#cc3333 !important",background:"#f0c2c2","&:focus":{boxShadow:"rgba(204,58,51, 0.2) 0px 0px 1px 2px !important",outline:"none",borderColor:"#cc3333 !important"}},readOnly:{borderColor:"#ccc !important",background:"#E3E3E3",color:"#7E7E7E","&:focus":{boxShadow:"none !important",outline:"none",borderColor:"#ccc !important"}}});function en(e){var t=e.entry,n=e.element,i=e.rows,o=void 0===i?1:i,c=e.bpmnModeler,s=e.readOnly,u=void 0!==s&&s,b=e.className,f=Qt(),v=t||{},g=v.label,y=v.description,h=v.get,O=v.set,E=v.modelProperty,j=v.getProperty,x=v.setProperty,w=v.validate,k=v.id,C=Object(a.useState)(null),N=Object(l.a)(C,2),S=N[0],M=N[1],T=Object(a.useState)(null),P=Object(l.a)(T,2),F=P[0],_=P[1],R=Object(a.useState)(!1),L=Object(l.a)(R,2),D=L[0],I=L[1],A=Object(a.useState)(u),V=Object(l.a)(A,2),B=V[0],$=V[1],W=Object(a.useState)(null),J=Object(l.a)(W,2),G=J[0],U=J[1],H=r.a.useCallback((function(){if(!w||(null===S||void 0===S)&&"id"===E)return _(null),!1;var e=w(n,Object(d.a)({},E,""===S?void 0:S));return e&&e[E]?(_(e[E]),!0):(_(null),!1)}),[w,n,S,E]);return Object(a.useEffect)((function(){var e=!0;function t(){return(t=Object(p.a)(m.a.mark((function t(){var a,r,i,o,l,s,u,d,p;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n&&["name","text"].includes(E)){t.next=2;break}return t.abrupt("return");case 2:if(a=n.businessObject,"bpmn:Participant"===(r=n&&n.type)&&"name"===E&&"process-name"===k&&(a=a&&a.processRef),i="bpmn:TextAnnotation"===r?"text":"bpmn:Group"===r?"categoryValue":"name",a){t.next=8;break}return t.abrupt("return");case 8:return o=a[i],l=a.$attrs&&a.$attrs["camunda:key"],s=l||o,t.next=13,Tt(s);case 13:if(u=t.sent,e&&(M(s),U(u)),!(u&&u.length>0)){t.next=30;break}if(s&&n.businessObject&&n.businessObject.$attrs&&(n.businessObject.$attrs["camunda:key"]=s),d=a.$attrs&&a.$attrs["camunda:isTranslations"]||!1,!z(d)){t.next=27;break}if(p=c.get("directEditing"),e&&$(!0),c){t.next=24;break}return t.abrupt("return");case 24:p&&p.cancel(),t.next=28;break;case 27:e&&$(!1);case 28:t.next=32;break;case 30:l&&n.businessObject&&n.businessObject.$attrs&&(n.businessObject.$attrs["camunda:key"]=l),e&&M(o);case 32:case"end":return t.stop()}}),t)})))).apply(this,arguments)}return function(){t.apply(this,arguments)}(),function(){return e=!1}}),[n,E,k,c]),Object(a.useEffect)((function(){var e=!0,t=H();if(e)return I(t),function(){return e=!1}}),[H]),Object(a.useEffect)((function(){if(n){var e=!0,t=h&&h(n),a=j?j(n):t&&t[E];if(e)return M(a),function(){return e=!1}}}),[n,E,h,j]),Object(a.useEffect)((function(){var e=!0;if(e)return $(u),function(){return e=!1}}),[u]),r.a.createElement("div",{className:ne()(f.root,b)},r.a.createElement("label",{className:f.label},g),r.a.createElement(ae.a,{id:"camunda_".concat(E,"_").concat(Date()),value:S||"",className:ne()(f.textarea,D&&f.error,B&&f.readOnly),minRows:o,onBlur:function(e){B||function(e){if(O||x){O?(O(n,Object(d.a)({},E,e),B,G),M(e)):(x(n,Object(d.a)({},E,e)),M(e));var t=H();I(t)}}(e.target.value)},onChange:function(e){M(e.target.value)},readOnly:"function"===typeof B?B():B}),F&&r.a.createElement(oe,{desciption:F,type:"error"}),y&&r.a.createElement(oe,{desciption:y}))}var tn=n(806),nn=Object(re.a)({root:{display:"flex",flexDirection:"column",marginTop:5,width:"100%"},error:{borderColor:"#cc3333 !important",background:"#f0c2c2","&:focus":{boxShadow:"rgba(204,58,51, 0.2) 0px 0px 1px 2px !important",outline:"none",borderColor:"#cc3333 !important"}},label:{fontWeight:"bolder",display:"inline-block",verticalAlign:"middle",color:"#666",marginBottom:3},fieldWrapper:{position:"relative"},input:{width:"calc(100% - 35px)",padding:"3px 28px 3px 6px ",border:"1px solid #ccc","&:focus":{boxShadow:"rgba(82, 180, 21, 0.2) 0px 0px 1px 2px",outline:"none",borderColor:"rgb(82, 180, 21)"}},clearButton:{background:"transparent",border:"none",top:0,right:0,position:"absolute",height:23,width:24,overflow:"hidden",cursor:"pointer",display:"flex",alignItems:"center"},clear:{fontSize:"1rem"},readOnly:{borderColor:"#ccc !important",background:"#E3E3E3",color:"#7E7E7E","&:focus":{boxShadow:"none !important",outline:"none",borderColor:"#ccc !important",color:"#7E7E7E"}}});function an(e){var t=e.entry,n=e.element,i=e.canRemove,o=void 0!==i&&i,c=e.rootClass,s=e.labelClass,u=e.type,m=void 0===u?"text":u,p=e.isLabel,b=void 0===p||p,f=e.readOnly,v=void 0!==f&&f,g=e.clearClassName,y=e.disabled,h=void 0!==y&&y,O=e.showError,E=e.isDefinition,j=void 0!==E&&E,x=(e.wkf,nn()),w=t||{},k=w.label,C=w.description,N=w.modelProperty,S=w.set,M=w.get,T=w.setProperty,P=w.getProperty,F=w.validate,_=Object(a.useState)(null),R=Object(l.a)(_,2),L=R[0],D=R[1],I=Object(a.useState)(null),A=Object(l.a)(I,2),V=A[0],B=A[1],$=Object(a.useState)(!1),W=Object(l.a)($,2),J=W[0],z=W[1],G=function(e){if(S||T){S?S(n,Object(d.a)({},N,e)):T(n,Object(d.a)({},N,e));var t=U();z(t)}},U=r.a.useCallback((function(){if(!F||(null===L||void 0===L)&&"id"===N)return B(null),!1;var e=F(n,Object(d.a)({},N,""===L?void 0:L));return e&&e[N]?(B(e[N]),!0):(B(null),!1)}),[F,n,L,N]);return Object(a.useEffect)((function(){var e=function(){var e=U();z(e)};j?O?e():(B(null),z(!1)):e()}),[U,O,j]),Object(a.useEffect)((function(){if(n){var e=M&&M(n),t=P?P(n):e&&e[N];D(t)}}),[n,N,M,P]),r.a.createElement("div",{className:ne()(x.root,c)},b&&r.a.createElement("label",{className:ne()(x.label,s)},k),r.a.createElement("div",{className:x.fieldWrapper},r.a.createElement("input",{id:"camunda-".concat(N,"_").concat(Date()),type:m,readOnly:v,name:N,value:L||"",onChange:function(e){D("code"!==N?e.target.value:e.target.value&&e.target.value.toUpperCase())},disabled:h,className:ne()(x.input,J&&x.error,v&&x.readOnly),onBlur:function(e){return G(e.target.value)}}),V&&r.a.createElement(oe,{desciption:V,type:"error"}),o&&L&&!v&&r.a.createElement("button",{onClick:function(){D("");var e=U();z(e),e||G("")},className:ne()(x.clearButton,g)},r.a.createElement(tn.a,{className:x.clear}))),C&&r.a.createElement(oe,{desciption:C}))}var rn=Object(re.a)({root:{display:"flex",flexDirection:"column",marginTop:5},label:{fontWeight:"bolder",display:"inline-block",verticalAlign:"middle",color:"#666",marginBottom:3}});function on(e){var t=e.entry,n=e.element,i=rn(),o=t||{},c=o.id,s=o.emptyParameter,u=o.selectOptions,m=o.canBeDisabled,p=o.canBeHidden,b=o.label,f=o.modelProperty,v=o.description,g=o.set,y=o.get,h=o.getProperty,O=o.setProperty,E=o.disabled,j=void 0!==E&&E,x=Object(a.useState)([]),w=Object(l.a)(x,2),k=w[0],C=w[1],N=Object(a.useState)(null),S=Object(l.a)(N,2),M=S[0],T=S[1];return Object(a.useEffect)((function(){if(n){var e=y&&y(n),t=h?h(n):e&&e[f];T(t)}}),[n,f,y,h]),Object(a.useEffect)((function(){if("object"===typeof u)C(u);else{var e=u(n);e&&C(e)}}),[u,n]),r.a.createElement("div",{className:i.root},r.a.createElement("label",{htmlFor:"camunda-".concat(c),className:i.label},b),r.a.createElement("select",{id:"camunda-".concat(c,"-select"),name:f,"data-disable":m?"isDisabled":"","data-show":p?"isHidden":"",value:M||"",onChange:function(e){T(e.target.value),(g||O)&&(g?g(n,Object(d.a)({},f,e.target.value)):O(n,Object(d.a)({},f,e.target.value)))},disabled:j},k&&k.map((function(e,t){return r.a.createElement("option",{value:e.value,key:t},e.name?e.name:""," ")})),s&&r.a.createElement("option",{value:""})),v&&r.a.createElement(oe,{desciption:v}))}var ln=n(31),cn=n.n(ln),sn=Object(re.a)({root:{display:"flex",flexDirection:"column",marginTop:10},extensionElements:{width:"100%"},label:{fontWeight:"bolder",display:"inline-block",verticalAlign:"middle",color:"#666",marginBottom:3},add:{top:"-23px !important",position:"absolute",height:23,width:24,overflow:"hidden",cursor:"pointer",backgroundColor:"#f8f8f8",border:"1px solid #ccc",borderBottom:"none",right:0},clear:{top:"-23px !important",position:"absolute",height:23,width:24,overflow:"hidden",cursor:"pointer",backgroundColor:"#f8f8f8",border:"1px solid #ccc",borderBottom:"none",right:23},container:{position:"relative"}});function un(e){var t=e.entry,n=e.bpmnModdle,i=e.definition,o=e.bpmnModeler,c=e.defaultOptions,u=void 0===c?[]:c,m=sn(),d=t||{},p=d.label,b=d.canBeHidden,v=d.id,g=d.referenceProperty,y=d.set,h=d.emptyParameter,O=void 0===h||h,E=d.elementType,j=d.newElementIdPrefix,x=d.get,w=Object(a.useState)(""),k=Object(l.a)(w,2),C=k[0],N=k[1],S=Object(a.useState)([{name:"",value:"",id:""}]),M=Object(l.a)(S,2),T=M[0],P=M[1],F=r.a.useCallback((function(e){var t=o&&o.get("canvas").getRootElement().businessObject.$parent.rootElements,n=t&&t.find((function(t){return t.id===e}));i[g]=n,N(e),y(e,n)}),[y,o,g,i]);return Object(a.useEffect)((function(){var e=x();N(e[g])}),[x,g]),Object(a.useEffect)((function(){P(u)}),[u]),r.a.createElement("div",{className:m.root},r.a.createElement("div",{"data-show":b?"hideElements":""},r.a.createElement("label",{htmlFor:"cam-extensionElements-".concat(v),className:m.label},p),r.a.createElement("div",{className:m.container},r.a.createElement("select",{id:"cam-extensionElements-".concat(v),className:m.extensionElements,name:"selectedExtensionElement","data-list-entry-container":!0,value:C||"",onChange:function(e){F(e.target.value)}},T&&T.length>0&&T.map((function(e){return r.a.createElement("option",{value:e.id,key:e.value},e.name)})),O&&r.a.createElement("option",{value:""})),r.a.createElement("button",{className:m.add,id:"cam-extensionElements-create-".concat(v),onClick:function(){var e=j||"elem_",t=cn.a.nextId(e),a=cn.a.nextId(e),r=function(e,t,n){var a=cn.a.findRootElementsByType(e,t);return f()(a,(function(e){return e.id===n}))}(i,E,a);if(!r){var l=cn.a.getRoot(i);r=n.create(E,{id:t,name:a}),(o&&o.get("canvas").getRootElement().businessObject.$parent.rootElements).push(r),r.$parent=l,i[g]=r}P([].concat(Object(s.a)(T||[]),[{name:"".concat(a," (id=").concat(t,")"),value:a,id:t}])),F(t)}},r.a.createElement("span",null,"+")))))}var mn=Object(re.a)({root:{display:"flex",alignItems:"center",marginTop:5},label:{fontWeight:"bolder",color:"#666"},checkbox:{margin:"3px 3px 3px 0px"}});function dn(e){var t=e.entry,n=e.element,i=e.className,o=e.labelClassName,c=mn(),s=t||{},u=s.id,m=s.label,p=s.modelProperty,b=s.get,f=s.set,v=Object(a.useState)(!1),g=Object(l.a)(v,2),y=g[0],h=g[1];return Object(a.useEffect)((function(){if(n&&b){var e=b&&b(n),t=e&&e[p];h(t||!1)}}),[n,p,b]),r.a.createElement("div",{className:ne()(c.root,i)},r.a.createElement("input",{id:"camunda-".concat(u),type:"checkbox",name:p,checked:y,onChange:function(){h((function(e){return!e})),f(n,Object(d.a)({},p,y))},className:c.checkbox}),m&&r.a.createElement("label",{htmlFor:"camunda-".concat(u),className:ne()(c.label,o)},m))}var pn=Object(re.a)({root:{display:"flex",flexDirection:"column",marginTop:10},extensionElements:{width:"100%"},label:{fontWeight:"bolder",display:"inline-block",verticalAlign:"middle",color:"#666",marginBottom:3},add:{top:"-23px !important",position:"absolute",height:23,width:24,overflow:"hidden",cursor:"pointer",backgroundColor:"#f8f8f8",border:"1px solid #ccc",borderBottom:"none",right:0},clear:{top:"-23px !important",position:"absolute",height:23,width:24,overflow:"hidden",cursor:"pointer",backgroundColor:"#f8f8f8",border:"1px solid #ccc",borderBottom:"none",right:23},container:{position:"relative"}});function bn(e){var t=e.entry,n=e.options,i=pn(),o=t||{},c=o.label,u=o.defaultSize,m=void 0===u?5:u,d=o.id,p=o.setOptionLabelValue,b=o.createExtensionElement,f=o.onSelectionChange,v=o.removeExtensionElement,g=Object(a.useState)([]),y=Object(l.a)(g,2),h=y[0],O=y[1],E=Object(a.useState)(null),j=Object(l.a)(E,2),x=j[0],w=j[1],k=function(e){w(e.target.value),f(e.target.value)};return Object(a.useEffect)((function(){n&&O(n)}),[n]),r.a.createElement("div",{className:i.root},r.a.createElement("div",null,r.a.createElement("label",{htmlFor:"cam-extensionElements-".concat(d),className:i.label},c),r.a.createElement("div",{className:i.container},r.a.createElement("select",{id:"cam-extensionElements-".concat(d),className:i.extensionElements,name:"selectedExtensionElement",size:m,"data-list-entry-container":!0,value:x||"",onChange:function(){}},h&&h.length>0&&h.map((function(e){return r.a.createElement("option",{key:e.id,value:e.id,onClick:k},e.text)}))),r.a.createElement("button",{className:i.add,id:"cam-extensionElements-create-".concat(d),onClick:function(){b();var e=p(h.length);O((function(t){return[].concat(Object(s.a)(t||[]),[{id:t.length,text:e}])})),w(h.length),f(h.length)}},r.a.createElement("span",null,"+")),r.a.createElement("button",{className:i.clear,id:"cam-extensionElements-remove-".concat(d),onClick:function(){v(x)}},r.a.createElement("span",{style:{fontSize:10}},"X")))))}var fn=n(432),vn=n(807),gn=Object(re.a)({root:{display:"flex",flexDirection:"column",marginTop:5,marginBottom:5},add:{backgroundColor:"#f8f8f8",border:"1px solid #ccc",height:23,width:24,overflow:"hidden",cursor:"pointer",borderRadius:0},clear:{height:23,width:24,overflow:"hidden",cursor:"pointer",backgroundColor:"#f8f8f8",border:"1px solid #ccc",borderRadius:0},label:{fontWeight:"bolder",verticalAlign:"middle",color:"#666",marginBottom:3,marginRight:10},tableHead:{display:"table-row",verticalAlign:"inherit",borderColor:"inherit",textAlign:"center"},input:{padding:"3px 0px 3px 6px",border:"1px solid #ccc",minWidth:30,maxWidth:"95%",width:"100%","&:focus":{boxShadow:"rgba(82, 180, 21, 0.2) 0px 0px 1px 2px",outline:"none",borderColor:"rgb(82, 180, 21)"}}});function yn(e){var t=e.entry,n=gn(),i=t||{},o=i.id,c=i.addLabel,u=i.labels,m=i.modelProperties,d=i.getElements,p=i.addElement,b=i.removeElement,f=i.updateElement,v=Object(a.useState)([]),g=Object(l.a)(v,2),y=g[0],h=g[1],O=r.a.useCallback((function(){var e=d&&d();h(Object(s.a)(e||[]))}),[d]);return Object(a.useEffect)((function(){O()}),[O]),r.a.createElement("div",{className:n.root},r.a.createElement("div",{style:{display:"flex",alignItems:"center"}},r.a.createElement("label",{className:n.label},c),r.a.createElement(fn.a,{size:"small",className:n.add,id:"cam-extensionElements-create-".concat(o),onClick:function(){h([].concat(Object(s.a)(y||[]),[{key:void 0,value:void 0}])),p({key:void 0,value:void 0})}},r.a.createElement(vn.a,{fontSize:"small"}))),y&&y.length>0&&r.a.createElement("table",null,r.a.createElement("tbody",null,r.a.createElement("tr",{className:n.tableHead},u.map((function(e){return r.a.createElement("th",{key:e,className:n.label},e)})),r.a.createElement("th",{key:"add"})),y&&y.map((function(e,t){return r.a.createElement("tr",{key:"".concat(e,"_").concat(t)},r.a.createElement(r.a.Fragment,null,m&&m.map((function(a,i){return r.a.createElement("td",{key:"".concat(e[a],"_").concat(i)},r.a.createElement("input",{className:n.input,type:"text",defaultValue:e[a]||"",onBlur:function(e){!function(e,t,n){var a=Object(s.a)(y||[]);a[n][t]=e,h(a),f(e,t,n)}(e.target.value,a,t)}}))})),r.a.createElement("td",null,r.a.createElement(fn.a,{size:"small",className:n.clear,id:"cam-extensionElements-remove-".concat(o),onClick:function(){!function(e){var t=Object(s.a)(y||[]);t.splice(e,1),h(Object(s.a)(t||[])),b(e)}(t)}},r.a.createElement(tn.a,{fontSize:"small"})))))})))))}var hn=n(422),On=(n(726),Object(re.a)({root:{marginTop:8},label:{fontWeight:"bolder",display:"inline-block",verticalAlign:"middle",color:"#666",marginBottom:3}})),En={"5eaeda":"#5eaeda","3fbdd6":"#3fbdd6",f79000:"#f79000",f8b200:"#f8b200","3f97f6":"#3f97f6",e76092:"#e76092","3ebfa5":"#3ebfa5",ff9e0f:"#ff9e0f",fba729:"#fba729","6097fc":"#6097fc","55c041":"#55c041",ff7043:"#ff7043",f9c000:"#f9c000",ff9800:"#ff9800",a80ca8:"#a80ca8",e53935:"#e53935","000000":"#000000"};function jn(e){var t=e.changeColor,n=e.entry,i=e.element,o=Object(a.useState)("#fff"),c=Object(l.a)(o,2),s=c[0],u=c[1],m=(n||{}).label,d=void 0===m?"":m,p=On();return Object(a.useEffect)((function(){var e=Object(P.getBusinessObject)(i),t=e&&e.di&&e.di.stroke;t&&u(t)}),[i]),r.a.createElement("div",{className:p.root},r.a.createElement("label",{className:p.label},d),r.a.createElement(hn.a,{value:s,deferred:!0,hideTextfield:!0,palette:En,onChange:function(e){u(e),e&&e.css&&e.css.backgroundColor&&t(e.css.backgroundColor)}}))}var xn=n(815),wn=n(42),kn=n(855),Cn=n(748),Nn=n(759),Sn=n(757),Mn=["name","value","onChange","options","title","className","disableUnderline"],Tn=Object(F.a)((function(e){return{root:{display:"flex",flexWrap:"wrap"},select:{width:"150px"}}}));function Pn(e){var t=e.name,n=e.value,a=void 0===n?"":n,i=e.onChange,o=e.options,l=e.title,c=e.className,s=e.disableUnderline,u=void 0!==s&&s,m=Object(wn.a)(e,Mn),d=Tn();return r.a.createElement(Cn.a,{className:ne()(d.formControl,c)},r.a.createElement(Nn.a,null,l),r.a.createElement(Sn.a,Object.assign({disableUnderline:u,value:a,onChange:function(e){return i(e.target.value)},name:t,style:{marginRight:8},classes:{select:ne()(d.select,c)}},m),o&&Array.isArray(o)&&o.map((function(e,t){var n=e.name,a=e.title;return r.a.createElement(kn.a,{value:n,key:t},a)}))))}var Fn=n(749),_n=n(810),Rn=["name","title","autoTitle","value","onChange","onBlur","readOnly","inline","InputProps","style","disableUnderline","className"];function Ln(e){var t=e.name,n=e.title,a=e.autoTitle,i=e.value,o=void 0===i?"":i,l=e.onChange,s=e.onBlur,u=e.readOnly,m=e.inline,d=e.InputProps,p=e.style,b=e.disableUnderline,f=void 0!==b&&b,v=e.className,g=Object(wn.a)(e,Rn);return m?r.a.createElement(Fn.a,Object.assign({style:Object(c.a)({width:"100%"},p),className:v,placeholder:n,inputProps:{"aria-label":n,disableUnderline:f},name:t,onChange:function(e){return l(e.target.value)},onBlur:s,autoComplete:"off",readOnly:u,disabled:u,value:o||""},g)):r.a.createElement(_n.a,Object.assign({id:"filled-".concat(t),label:n||a,name:t,style:Object(c.a)({width:"100%"},p),onChange:function(e){return l(e.target.value)},onBlur:s,autoComplete:"off",InputProps:Object(c.a)(Object(c.a)({readOnly:u},d),{},{disableUnderline:f}),value:o||"",className:ne()(g.className,v)},g))}Ln.defaultProps={rows:3,readOnly:!1};var Dn=Ln,In=n(265),An=Object(F.a)((function(e){return{button:{color:"#0275d8",textTransform:"none"},buttonLabel:{maxHeight:30}}}));var Vn=function(e){var t=e.title,n=e.Icon,a=e.onClick,i=e.className,o=An();return t?n?r.a.createElement(In.a,{className:ne()(o.button,o.buttonLabel,i),endIcon:r.a.createElement(n,null),onClick:a},t):r.a.createElement(In.a,{className:ne()(o.button,o.buttonLabel,i),onClick:a},t):r.a.createElement(fn.a,{size:"medium",onClick:a,className:ne()(o.button,i),style:{padding:"0px 12px"}},r.a.createElement(n,{fontSize:"small"}))},Bn=["type","title","onChange","value","readOnly","scale","customeFormat","onBlur","className","disableUnderline"];function $n(e){var t=e.type,n=void 0===t?"integer":t,i=e.title,o=e.onChange,c=e.value,s=void 0===c?0:c,u=(e.readOnly,e.scale),m=void 0===u?2:u,d=(e.customeFormat,e.onBlur),p=e.className,b=e.disableUnderline,f=Object(wn.a)(e,Bn),v=Object(a.useState)(s),g=Object(l.a)(v,2),y=g[0],h=g[1],O=Object(a.useCallback)((function(e){return Number(Number(e).toFixed("integer"===n?0:m))}),[n,m]);return r.a.useEffect((function(){h(O(s))}),[s,h,O]),r.a.createElement(Dn,Object.assign({className:p,onChange:h,title:i,type:"number",value:"".concat(y),onBlur:function(e){o(O(y)),h(O(y)),d&&d(e)},disableUnderline:b},f))}$n.defaultProps={readOnly:!1};var Wn=$n,Jn=n(231),zn=n(811),Gn=n(813),Un=n(814),Hn=n(56),qn=[{name:"and",title:"AND"},{name:"or",title:"OR"}],Kn={and:"&&",or:"||"},Yn={and:"and",or:"or"},Xn={JS:".",GROOVY:"?.",BPM:"."},Zn={date:"DD/MM/YYYY",time:"HH:mm:ss",datetime:"DD/MM/YYYY HH:mm"},Qn=["=",">=","<=",">","<","like","isNull","between","contains","in","isTrue"],ea=["many_to_many","many-to-many","json_many_to_many","json-many-to-many","one_to_one","one-to-one","json_one_to_one","json-one-to-one","enum"],ta=["long","decimal","date","time","datetime","enum","text","integer","boolean","many_to_many","many-to-many","json_many_to_many","json-many-to-many","many_to_one","many-to-one","json_many_to_one","json-many-to-one","one_to_one","one-to-one","json_one_to_one","json-one-to-one","string"],na={enum:["=","!=","isNull","isNotNull"],text:["like","notLike","isNull","isNotNull"],integer:["=","!=",">=","<=",">","<","between","notBetween","isNull","isNotNull"],boolean:["isTrue","isFalse"],button:["="]},aa={JS:{"=":"===","!=":"!==",">":">",">=":">=","<":"<","<=":"<=",in:"in",notIn:"in",like:"LIKE",notLike:"NOT LIKE",isNotNull:"!== null",isNull:"=== null",isTrue:"===",isFalse:"==="},GROOVY:{"=":"==","!=":"!=",">":">",">=":">=","<":"<","<=":"<=",isNotNull:"!= null",isNull:"== null",isTrue:"==",isFalse:"==",in:"contains",notIn:"contains",like:"contains",notLike:"contains",contains:"contains",notContains:"contains"},BPM:{"=":"=","!=":"!=",">":">",">=":">=","<":"<","<=":"<=",isNotNull:"is NOT NULL",isNull:"is NULL",isTrue:"is",isFalse:"is",in:"IN",notIn:"NOT IN",like:"LIKE",notLike:"NOT LIKE",contains:"MEMBER OF",notContains:"NOT MEMBER OF"}},ra=[{name:"=",title:"equals"},{name:"!=",title:"not equal"},{name:">",title:"greater than"},{name:">=",title:"greater or equal"},{name:"<",title:"less than"},{name:"<=",title:"less or equal"},{name:"in",title:"in"},{name:"between",title:"between"},{name:"notBetween",title:"not Between"},{name:"notIn",title:"not in"},{name:"isNull",title:"is null"},{name:"isNotNull",title:"is not null"},{name:"like",title:"contains"},{name:"notLike",title:"doesn't contain"},{name:"isTrue",title:"is true"},{name:"isFalse",title:"is false"},{name:"contains",title:"contains"},{name:"notContains",title:"not contains"}],ia=["inline","type","disableUnderline","className"],oa=["name","title","format","error","onChange"],la={date:zn.a,time:Gn.a,datetime:Un.a};var ca=function(e){var t=e.inline,n=e.type,i=void 0===n?"date":n,o=e.disableUnderline,s=void 0!==o&&o,u=e.className,m=Object(wn.a)(e,ia),d=Object(a.useState)(!1),p=Object(l.a)(d,2),b=p[0],f=p[1],v=r.a.useRef(),g=(m.name,m.title),y=m.format,h=(m.error,m.onChange),O=Object(wn.a)(m,oa),E=la[i];return r.a.createElement(Hn.a,{utils:Jn.a},r.a.createElement(E,Object.assign({autoOk:!0,open:b,ampm:!1,views:"date"===i?["date"]:"datetime"===i?["date","hours","minutes"]:"time"===i?["hours","minutes","seconds"]:["date"],InputProps:{disableUnderline:s},onChange:function(e){v.current=e,h(e)},PopoverProps:{anchorOrigin:{vertical:"bottom",horizontal:"left"},transformOrigin:{vertical:"top",horizontal:"left"}},disableToolbar:!0,variant:"inline"},t?{invalidDateMessage:""}:{},{className:u,style:Object(c.a)({width:"100%"},t?{margin:0}:{}),label:t?"":g,format:y||Zn[i]},"time"!==i?{animateYearScrolling:!1}:{},O,{onKeyDown:function(e){40===e.keyCode&&f(!0)},onClose:function(){h(v.current),f(!1)},onOpen:function(){return f(!0)}})))},sa=n(856),ua=n(812),ma=n(851),da=n(232),pa=n.n(da);function ba(e){return"bpmQuery"===e}function fa(e){if(e)return e.charAt(0).toLowerCase()+e.slice(1)}function va(e){return!e||"bpmn:SubProcess"!==e.$type&&"bpmn:Transaction"!==e.$type?e:va(e.$parent)}function ga(e,t){if(t)return{criteria:[{fieldName:"name",operator:"IN",value:t&&t.length>0?t:[""]}],operator:"or"};if(!e)return null;var n=va(e&&e.businessObject);n=n&&n.$parent,e&&"bpmn:Process"===e.type?n=e.businessObject:!n||"bpmn:SubProcess"!==n.$type&&"bpmn:Transaction"!==n.$type?"bpmn:Participant"===(e&&e.businessObject&&e.businessObject.$type)&&(n=e&&e.businessObject&&e.businessObject.processRef):n=va(n.$parent);var a=n&&n.extensionElements,r={criteria:[{fieldName:"name",operator:"IN",value:[""]}]};if(!a||!a.values)return r;var i=a.values.find((function(e){return"camunda:ProcessConfiguration"===e.$type})),o=[],l=[];if(!i&&!i.processConfigurationParameters)return r;i.processConfigurationParameters.forEach((function(e){e.metaModel?o.push(e.metaModel):e.metaJsonModel&&l.push(e.metaJsonModel)}));var c=[].concat(o,l);return{criteria:[{fieldName:"name",operator:"IN",value:c&&c.length>0?c:[""]}],operator:"or"}}var ya=function(e,t,n){var a=e.type,r=e.jsonField,i=e.targetName;switch(a){case"text":case"string":case"date":case"datetime":case"time":return"json_extract_text(".concat(t,".").concat(r,",'").concat(n,"')");case"many-to-one":case"json-many-to-one":case"many_to_one":case"json_many_to_one":return i?"json_extract_text(".concat(t,".").concat(r,",'").concat(n,"','").concat(i,"')"):"json_extract_text(".concat(t,".").concat(r,",'").concat(n,"')");case"integer":return"json_extract_integer(".concat(t,".").concat(r,",'").concat(n,"')");case"decimal":return"json_extract_decimal(".concat(t,".").concat(r,",'").concat(n,"')");case"boolean":return"json_extract_boolean(".concat(t,".").concat(r,",'").concat(n,"')")}},ha={JS:".",GROOVY:"?.",BPM:"."},Oa=["name","value","onChange","options","optionLabelKey","optionValueKey","isMulti","title","fetchAPI","inline","InputProps","error","filterSelectedOptions","disableCloseOnSelect","readOnly"],Ea=Object(re.a)((function(e){return{listbox:{maxHeight:"300px !important"},chip:{"&.MuiChip-outlined .MuiChip-deleteIconSmall":{color:"#0275d8"},border:"1px solid #0275d8",color:"#0275d8"}}}));function ja(e){var t=Object(a.useState)(!1),n=Object(l.a)(t,2),i=n[0],o=n[1],s=Object(a.useState)([]),u=Object(l.a)(s,2),d=u[0],b=u[1],f=Object(a.useState)(e.isMulti?[]:null),v=Object(l.a)(f,2),g=v[0],y=v[1],h=Object(a.useState)(""),O=Object(l.a)(h,2),E=O[0],j=O[1],x=e.name,w=e.value,k=e.onChange,C=e.options,N=e.optionLabelKey,S=void 0===N?"title":N,M=e.optionValueKey,T=void 0===M?"id":M,P=e.isMulti,F=void 0!==P&&P,_=e.title,R=e.fetchAPI,L=e.inline,D=e.InputProps,I=e.error,A=e.filterSelectedOptions,V=void 0!==A&&A,B=e.disableCloseOnSelect,$=void 0===B||B,W=e.readOnly,z=Object(wn.a)(e,Oa),G=Ea(),U=Object(a.useState)(!1),H=Object(l.a)(U,2),q=H[0],K=H[1],Y=r.a.useCallback((function(e){return C&&C.find((function(t){return t&&t[T]===e.trim()}))}),[C,T]);function X(){return(X=Object(p.a)(m.a.mark((function e(){var t,n=arguments;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=n.length>0&&void 0!==n[0]?n[0]:"",j(t);case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Z=function(e,t){var n=r.a.useRef(null),a=function(){return n.current&&clearTimeout(n.current)},i=function(e){return n.current=setTimeout(e,t)};return r.a.useEffect((function(){return function(){return a()}}),[]),function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];a(),i((function(){return e.apply(void 0,n)}))}}((function(){return X.apply(this,arguments)}),400);function Q(e){"Backspace"===e.key&&g&&g[S]===E&&k(null)}function ee(e){k("string"===typeof w?F?e.map((function(e){return e&&e[T]})).join(",")||[]:e&&e[T]:e)}Object(a.useEffect)((function(){var e=!0;return i&&(K(!0),R?Object(p.a)(m.a.mark((function t(){var n;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,R({search:E});case 2:n=t.sent,e&&(b(n),K(!1));case 4:case"end":return t.stop()}}),t)})))():(b(C),K(!1))),function(){e=!1,K(!1)}}),[R,C,E,i]),Object(a.useEffect)((function(){if("string"===typeof w){var e=w.split(",");y(F?e.map((function(e){return Y(e)})):Y(e[0]))}else y(w||(F?[]:null))}),[w,F,Y]);var te=function(e){return"metaJsonModel"===(e&&e.type)?"".concat(e&&e.title," (").concat(e&&e[S]?e[S]:"",") (Custom model)")||!1:"fieldName"===x?"".concat(J(e&&e.title?e.title:"")," (").concat(e&&e[S],")"):"metaModel"===(e&&e.type)?"".concat(e&&e.title?e.title:""," (").concat(e&&e[S]?e[S]:"",")")||!1:"dmnModel"===(e&&e.type)?"".concat(e&&e.dmnNodeNameId?e.dmnNodeNameId:""," (").concat(e&&e.resultVariable?e.resultVariable:"",")")||!1:e?e[S]?e[S]:e.id?e.id.toString():"":""};return r.a.createElement(ma.a,Object.assign({getOptionSelected:function(e,t){return F?e[T]===t[T]:te(e)===te(t)},getOptionLabel:function(e){return te(e)},disabled:W,loading:q,id:pa()("select-widget"),open:i,onOpen:function(){return o(!0)},onClose:function(){return o(!1)},value:g?F?Array.isArray(g)?g:[]:g:F?[]:null,onChange:function(e,t){return ee(t)},options:d||[],multiple:F,filterSelectedOptions:V,onInputChange:function(e,t){return Z(t)},classes:{option:"menu-item",listbox:G.listbox},renderTags:function(e,t){return e.map((function(e,n){return r.a.createElement(sa.a,Object.assign({variant:"outlined",label:e[S],size:"small",classes:{root:G.chip}},t({index:n})))}))},renderInput:function(e){return r.a.createElement(_n.a,Object.assign({},e,{error:I,label:L?"":_,fullWidth:!0,onClick:function(){W||o(!0)},InputProps:Object(c.a)(Object(c.a)(Object(c.a)({},D),e.InputProps),{},{endAdornment:r.a.createElement(r.a.Fragment,null,q?r.a.createElement(ua.a,{className:G.circularProgress,size:15}):null,e.InputProps.endAdornment)})},F?{}:{onKeyDown:Q}))}},F?{disableCloseOnSelect:$}:{},z))}var xa=Object(F.a)((function(){return{MuiAutocompleteRoot:{width:"250px",marginRight:"10px"},iconButton:{marginRight:10},icon:{color:"#0275d8"}}}));function wa(e){var t=e.initValue,n=void 0===t?"":t,i=e.getMetaFields,o=e.onChange,u=e.value,d=e.classNames,b=e.isParent,f=void 0!==b&&b,v=e.isUserPath,g=void 0!==v&&v,y=e.startModel,h=e.isCollection,O=void 0!==h&&h,E=e.allowAllFields,j=void 0!==E&&E,x=e.excludeUITypes,w=void 0!==x&&x,k=e.isDatePath,C=void 0!==k&&k,N=u||{},S=N.fieldName,M=void 0===S?"":S,T=N.allFields,P=Object(a.useState)([]),F=Object(l.a)(P,2),_=F[0],R=F[1],L=Object(a.useState)(!0),D=Object(l.a)(L,2),I=D[0],A=D[1],B=Object(a.useState)(!0),$=Object(l.a)(B,2),W=$[0],z=$[1],G=Object(a.useState)(null),U=Object(l.a)(G,2),H=U[0],q=U[1],K=xa(),Y=M&&M.split("."),X=Y||[],Z=Object(l.a)(X,1)[0],Q=M&&f&&_&&_.some((function(e){return e.name===Z})),ee=Q&&(_.find((function(e){return e.name===Z}))||{}).target,te=Q&&(_.find((function(e){return e.name===Z}))||{}).jsonTarget;function ae(e){e&&_.some((function(t){return t.name===e.name&&t.target}));var t=f?"".concat(n).concat(e?e.name:""):e?e.name:"";t=e&&e.name?t:t.slice(0,-1);var a=H&&[].concat(Object(s.a)(H||[]),[e]).reverse().find((function(e){return e&&e.target}));o(""===t?void 0:t,e,a)}var re=_&&_.find((function(e){return e.name===Z}));return Object(a.useEffect)((function(){var e=!0;return Object(p.a)(m.a.mark((function t(){var n;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,i();case 2:n=t.sent,e&&R(n&&n.filter((function(e){return w?!Ke.includes(e.type&&e.type.toLowerCase()):O?["many_to_one","one_to_many","many_to_many"].includes(e.type.toLowerCase()):j?C?["date","datetime"].includes(e.type.toLowerCase()):e:["many_to_one","many-to-one"].includes(e.type.toLowerCase())})));case 4:case"end":return t.stop()}}),t)})))(),function(){e=!1}}),[i,O,j,w,C]),Object(a.useEffect)((function(){var e=M&&M.split("."),t=_&&_.find((function(t){return t.name===(e&&e[0])})),n=e&&e.length>0?e[e.length-1]:void 0;g&&t&&n&&t.name===n&&1===e.length?"com.axelor.auth.db.User"===t.target?A(!1):A(!0):O&&t&&n&&t.name===n&&1===e.length?["MANY_TO_MANY","ONE_TO_MANY"].includes(t.type)?(A(!1),z(!1)):A(!0):C&&t?["datetime","date"].includes(t.type&&t.type.toLowerCase())?(A(!1),z(!1)):A(!0):y&&t&&n&&t.name===n&&(y.fullName===t.target||y.name===t.jsonTarget)&&1===e.length?A(!1):A(!0)}),[g,y,_,O,C,M]),Object(a.useEffect)((function(){q(T)}),[T]),r.a.createElement(r.a.Fragment,null,r.a.createElement(ja,{name:"fieldName",title:"Field Name",placeholder:"field name",options:_,optionLabelKey:"name",onChange:function(e){return ae(e)},value:re,classes:{root:ne()(K.MuiAutocompleteRoot,d&&d.root)}}),Q&&ee&&(!g||re&&"com.axelor.meta.db.MetaJsonRecord"!==re.target&&!re.jsonField)&&r.a.createElement(r.a.Fragment,null,I&&r.a.createElement(fn.a,{size:"small",onClick:function(){if(A((function(e){return!e})),_&&_.length>0&&Z){var e=_.find((function(e){return e.name===Z}));ae(Object(c.a)({},e||{}))}},className:K.iconButton},r.a.createElement(V.a,{title:J("Remove sub field")},r.a.createElement(tn.a,{className:K.icon,fontSize:"small"}))),I&&r.a.createElement(wa,{getMetaFields:function(){return function(e,t){return mt.apply(this,arguments)}(ee,te,O,j,w)},initValue:"".concat(n).concat(Z,"."),value:{fieldName:Y.slice(1).join("."),allFields:T},onChange:o,classNames:d,isParent:!!ee,isUserPath:g,isDatePath:C,startModel:y,isCollection:O,allowAllFields:j,excludeUITypes:w}),!I&&W&&r.a.createElement(fn.a,{size:"small",onClick:function(){return A((function(e){return!e}))},className:K.iconButton},r.a.createElement(V.a,{title:J("Add sub field")},r.a.createElement(xn.a,{className:K.icon,fontSize:"small"})))))}var ka=n(853),Ca=n(17),Na=Object(Ca.a)((function(e){return{root:{width:20,overflow:"hidden",transition:"width 0.5s","&.Mui-disabled":{width:0}}}}))(ka.a);function Sa(e){var t=e.entry,n=e.selectedElement,a=e.changeColor,i=e.bpmnModeler;if(t||!t.widget)switch(t.widget){case"textField":return r.a.createElement(an,{entry:t,element:n,canRemove:!0});case"textBox":return r.a.createElement(en,{entry:t,bpmnModeler:i,element:n});case"selectBox":return r.a.createElement(on,{entry:t,element:n});case"checkbox":return r.a.createElement(dn,{entry:t,element:n});case"colorPicker":return r.a.createElement(jn,{changeColor:a,entry:t,element:n});default:return r.a.createElement(en,{entry:t,element:n,bpmnModeler:i})}}var Ma=n(91),Ta=n.n(Ma),Pa=n(50),Fa=n.n(Pa);function _a(e,t,n,a){var r=(t=t||{}).id||"name",i=t.label||n("Name"),o=t.modelProperty||"name";return[{id:r,label:i,modelProperty:o,widget:"textBox",get:t.get||function(){var t=Object(P.getBusinessObject)(e);return Object(d.a)({},o,t&&t.get([o]))},set:t.set||function(e,t,r,i){if(e.businessObject?e.businessObject[o]=t[o]:e[o]=t[o],a&&e){var l=a.get("elementRegistry"),c=a.get("modeling"),s=l.get(e.id);if(s){var u="value:".concat(t[o]),m=n("value:".concat(t[o])),p=Object(P.getBusinessObject)(e),b=z(p&&p.$attrs&&p.$attrs["camunda:isTranslations"]||!1),f=i&&0===i.length||!b?t[o]:r?m===u?t[o]:m:t[o];c&&c.updateProperties(s,Object(d.a)({},o,f))}}}}]}var Ra=n(307);function La(e,t,n,a,r,i){var o;Object(P.is)(t,"bpmn:Collaboration")||(Object(P.is)(t,"bpmn:TextAnnotation")?o={modelProperty:"text",label:r("Text")}:Object(P.is)(t,"bpmn:Group")&&(o={modelProperty:"categoryValue",label:r("Category Value"),get:function(e){return{categoryValue:(Object(P.getBusinessObject)(e).categoryValueRef||{}).value}},set:function(e,t){var r=Object(P.getBusinessObject)(e);return r&&r.categoryValueRef||function(e){var t=a.getRootElement(),r=Object(P.getBusinessObject)(t).$parent,i=Object(Ra.createCategoryValue)(r,n);e.categoryValueRef=i}(r),{cmd:"element.updateLabel",context:{element:e,newLabel:t.categoryValue}}}}),e.entries=e.entries.concat(_a(t,o,r,i)))}var Da=["bpmn:Process","bpmn:Collaboration","bpmn:SequenceFlow","bpmn:MessageFlow","bpmn:TextAnnotation","bpmn:DataOutputAssociation"];var Ia=n(38),Aa=n.n(Ia);function Va(e){return Ta.a.getFailedJobRetryTimeCycle(e)}function Ba(e,t,n,a){var r=n.getBusinessObject;return[{id:(n.idPrefix||"")+"retryTimeCycle",label:(n.labelPrefix||"")+a("Retry Time Cycle"),modelProperty:"cycle",widget:"textField",get:function(e,t){var n=Va(r(e));return{cycle:n&&n.get("body")}},set:function(e,n,a){var i=n.cycle,o=r(e);if(""===i||"undefined"===typeof i||!i){var l=o.extensionElements.values,c=l.findIndex((function(e){return"camunda:FailedJobRetryTimeCycle"===e.$type}));c>-1&&l.splice(c,1)}var s=Va(o);if(!s){var u=o.get("extensionElements");return u||(u=function(e,t){return w.a.createElement("bpmn:ExtensionElements",{values:[]},e,t)}(o,t),o.extensionElements=u),s=function(e,t,n){return w.a.createElement("camunda:FailedJobRetryTimeCycle",{body:n},e,t)}(u,t,i),void u.values.push(s)}s.body=i},hidden:function(e){var t=r(e);return(!t||!function(e){return Ta.a.isAsyncBefore(e)}(t)&&!function(e){return Ta.a.isAsyncAfter(e)}(t))&&(!Object(P.is)(e,"bpmn:Event")||!Aa.a.getTimerEventDefinition(e))}}]}function $a(e,t,n,a){var r=function(e){var t=Fa.a.getServiceTaskLikeBusinessObject(e);return t||(t=Object(P.getBusinessObject)(e)),t}(t);r&&Object(P.is)(r,"camunda:TaskPriorized")&&(e.entries=e.entries.concat(function(e,t,n,a){var r=n.getBusinessObject;return[{id:"externalTaskPriority",label:a("Task Priority"),modelProperty:"taskPriority",widget:"textField",get:function(e,t){var n=r(e);return{taskPriority:n&&n.get("camunda:taskPriority")}},set:function(e,t){e&&e.businessObject&&e.businessObject.processRef&&(e.businessObject.processRef.taskPriority=t.taskPriority||void 0)}}]}(0,0,{getBusinessObject:function(e){return Object(P.is)(r,"bpmn:Participant")?r&&r.get("processRef"):r}},a)))}var Wa=n(160),Ja=n.n(Wa),za=n(824),Ga=n(753),Ua=n(754),Ha=n(825),qa=n(826),Ka=n(827),Ya=n(112),Xa=n.n(Ya),Za=n(262),Qa=n(816),er=n(852),tr=n(817),nr=n(818),ar=n(819),rr=n(820),ir=n(821),or=n(822),lr=n(823),cr=n(127),sr=n.n(cr),ur=n(197),mr=n.n(ur),dr=n(111),pr=n(49),br=n.n(pr),fr=n(857),vr=n(849),gr=function(e,t){return"ws/rest/".concat(e,"/").concat(t)},yr=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(ue.a)(this,e),this.model=t.model}return Object(me.a)(e,[{key:"search",value:function(e){var t=e.fields,n=e.sortBy,a=e.data,r=e.limit,i=e.offset,o=gr(this.model,"search");return ve.post(o,{fields:t,sortBy:n,data:a,limit:r,offset:i})}},{key:"fetch",value:function(e,t){var n="".concat(e,"/fetch"),a=gr(this.model,n);return ve.post(a,t)}},{key:"view",value:function(e){return ve.post("/ws/meta/view",e)}},{key:"fields",value:function(e){return ve.post("/ws/meta/view/fields",e)}},{key:"save",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=gr(this.model,"");return ve.post(n,Object(c.a)({},t?e:{data:e}))}},{key:"removeAll",value:function(e){var t=gr(this.model,"removeAll");return ve.post(t,{records:e})}},{key:"action",value:function(e,t){var n="/ws/action/".concat(e);return ve.post(n,Object(c.a)(Object(c.a)({},t),{},{model:this.model}))}}]),e}(),hr=new yr({model:"com.axelor.meta.db.MetaModel"}),Or=new yr({model:"com.axelor.meta.db.MetaField"});var Er=function(e,t,n){var a=arguments.length>3&&void 0!==arguments[3]&&arguments[3],r=e&&e.data,i=r&&r.fields,o=Object.values(r&&r.jsonFields||[{}]),l=[];return l=i&&i.filter((function(e){return!e.json&&ta.includes((e.type||"").toLowerCase())}))||[],o&&o.forEach((function(e){var r=(Object.values(e||{})||[]).filter((function(e){return ta.includes((e.type||"").toLowerCase())&&("many-to-many"!==e.type||e.targetName)}))||[];t&&!a&&(r=r.filter((function(e){return![].concat(Object(s.a)(ea),Object(s.a)(n?["many_to_one","json_many_to_one","many-to-one","json-many-to-one"]:[])).includes((e.type||"").toLowerCase())}))||[]),l=[].concat(Object(s.a)(l),Object(s.a)(r))})),l};function jr(e,t){return xr.apply(this,arguments)}function xr(){return(xr=Object(p.a)(m.a.mark((function e(t,n){var a,r,i,o,l,c;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return",[]);case 2:if("metaModel"!==t.type){e.next=17;break}return e.next=5,ve.get("ws/meta/fields/".concat(t.fullName?t.fullName:"".concat(t.packageName,".").concat(t.name)));case 5:return a=e.sent,r=Er(a,n),e.next=9,ve.search("com.axelor.meta.db.MetaField",{data:{_domain:"self.metaModel.name = '".concat(t.name,"' AND self.typeName = 'ZonedDateTime'"),_domainContext:{_model:"com.axelor.meta.db.MetaField"}},fields:["name","typeName","metaModel"]});case 9:if(i=e.sent,!((o=i&&i.data&&i.data.length>0&&i.data.map((function(e){return e.name})))&&o.length>0&&r&&r.length>0)){e.next=14;break}return r.forEach((function(e){o.includes(e.name)&&(e.typeName="ZonedDateTime")})),e.abrupt("return",r);case 14:return e.abrupt("return",r);case 17:return e.next=19,ve.get("ws/meta/fields/com.axelor.meta.db.MetaJsonRecord?jsonModel=".concat(t.name));case 19:return l=e.sent,c=Er(l,n),e.abrupt("return",G(c,"sequence")||[]);case 22:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function wr(e){return kr.apply(this,arguments)}function kr(){return(kr=Object(p.a)(m.a.mark((function e(t){var n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,hr.search({data:t});case 2:return n=e.sent,e.abrupt("return",n&&n.data&&n.data[0]);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Cr(){return(Cr=Object(p.a)(m.a.mark((function e(t){var n,a,r,i,o,l,c,u,d,p,b,f,v,g,y,h=arguments;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=!(h.length>1&&void 0!==h[1])||h[1],a=h.length>2&&void 0!==h[2]&&h[2],r=h.length>3?h[3]:void 0,i=h.length>4&&void 0!==h[4]&&h[4],o=h.length>5?h[5]:void 0,l=h.length>6&&void 0!==h[6]&&h[6],"com.axelor.meta.db.MetaJsonRecord"!==t||!r){e.next=22;break}return e.next=9,ve.get("ws/meta/fields/com.axelor.meta.db.MetaJsonRecord?jsonModel=".concat(r));case 9:if(c=e.sent,u=(u=Er(c,a,i,o)||[]).filter((function(e){return ta.includes((e.type||"").toLowerCase())&&(!a||!e.json)&&("many-to-many"!==(e.type||"").toLowerCase()||e.targetName)})),!l){e.next=17;break}return e.next=15,qt([{model:r,type:"metaJsonModel",modelFullName:t}]);case 15:d=e.sent,u=[].concat(Object(s.a)(u||[]),Object(s.a)(d||[]));case 17:if(!(!n&&u&&u.length>0)){e.next=19;break}return e.abrupt("return",u.filter((function(e){return!["many_to_many","json_many_to_many"].includes((e&&(e.type||"")).toLowerCase().replaceAll("-","_"))})));case 19:return e.abrupt("return",G(u,"sequence")||[]);case 22:return p={criteria:[{fieldName:"fullName",operator:"=",value:t}]},e.next=25,wr(p);case 25:if(b=e.sent){e.next=28;break}return e.abrupt("return",[]);case 28:return f=b&&b.metaFields.map((function(e){return e.name})),e.next=31,Or.fields({fields:f,model:b.fullName});case 31:if(v=e.sent,g=(g=v&&v.data&&v.data.fields).filter((function(e){return ta.includes((e.type||"").toLowerCase())&&(!a||!e.json)&&("many-to-many"!==e.type||e.targetName)})),!l){e.next=39;break}return e.next=37,qt([{model:b&&b.name,type:"metaModel",modelFullName:b&&b.fullName}]);case 37:y=e.sent,g=[].concat(Object(s.a)(g||[]),Object(s.a)(y||[]));case 39:if(!(!n&&g&&g.length>0)){e.next=41;break}return e.abrupt("return",g.filter((function(e){return!["many_to_many","json_many_to_many"].includes((e&&(e.type||"")).toLowerCase().replaceAll("-","_"))})));case 41:return e.abrupt("return",g);case 42:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Nr(e){return Sr.apply(this,arguments)}function Sr(){return(Sr=Object(p.a)(m.a.mark((function e(t){var n,a;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=new yr({model:t}),e.next=3,n.search({});case 3:if(!(a=e.sent)||-1!==a.status){e.next=6;break}return e.abrupt("return",[]);case 6:return e.abrupt("return",a&&a.data);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Mr(e){return Tr.apply(this,arguments)}function Tr(){return(Tr=Object(p.a)(m.a.mark((function e(t){var n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ve.search("com.axelor.meta.db.MetaJsonRecord",{data:{criteria:[{fieldName:"jsonModel",operator:"=",value:t}],operator:"and"}});case 2:if(!(n=e.sent)||-1!==n.status){e.next=5;break}return e.abrupt("return",[]);case 5:return e.abrupt("return",n&&n.data);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Pr(e){return Fr.apply(this,arguments)}function Fr(){return(Fr=Object(p.a)(m.a.mark((function e(t){var n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ve.search("com.axelor.meta.db.MetaJsonField",{data:{criteria:[{fieldName:"jsonModel",operator:"=",value:t},{fieldName:"nameField",operator:"=",value:!0}],operator:"and"},fields:["name"]});case 2:if(!((n=e.sent)&&n.status>-1)){e.next=5;break}return e.abrupt("return",n.data&&n.data[0]);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var _r=Object(F.a)((function(){return{MuiAutocompleteRoot:{width:"250px",marginRight:"10px"},iconButton:{marginRight:10},icon:{color:"#0275d8"}}}));function Rr(e){var t=e.initValue,n=void 0===t?"":t,i=e.getMetaFields,o=e.editor,u=e.onChange,d=e.value,b=e.classNames,f=e.expression,v=void 0===f?"GROOVY":f,g=e.type,y=e.isParent,h=void 0!==y&&y,O=e.isBPM,E=e.isField,j=e.setInitialField,x=void 0===j?function(){}:j,w=e.isAllowButtons,k=void 0!==w&&w,C=d||{},N=C.fieldName,S=void 0===N?"":N,M=C.allField,T=void 0===M?[]:M,P=C.isShow,F=Object(a.useState)([]),_=Object(l.a)(F,2),R=_[0],L=_[1],D=_r(),I="context"===E&&ba(g)&&O,A=ba(g)?"BPM":v,B=S&&ha[A]&&S.split(I?"?.":ha[A]),$=B&&B.slice(1)&&B.slice(1).join(I?"?.":ha[A]),W=Object(a.useState)(!(!P&&!$)),z=Object(l.a)(W,2),G=z[0],U=z[1],H=B||[],q=Object(l.a)(H,1)[0],K=S&&h&&R&&R.some((function(e){return e.name===q})),Y=K&&(R.find((function(e){return e.name===q}))||{}).target,X=K&&(R.find((function(e){return e.name===q}))||{}).jsonTarget,Z=(R.find((function(e){return e.name===q}))||{}).type,Q=T&&T.length>0&&T.find((function(e){return["many_to_many","json_many_to_many"].includes((e&&(e.type||"")).toLowerCase().replaceAll("-","_"))})),ee=T&&T.length>0&&T.find((function(e){return["many_to_one","json_many_to_one"].includes((e&&(e.type||"")).toLowerCase().replaceAll("-","_"))})),te=["one_to_one","json_one_to_one"].includes((Z||"").toLowerCase().replaceAll("-","_"));function ae(e){var t=e&&R.some((function(t){return t.name===e.name&&t.target}));if(O){var a,r=h?e&&e.name?"".concat(n).concat(e.name):"".concat(function(){var e=n&&n.split(ha[A]);return e&&e.length>0&&(e.filter(Boolean)||[]).join(ha[A])}()):e&&e.name?"".concat(t?I?"?.":ha[A]:"").concat(n).concat(e.name):"";if(e&&T.findIndex((function(t){return t.name===e.name}))<=-1){var i=(r||"").split(I?"?.":ha[A])||[],l=T&&T.filter((function(e){return i.includes(e.name)}))||[];a=[].concat(Object(s.a)(l),[e])}else{var c=Object(s.a)(T||[]),m=(S||"").split(I?"?.":ha[A]);m&&m.length>0&&m.forEach((function(e){var t=c.findIndex((function(t){return t.name===e}));t>-1&&c.splice(t,1)})),a=c}u({name:"fieldName",value:e,fieldNameValue:r||void 0,allField:a,isShow:G},o)}else{var d=h?"".concat(n).concat(e?e.name:""):e?e.name:"";if(d=ba(g)?e&&e.name?d:d.slice(0,-1):d,u({name:"fieldName",value:d},o),u({name:"fieldType",value:e&&e.type||""},o),u({name:"field",value:e},o),u({name:"isShow",value:G},o),e&&T.findIndex((function(t){return t.name===e.name}))<=-1){var p=(d||"").split(ha[A])||[],b=T&&T.filter((function(e){return p.includes(e.name)}))||[];u({name:"allField",value:[].concat(Object(s.a)(b),[e])},o)}else{var f=Object(s.a)(T||[]),v=(S||"").split(ha[A]),y="".concat(n).concat(ha[A]).concat(q).split(ha[A]);if(v&&v.length>0&&v.forEach((function(e){var t=f.findIndex((function(t){return t.name===e}));t>-1&&!(y||[]).includes(e)&&f.splice(t,1)})),u({name:"allField",value:f},o),f&&1===f.length){var E=f[0];u({name:"fieldType",value:E&&E.type||""},o),u({name:"field",value:E},o),x()}else{var j=f[f.length-1];u({name:"fieldType",value:j&&j.type||""},o),u({name:"field",value:j},o),x()}}}}var re=R&&R.find((function(e){return e.name===q}))||T&&T.find((function(e){return e.name===q}));return Object(a.useEffect)((function(){var e=!0;return e&&U(!(!P&&!$)),function(){e=!1}}),[P,$]),Object(a.useEffect)((function(){var e=!0;return Object(p.a)(m.a.mark((function t(){var n;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,i();case 2:n=t.sent,e&&L(n);case 4:case"end":return t.stop()}}),t)})))(),function(){e=!1}}),[i]),r.a.createElement(r.a.Fragment,null,r.a.createElement(ja,{name:"fieldName",title:"Field Name",placeholder:"field name",options:R,optionLabelKey:"name",onChange:function(e){return ae(e)},value:re,classes:{root:ne()(D.MuiAutocompleteRoot,b&&b.root)}}),K&&Y&&r.a.createElement(r.a.Fragment,null,G&&!te&&r.a.createElement(fn.a,{size:"small",onClick:function(){if(U((function(e){return!e})),T&&T.length>0&&q){var e=T.find((function(e){return e.name===q}));ae(Object(c.a)({},e||{}))}},className:D.iconButton},r.a.createElement(V.a,{title:J("Remove sub field")},r.a.createElement(tn.a,{className:D.icon,fontSize:"small"}))),(G||te)&&r.a.createElement(Rr,{getMetaFields:function(){return function(e){return Cr.apply(this,arguments)}(Y,!!ba(g)||Q&&B&&B.length>0&&B.includes(Q.name)&&B[0]!==Q.name,ba(g),X,ee,O,k)},editor:o,initValue:"".concat(n).concat(q).concat(I?"?.":ha[A]),value:{fieldName:B.slice(1).join(I?"?.":ha[A]),allField:T},onChange:u,classNames:b,expression:A,type:g,isParent:!!Y,isBPM:O,setInitialField:x,isField:E,isAllowButtons:k}),!G&&!te&&r.a.createElement(fn.a,{size:"small",onClick:function(){return U((function(e){return!e}))},className:D.iconButton},r.a.createElement(V.a,{title:J("Add sub field")},r.a.createElement(xn.a,{className:D.icon,fontSize:"small"})))))}var Lr=["onChange","value"],Dr=["onChange","value","value2","classes","style","targetName"],Ir=["type","operator","onChange","value","classes","parentType","editor"],Ar=Object(F.a)((function(e){return{Container:{display:"flex"},rulesGroupHeader:{display:"flex"},paper:{margin:e.spacing(1,0),padding:e.spacing(3,2),overflow:"auto"},rules:{display:"flex",alignItems:"flex-end",justifyContent:"flex-start",marginBottom:15},MuiAutocompleteRoot:{width:"250px",marginRight:"10px"},disabled:{pointerEvents:"none",opacity:.5},valueFrom:{fontSize:12,color:"rgba(0, 0, 0, 0.54)",fontFamily:'"Roboto", "Helvetica", "Arial", sans-serif'},radio:{padding:"1px 9px",color:"#0275d8","&.MuiRadio-colorSecondary.Mui-checked":{color:"#0275d8"}},operators:{minWidth:75},iconButton:{marginRight:10},timelineConnector:{backgroundColor:"#0275d8"},combinator:{width:"fit-content"},icon:{color:"#0275d8"},timeline:{height:"100%",padding:0,margin:0},timelineOppositeContent:{display:"flex",alignItems:"center",justifyContent:"flex-end",maxWidth:60,padding:0}}}));function Vr(e,t){return Br.apply(this,arguments)}function Br(){return(Br=Object(p.a)(m.a.mark((function e(t,n){var a,r;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=ba(n),e.next=3,jr(t,a);case 3:if(e.t0=e.sent,e.t0){e.next=6;break}e.t0=[];case 6:return r=e.t0,e.abrupt("return",r.filter((function(e){return ta.includes((e.type||"").toLowerCase())&&(!a||!e.json)})));case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function $r(e){var t=e.operator,n=e.editor,i=e.internalProps,o=e.parentType,c=i.onChange,s=i.value,u=Object(wn.a)(i,Lr),d=Ar(),b=u.field,f=void 0===b?{}:b,v=f.targetName,g=f.target,y=f.targetModel,h=f.model,O=f.jsonTarget,E=Object(a.useState)(null),j=Object(l.a)(E,2),x=j[0],w=j[1],k=function(){var e=Object(p.a)(m.a.mark((function e(){var t,n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("com.axelor.meta.db.MetaJsonRecord"!==h||!O){e.next=10;break}return e.next=3,Mr(O);case 3:return t=e.sent,e.next=6,Pr(O);case 6:n=e.sent,w(n&&n.name),e.next=13;break;case 10:return e.next=12,Nr(g||y);case 12:t=e.sent;case 13:return e.abrupt("return",t);case 14:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return["like","notLike"].includes(t)?r.a.createElement(Dn,Object.assign({name:"fieldValue",onChange:function(e){var t;"string"===typeof e||ba(o)||(t=e&&e.length>0?e.find((function(e){return e[v]})):e[v],c({name:"nameField",value:t?x:"id"},n)),c({name:"fieldValue",value:e},n)},margin:"none",style:{marginTop:"15px",width:"250px !important"},value:s},u)):["contains","notContains","in","notIn","=","!="].includes(t)?r.a.createElement(ja,{name:"fieldValue",title:"Value",placeholder:"Value",fetchAPI:k,isMulti:!(ba(o)&&["contains","notContains"].includes(t)||["=","!="].includes(t)),optionLabelKey:v,onChange:function(e){var t;"string"===typeof e||ba(o)||(t=e&&e.length>0?e&&e.find((function(e){return e&&v&&e[v]})):e&&e[v],c({name:"nameField",value:t?x:"id"},n)),c({name:"fieldValue",value:e},n)},value:s||[],classes:{root:d.MuiAutocompleteRoot}}):null}function Wr(e){var t=e.Component,n=e.operator,a=e.editor,i=e.internalProps,o=i.onChange,l=i.value,s=i.value2,u=i.classes,m=i.style,d=i.targetName,p=Object(wn.a)(i,Dr);return["=","!=",">",">=","<","<=","like","notLike"].includes(n)?r.a.createElement(t,Object.assign({name:"fieldValue",onChange:function(e){return o({name:"fieldValue",value:e},a)},value:l,style:m},p)):["between","notBetween"].includes(n)?r.a.createElement(r.a.Fragment,null,r.a.createElement(t,Object.assign({name:"fieldValue",style:Object(c.a)({marginRight:8},m),onChange:function(e){return o({name:"fieldValue",value:e},a)},value:l},p)),r.a.createElement(t,Object.assign({name:"fieldValue2",onChange:function(e){return o({name:"fieldValue2",value:e},a)},value:s,style:m},p))):["in","notIn"].includes(n)?r.a.createElement(ja,Object.assign({name:"fieldValue",title:"Value",placeholder:"Value",isMulti:!0,optionLabelKey:d,onChange:function(e){o({name:"fieldValue",value:e},a)},value:l||[],classes:{root:u.MuiAutocompleteRoot},optionValueKey:"name"},p)):null}function Jr(e){var t=e.type,n=e.operator,a=e.onChange,i=e.value,o=e.classes,l=e.parentType,s=e.editor,u=Object(wn.a)(e,Ir),m=Object(c.a)({value:i.fieldValue,value2:i.fieldValue2,onChange:a},u),d=[],p={};switch(t){case"one_to_one":case"many_to_one":case"many_to_many":case"one_to_many":case"json_one_to_one":case"json_many_to_one":case"json_many_to_many":case"json_one_to_many":return r.a.createElement($r,{operator:n,editor:s,internalProps:Object(c.a)({},m),parentType:l});case"date":case"time":case"datetime":var b=function(e){return e?br()(e,Zn[t]):null};return r.a.createElement(Wr,{Component:ca,operator:n,editor:s,internalProps:Object(c.a)(Object(c.a)({type:t,value:b(i.fieldValue),value2:b(i.fieldValue2),onChange:function(e,n){var r=e.name,i=e.value;return a({name:r,value:i&&i.format(Zn[t])},n)}},u),{},{margin:"none",classes:o,style:{marginTop:"15px",width:"250px !important"}})});case"integer":case"long":case"decimal":case"double":return p={Component:(d=u.field.selectionList&&u.field.selectionList.map((function(e){var t=e.title,n=e.value,a=e.data;return{name:a&&a.value||n,title:t}})))?Pn:Wn,operator:n,editor:s,internalProps:Object(c.a)({},d?Object(c.a)({options:d,classes:o},m):Object(c.a)(Object(c.a)({type:t},m),{},{margin:"none",classes:o,style:{marginTop:"15px",width:"250px !important"}}))},r.a.createElement(Wr,p);case"enum":return d=u.field.selectionList.map((function(e){var t=e.title,n=e.value,a=e.data;return{name:a&&a.value||n,title:t}})),r.a.createElement(Wr,{Component:Pn,operator:n,editor:s,internalProps:Object(c.a)({options:d,classes:o},m)});default:return p={Component:(d=u.field&&u.field.selectionList&&u.field.selectionList.map((function(e){var t=e.title,n=e.value,a=e.data;return{name:a&&a.value||n,title:t}})))?Pn:Dn,operator:n,editor:s,internalProps:Object(c.a)({},d?Object(c.a)({options:d,classes:o},m):Object(c.a)(Object(c.a)({classes:o},m),{},{margin:"none",style:{marginTop:"15px",width:"250px !important"}}))},r.a.createElement(Wr,p)}}function zr(e){var t=e.getMetaFields,n=e.onChange,i=e.onRemoveRule,o=e.editor,c=e.value,s=e.expression,u=e.parentType,m=e.parentMetaModal,d=e.element,p=e.isAllowButtons,b=void 0!==p&&p,f=c.fieldType,v=void 0===f?"":f,g=c.field,y=c.operator,h=c.fieldValue,O=c.fieldValue2,E=void 0===O?"":O,j=c.isRelationalValue,x=c.relatedValueModal,w=c.relatedValueFieldName,k=c.relatedElseValueModal,C=c.relatedElseValueFieldName,N=c.isShowMetaModelField,S=c.isShowElseMetaModelField,M=Ar(),T=v&&v.toLowerCase().replaceAll("-","_"),P=Object(a.useState)(j||"none"),F=Object(l.a)(P,2),_=F[0],R=F[1],L=Object(a.useState)(x||null),D=Object(l.a)(L,2),I=D[0],A=D[1],B=Object(a.useState)(N||!1),$=Object(l.a)(B,2),W=$[0],z=$[1],G=Object(a.useState)(k||null),U=Object(l.a)(G,2),H=U[0],q=U[1],K=Object(a.useState)(S||!1),Y=Object(l.a)(K,2),X=Y[0],Z=Y[1],Q=function(e){if(e&&"string"===typeof e){var t=e.toString().split(".");return t&&t.length>1?t.slice(1).join("."):e}},ee=Object(a.useState)(null),te=Object(l.a)(ee,2),ne=te[0],ae=te[1],re=Object(a.useState)(null),ie=Object(l.a)(re,2),oe=ie[0],le=ie[1],ce=function(e,t){e.map((function(e){return na[e]=t}))};ce(["long","decimal","double","date","time","datetime"],na.integer),ce(["one_to_many","json_one_to_many"],na.text),ce(["many_to_many","json_many_to_many"],["in","notIn","isNull","contains","notContains"]),ce(["many_to_one","one_to_one","json_many_to_one","json_one_to_one"],["=","!=","in","notIn","isNull","isNotNull"]),ce(["string"],["=","!=","isNull","isNotNull","like","notLike"]);var se=ra.filter((function(e){var t=T;if(""===t&&c.fieldName&&c.allField.length>0){var n=c.allField.find((function(e){return e.name===c.fieldName}));t=(n&&n.type||"").toLowerCase()}return(na[t]||[]).includes(e.name)})),ue=function(e,t){n({name:e,value:t},o)};return Object(a.useEffect)((function(){R(j||"none"),A(x||null),z(N||!1),q(k||null),Z(S||!1)}),[j,x,N,k,S]),Object(a.useEffect)((function(){var e=c.fieldValue,t=c.allField,n=void 0===t?[]:t,a=c.fieldValue2,r=void 0===a?"":a,i=c.isRelationalValue,o=c.relatedValueModal,l=c.relatedValueFieldName,s=c.relatedElseValueModal,u=c.relatedElseValueFieldName,m=c.isShowMetaModelField,d=c.isShowElseMetaModelField;ae({allField:n,field:u,fieldName:Q(r)||u&&u.name,fieldType:u&&u.type,fieldValue:null,fieldValue2:null,operator:null,isRelationalValue:i||"none",relatedValueFieldName:l,relatedValueModal:o,relatedElseValueFieldName:u,relatedElseValueModal:s,isShow:d}),le({allField:n,field:l,fieldName:Q(e)||l&&l.fieldName,fieldType:l&&l.type,fieldValue:null,fieldValue2:null,operator:null,isRelationalValue:i||"none",relatedValueFieldName:l,relatedValueModal:o,isShow:m})}),[c]),r.a.createElement("div",{className:M.rules},r.a.createElement(Rr,{getMetaFields:t,isField:_,editor:o,onChange:n,value:c,expression:s,type:u,isParent:!0,isAllowButtons:b,setInitialField:function(){R("none")}}),r.a.createElement(r.a.Fragment,null,r.a.createElement(Pn,{name:"operator",title:"Operator",options:g&&g.selectionList?ra.filter((function(e){return(_&&"none"!==_?["=","!=","isNull","isNotNull"]:["=","!=","isNull","isNotNull","in","notIn"]).includes(e.name)})):_&&"none"!==_?se.filter((function(e){return"in"!==e.name&&"notIn"!==e.name})):se,onChange:function(e){n({name:"operator",value:e},o),R(null)},value:y,className:M.operators}),y&&"button"!==g.type&&!["isNull","isNotNull","isTrue","isFalse"].includes(y)&&r.a.createElement(fr.a,{"aria-label":"radioType",name:"radioType",value:_||"none",onChange:function(e){R(e.target.value),le({fieldValue:null}),ue("fieldValue",null),ae({fieldValue2:null}),ue("fieldValue2",null),!e.target.value||"in"!==y&&"notIn"!==y||(n({name:"operator",value:void 0},o),R(null)),e.target.value?(ue("isRelationalValue","none"===e.target.value?null:e.target.value),ue("fieldValue",null),ue("fieldValue2",null),"self"===e.target.value?(A(m),q(m),ue("relatedValueModal",m),ue("relatedElseValueModal",m)):(A(null),q(null),Z(!1),z(!1),ue("relatedValueModal",null),ue("relatedElseValueModal",null))):(ue("relatedValueFieldName",null),ue("relatedValueModal",null),ue("relatedElseValueFieldName",null),ue("relatedElseValueModal",null))}},r.a.createElement("label",{className:M.valueFrom},"Value from"),r.a.createElement(Qa.a,{value:"self",control:r.a.createElement(vr.a,{className:M.radio,size:"small"}),label:"Self"}),r.a.createElement(Qa.a,{value:"context",control:r.a.createElement(vr.a,{className:M.radio,size:"small"}),label:"Context"}),r.a.createElement(Qa.a,{value:"none",control:r.a.createElement(vr.a,{className:M.radio,size:"small"}),label:"None"}))),_&&"none"!==_&&y&&!["isNull","isNotNull","isTrue","isFalse"].includes(y)?r.a.createElement(r.a.Fragment,null,"context"===_&&r.a.createElement(r.a.Fragment,null,r.a.createElement(ja,{name:"metaModal",title:"Meta Modal",placeholder:"meta modal",fetchAPI:function(){return Ye(ga(d))},optionLabelKey:"name",onChange:function(e){A(e),e?(le({fieldValue:fa(e.name)}),ue("relatedValueModal",e),ue("fieldValue",fa(e.name))):(le({fieldValue:null}),ue("fieldValue",null))},value:I,classes:{root:M.MuiAutocompleteRoot}}),W&&"context"===_&&r.a.createElement(fn.a,{size:"small",onClick:function(){if(z(!1),ue("isShowMetaModelField",!1),I){var e=I.name;le({fieldValue:fa(e)}),ue("relatedValueModal",I),ue("fieldValue",fa(e))}},className:M.iconButton},r.a.createElement(V.a,{title:J("Remove sub field")},r.a.createElement(tn.a,{color:"primary",fontSize:"small"})))),(W||"self"===_)&&r.a.createElement(Rr,{getMetaFields:function(){return"context"===_?Vr(I,u):t()},editor:o,isField:_,onChange:function(e,t){var n=e.value,a=e.fieldNameValue,r=e.allField,i=e.isShow;le({allField:r,field:n,fieldName:a,fieldType:n&&n.type,fieldValue:null,fieldValue2:null,operator:null,isRelationalValue:"none"===_?null:_,relatedValueFieldName:null,relatedValueModal:null,isShow:i,isShowMetaModelField:W}),ue("isRelationalValue","none"===_?null:_),ue("relatedValueFieldName",n),ue("relatedValueModal",I);var o=ba(u),l="context"===_&&o;ue("fieldValue",a?(m&&m.id)===(I&&I.id)?o?"self.".concat(a):"".concat(fa(I&&I.name||m&&m.name||"self")).concat(l?"?.":Xn[o?"BPM":s]).concat(a).concat(n&&n.typeName&&!o?"".concat(l?"?.":Xn[s],"toLocalDateTime()"):""):"".concat(fa(I&&I.name||m&&m.name||(o?"self":""))).concat(l?"?.":Xn[o?"BPM":s]).concat(a).concat(n&&["json-many-to-one","MANY_TO_ONE","many-to-one"].includes(n.type)&&o&&"context"===_?"".concat(l?"?.":Xn[s],"getTarget()"):"").concat(n&&n.typeName&&!o?"".concat(l?"?.":Xn[s],"toLocalDateTime()"):""):void 0)},value:oe,expression:s,type:u,isParent:!0,isBPM:!0}),!W&&I&&"context"===_&&r.a.createElement(fn.a,{size:"small",onClick:function(){z(!0),ue("isShowMetaModelField",!0)},className:M.iconButton},r.a.createElement(V.a,{title:J("Add sub field")},r.a.createElement(xn.a,{className:M.icon,fontSize:"small"}))),["between","notBetween"].includes(y)&&r.a.createElement(r.a.Fragment,null,"context"===_&&r.a.createElement(r.a.Fragment,null,r.a.createElement(ja,{name:"metaModal",title:"Meta Modal Else",placeholder:"meta modal",fetchAPI:function(){return Ye(ga(d))},optionLabelKey:"name",onChange:function(e){q(e),e?(ae({fieldValue2:fa(e.name)}),ue("relatedElseValueModal",e),ue("fieldValue2",fa(e.name))):(ae({fieldValue2:null}),ue("fieldValue2",null))},value:H,classes:{root:M.MuiAutocompleteRoot}}),X&&"context"===_&&r.a.createElement(fn.a,{size:"small",onClick:function(){if(Z(!1),ue("isShowElseMetaModelField",!1),H){var e=H.name;le({fieldValue:fa(e)}),ue("relatedElseValueModal",H),ue("fieldValue2",fa(e))}},className:M.iconButton},r.a.createElement(V.a,{title:J("Remove sub field")},r.a.createElement(tn.a,{color:"primary",fontSize:"small"})))),(X||"self"===_)&&r.a.createElement(Rr,{getMetaFields:function(){return Vr(H,T)},editor:o,isField:_,onChange:function(e,t){var n=e.value,a=e.fieldNameValue,r=e.allField,i=e.isShow;ae({allField:r,field:n,fieldName:a,fieldType:n&&n.type,fieldValue:null,fieldValue2:null,operator:null,isRelationalValue:"none"===_?null:_,relatedValueFieldName:w,relatedValueModal:k,relatedElseValueFieldName:C,relatedElseValueModal:k,isShow:i,isShowMetaModelField:W,isShowElseMetaModelField:X}),ue("relatedElseValueFieldName",n),ue("relatedElseValueModal",H);var o=ba(u),l="context"===_&&o;ue("fieldValue2",a?(m&&m.id)===(H&&H.id)?o?"self.".concat(a):"".concat(fa(I&&I.name&&m&&m.name)).concat(l?"?.":Xn[o?"BPM":s]).concat(a).concat(n&&n.typeName&&!o?"".concat(l?"?.":Xn[s],"toLocalDateTime()"):""):"".concat(fa(H&&H.name)).concat(l?"?.":Xn[o?"BPM":s]).concat(a).concat(n&&["json-many-to-one","MANY_TO_ONE","many-to-one"].includes(n.type)&&o&&"context"===_?"".concat(l?"?.":Xn[s],"getTarget()"):"").concat(n&&n.typeName&&!o?"".concat(l?"?.":Xn[s],"toLocalDateTime()"):""):void 0)},value:ne,expression:s,type:u,isParent:!0,isBPM:!0}),!X&&H&&"context"===_&&r.a.createElement(fn.a,{size:"small",onClick:function(){Z(!0),ue("isShowElseMetaModelField",!0)},className:M.iconButton},r.a.createElement(V.a,{title:J("Add sub field")},r.a.createElement(xn.a,{className:M.icon,fontSize:"small"}))))):y&&("button"===g.type?r.a.createElement(Pn,{name:"fieldValue",onChange:function(e){return n({name:"fieldValue",value:e},o)},value:h,options:[{name:!0,title:"true"},{name:!1,title:"false"}],className:M.operators}):r.a.createElement(Jr,{type:T,parentType:u,operator:y,onChange:function(e,t){n(e,t),ue("isRelationalValue",null),ue("relatedValueFieldName",null),ue("relatedValueModal",null)},value:{fieldValue:h,fieldValue2:E},classes:M,editor:o,field:g})),r.a.createElement(Vn,{Icon:mr.a,onClick:i}))}function Gr(e){var t=e.onAddGroup,n=e.isRemoveGroup,i=e.onRemoveGroup,o=e.onAddRule,c=e.onRemoveRule,s=e.editor,u=void 0===s?{}:s,m=e.getChildEditors,d=e.onChange,p=e.getMetaFields,b=e.isDisable,f=e.expression,v=e.type,g=e.parentMetaModal,y=e.element,h=e.isAllowButtons,O=void 0!==h&&h,E=Ar(),j=Object(a.useState)(!1),x=Object(l.a)(j,2),w=x[0],k=x[1],C=u.id,N=u.rules,S=void 0===N?[]:N,M=m(u.id);return Object(a.useEffect)((function(){var e=ba(v);k(e)}),[v]),r.a.createElement(Za.a,{variant:"outlined",className:ne()(E.paper,b&&E.disabled)},r.a.createElement("div",{className:ne()(E.rulesGroupHeader)},r.a.createElement(tr.a,{align:"alternate",className:E.timeline},r.a.createElement(nr.a,null,r.a.createElement(ar.a,{className:E.timelineOppositeContent},r.a.createElement(Pn,{name:"combinator",className:E.combinator,disableUnderline:!0,options:qn,value:u.combinator||"and",onChange:function(e){return d({name:"combinator",value:e},u)}})),r.a.createElement(rr.a,null,r.a.createElement(ir.a,{variant:"outlined",style:{borderColor:"#0275d8"}}),r.a.createElement(or.a,{className:E.timelineConnector})),r.a.createElement(lr.a,null,r.a.createElement(Vn,{title:"Add Group",Icon:sr.a,onClick:function(){return t(C)}}),n&&r.a.createElement(Vn,{title:"Remove Group",Icon:mr.a,onClick:function(){return i(C)}}),S.map((function(e,t){return r.a.createElement(r.a.Fragment,{key:t},r.a.createElement(zr,{getMetaFields:p,onRemoveRule:function(){return c(u.id,t)},onChange:function(e,n){return d(e,n,t)},editor:u,value:e,expression:f,parentType:v,isBPM:w,parentMetaModal:g,element:y,isAllowButtons:O}))})),r.a.createElement(Vn,{title:"Add Rule",Icon:sr.a,onClick:function(){return o(C)}}),M.map((function(e,n){return r.a.createElement(r.a.Fragment,{key:e.id},r.a.createElement(Gr,{isRemoveGroup:!0,onAddGroup:t,onRemoveGroup:i,onAddRule:o,onRemoveRule:c,getChildEditors:m,getMetaFields:p,onChange:function(e,t,n){return d(e,t,n)},editor:e,type:v,element:y,expression:f,isAllowButtons:O}))})))))))}var Ur=Object(F.a)((function(e){return{Container:{display:"flex"},rulesGroupHeader:{display:"flex"},paper:{margin:e.spacing(1),padding:e.spacing(3,2)},rules:{display:"flex"},MuiAutocompleteRoot:{width:"100%",marginRight:"10px"},MuiAutocompleteRoot1:{width:"500px"},title:{flexGrow:1},disabled:{pointerEvents:"none",opacity:.5},popoverContainer:{display:"flex",flexDirection:"column",padding:e.spacing(2)},typography:{display:"flex"},popoverHeader:{display:"flex",alignItems:"center",borderBottom:"solid 1px #DDD"}}})),Hr=0,qr={id:Hr,parentId:-1,combinator:"and",rules:[{}]},Kr={rules:[qr]};var Yr=function(e){var t=e.value,n=void 0===t?Kr:t,i=e.setValue,o=e.index,u=e.element,b=e.type,f=e.processConfigs,v=e.isAllowButtons,g=e.bpmnModeler,y=e.allowAllModels,h=e.defaultModel,O=n.metaModals,E=n.rules,j=Object(a.useState)("GROOVY"),x=Object(l.a)(j,1)[0],w=Object(a.useState)(O||h),k=Object(l.a)(w,2),C=k[0],N=k[1],S=Object(a.useState)(E),M=Object(l.a)(S,2),T=M[0],F=M[1],_=Ur(),R=function(){var e=Object(p.a)(m.a.mark((function e(){var t,n,a,r,i,o;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=[],n=g.get("elementRegistry"),a="bpmn:Process"===u.type||"bpmn:Participant"===u.type?u.id:u&&u.parent&&u.parent.id,r=n.filter((function(e){var n=Object(P.getBusinessObject)(e);return n.decisionRef&&(e&&e.parent&&e.parent.id)===a&&t.push(n.decisionRef),n.decisionRef&&(e&&e.parent&&e.parent.id)===a})),t&&!(t.length<=0)){e.next=6;break}return e.abrupt("return");case 6:return e.next=8,Wt([{fieldName:"decisionId",operator:"IN",value:t}]);case 8:return i=e.sent,o=r&&i&&r.map((function(e){var t=i.find((function(t){return t.decisionId===(e.businessObject&&e.businessObject.decisionRef)}));return Object(c.a)(Object(c.a)({},t),{},{dmnNodeId:e.id,dmnNodeNameId:e.businessObject.name,resultVariable:e.businessObject.resultVariable})})),e.abrupt("return",o&&o.filter((function(e){return e.id})));case 11:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),L=function(){if(g){var e=g.get("elementRegistry"),t="bpmn:Process"===u.type||"bpmn:Participant"===u.type?u.id:u&&u.parent&&u.parent.id;return e.filter((function(e){var n=Object(P.getBusinessObject)(e);return Object(P.is)(e,"bpmn:BusinessRuleTask")&&n&&n.resultVariable&&n.decisionRef&&(e&&e.parent&&e.parent.id)===t})).length>0||void 0}};function D(e){Hr=(T?T.length:Hr)+1,F((function(t){return[].concat(Object(s.a)(t),[{id:Hr,parentId:e,rules:[]}])}))}function I(e){F(Object(dr.a)((function(t){var n=T.findIndex((function(t){return t.id===e}));t.splice(n,1)})))}function A(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};F(Object(dr.a)((function(n){var a=T.findIndex((function(t){return t.id===e}));n[a].rules=[].concat(Object(s.a)(n[a].rules),[t])})))}function V(e,t){F(Object(dr.a)((function(n){n[T.findIndex((function(t){return t.id===e}))].rules.splice(t,1)})))}var B=function(e){return T.filter((function(t){return t.parentId===e}))};function $(){return W.apply(this,arguments)}function W(){return(W=Object(p.a)(m.a.mark((function e(){var t,n,a,r,i;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!O||"dmnModel"!==O.type){e.next=7;break}if(!((t=O.outputDmnFieldList.map((function(e){return e.id})))&&t.length>0)){e.next=7;break}return e.next=5,zt({data:{criteria:[{fieldName:"id",operator:"IN",value:t}]}});case 5:return n=e.sent,e.abrupt("return",n&&n.map((function(e){return Object(c.a)(Object(c.a)({},e),{},{type:e.fieldType})})));case 7:return a=ba(b),e.next=10,jr(C,a);case 10:if(e.t0=e.sent,e.t0){e.next=13;break}e.t0=[];case 13:if(r=e.t0,!C||!v){e.next=19;break}return e.next=17,qt([{model:C.name,type:C.type,modelFullName:"".concat(C.packageName,".").concat(C.name)}]);case 17:i=e.sent,r=[].concat(Object(s.a)(r||[]),Object(s.a)(i||[]));case 19:return e.abrupt("return",r.filter((function(e){return(v?[].concat(Object(s.a)(ta),["button"]):ta).includes((e.type||"").toLowerCase())&&(!a||!e.json)})));case 20:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function J(){return(J=Object(p.a)(m.a.mark((function e(){var t;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(!ba(b)&&L())){e.next=7;break}return e.next=4,R();case 4:e.t0=e.sent,e.next=8;break;case 7:e.t0=void 0;case 8:return t=e.t0,e.abrupt("return",Ye(ba(b)||y?null:ga(u,f),void 0,t));case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(a.useEffect)((function(){N(O||h),F(E)}),[E,O,h]),Object(a.useEffect)((function(){i({metaModals:C,rules:T},o)}),[o,i,C,T]),r.a.createElement("div",{style:{width:"100%"}},r.a.createElement(Za.a,{variant:"outlined",className:_.paper},r.a.createElement("div",{style:{display:"flex",width:"100%",flexDirection:"column"}},r.a.createElement("div",{style:{display:"flex"}},r.a.createElement(ja,{name:"metaModal",title:"Model",placeholder:"meta modal",fetchAPI:function(){return J.apply(this,arguments)},optionLabelKey:"name",onChange:function(e){N(e),F([qr])},readOnly:!!h,value:C,classes:{root:_.MuiAutocompleteRoot}}))),T.filter((function(e){return-1===e.parentId})).map((function(e){return r.a.createElement(r.a.Fragment,{key:e.id},r.a.createElement(Gr,{onAddGroup:D,onRemoveGroup:I,onAddRule:A,onRemoveRule:V,getChildEditors:B,getMetaFields:$,onChange:function(e,t,n){return function(e,t,n){var a=e.name,r=e.value;F(Object(dr.a)((function(e){var i=T.findIndex((function(e){return e.id===t.id}));n>=0?Object.assign(e[i].rules[n]=Object(c.a)(Object(c.a)(Object(c.a)({},e[i].rules[n]),{},Object(d.a)({},a,r),"fieldName"===a?{operator:"",fieldValue:null,fieldValue2:null,isRelationalValue:null,relatedValueFieldName:null,relatedValueModal:null}:{}),"operator"===a?{fieldValue:null,fieldValue2:null,isRelationalValue:null,relatedValueFieldName:null,relatedValueModal:null}:{})):e[i][a]=r})))}(e,t,n)},editor:e,isDisable:!Boolean(C),expression:x,type:b,parentMetaModal:C,element:u,processConfigs:f,isAllowButtons:v}),r.a.createElement("br",null))}))))},Xr=Object(F.a)((function(e){return{paper:{margin:e.spacing(1),padding:e.spacing(3,2),width:"calc(100% - 16px)",display:"flex",height:"calc(100% - 50px)",overflow:"auto"},expressionContainer:{display:"flex",alignItems:"center",width:"100%"},dialogPaper:{maxWidth:"100%",maxHeight:"100%",resize:"both",width:"70%",height:650},dialog:{minWidth:300},root:{display:"flex",flexDirection:"column",alignItems:"flex-start",height:"100%",overflow:"hidden"},combinator:{width:"fit-content"},timelineConnector:{backgroundColor:"#0275d8"},save:{margin:e.spacing(1),backgroundColor:"#0275d8",borderColor:"#0267bf",color:"white","&:hover":{backgroundColor:"#025aa5",borderColor:"#014682",color:"white"}},timeline:{width:"100%",padding:0,margin:0},timelineOppositeContent:{display:"flex",alignItems:"center",justifyContent:"flex-end",maxWidth:60,padding:0},checkbox:{color:"#0275d8","&.MuiCheckbox-colorSecondary.Mui-checked":{color:"#0275d8"}},timelineItem:{"&.MuiTimelineItem-missingOppositeContent:before":{padding:0}},expression:{height:"100%",width:"100%"}}}));var Zr=function(e){var t=e.handleClose,n=e.open,i=e.element,o=e.setProperty,u=e.getExpression,d=e.type,b=void 0===d?"expressionBuilder":d,f=e.title,v=void 0===f?"Add Expression":f,g=e.processConfigs,y=e.isAllowButtons,h=void 0===y||y,O=e.allowAllModels,E=void 0!==O&&O,j=e.bpmnModeler,x=e.defaultModel,w=ba(b)?"BPM":"GROOVY",k=Object(a.useState)("and"),C=Object(l.a)(k,2),N=C[0],S=C[1],M=Object(a.useState)(!1),T=Object(l.a)(M,2),P=T[0],F=T[1],_=Object(a.useState)([{Component:Yr}]),R=Object(l.a)(_,2),L=R[0],D=R[1],A=Object(a.useState)(!1),V=Object(l.a)(A,2),B=V[0],$=V[1],W=Object(a.useState)(!1),J=Object(l.a)(W,2),z=J[0],G=J[1],U=Object(a.useState)({alertMessage:"Add all values",alertTitle:"Error"}),H=Object(l.a)(U,2),q=H[0],K=H[1],Y=Object(a.useState)(!1),X=Object(l.a)(Y,2),Z=X[0],Q=X[1],ee=Object(a.useState)(null),te=Object(l.a)(ee,2),ne=te[0],ae=te[1],re=Xr();function ie(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if("date"===e){var a='"'.concat(br()(t,Zn.date).format("YYYY-MM-DD"),'"');return n?a:"LocalDate.parse(".concat(a,")")}if("datetime"===e)return n?'"'.concat(br()(t,Zn.datetime).toISOString(),'"'):"LocalDateTime.of(".concat(br()(t,Zn.datetime).format("YYYY-M-D-H-m-s").split("-"),")");var r='"'.concat(br()(t,Zn.time).format("HH:mm:ss"),'"');return n?r:"LocalTime.parse(".concat(r,")")}function oe(e,t){for(var n=ba(b),a=n?"self":z?"$ctx.find('".concat(function(e){if(e)return e.charAt(0).toUpperCase()+e.slice(1)}(t),"', ").concat(t,"Id)"):t,r=aa[n?"BPM":w],i=[],o=function(t){var o=e[t],l=o.fieldName,c=o.field,s=void 0===c?{}:c,u=o.operator,m=o.allField,d=s||{},p=d.targetName,f=d.selectionList,v=s&&s.type&&s.type.toLowerCase(),g=s&&s.typeName,y=["long","integer","decimal","boolean","button","double"].includes(v),h=["date","time","datetime"].includes(v),O=o.fieldValue,E=o.fieldValue2,j=o.isRelationalValue,x=l;!y||f||j||(O||!1===O||(O=0),["between","notBetween"].includes(u)&&!E&&(E=0));var k=x&&x.split(Xn[w])[0],C=m&&m.find((function(e){return e.name===k}));if(["many_to_many","one_to_many","many_to_one","one_to_one","json_many_to_many","json_one_to_many","json_many_to_one","json_one_to_one"].includes(C&&C.type&&C.type.toLowerCase()&&C.type.toLowerCase().replaceAll("-","_")))i.push(function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",a=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3?arguments[3]:void 0,i=aa[ba(b)?"BPM":w],o=t.fieldName,l=t.operator,c=t.allField,s=t.fieldValue,u=t.fieldValue2,m=t.isRelationalValue,d=t.relatedValueFieldName,p=t.relatedValueModal,f=t.relatedElseValueFieldName,v=t.relatedElseValueModal,g=t.parent,y=t.nameField,h=o,O=h&&h.split(Xn[ba(b)?"BPM":w]).filter((function(e){return""!==e})),E=O[0],j=c.find((function(e){return e.name===E})),x=j||{},k=x.targetName,C=x.selectionList,N=x.nameField,S=j&&j.type&&j.type.toLowerCase().replaceAll("-","_"),M=j&&j.typeName,T=O&&O.splice(1)||[];if(["many_to_many","one_to_many","json_many_to_many","json_one_to_many"].includes(S)){var P=n.match(/\$\$/g);if(P&&P.length>0){var F=T.length>=1?"".concat(E,".find{it->it.$$$$}").concat(Qn.includes(l)?" != null":" == null"):"".concat(E,".").concat(T.length>0?"find":"collect","{it->it$$$$}").concat(T.length>0?Qn.includes(l)?" != null":" == null":"");n=n.replace(/\$\$/g,F)}else{var _=T.length>=1?"".concat(E,".find{it->it.$$}").concat(Qn.includes(l)?" != null":" == null"):"".concat(E,".").concat(T.length>0?"find":"collect","{it->it$$}").concat(T.length>0?Qn.includes(l)?" != null":" == null":"");n+=_}var R=T.join(Xn[w]);return e({fieldName:R,operator:l,allField:c,fieldValue:s,fieldValue2:u,isRelationalValue:m,relatedValueFieldName:d,relatedValueModal:p,relatedElseValueFieldName:f,relatedElseValueModal:v,parent:O&&O[0],nameField:N||y},n,T.length>1,r)}if(["json_many_to_one","json_one_to_one","many_to_one","one_to_one"].includes(S)){var L=T.join(Xn[w]),D=n.match(/\$\$/g),I=T.length>=1?"".concat(E).concat(Xn[w]):E;return D&&D.length>0?n=n.replace(/\$\$/g,"".concat(I,"$$$$")):n+="".concat(I,"$$"),e({fieldName:L,operator:l,allField:c,fieldValue:s,fieldValue2:u,isRelationalValue:m,relatedValueFieldName:d,relatedValueModal:p,relatedElseValueFieldName:f,relatedElseValueModal:v,nameField:N||y,parent:O&&O[0]},n,T.length>1,r)}var A=["long","integer","decimal","boolean","button","double"].includes(S),V=["date","time","datetime"].includes(S);if(A&&(s||!1===s||C||m||(s=0),["between","notBetween"].includes(l)&&!u&&(u=0)),m||A||"object"===typeof s||(s="'".concat(Xa()(s),"'"),u="'".concat(Xa()(u),"'")),V&&(m||(s=ie(S,s),u=ie(S,u)),h=M?"".concat(h,"?.toLocalDateTime()"):h),["in","notIn"].includes(l)){var B=n&&n.includes("{it->it$$}"),$=c.find((function(e){return e.name===g}))||{},W="string"===typeof t.fieldValue?t.fieldValue:t.fieldValue.map((function(e){return A?"".concat(e.nameField||e.targetName||e.fullName||e.name||e.id):e.nameField||e.targetName||e.fullName||e.name?"'".concat(e.nameField||e.targetName||e.fullName||e.name,"'"):e.id})).join(","),J=a||T.length>=1?"":"".concat(h).concat(C?"":"".concat(Xn[w]).concat(y||$&&$.targetName||k||"fullName")),z="".concat("notIn"===l?"!":"","[".concat(W,"]")).concat(Xn[w]).concat(i[l]).concat(B?"All":"","(").concat(r).concat(Xn[w]).concat(n.replace(/\$\$/g,J),")");return z}if(["contains","notContains"].includes(l)){var G=n&&n.includes("{it->it$$}"),U=c.find((function(e){return e.name===g}))||{},H="string"===typeof t.fieldValue?t.fieldValue:t.fieldValue.map((function(e){return A?"".concat(e.nameField||e.targetName||e.fullName||e.name||e.id):e.nameField||e.targetName||e.fullName||e.name?"'".concat(e.nameField||e.targetName||e.fullName||e.name,"'"):e.id})).join(","),q=a||T.length>=1?"":"".concat(h).concat(C?"":"".concat(Xn[w]).concat(y||U&&U.targetName||k||"fullName")),K="".concat("notContains"===l?"!":"","(").concat(r).concat(Xn[w]).concat(n.replace(/\$\$/g,q),")").concat(Xn[w]).concat(i[l]).concat(G?"All":"","(","[".concat(H,"]"),")");return K}if(["between","notBetween"].includes(l)){var Y=n.match(/it.\$\$/g);if(Y&&Y.length){var X="(it.".concat(r).concat(Xn[w]).concat(h," >= ").concat(s," && it.").concat(r).concat(Xn[w]).concat(h," <= ").concat(u,")");return"notBetween"===l?"".concat(n.replace(/it.\$\$/g,"!".concat(X))):n.replace(/it.\$\$/g,X)}var Z=function(e){var t=e&&e.replace(/\$\$/g,h)||h;return"notBetween"===l?"!(".concat(r).concat(Xn[w]).concat(t," >= ").concat(s," && ").concat(r).concat(Xn[w]).concat(t," <= ").concat(u,")"):"(".concat(r).concat(Xn[w]).concat(t," >= ").concat(s," && ").concat(r).concat(Xn[w]).concat(t," <= ").concat(u,")")};return Z(n)}if(["isNotNull","isNull"].includes(l)){var Q="".concat(h," ").concat(i[l]),ee=c.find((function(e){return e.name===g}))||{},te=n&&n.includes("{it->it$$}");if(te){var ne=a||T.length>=1?"":"".concat(h).concat(C?"":"".concat(Xn[w]).concat(ee&&ee.targetName||k||"fullName"));return"".concat(r).concat(Xn[w]).concat(n.replace(/\$\$/g,"".concat(ne," ").concat(Q)))}return"".concat(r).concat(Xn[w]).concat(n.replace(/\$\$/g,Q))}if(["isTrue","isFalse"].includes(l)){var ae="isTrue"===l,re="".concat(h," ").concat(i[l]," ").concat(ae);return"".concat(r).concat(Xn[w]).concat(n.replace(/\$\$/g,re))}if(["like","notLike"].includes(l)){var oe="".concat(h).concat(Xn[w]).concat(i[l],"(").concat(s,")");return"".concat("notLike"===l?"!":"").concat(r).concat(Xn[w]).concat(n.replace(/\$\$/g,oe))}var le=j||c.find((function(e){return e.name===g}))||{},ce="object"===typeof s&&s?"'".concat(Xa()(s[y]||s[k]||s.fullName||s.name||s.id||""),"'"):s,se="".concat("object"===typeof s&&s?"".concat(h).concat(Xn[w]).concat(y||le.targetName||"fullName"):h," ").concat(i[l]," ").concat(ce);return"button"===S?"".concat(n.replace(/\$\$/g,se)):"".concat(r).concat(Xn[w]).concat(n.replace(/\$\$/g,se))}(o,void 0,!1,a));else{j||y||"object"===typeof O||(O="'".concat(Xa()(O),"'"),E="'".concat(Xa()(E),"'")),h&&(j||(O=ie(v,O),E=ie(v,E)),x=g?"".concat(x,"?.toLocalDateTime()"):x);var N=n?Yn:Kn;if(["in","notIn"].includes(u)){var S=o.fieldValue.map((function(e){return y?"".concat(e.targetName||e.fullName||e.name):"'".concat(e.targetName||e.fullName||e.name,"'")})).filter((function(e){return""!==e})).join(",");i.push("".concat("notIn"===u?"!":"","[".concat(S,"]")).concat(Xn[w]).concat(r[u],"(").concat(a).concat(Xn[w]).concat(x).concat(f?" ":"".concat(Xn[w]," ").concat(p||"fullName"),")"))}else if(["between","notBetween"].includes(u))"notBetween"===u&&i.push("!(".concat(a).concat(Xn[w]).concat(x," >= ").concat(O," ").concat(N.and," ").concat(a).concat(Xn[w]).concat(x," <= ").concat(E,")")),i.push("(".concat(a).concat(Xn[w]).concat(x," >= ").concat(O," ").concat(N.and," ").concat(a).concat(Xn[w]).concat(x," <= ").concat(E,")"));else if(["isNotNull","isNull"].includes(u))i.push("".concat(a).concat(Xn[w]).concat(x," ").concat(r[u]));else if(["isTrue","isFalse"].includes(u)){var M="isTrue"===u;i.push("".concat(a).concat(Xn[w]).concat(x," ").concat(r[u]," ").concat(M))}else if(["like","notLike"].includes(u))i.push("".concat("notLike"===u?"!":"").concat(a).concat(Xn[w]).concat(x).concat(Xn[w]).concat(r[u],"(").concat(O,")"));else{var T="object"===typeof O&&O?"'".concat(Xa()(O[p]||O.fullName||O.name||""),"'"):O;i.push("button"===v?"".concat(x," ").concat(r[u]," ").concat(T):"".concat(a).concat(Xn[w]).concat("many_to_one"===v||"json_many_to_one"===v?"".concat(x).concat(Xn[w]).concat(s.targetName||"fullName"):x," ").concat(r[u]," ").concat(T))}}},l=0;l<(e&&e.length);l++)o(l);return i}function le(e,t){for(var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,a=ba(b),r=a?"self":t,i=aa[a?"BPM":w],o=n,l=[],s=function(n){var s=e[n],u=s.fieldName,m=s.field,d=void 0===m?{}:m,p=s.operator,b=s.allField,f=d||{},v=f.targetName,g=f.selectionList,y=f.model,h=f.target,O=f.jsonField,E=d&&d.type&&d.type.toLowerCase(),j=["long","integer","double","decimal","boolean"].includes(E),x=["date","time","datetime"].includes(E),k="com.axelor.meta.db.MetaJsonRecord"===y||"com.axelor.meta.db.MetaJsonRecord"===h||O,C=void 0,N=u&&u.split(Xn[w]);!k&&N&&N.length>1&&N.forEach((function(e){var t=b&&b.find((function(t){return t.name===e&&("com.axelor.meta.db.MetaJsonRecord"===t.model||"com.axelor.meta.db.MetaJsonRecord"===t.target||t.jsonField)}));t&&(k=!0,C=t)}));var S=k?"".concat(ya(C?Object(c.a)(Object(c.a)({},C),{},{targetName:d&&d.targetName}):d,r,u)):void 0,M=s||{},T=M.fieldValue,P=M.fieldValue2,F=M.isRelationalValue,_=M.relatedValueModal,R=void 0===_?{}:_,L=M.relatedElseValueModal,D=void 0===L?{}:L;!j||g||F||(T||(T=0),["between","notBetween"].includes(p)&&!P&&(P=0));var I=fa(R&&R.name),A=fa(D&&D.name),V=I===t,B=A===t;["isNotNull","isNull"].includes(p)||V||++o,F||j||"object"===typeof T||(T="'".concat(Xa()(T),"'"),P="'".concat(Xa()(P),"'")),x&&(F||(T=ie(E,T,k),P=ie(E,P,k)));var $=a?Yn:Kn;if(["in","notIn"].includes(p)){var W=s&&s.fieldValue&&s.fieldValue.map((function(e){return j?"".concat(e.targetName||e.fullName||e.name):"'".concat(e.targetName||e.fullName||e.name,"'")})).filter((function(e){return""!==e}));l.push({condition:"".concat(S||"".concat(r,".").concat(u).concat(g?"":".".concat(v||"fullName"))," ").concat(i[p]," ").concat(V?T:"?".concat(o)),values:V?void 0:[[W]]})}else if(["between","notBetween"].includes(p)){var J=V&&B?void 0:V?[P]:B?[T]:[T,P];x&&a?("notBetween"===p&&l.push({condition:"".concat(S||"".concat(r,".").concat(u)," NOT BETWEEN ").concat(V?T:"?".concat(o)," ").concat($.and," ").concat(B?P:"?".concat(++o)),values:J}),l.push({condition:"".concat(S||"".concat(r,".").concat(u)," BETWEEN ").concat(V?T:"?".concat(o)," ").concat($.and," ").concat(B?P:"?".concat(++o)),values:J})):("notBetween"===p&&l.push({condition:"NOT (".concat(S||"".concat(r,".").concat(u)," >= ").concat(V?T:"?".concat(o)," ").concat($.and," ").concat(S||"".concat(r,".").concat(u)," <= ").concat(B?P:"?".concat(++o),")"),values:J}),l.push({condition:"(".concat(S||"".concat(r,".").concat(u)," >= ").concat(V?T:"?".concat(o)," ").concat($.and," ").concat(S||"".concat(r,".").concat(u)," <= ").concat(B?P:"?".concat(++o),")"),values:J}))}else if(["isNotNull","isNull"].includes(p))l.push({condition:"".concat(S||"".concat(r,".").concat(u)," ").concat(i[p])});else if(["isTrue","isFalse"].includes(p)){--o;var z="isTrue"===p;l.push({condition:"".concat(S||"".concat(r,".").concat(u)," ").concat(i[p]," ").concat(V?T:"?".concat(o)),values:V?void 0:[z]})}else if(["contains","notContains"].includes(p)){var G="object"===typeof T&&T?"'".concat(Xa()(T[d.targetName]||""),"'"):T;l.push({condition:"".concat(V?T:"?".concat(o)," ").concat(i[p]," ").concat(S||"".concat(r,".").concat(u)),values:V?void 0:[G]})}else{var U="object"===typeof T&&T?"'".concat(Xa()(T[d.targetName]||""),"'"):T;l.push({condition:"".concat(S||"".concat(r,".").concat(["many_to_one","json_many_to_one","one_to_one","json_one_to_one"].includes(E)&&!F?"".concat(u,".").concat(d.targetName||"fullName"):u)," ").concat(i[p]," ").concat(V?["like","notLike"].includes(p)?"CONCAT('%',".concat(T,",'%')"):T:["like","notLike"].includes(p)?"CONCAT('%',?".concat(o,",'%')"):"?".concat(o)),values:V?void 0:[U]})}},u=0;u<(e&&e.length);u++)s(u);return l}function ue(e,t,n){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,r=e&&e[0]||{},i=r.rules,o=r.combinator,l=void 0===o?"and":o,c=r.children,u=r.parentId,m=le(i,t,a),d=m&&m.filter((function(e){return e})),p=[];c&&c.length>0&&c.forEach((function(e){var n=d&&d.map((function(e){return e&&e.values})).filter((function(e){return e}))||[],a=p&&p.map((function(e){return e&&e.values})).filter((function(e){return e}))||[],r=ue([e],t,!0,(n&&n.length)+(a&&a.length))||{},i=r.condition,o=r.values,l=[].concat.apply([],o);p.push({condition:i,values:l&&l.length>0?l:void 0})}));var f=ba(b)?Yn:Kn,v=d&&d.map((function(e){return e&&e.condition})),g=p&&(p.map((function(e){return e&&e.condition}))||[]).filter((function(e){return e})),y=p&&p.filter((function(e){return null!==e}));if(-1===u&&c.length>0){var h=g&&0!==g.length;return{condition:"".concat(h?"( ":"","(").concat(v?v.join(" "+f[l]+" "):""," ").concat(h?" ".concat(f[l]," ").concat(g.join(" "+f[l]+" ")):"",")").concat(h?" )":""),values:[].concat(Object(s.a)(d&&d.map((function(e){return e&&e.values})).filter((function(e){return e}))||[]),Object(s.a)(y&&y.map((function(e){return e&&e.values})).filter((function(e){return e}))||[]))}}return n&&d&&v&&0!==v.length?{condition:"(".concat(v.join(" "+f[l]+" "),")"),values:d&&d.map((function(e){return e&&e.values})).filter((function(e){return e}))}:v&&0!==v.length?{condition:"".concat(v.join(" "+f[l]+" ")),values:d&&d.map((function(e){return e&&e.values})).filter((function(e){return e}))}:void 0}function me(e,t,n){var a=e[0],r=a.rules,i=a.combinator,o=void 0===i?"and":i,l=a.children,c=a.parentId,s=oe(r,t),u=s&&s.filter((function(e){return e}))||[],m=[];l&&l.length>0&&l.forEach((function(e){var n=me([e],t,!0);n&&m.push(n)}));var d=ba(b)?Yn:Kn;if(-1===c&&l.length>0&&u&&u.length>0){var p=m&&0!==m.length;return"".concat(p?"( ":"","(").concat(u?u.join(" "+d[o]+" "):""," ").concat(p?" ".concat(d[o]," ").concat(m.join(" "+d[o]+" ")):"",")").concat(p?")":"")}return n&&u&&u.length>0?" ("+u.join(" "+d[o]+" ")+") ":u&&u.length>0?u.join(" "+d[o]+" "):void 0}function de(e){for(var t,n={},a=[],r=e.map((function(e,t){return n[e.id]=t,Object(c.a)(Object(c.a)({},e),{},{children:[]})})),i=0;i<r.length;i+=1)(t=r[i]).parentId>=0?r[n[t.parentId]]&&r[n[t.parentId]].children.push(t):a.push(t);return a}var pe=r.a.useCallback((function(e,t){D(Object(dr.a)((function(n){n[t].value=e})))}),[]);function be(e,n){var a,r=[],i=[],l=[];if(!function(){for(var e=!0,t=[],n=0;n<(L&&L.length);n++){var a=L[n].value||{},r=a.rules;if(!a.metaModals)return e;t.push(r)}for(var i=se.a.flattenDeep(t||[]),o=i&&i.map((function(e){return e.rules})),l=se.a.flattenDeep(o||[]),c=0;c<(l&&l.length);c++){var s=l&&l[c],u=s||{},m=u.fieldName,d=u.field,p=void 0===d?{}:d,b=u.operator,f=(p||{}).selectionList,v=p&&p.type&&p.type.toLowerCase(),g=["long","integer","decimal","boolean","button","double"].includes(v),y=s.fieldValue,h=s.fieldValue2,O=s.isRelationalValue,E=m;!g||f||O||(y||!1===y||(y=0),["between","notBetween"].includes(b)&&!h&&(h=0));var j=isNaN(y)?y:"".concat(y);if(!E){e=!1;break}if(Object(ce.isEmpty)(j)&&!["isNull","isNotNull","isTrue","isFalse"].includes(b)){e=!1;break}if(""===b||f&&!y&&!["isNull","isNotNull","isTrue","isFalse"].includes(b)||g&&O&&!y||(!g&&!y||y&&y.length<=0||(!h||h&&h.length<=0)&&["between","notBetween"].includes(b))&&!["isNull","isNotNull","isTrue","isFalse"].includes(b)){e=!1;break}}return e}())return F(!0),void K({alertMessage:"Add all values",alertTitle:"Error"});for(var c=0;c<L.length;c++){var u=L[c].value,m=u.rules,d=u.metaModals,p=d&&"dmnModel"===d.type?d.resultVariable:d&&d.name;a=p;var f="",v=de(m),g=ba(n)?ue(v,fa(p),void 0):me(v,fa(p),void 0);if(i.push.apply(i,Object(s.a)(g&&((g.values||[]).filter((function(e){return Array.isArray(e)}))||[])||[])),!d)break;f+=ba(n)?g&&g.condition:g;var y={metaModalName:p,metaModalType:d.type,rules:m,generateWithId:z};d&&"dmnModel"===d.type&&(y.decisionId=d.decisionId,y.dmnNodeId=d.dmnNodeId),r.push(y),l.push("".concat(f))}var h=ba(b)?Yn:Kn,O=l.filter((function(e){return""!==e})).map((function(e){return l.length>1?"(".concat(e,")"):e})).join(" "+h[e]+" "),E=O;if(ba(n)){var j="";i&&i.forEach((function(e){e&&Array.isArray(e[0])&&e[0]?j+=", [".concat(e[0],"]"):(e&&Array.isArray(e)&&e.length>0&&(e=e.join(", ")),j=j+", "+e)})),E=O?"return $ctx.createVariable($ctx.".concat(B?"filterOne":"filter",'("').concat(a,'"," ').concat(O,' "').concat(i&&i.length>0?"".concat(j):"","))"):void 0}o({expression:E,value:r&&r.length>0?JSON.stringify(r):void 0,combinator:ba(n)?B:e}),t()}return Object(a.useEffect)((function(){var e=!0;function t(){return(t=Object(p.a)(m.a.mark((function t(){var n,a,r,i,o,l,s;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=u()||{},a=n.values,r=n.combinator,i=[],ae(a),a&&0!==a.length){t.next=6;break}return D([{Component:Yr,value:void 0}]),t.abrupt("return");case 6:o=m.a.mark((function e(t){var n,r,o,l,s,u,d,p,b,f,v,g,y;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=a[t],r=n.metaModalName,o=n.decisionId,l=n.dmnNodeId,s=n.metaModalType,u=n.generateWithId,"dmnModel"!==s){e.next=16;break}if(o){e.next=5;break}return e.abrupt("return",{v:void 0});case 5:return e.next=7,Wt([{fieldName:"decisionId",operator:"=",value:o}]);case 7:if((d=e.sent)&&j){e.next=10;break}return e.abrupt("return",{v:void 0});case 10:p=j.get("elementRegistry"),b=p&&p.find((function(e){return e.id===l})),f={metaModals:d&&Object(c.a)(Object(c.a)({},d[0]),{},{dmnNodeId:b&&b.id,dmnNodeNameId:b&&b.businessObject&&b.businessObject.name,resultVariable:b&&b.businessObject&&b.businessObject.resultVariable,type:"dmnModel"}),rules:n.rules},i.push({Component:Yr,value:f}),e.next=24;break;case 16:return v={criteria:[{fieldName:"name",operator:"=",value:r}],operator:"and"},e.next=19,Ye(v,s);case 19:if(g=e.sent){e.next=22;break}return e.abrupt("return",{v:void 0});case 22:y={metaModals:g&&g[0],rules:n.rules},i.push({Component:Yr,value:y});case 24:G(u);case 25:case"end":return e.stop()}}),e)})),l=0;case 8:if(!(l<a.length)){t.next=16;break}return t.delegateYield(o(l),"t0",10);case 10:if("object"!==typeof(s=t.t0)){t.next=13;break}return t.abrupt("return",s.v);case 13:l++,t.next=8;break;case 16:e&&(D(i),ba(b)?$(r):S(r||"and"));case 17:case"end":return t.stop()}}),t)})))).apply(this,arguments)}return function(){t.apply(this,arguments)}(),function(){return e=!1}}),[u,b,j]),r.a.createElement(I.a,{onClose:function(e,n){"backdropClick"!==n&&t()},"aria-labelledby":"simple-dialog-title",open:n,classes:{paper:re.dialogPaper}},r.a.createElement(za.a,{id:"simple-dialog-title"},v),r.a.createElement("div",{className:re.root},r.a.createElement(Za.a,{variant:"outlined",className:re.paper},r.a.createElement("div",{style:{height:"100%",width:"100%"}},r.a.createElement("div",{className:re.expression},!ba(b)&&r.a.createElement(Qa.a,{control:r.a.createElement(er.a,{checked:z,onChange:function(e){return G(e.target.checked)},name:"generateWithId",className:re.checkbox}),style:{color:"#0275d8"},label:"Generate with saved record"}),r.a.createElement(tr.a,{align:"alternate",className:re.timeline,style:{border:"BPM"===w?"none":"1px solid rgba(0, 0, 0, 0.12)",padding:"BPM"===w?0:"24px 16px"}},ba(b)?r.a.createElement(nr.a,{className:re.timelineItem,style:{width:"100%"}},r.a.createElement("div",{style:{width:"100%"}},r.a.createElement(Qa.a,{control:r.a.createElement(er.a,{checked:B,onChange:function(e){return $(e.target.checked)},name:"singleResult",className:re.checkbox}),style:{color:"#0275d8"},label:"Single Result"}),L&&L.map((function(e,t){var n=e.Component,a=e.value;return r.a.createElement("div",{className:re.expressionContainer,key:t},r.a.createElement(n,{value:a,index:t,setValue:pe,element:i,type:b,processConfigs:g,isAllowButtons:h,allowAllModels:E,bpmnModeler:j,defaultModel:x}))})))):r.a.createElement(nr.a,{style:{minHeight:"100%",width:"89%"}},r.a.createElement(ar.a,{className:re.timelineOppositeContent},r.a.createElement(Pn,{name:"expression",options:qn,value:N||"and",disableUnderline:!0,className:re.combinator,onChange:function(e){S(e)}})),r.a.createElement(rr.a,null,r.a.createElement(ir.a,{variant:"outlined",style:{borderColor:"#0275d8"}}),r.a.createElement(or.a,{className:re.timelineConnector})),r.a.createElement(lr.a,{style:{width:"100%"}},r.a.createElement(Vn,{title:"Add Expression",Icon:sr.a,onClick:function(){D(Object(dr.a)((function(e){e.push({Component:Yr.bind({})})})))}}),r.a.createElement("div",null,L&&L.map((function(e,t){var n=e.Component,a=e.value;return r.a.createElement("div",{className:re.expressionContainer,key:t},r.a.createElement(n,{value:a,index:t,setValue:pe,element:i,type:b,processConfigs:g,isAllowButtons:h,allowAllModels:E,bpmnModeler:j,defaultModel:x}),!ba(b)&&r.a.createElement(Vn,{Icon:mr.a,onClick:function(){return function(e){D(Object(dr.a)((function(t){t.splice(e,1)})))}(t)}}))}))))))))),r.a.createElement("div",null,r.a.createElement(Vn,{title:"OK",className:re.save,onClick:function(){return be(N,b)}}),r.a.createElement(Vn,{title:"Cancel",className:re.save,onClick:function(){var e=function(){var e=[];return L&&L.forEach((function(t){var n=t.value||{},a=n.rules,r=n.metaModals,i=r&&r.name;r&&e.push({metaModalName:i,metaModalType:r&&r.type,rules:a,generateWithId:z})})),e}();e&&e.length<=0||JSON.stringify(e)===JSON.stringify(ne)?t():(Q(!0),F(!0),K({alertMessage:"Current changes will be lost. Do you really want to proceed?",alertTitle:"Question"}))}}))),P&&r.a.createElement(I.a,{open:P,onClose:function(e,t){"backdropClick"!==t&&F(!1)},"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",classes:{paper:re.dialog}},r.a.createElement(za.a,{id:"alert-dialog-title"},q.alertTitle),r.a.createElement(Ga.a,null,r.a.createElement(Ha.a,{id:"alert-dialog-description"},q.alertMessage)),r.a.createElement(Ua.a,null,r.a.createElement(In.a,{onClick:function(){F(!1),Z&&t()},color:"primary",autoFocus:!0,className:re.save},"Ok"),r.a.createElement(In.a,{onClick:function(){F(!1)},color:"primary",autoFocus:!0,style:{textTransform:"none"},className:re.save},"Cancel"))))};var Qr=Object(F.a)((function(e){return{option:{whiteSpace:"nowrap",textOverflow:"ellipsis",overflow:"hidden",display:"list-item !important"},autoComplete:{"& > div > label":{fontSize:14},"& > div > div":{paddingRight:"15px !important"},margin:"8px 0px",background:"white",border:"1px solid #ccc",padding:"0px 5px"},input:{fontSize:14,color:e.palette.common.black,padding:"3px 0 3px !important"},label:{fontSize:14},endAdornment:{top:0},circularProgress:{color:"#0A73FA"},error:{borderColor:"#cc3333 !important",background:"#f0c2c2","&:focus":{boxShadow:"rgba(204,58,51, 0.2) 0px 0px 1px 2px !important",outline:"none",borderColor:"#cc3333 !important"}},errorDescription:{marginTop:5,color:"#CC3333"},disabled:{fontSize:14,color:"rgba(0, 0, 0, 0.38)",padding:"3px 0 3px !important"},disableAutoComplete:{background:"#dddddd"}}}));function ei(e){var t=e.name,n=e.optionLabel,i=void 0===n?"title":n,o=e.optionLabelSecondary,u=void 0===o?"name":o,m=e.multiple,p=void 0!==m&&m,b=e.index,f=e.value,v=e.update,g=e.type,y=e.options,h=e.label,O=e.fetchMethod,E=e.isLabel,j=void 0===E||E,x=e.error,w=void 0!==x&&x,k=e.className,C=e.defaultValue,N=e.isTranslated,S=void 0===N||N,M=e.placeholder,T=e.validate,P=e.disabled,F=void 0!==P&&P,_=e.disableUnderline,R=void 0===_||_,L=e.disableClearable,D=void 0!==L&&L,I=e.isOptionEllipsis,A=void 0!==I&&I,V=Object(a.useState)(!1),B=Object(l.a)(V,2),$=B[0],W=B[1],z=Object(a.useState)([]),G=Object(l.a)(z,2),U=G[0],H=G[1],q=Object(a.useState)(null),K=Object(l.a)(q,2),Y=K[0],X=K[1],Z=Object(a.useState)(!1),Q=Object(l.a)(Z,2),ee=Q[0],te=Q[1],ae=Object(a.useState)(null),re=Object(l.a)(ae,2),ie=re[0],oe=re[1],le=Object(a.useState)(!1),ce=Object(l.a)(le,2),se=ce[0],ue=ce[1],me=Qr(),de=Object(a.useCallback)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";te(!0);var t=[];if(e&&t.push({fieldName:i,operator:"like",value:e}),O&&$)return O(t).then((function(e){if(te(!1),e){var t=e&&e.filter((function(e){return null!==e[i]}));H(t||[])}}));te(!1)}),[i,O,$]);!function(e,t){var n=Object(a.useRef)(!1);Object(a.useEffect)((function(){if(n.current){var a=setTimeout((function(){return e()}),t);return function(){return clearTimeout(a)}}n.current=!0}),[e,t])}(r.a.useCallback((function(){Y&&de(Y)}),[de,Y]),500);var pe=r.a.useCallback((function(){if(!T||(null===f||void 0===f)&&"id"===t)return oe(null),!1;var e=T(Object(d.a)({},t,""===f?void 0:f));return e&&e[t]?(oe(e[t]),!0):(oe(null),!1)}),[T,f,t]);return Object(a.useEffect)((function(){var e=pe();ue(e)}),[pe]),Object(a.useEffect)((function(){(!$||y&&y.length<1)&&H([])}),[$,y]),Object(a.useEffect)((function(){$&&(y&&y.length>0?H(Object(s.a)(y)):de(null))}),[de,$,y]),Object(a.useEffect)((function(){y&&(te(!0),H(y),te(!1))}),[y]),r.a.createElement(r.a.Fragment,null,r.a.createElement(ma.a,{classes:{inputFocused:F?me.disabled:me.input,clearIndicator:F?me.disabled:me.input,popupIndicator:F?me.disabled:me.input,endAdornment:me.endAdornment,option:A?me.option:""},size:"small",key:b,open:$,onOpen:function(e){e&&e.stopPropagation(),W(!0)},onClose:function(e){e&&e.stopPropagation(),W(!1)},onClick:function(e){e&&e.stopPropagation(),W(!0)},loading:ee,defaultValue:C,clearOnEscape:!0,autoComplete:!0,className:ne()(me.autoComplete,k,se&&me.error,F&&me.disableAutoComplete),disableClearable:D,options:U,multiple:p,value:f,disabled:F,getOptionSelected:function(e,n){if(n){var a="";return e[a="itemName"===t||"userFieldPath"===t?e.label?"label":e.title?"title":(e.name,"name"):"wkfModel"===t?"".concat(e.wkfModel&&e.wkfModel.name," (").concat(e.name,")"):e[i]?i:e.title?"title":"name"]===n[a]}},onChange:function(e,n){var a=n;"multiple"===g&&(a=n&&n.filter((function(e,t,n){return t===n.findIndex((function(t){return t[i]===e[i]}))}))),v(a,"itemName"===t&&n?n.label||n.title:"title"===u?n&&n[u]:n&&n[i])},name:t,onInputChange:function(e,t){return X(t)},renderInput:function(e){return r.a.createElement(_n.a,Object.assign({error:w,disabled:F,helperText:w?"Required":"",className:se?me.error:"",fullWidth:!0},e,{InputProps:Object(c.a)(Object(c.a)({},e.InputProps||{}),{},{endAdornment:r.a.createElement(r.a.Fragment,null,ee?r.a.createElement(ua.a,{className:me.circularProgress,size:15}):null,e.InputProps.endAdornment),onClick:function(e){return e&&e.stopPropagation()},disableUnderline:R}),inputProps:Object(c.a)(Object(c.a)({},e.inputProps||{}),{},{onClick:function(t){t&&t.stopPropagation(),e.inputProps&&e.inputProps.onClick&&e.inputProps.onClick(t)}}),placeholder:M||"",InputLabelProps:{className:me&&me.label},label:j?h:void 0}))},getOptionLabel:function(e){var n="";return n="itemName"===t||"userFieldPath"===t?e.label||e.title?"".concat(e.label||e.title).concat(e.name?" (".concat(e.name,")"):""):"object"===typeof e?e.name?"(".concat(e.name,")"):"":e:"dmnModel"===t?"".concat(e.name," (").concat(e.decisionId,")"):"wkfModel"===t?"".concat(e.wkfModel&&e.wkfModel.name," (").concat(e.name,")"):e[i]&&e[u]?"".concat(e[i]," (").concat(e[u],")"):e[i]?"".concat(e[i]):e[u]?"".concat(e[u]):e.title?e.title:"object"===typeof e?"":e,S?J(n):n}}),ie&&r.a.createElement("div",{className:me.errorDescription},ie))}var ti=n(82).default;function ni(){return new ti([32,32,1]).nextPrefixed("Process_")}var ai=Object(F.a)((function(e){return{groupLabel:{fontWeight:"bolder",display:"inline-block",verticalAlign:"middle",color:"#666",fontSize:"120%",margin:"10px 0px",transition:"margin 0.218s linear",fontStyle:"italic"},divider:{marginTop:15,borderTop:"1px dotted #ccc"},bpmn:{display:"flex",alignItems:"flex-end",justifyContent:"space-between"},linkIcon:{color:"#58B423",marginLeft:5},link:{cursor:"pointer"},dialogPaper:{padding:5,minWidth:450,overflow:"auto"},label:{fontWeight:"bolder",display:"inline-block",verticalAlign:"middle",color:"#666",marginTop:3},save:{margin:e.spacing(1),backgroundColor:"#0275d8",borderColor:"#0267bf",textTransform:"none",color:"white","&:hover":{backgroundColor:"#025aa5",borderColor:"#014682",color:"white"}},expressionBuilder:{display:"flex",alignItems:"flex-end",justifyContent:"space-between"},newIcon:{color:"#58B423",marginLeft:5},new:{cursor:"pointer",display:"flex"},dialog:{minWidth:300},select:{margin:0},dialogContent:{display:"flex",alignItems:"flex-end"}}}));function ri(e){var t=e.element,n=e.index,i=e.label,o=e.bpmnModeler,s=Object(a.useState)(!1),u=Object(l.a)(s,2),b=u[0],f=u[1],v=Object(a.useState)(!1),g=Object(l.a)(v,2),y=g[0],h=g[1],O=Object(a.useState)("bpmn"),E=Object(l.a)(O,2),j=E[0],x=E[1],w=Object(a.useState)(null),k=Object(l.a)(w,2),C=k[0],S=k[1],M=Object(a.useState)(!1),T=Object(l.a)(M,2),F=T[0],_=T[1],R=Object(a.useState)(!1),D=Object(l.a)(R,2),A=D[0],V=D[1],B=Object(a.useState)(null),W=Object(l.a)(B,2),G=W[0],U=W[1],H=Object(a.useState)(null),K=Object(l.a)(H,2),Y=K[0],X=K[1],Z=Object(a.useState)(!1),Q=Object(l.a)(Z,2),ee=Q[0],te=Q[1],ae=Object(a.useState)(null),re=Object(l.a)(ae,2),ie=re[0],oe=re[1],le=Object(a.useState)(!1),ce=Object(l.a)(le,2),se=ce[0],ue=ce[1],me=Object(a.useState)(!1),de=Object(l.a)(me,2),pe=de[0],be=de[1],fe=Object(a.useState)(null),ge=Object(l.a)(fe,2),ye=ge[0],he=ge[1],Oe=Object(a.useState)(null),Ee=Object(l.a)(Oe,2),je=Ee[0],xe=Ee[1],we=Object(a.useState)({open:!1,messageType:null,message:null}),ke=Object(l.a)(we,2),Ce=ke[0],Ne=ke[1],Se=ai(),Me=ni(),Te=function(){_(!1)},Pe=function(e,t){Ne({open:!0,messageType:e,message:t})},Fe=function(e,t){"clickaway"!==t&&Ne({open:!1,messageType:null,message:null})},_e=function(){var e=Object(p.a)(m.a.mark((function e(t){var n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ve.search("com.axelor.apps.bpm.db.WkfModel",{data:{_domain:"self.code = '".concat(t,"'")},limit:1});case 2:if(!(e.sent.total>0)){e.next=8;break}n=ni(),_e(n),e.next=9;break;case 8:return e.abrupt("return",t);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Re=function(){var e=Object(p.a)(m.a.mark((function e(){var n,a,r,i;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n='<?xml version="1.0" encoding="UTF-8" ?>\n      <bpmn2:definitions \n        xmlns:xs="http://www.w3.org/2001/XMLSchema-instance" \n        xs:schemaLocation="http://www.omg.org/spec/BPMN/20100524/MODEL BPMN20.xsd" \n        xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" \n        xmlns:bpmn2="http://www.omg.org/spec/BPMN/20100524/MODEL" \n        xmlns:bpmndi="http://www.omg.org/spec/BPMN/20100524/DI" \n        xmlns:dc="http://www.omg.org/spec/DD/20100524/DC" \n        xmlns:di="http://www.omg.org/spec/DD/20100524/DI" \n        id="sample-diagram" targetNamespace="http://bpmn.io/schema/bpmn">\n        <bpmn2:process id="'.concat(Me,'" isExecutable="true">\n          <bpmn2:startEvent id="StartEvent_1" />\n        </bpmn2:process>\n        <bpmndi:BPMNDiagram id="BPMNDiagram_1">\n          <bpmndi:BPMNPlane id="BPMNPlane_1" bpmnElement="').concat(Me,'">\n            <bpmndi:BPMNShape id="_BPMNShape_StartEvent_2" bpmnElement="StartEvent_1" bioc:stroke="#55c041" bioc:fill="#ccecc6">\n              <dc:Bounds height="36.0" width="36.0" x="412.0" y="240.0" />\n            </bpmndi:BPMNShape>\n          </bpmndi:BPMNPlane>\n        </bpmndi:BPMNDiagram>\n      </bpmn2:definitions>'),e.next=3,_e(Me);case 3:return a=e.sent,e.next=6,ve.add("com.axelor.apps.bpm.db.WkfModel",{name:a,code:a,diagramXml:n,generatedFromCallActivity:!0});case 6:r=e.sent,(i=r&&r.data&&r.data[0])?(t.businessObject.calledElement=a,S(i),Pe("success","New process added successfully"),i.id&&window.top.document.getElementsByTagName("iframe")&&window.top.document.getElementsByTagName("iframe")[0].contentWindow.parent.axelor.$openHtmlTab("wkf-editor/?id=".concat(i.id),J("BPM editor"))):Pe("error",r&&r.data&&(r.data.message||r.data.title)||"Error!");case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Le=r.a.useCallback(function(){var e=Object(p.a)(m.a.mark((function e(n){var a,r,i,o;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ut({data:{criteria:[{fieldName:"processId",operator:"=",value:n},{fieldName:"name",operator:"=",value:n}],operator:"or"}});case 2:if(a=e.sent,r=a&&a[0]){e.next=12;break}return e.next=7,ve.search("com.axelor.apps.bpm.db.WkfModel",{data:{_domain:"self.code = '".concat(n,"' AND self.generatedFromCallActivity is true")},limit:1});case 7:i=e.sent,(o=i&&i.data&&i.data[0])&&(S(o),t&&(t.businessObject.calledElement=o.code)),e.next=14;break;case 12:S({name:r.name,id:r.wkfModel&&r.wkfModel.id,processId:r.name}),t&&t.businessObject&&(t.businessObject.calledElement=r.name);case 14:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[t]),De=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"name";if(!t)return Ve(e,void 0),void Ve("".concat(e,"Name"),void 0);Ve(e,t[n]),Ve("".concat(e,"Name"),t.fullName||t.name)},Ie=function(e,t,n){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"name";De(e,t,a),t||Ve("".concat(e,"Label"),void 0),Ve("".concat(e,"Label"),n)},Ae=r.a.useCallback((function(e){var n="camunda:".concat(e),a=Object(P.getBusinessObject)(t);return Object(P.is)(t,"bpmn:Participant")&&(a=Object(P.getBusinessObject)(t).get("processRef")),a&&a.$attrs&&a.$attrs[n]||""}),[t]),Ve=r.a.useCallback((function(e,n){var a=Object(P.getBusinessObject)(t);"bpmn:Participant"===(t&&t.type)&&(a=Object(P.getBusinessObject)(a&&a.processRef));var r="camunda:".concat(e);a&&(a.$attrs?a.$attrs[r]=n:a.$attrs=Object(d.a)({},r,n),void 0===n&&delete a.$attrs[r])}),[t]),Be=r.a.useCallback((function(e){var t=Ae("".concat(e,"Label")),n=Ae(e),a=Ae("".concat(e,"Name"));if(n){var r={name:n,fullName:a};return t&&(r.title=t),r}return null}),[Ae]),$e=function(){xe(null),he(null),Ve("parentPath",void 0),Ve("condition",void 0),Ve("conditionValue",void 0),Ve("conditionCombinator",void 0),ue(!1)};return Object(a.useEffect)((function(){if(Object(P.is)(t,"camunda:CallActivity")){var e=function(e){var t=e.get("calledElement"),n=e.get("camunda:caseRef"),a="";return"undefined"!==typeof t?a="bpmn":"undefined"!==typeof n&&(a="cmmn"),a}(Object(P.getBusinessObject)(t))||"bpmn";f(!0),x(e)}else f(!1)}),[t]),Object(a.useEffect)((function(){var e=Object(P.getBusinessObject)(t);Le(e.calledElement)}),[t,Le]),Object(a.useEffect)((function(){var e=Ae("conditionValue"),t=z(Ae("custom")),n=Ae("parentPath"),a=Be("model");xe(n),he(n),h(t),U(t?Object(c.a)(Object(c.a)({},a||{}),{},{type:"metaJsonModel"}):Object(c.a)(Object(c.a)({},a||{}),{},{type:"metaModel"})),ue(!!e)}),[Ae,Be]),b&&r.a.createElement("div",null,r.a.createElement(r.a.Fragment,null,n>0&&r.a.createElement("div",{className:Se.divider})),r.a.createElement("div",{className:Se.groupLabel},i),r.a.createElement(on,{element:t,entry:{id:"callActivity",label:"CallActivity Type",modelProperty:"callActivityType",selectOptions:[{name:"BPMN",value:"bpmn"},{name:"CMMN",value:"cmmn"}],emptyParameter:!0,get:function(){return{callActivityType:j}},set:function(e,t){x(t.callActivityType)}}}),"bpmn"===j&&r.a.createElement("div",{className:Se.bpmn,style:{alignItems:t&&Object(P.getBusinessObject)(t)&&Object(P.getBusinessObject)(t).calledElement?"flex-end":"center"}},r.a.createElement(an,{element:t,entry:{id:"calledElement",label:J("Called Element"),modelProperty:"calledElement",get:function(){var e=Object(P.getBusinessObject)(t);return{calledElement:e&&e.calledElement}},set:function(e,n){n.calledElement&&""!==n.calledElement||S(void 0),t.businessObject.calledElement=n.calledElement,t.businessObject.calledElementBinding="latest",t.businessObject.caseRef=void 0,Le(n.calledElement)},validate:function(e,t){if(!t.calledElement&&"bpmn"===j)return{calledElement:"Must provide a value"}}},canRemove:!0}),r.a.createElement("div",{onClick:function(){_(!0)},className:Se.link},r.a.createElement(qa.a,{className:Se.linkIcon})),r.a.createElement("div",{onClick:Re,className:Se.link},r.a.createElement(vn.a,{className:Se.linkIcon})),C&&r.a.createElement("div",{onClick:function(){window.top.document.getElementsByTagName("iframe")[0].contentWindow.parent.axelor.$openHtmlTab("wkf-editor/?id=".concat(C&&C.id),J("BPM editor"))},className:Se.link},r.a.createElement(Ja.a,{className:Se.linkIcon}))),"cmmn"===j&&r.a.createElement(an,{element:t,entry:{id:"caseRef",label:J("Case Ref"),modelProperty:"caseRef",get:function(){var e=Object(P.getBusinessObject)(t);return{caseRef:e&&e.caseRef}},set:function(e,n){t.businessObject.caseRef=n.caseRef,t.businessObject.calledElement=void 0,t.businessObject.caseBinding="latest"},validate:function(e,t){if(!t.caseRef&&"cmmn"===j)return{caseRef:"Must provide a value"}}},canRemove:!0}),r.a.createElement("div",{className:Se.divider}),r.a.createElement(dn,{element:t,entry:{id:"custom",label:J("Custom"),modelProperty:"custom",get:function(){return{custom:y}},set:function(e,t){var n=!t.custom;h(n),Ve("custom",n)}}}),r.a.createElement("label",{className:Se.label},J("Call model")),y?r.a.createElement(ei,{className:ne()(Se.select,Se.metajsonModel),fetchMethod:function(){return jt()},update:function(e,t){U(e?Object(c.a)(Object(c.a)({},e||{}),{},{type:"metaJsonModel"}):void 0),$e(),Ie("model",e,t)},name:"model",value:G,placeholder:J("Call model"),isLabel:!1,optionLabel:"name",optionLabelSecondary:"title"}):r.a.createElement(ei,{className:Se.select,fetchMethod:function(){return Ot()},update:function(e,t){var n=e?Object(c.a)(Object(c.a)({},e||{}),{},{type:"metaModel"}):void 0;U(n),$e(),Ie("model",e,t)},name:"model",value:G,isLabel:!1,placeholder:J("Call model"),optionLabel:"name",optionLabelSecondary:"title"}),r.a.createElement(r.a.Fragment,null,r.a.createElement("label",{className:Se.label},J("Call link")),r.a.createElement("div",{style:{display:"flex",alignItems:"flex-end"}},r.a.createElement(an,{element:t,canRemove:!0,rootClass:Se.textFieldRoot,labelClass:Se.textFieldLabel,clearClassName:Se.clearClassName,readOnly:!G,entry:{id:"parentPath",name:"parentPath",modelProperty:"parentPath",get:function(){return{parentPath:je}},set:function(e,t){xe(t.parentPath),Ve("parentPath",t.parentPath)}}}),G&&r.a.createElement("div",{className:Se.new},r.a.createElement(qa.a,{className:Se.newIcon,onClick:function(){be(!0)}}))),pe&&r.a.createElement(I.a,{open:pe,onClose:function(e,t){"backdropClick"!==t&&be(!1)},"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",classes:{paper:Se.dialog}},r.a.createElement(za.a,{id:"alert-dialog-title"},"Parent Path"),r.a.createElement(Ga.a,{className:Se.dialogContent},r.a.createElement(wa,{getMetaFields:function(){return dt(G)},onChange:function(e,t){he(e)},value:{fieldName:ye},isParent:!0,allowAllFields:!0})),r.a.createElement(Ua.a,null,r.a.createElement(In.a,{onClick:function(){be(!1),xe(ye),Ve("parentPath",ye)},color:"primary",autoFocus:!0,className:Se.save},"OK"),r.a.createElement(In.a,{onClick:function(){be(!1)},color:"primary",className:Se.save},"Cancel"))),r.a.createElement("div",{className:Se.expressionBuilder},r.a.createElement(an,{element:t,readOnly:!(!se&&G),entry:{id:"condition",label:J("Call link condition"),modelProperty:"condition",get:function(){var e=Ae("condition");return{condition:e=(e||"").replace(/[\u200B-\u200D\uFEFF]/g,"")}},set:function(e,t){var n=Ae("condition"),a=t.condition;(a||"").replace(/[\u200B-\u200D\uFEFF]/g,""),Ve("condition",a),q(n)!==q(a)&&(Ve("conditionValue",void 0),Ve("conditionCombinator",void 0))}},canRemove:!0}),G&&r.a.createElement("div",{className:Se.new},r.a.createElement($,{title:"Enable","aria-label":"enable"},r.a.createElement(Ka.a,{className:Se.newIcon,onClick:function(){se&&(X("Completed If can't be managed using builder once changed manually."),oe("Warning"),te(!0))}})),r.a.createElement(qa.a,{className:Se.newIcon,onClick:function(){return V(!0)}}),A&&r.a.createElement(Zr,{bpmnModeler:o,open:A,handleClose:function(){V(!1)},defaultModel:G,getExpression:function(){var e,t=Ae("conditionValue"),n=Ae("conditionCombinator");if(void 0!==t)try{e=JSON.parse(t)}catch(a){}return{values:e,combinator:n}},setProperty:function(e){var t=e.expression,n=e.value,a=e.combinator;Ve("condition",t),n&&(Ve("conditionValue",n),ue(!0)),a&&Ve("conditionCombinator",a)},element:t,title:"Add Expression"}))," ",ee&&r.a.createElement(I.a,{open:ee,onClose:function(e,t){"backdropClick"!==t&&te(!1)},"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",classes:{paper:Se.dialog}},r.a.createElement(za.a,{id:"alert-dialog-title"},J(ie)),r.a.createElement(Ga.a,null,r.a.createElement(Ha.a,{id:"alert-dialog-description"},J(Y))),r.a.createElement(Ua.a,null,r.a.createElement(In.a,{onClick:function(){te(!1),X(null),oe(null),ue(!1),Ve("conditionValue",void 0),Ve("conditionCombinator",void 0)},color:"primary",autoFocus:!0,className:Se.save},"Ok"),r.a.createElement(In.a,{className:Se.save,onClick:function(){te(!1)},color:"primary"},"Cancel")))),r.a.createElement("div",{className:Se.divider})),F&&r.a.createElement(I.a,{open:F,onClose:function(e,t){"backdropClick"!==t&&Te()},"aria-labelledby":"form-dialog-title",maxWidth:"sm",classes:{paper:Se.dialogPaper}},r.a.createElement(za.a,{id:"form-dialog-title"},"Select BPMN"),r.a.createElement(Ga.a,null,r.a.createElement("label",{className:Se.label},J("BPMN")),r.a.createElement(ei,{className:Se.select,update:function(e){e&&S({id:e.wkfModel.id,name:"".concat(e.wkfModel.name," (").concat(e.name,")"),processId:e.name})},name:"wkfModel",isLabel:!0,fetchMethod:function(){return Ut()}})),r.a.createElement(Ua.a,null,r.a.createElement(In.a,{onClick:Te,className:Se.save,color:"primary",variant:"outlined"},"Cancel"),r.a.createElement(In.a,{onClick:function(){C&&t&&t.businessObject&&(t.businessObject.calledElement=C.processId),Te()},className:Se.save,color:"primary",variant:"outlined"},"Ok"))),Ce.open&&r.a.createElement(L.a,{open:Ce.open,autoHideDuration:2e3,onClose:Fe},r.a.createElement(N.a,{elevation:6,variant:"filled",onClose:Fe,className:"snackbarAlert",severity:Ce.messageType},Ce.message)))}var ii=Object(F.a)((function(e){return{groupLabel:{fontWeight:"bolder",display:"inline-block",verticalAlign:"middle",color:"#666",fontSize:"120%",margin:"10px 0px",transition:"margin 0.218s linear",fontStyle:"italic"},divider:{marginTop:15,borderTop:"1px dotted #ccc"},newIcon:{color:"#58B423",marginLeft:5},new:{cursor:"pointer",marginTop:18.6,display:"flex"},textbox:{width:"100%"},expressionBuilder:{display:"flex",alignItems:"center",justifyContent:"space-between"},save:{margin:e.spacing(1),backgroundColor:"#0275d8",borderColor:"#0267bf",color:"white",textTransform:"none","&:hover":{backgroundColor:"#025aa5",borderColor:"#014682",color:"white"}}}})),oi=["bpmn:Activity","bpmn:ExclusiveGateway","bpmn:InclusiveGateway","bpmn:ComplexGateway"];function li(e){var t=e.element,n=e.index,i=e.label,o=e.bpmnFactory,c=e.bpmnModeler,s=Object(a.useState)(!1),u=Object(l.a)(s,2),m=u[0],p=u[1],b=Object(a.useState)(!1),f=Object(l.a)(b,2),v=f[0],g=f[1],y=Object(a.useState)(!1),h=Object(l.a)(y,2),O=h[0],E=h[1],j=Object(a.useState)(null),x=Object(l.a)(j,2),k=x[0],C=x[1],N=Object(a.useState)(null),S=Object(l.a)(N,2),M=S[0],F=S[1],_=Object(a.useState)(!1),R=Object(l.a)(_,2),L=R[0],D=R[1],A=ii(),B=r.a.useCallback((function(e){var n=Object(P.getBusinessObject)(t);return n&&n.$attrs&&n.$attrs[e]||""}),[t]),$=function(e,n){var a=Object(P.getBusinessObject)(t);if(a)if(a.$attrs){if(!n)return void delete a.$attrs[e];a.$attrs[e]=n}else{if(!n)return;a.$attrs=Object(d.a)({},e,n)}},W=function(e){var n=e&&e.replace(/[\u200B-\u200D\uFEFF]/g,"");if(n=!n||/^\s*$/.test(n)?void 0:n,t.businessObject&&t.businessObject.conditionExpression){var a;t.businessObject.conditionExpression.body=n||void 0,t.businessObject.conditionExpression.resource=void 0,t.businessObject.conditionExpression.language="axelor";var r=Aa.a.getConditionalEventDefinition(t);if(r)t.businessObject.condition=a;else{var i=Object(P.getBusinessObject)(t),l={body:"",language:"","camunda:resource":void 0};a=w.a.createElement("bpmn:FormalExpression",l,r||i,o),t.businessObject.conditionExpression=a,a&&(t.businessObject.conditionExpression.body=n,t.businessObject.conditionExpression.resource=void 0,t.businessObject.conditionExpression.language="axelor")}var s=Object(P.getBusinessObject)(t);if(n||(a=void 0,$("camunda:conditionValue",void 0),$("camunda:conditionCombinator",void 0)),!c)return;var u=c.get("elementRegistry"),m=c.get("modeling"),p=u.get(t.id);if(!p)return;if(oi.includes(s.sourceRef.$type))return;m&&m.updateProperties(p,Object(d.a)({},r?"condition":"conditionExpression",a))}else{var b,f=Aa.a.getConditionalEventDefinition(t),v=Object(P.getBusinessObject)(t);if(n&&""!==n){var g={body:"",language:"","camunda:resource":void 0};b=w.a.createElement("bpmn:FormalExpression",g,f||v,o);var y=t.source;y&&y.businessObject.default===v&&(y.default=void 0)}if(f?t.businessObject.condition=b:(t.businessObject.conditionExpression=b,b&&(t.businessObject.conditionExpression.body=n,t.businessObject.conditionExpression.resource=void 0,t.businessObject.conditionExpression.language="axelor")),n||(b=void 0,$("camunda:conditionValue",void 0),$("camunda:conditionCombinator",void 0)),!c)return;var h=c.get("elementRegistry"),O=c.get("modeling"),E=h.get(t.id);if(!E)return;if(oi.includes(v.sourceRef.$type))return;O&&O.updateProperties(E,Object(d.a)({},f?"condition":"conditionExpression",b))}};return Object(a.useEffect)((function(){var e=B("camunda:conditionValue");D(!!e)}),[B]),Object(a.useEffect)((function(){Object(P.is)(t,"bpmn:SequenceFlow")&&function(e){return Object(T.isAny)(e,oi)}(t.source)?p(!0):p(!1)}),[t]),m&&r.a.createElement("div",null,r.a.createElement(r.a.Fragment,null,n>0&&r.a.createElement("div",{className:A.divider})),r.a.createElement("div",{className:A.groupLabel},i),r.a.createElement("div",{className:A.expressionBuilder},r.a.createElement(en,{element:t,rows:3,className:A.textbox,readOnly:L,entry:{id:"script",label:J("Script"),modelProperty:"script",get:function(){var e=Object(P.getBusinessObject)(t);if(e&&e.conditionExpression&&e.conditionExpression.body)return{script:e.conditionExpression.body.replace(/[\u200B-\u200D\uFEFF]/g,"")}},set:function(e,t){W(t&&t.script)}}}),r.a.createElement("div",{className:A.new},r.a.createElement(V.a,{title:"Enable","aria-label":"enable"},r.a.createElement(Ka.a,{className:A.newIcon,onClick:function(){L&&(F("Script can't be managed using builder once changed manually."),C("Warning"),E(!0))}})),r.a.createElement(qa.a,{className:A.newIcon,onClick:function(){F("Add all values"),g(!0)}}),v&&r.a.createElement(Zr,{open:v,bpmnModeler:c,handleClose:function(){g(!1)},getExpression:function(){var e,t=B("camunda:conditionValue"),n=B("camunda:conditionCombinator");if(void 0!==t)try{e=JSON.parse(t)}catch(a){}return{values:e,combinator:n}},setProperty:function(e){var t=e.expression,n=e.value,a=e.combinator;n&&$("camunda:conditionValue",n),a&&$("camunda:conditionCombinator",a),W(t)},element:t,title:"Add Expression",isAllowButtons:!0})),O&&r.a.createElement(I.a,{open:O,onClose:function(e,t){"backdropClick"!==t&&E(!1)},"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",classes:{paper:A.dialog}},r.a.createElement(za.a,{id:"alert-dialog-title"},J(k)),r.a.createElement(Ga.a,null,r.a.createElement(Ha.a,{id:"alert-dialog-description"},J(M))),r.a.createElement(Ua.a,null,r.a.createElement(In.a,{onClick:function(){E(!1),F(null),C(null),D(!1),$("camunda:conditionValue",void 0),$("camunda:conditionCombinator",void 0)},color:"primary",autoFocus:!0,className:A.save},"Ok"),r.a.createElement(In.a,{onClick:function(){E(!1)},color:"primary",className:A.save},"Cancel")))))}function ci(e){var t=e.element,n=e.bpmnFactory,i=e.messageEventDefinition,o=e.bpmnModdle,c=e.bpmnModeler,s=Object(a.useState)(null),u=Object(l.a)(s,2),m=u[0],p=u[1],b=Object(a.useState)([]),f=Object(l.a)(b,2),v=f[0],g=f[1],y=Object(a.useState)(null),h=Object(l.a)(y,2),O=h[0],E=h[1],j=r.a.useCallback((function(){var e=c&&c.get("canvas").getRootElement().businessObject.$parent.rootElements,t=e&&e.filter((function(e){return"bpmn:Message"===e.$type})),n=t&&t.map((function(e){return{value:e.name,name:"".concat(e.name," (id=").concat(e.id,")"),id:e.id}}));g(n||[])}),[c]);return Object(a.useEffect)((function(){var e=i.get("messageRef");p(e&&e.id),E(e)}),[i]),Object(a.useEffect)((function(){j()}),[j]),r.a.createElement("div",null,r.a.createElement(un,{element:t,definition:i,bpmnFactory:n,bpmnModdle:o,bpmnModeler:c,defaultOptions:v,entry:{label:J("Message"),elementName:"message",elementType:"bpmn:Message",referenceProperty:"messageRef",newElementIdPrefix:"Message_",set:function(e,t){E(t),p(e),i&&i.messageRef&&(i.messageRef.name=t.name)},get:function(){return{messageRef:m}}}}),(m||""===m)&&r.a.createElement(an,{element:t,entry:{id:"message-element-name",label:J("Message Name"),referenceProperty:"messageRef",modelProperty:"name",shouldValidate:!0,elementType:"bpmn:Message",set:function(e,a){var r=cn.a.getRoot(i);if(Object(P.is)(t,"bpmn:SendTask")&&function(e,t,n){var a=Object(P.getBusinessObject)(n);if(a)if(a.$attrs){if(!t)return void delete a.$attrs[e];a.$attrs[e]=t}else{if(!t)return;a.$attrs=Object(d.a)({},e,t)}}("camunda:messageName",a.name,t),i.messageRef)i.messageRef.name=a.name;else{var o=w.a.createElement("bpmn:Message",{name:a.name},r,n);i.messageRef=o,(o.$parent.rootElements&&o.$parent.rootElements.findIndex((function(e){return e.id===o.id})))<0&&o.$parent.rootElements.push(o)}j(),p(O&&O.id)},get:function(){var e=i&&i.get("messageRef"),t={};return t.name=e&&e.get("name"),t},validate:function(e,t){if(!t.name&&m)return{name:"Must provide a value"}}},canRemove:!0}))}function si(e){var t=e.element,n=e.bpmnFactory,i=e.signalEventDefinition,o=e.bpmnModdle,c=e.bpmnModeler,s=Object(a.useState)(null),u=Object(l.a)(s,2),m=u[0],d=u[1],p=Object(a.useState)([]),b=Object(l.a)(p,2),f=b[0],v=b[1],g=Object(a.useState)(null),y=Object(l.a)(g,2),h=y[0],O=y[1],E=r.a.useCallback((function(){var e=c&&c.get("canvas").getRootElement().businessObject.$parent.rootElements,t=e&&e.filter((function(e){return"bpmn:Signal"===e.$type})),n=t&&t.map((function(e){return{value:e.name,name:"".concat(e.name," (id=").concat(e.id,")"),id:e.id}}));v(n||[])}),[c]);return Object(a.useEffect)((function(){var e=i.get("signalRef");d(e&&e.id),O(e)}),[i]),Object(a.useEffect)((function(){E()}),[E]),r.a.createElement("div",null,r.a.createElement(un,{element:t,definition:i,bpmnFactory:n,bpmnModdle:o,bpmnModeler:c,defaultOptions:f,entry:{label:J("Signal"),elementName:"signal",elementType:"bpmn:Signal",referenceProperty:"signalRef",newElementIdPrefix:"Signal_",set:function(e,t){O(t),d(e),i&&i.signalRef&&(i.signalRef.name=t.name)},get:function(){return{signalRef:m}}}}),(m||""===m)&&r.a.createElement(an,{element:t,canRemove:!0,entry:{id:"signal-element-name",label:J("Signal Name"),referenceProperty:"signalRef",modelProperty:"name",shouldValidate:!0,get:function(){if(i){var e=i.get("signalRef");return{name:e&&e.name}}},set:function(e,t){i&&i.signalRef&&(i.signalRef.name=t.name,E(),d(h&&h.id))},validate:function(e,t){if(!t.name&&m)return{name:"Must provide a value"}}}}))}function ui(e){var t=e.element,n=e.bpmnFactory,i=e.escalationEventDefinition,o=e.bpmnModdle,c=e.showEscalationCodeVariable,s=e.bpmnModeler,u=Object(a.useState)(null),m=Object(l.a)(u,2),d=m[0],p=m[1],b=Object(a.useState)([]),f=Object(l.a)(b,2),v=f[0],g=f[1],y=Object(a.useState)(null),h=Object(l.a)(y,2),O=h[0],E=h[1],j=r.a.useCallback((function(){var e=s&&s.get("canvas").getRootElement().businessObject.$parent.rootElements,t=e&&e.filter((function(e){return"bpmn:Escalation"===e.$type})),n=t&&t.map((function(e){return{value:e.name,name:"".concat(e.name," (id=").concat(e.id,")"),id:e.id}}));g(n||[])}),[s]);return Object(a.useEffect)((function(){if(i){var e=i.get("escalationRef");p(e&&e.id)}}),[i]),Object(a.useEffect)((function(){j()}),[j]),r.a.createElement("div",null,r.a.createElement(un,{element:t,definition:i,bpmnFactory:n,bpmnModdle:o,bpmnModeler:s,defaultOptions:v,entry:{label:J("Escalation"),elementName:"escalation",elementType:"bpmn:Escalation",referenceProperty:"escalationRef",newElementIdPrefix:"Escalation_",set:function(e,t){p(e),E(t),i&&i.escalationRef&&(i.escalationRef.name=t.name)},get:function(){return{escalationRef:d}}}}),(d||""===d)&&r.a.createElement(r.a.Fragment,null,r.a.createElement(an,{element:t,canRemove:!0,entry:{id:"escalation-element-name",label:J("Escalation Name"),referenceProperty:"escalationRef",modelProperty:"name",shouldValidate:!0,get:function(){if(i){var e=i.get("escalationRef");return{name:e&&e.name}}},set:function(e,t){i&&i.escalationRef&&(i.escalationRef.name=t.name,j(),p(O&&O.id))},validate:function(e,t){if(!t.name&&d)return{name:"Must provide a value"}}}}),r.a.createElement(an,{element:t,canRemove:!0,entry:{id:"escalation-element-code",label:J("Escalation Code"),referenceProperty:"escalationRef",modelProperty:"escalationCode",get:function(){if(i){var e=i.get("escalationRef");return{escalationCode:e&&e.escalationCode}}},set:function(e,t){if(i){var n=i.get("escalationRef");n&&(n.escalationCode=t.escalationCode)}}}})),c&&r.a.createElement(an,{element:t,canRemove:!0,entry:{id:"escalationCodeVariable",label:J("Escalation Code Variable"),modelProperty:"escalationCodeVariable",get:function(){return{escalationCodeVariable:i.get("camunda:escalationCodeVariable")}},set:function(e,t){i&&(i["camunda:escalationCodeVariable"]=t.escalationCodeVariable||void 0)}}}))}var mi=[{value:"timeDate",name:J("Date")},{value:"timeDuration",name:J("Duration")},{value:"timeCycle",name:J("Cycle")}];function di(e){if(e)return"undefined"!==typeof e.get("timeDate")?"timeDate":"undefined"!==typeof e.get("timeCycle")?"timeCycle":"undefined"!==typeof e.get("timeDuration")?"timeDuration":void 0}function pi(e){var t=e.element,n=e.bpmnFactory,i=e.timerEventDefinition,o=Object(a.useState)(""),c=Object(l.a)(o,2),s=c[0],u=c[1];function m(e){var t=e.get("eventDefinitions")||[],a=n.create("bpmn:TimerEventDefinition");return t.push(a),e.eventDefinitions=t,a}return r.a.createElement("div",null,r.a.createElement(on,{element:t,entry:{id:"timer-event-definition-type",label:J("Timer Definition Type"),selectOptions:mi,emptyParameter:!0,modelProperty:"timerDefinitionType",get:function(){var e=di(i)||"";return u(e),{timerDefinitionType:e}},set:function(e,a){var r=Object(P.getBusinessObject)(t);u(a.timerDefinitionType);var o={timeDuration:void 0,timeDate:void 0,timeCycle:void 0},c=i,s=a.timerDefinitionType;if(c||(c=m(r)),a.timerDefinitionType){var d,p=di(c);if(p)d=c.get(p).get("body");o[s]=function(e,t,n){return t=t||void 0,w.a.createElement("bpmn:FormalExpression",{body:t},e,n)}(c,d,n)}Object.entries(o).forEach((function(e){var t=Object(l.a)(e,2),n=t[0],a=t[1];c[n]=a})),r.eventDefinitions=[c]}}}),(s||""!==s)&&r.a.createElement(an,{element:t,canRemove:!0,entry:{id:"timer-event-definition",label:J("Timer Definition"),modelProperty:"timerDefinition",get:function(e,t){var n=i,a=di(n),r=a&&n.get(a);return{timerDefinition:r&&r.get("body")}},set:function(e,t,n){var a=Object(P.getBusinessObject)(e),r=i,o=di(r),l=o&&r.get(o);l&&(l.body=t.timerDefinition||void 0),a.eventDefinitions=[r]},validate:function(e,t){if(!t.timerDefinition&&s)return{timerDefinition:"Must provide a value"}}}}))}var bi=n(27),fi=n.n(bi),vi=n(97),gi=n.n(vi);function yi(e,t){return cn.a.filterElementsByType(e.flowElements,t)}function hi(e,t){return Object(P.is)(e,"bpmn:SubProcess")&&!e.triggeredByEvent||Object(P.is)(e,"bpmn:CallActivity")||function(e,t){var n=e.id;return!!f()(t,(function(e){var t=Aa.a.getCompensateEventDefinition(e),a=e.attachedToRef;return t&&a&&a.id===n}))}(e,t)}function Oi(e){var t=function(e){return yi(e,"bpmn:BoundaryEvent")}(e);return gi()(function(e){return yi(e,"bpmn:Activity")}(e),(function(e){return hi(e,t)}))}function Ei(e){var t=[{value:""}],n=function(e){var t=Object(P.getBusinessObject)(e),n=t&&t.$parent,a=Oi(n);return Object(P.is)(n,"bpmn:SubProcess")&&n.triggeredByEvent&&(n=n.$parent)&&(a=a.concat(Oi(n))),a}(e);return fi()(n,(function(e){var n=e.id,a=(e.name?e.name+" ":"")+"(id="+n+")";t.push({value:n,name:a})})),t}function ji(e){var t=e.element,n=(e.bpmnFactory,e.bpmnModeler),a=e.compensateEventDefinition;return r.a.createElement("div",null,r.a.createElement(dn,{element:t,entry:{id:"wait-for-completion",label:J("Wait for Completion"),modelProperty:"waitForCompletion",widget:"checkbox",get:function(){if(a)return{waitForCompletion:a.waitForCompletion}},set:function(e,t){a&&(a.waitForCompletion=!t.waitForCompletion||!1)}}}),r.a.createElement(on,{element:t,entry:{id:"activity-ref",label:J("Activity Ref"),selectOptions:Ei(t),modelProperty:"activityRef",get:function(){var e=a.activityRef;return{activityRef:(e=e&&e.id)||""}},set:function(e,t){var r=t.activityRef||void 0,i=n.get("elementRegistry");r=r&&Object(P.getBusinessObject)(i&&i.get(r)),a&&(a.activityRef=r)}}}))}var xi=n(19),wi=Object(F.a)((function(e){return{newIcon:{color:"#58B423",marginLeft:5},new:{cursor:"pointer",marginTop:18.6,display:"flex"},textbox:{width:"100%"},expressionBuilder:{display:"flex",alignItems:"center",justifyContent:"space-between"},save:{margin:e.spacing(1),backgroundColor:"#0275d8",borderColor:"#0267bf",color:"white",textTransform:"none","&:hover":{backgroundColor:"#025aa5",borderColor:"#014682",color:"white"}}}}));function ki(e){var t=e.element,n=e.conditionalEventDefinition,i=e.bpmnFactory,o=e.bpmnModeler,c=Object(a.useState)(!1),s=Object(l.a)(c,2),u=s[0],m=s[1],d=Object(a.useState)(!1),p=Object(l.a)(d,2),b=p[0],f=p[1],v=Object(a.useState)(null),g=Object(l.a)(v,2),y=g[0],h=g[1],O=Object(a.useState)(null),E=Object(l.a)(O,2),j=E[0],x=E[1],k=Object(a.useState)(!1),C=Object(l.a)(k,2),N=C[0],S=C[1],M=wi(),T=r.a.useCallback((function(e){return function(t){var a=n.get("camunda:"+e),r={};return r[e]=a,r}}),[n]),F=function(e){return function(t,a){a[e],n[e]=a[e]}},_=function(e,a,r,o){var c=Object(P.getBusinessObject)(t);if(n)n.condition.body=a.script,n.condition.resource=void 0,n.condition.language="axelor",S(!!r),F("scriptValue")(t,{scriptValue:r}),F("combinator")(t,{combinator:o});else{var s,u={body:void 0,language:void 0};u={body:"",language:"","camunda:resource":void 0},s=w.a.createElement("bpmn:FormalExpression",u,n||c,i);var m=t.source;m&&m.businessObject.default===c&&(m.default=void 0),Object.entries(u).forEach((function(e){var t=Object(l.a)(e,2),n=t[0],a=t[1];s&&(s[n]=a)})),n?(n.condition=s,n.condition&&(n.condition.body=a.script,n.condition.resource=void 0,n.condition.language="axelor",S(!!r),F("scriptValue")(t,{scriptValue:r}),F("combinator")(t,{combinator:o}))):t.businessObject.conditionExpression=s}};return Object(a.useEffect)((function(){var e=T("scriptValue")(t).scriptValue;S(!!e)}),[T,t]),r.a.createElement("div",null,r.a.createElement(an,{element:t,entry:{id:"variableName",label:J("Variable Name"),modelProperty:"variableName",widget:"textField",get:T("variableName"),set:F("variableName")}}),!(Object(P.is)(t,"bpmn:StartEvent")&&!Object(xi.isEventSubProcess)(t.parent))&&r.a.createElement(an,{element:t,entry:{id:"variableEvent",label:J("Variable Event"),description:J("Specify more than one variable change event as a comma separated list."),modelProperty:"variableEvent",widget:"textField",get:T("variableEvent"),set:F("variableEvent")}}),r.a.createElement("div",{className:M.expressionBuilder},r.a.createElement(en,{element:t,rows:3,className:M.textbox,readOnly:N,entry:{id:"script",label:J("Script"),modelProperty:"script",get:function(){return function(){if(n&&n.condition)return{script:n.condition.body}}()},set:function(e,t){_(0,t)},validate:function(e,t){if(!t.script)return{script:"Must provide a value"}}}}),n&&r.a.createElement("div",{className:M.new},r.a.createElement(V.a,{title:"Enable","aria-label":"enable"},r.a.createElement(Ka.a,{className:M.newIcon,onClick:function(){N&&(x("Script can't be managed using builder once changed manually."),h("Warning"),f(!0))}})),r.a.createElement(qa.a,{className:M.newIcon,onClick:function(){x("Add all values"),m(!0)}}),u&&r.a.createElement(Zr,{open:u,isAllowButtons:!0,handleClose:function(){m(!1)},getExpression:function(){var e,n=T("scriptValue")(t).scriptValue,a=T("combinator")(t).combinator;if(void 0!==n)try{e=JSON.parse(n)}catch(r){}return{values:e,combinator:a}},setProperty:function(e){var t=e.expression,n=e.value,a=e.combinator;_(0,{script:t},n,a)},element:t,title:"Add Expression",bpmnModeler:o}))),b&&r.a.createElement(I.a,{open:b,onClose:function(e,t){"backdropClick"!==t&&f(!1)},"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",classes:{paper:M.dialog}},r.a.createElement(za.a,{id:"alert-dialog-title"},J(y)),r.a.createElement(Ga.a,null,r.a.createElement(Ha.a,{id:"alert-dialog-description"},J(j))),r.a.createElement(Ua.a,null,r.a.createElement(In.a,{onClick:function(){f(!1),x(null),h(null),S(!1),F("scriptValue")(t,{scriptValue:void 0}),F("combinator")(t,{combinator:void 0})},color:"primary",autoFocus:!0,className:M.save},"Ok"),r.a.createElement(In.a,{onClick:function(){f(!1)},color:"primary",className:M.save},"Cancel"))))}function Ci(e){var t=e.element,n=e.bpmnFactory,i=e.errorEventDefinition,o=e.bpmnModdle,c=e.bpmnModeler,s=Object(a.useState)(null),u=Object(l.a)(s,2),m=u[0],d=u[1],p=Object(a.useState)([]),b=Object(l.a)(p,2),f=b[0],v=b[1],g=Object(a.useState)(null),y=Object(l.a)(g,2),h=y[0],O=y[1],E=function(e){return function(t){var n=i.get("camunda:"+e),a={};return a[e]=n,a}},j=function(e){return function(t,n){i&&(i["camunda:"+e]=n[e]||void 0)}},x=r.a.useCallback((function(){var e=c&&c.get("canvas").getRootElement().businessObject.$parent.rootElements,t=e&&e.filter((function(e){return"bpmn:Error"===e.$type})),n=t&&t.map((function(e){return{value:e.name,name:"".concat(e.name," (id=").concat(e.id,")"),id:e.id}}));v(n||[])}),[c]);return Object(a.useEffect)((function(){if(i){var e=i.get("errorRef");d(e&&e.id)}}),[i]),Object(a.useEffect)((function(){x()}),[x]),r.a.createElement("div",null,r.a.createElement(un,{element:t,definition:i,bpmnFactory:n,bpmnModdle:o,bpmnModeler:c,defaultOptions:f,entry:{label:J("Error"),elementName:"error",elementType:"bpmn:Error",referenceProperty:"errorRef",newElementIdPrefix:"Error_",set:function(e,t){d(e),O(t),i&&i.errorRef&&(i.errorRef.name=t.name)},get:function(){return{errorRef:m}}}}),(m||""===m)&&r.a.createElement(r.a.Fragment,null,r.a.createElement(an,{element:t,canRemove:!0,entry:{id:"error-element-name",label:J("Error Name"),referenceProperty:"errorRef",modelProperty:"name",shouldValidate:!0,get:function(){if(i){var e=i.get("errorRef");return{name:e&&e.name}}},set:function(e,t){i&&i.errorRef&&(i.errorRef.name=t.name,x(),d(h&&h.id))},validate:function(e,t){if(!t.name&&m)return{name:"Must provide a value"}}}}),r.a.createElement(an,{element:t,canRemove:!0,entry:{id:"error-element-code",label:J("Error Code"),referenceProperty:"errorRef",modelProperty:"errorCode",get:function(){if(i){var e=i.get("errorRef");return{errorCode:e&&e.errorCode}}},set:function(e,t){if(i){var n=i.get("errorRef");n&&(n.errorCode=t.errorCode)}}}}),r.a.createElement(an,{element:t,canRemove:!0,entry:{id:"error-element-message",label:J("Error Message"),referenceProperty:"errorRef",modelProperty:"errorMessage",get:function(){if(i){var e=i.get("errorRef");return{errorMessage:e&&e.errorMessage}}},set:function(e,t){if(i){var n=i.get("errorRef");n&&(n.errorMessage=t.errorMessage)}}}})),Object(P.is)(t,"bpmn:StartEvent")||Object(P.is)(t,"bpmn:BoundaryEvent")&&r.a.createElement(r.a.Fragment,null,r.a.createElement(an,{element:t,entry:{id:"errorCodeVariable",label:J("Error Code Variable"),modelProperty:"errorCodeVariable",get:E("errorCodeVariable"),set:j("errorCodeVariable")}}),r.a.createElement(an,{element:t,entry:{id:"errorMessageVariable",label:J("Error Message Variable"),modelProperty:"errorMessageVariable",get:E("errorMessageVariable"),set:j("errorMessageVariable")}})))}var Ni=Object(F.a)({groupLabel:{fontWeight:"bolder",display:"inline-block",verticalAlign:"middle",color:"#666",fontSize:"120%",margin:"10px 0px",transition:"margin 0.218s linear",fontStyle:"italic"},divider:{marginTop:15,borderTop:"1px dotted #ccc"}}),Si=["bpmn:StartEvent","bpmn:EndEvent","bpmn:IntermediateThrowEvent","bpmn:BoundaryEvent","bpmn:IntermediateCatchEvent"],Mi=["bpmn:StartEvent","bpmn:BoundaryEvent","bpmn:IntermediateThrowEvent","bpmn:EndEvent"],Ti=["bpmn:StartEvent","bpmn:BoundaryEvent","bpmn:EndEvent"],Pi=["bpmn:StartEvent","bpmn:BoundaryEvent","bpmn:IntermediateCatchEvent"],Fi=["bpmn:StartEvent","bpmn:BoundaryEvent","bpmn:IntermediateThrowEvent","bpmn:IntermediateCatchEvent"],_i=["bpmn:EndEvent","bpmn:IntermediateThrowEvent"];function Ri(e){var t=e.element,n=e.index,i=e.label,o=e.bpmnFactory,c=e.bpmnModdle,s=e.bpmnModeler,u=Object(a.useState)(!1),m=Object(l.a)(u,2),d=m[0],p=m[1],b=Object(a.useState)(null),f=Object(l.a)(b,2),v=f[0],g=f[1],y=Ni();return Object(a.useEffect)((function(){var e=null;if(Si.forEach((function(n){if(Object(P.is)(t,n)){var a=Aa.a.getMessageEventDefinition(t),r=Aa.a.getSignalEventDefinition(t);a&&(e={eventDefinition:a,type:"message"}),r&&(e={eventDefinition:r,type:"signal"})}})),Object(P.is)(t,"bpmn:ReceiveTask")){var n=Object(P.getBusinessObject)(t);e={eventDefinition:n,type:"message"}}if(Object(P.is)(t,"bpmn:SendTask")){var a=Object(P.getBusinessObject)(t);e={eventDefinition:a,type:"message"}}if(Ti.forEach((function(n){if(Object(P.is)(t,n)){var a=Aa.a.getErrorEventDefinition(t);a&&(e={eventDefinition:a,type:"error"})}})),Mi.forEach((function(n){if(Object(P.is)(t,n)){var a=Object(P.is)(t,"bpmn:StartEvent")||Object(P.is)(t,"bpmn:BoundaryEvent"),r=Aa.a.getEscalationEventDefinition(t);r&&(e={eventDefinition:r,type:"escalation",showEscalationCodeVariable:a})}})),Pi.forEach((function(n){if(Object(P.is)(t,n)){var a=Aa.a.getTimerEventDefinition(t);a&&(e={eventDefinition:a,type:"timer"})}})),_i.forEach((function(n){if(Object(P.is)(t,n)){var a=Aa.a.getCompensateEventDefinition(t);a&&(e={eventDefinition:a,type:"compensation"})}})),Object(T.isAny)(t,Fi)){var r=Aa.a.getConditionalEventDefinition(t);r&&(e={eventDefinition:r,type:"condition"})}g(e),p(!!e)}),[t]),d&&r.a.createElement("div",null,r.a.createElement(r.a.Fragment,null,n>0&&r.a.createElement("div",{className:y.divider})),r.a.createElement("div",{className:y.groupLabel},i),r.a.createElement("div",null,function(){if(v||v.type)switch(v.type){case"message":return r.a.createElement(ci,{element:t,bpmnFactory:o,messageEventDefinition:v.eventDefinition,bpmnModdle:c,bpmnModeler:s});case"signal":return r.a.createElement(si,{element:t,bpmnFactory:o,bpmnModdle:c,bpmnModeler:s,signalEventDefinition:v.eventDefinition});case"escalation":return r.a.createElement(ui,{element:t,bpmnFactory:o,bpmnModdle:c,bpmnModeler:s,escalationEventDefinition:v.eventDefinition,showEscalationCodeVariable:v.showEscalationCodeVariable});case"timer":return r.a.createElement(pi,{element:t,bpmnFactory:o,timerEventDefinition:v.eventDefinition});case"compensation":return r.a.createElement(ji,{element:t,bpmnFactory:o,compensateEventDefinition:v.eventDefinition,bpmnModeler:s});case"condition":return r.a.createElement(ki,{element:t,bpmnFactory:o,conditionalEventDefinition:v.eventDefinition,bpmnModeler:s});case"error":return r.a.createElement(Ci,{element:t,bpmnFactory:o,errorEventDefinition:v.eventDefinition,bpmnModdle:c,bpmnModeler:s});default:return r.a.createElement(r.a.Fragment,null)}}()))}var Li=Object(F.a)({groupLabel:{fontWeight:"bolder",display:"inline-block",verticalAlign:"middle",color:"#666",fontSize:"120%",margin:"10px 0px",transition:"margin 0.218s linear",fontStyle:"italic"},divider:{marginTop:15,borderTop:"1px dotted #ccc"}}),Di=["bpmn:IntermediateThrowEvent","bpmn:IntermediateCatchEvent"];function Ii(e){var t=e.element,n=e.index,i=e.label,o=Object(a.useState)(!1),c=Object(l.a)(o,2),s=c[0],u=c[1],m=Object(a.useState)(null),d=Object(l.a)(m,2),p=d[0],b=d[1],f=Li();return Object(a.useEffect)((function(){var e=!1;Di.forEach((function(n){Object(P.is)(t,n)&&(e=!0)}));var n=function(e){var t=Object(P.getBusinessObject)(e),n=null;return t&&t.eventDefinitions&&t.eventDefinitions.forEach((function(e){Object(P.is)(e,"bpmn:LinkEventDefinition")&&(n=e)})),n}(t);e&&n?(u(!0),b(n)):u(!1)}),[t]),s&&r.a.createElement("div",null,r.a.createElement(r.a.Fragment,null,n>0&&r.a.createElement("div",{className:f.divider})),r.a.createElement("div",{className:f.groupLabel},i),r.a.createElement(an,{element:t,entry:{id:"link-event",label:J("Link Name"),modelProperty:"link-name",get:function(){return{"link-name":p.get("name")}},set:function(e,t){e.businessObject.eventDefinitions[0].name=t["link-name"]}},canRemove:!0}))}var Ai=n(837),Vi=n(423),Bi=(n(727),n(836)),$i=["createdBy","createdOn","updatedBy","updatedOn","version","id"],Wi={CONTEXT:"context",SELF:"self",NONE:"none",SOURCE:"source",PARENT:"parent",PROCESS:"process",DMN:"dmn"},Ji="CUSTOM",zi="META",Gi={date:"DD/MM/YYYY",time:"HH:mm:ss",datetime:"DD/MM/YYYY HH:mm"},Ui=["one_to_one","many_to_one","many_to_many","one_to_many","json_one_to_one","json_many_to_one","json_many_to_many","json_one_to_many"],Hi=["many_to_many","one_to_many","json_many_to_many","json_one_to_many"],qi=["panel","label","spacer","button"],Ki=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return e.map((function(e){return JSON.parse(JSON.stringify({name:e.name,version:e.version,type:e.type,fullName:e.fullName,modelType:e.modelType,title:e.title,targetJsonModel:e.targetJsonModel,jsonModel:e.jsonModel,targetModel:e.targetModel,id:e.id,target:e.target}))}))};function Yi(e,t,n,a){var r=[],i=function(e){var t,r,i,o=e.value,l=e.modelSubField,c=e.dmn,s=o&&o.from||n,u=null===o||void 0===o?void 0:o.selected,m=function(e){var t="";return e&&e.forEach((function(e){if(e.name){var n=xo(e.name);t=t?"".concat(t,"?.").concat(n):"".concat(n)}})),t}(l);if(s===Wi.PROCESS&&(u=m?{value:m}:null),s===Wi.CONTEXT&&(u=m?{value:m}:null),s===Wi.SOURCE)if(m){var d=l[0],p=null===a||void 0===a?void 0:a.fullName,b=null===d||void 0===d?void 0:d.fullName;(a&&a.modelType)===Ji&&(p=null===a||void 0===a?void 0:a.name),(d&&d.modelType)===Ji&&(b=null===d||void 0===d?void 0:d.name),u=b&&p&&b===p?{value:"SOURCE"}:{value:m}}else u=null;if(s===Wi.SELF&&(u=m?{value:m}:null),[Wi.PARENT].includes(s)&&(null===(t=u)||void 0===t?void 0:t.value)&&"object"===typeof(null===(r=u)||void 0===r?void 0:r.value)){var f=xo(u.value.name);u=m?{value:"".concat(f,"?.").concat(m)}:{value:f}}if([Wi.DMN].includes(s)&&(null===(i=u)||void 0===i?void 0:i.value)){var v=xo(u.value.name||u.value),g=v&&v.split("?.");return g&&g[0]===c.resultVariable?{value:"".concat(v)}:{value:"".concat(c.resultVariable,"?.").concat(v)}}return u||null};return e.forEach((function(e){var a,o=e.value,l=e.dataPath,s=e.type,u=Object(c.a)({},o),m=(u||{}).fields,d=function(e){return e.target?e.target.split(".").pop():e.targetModel?e.targetModel.split(".").pop():null}(e),p=e.jsonTarget,b=null===(a=e.jsonModel)||void 0===a?void 0:a.name;if("object"===typeof m&&m&&(u.fields=Yi(o.fields,t)),u.selected=i(e),u&&!u.from&&(u.from=n),!e.isRemoved&&u.selected&&![void 0,null].includes(u.selected.value)){var f={dataPath:l,type:s,target:d||void 0,value:u,name:e.name,modelSubField:Ki(e.modelSubField)||void 0,sourceField:e.sourceField||void 0,selfField:e.selfField||void 0};e.processId&&e.processId.name?f.processId=e.processId&&e.processId.name:delete f.processId,e.dmn?f.dmn={dmnNodeId:e.dmn.dmnNodeId,dmnNodeNameId:e.dmn.dmnNodeNameId,name:e.dmn.name,resultVariable:e.dmn.resultVariable,outputDmnFieldList:e.dmn.outputDmnFieldList&&e.dmn.outputDmnFieldList.map((function(e){return{name:e.name}}),[])}:delete f.dmn,e.searchField&&e.searchField.name?f.searchField={name:e.searchField&&e.searchField.name,title:e.searchField&&e.searchField.title}:delete f.searchField,"many-to-one"===s.toLowerCase()&&(f.jsonModel=b||void 0,!b&&p&&(f.jsonModel=p||void 0)),"json-many-to-one"===s.toLowerCase()&&(f.target=e["targetJsonModel.name"]),r.push(JSON.parse(JSON.stringify(f)))}})),r}function Xi(e){return Zi.apply(this,arguments)}function Zi(){return(Zi=Object(p.a)(m.a.mark((function e(t){var n,a,r,i,o,l,c;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ve.post("ws/rest/com.axelor.meta.db.MetaSelect/search",{data:{_domain:"self.name = :name",_domainContext:{name:t}},fields:["name","items"],offset:0,limit:1,sortBy:null});case 2:if(n=e.sent,a=n.data,!(r=a&&a[0])){e.next=13;break}return i=r.items,o=i.map((function(e){return e.id})),e.next=10,ve.post("ws/rest/com.axelor.meta.db.MetaSelectItem/search",{data:{_domain:"self.id in (:list)",_domainContext:{list:o&&o.length>0?o:[""]}},fields:["title","value","color","data","order"],offset:0,limit:-1,sortBy:["order"]});case 10:return l=e.sent,c=l.data,e.abrupt("return",c);case 13:return e.abrupt("return",[]);case 14:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Qi(){return eo.apply(this,arguments)}function eo(){return(eo=Object(p.a)(m.a.mark((function e(){var t,n,a,r,i,o,l,s,u=arguments;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=u.length>0&&void 0!==u[0]?u[0]:{},n=u.length>1?u[1]:void 0,a=u.length>2?u[2]:void 0,e.t1=!n||"metaModel"===n,!e.t1){e.next=8;break}return e.next=7,ao(t,a);case 7:e.t1=e.sent;case 8:if(e.t0=e.t1,e.t0){e.next=11;break}e.t0=[];case 11:if(r=e.t0,e.t3=!n||"metaJsonModel"===n,!e.t3){e.next=17;break}return e.next=16,io(t);case 16:e.t3=e.sent;case 17:if(e.t2=e.t3,e.t2){e.next=20;break}e.t2=[];case 20:for(i=e.t2,o=[],l=0;l<r.length;l++)o.push(Object(c.a)(Object(c.a)({},r[l]),{},{type:"metaModel"}));for(s=0;s<i.length;s++)o.push(Object(c.a)(Object(c.a)({},i[s]),{},{type:"metaJsonModel"}));return e.abrupt("return",o||[]);case 25:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function to(e){return no.apply(this,arguments)}function no(){return(no=Object(p.a)(m.a.mark((function e(t){var n,a,r,i,o;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=null,e.next=3,ve.search("com.axelor.meta.db.MetaModel",{data:{criteria:[{fieldName:"name",operator:"=",value:t}]},fields:["name","metaFields","id","fullName"]});case 3:if((a=e.sent)&&-1!==a.status&&(r=(a||{}).data,n=(void 0===r?[]:r)[0]||null),n){e.next=11;break}return i=[{fieldName:"name",operator:"=",value:t}],e.next=9,io(i);case 9:o=e.sent,n=o[0];case 11:return e.abrupt("return",n||null);case 12:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ao(e){return ro.apply(this,arguments)}function ro(){return(ro=Object(p.a)(m.a.mark((function e(t){var n,a,r,i,o,l,c,u=arguments;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=u.length>1&&void 0!==u[1]?u[1]:[],a=[],t&&t.search&&a.push({fieldName:"fullName",operator:"like",value:t.search}),e.next=5,ve.search("com.axelor.meta.db.MetaModel",{data:{criteria:[].concat(a,Object(s.a)(n||[]))},fields:["name","metaFields","id","fullName"]});case 5:return r=e.sent,i=[],t&&t.search&&i.push({fieldName:"name",operator:"like",value:t.search}),e.next=10,io([].concat(i,Object(s.a)(n)));case 10:if(o=e.sent,!r||-1!==r.status){e.next=13;break}return e.abrupt("return",[]);case 13:return l=(r||{}).data,c=void 0===l?[]:l,e.abrupt("return",[].concat(Object(s.a)(c),Object(s.a)(o)));case 15:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function io(){return oo.apply(this,arguments)}function oo(){return(oo=Object(p.a)(m.a.mark((function e(){var t,n,a,r,i=arguments;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=i.length>0&&void 0!==i[0]?i[0]:{},e.next=3,ve.search("com.axelor.meta.db.MetaJsonModel",{data:{criteria:t}});case 3:if(!(n=e.sent)||-1!==n.status){e.next=6;break}return e.abrupt("return",[]);case 6:return a=(n||{}).data,r=void 0===a?[]:a,e.abrupt("return",r.map((function(e){return Object(c.a)(Object(c.a)({},e),{},{modelType:Ji})})));case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function lo(e){return co.apply(this,arguments)}function co(){return(co=Object(p.a)(m.a.mark((function e(t){var n,a,r,i,o,l,c,u,d,p,b,f,v,g,y=arguments;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(y.length>1&&void 0!==y[1]&&y[1],n=[],a="".concat(t.fullName||t.target),t.modelType!==Ji&&a){e.next=25;break}return r=[{fieldName:"jsonModel.name",operator:"=",value:t.name}],i={criteria:r},e.next=8,ve.search("com.axelor.meta.db.MetaJsonField",{data:i,fields:["type","nameField","required","model","targetModel","targetJsonModel","targetJsonModel.name","modelField","jsonModel","jsonModel.name","title","name","selection"],sortBy:["title"]});case 8:o=e.sent,l=(o||{}).data,c=void 0===l?[]:l,u=0;case 11:if(!(u<c.length)){e.next=23;break}if(!(d=c[u]).selection){e.next=18;break}return e.next=16,Xi(d.selection);case 16:p=e.sent,d.selectionList=p;case 18:d.jsonModel&&(d.jsonModel.name=d["jsonModel.name"]),n.push(d);case 20:u++,e.next=11;break;case 23:e.next=33;break;case 25:return e.next=27,ve.fetchFields(a);case 27:if(!(b=e.sent)||-1!==b.status){e.next=30;break}return e.abrupt("return",[]);case 30:f=(b||{}).data,v=void 0===f?[]:f,n=Object(s.a)(v.fields),Object.keys(v.jsonFields).forEach((function(e){var t,a=v.jsonFields[e];(t=n).push.apply(t,Object(s.a)(Object.values(a)))}));case 33:return g=Co(n,"title"),e.abrupt("return",g.filter((function(e){return!qi.includes(e.type)})));case 35:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function so(e){return uo.apply(this,arguments)}function uo(){return(uo=Object(p.a)(m.a.mark((function e(t){var n,a,r,i,o,l;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.targetModel){e.next=7;break}return e.next=3,lo({fullName:t.targetModel});case 3:return n=e.sent,e.abrupt("return",n);case 7:if(!t.targetJsonModel){e.next=16;break}return a=[{fieldName:"jsonModel.id",operator:"=",value:t.targetJsonModel.id}],r={criteria:a},e.next=12,ve.search("com.axelor.meta.db.MetaJsonField",{data:r,fields:["type","nameField","required","model","targetModel","targetJsonModel","targetJsonModel.name","modelField","jsonModel","jsonModel.name","title","name"],sortBy:["title"]});case 12:return i=e.sent,o=(i||{}).data,l=(void 0===o?[]:o).map((function(e){return e.jsonModel&&(e.jsonModel.name=e["jsonModel.name"]),e})),e.abrupt("return",Object(s.a)(l));case 16:return e.abrupt("return",[]);case 17:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function mo(e){return po.apply(this,arguments)}function po(){return(po=Object(p.a)(m.a.mark((function e(t){var n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ve.search("com.axelor.meta.db.MetaJsonRecord",{data:{criteria:[{fieldName:"jsonModel",operator:"=",value:t}],operator:"and"}});case 2:if(!(n=e.sent)||-1!==n.status){e.next=5;break}return e.abrupt("return",[]);case 5:return e.abrupt("return",n&&n.data);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function bo(e){return fo.apply(this,arguments)}function fo(){return(fo=Object(p.a)(m.a.mark((function e(t){var n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ve.search("com.axelor.meta.db.MetaJsonRecord",{data:{_domain:t}});case 2:if(!(n=e.sent)||-1!==n.status){e.next=5;break}return e.abrupt("return",[]);case 5:return e.abrupt("return",n&&n.data);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function vo(e){return go.apply(this,arguments)}function go(){return(go=Object(p.a)(m.a.mark((function e(t){var n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ve.search("com.axelor.meta.db.MetaJsonField",{data:{_domain:"self.jsonModel.name = '".concat(t,"' and self.nameField = true")},fields:["name"]});case 2:if(!((n=e.sent)&&n.status>-1)){e.next=5;break}return e.abrupt("return",n.data&&n.data[0]);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function yo(e){return ho.apply(this,arguments)}function ho(){return(ho=Object(p.a)(m.a.mark((function e(t){var n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ve.search(t);case 2:if(!(n=e.sent)||-1!==n.status){e.next=5;break}return e.abrupt("return",[]);case 5:return e.abrupt("return",n&&n.data);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Oo(e,t){return Eo.apply(this,arguments)}function Eo(){return(Eo=Object(p.a)(m.a.mark((function e(t,n){var a,r,i,o;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"action-mapper-method-create-script-from-json",a={action:"action-mapper-method-create-script-from-json",data:{context:{_model:n,_jsonString:t}}},e.next=4,ve.action(a);case 4:if(r=e.sent,i=r.data,o=void 0===i?[]:i,!(Array.isArray(o)&&o[0]&&o[0].values&&o[0].values._scriptString)){e.next=9;break}return e.abrupt("return",o[0].values._scriptString);case 9:return e.abrupt("return",void 0);case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function jo(e,t){var n=r.a.useRef(null),a=function(){return n.current&&clearTimeout(n.current)},i=function(e){return n.current=setTimeout(e,t)};return r.a.useEffect((function(){return function(){return a()}}),[]),function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];a(),i((function(){return e.apply(void 0,n)}))}}function xo(e){if(e)return e.charAt(0).toLowerCase()+e.slice(1)}function wo(e){if(e)return e.charAt(0).toUpperCase()+e.slice(1)}function ko(e){return window._t&&"string"===typeof e?window._t(e):e}function Co(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;return e.sort((function(e,n){var a=e[t],r=n[t];return a<r?-1:a>r?1:0}))}function No(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return e.replace(/-/g,"_").toLowerCase()},a=[].concat(Object(s.a)($i),Object(s.a)(t)),r=e.filter((function(e){return-1===a.indexOf(e.name)}));return r.filter((function(e){return!Hi.includes(n(e.type))}))}function So(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=e.replace(/-/g,"_").toLowerCase();return-1!==Ui.indexOf(t)}function Mo(e){var t=e.targetName,n=e.name;return t&&(n="".concat(n,".").concat(t)),n}var To="row",Po=["name","value","onChange","options","optionLabelKey","optionValueKey","isMulti","title","fetchAPI","inline","InputProps","error","filterSelectedOptions","disableCloseOnSelect","readOnly","concatValue","isProcessContext"],Fo=function(e){return"_selectId"===e?"id":e},_o=Object(re.a)((function(e){return{listbox:{maxHeight:"300px !important"},input:{width:"100% !important"},inputSelected:{width:"100% !important",color:"rgba(0, 0, 0, 0.87)",border:"1px solid #e0e0e0",padding:"6px 24px !important",borderRadius:25,background:"#e0e0e0",overflow:"hidden",whiteSpace:"nowrap",textOverflow:"ellipsis",textAlign:"center",fontSize:"0.8125rem",height:18}}}));function Ro(e){var t=Object(a.useState)(!1),n=Object(l.a)(t,2),i=n[0],o=n[1],s=Object(a.useState)([]),u=Object(l.a)(s,2),d=u[0],b=u[1],f=Object(a.useState)(e.isMulti?[]:null),v=Object(l.a)(f,2),g=v[0],y=v[1],h=Object(a.useState)(""),O=Object(l.a)(h,2),E=O[0],j=O[1],x=e.name,w=e.value,k=e.onChange,C=e.options,N=e.optionLabelKey,S=void 0===N?"title":N,M=e.optionValueKey,T=void 0===M?"id":M,P=e.isMulti,F=void 0!==P&&P,_=e.title,R=e.fetchAPI,L=e.inline,D=e.InputProps,I=e.error,A=e.filterSelectedOptions,V=void 0!==A&&A,B=e.disableCloseOnSelect,$=void 0===B||B,W=e.readOnly,J=void 0!==W&&W,z=e.concatValue,G=e.isProcessContext,U=void 0!==G&&G,H=Object(wn.a)(e,Po),q=_o(),K=Object(a.useState)(!1),Y=Object(l.a)(K,2),X=Y[0],Z=Y[1],Q=r.a.useCallback((function(e){return C&&C.find((function(t){return t&&t[Fo(T)]===e.trim()}))}),[C,T]);function ee(){return(ee=Object(p.a)(m.a.mark((function e(){var t,n=arguments;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=n.length>0&&void 0!==n[0]?n[0]:"",j(t);case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var te=jo((function(){return ee.apply(this,arguments)}),400);function ne(e){"Backspace"===e.key&&g&&g[Fo(S)]===E&&k(null,"backspace")}function ae(e,t){k("string"===typeof w?F?e.map((function(e){return e&&e[Fo(T)]})).join(",")||[]:e&&e[Fo(T)]:e,t)}Object(a.useEffect)((function(){var e=!0;return i&&(b([]),Z(!0),R?Object(p.a)(m.a.mark((function t(){var n;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,R({search:E});case 2:n=t.sent,e&&(b(n),Z(!1));case 4:case"end":return t.stop()}}),t)})))():(b(C),Z(!1))),function(){e=!1,Z(!1)}}),[R,C,E,i]),Object(a.useEffect)((function(){if("string"===typeof w){var e=w.split(",");y(F?e.map((function(e){return Q(e)})):Q(e[0]))}else y(w||(F?[]:null))}),[w,F,Q]);var re=function(e){return"metaJsonModel"===(e&&e.type)?"".concat(e&&e[Fo(S)]?e[Fo(S)]:""," (Custom model)")||!1:"fieldName"===x?"".concat(ko(e&&e.title?e.title:"")," (").concat(e&&e[Fo(S)],")"):e?e[Fo(S)]&&z&&e[Fo(T)]?"".concat(e[Fo(S)]," (").concat(e[Fo(T)],")"):e[Fo(S)]?e[Fo(S)]:e.name?e.name:e.id?e.id.toString():"":""};return r.a.createElement(ma.a,Object.assign({getOptionSelected:function(e,t){return F?e[Fo(T)]===t[Fo(T)]:re(e)===re(t)},getOptionLabel:function(e){return re(e)},loading:X,id:pa()("select-widget"),open:i,onOpen:function(){return o(!0)},onClose:function(){return o(!1)},disabled:J,value:g?F?Array.isArray(g)?g:[]:g:F?[]:null,onChange:function(e,t,n){return ae(t,n)},options:d||[],multiple:F,filterSelectedOptions:V,onInputChange:function(e,t){return te(t)},classes:{option:"menu-item",input:U?g?q.inputSelected:q.input:""},renderInput:function(e){return r.a.createElement(_n.a,Object.assign({},e,{error:I,label:L?"":_,fullWidth:!0,onClick:function(){J||o(!0)},InputProps:Object(c.a)(Object(c.a)(Object(c.a)({},D),e.InputProps),{},{endAdornment:r.a.createElement(r.a.Fragment,null,X?r.a.createElement(ua.a,{className:q.circularProgress,size:15}):null,e.InputProps.endAdornment)})},F?{}:{onKeyDown:ne}))}},F?{disableCloseOnSelect:$}:{},H))}var Lo=n(833),Do=n(835),Io=n(831),Ao=n(834),Vo=n(830),Bo=n(412),$o=n.n(Bo),Wo=n(832),Jo=n(828),zo=Object(F.a)((function(e){return{dialogPaper:{minHeight:"75vh",maxHeight:"75vh"},cardContent:{height:"100%",minWidth:250,paddingLeft:0,paddingRight:0},cardContentItemText:{fontSize:12,lineHeight:.5,paddingBottom:8},cardContentItemContainer:{marginLeft:10},cardContentItemTitle:{fontSize:16},cardActionView:{justifyContent:"flex-end"},noFields:{textAlign:"center",color:"gray"},save:{margin:e.spacing(1),backgroundColor:"#0275d8",borderColor:"#0267bf",color:"white",textTransform:"none","&:hover":{backgroundColor:"#025aa5",borderColor:"#014682",color:"white"}},dialogTitle:{"& > h2":{display:"flex",justifyContent:"space-between"}},subHeaderRow:{borderBottom:"1px solid #eee",paddingLeft:16,paddingRight:16,paddingBottom:8,display:"flex"},fieldListViewContainer:{marginLeft:16,marginRight:2,marginTop:8,overflowY:"auto",height:"53.8vh"},searchField:{width:"75%","& input":{padding:"8px 0 7px !important"}},checkbox:{color:"#2185D0 !important","&$checked":{color:"#2185D0 !important",backgrounColor:"#2185D0 !important"}}}}));var Go=r.a.memo((function(e){var t,n,i=e.data,o=e.onSubmit,c=e.open,u=e.onClose,m=zo(),d=r.a.useState([]),p=Object(l.a)(d,2),b=p[0],f=p[1],v=r.a.useState(!1),g=Object(l.a)(v,2),y=g[0],h=g[1],O=r.a.useState(""),E=Object(l.a)(O,2),j=E[0],x=E[1],w=Object.values(i).filter((function(e){return!1!==e.isRemoved})),k=r.a.useCallback((function(e){e&&e.stopPropagation(),u(),f([])}),[u]),C=r.a.useCallback((function(e){e.stopPropagation();var t=w.filter((function(e,t){return-1!==b.indexOf("".concat(e.name))}));o&&o(t),k(e),h(!1)}),[o,b,k,w]),N=r.a.useCallback((function(e){e.stopPropagation();var t=e.target.value;f((function(e){return-1!==e.indexOf(t)?(h(!1),Object(s.a)(e.filter((function(e){return e!==t})))):[].concat(Object(s.a)(e),[t])}))}),[]),S=r.a.useCallback((function(e){f(e?w.map((function(e){return e.name})):[]),h(e)}),[w]),M=r.a.useCallback((function(e){x(e.target.value)}),[]);return Object(a.useEffect)((function(){x("")}),[c]),r.a.createElement(r.a.Fragment,null,r.a.createElement(I.a,{fullWidth:!0,open:c,classes:{paper:m.dialogPaper},onClose:function(e,t){"backdropClick"!==t&&k()},"aria-labelledby":"scroll-dialog-title"},r.a.createElement(za.a,{id:"scroll-dialog-title",className:m.dialogTitle},r.a.createElement("span",null,"Select Fields")),r.a.createElement(Ga.a,{dividers:!0,classes:{root:m.cardContent}},r.a.createElement("div",{className:m.subHeaderRow},r.a.createElement(Qa.a,{control:r.a.createElement(er.a,{classes:{root:m.checkbox},onChange:function(){return S(!y)},value:y,checked:y})}),r.a.createElement(_n.a,{classes:{root:m.searchField},placeholder:"Search fields",onChange:function(e){return M(e)}})),r.a.createElement("div",{className:m.fieldListViewContainer},(t=w,n=j,n?t.filter((function(e){return(e.title||"").toLowerCase().includes(n.toLowerCase())||(e.name||"").toLowerCase().includes(n.toLowerCase())})):t).map((function(e,t){return r.a.createElement(A.a,{container:!0,key:t},r.a.createElement(Qa.a,{control:r.a.createElement(er.a,{classes:{root:m.checkbox},onChange:N,value:e.name,checked:-1!==b.indexOf(e.name)}),label:r.a.createElement("div",{className:m.cardContentItemContainer},r.a.createElement(ee.a,{className:m.cardContentItemTitle},e.title),r.a.createElement(ee.a,{className:m.cardContentItemText},e.name))}))})),0===w.length&&r.a.createElement(ee.a,{className:m.noFields},"No fields available"))),r.a.createElement(Jo.a,{className:m.cardActionView},r.a.createElement(In.a,{variant:"contained",className:m.save,color:"primary",onClick:k},"Close"),r.a.createElement(In.a,{variant:"contained",className:m.save,color:"primary",onClick:C},"OK"))))})),Uo=n(409),Ho=n.n(Uo),qo=Object(F.a)({container:{display:"flex"},input:{width:"100%",display:"flex",position:"relative","& > div:before":{border:0}},parentField:{marginRight:5,color:"#3f51b5"},clickableView:{cursor:"pointer","& input":{cursor:"pointer"}},fieldName:{fontSize:12},fieldNameColumn:{width:"unset"},addFieldButton:{padding:0,marginLeft:5}}),Ko=function(e){var t=e.type.replace(/-/g,"_").toLowerCase();return-1!==Ui.indexOf(t)};var Yo=r.a.memo((function(e){var t=qo(),n=e.item,a=e.handleAdd,i=r.a.useState(!1),o=Object(l.a)(i,2),c=o[0],s=o[1],u=function(e){if(Ko(e)){var t=e.value;return(null===t||void 0===t?void 0:t.fields)||null}return null}(n);return r.a.useEffect((function(){n&&Ko(n)&&n.subFieldName?s(!0):s(!1)}),[n]),n?r.a.createElement("div",{className:ne()(t.input)},r.a.createElement(A.a,{container:!0,direction:"column",className:t.fieldNameColumn},r.a.createElement(ee.a,{title:n.name},n.title||n.autoTitle||n.name)),r.a.createElement("div",null,u&&c&&r.a.createElement(Go,{data:u,iconButton:!0,onSubmit:function(e){return a(e)},icon:r.a.createElement(Ho.a,null),buttonTitle:"Add Fields",iconButtonClassName:t.addFieldButton}))):null})),Xo=["name","title","autoTitle","value","onChange","onBlur","readOnly","inline","InputProps","style"];function Zo(e){var t=e.name,n=e.title,a=e.autoTitle,i=e.value,o=void 0===i?"":i,s=(e.onChange,e.onBlur),u=e.readOnly,m=e.inline,d=e.InputProps,p=e.style,b=Object(wn.a)(e,Xo),f=r.a.useState(),v=Object(l.a)(f,2),g=v[0],y=v[1];return r.a.useEffect((function(){y(o)}),[o]),m?r.a.createElement(Fn.a,Object.assign({style:Object(c.a)({width:"100%"},p),placeholder:n,inputProps:{"aria-label":n},name:t,onChange:function(e){return y(e.target.value)},onBlur:function(e){return s(e.target.value)},autoComplete:"off",readOnly:u,disabled:u,value:g||""},b)):r.a.createElement(_n.a,Object.assign({label:n||a,name:t,style:Object(c.a)({width:"100%"},p),onChange:function(e){return y(e.target.value)},onBlur:s,autoComplete:"off",InputProps:Object(c.a)({readOnly:u},d),value:g||"",className:b.className},b))}Zo.defaultProps={rows:3,readOnly:!1};var Qo=Zo,el=["type","title","onChange","value","readOnly","scale","customeFormat","onBlur"];function tl(e){var t=e.type,n=void 0===t?"integer":t,i=e.title,o=e.onChange,c=e.value,s=void 0===c?0:c,u=(e.readOnly,e.scale),m=void 0===u?2:u,d=(e.customeFormat,e.onBlur),p=Object(wn.a)(e,el),b=Object(a.useState)(s),f=Object(l.a)(b,2),v=f[0],g=f[1],y=Object(a.useCallback)((function(e){return Number(Number(e).toFixed("integer"===n?0:m))}),[n,m]);return r.a.useEffect((function(){g(y(s))}),[s,g,y]),r.a.createElement(Qo,Object.assign({onChange:g,title:i,type:"number",value:"".concat(v),onBlur:function(e){o(y(e.target.value)),g(y(e.target.value)),d&&d(e)}},p))}tl.defaultProps={readOnly:!1};var nl=tl,al=["inline","type"],rl=["name","title","format","error","onChange"],il={date:zn.a,time:Gn.a,datetime:Un.a};var ol=function(e){var t=e.inline,n=e.type,i=void 0===n?"date":n,o=Object(wn.a)(e,al),s=Object(a.useState)(!1),u=Object(l.a)(s,2),m=u[0],d=u[1],p=r.a.useRef(),b=(o.name,o.title),f=o.format,v=(o.error,o.onChange),g=Object(wn.a)(o,rl),y=il[i];return r.a.useEffect((function(){m&&(p.current=g.value)}),[m,g.value]),r.a.createElement(Hn.a,{utils:Jn.a},r.a.createElement(y,Object.assign({autoOk:!0,open:m,ampm:!1,views:"date"===i?["date"]:"datetime"===i?["date","hours","minutes"]:"time"===i?["hours","minutes","seconds"]:["date"],onChange:function(e){p.current=e,v(e)},PopoverProps:{anchorOrigin:{vertical:"bottom",horizontal:"left"},transformOrigin:{vertical:"top",horizontal:"left"}},disableToolbar:!0,variant:"inline"},t?{invalidDateMessage:""}:{},{style:Object(c.a)({width:"100%"},t?{margin:0}:{}),label:t?"":b,format:f||Gi[i]},"time"!==i?{animateYearScrolling:!1}:{},g,{onKeyDown:function(e){40===e.keyCode&&d(!0)},onClose:function(){v(p.current),d(!1)},onOpen:function(){return d(!0)}})))},ll=["name","value","onChange","options","title","className"],cl=Object(F.a)((function(e){return{root:{display:"flex",flexWrap:"wrap"},select:{width:"100%"}}}));function sl(e){var t=e.name,n=e.value,a=void 0===n?"":n,i=e.onChange,o=e.options,l=e.title,c=e.className,s=Object(wn.a)(e,ll),u=cl();return r.a.createElement(Cn.a,{className:ne()(u.formControl,c)},r.a.createElement(Nn.a,null,l),r.a.createElement(Sn.a,Object.assign({value:a,onChange:function(e){return i(e.target.value)},name:t,style:{marginRight:8},classes:{select:u.select}},s),o&&Array.isArray(o)&&o.map((function(e,t){var n=e.name,a=e.title;return r.a.createElement(kn.a,{value:n,key:t},a)}))))}var ul=n(846),ml=n(847),dl=["id","text","index","moveCard"],pl={border:"1px dashed gray",padding:"0.5rem 1rem",marginBottom:".5rem",backgroundColor:"white"},bl=function(e){var t=e.id,n=(e.text,e.index),r=e.moveCard,i=Object(wn.a)(e,dl),o=Object(a.useRef)(null),s=Object(ul.a)({accept:To,collect:function(e){return{handlerId:e.getHandlerId()}},hover:function(e,t){var a;if(o.current){var i=e.index,l=n;if(i!==l){var c=null===(a=o.current)||void 0===a?void 0:a.getBoundingClientRect(),s=(c.bottom-c.top)/2,u=t.getClientOffset().y-c.top;i<l&&u<s||i>l&&u>s||(r(i,l),e.index=l)}}}}),u=Object(l.a)(s,2),m=u[0].handlerId,d=u[1],p=Object(ml.a)({type:To,item:function(){return{id:t,index:n}},collect:function(e){return{isDragging:e.isDragging()}}}),b=Object(l.a)(p,3),f=b[0].isDragging,v=b[1],g=b[2],y=f?0:1;return v(d(o)),i.children({preview:g,ref:o,style:Object(c.a)(Object(c.a)({},pl),{},{opacity:y}),handlerId:m})},fl=n(411),vl=n.n(fl),gl=["sourceModel","value","onChange","parentRow","targetModel","isContext","isM2o","isProcessContext","element","containerClassName"],yl=Object(F.a)((function(e){return{root:{display:"flex",justifyContent:"center",flexWrap:"wrap",listStyle:"none",padding:e.spacing(.5),margin:0},chip:{margin:e.spacing(.5)},rightIcon:{width:"0.8em",height:"0.8em"}}}));function hl(e){var t=e&&e.extensionElements,n=[{fieldName:"name",operator:"IN",value:[""]}];if(!t||!t.values)return{metaModels:n,metaJsonModels:n};var a=t.values.find((function(e){return"camunda:ProcessConfiguration"===e.$type})),r=[],i=[];return a||a.processConfigurationParameters?(a.processConfigurationParameters.forEach((function(e){e.metaModel?r.push(e.metaModel):e.metaJsonModel&&i.push(e.metaJsonModel)})),{metaModels:[{fieldName:"name",operator:"IN",value:r&&r.length>0?r:[""]}],metaJsonModels:[{fieldName:"name",operator:"IN",value:i&&i.length>0?i:[""]}]}):{metaModels:n,metaJsonModels:n}}var Ol=function(e){return"_selectId"===e?"id":e};var El=function(e){var t=e.sourceModel,n=e.value,a=e.onChange,i=e.parentRow,o=e.targetModel,l=e.isContext,u=void 0!==l&&l,d=e.isM2o,b=void 0!==d&&d,f=e.isProcessContext,v=void 0!==f&&f,g=e.element,y=e.containerClassName,h=Object(wn.a)(e,gl),O=yl(),E=function(){if(Array.isArray(n)&&n.length){var e=n.filter((function(e){return e.name})),a=e[e.length-1];return(u||v)&&e.length-1===0?a:"com.axelor.meta.db.MetaJsonRecord"===a.model&&a.targetModel?{fullName:a.targetModel}:a.target?{fullName:a.target}:{fullName:a.model}}return t||(i?{fullName:i.target}:o||void 0)},j=r.a.useCallback((function(e,t){if("remove-option"===t){var r=function(e,t){for(var n,a=function(a){var r=e[a];if(-1===t.findIndex((function(e){return e.name===r.name})))return n=a,"break"},r=0;r<e.length;r++){if("break"===a(r))break}return n}(n,e);r&&e.splice(r,e.length-1)}a(e)}),[n,a]),x=function(){return Array.isArray(n)&&n.length},w=function(e){var t=h.optionLabelKey,n=h.optionValueKey,a=h.concatValue,r=h.name;return"metaJsonModel"===(e&&e.type)?"".concat(e&&e[Ol(t)]?e[Ol(t)]:""," (Custom model)")||!1:"fieldName"===r?"".concat(ko(e&&e.title?e.title:"")," (").concat(e&&e[Ol(t)],")"):e?e[Ol(t)]&&a&&e[Ol(n)]?"".concat(e[Ol(t)]||e[Ol(n)]):e[Ol(t)]?e[Ol(t)]:e.name?e.name:e.id?e.id.toString():"":""},k=function(){var e=Object(p.a)(m.a.mark((function e(){var t,n,a;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=hl(g)){e.next=3;break}return e.abrupt("return",[]);case 3:return e.next=5,Qi(t.metaModels,"metaModel",t.metaModels);case 5:return n=e.sent,e.next=8,Qi(t.metaJsonModels,"metaJsonModel",t.metaJsonModels);case 8:return a=e.sent,e.abrupt("return",[].concat(Object(s.a)(n||[]),Object(s.a)(a||[])));case 10:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return r.a.createElement("div",{className:y},r.a.createElement(Ro,Object.assign({title:e.title,isMulti:!0,fetchAPI:Object(p.a)(m.a.mark((function e(){var a,r;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!v||x()){e.next=6;break}return e.next=3,k();case 3:e.t0=e.sent,e.next=16;break;case 6:if(!u||x()){e.next=12;break}return e.next=9,Qi();case 9:e.t1=e.sent,e.next=15;break;case 12:return e.next=14,lo(E());case 14:e.t1=e.sent;case 15:e.t0=e.t1;case 16:return a=e.t0,t&&(!n||n.length<1)&&(r=Object.assign({},t,{title:"SOURCE"}),a.splice(0,0,Object(c.a)({},r))),b&&n&&n.length>0&&(a=a.filter((function(e){return["many_to_one","one_to_one"].includes(e.type.toLowerCase())&&!$i.includes(e.name)}))),e.abrupt("return",a);case 20:case"end":return e.stop()}}),e)}))),value:n,onChange:j,renderTags:function(e,t){return e.map((function(n,a){return r.a.createElement(r.a.Fragment,{key:a},r.a.createElement(sa.a,Object.assign({key:a,title:n[Ol(h.optionValueKey)],label:w(n),className:O.chip},t({index:a}))),a<e.length-1&&r.a.createElement(vl.a,{className:O.rightIcon}))}))}},h)))},jl=["onChange","value"],xl=["onChange","value","value2","classes","style","targetName"],wl=["type","operator","onChange","value","classes","parentType","editor"],kl=Object(F.a)((function(e){return{root:{width:"100%",overflowX:"auto",height:"calc(100% - 120px)",overflowY:"auto"},table:{minWidth:650,"& td":{padding:"0px 16px !important"}},tableRowRoot:{"&:nth-of-type(odd)":{backgroundColor:e.palette.action.hover},"& .MuiInput-underline:before":{borderBottom:0}},input:{width:"100%"},error:{fontSize:"0.7em",position:"absolute",paddingTop:1,color:"red",fontWeight:"bold"},valueInputContainer:{position:"relative"},radioInput:{padding:4},iconButton:{padding:"8px",marginTop:7},deleteIcon:{color:"#0275d8"},headerTitle:{paddingLeft:0,textAlign:"center"},rightIcon:{width:"0.8em",height:"0.8em"},addFieldButton:{left:10,top:7,textTransform:"capitalize"},searchField:{marginLeft:20,"&>div":{marginTop:10}}}})),Cl=function(e){return e.type.replace(/-/g,"_").toLowerCase()},Nl=function(e,t,n){var a=arguments.length>3&&void 0!==arguments[3]&&arguments[3],r=[{title:"Self",id:Wi.SELF},{title:"Context",id:Wi.CONTEXT},{title:"Expression",id:Wi.NONE},{title:"Source",id:Wi.SOURCE},{title:"Process",id:Wi.PROCESS}],i=Object(ce.get)(t,"value.from",n);return t&&[Wi.CONTEXT,Wi.SELF,Wi.SOURCE].includes(i)&&r.push({title:"Parent",id:Wi.PARENT}),a&&r.push({title:"DMN",id:Wi.DMN}),r},Sl=function(e,t){return e[t]},Ml=function(e){var t,n=(e.value||{}).selected;return n&&"object"===typeof n.value?n.value:(n&&(t=n.value),{name:t})},Tl=function(e){var t=(e.value||{}).selected,n=void 0===t?{}:t;if(n)return So(e.type)?Object(d.a)({},n.targetName,n.value):n.value},Pl=function(e){var t={};return e.subField&&(t.borderBottom="0px"),t},Fl=function(e,t,n){var a;return e.id===Wi.PARENT?!(null===t||void 0===t||null===(a=t.value)||void 0===a?void 0:a.selected):e.id===Wi.SOURCE&&!n},_l=function(e,t){var n=e.contextModel,a=Object(ce.get)(e,"value.from",t);return n&&"context"===a?{fullName:n.target}:[Wi.SELF,Wi.SOURCE,Wi.PARENT].includes(a)?{fullName:Ml(e).target}:{}},Rl=function(e,t,n){var a;(t&&t[e.targetName]&&(a=e.targetName),!a&&n&&t&&t[n]&&(a=n),a)||(a=(t?t.name:null)?"name":"_selectId");return a};function Ll(e){var t=e.value,n=e.row,a=e.onChange,i=n||{},o=i.targetModel,l=i.targetJsonModel,s=i.name,u=kl(),d=function(){var e=Object(p.a)(m.a.mark((function e(){var t;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,lo(Object(c.a)(Object(c.a)({},n),{},{fullName:o,modelType:l?Ji:zi,name:l?n&&n["targetJsonModel.name"]:s}));case 2:return t=e.sent,e.abrupt("return",t&&t.filter((function(e){return"string"===e.type.toLowerCase()})));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return r.a.createElement(Ro,{name:"searchField",title:"Value",placeholder:"Value",fetchAPI:d,isMulti:!1,onChange:function(e){a({name:"searchField",value:e})},concatValue:!0,optionLabelKey:"title",optionValueKey:"name",value:t,classes:{root:u.MuiAutocompleteRoot}})}function Dl(e){var t=e.editor,n=e.internalProps,i=n.onChange,o=n.value,s=Object(wn.a)(n,jl),u=kl(),d=s.field,b=void 0===d?{}:d,f=b.targetName,v=b.target,g=b.targetModel,y=Object(a.useState)(null),h=Object(l.a)(y,2),O=h[0],E=h[1],j=function(){var e=Object(p.a)(m.a.mark((function e(){var t,n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=[],"com.axelor.meta.db.MetaJsonRecord"!==v||!b.domain){e.next=11;break}return e.next=4,bo(b.domain);case 4:return t=e.sent,e.next=7,vo(b.jsonTarget);case 7:n=e.sent,E(n&&n.name),e.next=20;break;case 11:if(!b.targetJsonModel){e.next=17;break}return e.next=14,mo(b["targetJsonModel.name"]);case 14:t=e.sent,e.next=20;break;case 17:return e.next=19,yo(v||g);case 19:t=e.sent;case 20:return e.abrupt("return",t);case 21:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),x=o._selectId?Object(c.a)(Object(c.a)({},o),{},{id:o._selectId}):o;return r.a.createElement(Ro,{name:"fieldValue",title:"Value",placeholder:"Value",fetchAPI:j,isMulti:!1,optionValueKey:f,optionLabelKey:f,onChange:function(e){i({name:"fieldValue",value:e,nameField:O},t)},value:x||[],classes:{root:u.MuiAutocompleteRoot}})}function Il(e){var t=e.Component,n=e.editor,a=e.internalProps,i=a.onChange,o=a.value,l=(a.value2,a.classes,a.style),c=(a.targetName,Object(wn.a)(a,xl));return r.a.createElement(t,Object.assign({name:"fieldValue",onChange:function(e){return i({name:"fieldValue",value:e},n)},value:o,style:l},c))}var Al=r.a.memo((function(e){var t=e.type,n=e.operator,a=void 0===n?"=":n,i=e.onChange,o=e.value,l=e.classes,s=e.parentType,u=e.editor,m=Object(wn.a)(e,wl),d=Object(c.a)({value:o.fieldValue,value2:o.fieldValue2,onChange:i},m),p=[],b={};switch(t){case"one_to_one":case"many_to_one":case"many_to_many":case"one_to_many":case"json_one_to_one":case"json_many_to_one":case"json_many_to_many":case"json_one_to_many":return r.a.createElement(Dl,{operator:a,editor:u,internalProps:Object(c.a)(Object(c.a)({},d),{},{value:o.fieldValue}),parentType:s});case"date":case"time":case"datetime":return r.a.createElement(Il,{Component:ol,operator:a,editor:u,internalProps:Object(c.a)(Object(c.a)({type:t,value:function(e){return e?br()(e,Gi[t]):null}(o.fieldValue),onChange:function(e,n){var a=e.name,r=e.value;return i({name:a,value:r&&r.format(Gi[t])},n)}},m),{},{margin:"none",classes:l,style:{width:"250px !important"}})});case"integer":case"long":case"decimal":case"double":return b={Component:(p=m.field.selectionList&&m.field.selectionList.map((function(e){var t=e.title,n=e.value,a=e.data;return{name:a&&a.value||n,title:t}})))?sl:nl,operator:a,editor:u,internalProps:Object(c.a)({},p?Object(c.a)({options:p,classes:l},d):Object(c.a)(Object(c.a)({type:t},d),{},{margin:"none",classes:l,style:{width:"250px !important"}}))},r.a.createElement(Il,b);case"enum":return p=m.field.selectionList.map((function(e){var t=e.title,n=e.value,a=e.data;return{name:a&&a.value||n,title:t}})),r.a.createElement(Il,{Component:sl,operator:a,editor:u,internalProps:Object(c.a)({options:p,classes:l},d)});case"boolean":var f=[{title:"Yes",value:!0},{title:"No",value:!1}];return r.a.createElement(Ro,{optionLabelKey:"title",optionValueKey:"value",options:f,value:f.find((function(e){return e.value===o.fieldValue})),onChange:function(e){return i({value:e.value})}});default:return b={Component:(p=m.field&&m.field.selectionList&&m.field.selectionList.map((function(e){var t=e.title,n=e.value,a=e.data;return{name:a&&a.value||n,title:t}})))?sl:Qo,operator:a,editor:u,internalProps:Object(c.a)({},p?Object(c.a)(Object(c.a)({options:p,classes:l},d),{},{value:o.fieldValue,className:l.input}):Object(c.a)(Object(c.a)({classes:l},d),{},{onBlur:function(e){return d.onChange(e.target)},margin:"none",style:{width:"100%"}}))},r.a.createElement(Il,b)}}));var Vl=function(e){var t=kl(),n=e.onRowChange,a=e.data,i=void 0===a?[]:a,o=e.metaFields,l=void 0===o?[]:o,s=e.onRemove,u=e.errors,d=e.onClearError,b=e.onSubFieldAdd,f=e.handleAdd,v=e.sourceModel,g=e.targetModel,y=e.bpmnModeler,h=e.manageFieldClick,O=e.handleFieldSearch,E=e.onReorder,j=e.element,x=r.a.useCallback((function(e){if(e){var t=y.get("elementRegistry"),n=t&&t._elements,a=n&&n[e.name];if(!a){var r=y.get("canvas").getRootElement().businessObject.participants;if(r&&r.length>0){var i=r.find((function(t){return t.processRef.id===e.name}));return a=i&&i.processRef}}return a&&a.element&&a.element.businessObject}}),[y]),w=r.a.useCallback((function(){var e=mu(y),t=[];return Object.keys(e).forEach((function(e){t.push({name:e})})),t}),[y]),k=r.a.useCallback((function(){return v?Wi.SOURCE:Wi.NONE}),[v]),C=r.a.useCallback(function(){var e=Object(p.a)(m.a.mark((function e(t,a,r,i){var o,l,c,s,p,b,f;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:o=t.target.value,l=t.target.nameField,u&&u[i.dataPath]&&o&&d(i.dataPath),c=a,s=o,p=Object(ce.get)(i,"value.from",k()),"value"===a&&(c="".concat(a,".selected"),b=o,f=o?Rl(i,o,l):Object(ce.get)(i,"value.selected.targetName"),!So(i.type)||p&&p!==Wi.NONE||"object"!==typeof b||(b="_selectId"===f?o.id:o[f]),s={value:b},p===Wi.NONE&&So(i.type)&&(s.targetName=f)),(["contextModel","sourceField","selfField"].includes(a)||[Wi.SELF,Wi.SOURCE,Wi.PARENT].includes(p)&&"value"===a)&&n&&n(i,r,"modelSubField",[]),n&&n(i,r,c,s);case 9:case"end":return e.stop()}}),e)})));return function(t,n,a,r){return e.apply(this,arguments)}}(),[n,u,d,k]),N=r.a.useCallback((function(e){s&&s(e)}),[s]),S=r.a.useCallback((function(){var e=y.get("elementRegistry"),t="bpmn:Process"===j.type||"bpmn:Participant"===j.type?j.id:j&&j.parent&&j.parent.id;if(e.filter((function(e){var n=Object(P.getBusinessObject)(e);return Object(P.is)(e,"bpmn:BusinessRuleTask")&&n&&n.resultVariable&&n.decisionRef&&(e&&e.parent&&e.parent.id)===t})).length>0)return!0}),[y,j]),M=r.a.useCallback(Object(p.a)(m.a.mark((function e(){var t,n,a,r,i;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=[],n=y.get("elementRegistry"),a=n.filter((function(e){var n=Object(P.getBusinessObject)(e);return n.decisionRef&&(e.parent&&e.parent.id)===(j&&j.parent&&j.parent.id)&&t.push(n.decisionRef),n.decisionRef&&(e.parent&&e.parent.id)===(j&&j.parent&&j.parent.id)})),t&&!(t.length<=0)){e.next=5;break}return e.abrupt("return");case 5:return e.next=7,Wt([{fieldName:"decisionId",operator:"IN",value:t}]);case 7:return r=e.sent,i=a&&r&&a.map((function(e){var t=r.find((function(t){return t.decisionId===(e.businessObject&&e.businessObject.decisionRef)}));return Object(c.a)(Object(c.a)({},t),{},{dmnNodeId:e.id,dmnNodeNameId:e.businessObject.name,resultVariable:e.businessObject.resultVariable})})),e.abrupt("return",i&&i.filter((function(e){return e.id})));case 10:case"end":return e.stop()}}),e)}))),[y,j]),T=r.a.useCallback((function(e,n){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3?arguments[3]:void 0;if(e.isRemoved||e.isHidden)return null;var o=Object(ce.get)(e,"value.from",k());return r.a.createElement(bl,{index:n,key:e.name,id:e.name,moveCard:E},(function(s){var u=s.ref,m=s.style,d=s.handlerId,p=s.preview;return r.a.createElement(Vo.a,{"data-handler-id":d,ref:p,style:Object(c.a)({},m),classes:{root:t.tableRowRoot}},r.a.createElement(Io.a,{align:"left",ref:u,style:{cursor:"move"}},r.a.createElement("div",null,r.a.createElement($o.a,null))),r.a.createElement(Io.a,{style:Object(c.a)({},Pl(e))},r.a.createElement(Yo,{name:"name",className:t.input,item:e,onChange:function(e){return C(e,"name",n)},onSubFieldAdd:b,handleAdd:f,onSubFieldChange:function(e){C(e,"subFieldName",n)}})),r.a.createElement(Io.a,null,"="),r.a.createElement(Io.a,{style:Object(c.a)({},Pl(e)),className:t.valueInputContainer},o===Wi.SELF?r.a.createElement(El,{optionValueKey:"name",optionLabelKey:"title",concatValue:!0,parentRow:i,targetModel:g,value:e.modelSubField,onChange:function(t){return C({target:{value:t}},"modelSubField",n,e)}}):o===Wi.SOURCE?r.a.createElement(El,{optionValueKey:"name",optionLabelKey:"title",concatValue:!0,sourceModel:v,value:e.modelSubField,onChange:function(t){return C({target:{value:t}},"modelSubField",n,e)}}):o===Wi.PARENT?r.a.createElement(Ro,{optionValueKey:"name",optionLabelKey:"title",concatValue:!0,options:l,fetchAPI:function(){return lo(_l(i,k()))},value:Ml(e),onChange:function(t){return C({target:{value:t}},"value",n,e)}}):o===Wi.CONTEXT?r.a.createElement(El,{optionValueKey:"name",optionLabelKey:"title",concatValue:!0,isContext:!0,value:e.modelSubField,onChange:function(t){return C({target:{value:t}},"modelSubField",n,e)}}):o===Wi.PROCESS?r.a.createElement("div",{style:{display:"flex",alignItems:"center"}},r.a.createElement(Ro,{optionValueKey:"name",optionLabelKey:"title",concatValue:!0,options:w(),value:Sl(e,"processId"),isProcessContext:!0,onChange:function(t){C({target:{value:null}},"modelSubField",n,e),C({target:{value:t}},"processId",n,e)}}),Sl(e,"processId")&&r.a.createElement(r.a.Fragment,null,r.a.createElement(xn.a,{className:t.rightIcon}),r.a.createElement(El,{optionValueKey:"name",optionLabelKey:"title",concatValue:!0,isProcessContext:!0,value:e.modelSubField,element:x(Sl(e,"processId")),onChange:function(t){return C({target:{value:t}},"modelSubField",n,e)}}))):o===Wi.DMN?r.a.createElement("div",{style:{display:"flex",alignItems:"center",width:"100%"}},r.a.createElement(Ro,{optionValueKey:"resultVariable",optionLabelKey:"dmnNodeNameId",concatValue:!0,fetchAPI:function(){return M()},value:Sl(e,"dmn"),isProcessContext:!0,onChange:function(t){C({target:{value:[]}},"modelSubField",n,e),C({target:{value:t}},"dmn",n,e)}}),Sl(e,"dmn")&&r.a.createElement(r.a.Fragment,null,r.a.createElement(xn.a,{className:t.rightIcon}),r.a.createElement(Ro,{optionValueKey:"name",optionLabelKey:"title",concatValue:!0,isProcessContext:!0,options:Sl(e,"dmn")&&Sl(e,"dmn").outputDmnFieldList,value:Ml(e)&&Ml(e).name&&Ml(e).name.split(".")[1]||Ml(e),onChange:function(t){C({target:{value:t}},"value",n,e)}}))):r.a.createElement(Al,{row:e,type:Cl(e),onChange:function(t,a){C({target:t},"value",n,e)},value:{fieldValue:Tl(e),fieldValue2:""},classes:t,field:e.subFieldName||e})),S()&&r.a.createElement(Io.a,{style:Object(c.a)({},Pl(e)),size:"small"},o===Wi.DMN&&["many_to_one","json_many_to_one"].includes(Cl(e))&&r.a.createElement(Ll,{internalProps:{value:e.searchField},row:e,value:e.searchField,onChange:function(t,a){C({target:t},"searchField",n,e)}})),r.a.createElement(Io.a,{style:Object(c.a)({},Pl(e)),size:"small"},r.a.createElement(Ro,{disableClearable:!0,options:Nl(0===a,i,k(),S()),value:o||k(),getOptionDisabled:function(e){return Fl(e,i,v)},onChange:function(t){return C({target:{value:t}},"value.from",n,e)}})),r.a.createElement(Io.a,{style:void 0!==e.level?Object(c.a)({borderBottom:"0px"},Pl(e)):Object(c.a)({},Pl(e))},r.a.createElement(fn.a,{size:"medium",onClick:function(){return N(e)},className:t.iconButton},r.a.createElement(V.a,{title:"Remove field"},r.a.createElement(tn.a,{fontSize:"small",className:t.deleteIcon})))))}))}),[t,N,C,l,b,f,v,k,g,w,x,E,S,M]);return r.a.createElement(Za.a,{className:t.root},r.a.createElement(A.a,{container:!0,style:{backgroundColor:"#FAFAFA"}},r.a.createElement(fn.a,{variant:"contained",color:"primary",className:t.addFieldButton,onClick:h,title:"Manage Fields"},r.a.createElement(Wo.a,null)),r.a.createElement(_n.a,{classes:{root:t.searchField},placeholder:"Search fields",onChange:function(e){return O(e)}})),r.a.createElement(Lo.a,{className:t.table,"aria-label":"simple table",stickyHeader:!0},r.a.createElement("colgroup",null,r.a.createElement("col",{style:{width:"3%"}}),r.a.createElement("col",{style:{width:"27%",minWidth:300}}),r.a.createElement("col",{style:{width:"15px"}}),r.a.createElement("col",{style:{width:"50%",minWidth:200}}),S()&&r.a.createElement("col",{style:{width:"10%",minWidth:200}}),r.a.createElement("col",{style:{width:"210px",minWidth:230}}),r.a.createElement("col",{style:{width:"5%"}})),r.a.createElement(Ao.a,null,r.a.createElement(Vo.a,null,r.a.createElement(Io.a,{align:"left"},"\xa0"),r.a.createElement(Io.a,{className:t.headerTitle},"Field name"),r.a.createElement(Io.a,{className:t.headerTitle}),r.a.createElement(Io.a,{className:t.headerTitle},"Value"),S()&&r.a.createElement(Io.a,{className:t.headerTitle},"Search field"),r.a.createElement(Io.a,{className:t.headerTitle},"Value from"),r.a.createElement(Io.a,{className:t.headerTitle}))),r.a.createElement(Do.a,null,i.map((function(e,t){return T(e,t)})))))},Bl=r.a.createContext();function $l(){return r.a.useContext(Bl)}var Wl=function(e){var t=e.children,n=function(e){var t=r.a.useState(e),n=Object(l.a)(t,2),a=n[0],i=n[1];return[a,r.a.useCallback((function(e){return i(Object(dr.a)(e))}),[i])]}({builderFields:[]}),a=Object(l.a)(n,2),i={state:a[0],update:a[1]};return r.a.createElement(Bl.Provider,{value:i},t)},Jl=Object(F.a)((function(e){return{table:{minWidth:650},input:{width:"13%",marginRight:20},metaFieldGrid:{flex:1,display:"flex",flexDirection:"column",justifyContent:"center"},newRecordSwitchText:{display:"flex",flexDirection:"column",justifyContent:"center"},newRecordInputView:{display:"flex",flexDirection:"row",marginTop:5},modelFieldSelection:{marginRight:20,marginLeft:50},addModelFieldIcon:{marginLeft:15},saveButton:{marginLeft:10},cardContent:{overflow:"auto",height:600},cardContentItemText:{lineHeight:3},cardActionView:{justifyContent:"flex-end"},capitalizeText:{textTransform:"capitalize"},saveButtonText:{marginLeft:10},saveMessageAlert:{width:"100%",marginBottom:10,display:"flex",justifyContent:"space-between"},topView:{margin:"10px 10px 0px 10px"},searchField:{flexDirection:"row",width:"12%","& input":{paddingBottom:0}},process:{marginRight:20},loaderView:{position:"absolute",left:0,right:0,top:0,bottom:0,height:"100%",backgroundColor:"rgba(0,0,0,0.2)",display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",zIndex:"999"},paper:{margin:e.spacing(1),width:"calc(100% - 16px)",display:"flex",height:"calc(100% - 50px)",overflow:"hidden"},dialogPaper:{maxWidth:"100%",maxHeight:"100%",resize:"both",width:"100%",height:"90%"},root:{display:"flex",flexDirection:"column",alignItems:"flex-start",height:"100%",overflow:"hidden"},save:{margin:e.spacing(1),backgroundColor:"#0275d8",borderColor:"#0267bf",color:"white","&:hover":{backgroundColor:"#025aa5",borderColor:"#014682",color:"white"}},selectContainer:{width:"35%",minWidth:150,marginRight:20}}})),zl=function(e){return e.targetJsonModel?e.targetJsonModel.id:e.targetModel},Gl=function(e){return e?e.filter((function(e){return Object.keys(e).length>0})):e},Ul=function(e){return e.target&&"com.axelor.meta.db.MetaJsonRecord"!==e.target?Object(c.a)(Object(c.a)({},e),{},{fullName:e.target}):e.targetModel?Object(c.a)(Object(c.a)({},e),{},{fullName:e.targetModel}):Object(c.a)(Object(c.a)({},e),{},{modelType:Ji,name:e.jsonTarget})},Hl=function(e,t){var n,a=e;if(e&&(null===e||void 0===e?void 0:e.selected)&&(null===e||void 0===e||null===(n=e.selected)||void 0===n?void 0:n.value)){var r="".concat(e.selected.value).split(".");if(t===Wi.CONTEXT)return{contextModel:{name:wo(r[0])}};if(t===Wi.SELF)return a.selected=Object(c.a)(Object(c.a)({},a.selected),{},{value:r[0]}),{value:a}}return{}},ql=function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],a=n.find((function(e){return e.name===t.name}));if(!a)for(var r=0;r<n.length;r++){var i=n[r],o=Object(ce.get)(i,"value.fields");if(o&&(a=e(t,o)))break}return a},Kl=function e(t){var n=t.fields,a=void 0===n?[]:n,r=t.from,i=void 0===r?Wi.PARENT:r,o=t.shouldChangeFrom,l=void 0===o||o;return a.map((function(t){var n=Object(c.a)({},t);if(Object(ce.get)(n,"value.from")===i&&(l&&(n.value.from=Wi.NONE),n.value&&n.value.selected&&(n=Object.assign({},Object(c.a)(Object(c.a)({},n),{},{value:Object(c.a)(Object(c.a)({},n.value),{},{selected:Object(c.a)(Object(c.a)({},n.value.selected),{},{value:null})})}))),n.modelSubField=[]),n.value&&n.value.fields){var a=Object(s.a)(e({fields:n.value.fields,from:i,shouldChangeFrom:l}));n=Object.assign({},Object(c.a)(Object(c.a)({},n),{},{value:Object(c.a)(Object(c.a)({},n.value),{},{fields:a})}))}return n}))};var Yl=function(e){var t=e.params,n=e.onSave,i=e.handleClose,o=e.open,u=e.bpmnModeler,b=e.element,f=Jl(),v=$l(),g=v.state,y=v.update,h=g.builderFields,O=Object(a.useState)(),E=Object(l.a)(O,2),j=E[0],x=E[1],w=Object(a.useState)(),k=Object(l.a)(w,2),C=k[0],N=k[1],S=Object(a.useState)([]),M=Object(l.a)(S,2),T=M[0],P=M[1],F=Object(a.useState)(!1),_=Object(l.a)(F,2),R=_[0],L=_[1],D=Object(a.useState)(!1),V=Object(l.a)(D,2),B=V[0],$=V[1],W=Object(a.useState)({}),J=Object(l.a)(W,2),z=J[0],G=J[1],U=Object(a.useState)([]),H=Object(l.a)(U,2),q=H[0],K=H[1],Y=Object(a.useState)({}),X=Object(l.a)(Y,2),Z=X[0],Q=X[1],te=Object(a.useState)(!1),ne=Object(l.a)(te,2),ae=ne[0],re=ne[1],ie=Object(a.useState)(null),oe=Object(l.a)(ie,2),le=oe[0],se=oe[1],ue=Object(a.useState)({title:"Context",id:Wi.CONTEXT}),me=Object(l.a)(ue,2),de=me[0],pe=me[1],be=Object(a.useState)(!1),fe=Object(l.a)(be,2),ve=fe[0],ge=fe[1],ye=Object(a.useState)(!1),he=Object(l.a)(ye,2),Oe=he[0],Ee=he[1],je=Object(a.useState)({alertMessage:"Add all values",alertTitle:"Error"}),xe=Object(l.a)(je,2),we=xe[0],ke=xe[1],Ce=Object(a.useState)(!1),Ne=Object(l.a)(Ce,2),Se=Ne[0],Me=Ne[1],Te=Object(a.useState)(!1),Pe=Object(l.a)(Te,2),Fe=Pe[0],_e=Pe[1],Re=r.a.useCallback((function(){var e=mu(u),t=[];return Object.keys(e).forEach((function(e){t.push({name:e})})),t}),[u]),Le=r.a.useCallback((function(e){y((function(t){Object(ce.set)(t,"builderFields",e)}))}),[y]),De=r.a.useCallback((function(e){if(e){var t=u.get("elementRegistry"),n=t&&t._elements,a=n&&n[e.name];if(!a){var r=u.get("canvas").getRootElement().businessObject.participants;if(r&&r.length>0){var i=r.find((function(t){return t.processRef.id===e.name}));return a=i&&i.processRef}}return a&&a.element&&a.element.businessObject}}),[u]),Ie=r.a.useCallback((function(e,t,n,a){y((function(t){var r=t.builderFields.findIndex((function(t){return t.name===e.name})),i=t.builderFields[r];if("value.from"===n&&[Wi.CONTEXT,Wi.SELF].includes(Object(ce.get)(i,"value.from"))){var o=Object(ce.get)(i,"value.fields",[]);if(o.length){var l=Kl({fields:o});Object(ce.set)(t.builderFields,"[".concat(r,"].value.fields"),l)}}if("value.selected"===n&&[Wi.CONTEXT,Wi.SELF].includes(Object(ce.get)(i,"value.from"))){var c=Object(ce.get)(i,"value.fields",[]);if(c.length){var s=Kl({fields:c,shouldChangeFrom:!1});Object(ce.set)(t.builderFields,"[".concat(r,"].value.fields"),s)}}Object(ce.set)(t.builderFields,"[".concat(r,"].").concat(n),a)}))}),[y]),Ae=r.a.useCallback((function(e){y((function(t){var n=t.builderFields.findIndex((function(t){return t.name===e.name}));-1!==n&&(t.builderFields[n].isRemoved=!0)}))}),[y]),Ve=r.a.useCallback(function(){var e=Object(p.a)(m.a.mark((function e(n,a){var r,i,o,l,s,u,p,b,f,v,g,h;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!a){e.next=32;break}if(r=n.target||zl(n),i=z[r],o=JSON.parse(t.resultMetaField||"{}"),l=Object(ce.get)(o,"fields",[]),z[r]){e.next=24;break}if(j.modelType!==Ji){e.next=12;break}return e.next=9,so(Object(c.a)({},n));case 9:i=e.sent,e.next=15;break;case 12:return e.next=14,lo(Ul(n));case 14:i=e.sent;case 15:G(Object(d.a)({},r,i)),s="".concat(n.dataPath,".value.fields"),u=[],p=ql(n,l),b=Object(ce.get)(p,"value.fields",[]),No(i).forEach((function(e,t){var n=b.find((function(t){return t.name===e.name}))||{},a=n.value,r=Object(ce.get)(n,"value.from"),i=Hl(a,r);u.push(Object(c.a)(Object(c.a)({},e),{},{dataPath:"".concat(s,"[").concat(t,"]"),from:r,value:a,hideFields:!0,isRemoved:!0,modelSubField:n.modelSubField},i))})),y((function(e){Object(ce.set)(e.builderFields,"".concat(n.dataPath,".value.fields"),u),Object(ce.set)(e.builderFields,"".concat(n.dataPath,".hideFields"),!1)})),e.next=30;break;case 24:f=[],v="".concat(n.dataPath,".value.fields"),g=ql(n,l),h=Object(ce.get)(g,"value.fields",[]),No(i).forEach((function(e,t){var n=h.find((function(t){return t.name===e.name}))||{},a=n.value,r=Object(ce.get)(n,"value.from"),i=Hl(a,r);f.push(Object(c.a)(Object(c.a)({},e),{},{dataPath:"".concat(v,"[").concat(t,"]"),from:r,value:a,hideFields:!0,isRemoved:!1,modelSubField:n.modelSubField},i))})),y((function(e){Object(ce.set)(e.builderFields,"".concat(n.dataPath,".value.fields"),f),Object(ce.set)(e.builderFields,"".concat(n.dataPath,".hideFields"),!1)}));case 30:e.next=33;break;case 32:y((function(e){Object(ce.set)(e.builderFields,"".concat(n.dataPath,".hideFields"),!0)}));case 33:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),[j,z,y,t]),Be=r.a.useCallback((function(e){y((function(t){e.forEach((function(e){Object(ce.set)(t.builderFields,"".concat(e.dataPath,".isRemoved"),!1)}))}))}),[y]),$e=r.a.useCallback(function(){var e=Object(p.a)(m.a.mark((function e(n){var a,r,i,o=arguments;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:o.length>1&&void 0!==o[1]?o[1]:{},a=JSON.parse(t.resultMetaField||"{}"),r=Object(ce.get)(a,"fields",[]),i=new Array(r.length),No(Object(s.a)(n)).forEach((function(e,t){var n=r.findIndex((function(t){return t.name===e.name})),a=r[n]||{},o=a.value,l=Object(ce.get)(a,"value.from"),s=Hl(o,l),u=Object(c.a)(Object(c.a)({},e),{},{path:Mo(e),from:l,value:o,hideFields:!0,isRemoved:!o,modelSubField:Gl(a.modelSubField),selfField:a.selfField,sourceField:a.sourceField,processId:a.processId?{name:a.processId}:null,searchField:a.searchField,dmn:a.dmn},s);-1!==n?(u.dataPath="[".concat(n,"]"),i.splice(n,1,Object(c.a)({},u))):(u.dataPath="[".concat(i.length,"]"),i.push(Object(c.a)({},u)))})),y((function(e){Object(ce.set)(e,"builderFields",i.filter((function(e){return e})))}));case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[t,y]),We=r.a.useCallback((function(e,t){y((function(n){var a=n.builderFields[e];n.builderFields.splice(e,1),n.builderFields.splice(t,0,a)}))}),[y]),Je=r.a.useCallback(function(){var e=Object(p.a)(m.a.mark((function e(t,n){var a;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t){e.next=7;break}return e.next=3,lo(t);case 3:a=e.sent,K(Object(s.a)(a)),Q({}),$e(a,n);case 7:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),[$e]),ze=r.a.useCallback((function(e){Q((function(t){return JSON.parse(JSON.stringify(Object(ce.set)(t,e,void 0)))}))}),[]),Ge=r.a.useCallback((function(){var e=JSON.parse(t.resultMetaField||"{}"),n=Yi(h,e,function(e){return e?Wi.SOURCE:Wi.NONE}(C),C),a=function(e){var t="";return e.forEach((function(e){t=""===t?e.name:"".concat(t,".").concat(e.name)})),t}(T);return{fields:n,targetModel:j&&j.name,sourceModel:a&&""!==a?a:void 0,sourceModelList:T,newRecord:B,createVariable:ae,processId:le&&le.name,isJson:(j&&j.modelType)===Ji,modelFrom:de,savedRecord:Fe}}),[h,ae,j,de,B,Fe,le,C,T,t]),Ue=r.a.useCallback(Object(p.a)(m.a.mark((function e(){var a,r,i,o;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Q({}),a=Ge(),r=JSON.stringify(Object(c.a)({},a)),j){e.next=6;break}return n(void 0),e.abrupt("return");case 6:return(i=t.model)||(i="CUSTOM"===j.modelType?"com.axelor.meta.db.MetaJsonRecord":j.fullName),e.next=10,Oo(r,i);case 10:o=e.sent,n({resultMetaField:r,resultField:o});case 13:case"end":return e.stop()}}),e)}))),[t,j,n,Ge]),He=r.a.useCallback(function(){var e=Object(p.a)(m.a.mark((function e(t){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:x(t),Je(t);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[Je]),qe=jo(r.a.useCallback((function(e){var t=function e(t,n){return t.map((function(t){var a=Object(c.a)({},t),r=!1;if(a.value&&a.value.fields){var i=e(a.value.fields,n);r=-1!==i.findIndex((function(e){return!1===e.isHidden})),a=Object(c.a)(Object(c.a)({},a),{},{value:Object(c.a)(Object(c.a)({},a.value),{},{fields:i})})}return t.name.toLowerCase().includes(n.toLowerCase())||r?a.isHidden=!1:a.isHidden=!0,a}))}(h,e);Le(Object(s.a)(t))}),[h,Le]),400),Ke=r.a.useCallback((function(e){var t=e.target.value;qe(t)}),[qe]),Ye=r.a.useCallback((function(){ge(!0)}),[]),Xe=r.a.useCallback((function(){ge(!1)}),[]);return r.a.useEffect((function(){function e(){return(e=Object(p.a)(m.a.mark((function e(){var n,a,r,i,o;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return");case 2:if(!(n=JSON.parse(t.resultMetaField||"{}"))||!t.resultMetaField){e.next=23;break}return L(!0),e.next=7,to(n.targetModel);case 7:return a=e.sent,r=n.sourceModelList&&n.sourceModelList[n.sourceModelList.length-1]||{},i=r.target?r.target.split(".").pop():r.name,e.next=12,to(i);case 12:o=e.sent,P(Object(s.a)(n.sourceModelList||[])),x(a),N(o),re(n.createVariable),$(n.newRecord),_e(n.savedRecord),n.processId?se({name:n.processId}):se(null),pe(n.modelFrom||{title:"Context",id:Wi.CONTEXT}),Je(a),L(!1);case 23:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[t,Je]),r.a.createElement(I.a,{onClose:function(e,t){"backdropClick"!==t&&i()},"aria-labelledby":"simple-dialog-title",open:o,classes:{paper:f.dialogPaper}},r.a.createElement(za.a,{id:"simple-dialog-title"},"Script"),r.a.createElement("div",{className:f.root},r.a.createElement(Za.a,{variant:"outlined",className:f.paper},r.a.createElement("div",{style:{height:"100%",width:"100%"}},r.a.createElement(r.a.Fragment,null,r.a.createElement(A.a,{container:!0,style:{height:"100%"}},r.a.createElement(A.a,{container:!0,className:f.topView},r.a.createElement(A.a,{container:!0,justifyContent:"space-between",style:{marginBottom:10,alignItems:"flex-end"}},r.a.createElement(Ro,{className:f.input,name:"metaModal",title:"Target Model",placeholder:"Target Model",fetchAPI:function(e){return ao(e)},optionLabelKey:"name",onChange:function(e){return He(e)},value:j}),r.a.createElement(A.a,{item:!0,className:f.newRecordInputView},r.a.createElement(Bi.a,{checked:B,onChange:function(e){return $(e.target.checked)},color:"primary"}),r.a.createElement(ee.a,{className:f.newRecordSwitchText},"New Record")),r.a.createElement(A.a,{item:!0,className:f.newRecordInputView},r.a.createElement(Bi.a,{checked:Fe,onChange:function(e){return _e(e.target.checked)},color:"primary"}),r.a.createElement(ee.a,{className:f.newRecordSwitchText},"Saved record")),r.a.createElement(A.a,{item:!0,className:f.newRecordInputView},r.a.createElement(Bi.a,{checked:ae,onChange:function(e){return re(e.target.checked)},color:"primary"}),r.a.createElement(ee.a,{className:f.newRecordSwitchText},"Create variable")),r.a.createElement(A.a,{item:!0,className:f.metaFieldGrid},r.a.createElement(A.a,{container:!0},r.a.createElement(Go,{data:h,onSubmit:function(e){return Be(e)},icon:r.a.createElement(sr.a,null),buttonTitle:"Add Fields",iconButton:!0,buttonClassName:f.modelFieldSelection,iconButtonClassName:f.addModelFieldIcon,open:ve,onClose:Xe})))),r.a.createElement(A.a,{container:!0,style:{marginBottom:10,alignItems:"flex-end"}},r.a.createElement(Ro,{disableClearable:!0,className:f.input,options:[{title:"Context",id:Wi.CONTEXT},{title:"Process",id:Wi.PROCESS}],value:de||{},title:"Model from",onChange:function(e){P([]),se(null),pe(e)}}),de.id===Wi.CONTEXT?r.a.createElement(El,{containerClassName:f.selectContainer,title:"Source Model",optionValueKey:"name",optionLabelKey:"name",concatValue:!0,isM2o:!0,isContext:!0,value:T,onChange:function(e){var t=e.map((function(e){return!e.fullName&&e.target?Object(c.a)(Object(c.a)({},e),{},{fullName:e.target}):e}));P(Object(s.a)(t)),N(Object(c.a)({},t[t.length-1]))}}):r.a.createElement("div",{style:{display:"flex",alignItems:"flex-end"}},r.a.createElement(Ro,{optionValueKey:"name",optionLabelKey:"title",concatValue:!0,className:f.process,options:Re(),value:le,isProcessContext:!0,onChange:function(e){se(e)}}),le&&r.a.createElement(r.a.Fragment,null,r.a.createElement(El,{optionValueKey:"name",optionLabelKey:"title",concatValue:!0,isProcessContext:!0,value:T,element:De(le),onChange:function(e){P(Object(s.a)(e)),N(e[e.length-1])}}))))),r.a.createElement(Vl,{builderFields:h,data:h,onRowChange:Ie,onRemove:Ae,metaFields:q,errors:Z,onClearError:ze,onSubFieldAdd:Ve,handleAdd:Be,sourceModel:C,targetModel:j,bpmnModeler:u,manageFieldClick:Ye,handleFieldSearch:Ke,onReorder:We,element:b})),R&&r.a.createElement("div",{className:f.loaderView},r.a.createElement(ua.a,{size:32}))))),r.a.createElement("div",null,r.a.createElement(In.a,{className:f.save,onClick:Ue},"OK"),r.a.createElement(In.a,{className:f.save,onClick:function(){var e=JSON.parse(t.resultMetaField||"{}"),n=Ge();n&&n.targetModel&&JSON.stringify(e)!==JSON.stringify(n)?(Me(!0),Ee(!0),ke({alertMessage:"Current changes will be lost. Do you really want to proceed?",alertTitle:"Question"})):i()},style:{textTransform:"none"}},"Cancel"))),Oe&&r.a.createElement(I.a,{open:Oe,onClose:function(e,t){"backdropClick"!==t&&Ee(!1)},"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",classes:{paper:f.dialog}},r.a.createElement(za.a,{id:"alert-dialog-title"},we.alertTitle),r.a.createElement(Ga.a,null,r.a.createElement(Ha.a,{id:"alert-dialog-description"},we.alertMessage)),r.a.createElement(Ua.a,null,r.a.createElement(In.a,{onClick:function(){Ee(!1),Se&&i()},color:"primary",autoFocus:!0,className:f.save},"Ok"),r.a.createElement(In.a,{onClick:function(){Ee(!1)},color:"primary",autoFocus:!0,style:{textTransform:"none"},className:f.save},"Cancel"))))};function Xl(e){var t=e.params,n=e.onSave,i=e.handleClose,o=e.open,c=e.bpmnModeler,s=e.element,u=r.a.useState(null),m=Object(l.a)(u,2),d=m[0],p=m[1];return Object(a.useEffect)((function(){var e=t();p(e)}),[t]),r.a.createElement("div",{className:"App"},r.a.createElement(Yl,{onSave:n,params:d,handleClose:i,open:o,bpmnModeler:c,element:s}))}function Zl(e){var t=e.handleClose,n=e.open,a=e.onSave,i=e.params,o=e.bpmnModeler,l=e.element;return r.a.createElement(Ai.a,{backend:Vi.a},r.a.createElement(Wl,null,r.a.createElement(Xl,{onSave:a,handleClose:t,open:n,params:i,bpmnModeler:o,element:l})))}var Ql=Object(F.a)((function(e){return{groupLabel:{fontWeight:"bolder",display:"inline-block",verticalAlign:"middle",color:"#666",fontSize:"120%",margin:"10px 0px",transition:"margin 0.218s linear",fontStyle:"italic"},divider:{marginTop:15,borderTop:"1px dotted #ccc"},label:{fontWeight:"bolder",display:"inline-block",verticalAlign:"middle",color:"#666",margin:"3px 0px"},expressionBuilder:{display:"flex",alignItems:"center",justifyContent:"space-between"},newIcon:{color:"#58B423",marginLeft:5},new:{cursor:"pointer",marginTop:18.6,display:"flex"},textbox:{width:"100%"},dialog:{minWidth:300},title:{fontSize:18,fontWeight:"bold"},save:{margin:e.spacing(1),backgroundColor:"#0275d8",borderColor:"#0267bf",textTransform:"none",color:"white","&:hover":{backgroundColor:"#025aa5",borderColor:"#014682",color:"white"}}}}));function ec(e){var t=e.element,n=e.index,i=e.label,o=e.bpmnModeler,s=Object(a.useState)(!1),u=Object(l.a)(s,2),b=u[0],f=u[1],v=r.a.useState(!1),g=Object(l.a)(v,2),y=g[0],h=g[1],O=Object(a.useState)(!1),E=Object(l.a)(O,2),j=E[0],x=E[1],w=Object(a.useState)(null),k=Object(l.a)(w,2),C=k[0],N=k[1],S=Object(a.useState)(null),M=Object(l.a)(S,2),T=M[0],F=M[1],_=Object(a.useState)([]),R=Object(l.a)(_,2),L=R[0],D=R[1],A=Object(a.useState)(!0),B=Object(l.a)(A,2),$=B[0],W=B[1],G=Object(a.useState)(null),U=Object(l.a)(G,2),H=U[0],q=U[1],K=Object(a.useState)(null),Y=Object(l.a)(K,2),X=Y[0],Z=Y[1],Q=Object(a.useState)(!1),ee=Object(l.a)(Q,2),te=ee[0],ae=ee[1],re=Object(a.useState)(!1),ie=Object(l.a)(re,2),oe=ie[0],le=ie[1],ce=Object(a.useState)(!1),se=Object(l.a)(ce,2),ue=se[0],me=se[1],de=Object(a.useState)(!1),pe=Object(l.a)(de,2),be=pe[0],fe=pe[1],ve=Object(a.useState)(null),ge=Object(l.a)(ve,2),ye=ge[0],he=ge[1],Oe=Object(a.useState)(null),Ee=Object(l.a)(Oe,2),je=Ee[0],xe=Ee[1],we=Object(a.useState)(!1),ke=Object(l.a)(we,2),Ce=ke[0],Ne=ke[1],Se=Ql(),Me=function(){fe(!1)};function Te(e){var n=function e(t){return t&&t.$parent&&"bpmn:Process"!==t.$parent.$type?e(t.$parent):t.$parent}(t&&t.businessObject);"bpmn:Process"===t.type&&(n=t.businessObject),"bpmn:Participant"===(t&&t.businessObject&&t.businessObject.$type)&&(n=t&&t.businessObject&&t.businessObject.processRef);var a={criteria:[{fieldName:"name",operator:"IN",value:[""]}]},r=n&&n.extensionElements;if(!r||!r.values)return a;var i=r.values.find((function(e){return"camunda:ProcessConfiguration"===e.$type})),o=[],l=[];if(!i&&!i.processConfigurationParameters)return a;i.processConfigurationParameters.forEach((function(e){e.metaModel?o.push(e.metaModel):e.metaJsonModel&&l.push(e.metaJsonModel)}));var c=[];return{criteria:[{fieldName:"name",operator:"IN",value:(c="metaModel"===e?[].concat(o):"metaJsonModel"===e?[].concat(l):[].concat(o,l))&&c.length>0?c:[""]}],operator:"or"}}var Pe=r.a.useCallback((function(e,n){var a=Object(P.getBusinessObject)(t);"bpmn:Participant"===(t&&t.type)&&(a=Object(P.getBusinessObject)(a.processRef));var r="camunda:".concat(e);a&&(a.$attrs?a.$attrs[r]=n:a.$attrs=Object(d.a)({},r,n),void 0===n&&delete a.$attrs[r])}),[t]),Fe=r.a.useCallback((function(e){var n="camunda:".concat(e),a=Object(P.getBusinessObject)(t);return Object(P.is)(t,"bpmn:Participant")&&(a=Object(P.getBusinessObject)(t).get("processRef")),a&&a.$attrs&&a.$attrs[n]||""}),[t]),_e=r.a.useCallback(function(){var e=Object(p.a)(m.a.mark((function e(t,n){var a;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,it("metaModel"===n?Object(c.a)(Object(c.a)({},t||{}),{},{type:"metaModel"}):Object(c.a)(Object(c.a)({},t||{}),{},{type:"metaJsonModel"}),[]);case 4:if(a=e.sent,Z(a),!a||1!==a.length&&0!==a.length){e.next=10;break}return ae(!1),Pe("defaultForm",a[0]&&a[0].name),e.abrupt("return");case 10:ae(!0);case 11:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),[Pe]),Re=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"name";if(!t)return Pe(e,void 0),Pe("".concat(e,"ModelName"),void 0),Pe("defaultForm",void 0),q(null),void ae(!1);Pe(e,t[n]),Pe("".concat(e,"ModelName"),t.fullName||t.name),_e(t,e)},Le=function(e,t,n){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"name";Re(e,t,a),t||Pe("".concat(e,"Label"),void 0),Pe("".concat(e,"Label"),n)},De=function(e){var t=[],n=[];if(Array.isArray(e)){if(e&&0===e.length)return Pe("displayOnModels",void 0),void Pe("displayOnModelLabels",void 0);e&&e.forEach((function(e){if(!e)return Pe("displayOnModels",void 0),void Pe("displayOnModelLabels",void 0);t.push(e.name),n.push(e.title)}))}t.length>0&&(Pe("displayOnModels",t.toString()),Pe("displayOnModelLabels",n.toString()))},Ie=r.a.useCallback((function(e){var t=Fe("".concat(e,"Label")),n=Fe(e);if(n){var a={name:n};return t&&(a.title=t),a}return null}),[Fe]);return Object(a.useEffect)((function(){var e=Ie("metaModel"),t=Ie("metaModelModelName"),n=Ie("metaJsonModel"),a=Fe("displayOnModels"),r=Fe("displayOnModelLabels"),i=Fe("displayStatus"),o=Fe("isCustom"),l=Ie("defaultForm");W(z(i)),Ne(void 0===o||""===o?!!n:z(o)),N(e),F(n),q(l);var s=e?"metaModel":"metaJsonModel",u=e?Object(c.a)(Object(c.a)({},e||{}),{},{fullName:t&&t.name}):Object(c.a)({},n||{});_e(u,s);var m=[];if(a){var d=a.split(","),p=r&&r.split(",");d&&d.forEach((function(e,t){m.push({name:e,title:p&&p[t]})})),D(m)}else D([])}),[Fe,Ie,_e]),Object(a.useEffect)((function(){var e=Fe("query")||!1,t=Fe("scriptValue");x(z(e)),le(!(!z(e)&&!t))}),[Fe]),Object(a.useEffect)((function(){Object(P.is)(t,"bpmn:ScriptTask")?Object(P.getBusinessObject)(t)?(f(!0),t.businessObject.scriptFormat="axelor"):f(!1):f(!1)}),[t]),b&&r.a.createElement("div",null,r.a.createElement(r.a.Fragment,null,n>0&&r.a.createElement("div",{className:Se.divider})),r.a.createElement("div",{className:Se.groupLabel},i),r.a.createElement(dn,{element:t,entry:{id:"query",label:J("Query"),modelProperty:"query",widget:"checkbox",get:function(){return{query:j}},set:function(e,n){var a=!n.query;t.businessObject.scriptFormat="axelor",a||(Re("metaModel",void 0),Re("metaJsonModel",void 0),Pe("defaultForm",void 0),Pe("displayStatus",void 0),Pe("displayOnModels",void 0)),Pe("query",a),x(a),!a&&Fe("scriptValue")?le(!0):le(a)}}}),r.a.createElement("div",{className:Se.expressionBuilder},r.a.createElement(en,{element:t,className:Se.textbox,rows:3,readOnly:!!oe,entry:{id:"script",label:J("Script"),modelProperty:"script",get:function(){var e=Object(P.getBusinessObject)(t);return{script:(e&&e.get("script")||"").replace(/[\u200B-\u200D\uFEFF]/g,"")}},set:function(e,n){t.businessObject&&(t.businessObject.script=n.script,t.businessObject.scriptFormat="axelor",t.businessObject.resource=void 0,Pe("scriptOperatorType",void 0),Pe("scriptValue",void 0))},validate:function(e,t){if(!t.script)return{script:"Must provide a value"}}}}),r.a.createElement("div",{className:Se.new},r.a.createElement(V.a,{title:"Enable","aria-label":"enable"},r.a.createElement(Ka.a,{className:Se.newIcon,onClick:function(){oe&&(xe("Script can't be managed using builder once changed manually."),he("Warning"),me(!0))}})),r.a.createElement(qa.a,{className:Se.newIcon,onClick:function(){j?(xe("Add all values"),fe(!1),h(!0)):(h(!1),fe(!0))}}),j?y&&r.a.createElement(Zr,{open:y,handleClose:function(){h(!1)},type:"bpmQuery",getExpression:function(){var e,t=Fe("scriptValue"),n=z(Fe("scriptOperatorType")||!1);if(void 0!==t)try{(e=JSON.parse(t)).length||(e=null)}catch(a){}return{values:e,combinator:n}},setProperty:function(e){var n=e.expression,a=e.value,r=e.combinator;if(t.businessObject.script=n,t.businessObject.scriptFormat="axelor",""===n||null===n||void 0===n)return Pe("scriptValue",void 0),void Pe("scriptOperatorType",void 0);a&&((a||"").replace(/[\u200B-\u200D\uFEFF]/g,""),Pe("scriptValue",a),le(!0)),Pe("scriptOperatorType",r)},element:t,title:"Add Query"}):be&&r.a.createElement(Zl,{open:be,handleClose:Me,bpmnModeler:o,element:t,onSave:function(e){!function(e){var n=e||{},a=n.resultField,r=n.resultMetaField;t.businessObject.script=a,t.businessObject.scriptFormat="axelor",Pe("scriptValue",a?r:void 0),Me()}(e),e&&e.resultField?le(!0):le(!1)},params:function(){return{resultField:t&&t.businessObject&&t.businessObject.script,resultMetaField:Fe("scriptValue")}}}),ue&&r.a.createElement(I.a,{open:ue,onClose:function(e,t){"backdropClick"!==t&&me(!1)},"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",classes:{paper:Se.dialog}},r.a.createElement(za.a,{id:"alert-dialog-title"},r.a.createElement("label",{className:Se.title},J(ye))),r.a.createElement(Ga.a,null,r.a.createElement(Ha.a,{id:"alert-dialog-description"},J(je))),r.a.createElement(Ua.a,null,r.a.createElement(In.a,{onClick:function(){me(!1),xe(null),he(null),le(!1),t.businessObject&&(Pe("scriptOperatorType",void 0),Pe("scriptValue",void 0))},color:"primary",className:Se.save,autoFocus:!0},"Ok"),r.a.createElement(In.a,{onClick:function(){me(!1)},color:"primary",className:Se.save},"Cancel"))))),r.a.createElement(an,{element:t,entry:{id:"scriptResultVariable",label:J("Result Variable"),modelProperty:"scriptResultVariable",get:function(){var e=Object(P.getBusinessObject)(t);return{scriptResultVariable:e&&e.get("camunda:resultVariable")}},set:function(e,n){t.businessObject&&(t.businessObject.resultVariable=n.scriptResultVariable||void 0)},validate:function(e,t){if(!t.scriptResultVariable&&j)return{scriptResultVariable:"Must provide a value"}}},canRemove:!0}),!j&&r.a.createElement(r.a.Fragment,null,r.a.createElement("label",{className:Se.label},J("Model")),r.a.createElement(dn,{className:Se.checkbox,entry:{id:"custom-model",modelProperty:"isCustom",label:J("Custom"),get:function(){return{isCustom:Ce}},set:function(e,t){var n=!t.isCustom;Ne(n),Pe("isCustom",n),F(void 0),Le("metaJsonModel",void 0),N(void 0),Le("metaModel",void 0)}},element:t}),Ce?r.a.createElement(ei,{className:ne()(Se.select,Se.metajsonModel),fetchMethod:function(){return jt(Te("metaJsonModel"))},update:function(e,t){F(e),Le("metaJsonModel",e,t)},name:"metaJsonModel",value:T,placeholder:J("Custom model"),isLabel:!1,optionLabel:"name",optionLabelSecondary:"title"}):r.a.createElement(ei,{className:Se.select,fetchMethod:function(){return Ot(Te("metaModel"))},update:function(e,t){N(e),Le("metaModel",e,t)},name:"metaModel",optionLabel:"name",optionLabelSecondary:"title",value:C,isLabel:!1,placeholder:J("Model")}),te&&r.a.createElement(r.a.Fragment,null,r.a.createElement("label",{className:Se.label},J("Default form")),r.a.createElement(ei,{className:Se.select,update:function(e,t){q(e),Pe("defaultForm",e?e.name:void 0),e||Pe("defaultFormLabel",void 0),Pe("defaultFormLabel",t)},options:X,name:"defaultForm",value:H,label:J("Default form"),isLabel:!1})),r.a.createElement("div",{className:Se.container},r.a.createElement(dn,{element:t,entry:{id:"displayStatus",label:J("Display status"),modelProperty:"displayStatus",get:function(){return{displayStatus:$}},set:function(e,t){var n=!t.displayStatus;W(n),Pe("defaultForm",t?t.name:void 0),Pe("displayStatus",n),!1===n&&(D([]),De([]))}}}),$&&r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:Se.allModels},r.a.createElement("label",{className:Se.label},J("Display on models")),r.a.createElement(ei,{className:Se.select,update:function(e){D(e),De(e)},fetchMethod:function(){return wt(Te())},name:"models",value:L||[],multiple:!0,isLabel:!1,optionLabel:"name",optionLabelSecondary:"title"}))))))}var tc=["bpmn:StartEvent","bpmn:IntermediateCatchEvent","bpmn:IntermediateThrowEvent","bpmn:EndEvent","bpmn:BoundaryEvent"];function nc(e){return Fa.a.getServiceTaskLikeBusinessObject(e)}var ac=[{name:J("latest"),value:"latest"},{name:J("deployment"),value:"deployment"},{name:J("version"),value:"version"},{name:J("versionTag"),value:"versionTag"}],rc=Object(F.a)((function(e){return{groupLabel:{fontWeight:"bolder",display:"inline-block",verticalAlign:"middle",color:"#666",fontSize:"120%",margin:"10px 0px",transition:"margin 0.218s linear",fontStyle:"italic"},groupContainer:{marginTop:10},divider:{marginTop:15,borderTop:"1px dotted #ccc"},linkIcon:{color:"#58B423",marginLeft:5},link:{cursor:"pointer"},dmn:{display:"flex",alignItems:"flex-end",justifyContent:"space-between"},dialogPaper:{padding:5,minWidth:450,overflow:"auto"},button:{margin:e.spacing(1),backgroundColor:"#0275d8",borderColor:"#0267bf",textTransform:"none",color:"white","&:hover":{backgroundColor:"#025aa5",borderColor:"#014682",color:"white"}},label:{fontWeight:"bolder",display:"inline-block",verticalAlign:"middle",color:"#666",margin:"3px 0px"},baml:{display:"flex",alignItems:"center",justifyContent:"space-between"},select:{width:"100%"}}})),ic=[{name:J("Java Class"),value:"class"},{name:J("Expression"),value:"expression"},{name:J("Delegate Expression"),value:"delegateExpression"},{name:J("DMN"),value:"dmn"},{name:J("External"),value:"external"}];function oc(e){var t=e.element,n=e.index,i=e.label,o=Object(a.useState)(!1),c=Object(l.a)(o,2),s=c[0],u=c[1],b=Object(a.useState)(""),f=Object(l.a)(b,2),v=f[0],g=f[1],y=Object(a.useState)("latest"),h=Object(l.a)(y,2),O=h[0],E=h[1],j=Object(a.useState)(null),x=Object(l.a)(j,2),w=x[0],k=x[1],C=Object(a.useState)(null),N=Object(l.a)(C,2),S=N[0],M=N[1],T=Object(a.useState)(!1),F=Object(l.a)(T,2),_=F[0],R=F[1],L=Object(a.useState)(!1),D=Object(l.a)(L,2),A=D[0],V=D[1],B=Object(a.useState)(!0),$=Object(l.a)(B,2),W=$[0],G=$[1],U=rc(),H=function(){R(!1)},q=function(e){var n=nc(t);return n&&n[e]},K=function(e,n){var a=nc(t);a&&(a[e]=n)},Y=r.a.useCallback((function(e,n){var a=nc(t);"bpmn:Participant"===(t&&t.type)&&(a=nc(a.processRef));var r="camunda:".concat(e);a&&(a.$attrs?a.$attrs[r]=n:a.$attrs=Object(d.a)({},r,n),void 0===n&&delete a.$attrs[r])}),[t]),X=r.a.useCallback((function(e){var n="camunda:".concat(e),a=nc(t);return"bpmn:Participant"===(t&&t.type)&&(a=nc(a.processRef)),a&&a.$attrs&&a.$attrs[n]||""}),[t]),Z=r.a.useCallback(function(){var e=Object(p.a)(m.a.mark((function e(n){var a,r,i;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Dt(n);case 2:if(a=e.sent,k(a),!n){e.next=10;break}return e.next=7,Wt([{fieldName:"decisionId",operator:"=",value:n}]);case 7:r=e.sent,i=r&&r[0]&&r[0].name,t&&t.businessObject&&i&&Y("decisionName",i);case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[t,Y]);return Object(a.useEffect)((function(){function e(){return(e=Object(p.a)(m.a.mark((function e(){var t,n,a;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=X("baml")||!1,n=X("bamlModelId"),V(z(t)),e.next=5,Bt([{fieldName:"id",operator:"=",value:n}]);case 5:(a=e.sent)&&a[0]&&M(a[0]);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[X]),Object(a.useEffect)((function(){var e=nc(t),n="script";e?(e.expression||""===e.expression?n="expression":e.class||""===e.class?n="class":e.delegateExpression||""===e.delegateExpression?n="delegateExpression":e.topic||""===e.topic?n="external":e.decisionRef?(n="dmn",E(e.decisionRefBinding)):n="",g(n)):g(n)}),[t,X]),Object(a.useEffect)((function(){if("dmn"===v){var e=nc(t);if(e&&e.decisionRef){var n=e.decisionRef;Z(n)}var a=X("compulsory");!a&&Object(P.is)(t,"bpmn:BusinessRuleTask")&&Y("compulsory",!0),G(!a||z(a))}}),[t,v,Z,Y,X]),Object(a.useEffect)((function(){if(function(e){return Fa.a.isServiceTaskLike(e)}(nc(t))){if(tc.includes(t&&t.type))return;if(Object(P.is)(t,"bpmn:SendTask"))nc(t)&&(t.businessObject.class="com.axelor.apps.bpm.listener.SendTaskExecution");u(!0)}else u(!1)}),[t]),s&&r.a.createElement("div",null,t&&"bpmn:SendTask"!==t.type&&r.a.createElement(r.a.Fragment,null,r.a.createElement(r.a.Fragment,null,n>0&&r.a.createElement("div",{className:U.divider})),r.a.createElement("div",{className:U.groupLabel},i)),t&&"bpmn:ServiceTask"===t.type&&r.a.createElement(dn,{element:t,entry:{id:"baml",label:J("BAML"),modelProperty:"baml",widget:"checkbox",get:function(){return{baml:A}},set:function(e,n){var a=!n.baml;a?(t.businessObject.class="com.axelor.apps.bpm.service.WkfBamlService",g("class")):(g(""),t.businessObject.class=void 0,Y("bamlModel",void 0),Y("bamlModelId",void 0)),Y("baml",a),V(a)}}}),A&&r.a.createElement(r.a.Fragment,null,r.a.createElement("label",{className:U.label},J("BAML model")),r.a.createElement("div",{className:U.baml},r.a.createElement(ei,{className:U.select,update:function(e){M(e),e?(Y("bamlModel",e&&e.name),Y("bamlModelId",e&&e.id)):(Y("bamlModel",void 0),Y("bamlModelId",void 0))},name:"bamlModel",isLabel:!1,value:S,fetchMethod:function(){return Bt()}}),S&&r.a.createElement("div",{onClick:function(){window.top.document.getElementsByTagName("iframe")[0].contentWindow.parent.axelor.$openHtmlTab("baml-editor/?id=".concat(S&&S.id),J("BAML editor"))},className:U.link},r.a.createElement(Ja.a,{className:U.linkIcon})))),(t&&"bpmn:ServiceTask"===t.type&&!A||t&&"bpmn:ServiceTask"!==t.type&&"bpmn:SendTask"!==t.type)&&r.a.createElement(r.a.Fragment,null,r.a.createElement(on,{element:t,entry:{id:"implementationType",label:"Implementation",modelProperty:"implementationType",selectOptions:function(){return Object(P.is)(t,"bpmn:BusinessRuleTask")?ic:ic.filter((function(e){return"dmn"!==e.value}))},emptyParameter:!0,get:function(){return{implementationType:v}},set:function(e,n){n&&(""===n.implementationType?(t.businessObject.delegateExpression=void 0,t.businessObject.class=void 0,t.businessObject.expression=void 0,t.businessObject.resultVariable=void 0,t.businessObject.topic=void 0,t.businessObject.taskPriority=void 0,t.businessObject.decisionRef=void 0,Y("decisionName",void 0)):"external"!==n.implementationType?t.businessObject[n.implementationType]="":t.businessObject.topic="","dmn"===n.implementationType&&K("mapDecisionResult","singleResult"),g(n.implementationType))}}}),"class"===v&&r.a.createElement(an,{element:t,entry:{id:"class",label:J("Java Class"),modelProperty:"class",get:function(){var e={},n=nc(t),a=n&&n.get("class");return e.class=a,e},set:function(e,t){var n=t.class;e.businessObject&&(e.businessObject.class=n,e.businessObject.expression=void 0,e.businessObject.resultVariable=void 0,e.businessObject.delegateExpression=void 0,e.businessObject.topic=void 0,e.businessObject.decisionRef=void 0,Y("decisionName",void 0))},validate:function(e,t){if(!t.class&&"class"===v)return{class:"Must provide a value"}}},canRemove:!0}),"expression"===v&&r.a.createElement(r.a.Fragment,null,r.a.createElement(an,{element:t,entry:{id:"expression",label:J("Expression"),modelProperty:"expression",get:function(){var e={},n=nc(t),a=n&&n.get("expression");return e.expression=a,e},set:function(e,t){var n=t.expression;e.businessObject&&(e.businessObject.expression=n,e.businessObject.class=void 0,e.businessObject.delegateExpression=void 0,e.businessObject.topic=void 0,e.businessObject.decisionRef=void 0,Y("decisionName",void 0))},validate:function(e,t){if(!t.expression&&"expression"===v)return{expression:"Must provide a value"}}},canRemove:!0}),r.a.createElement(an,{element:t,entry:{id:"resultVariable",label:J("Result Variable"),modelProperty:"resultVariable",get:function(){var e=nc(t);return{resultVariable:e&&e.get("camunda:resultVariable")}},set:function(e,n){t.businessObject&&(t.businessObject.resultVariable=n.resultVariable||void 0)}},canRemove:!0})),"delegateExpression"===v&&r.a.createElement(an,{element:t,entry:{id:"delegateExpression",label:J("Delegate Expression"),modelProperty:"delegateExpression",get:function(){var e={},n=nc(t),a=n&&n.get("delegateExpression");return e.delegateExpression=a,e},set:function(e,t){var n=t.delegateExpression;e.businessObject&&(e.businessObject.delegateExpression=n,e.businessObject.class=void 0,e.businessObject.expression=void 0,e.businessObject.resultVariable=void 0,e.businessObject.topic=void 0,e.businessObject.decisionRef=void 0,Y("decisionName",void 0))},validate:function(e,t){if(!t.delegateExpression&&"delegateExpression"===v)return{delegateExpression:"Must provide a value"}}},canRemove:!0}),"dmn"===v&&r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:U.dmn,style:{alignItems:t&&nc(t)&&nc(t).decisionRef?"flex-end":"center"}},r.a.createElement(an,{element:t,entry:{id:"decisionRef",label:J("Decision Ref"),modelProperty:"decisionRef",get:function(){var e=nc(t);return{decisionRef:e&&e.decisionRef}},set:function(e,n){var a=n.decisionRef;t.businessObject.decisionRef=a,t.businessObject.class=void 0,t.businessObject.expression=void 0,t.businessObject.resultVariable=void 0,t.businessObject.delegateExpression=void 0,t.businessObject.topic=void 0,Z(a)},validate:function(e,t){if(!t.decisionRef)return{decisionRef:"Must provide a value"}}},canRemove:!0}),r.a.createElement("div",{onClick:function(){R(!0)},className:U.link},r.a.createElement(sr.a,{className:U.linkIcon})),w&&t&&nc(t)&&nc(t).decisionRef&&r.a.createElement("div",{onClick:function(){window.top.document.getElementsByTagName("iframe")[0].contentWindow.parent.axelor.$openHtmlTab("wkf-editor/?type=dmn&id=".concat(w&&w.id),J("DMN editor"))},className:U.link},r.a.createElement(Ja.a,{className:U.linkIcon}))),r.a.createElement(an,{element:t,readOnly:!0,entry:{id:"decisionName",label:J("Decision Name"),modelProperty:"decisionName",get:function(){var e=nc(t);return{decisionName:e&&e.$attrs&&e.$attrs["camunda:decisionName"]}}}}),r.a.createElement(on,{element:t,entry:{id:"decisionRefBinding",label:"Binding",modelProperty:"decisionRefBinding",selectOptions:ac,emptyParameter:!0,get:function(){return{decisionRefBinding:O}},set:function(e,t){E(t.decisionRefBinding),K("decisionRefBinding",t.decisionRefBinding)}}}),"version"===O&&r.a.createElement(an,{element:t,entry:{id:"decisionRefVersion",label:J("Version"),modelProperty:"decisionRefVersion",get:function(){return{decisionRefVersion:q("decisionRefVersion")}},set:function(e,t){K("decisionRefVersion",t.decisionRefVersion),K("decisionRefVersionTag",void 0)},validate:function(e,t){if(!t.decisionRefVersion&&"version"===O)return{decisionRefVersion:"Must provide a value"}}},canRemove:!0}),"versionTag"===O&&r.a.createElement(an,{element:t,entry:{id:"decisionRefVersionTag",label:J("Version Tag"),modelProperty:"decisionRefVersionTag",get:function(){var e=nc(t);return{decisionRefVersionTag:e&&e.$attrs["camunda:decisionRefVersionTag"]}},set:function(e,n){nc(t).$attrs["camunda:decisionRefVersionTag"]=n.decisionRefVersionTag,K("decisionRefVersion",void 0)},validate:function(e,t){if(!t.decisionRefVersionTag&&"versionTag"===O)return{decisionRefVersionTag:"Must provide a value"}}},canRemove:!0}),r.a.createElement(an,{element:t,entry:{id:"decisionRefTenantId",label:J("Tenant id"),modelProperty:"decisionRefTenantId",get:function(){return{decisionRefTenantId:q("decisionRefTenantId")}},set:function(e,t){K("decisionRefTenantId",t.decisionRefTenantId)}},canRemove:!0}),r.a.createElement(an,{element:t,entry:{id:"resultVariable",label:J("Result Variable"),modelProperty:"resultVariable",get:function(){var e=nc(t);return{resultVariable:e&&e.resultVariable}},set:function(e,n){t.businessObject&&(t.businessObject.resultVariable=n.resultVariable||void 0)}},canRemove:!0}),r.a.createElement(dn,{element:t,entry:{id:"compulsory",label:J("Compulsory"),modelProperty:"compulsory",widget:"checkbox",get:function(){return{compulsory:W}},set:function(e,t){var n=!t.compulsory;G(n),Y("compulsory",n)}}})),"external"===v&&r.a.createElement(r.a.Fragment,null,r.a.createElement(an,{element:t,entry:{id:"topic",label:J("Topic"),modelProperty:"topic",get:function(){var e={},n=nc(t),a=n&&n.get("topic");return e.topic=a,e},set:function(e,t){var n=t.topic;e.businessObject&&(e.businessObject.topic=n,e.businessObject.class=void 0,e.businessObject.expression=void 0,e.businessObject.resultVariable=void 0,e.businessObject.delegateExpression=void 0,e.businessObject.decisionRef=void 0,Y("decisionName",void 0))},validate:function(e,t){if(!t.topic&&"external"===v)return{topic:"Must provide a value"}}},canRemove:!0}),r.a.createElement(r.a.Fragment,null,n>0&&r.a.createElement("div",{className:U.divider})),r.a.createElement("div",{className:U.groupLabel},J("External Task Configuration")),r.a.createElement(an,{element:t,entry:{id:"taskPriority",label:J("Task Priority"),modelProperty:"taskPriority",get:function(){var e={},n=nc(t),a=n&&n.get("taskPriority");return e.taskPriority=a,e},set:function(e,t){var n=t.taskPriority;e.businessObject&&(e.businessObject.taskPriority=n)}},canRemove:!0}))),_&&r.a.createElement(I.a,{open:_,onClose:function(e,t){"backdropClick"!==t&&H()},"aria-labelledby":"form-dialog-title",maxWidth:"sm",classes:{paper:U.dialogPaper}},r.a.createElement(za.a,{id:"form-dialog-title"},"Select DMN"),r.a.createElement(Ga.a,null,r.a.createElement("label",{className:U.label},J("DMN")),r.a.createElement(ei,{className:U.select,update:function(e){k(e)},name:"dmnModel",isLabel:!0,fetchMethod:function(){return Wt()}})),r.a.createElement(Ua.a,null,r.a.createElement(In.a,{onClick:H,className:U.button,color:"primary",variant:"outlined"},"Cancel"),r.a.createElement(In.a,{onClick:function(){w&&t&&t.businessObject&&(t.businessObject.decisionRef=w.decisionId,Y("decisionName",w.name)),H()},className:U.button,color:"primary",variant:"outlined"},"Ok"))))}var lc=Object(F.a)({groupLabel:{fontWeight:"bolder",display:"inline-block",verticalAlign:"middle",color:"#666",fontSize:"120%",margin:"10px 0px",transition:"margin 0.218s linear",fontStyle:"italic"},divider:{marginTop:15,borderTop:"1px dotted #ccc"}});function cc(e){var t=e.element,n=e.index,i=e.label,o=Object(a.useState)(!1),c=Object(l.a)(o,2),s=c[0],u=c[1],m=lc();return Object(a.useEffect)((function(){Object(P.is)(t,"camunda:Initiator")&&!Object(P.is)(t.parent,"bpmn:SubProcess")?u(!0):u(!1)}),[t]),s&&r.a.createElement("div",null,function(){if(t)return!Aa.a.getMessageEventDefinition(t)&&(!Aa.a.getTimerEventDefinition(t)&&(!Aa.a.getSignalEventDefinition(t)&&!Aa.a.getConditionalEventDefinition(t)))}()&&r.a.createElement(r.a.Fragment,null,r.a.createElement(r.a.Fragment,null,n>0&&r.a.createElement("div",{className:m.divider})),r.a.createElement("div",{className:m.groupLabel},i)),r.a.createElement(an,{element:t,entry:{id:"initiator",label:J("Initiator"),modelProperty:"initiator",get:function(){var e=Object(P.getBusinessObject)(t);return{initiator:e&&e.get("initiator")}},set:function(e,t){e.businessObject.initiator=t.initiator}},canRemove:!0}))}var sc=Object(F.a)((function(e){return{groupLabel:{fontWeight:"bolder",display:"inline-block",verticalAlign:"middle",color:"#666",fontSize:"120%",margin:"10px 0px",transition:"margin 0.218s linear",fontStyle:"italic"},divider:{marginTop:15,borderTop:"1px dotted #ccc"},editIcon:{color:"#58B423",marginLeft:5},edit:{cursor:"pointer",marginTop:18.6,display:"flex"},mapperBuilder:{display:"flex",alignItems:"center",justifyContent:"space-between"},textbox:{width:"100%"},save:{margin:e.spacing(1),backgroundColor:"#0275d8",borderColor:"#0267bf",textTransform:"none",color:"white","&:hover":{backgroundColor:"#025aa5",borderColor:"#014682",color:"white"}}}})),uc={class:J("Java Class"),expression:J("Expression"),delegateExpression:J("Delegate Expression"),script:J("Script")},mc=[{name:J("create"),value:"create"},{name:J("assignment"),value:"assignment"},{name:J("complete"),value:"complete"},{name:J("delete"),value:"delete"},{name:J("update"),value:"update"},{name:J("timeout"),value:"timeout"}],dc=[{value:"timeDate",name:J("Date")},{value:"timeDuration",name:J("Duration")},{value:"timeCycle",name:J("Cycle")}];function pc(e,t){return e&&C.a.getExtensionElements(e,t)||[]}function bc(e){if(e)return"undefined"!==typeof e.get("timeDate")?"timeDate":"undefined"!==typeof e.get("timeCycle")?"timeCycle":"undefined"!==typeof e.get("timeDuration")?"timeDuration":void 0}function fc(e,t,n){return"function"===typeof e?e(t,n):e}function vc(e){var t=e.element,n=e.index,i=e.label,o=e.bpmnFactory,c=e.bpmnModeler,s=Object(a.useState)(!1),u=Object(l.a)(s,2),m=u[0],d=u[1],p=Object(a.useState)(null),b=Object(l.a)(p,2),v=b[0],g=b[1],y=Object(a.useState)(null),h=Object(l.a)(y,2),O=h[0],E=h[1],j=Object(a.useState)(null),x=Object(l.a)(j,2),k=x[0],C=x[1],N=Object(a.useState)(""),S=Object(l.a)(N,2),M=S[0],T=S[1],F=Object(a.useState)(null),_=Object(l.a)(F,2),R=_[0],L=_[1],D=Object(a.useState)(null),A=Object(l.a)(D,2),B=A[0],$=A[1],W=Object(a.useState)(!1),z=Object(l.a)(W,2),G=z[0],U=z[1],H=Object(a.useState)(!1),q=Object(l.a)(H,2),K=q[0],Y=q[1],X=sc(),Z=Fa.a.isSequenceFlow(t),Q=function(){U(!1)},ee=function(e,t,n){return function(a,r,i){var l={event:n,script:void 0},c=w.a.createElement(t,l,r,o),s=Object(P.getBusinessObject)(e),u=s&&s.extensionElements;return u||(u=w.a.createElement("bpmn:ExtensionElements",{values:[]},s,o),e.businessObject.extensionElements=u),e.businessObject.extensionElements.values.push(c),c}},te=function(e){return function(n){var a,r=Object(P.getBusinessObject)(t),i=r&&r.extensionElements&&r.extensionElements.values;i&&i.forEach((function(t,i){t.$type===e&&(a>-1?a++:a=0),a!==Number(n)||r.extensionElements.values.splice(i,1)})),ce(t),i&&!i.find((function(t){return t.$type===e}))?"camunda:ExecutionListener"===e?g(null):E(null):(g(null),E(null))}},ne=r.a.useCallback((function(){var e=Object(P.getBusinessObject)(t);return Object(P.is)(t,"bpmn:Participant")&&(e=e&&e.get("processRef")),e}),[t]),ae=r.a.useCallback((function(){var e=0===v||v?"camunda:ExecutionListener":"camunda:TaskListener",t=pc(ne(),e);return t[0===v||v?v:O]||t&&t[0]}),[ne,v,O]),re=function(e){var t=ne();return function(n){var a=pc(t,e)[n],r=Fa.a.getImplementationType(a);return a?((a.get("event")?a.get("event"):"<empty>")||"*")+" : "+(uc[r]||"Script"):""}};function ie(e){if(e&&oe(e)){var t=e.get("eventDefinitions")||[],n=o.create("bpmn:TimerEventDefinition");return t.push(n),e.eventDefinitions=t,n}}function oe(e){return"timeout"===(e&&e.event)}var le=function(e){if(e&&oe(e)){var t=function(e){var t=e.eventDefinitions||[];return f()(t,(function(e){return Object(P.is)(e,"bpmn:TimerEventDefinition")}))}(e);return t||!1}};var ce=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=Object(P.getBusinessObject)(e),a=pc(n,"camunda:ExecutionListener"),r=a&&a.map((function(e,t){var n=Fa.a.getImplementationType(e);return{id:t,text:"".concat(e.event," : ").concat(uc[n]||"Script")}})),i=pc(n,"camunda:TaskListener"),o=i&&i.map((function(e,t){var n=Fa.a.getImplementationType(e);return{id:t,text:"".concat(e.event," : ").concat(uc[n]||"Script")}}));$(r),L(o),t&&(r.length>0?(g(r[0]),E(null)):o.length>0&&(g(null),E(o[0])))};return Object(a.useEffect)((function(){d(!Aa.a.getLinkEventDefinition(t)||!Object(P.is)(t,"bpmn:IntermediateThrowEvent")&&Aa.a.getLinkEventDefinition(t))}),[t]),Object(a.useEffect)((function(){ce(t,!0)}),[t]),m&&r.a.createElement("div",null,r.a.createElement(r.a.Fragment,null,n>0&&r.a.createElement("div",{className:X.divider})),r.a.createElement("div",{className:X.groupLabel},i),!!(Object(P.is)(t,"bpmn:FlowElement")||Object(P.is)(t,"bpmn:Process")||Object(P.is)(t,"bpmn:Participant"))&&!!ne()&&r.a.createElement(bn,{element:t,options:B,entry:{id:"executionListeners",label:J("Execution Listener"),modelProperty:"name",idGeneration:"false",reference:"processRef",createExtensionElement:ee(t,"camunda:ExecutionListener",Z?"take":"start"),removeExtensionElement:te("camunda:ExecutionListener"),onSelectionChange:function(e){g(e),E(null)},setOptionLabelValue:re("camunda:ExecutionListener")}}),Object(P.is)(t,"bpmn:UserTask")&&r.a.createElement(bn,{element:t,options:R,entry:{id:"taskListeners",label:J("Task Listener"),modelProperty:"name",idGeneration:"false",createExtensionElement:ee(t,"camunda:TaskListener","create"),removeExtensionElement:te("camunda:TaskListener"),onSelectionChange:function(e){E(e),g(null)},setOptionLabelValue:re("camunda:TaskListener")}}),(v||0===v||O||0===O)&&r.a.createElement(r.a.Fragment,null,r.a.createElement(on,{element:t,entry:{id:"listener-event-type",label:J("Event Type"),modelProperty:"eventType",emptyParameter:!1,selectOptions:function(){return v||0===v?Fa.a.isSequenceFlow(t)?[{name:J("take"),value:"take"}]:[{name:J("start"),value:"start"},{name:J("end"),value:"end"}]:mc},get:function(){var e=ae();if(e){var t=e&&e.get("event");return C(t),{eventType:t}}},set:function(e,t){var n=t.eventType;C(n);var a=ae();if(a){var r=a&&a.eventDefinitions;r&&"timeout"!==n&&(r=[]),a.event=n,a.eventDefinitions=r,ce(e)}}}}),(O||0===O)&&r.a.createElement(an,{element:t,canRemove:!0,entry:{id:"listener-id",label:J("Listener Id"),modelProperty:"listenerId",get:function(){var e=ae();if(e)return{listenerId:e.id}},set:function(e,t){var n=ae();n&&(n.id=t.listenerId)},validate:function(e,t){if(!t.listenerId&&"timeout"===k)return{listenerId:"Must provide a value for timeout task listener"}}}}),r.a.createElement("div",{className:X.mapperBuilder},r.a.createElement(en,{element:t,rows:3,className:X.textbox,readOnly:function(){return function(){var e=ae();return!!(e&&e.script&&e.script.scriptValue)}()},entry:{id:"script",label:J("Script"),modelProperty:"script",get:function(){var e=ae();if(e&&e.script)return{script:e.script.value}},set:function(e,t){var n=ae();n.script?(n.script.value=t.script,n.script.resource=void 0,n.script.scriptFormat="axelor"):n.script=n.script||w.a.createElement("camunda:Script",{scriptFormat:"axelor",value:t.script},ne(),o)},validate:function(e,t){if(!t.script)return{script:"Must provide a value"}}}}),(0===v||v)&&r.a.createElement("div",{className:X.edit},r.a.createElement(V.a,{title:"Enable","aria-label":"enable"},r.a.createElement(Ka.a,{className:X.editIcon,onClick:function(){var e=ae();e&&e.script&&e.script.scriptValue&&Y(!0)}})),r.a.createElement(qa.a,{className:X.editIcon,onClick:function(){U(!0)}}),G&&r.a.createElement(Zl,{open:G,handleClose:Q,element:t,bpmnModeler:c,onSave:function(e){!function(e){var t=ae();if(!e)return t.script.value=void 0,t.script.resource=void 0,t.script.scriptFormat=void 0,t.script.scriptValue=void 0,void Q();t.script?(t.script.value=e.resultField,t.script.resource=void 0,t.script.scriptFormat="axelor",t.script.scriptValue=e.resultMetaField):t.script=t.script||w.a.createElement("camunda:Script",{scriptFormat:"axelor",value:e.resultField,scriptValue:e.resultMetaField},ne(),o),Q()}(e)},params:function(){return function(){var e=ae();return e||e&&e.script?{resultField:e.script&&e.script.value,resultMetaField:e.script&&e.script.scriptValue}:{resultField:void 0,resultMetaField:void 0}}()}}),K&&r.a.createElement(I.a,{open:K,onClose:function(e,t){"backdropClick"!==t&&Y(!1)},"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",classes:{paper:X.dialog}},r.a.createElement(za.a,{id:"alert-dialog-title"},r.a.createElement("label",{className:X.title},J("Warning"))),r.a.createElement(Ga.a,null,r.a.createElement(Ha.a,{id:"alert-dialog-description"},J("Script can't be managed using builder once changed manually."))),r.a.createElement(Ua.a,null,r.a.createElement(In.a,{onClick:function(){Y(!1),ae().script.scriptValue=void 0},color:"primary",className:X.save,autoFocus:!0},"Ok"),r.a.createElement(In.a,{onClick:function(){Y(!1)},color:"primary",className:X.save},"Cancel"))))),"timeout"===k&&r.a.createElement(r.a.Fragment,null,r.a.createElement(on,{element:t,entry:{id:"listener-timer-event-definition-type",label:J("Timer Definition Type"),selectOptions:dc,emptyParameter:!0,modelProperty:"timerDefinitionType",get:function(e,t){var n=ae(),a=bc(fc(le(n),e,t))||"";return T(a),{timerDefinitionType:a}},set:function(e,t){T(t.timerDefinitionType);var n={timeDuration:void 0,timeDate:void 0,timeCycle:void 0},a=ae(),r=fc(le(a),e),i=t.timerDefinitionType;if(r||(r=ie(a)),t.timerDefinitionType){var c,s=bc(r);if(s)c=r.get(s).get("body");n[i]=function(e,t,n){return t=t||void 0,w.a.createElement("bpmn:FormalExpression",{body:t},e,n)}(r,c,o)}Object.entries(n).forEach((function(e){var t=Object(l.a)(e,2),n=t[0],a=t[1];r[n]=a})),a&&(a.eventDefinitions=[r])}}}),(M||""!==M)&&r.a.createElement(an,{element:t,canRemove:!0,entry:{id:"listener-timer-event-definition",label:J("Timer Definition"),modelProperty:"timerDefinition",get:function(e,t){var n=ae(),a=fc(le(n),e,t),r=bc(a),i=r&&a.get(r);return{timerDefinition:i&&i.get("body")}},set:function(e,t,n){var a=ae(),r=fc(le(a),e,n),i=bc(r),o=i&&r.get(i);o&&(o.body=t.timerDefinition||void 0),a&&(a.eventDefinitions=[r])},validate:function(e,t){if(!t.timerDefinition&&M)return{timerDefinition:"Must provide a value"}}}}))))}var gc=Object(F.a)({groupLabel:{fontWeight:"bolder",display:"inline-block",verticalAlign:"middle",color:"#666",fontSize:"120%",margin:"10px 0px",transition:"margin 0.218s linear",fontStyle:"italic"},divider:{marginTop:15,borderTop:"1px dotted #ccc"}}),yc=[{name:J("Source"),value:"source"},{name:J("Source Expression"),value:"sourceExpression"},{name:J("All"),value:"variables"}];function hc(e,t){var n=function(e,t){var n=Object(P.getBusinessObject)(e),a=Aa.a.getSignalEventDefinition(n);return C.a.getExtensionElements(a||n,t)||[]}(e,t);return gi()(n,(function(e){return!e.businessKey}))}function Oc(e){var t="source";if(e)return"all"===e.variables?t="variables":"undefined"!==typeof e.source?t="source":"undefined"!==typeof e.sourceExpression&&(t="sourceExpression"),t}function Ec(e,t){return e&&C.a.getExtensionElements(e,t)||[]}var jc=function(e,t){return function(n){var a=hc(t,e)[n],r=(a&&a.target||"<undefined>")+" := ",i=Oc(a);return"variables"===i?r="all":r+="source"===i?a.source||"<empty>":"sourceExpression"===i&&a.sourceExpression||"<empty>",r}};function xc(e){var t=Oc(e),n=(e.target||"<undefined>")+" := ";return"variables"===t?n="all":n+="source"===t?e.source||"<empty>":"sourceExpression"===t&&e.sourceExpression||"<empty>",n}function wc(e){var t=e.element,n=e.index,i=e.label,o=e.bpmnFactory,c=Object(a.useState)(!1),s=Object(l.a)(c,2),u=s[0],m=s[1],p=Object(a.useState)(null),b=Object(l.a)(p,2),f=b[0],v=b[1],g=Object(a.useState)(null),y=Object(l.a)(g,2),h=y[0],O=y[1],E=Object(a.useState)(null),j=Object(l.a)(E,2),x=j[0],k=j[1],C=Object(a.useState)("source"),N=Object(l.a)(C,2),S=N[0],M=N[1],F=Object(a.useState)(null),_=Object(l.a)(F,2),R=_[0],L=_[1],D=Object(a.useState)(null),I=Object(l.a)(D,2),A=I[0],V=I[1],B=gc(),$=function(e){return function(n,a,r){var i=w.a.createElement(e,{source:""},a,o),l=f||Object(P.getBusinessObject)(t),c=l&&l.extensionElements;return c||(c=w.a.createElement("bpmn:ExtensionElements",{values:[]},l,o),l.extensionElements=c),l.extensionElements.values.push(i),i}},W=function(e){return function(n){var a,r=f||Object(P.getBusinessObject)(t),i=r.extensionElements&&r.extensionElements.values;i.forEach((function(t,i){t.$type===e&&(a>-1?a++:a=0),a!==Number(n)||r.extensionElements.values.splice(i,1)})),z(t),i&&!i.find((function(t){return t.$type===e}))?"camunda:In"===e?O(null):k(null):(O(null),k(null))}},z=r.a.useCallback((function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=f||Object(P.getBusinessObject)(e),a=Ec(n,"camunda:In"),r=a&&a.map((function(e,t){return{id:t,text:xc(e)}})),i=Ec(n,"camunda:Out"),o=i&&i.map((function(e,t){return{id:t,text:xc(e)}}));L(r),V(o),t&&(r.length>0?(O(r[0]),k(null)):o.length>0&&(O(null),k(o[0])))}),[f]),G=r.a.useCallback((function(){var e=h?"camunda:In":"camunda:Out",n=Ec(f||Object(P.getBusinessObject)(t),e);return n[h||x]||n&&n[0]}),[h,x,t,f]);return Object(a.useEffect)((function(){z(t,!0)}),[t,z]),Object(a.useEffect)((function(){var e=Aa.a.getSignalEventDefinition(t);v(e),Object(P.is)(t,"camunda:CallActivity")&&!e?m(!0):m(!1),e&&Object(T.isAny)(t,["bpmn:IntermediateThrowEvent","bpmn:EndEvent"])?m(!0):m(!1)}),[t]),u&&r.a.createElement("div",null,r.a.createElement(r.a.Fragment,null,n>0&&r.a.createElement("div",{className:B.divider})),r.a.createElement("div",{className:B.groupLabel},i),r.a.createElement(bn,{element:t,options:R,entry:{id:"variableMapping-in",label:J("In Mapping"),modelProperty:"source",prefix:"In",createExtensionElement:$("camunda:In"),removeExtensionElement:W("camunda:In"),getExtensionElements:function(e){return hc(e,"camunda:In")},onSelectionChange:function(e){O(e),k(null)},setOptionLabelValue:jc("camunda:In",t)}}),!f&&r.a.createElement(bn,{element:t,options:A,entry:{id:"variableMapping-out",label:J("Out Mapping"),modelProperty:"source",prefix:"Out",createExtensionElement:$("camunda:Out"),removeExtensionElement:W("camunda:Out"),getExtensionElements:function(){return hc(t,"camunda:Out")},onSelectionChange:function(e){O(null),k(e)},setOptionLabelValue:jc("camunda:Out",t)}}),(h||x||0===h||0===x)&&r.a.createElement(r.a.Fragment,null,r.a.createElement(on,{element:t,entry:{id:"variableMapping-inOutType",label:J("Type"),selectOptions:yc,modelProperty:"inOutType",widget:"selectBox",get:function(){var e=G();if(e){var t=Oc(e);return M(t),{inOutType:t}}},set:function(e,t){var n=t.inOutType;M(n);var a={source:void 0,sourceExpression:void 0,variables:void 0};"source"===n?a.source="":"sourceExpression"===n?a.sourceExpression="":"variables"===n&&(a.variables="all",a.target=void 0);var r=G();r&&(Object.entries(a).forEach((function(e){var t=Object(l.a)(e,2),n=t[0],a=t[1];r[n]=a})),z(e))}}}),["source","sourceExpression"].includes(S)&&r.a.createElement(r.a.Fragment,null,r.a.createElement(an,{element:t,canRemove:!0,entry:{id:"variableMapping-source",modelProperty:"source"===S?"source":"sourceExpression",label:"source"===S?"Source":"Source Expression",get:function(){var e=G();if(e){var t=Oc(e);return Object(d.a)({},t,e[t])}},set:function(e,t){var n=G();if(n){var a={};a[Oc(n)]=t["source"===S?"source":"sourceExpression"]||void 0,Object.entries(a).forEach((function(e){var t=Object(l.a)(e,2),a=t[0],r=t[1];n[a]=r})),z(e)}},validate:function(e,t){if("source"===S?!t.source:!t.sourceExpression)return Object(d.a)({},"source"===S?"source":"sourceExpression","Mapping must have a ".concat("source"===S?"source":"source expression"))}}}),r.a.createElement(an,{element:t,canRemove:!0,entry:{id:"variableMapping-target",label:J("Target"),modelProperty:"target",widget:"textField",get:function(){var e=G();if(e)return{target:e.target}},set:function(e,n){n.target=n.target||void 0;var a=G();a&&(a.target=n.target,z(t))},validate:function(e,t){if(!t.target)return{target:"Mapping must have a target"}}}})),r.a.createElement(dn,{entry:{id:"variableMapping-local",label:J("Local"),modelProperty:"local",get:function(){var e=G();if(e)return{local:e.local}},set:function(e,t){t.local=t.local||!1;var n=G();n&&(n.local=t.local)}},element:t})))}var kc=n(414),Cc=n.n(kc),Nc=Object(F.a)((function(e){return{groupLabel:{fontWeight:"bolder",display:"inline-block",verticalAlign:"middle",color:"#666",fontSize:"120%",margin:"10px 0px",transition:"margin 0.218s linear",fontStyle:"italic"},divider:{marginTop:15,borderTop:"1px dotted #ccc"},typography:{display:"flex",alignItems:"center",color:"#CC3333"},icon:{marginRight:10},newIcon:{color:"#58B423",cursor:"pointer"},save:{margin:e.spacing(1),backgroundColor:"#0275d8",borderColor:"#0267bf",textTransform:"none",color:"white","&:hover":{backgroundColor:"#025aa5",borderColor:"#014682",color:"white"}},dialog:{maxWidth:"100%"},dialogContent:{display:"flex",alignItems:"flex-end"},MuiAutocompleteRoot:{width:"250px",marginRight:"10px"}}}));function Sc(e,t){var n=Tc(e);return n&&n.get(t)}function Mc(e){return e&&e.get("body")}function Tc(e){var t=Object(P.getBusinessObject)(e);return t&&t.loopCharacteristics}function Pc(e){return Mc(function(e){return Sc(e,"loopCardinality")}(e))}function Fc(e){return Mc(function(e){return Sc(e,"completionCondition")}(e))}function _c(e){return Sc(e,"camunda:collection")}function Rc(e){return Sc(e,"camunda:elementVariable")}function Lc(e,t,n,a){var r=Tc(e);if(n){var i=r.get(t);i?i.body=n:r[t]=function(e,t,n){return w.a.createElement("bpmn:FormalExpression",{body:t},e,n)}(r,n,a)}else r[t]=void 0}function Dc(e){if(e)return e.charAt(0).toLowerCase()+e.slice(1)}function Ic(e){var t=function e(t){return t&&t.$parent&&"bpmn:Process"!==t.$parent.$type?e(t.$parent):t.$parent}(e&&e.businessObject),n=t&&t.extensionElements,a={criteria:[{fieldName:"name",operator:"IN",value:[""]}]};if(!n||!n.values)return a;var r=n.values.find((function(e){return"camunda:ProcessConfiguration"===e.$type})),i=[],o=[],l=[];return r||r.processConfigurationParameters?(r.processConfigurationParameters.forEach((function(e){e.metaModel?(i.push(e.metaModel),l.push({fullName:e.metaModelFullName,name:e.metaModel,type:"metaModel",title:e.metaModelLabel&&e.metaModelLabel.substring(e.metaModelLabel.lastIndexOf("(")+1,e.metaModelLabel.lastIndexOf(")"))})):e.metaJsonModel&&(o.push(e.metaJsonModel),l.push({name:e.metaJsonModel,type:"metaJsonModel",title:e.metaJsonModelLabel&&e.metaJsonModelLabel.substring(e.metaJsonModelLabel.lastIndexOf("(")+1,e.metaJsonModelLabel.lastIndexOf(")"))}))})),{value:[].concat(i,o),modelList:l}):a}function Ac(e){var t=e.element,n=e.bpmnFactory,i=e.label,o=e.index,c=Object(a.useState)(!1),u=Object(l.a)(c,2),m=u[0],d=u[1],p=Object(a.useState)(null),b=Object(l.a)(p,2),f=b[0],v=b[1],g=Object(a.useState)(null),y=Object(l.a)(g,2),h=y[0],O=y[1],E=Object(a.useState)(!1),j=Object(l.a)(E,2),x=j[0],w=j[1],k=Object(a.useState)(null),C=Object(l.a)(k,2),N=C[0],S=C[1],M=Object(a.useState)(null),T=Object(l.a)(M,2),F=T[0],_=T[1],R=Object(a.useState)(null),L=Object(l.a)(R,2),D=L[0],A=L[1],V=Object(a.useState)(!1),B=Object(l.a)(V,2),$=B[0],W=B[1],z=Object(a.useState)(null),G=Object(l.a)(z,2),U=G[0],H=G[1],q=Object(a.useState)(null),K=Object(l.a)(q,2),Y=K[0],X=K[1],Z=Nc(),Q=r.a.useCallback((function(){if(h){var e=h.substring(h.lastIndexOf("(")+1,h.lastIndexOf(")")),n=e&&e.split(".");_(Object(s.a)(n||[]).splice(1,n&&n.length-1).join("."));var a=(Ic(t)||{}).modelList;if(n&&a){var r=a.find((function(e){return Dc(e.name)===n[0]}));S(r)}}}),[h,t]);return Object(a.useEffect)((function(){!function(e){var t=Tc(e);return!!t&&Object(P.is)(t,"camunda:Collectable")}(t)?d(!1):d(!0)}),[t]),Object(a.useEffect)((function(){Q()}),[Q]),m&&r.a.createElement("div",null,r.a.createElement(r.a.Fragment,null,o>0&&r.a.createElement("div",{className:Z.divider})),r.a.createElement("div",{className:Z.groupLabel},i),!h&&!f&&r.a.createElement(ee.a,{className:Z.typography},r.a.createElement(Cc.a,{fontSize:"small",className:Z.icon}),"Must provide either loop cardinality or collection"),r.a.createElement(an,{element:t,entry:{id:"multiInstance-loopCardinality",label:J("Loop Cardinality"),modelProperty:"loopCardinality",get:function(){var e=Pc(t);return v(e),{loopCardinality:e}},set:function(e,a){return v(a.loopCardinality),Lc(t,"loopCardinality",a.loopCardinality,n)}},canRemove:!0}),r.a.createElement("div",{style:{display:"flex",alignItems:"flex-end"}},r.a.createElement(an,{element:t,entry:{id:"multiInstance-collection",label:J("Collection"),modelProperty:"collection",get:function(){var e=_c(t);return O(e),{collection:e}},set:function(e,n){var a=Tc(t);a&&(O(n.collection),a.collection=n.collection,a["camunda:collection"]=n.collection||void 0,n.collection&&""!==n.collection||(S(null),_(null)))},validate:function(e){var t=_c(e),n=Rc(e);if(!t&&n)return{collection:"Must provide a value"}}},canRemove:!0}),r.a.createElement(qa.a,{className:Z.newIcon,onClick:function(){return w(!0)}})),x&&r.a.createElement(I.a,{open:x,onClose:function(e,t){"backdropClick"!==t&&w(!1)},"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",classes:{paper:Z.dialog}},r.a.createElement(za.a,{id:"alert-dialog-title"},"Collection"),r.a.createElement(Ga.a,{className:Z.dialogContent},r.a.createElement(ja,{name:"model",title:"Model",placeholder:"Model",fetchAPI:function(){return Ye(function(e){var t=Ic(e).value;return{criteria:[{fieldName:"name",operator:"IN",value:t&&t.length>0?t:[""]}],operator:"or"}}(t))},onChange:function(e){S(e)},optionLabelKey:"name",value:N,classes:{root:Z.MuiAutocompleteRoot}}),N&&r.a.createElement(wa,{getMetaFields:function(){return dt(N?{fullName:N.fullName,name:N.name,type:N.type}:void 0)},isCollection:!0,onChange:function(e,t){_(e),A(t)},value:{fieldName:F},isParent:!0})),r.a.createElement(Ua.a,null,r.a.createElement(In.a,{onClick:function(){if(D&&!["ONE_TO_MANY","MANY_TO_MANY"].includes(D.type))return W(!0),void H("Last subfield should be many to many or one to many field");var e="".concat("${getIdList(").concat(Dc(N.name)).concat(F?".".concat(F):"",")}");O(e);var n=Tc(t);n&&(n.collection=e,n["camunda:collection"]=e||void 0,w(!1))},color:"primary",autoFocus:!0,className:Z.save},"OK"),r.a.createElement(In.a,{onClick:function(){w(!1),Q()},color:"primary",className:Z.save},"Cancel"))),$&&r.a.createElement(I.a,{open:$,onClose:function(e,t){"backdropClick"!==t&&W(!1)},"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",classes:{paper:Z.dialog}},r.a.createElement(za.a,{id:"alert-dialog-title"},J(Y)),r.a.createElement(Ga.a,null,r.a.createElement(Ha.a,{id:"alert-dialog-description"},J(U))),r.a.createElement(Ua.a,null,r.a.createElement(In.a,{className:Z.save,onClick:function(){W(!1),H(null),X(null)},color:"primary",autoFocus:!0},"Ok"),r.a.createElement(In.a,{onClick:function(){return W(!1)},color:"primary",className:Z.save},"Cancel"))),r.a.createElement(an,{element:t,entry:{id:"multiInstance-elementVariable",label:J("Element Variable"),modelProperty:"elementVariable",get:function(e){return{elementVariable:Rc(e)}},set:function(e,n){var a=Tc(t);a&&(a.elementVariable=n.elementVariable||void 0)}},canRemove:!0}),r.a.createElement(an,{element:t,entry:{id:"multiInstance-completionCondition",label:J("Completion Condition"),modelProperty:"completionCondition",get:function(e){return{completionCondition:Fc(e)}},set:function(e,t){return Lc(e,"completionCondition",t.completionCondition,n)}},canRemove:!0}))}var Vc=Object(F.a)((function(e){return{groupLabel:{fontWeight:"bolder",display:"inline-block",verticalAlign:"middle",color:"#666",fontSize:"120%",margin:"10px 0px",transition:"margin 0.218s linear",fontStyle:"italic"},divider:{marginTop:15,borderTop:"1px dotted #ccc"},expressionBuilder:{display:"flex",alignItems:"flex-end",justifyContent:"space-between"},newIcon:{color:"#58B423",marginLeft:5},new:{cursor:"pointer",display:"flex"},dialog:{minWidth:300},label:{fontWeight:"bolder",display:"inline-block",verticalAlign:"middle",color:"#666",margin:"3px 0px"},allButtons:{paddingBottom:10},select:{margin:0},save:{margin:e.spacing(1),backgroundColor:"#0275d8",borderColor:"#0267bf",textTransform:"none",color:"white","&:hover":{backgroundColor:"#025aa5",borderColor:"#014682",color:"white"}}}}));function Bc(e){var t=e.element,n=e.index,i=e.label,o=e.bpmnModeler,c=Object(a.useState)(!1),s=Object(l.a)(c,2),u=s[0],m=s[1],p=Object(a.useState)(!1),b=Object(l.a)(p,2),f=b[0],v=b[1],g=Object(a.useState)(!1),y=Object(l.a)(g,2),h=y[0],O=y[1],E=Object(a.useState)(null),j=Object(l.a)(E,2),x=j[0],w=j[1],k=Object(a.useState)(null),C=Object(l.a)(k,2),N=C[0],S=C[1],M=Object(a.useState)(null),T=Object(l.a)(M,2),F=T[0],_=T[1],R=Object(a.useState)(!1),L=Object(l.a)(R,2),D=L[0],A=L[1],B=Vc(),$=r.a.useCallback((function(e){var n=Object(P.getBusinessObject)(t);return n&&n.$attrs&&n.$attrs[e]||""}),[t]);function W(){var e=$("camunda:metaModel"),n=$("camunda:metaModelModelName"),a=$("camunda:metaJsonModel");if(e)return[{model:e,type:"metaModel",modelFullName:n}];if(a)return[{model:a,type:"metaJsonModel"}];var r=function e(t){return t&&t.$parent&&"bpmn:Process"!==t.$parent.$type?e(t.$parent):t.$parent}(t&&t.businessObject);"bpmn:Process"===t.type&&(r=t.businessObject),"bpmn:Participant"===(t&&t.businessObject&&t.businessObject.$type)&&(r=t&&t.businessObject&&t.businessObject.processRef);var i=r&&r.extensionElements;if(!i||!i.values)return[];var o=i.values.find((function(e){return"camunda:ProcessConfiguration"===e.$type})),l=[];return o||o.processConfigurationParameters?(o.processConfigurationParameters.forEach((function(e){e.metaModel?l.push({model:e.metaModel,type:"metaModel",modelFullName:e.model}):e.metaJsonModel&&l.push({model:e.metaJsonModel,type:"metaJsonModel"})})),l):[]}var z=function(e,n){var a=Object(P.getBusinessObject)(t);if(a)if(a.$attrs){if(!n)return void delete a.$attrs[e];a.$attrs[e]=n}else{if(!n)return;a.$attrs=Object(d.a)({},e,n)}};return Object(a.useEffect)((function(){Object(P.is)(t,"bpmn:UserTask")?m(!0):m(!1)}),[t]),Object(a.useEffect)((function(){var e=$("camunda:buttons"),t=$("camunda:buttonLabels"),n=$("camunda:completedIfValue");A(!!n);var a=[];if(e){var r=e&&e.split(","),i=t&&t.split(",");r&&r.forEach((function(e,t){a.push({name:e,title:i&&i[t]})})),w(a)}else w([])}),[$]),u&&r.a.createElement("div",null,r.a.createElement(r.a.Fragment,null,n>0&&r.a.createElement("div",{className:B.divider})),r.a.createElement("div",{className:B.groupLabel},i),r.a.createElement("div",{className:B.expressionBuilder},r.a.createElement(an,{element:t,readOnly:D,entry:{id:"completedIf",label:J("Completed If"),modelProperty:"completedIf",get:function(){var e=$("camunda:completedIf");return{completedIf:e=(e||"").replace(/[\u200B-\u200D\uFEFF]/g,"")}},set:function(e,t){var n=$("camunda:completedIf"),a=t.completedIf;(a||"").replace(/[\u200B-\u200D\uFEFF]/g,""),z("camunda:completedIf",a),q(n)!==q(a)&&(z("camunda:completedIfValue",void 0),z("camunda:completedIfCombinator",void 0))}},canRemove:!0}),r.a.createElement("div",{className:B.new},r.a.createElement(V.a,{title:"Enable","aria-label":"enable"},r.a.createElement(Ka.a,{className:B.newIcon,onClick:function(){D&&(_("Completed If can't be managed using builder once changed manually."),S("Warning"),O(!0))}})),r.a.createElement(qa.a,{className:B.newIcon,onClick:function(){v(!0)}}),f&&r.a.createElement(Zr,{bpmnModeler:o,open:f,handleClose:function(){v(!1)},getExpression:function(){var e,t=$("camunda:completedIfValue"),n=$("camunda:completedIfCombinator");if(void 0!==t)try{e=JSON.parse(t)}catch(a){}return{values:e,combinator:n}},setProperty:function(e){var t=e.expression,n=e.value,a=e.combinator;z("camunda:completedIf",t),n&&(z("camunda:completedIfValue",n),A(!0)),a&&z("camunda:completedIfCombinator",a)},element:t,title:"Add Expression"})),h&&r.a.createElement(I.a,{open:h,onClose:function(e,t){"backdropClick"!==t&&O(!1)},"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",classes:{paper:B.dialog}},r.a.createElement(za.a,{id:"alert-dialog-title"},J(N)),r.a.createElement(Ga.a,null,r.a.createElement(Ha.a,{id:"alert-dialog-description"},J(F))),r.a.createElement(Ua.a,null,r.a.createElement(In.a,{onClick:function(){O(!1),_(null),S(null),A(!1),z("camunda:completedIfValue",void 0),z("camunda:completedIfCombinator",void 0)},color:"primary",autoFocus:!0,className:B.save},"Ok"),r.a.createElement(In.a,{className:B.save,onClick:function(){O(!1)},color:"primary"},"Cancel")))),r.a.createElement("div",{className:B.allButtons},r.a.createElement("label",{className:B.label},J("Buttons")),r.a.createElement(ei,{className:B.select,update:function(e){w(e),function(e){var t=[],n=[];if(Array.isArray(e)){if(e&&0===e.length)return z("camunda:buttons",void 0),void z("camunda:buttonLabels",void 0);e&&e.forEach((function(e){if(!e)return z("camunda:buttons",void 0),void z("camunda:buttonLabels",void 0);t.push(e.name),n.push(e.title)}))}t.length>0&&(z("camunda:buttonLabels",n.toString()),z("camunda:buttons",t.toString()))}(e)},fetchMethod:function(){return qt(W())},name:"buttons",value:x||[],multiple:!0,isLabel:!1})))}var $c=["bpmn:EventBasedGateway","bpmn:ExclusiveGateway","bpmn:InclusiveGateway","bpmn:ComplexGateway","bpmn:ParallelGateway","bpmn:SequenceFlow","label","bpmn:IntermediateThrowEvent","bpmn:Collaboration","bpmn:Lane","bpmn:TextAnnotation","bpmn:MessageFlow","bpmn:ServiceTask","bpmn:ScriptTask"],Wc=["bpmn:Process","bpmn:Participant","bpmn:Group","bpmn:SubProcess","bpmn:AdHocSubProcess","bpmn:Transaction","bpmn:Task","bpmn:TextAnnotation"],Jc=["bpmn:EndEvent","bpmn:IntermediateCatchEvent"].concat(Object(s.a)(Te));var zc=Object(F.a)({root:{display:"flex",flexDirection:"column"},groupLabel:{fontWeight:"bolder",display:"inline-block",verticalAlign:"middle",color:"#666",fontSize:"120%",margin:"10px 0px",transition:"margin 0.218s linear",fontStyle:"italic"},divider:{marginTop:15,borderTop:"1px dotted #ccc"},label:{fontWeight:"bolder",display:"inline-block",verticalAlign:"middle",color:"#666",margin:"3px 0px"},select:{margin:0},metajsonModel:{marginTop:10},allModels:{paddingBottom:10}});function Gc(e){var t=e.element,n=e.index,i=e.label,o=e.handleMenuActionTab,u=Object(a.useState)(!1),b=Object(l.a)(u,2),f=b[0],v=b[1],g=Object(a.useState)(null),y=Object(l.a)(g,2),h=y[0],O=y[1],E=Object(a.useState)(null),j=Object(l.a)(E,2),x=j[0],w=j[1],k=Object(a.useState)([]),C=Object(l.a)(k,2),N=C[0],S=C[1],M=Object(a.useState)(!0),F=Object(l.a)(M,2),_=F[0],R=F[1],L=Object(a.useState)(null),D=Object(l.a)(L,2),I=D[0],A=D[1],V=Object(a.useState)(null),B=Object(l.a)(V,2),$=B[0],W=B[1],G=Object(a.useState)(!1),U=Object(l.a)(G,2),H=U[0],q=U[1],K=Object(a.useState)(!1),Y=Object(l.a)(K,2),X=Y[0],Z=Y[1],Q=Object(a.useState)(!1),ee=Object(l.a)(Q,2),te=ee[0],ae=ee[1],re=zc(),ie=t.businessObject&&t.businessObject.eventDefinitions&&t.businessObject.eventDefinitions[0]&&t.businessObject.eventDefinitions[0].$type;function oe(e){var n=function e(t){return t&&t.$parent&&"bpmn:Process"!==t.$parent.$type?e(t.$parent):t&&t.$parent}(t&&t.businessObject);"bpmn:Process"===t.type&&(n=t.businessObject),"bpmn:Participant"===(t&&t.businessObject&&t.businessObject.$type)&&(n=t&&t.businessObject&&t.businessObject.processRef);var a={criteria:[{fieldName:"name",operator:"IN",value:[""]}]},r=n&&n.extensionElements;if(!r||!r.values)return a;var i=r.values.find((function(e){return"camunda:ProcessConfiguration"===e.$type})),o=[],l=[];if(!i&&!i.processConfigurationParameters)return a;i.processConfigurationParameters.forEach((function(e){e.metaModel?o.push(e.metaModel):e.metaJsonModel&&l.push(e.metaJsonModel)}));var c=[];return{criteria:[{fieldName:"name",operator:"IN",value:(c="metaModel"===e?[].concat(o):"metaJsonModel"===e?[].concat(l):[].concat(o,l))&&c.length>0?c:[""]}],operator:"or"}}var le=r.a.useCallback((function(e,n){var a=Object(P.getBusinessObject)(t);"bpmn:Participant"===(t&&t.type)&&(a=Object(P.getBusinessObject)(a&&a.processRef));var r="camunda:".concat(e);a&&(a.$attrs?a.$attrs[r]=n:a.$attrs=Object(d.a)({},r,n),void 0===n&&delete a.$attrs[r])}),[t]),ce=r.a.useCallback((function(e){var n="camunda:".concat(e),a=Object(P.getBusinessObject)(t);return Object(P.is)(t,"bpmn:Participant")&&(a=Object(P.getBusinessObject)(t).get("processRef")),a&&a.$attrs&&a.$attrs[n]||""}),[t]),se=function(e,n){if(t&&Te.includes(t.type)){if(e)return void o(!1);if(ce(n))return void o(!1);o(!0)}},ue=r.a.useCallback(function(){var e=Object(p.a)(m.a.mark((function e(t,n){var a;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,it("metaModel"===n?Object(c.a)(Object(c.a)({},t||{}),{},{type:"metaModel"}):Object(c.a)(Object(c.a)({},t||{}),{},{type:"metaJsonModel"}),[]);case 4:if(a=e.sent,W(a),!a||1!==a.length&&0!==a.length){e.next=10;break}return q(!1),le("defaultForm",a[0]&&a[0].name),e.abrupt("return");case 10:q(!0);case 11:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),[le]),me=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"name";if(!t)return le(e,void 0),le("".concat(e,"ModelName"),void 0),le("defaultForm",void 0),A(null),void q(!1);le(e,t[n]),le("".concat(e,"ModelName"),t.fullName||t.name),ue(t,e)},de=function(e,t,n){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"name";me(e,t,a),t||le("".concat(e,"Label"),void 0),le("".concat(e,"Label"),n)},pe=function(e){var t=[],n=[];if(Array.isArray(e)){if(e&&0===e.length)return le("displayOnModels",void 0),void le("displayOnModelLabels",void 0);e&&e.forEach((function(e){if(!e)return le("displayOnModels",void 0),void le("displayOnModelLabels",void 0);t.push(e.name),n.push(e.title)}))}t.length>0&&(le("displayOnModels",t.toString()),le("displayOnModelLabels",n.toString()))},be=r.a.useCallback((function(e){var t=ce("".concat(e,"Label")),n=ce(e);if(n){var a={name:n};return t&&(a.title=t),a}return null}),[ce]);return Object(a.useEffect)((function(){!function(e){return Object(T.isAny)(e,$c)}(t)?v(!0):v(!1)}),[t]),Object(a.useEffect)((function(){if(t){var e=ce("createUserAction"),n=ce("emailNotification"),a=ce("newMenu"),r=ce("newUserMenu");Te.includes(t.type)&&(z(e)||z(n)||z(a)||z(r))?Z(!0):Z(!1)}}),[ce,t]),Object(a.useEffect)((function(){var e=be("metaModel"),t=be("metaModelModelName"),n=be("metaJsonModel"),a=ce("displayOnModels"),r=ce("displayOnModelLabels"),i=ce("displayStatus"),o=be("defaultForm"),l=ce("isCustom");ae(void 0===l||""===l?!!n:z(l)),R(z(i)),O(e),w(n),A(o);var s=e?"metaModel":"metaJsonModel",u=e?Object(c.a)(Object(c.a)({},e||{}),{},{fullName:t&&t.name}):Object(c.a)({},n||{});ue(u,s);var m=[];if(a){var d=a.split(","),p=r&&r.split(",");d&&d.forEach((function(e,t){m.push({name:e,title:p&&p[t]})})),S(m)}else S([])}),[ce,be,ue]),f&&r.a.createElement("div",{className:re.root},(Wc.includes(t.type)||"bpmn:TerminateEventDefinition"===ie||"bpmn:EndEvent"===t.type&&!ie)&&r.a.createElement(r.a.Fragment,null,r.a.createElement(r.a.Fragment,null,n>0&&r.a.createElement("div",{className:re.divider})),r.a.createElement("div",{className:re.groupLabel},i)),!["bpmn:Process","bpmn:Participant","bpmn:SendTask"].concat(Object(s.a)(Ne)).includes(t&&t.type)&&r.a.createElement(r.a.Fragment,null,r.a.createElement("label",{className:re.label},J("Model")),r.a.createElement(dn,{className:re.checkbox,entry:{id:"custom-model",modelProperty:"isCustom",label:J("Custom"),get:function(){return{isCustom:te}},set:function(e,t){var n=!t.isCustom;ae(n),le("isCustom",n),w(void 0),de("metaJsonModel",void 0),O(void 0),de("metaModel",void 0)}},element:t}),te?r.a.createElement(ei,{className:ne()(re.select,re.metajsonModel),fetchMethod:function(){return jt(oe("metaJsonModel"))},update:function(e,t){w(e),de("metaJsonModel",e,t),se(e,"metaModel")},disabled:X,name:"metaJsonModel",value:x,placeholder:J("Custom model"),isLabel:!1,optionLabel:"name",optionLabelSecondary:"title"}):r.a.createElement(ei,{className:re.select,fetchMethod:function(){return Ot(oe("metaModel"))},update:function(e,t){O(e),de("metaModel",e,t),se(e,"metaJsonModel")},name:"metaModel",value:h,isLabel:!1,disabled:X,placeholder:J("Model"),optionLabel:"name",optionLabelSecondary:"title"}),H&&r.a.createElement(r.a.Fragment,null,r.a.createElement("label",{className:re.label},J("Default form")),r.a.createElement(ei,{className:re.select,update:function(e,t){A(e),le("defaultForm",e?e.name:void 0),e||le("defaultFormLabel",void 0),le("defaultFormLabel",t)},options:$,name:"defaultForm",value:I,label:J("Default form"),isLabel:!1}))),r.a.createElement("div",{className:re.container},!Ne.includes(t&&t.type)&&r.a.createElement(dn,{element:t,entry:{id:"displayStatus",label:J("Display status"),modelProperty:"displayStatus",get:function(){return{displayStatus:_}},set:function(e,t){var n=!t.displayStatus;R(n),le("displayStatus",n),!1===n&&(S([]),pe([]))}}}),_&&!Ne.includes(t&&t.type)&&r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:re.allModels},r.a.createElement("label",{className:re.label},J("Display on models")),r.a.createElement(ei,{className:re.select,update:function(e){S(e),pe(e)},fetchMethod:function(){return wt(oe())},name:"models",value:N||[],multiple:!0,isLabel:!1,optionLabel:"name",optionLabelSecondary:"title"})))),Jc.includes(t&&t.type)&&r.a.createElement(en,{element:t,className:re.textbox,rows:3,entry:{id:"help",label:J("Help"),modelProperty:"help",get:function(){return{help:ce("help")||""}},set:function(e,n){t.businessObject&&le("help",n.help?""===n.help?void 0:n.help:void 0)}}}))}var Uc=n(838),Hc=n(839),qc=n(841),Kc=n(840),Yc=n(82).default,Xc={model:null,view:null,roles:[],items:[]},Zc={itemName:null,attributeName:null,attributeValue:null};function Qc(){return new Yc([32,32,1]).nextPrefixed("viewAttributes_")}function es(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return{id:Qc(),values:Object(s.a)(e)}}var ts=Object(F.a)({button:{textTransform:"none"},addButton:{borderRadius:0,marginLeft:5,padding:0,height:23,border:"1px solid #ccc",color:"#727272",width:"fit-content","&:hover":{border:"1px solid #727272"}},grid:{padding:"0px 5px 0px 0px"},card:{margin:"5px 0px 10px 0px",boxShadow:"none",width:"100%",border:"1px solid #ccc",background:"#f8f8f8",borderRadius:0},cardContent:{padding:"10px !important"},cardContainer:{display:"flex",alignItems:"flex-start"},tableCell:{padding:"6px !important",width:"33%"},tableHead:{padding:"6px !important",fontWeight:"bolder",color:"#666",margin:"3px 0px"},attributes:{fontWeight:"bolder",color:"#666",margin:"3px 0px"},iconButton:{margin:"5px 0px 5px 5px",borderRadius:0,border:"1px solid #ccc",padding:2,width:"fit-content"},label:{fontWeight:"bolder",display:"inline-block",verticalAlign:"middle",color:"#666",margin:"3px 0px"},typography:{display:"flex",alignItems:"center",color:"#CC3333",marginTop:10},icon:{marginRight:10},textFieldRoot:{marginTop:0},textFieldLabel:{marginBottom:0},icons:{display:"flex",flexDirection:"column"},checkbox:{marginTop:0,justifyContent:"center"}});function ns(e){var t=e.handleAdd,n=e.element,i=ts(),o=Object(a.useState)(null),u=Object(l.a)(o,2),m=u[0],p=u[1],b=function(e,t,n,a,r){var i,o=Object(c.a)({},m),l=o.values;l[a]=Object(c.a)(Object(c.a)({},l[a]||{}),{},(i={},Object(d.a)(i,t,e&&e[n]||e),Object(d.a)(i,"".concat(t,"Error"),!1),Object(d.a)(i,"".concat(t,"Label"),r),i)),p(Object(c.a)({},o)),y()},f=function(e,t,n){var a=Object(c.a)({},m),r=a.values,i=a.values[e].items;i[t]=Object(c.a)(Object(c.a)({},i[t]||[]),{},Object(d.a)({},"".concat(n,"Error"),!0)),r[e]=Object(c.a)(Object(c.a)({},r[e]||{}),{},{items:i}),p(Object(c.a)({},a))},v=function(e,t,n,a,r,i){var o,l=Object(c.a)({},m),s=l.values,u=l.values[a].items;u[r]=Object(c.a)(Object(c.a)({},u[r]||[]),{},(o={},Object(d.a)(o,t,e&&(e[n]||e)),Object(d.a)(o,"".concat(t,"Error"),!1),Object(d.a)(o,"".concat(t,"Label"),i),o)),"attributeName"===t&&(["readonly","hidden","required","active"].includes(e)?u[r].attributeValue||(u[r].attributeValue="false"):u[r].attributeValue=null),s[a]=Object(c.a)(Object(c.a)({},s[a]||{}),{},{items:u}),p(Object(c.a)({},l)),y()};function g(){var e=function e(t){return t&&t.$parent&&"bpmn:Process"!==t.$parent.$type?e(t.$parent):t.$parent}(n&&n.businessObject),t=e&&e.extensionElements,a={criteria:[{fieldName:"name",operator:"IN",value:[""]}]};if(!t||!t.values)return a;var r=t.values.find((function(e){return"camunda:ProcessConfiguration"===e.$type})),i=[],o=[];if(!r&&!r.processConfigurationParameters)return a;r.processConfigurationParameters.forEach((function(e){e.metaModel?i.push(e.metaModel):e.metaJsonModel&&o.push(e.metaJsonModel)}));var l=[].concat(i,o);return{criteria:[{fieldName:"name",operator:"IN",value:l&&l.length>0?l:[""]}],operator:"or"}}var y=function(){var e,a,r=Object(P.getBusinessObject)(n),i=r&&r.extensionElements;if(i&&i.values&&(e=(a=i.values.find((function(e){return"camunda:Properties"===e.$type})))&&a.values),e){var o=e.filter((function(e){return!["model","modelName","modelType","modelLabel","view","viewLabel","item","roles","readonly","readonlyIf","hidden","hideIf","required","requiredIf","title","domain","itemLabel","active","permanent"].includes(e.name)}));a&&(a.values=Object(s.a)(o))}m.values&&m.values.length>0&&m.values&&m.values.forEach((function(e,t){var n=e.model,a=e.items,r=void 0===a?[]:a;n||function(e,t){var n=Object(c.a)({},m),a=n.values;a[e]=Object(c.a)(Object(c.a)({},a[e]||{}),{},Object(d.a)({},"".concat(t,"Error"),!0)),p(Object(c.a)({},n))}(t,"model"),r.length>0&&r.forEach((function(e,n){var a=e.itemName,r=e.attributeName,i=e.attributeValue;a||f(t,n,"itemName"),r||f(t,n,"attributeName"),i||["readonly","hidden","required"].includes(r)||f(t,n,"attributeValue")}))})),t(m)};function h(e,t){return e&&e.reduce((function(e,n){return n.name===t&&e.push([]),e[e.length-1]&&e[e.length-1].push(n),e}),[])}return Object(a.useEffect)((function(){if(n){var e,t,a=Object(P.getBusinessObject)(n),r=a&&a.extensionElements;if(r){if(r&&r.values&&(e=(t=r.values.find((function(e){return"camunda:Properties"===e.$type})))&&t.values),!(e&&e.length<1)){var i=h(e,"model"),o=[];i&&i.forEach((function(e){var t={items:[]},n=h(e,"item");e.forEach((function(e){if("model"===e.name&&(t.model={model:e.value,fullName:e.value}),"modelName"===e.name&&(t.model=Object(c.a)(Object(c.a)({},t.model),{},{name:e.value})),"modelType"===e.name&&(t.model=Object(c.a)(Object(c.a)({},t.model),{},{type:e.value})),"modelLabel"===e.name&&(t.modelLabel=e.value,t.model=Object(c.a)(Object(c.a)({},t.model),{},{title:e.value})),"view"===e.name&&(t.view={name:e.value}),"viewLabel"===e.name&&(t.viewLabel=e.value,t.view=Object(c.a)(Object(c.a)({},t.view),{},{title:e.value})),"roles"===e.name){if(!e.value)return;var n=e.value.split(","),a=[];n.forEach((function(e){a.push({name:e})})),t.roles=a}})),n&&n.forEach((function(e){var n=e.find((function(e){return"item"===e.name})),a=e.find((function(e){return"itemLabel"===e.name})),r=e.find((function(e){return["readonly","readonlyIf","hidden","hideIf","required","requiredIf","title","domain","active"].includes(e.name)})),i=e.find((function(e){return"permanent"===e.name}));t.items.push({itemName:{name:n&&n.value,label:a&&a.value},itemNameLabel:a&&a.value,attributeName:r&&r.name,attributeValue:r&&r.value,permanent:i&&i.value})})),o.push(t)})),p(es(o))}}else p(es([]))}}),[n]),r.a.createElement("div",null,m&&r.a.createElement("div",null,r.a.createElement("div",null,m.values&&m.values.map((function(e,t){return e&&r.a.createElement("div",{key:"card_".concat(t),className:i.cardContainer},r.a.createElement(Uc.a,{className:i.card},r.a.createElement(Hc.a,{className:i.cardContent},r.a.createElement(A.a,null,r.a.createElement(A.a,{container:!0},r.a.createElement(A.a,{item:!0,xs:6,className:i.grid},r.a.createElement("label",{className:i.label},J("Model")),r.a.createElement(ei,{fetchMethod:function(){return Ye(g())},update:function(e,n){return b(e,"model",void 0,t,n)},optionLabel:"name",optionLabelSecondary:"title",name:"model",validate:function(e){if(!e.model)return{model:"Must provide a value"}},value:e.model,isLabel:!1})),r.a.createElement(A.a,{item:!0,xs:6,style:{justifyContent:"flex-end"},className:i.grid},e.model&&r.a.createElement("div",null,r.a.createElement("label",{className:i.label},J("View")),r.a.createElement(ei,{fetchMethod:function(t){return it(e.model,t)},update:function(e,n){b(e,"view",void 0,t,n)},name:"view",value:e.view||"",isLabel:!1})))),(e.model||e.view)&&r.a.createElement("div",null,r.a.createElement("label",{className:i.label},J("Roles")),r.a.createElement(ei,{fetchMethod:function(e){return function(e){return bt.apply(this,arguments)}(e)},update:function(e){return b(e,"roles",void 0,t)},name:"roles",value:e.roles||[],multiple:!0,isLabel:!1})),e.model&&e.items&&0===e.items.length&&r.a.createElement(ee.a,{className:i.typography},r.a.createElement(Kc.a,{fontSize:"small",className:i.icon}),"Must provide attributes"),r.a.createElement(A.a,{container:!0,alignItems:"center"},r.a.createElement(A.a,{item:!0,xs:6},r.a.createElement(ee.a,{className:i.attributes},"Attributes")),r.a.createElement(A.a,{item:!0,xs:6,style:{textAlign:"right"}},r.a.createElement(In.a,{className:i.button,onClick:function(){return function(e){var t=Object(c.a)({},m),n=t.values;n[e]=Object(c.a)(Object(c.a)({},n[e]||{}),{},{items:[Object(c.a)({id:"item_".concat(t.id,"_").concat(e)},Zc)].concat(Object(s.a)(n[e].items||[]))}),p(Object(c.a)({},t)),y()}(t)},disabled:!e.model,startIcon:r.a.createElement(vn.a,null)},"New"))),r.a.createElement(A.a,null,e&&e.items&&e.items.length>0&&r.a.createElement(qc.a,null,r.a.createElement(Lo.a,{size:"small","aria-label":"a dense table"},r.a.createElement(Ao.a,null,r.a.createElement(Vo.a,null,r.a.createElement(Io.a,{className:i.tableHead,align:"center"},"Item"),r.a.createElement(Io.a,{className:i.tableHead,align:"center"},"Name"),r.a.createElement(Io.a,{className:i.tableHead,align:"center"},"Value"),r.a.createElement(Io.a,{className:i.tableHead,align:"center"},"Permanent"),r.a.createElement(Io.a,{className:i.tableHead,align:"center"}))),r.a.createElement(Do.a,null,(e.model||e.view)&&e.items&&e.items.map((function(a,o){return r.a.createElement(Vo.a,{key:"item_".concat(e.id,"_").concat(o)},r.a.createElement(Io.a,{component:"th",scope:"row",align:"center",className:i.tableCell},r.a.createElement(ei,{isLabel:!1,fetchMethod:function(t){return function(e,t,n){return lt.apply(this,arguments)}(e.view&&e.view.name,e.model,t)},update:function(e,n){return v(e,"itemName",void 0,t,o,n)},validate:function(e){if(!e.itemName||!e.itemName.name&&!e.itemName.label)return{itemName:"Must provide a value"}},name:"itemName",value:a.itemName,label:"Item"})),r.a.createElement(Io.a,{align:"center",className:i.tableCell},r.a.createElement(ei,{isLabel:!1,options:a&&a.itemName&&a.itemName.type&&a.itemName.type.includes("panel")?["readonly","readonlyIf","hidden","hideIf","title","active"]:a&&a.itemName&&a.itemName.type&&"button"===a.itemName.type?["readonly","readonlyIf","hidden","hideIf","title"]:a&&a.itemName&&"self"===a.itemName.name?["readonly","readonlyIf"]:["readonly","readonlyIf","hidden","hideIf","required","requiredIf","title","domain"],update:function(e){return v(e,"attributeName",void 0,t,o)},name:"attributeName",validate:function(e){if(!e.attributeName)return{attributeName:"Must provide a value"}},value:a.attributeName,label:"Attribute"})),r.a.createElement(Io.a,{align:"center",className:i.tableCell},a.attributeName&&["readonly","hidden","required","active"].includes(a.attributeName)&&r.a.createElement(ei,{isLabel:!1,options:["true","false"],update:function(e){v(e,"attributeValue",void 0,t,o)},name:"attributeValue",value:a.attributeValue||"false",label:"Attribute value"}),a.attributeName&&["readonlyIf","hideIf","requiredIf","title","domain"].includes(a.attributeName)&&r.a.createElement(an,{element:n,canRemove:!0,rootClass:i.textFieldRoot,labelClass:i.textFieldLabel,entry:{id:"attributeValue",name:"attributeValue",placeholder:"".concat(a.attributeName," value"),modelProperty:"attributeValue",get:function(){return{attributeValue:a.attributeValue}},set:function(e,n){v(n.attributeValue,"attributeValue",void 0,t,o)},validate:function(e,t){if(!t.attributeValue)return{attributeValue:"Must provide a value"}}}})),r.a.createElement(Io.a,{align:"center",className:i.tableCell},r.a.createElement(dn,{className:i.checkbox,entry:{id:"permanent-model-".concat(o),modelProperty:"permanent",get:function(){return{permanent:z(a.permanent)}},set:function(e,n){v(!n.permanent,"permanent",void 0,t,o)}},element:n})),r.a.createElement(Io.a,{align:"center",className:i.tableCell},r.a.createElement(fn.a,{className:i.iconButton,onClick:function(){return function(e,t){var n=Object(c.a)({},m),a=n.values,r=n.values[e].items;r.splice(t,1),a[e]=Object(c.a)(Object(c.a)({},a[e]||{}),{},{items:r}),p(Object(c.a)({},n)),y()}(t,o)}},r.a.createElement(tn.a,{fontSize:"small"}))))}))))))))),r.a.createElement(fn.a,{className:i.iconButton,onClick:function(){return function(e){var t=Object(c.a)({},m);t.values.splice(e,1),p(Object(c.a)({},t)),y()}(t)}},r.a.createElement(tn.a,{fontSize:"small"})))})))),r.a.createElement("div",{className:i.icons},r.a.createElement(fn.a,{className:i.iconButton,onClick:function(){p(Object(c.a)(Object(c.a)({},m||{}),{},{values:[].concat(Object(s.a)(m&&(m.values||[])||[]),[Object(c.a)({},Xc)])}))}},r.a.createElement(vn.a,{fontSize:"small"}))))}var as=Object(F.a)((function(e){return{main:{display:"flex",flexDirection:"column"},container:{marginTop:10},label:{fontWeight:"bolder",display:"inline-block",verticalAlign:"middle",color:"#666",margin:"3px 0px"},select:{margin:0},lastChild:{marginBottom:10},icon:{marginRight:10},newIcon:{color:"#58B423",cursor:"pointer"},save:{margin:e.spacing(1),backgroundColor:"#0275d8",borderColor:"#0267bf",color:"white",textTransform:"none","&:hover":{backgroundColor:"#025aa5",borderColor:"#014682",color:"white"}},dialogContent:{display:"flex",alignItems:"flex-end"}}}));function rs(e){var t=Object(P.getBusinessObject)(e),n=t&&t.extensionElements;return n&&n.values?n.values.find((function(e){return"camunda:ContextMap"===e.$type})):null}function is(e,t,n,a){return ls(e,t,n,a)}var os=function(e,t,n,a,r){var i=Object(P.getBusinessObject)(n);a||(a=w.a.createElement("bpmn:ExtensionElements",{values:[]},i,r),n.businessObject.extensionElements=a);var o=rs(n);if(!o){var l=is(t,o=function(e,t,n){return ls("camunda:ContextMap",e,t,n)}(n.businessObject.extensionElements,r,{contextMapParameters:[],contextUserMapParameters:[]}),r,{});l.contextDefinition=function(e){return ls(e,i,r,{entries:[]})}("camunda:Map"),o[e]=[l],n.businessObject.extensionElements.values.push(o)}};function ls(e,t,n,a){return w.a.createElement(e,a,t,n)}function cs(e){var t=e.element,n=e.bpmnFactory,i=Object(a.useState)(!1),o=Object(l.a)(i,2),s=o[0],u=o[1],b=Object(a.useState)(null),f=Object(l.a)(b,2),v=f[0],g=f[1],y=Object(a.useState)(!1),h=Object(l.a)(y,2),O=h[0],E=h[1],j=Object(a.useState)(!1),x=Object(l.a)(j,2),w=x[0],k=x[1],C=Object(a.useState)(!1),N=Object(l.a)(C,2),S=N[0],M=N[1],T=Object(a.useState)(null),F=Object(l.a)(T,2),_=F[0],R=F[1],L=Object(a.useState)(null),D=Object(l.a)(L,2),A=D[0],V=D[1],B=Object(a.useState)(null),$=Object(l.a)(B,2),W=$[0],G=$[1],U=Object(a.useState)(null),H=Object(l.a)(U,2),q=H[0],K=H[1],Y=Object(a.useState)(null),X=Object(l.a)(Y,2),Z=X[0],Q=X[1],ee=Object(a.useState)(null),te=Object(l.a)(ee,2),ae=te[0],re=te[1],ie=Object(a.useState)(null),oe=Object(l.a)(ie,2),le=oe[0],ce=oe[1],se=Object(a.useState)(null),ue=Object(l.a)(se,2),me=ue[0],de=ue[1],pe=Object(a.useState)(null),be=Object(l.a)(pe,2),fe=be[0],ve=be[1],ge=Object(a.useState)(null),ye=Object(l.a)(ge,2),he=ye[0],Oe=ye[1],Ee=Object(a.useState)(null),je=Object(l.a)(Ee,2),xe=je[0],we=je[1],ke=Object(a.useState)([]),Ce=Object(l.a)(ke,2),Ne=Ce[0],Se=Ce[1],Me=Object(a.useState)([]),Pe=Object(l.a)(Me,2),Fe=Pe[0],_e=Pe[1],Re=Object(a.useState)([]),Le=Object(l.a)(Re,2),De=Le[0],Ie=Le[1],Ae=Object(a.useState)(!1),Ve=Object(l.a)(Ae,2),Be=Ve[0],$e=Ve[1],We=Object(a.useState)(!1),Je=Object(l.a)(We,2),ze=Je[0],Ge=Je[1],Ue=Object(a.useState)(!1),He=Object(l.a)(Ue,2),qe=He[0],Ke=He[1],Ye=Object(a.useState)(!1),Xe=Object(l.a)(Ye,2),Ze=Xe[0],Qe=Xe[1],et=Object(a.useState)(null),tt=Object(l.a)(et,2),nt=tt[0],at=tt[1],rt=Object(a.useState)(null),ot=Object(l.a)(rt,2),lt=ot[0],ct=ot[1],st=Object(a.useState)(null),ut=Object(l.a)(st,2),mt=ut[0],pt=ut[1],bt=Object(a.useState)(null),vt=Object(l.a)(bt,2),gt=vt[0],yt=vt[1],ht=Object(a.useState)(null),Ot=Object(l.a)(ht,2),Et=Ot[0],jt=Ot[1],xt=Object(a.useState)(null),wt=Object(l.a)(xt,2),kt=wt[0],Nt=wt[1],Mt=Object(a.useState)(!1),Tt=Object(l.a)(Mt,2),Pt=Tt[0],Ft=Tt[1],_t=Object(a.useState)(null),Rt=Object(l.a)(_t,2),Lt=Rt[0],Dt=Rt[1],It=Object(a.useState)(!1),At=Object(l.a)(It,2),Vt=At[0],Bt=At[1],$t=Object(a.useState)("Last sub field must be user field"),Wt=Object(l.a)($t,2),Jt=Wt[0],zt=Wt[1],Gt=Object(a.useState)(!1),Ut=Object(l.a)(Gt,2),Ht=Ut[0],qt=Ut[1],Kt=Object(a.useState)(null),Yt=Object(l.a)(Kt,2),Xt=Yt[0],Zt=Yt[1],Qt=Object(a.useState)(null),en=Object(l.a)(Qt,2),tn=en[0],nn=en[1],rn=as(),on=function(e){var n=rs(t);return n&&n[e]&&n[e][0]&&n[e][0].contextDefinition&&n[e][0].contextDefinition.entries},ln=function(e,n){var a=Object(P.getBusinessObject)(t),r="camunda:".concat(e);a&&(a.$attrs?a.$attrs[r]=n:a.$attrs=Object(d.a)({},r,n),n||delete a.$attrs[r])},cn=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"name";ln(e,t?t[n]:void 0)},sn=function(e,t,n){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"name";cn(e,t,a),ln("".concat(e,"Label"),t?n:void 0)},un=r.a.useCallback((function(e){var n="camunda:".concat(e),a=Object(P.getBusinessObject)(t);return a.$attrs&&a.$attrs[n]||""}),[t]),mn=r.a.useCallback((function(e){var t=un("".concat(e,"Label")),n=un("".concat(e,"ModelName")),a=un(e);if(a){var r={name:a};return t&&(r.title=t),n&&(r.fullName=n),r}return null}),[un]),pn=r.a.useCallback((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=Object(P.getBusinessObject)(t);e.forEach((function(e){delete n.$attrs["camunda:".concat(e)]}))}),[t]),bn=function(e){var t=on(e);return t||[]},fn=function(e,t,n,a){var r=on(a);r&&(r[n][t]=e)},vn=function(e,a,r){var i=Object(P.getBusinessObject)(t),o=i&&i.extensionElements;if(o&&o.values){var l=o.values.find((function(e){return"camunda:ContextMap"===e.$type}));if(l){if(!l[a]||0===l[a].length){var c=is(r,l,n,{});c.contextDefinition=ls("camunda:Map",i,n,{entries:[]}),l[a]=[c]}}else os(a,r,t,i.extensionElements,n)}else os(a,r,t,i.extensionElements,n);var s=function(e,t,n){return ls("camunda:Entry",e.businessObject.contextDefinition,n,t)}(t,e,n),u=on(a);u&&u.push(s)},gn=function(e,n,a){var r=on(a),i=on(n);if(i&&!(e<0)){if(i.splice(e,1),0===i.length)rs(t)[n]=[];if(0===i.length&&r&&0===r.length){var o=Object(P.getBusinessObject)(t),l=o.extensionElements;if(!l||!l.values)return null;var c=l.values.findIndex((function(e){return"camunda:ContextMap"===e.$type}));if(c<0)return;l&&l.values&&(l.values.splice(c,1),0===l.values.length&&(o.extensionElements=void 0))}}};function hn(){var e=function e(t){return t&&t.$parent&&"bpmn:Process"!==t.$parent.$type?e(t.$parent):t.$parent}(t&&t.businessObject);"bpmn:Process"===t.type&&(e=t.businessObject),"bpmn:Participant"===(t&&t.businessObject&&t.businessObject.$type)&&(e=t&&t.businessObject&&t.businessObject.processRef);var n={criteria:[{fieldName:"metaModel.name",operator:"IN",value:[""]},{fieldName:"metaJsonModel.name",operator:"IN",value:[""]}]},a=e&&e.extensionElements;if(!a||!a.values)return n;var r=a.values.find((function(e){return"camunda:ProcessConfiguration"===e.$type})),i=[],o=[];if(!r&&!r.processConfigurationParameters)return n;r.processConfigurationParameters.forEach((function(e){e.metaModel?i.push(e.metaModel):e.metaJsonModel&&o.push(e.metaJsonModel)}));var l=[];return i.length>0&&l.push({fieldName:"metaModel.name",operator:"IN",value:i}),o.length>0&&l.push({fieldName:"metaJsonModel.name",operator:"IN",value:o}),{criteria:l,operator:"or"}}return Object(a.useEffect)((function(){function e(){return(e=Object(p.a)(m.a.mark((function e(){var t;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!w&&!S){e.next=5;break}return e.next=3,Ct();case 3:t=e.sent,Ie(t);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[S,w]),Object(a.useEffect)((function(){function e(){return(e=Object(p.a)(m.a.mark((function e(){var t;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!S||!fe){e.next=5;break}return e.next=3,St(fe);case 3:t=e.sent,Se(t);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[fe,S]),Object(a.useEffect)((function(){function e(){return(e=Object(p.a)(m.a.mark((function e(){var t;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!w||!Z){e.next=5;break}return e.next=3,St(Z);case 3:t=e.sent,_e(t);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[Z,w]),Object(a.useEffect)((function(){var e=un("createUserAction"),t=un("actionEmailTitle"),n=un("emailNotification"),a=un("newMenu"),r=un("menuName"),i=mn("menuParent"),o=mn("position"),l=mn("positionMenu"),c=un("newUserMenu"),s=un("userMenuName"),m=mn("userParentMenu"),d=mn("userMenuPosition"),p=mn("userPositionMenu"),b=un("deadlineFieldPath"),f=un("tagCount"),v=un("userTagCount"),y=mn("formView"),h=mn("gridView"),O=mn("userFormView"),j=mn("userGridView"),x=mn("template"),w=un("userFieldPath"),C=un("permanent"),N=un("userPermanent");u(z(e)),E(z(n)),k(z(a)),M(z(c)),G(r),K(t),R(w),V(w),Q(i),re(o),ce(l),de(s),ve(m),Oe(d),we(p),g(b),nn(b),$e(z(f)),Ge(z(v)),ct(y),pt(h),yt(O),jt(j),Nt(x),Ke(z(C)),Qe(z(N))}),[un,mn,t]),Object(a.useEffect)((function(){var e=mn("metaModel"),t=mn("metaJsonModel");e?at(Object(c.a)(Object(c.a)({},e),{},{type:"metaModel"})):t&&at(Object(c.a)(Object(c.a)({},t),{},{type:"metaJsonModel"}))}),[mn]),Object(a.useEffect)((function(){return function(){var e=Object(P.getBusinessObject)(t);e&&e.$attrs&&(!0!==e.$attrs["camunda:newMenu"]||e.$attrs["camunda:menuName"]&&e.$attrs["camunda:menuParent"]||pn(["newMenu","menuName","menuParent","menuParentLabel","position","positionMenu","positionMenuLabel","tagCount","formView","gridView"]),!0!==e.$attrs["camunda:newUserMenu"]||e.$attrs["camunda:userMenuName"]&&e.$attrs["camunda:userParentMenu"]||pn(["newUserMenu","userMenuName","userParentMenu","userParentMenuLabel","userMenuPosition","userPositionMenu","userPositionMenuLabel","userTagCount","userFormView","userGridView"]))}}),[t,pn]),r.a.createElement("div",{className:rn.main},r.a.createElement("div",{className:rn.container},r.a.createElement(dn,{element:t,entry:{id:"createUserAction",label:J("Create user action"),modelProperty:"createUserAction",get:function(){return{createUserAction:s}},set:function(e,t){var n=!t.createUserAction;u(n),ln("createUserAction",n),!1===O&&!1===n&&(K(void 0),ln("actionEmailTitle",void 0))}}}),r.a.createElement("div",{className:rn.container},r.a.createElement(dn,{element:t,entry:{id:"emailNotification",label:J("Email notification"),modelProperty:"emailNotification",get:function(){return{emailNotification:O}},set:function(e,t){E(!t.emailNotification),ln("emailNotification",!t.emailNotification),!1===O&&(Nt(void 0),ln("template",void 0),!1===s&&(K(void 0),ln("actionEmailTitle",void 0)))}}})),O&&r.a.createElement(r.a.Fragment,null,r.a.createElement("label",{className:rn.label},J("Template")),r.a.createElement(ei,{className:rn.select,update:function(e,t){Nt(e),sn("template",e,t,"name")},name:"template",value:kt,isLabel:!1,fetchMethod:function(){return function(e){return ft.apply(this,arguments)}(hn())}})),(s||O)&&r.a.createElement(an,{element:t,canRemove:!0,entry:{id:"actionEmailTitle",name:"actionEmailTitle",label:J("Action/Email Title"),modelProperty:"actionEmailTitle",get:function(){return{actionEmailTitle:q||""}},set:function(e,t){K(t.actionEmailTitle),ln("actionEmailTitle",t.actionEmailTitle)},validate:function(e,t){if(!t.actionEmailTitle)return{actionEmailTitle:"Must provide a value"}}}}),Te.includes(t.type)?r.a.createElement("div",{style:{display:"flex",alignItems:"flex-end"}},r.a.createElement(an,{element:t,canRemove:!0,entry:{id:"userFieldPath",name:"userFieldPath",label:J("User field path"),modelProperty:"userFieldPath",get:function(){return{userFieldPath:_||""}},set:function(e,t){R(t.userFieldPath),V(t.userFieldPath),ln("userFieldPath",t.userFieldPath)}}}),r.a.createElement(qa.a,{className:rn.newIcon,onClick:function(){Ft(!0)}})):r.a.createElement(an,{element:t,canRemove:!0,entry:{id:"userFieldPath",name:"userFieldPath",label:J("User field path"),modelProperty:"userFieldPath",get:function(){return{userFieldPath:_||""}},set:function(e,t){R(t.userFieldPath),V(t.userFieldPath),ln("userFieldPath",t.userFieldPath)}}}),r.a.createElement("div",{style:{display:"flex",alignItems:"flex-end"}},r.a.createElement(an,{element:t,canRemove:!0,entry:{id:"deadlineFieldPath",name:"deadlineFieldPath",label:J("Deadline field path"),modelProperty:"deadlineFieldPath",get:function(){return{deadlineFieldPath:v||""}},set:function(e,t){g(t.deadlineFieldPath),ln("deadlineFieldPath",t.deadlineFieldPath)}}}),r.a.createElement(qa.a,{className:rn.newIcon,onClick:function(){qt(!0)}}))),r.a.createElement("div",{className:rn.container},r.a.createElement(dn,{element:t,entry:{id:"newMenu",label:J("New menu"),modelProperty:"newMenu",get:function(){return{newMenu:w}},set:function(e,t){var n=!t.newMenu;k(n),ln("newMenu",n),!1===n&&(G(void 0),ln("menuName",void 0),Q(void 0),sn("menuParent",void 0),re(void 0),cn("position",void 0),ce(void 0),sn("positionMenu",void 0),$e(void 0),ln("tagCount",void 0),ct(void 0),sn("formView",void 0),pt(void 0),sn("gridView",void 0))}}}),w&&r.a.createElement(r.a.Fragment,null,r.a.createElement(an,{element:t,canRemove:!0,entry:{id:"menuName",name:"menuName",modelProperty:"menuName",label:J("Menu name"),get:function(){return{menuName:W}},set:function(e,t){G(t.menuName),ln("menuName",t.menuName)},validate:function(e,t){if(!t.menuName)return{menuName:"Must provide a value"}}}}),r.a.createElement("label",{className:rn.label},J("Menu parent")),r.a.createElement(ei,{className:rn.select,options:De,update:function(e,t){Q(e),sn("menuParent",e,t)},name:"menuParent",value:Z,isLabel:!1,fetchMethod:function(){return Ct()},validate:function(e){if(!e.menuParent)return{menuParent:"Must provide a value"}}}),r.a.createElement("label",{className:rn.label},J("Position")),r.a.createElement(ei,{className:rn.select,update:function(e){re(e),cn("position",e)},name:"position",value:ae,isLabel:!1,options:[{name:"After",id:"after"},{name:"Before",id:"before"}]}),r.a.createElement("label",{className:rn.label},J("Position menu")),r.a.createElement(ei,{className:rn.select,options:Fe,update:function(e,t){ce(e),sn("positionMenu",e,t)},fetchMethod:function(){return St(Z)},name:"positionMenu",value:le,isLabel:!1}),r.a.createElement(dn,{element:t,entry:{id:"permanent",label:J("Permanent ?"),modelProperty:"permanent",get:function(){return{permanent:qe}},set:function(e,t){var n=!t.permanent;Ke(n),ln("permanent",n)}}}),r.a.createElement(dn,{element:t,entry:{id:"tagCount",label:J("Display tag count ?"),modelProperty:"tagCount",get:function(){return{tagCount:Be}},set:function(e,t){var n=!t.tagCount;$e(n),ln("tagCount",n)}}}),nt&&r.a.createElement(r.a.Fragment,null,r.a.createElement("label",{className:rn.label},J("Grid view")),r.a.createElement(ei,{className:rn.select,update:function(e,t){pt(e),sn("gridView",e,t)},fetchMethod:function(e){return it(nt,e,"grid")},name:"gridView",value:mt,label:J("Grid view"),isLabel:!1}),r.a.createElement("label",{className:rn.label},J("Form view")),r.a.createElement(ei,{className:rn.select,update:function(e,t){ct(e),sn("formView",e,t)},fetchMethod:function(e){return it(nt,e)},name:"formView",value:lt,label:J("Form view"),isLabel:!1})),r.a.createElement(yn,{entry:{id:"menu-context",labels:[J("Key"),J("Value")],modelProperties:["key","value"],addLabel:"Add context menu",getElements:function(){return bn("contextMapParameters")},updateElement:function(e,t,n){fn(e,t,n,"contextMapParameters")},addElement:function(e){vn(e,"contextMapParameters","camunda:ContextMapParameter")},removeElement:function(e){gn(e,"contextMapParameters","contextUserMapParameters")}}}))),r.a.createElement("div",{className:rn.container},r.a.createElement(dn,{element:t,entry:{id:"newUserMenu",label:J("New user menu"),modelProperty:"newUserMenu",get:function(){return{newUserMenu:S}},set:function(e,t){var n=!t.newUserMenu;M(n),ln("newUserMenu",n),!1===n&&(de(void 0),ln("userMenuName",void 0),ve(void 0),sn("userParentMenu",void 0),Oe(void 0),cn("userMenuPosition",void 0),we(void 0),sn("userPositionMenu",void 0),Ge(void 0),ln("userTagCount",void 0),yt(void 0),sn("userFormView",void 0),jt(void 0),sn("userGridView",void 0))}}}),S&&r.a.createElement(r.a.Fragment,null,r.a.createElement(an,{element:t,canRemove:!0,entry:{id:"userMenuName",name:"userMenuName",label:J("User menu name"),modelProperty:"userMenuName",get:function(){return{userMenuName:me}},set:function(e,t){de(t.userMenuName),ln("userMenuName",t.userMenuName)},validate:function(e,t){if(!t.userMenuName)return{userMenuName:"Must provide a value"}}}}),r.a.createElement("label",{className:rn.label},J("User Parent menu")),r.a.createElement(ei,{className:rn.select,options:De,update:function(e,t){ve(e),sn("userParentMenu",e,t)},fetchMethod:function(){return Ct()},name:"userParentMenu",value:fe,label:"User Parent menu",isLabel:!1,validate:function(e){if(!e.userParentMenu)return{userParentMenu:"Must provide a value"}}}),r.a.createElement("label",{className:rn.label},J("Position")),r.a.createElement(ei,{className:rn.select,name:"userMenuPosition",value:he,update:function(e,t){Oe(e),sn("userMenuPosition",e,t)},isLabel:!1,options:[{name:"After",id:"after"},{name:"Before",id:"before"}]}),r.a.createElement("label",{className:rn.label},J("Position menu")),r.a.createElement(ei,{className:rn.select,update:function(e,t){we(e),sn("userPositionMenu",e,t)},fetchMethod:function(){return St(fe)},options:Ne,name:"userPositionMenu",value:xe,isLabel:!1}),r.a.createElement(dn,{element:t,entry:{id:"user-permanent",label:J("Permanent ?"),modelProperty:"userPermanent",get:function(){return{userPermanent:Ze}},set:function(e,t){var n=!t.userPermanent;Qe(n),ln("userPermanent",n)}}}),r.a.createElement(dn,{element:t,entry:{id:"userTagCount",label:J("Display tag count ?"),modelProperty:"userTagCount",get:function(){return{userTagCount:ze}},set:function(e,t){var n=!t.userTagCount;Ge(n),ln("userTagCount",n)}}}),nt&&r.a.createElement(r.a.Fragment,null,r.a.createElement("label",{className:rn.label},J("Grid view")),r.a.createElement(ei,{className:rn.select,update:function(e,t){jt(e),sn("userGridView",e,t)},fetchMethod:function(e){return it(nt,e,"grid")},name:"userGridView",value:Et,label:J("Grid view"),isLabel:!1}),r.a.createElement("label",{className:rn.label},J("Form view")),r.a.createElement(ei,{className:ne()(rn.select,rn.lastChild),update:function(e,t){yt(e),sn("userFormView",e,t)},fetchMethod:function(e){return it(nt,e)},name:"userFormView",value:gt,label:J("Form view"),isLabel:!1})),r.a.createElement(yn,{entry:{id:"menu-user-context",labels:[J("Key"),J("Value")],modelProperties:["key","value"],addLabel:"Add context menu",getElements:function(){return bn("contextUserMapParameters")},updateElement:function(e,t,n){fn(e,t,n,"contextUserMapParameters")},addElement:function(e){vn(e,"contextUserMapParameters","camunda:ContextUserMapParameter")},removeElement:function(e){gn(e,"contextUserMapParameters","contextMapParameters")}}}))),r.a.createElement(I.a,{open:Ht,onClose:function(e,t){"backdropClick"!==t&&qt(!1)},"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",classes:{paper:rn.dialog}},r.a.createElement(za.a,{id:"alert-dialog-title"},"Deadline field path"),r.a.createElement(Ga.a,{className:rn.dialogContent},r.a.createElement(wa,{getMetaFields:function(){return dt(nt)},onChange:function(e,t){nn(e),Zt(t)},value:{fieldName:tn},allowAllFields:!0,isDatePath:!0})),r.a.createElement(Ua.a,null,r.a.createElement(In.a,{onClick:function(){if(Xt&&Xt.type&&!["datetime","date"].includes(Xt.type.toLowerCase()))return zt("Field should be date field"),void Bt(!0);qt(!1),g(tn),ln("deadlineFieldPath",tn)},color:"primary",autoFocus:!0,className:rn.save},"OK"),r.a.createElement(In.a,{onClick:function(){qt(!1),nn(_)},color:"primary",autoFocus:!0,className:rn.save},"Cancel"))),r.a.createElement(I.a,{open:Pt,onClose:function(e,t){"backdropClick"!==t&&Ft(!1)},"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",classes:{paper:rn.dialog}},r.a.createElement(za.a,{id:"alert-dialog-title"},J("User field path")),r.a.createElement(Ga.a,{className:rn.dialogContent},r.a.createElement(wa,{getMetaFields:function(){return dt(nt)},onChange:function(e,t){V(e),Dt(t)},value:{fieldName:A},isParent:!0,isUserPath:!0})),r.a.createElement(Ua.a,null,r.a.createElement(In.a,{onClick:function(){if(Lt&&"com.axelor.auth.db.User"!==Lt.target)return zt("Last sub field must be user field"),void Bt(!0);Ft(!1),R(A),ln("userFieldPath",A)},color:"primary",autoFocus:!0,className:rn.save},"OK"),r.a.createElement(In.a,{onClick:function(){Ft(!1),V(_)},color:"primary",autoFocus:!0,className:rn.save},"Cancel"))),r.a.createElement(I.a,{open:Vt,onClose:function(e,t){"backdropClick"!==t&&Bt(!1)},"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",classes:{paper:rn.dialog}},r.a.createElement(za.a,{id:"alert-dialog-title"},"Error"),r.a.createElement(Ga.a,null,r.a.createElement(Ha.a,{id:"alert-dialog-description"},Jt)),r.a.createElement(Ua.a,null,r.a.createElement(In.a,{onClick:function(){return Bt(!1)},color:"primary",autoFocus:!0,className:rn.save},"Ok"),r.a.createElement(In.a,{onClick:function(){return Bt(!1)},color:"primary",autoFocus:!0,className:rn.save},"Cancel"))))}var ss=Object(F.a)({groupLabel:{fontWeight:"bolder",display:"inline-block",verticalAlign:"middle",color:"#666",fontSize:"120%",margin:"10px 0px",transition:"margin 0.218s linear",fontStyle:"italic"},divider:{marginTop:15,borderTop:"1px dotted #ccc"},tableCell:{textAlign:"left"},tableHead:{fontWeight:600,fontSize:12,textAlign:"left"},iconButton:{margin:"5px 0px 5px 5px",borderRadius:0,padding:2,color:"black",width:"fit-content",border:"1px solid #ccc"},clear:{fontSize:"1rem"},table:{margin:"10px 0px",background:"#F8F8F8"},textRoot:{marginTop:0},confirm:{color:"#727272",width:"fit-content",border:"1px solid #ccc",height:23,fontSize:12,marginLeft:5,borderRadius:0,textTransform:"none",marginBottom:10,padding:"0px 10px !important"}});function us(e){var t=e.configKey,n=e.element,i=e.onChange,o=Object(a.useState)(null),u=Object(l.a)(o,2),b=u[0],f=u[1],v=Object(a.useState)(null),g=Object(l.a)(v,2),y=g[0],h=g[1],O=ss(),E=function(){var e=Object(p.a)(m.a.mark((function e(t){var n,a;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=Object(s.a)(b||[]),a=[].concat(Object(s.a)(y||[]),[n[t]]),n.splice(t,1),h(a),i(n,a),f(n);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),j=function(e,t,n){var a=arguments.length>3&&void 0!==arguments[3]&&arguments[3],r=Object(s.a)(b||[]);r[e]=Object(c.a)(Object(c.a)({},r[e]),{},Object(d.a)({},t,n)),f(r),a&&i(r)};return Object(a.useEffect)((function(){var e=!0;function n(){return(n=Object(p.a)(m.a.mark((function n(){var a;return m.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,Tt(t);case 2:a=n.sent,e&&f(a);case 4:case"end":return n.stop()}}),n)})))).apply(this,arguments)}return function(){n.apply(this,arguments)}(),function(){return e=!1}}),[t]),r.a.createElement("div",null,r.a.createElement(r.a.Fragment,null,r.a.createElement(qc.a,{component:Za.a,className:O.table},r.a.createElement(Lo.a,{size:"small","aria-label":"a dense table"},r.a.createElement(Ao.a,null,r.a.createElement(Vo.a,null,r.a.createElement(Io.a,{className:O.tableHead,align:"center"},"Translation"),r.a.createElement(Io.a,{className:O.tableHead,align:"center"},"Language (Hint: en, fr)"),r.a.createElement(Io.a,{className:O.tableHead,align:"center"}))),r.a.createElement(Do.a,null,b&&b.length>0&&b.map((function(e,t){return r.a.createElement(Vo.a,{key:t},r.a.createElement(Io.a,{component:"th",scope:"row",align:"center",className:O.tableCell},r.a.createElement(an,{rootClass:O.textRoot,element:n,entry:{id:"message",modelProperty:"message",get:function(){return{message:e.message}},set:function(n,a){e.message!==a.message&&j(t,"message",a.message,!!e.id)}},isLabel:!1})),r.a.createElement(Io.a,{component:"th",scope:"row",align:"center",className:O.tableCell},r.a.createElement(an,{rootClass:O.textRoot,element:n,entry:{id:"language",modelProperty:"language",get:function(){return{language:e.language}},set:function(n,a){e.language!==a.language&&j(t,"language",a.language,!0)}},isLabel:!1})),r.a.createElement(Io.a,{component:"th",scope:"row",align:"center",className:O.tableCell},r.a.createElement(fn.a,{className:O.iconButton,onClick:function(e){e.stopPropagation(),E(t)}},r.a.createElement(tn.a,{className:O.clear}))))})))))),r.a.createElement("div",{style:{display:"flex",alignItems:"center"}},r.a.createElement(fn.a,{className:O.iconButton,onClick:function(){f([].concat(Object(s.a)(b||[]),[{message:"",language:"",key:"value:".concat(t)}]))},disabled:!t},r.a.createElement(vn.a,{fontSize:"small"}))))}var ms=Object(F.a)((function(e){return{groupLabel:{fontWeight:"bolder",display:"inline-block",verticalAlign:"middle",color:"#666",fontSize:"120%",margin:"10px 0px",transition:"margin 0.218s linear",fontStyle:"italic"},divider:{marginTop:15,borderTop:"1px dotted #ccc"},button:{textTransform:"none"},reportTypography:{display:"flex",alignItems:"center",color:"#999",margin:"10px 0px"},newIcon:{color:"#58B423",cursor:"pointer"},save:{margin:e.spacing(1),backgroundColor:"#0275d8",borderColor:"#0267bf",textTransform:"none",color:"white","&:hover":{backgroundColor:"#025aa5",borderColor:"#014682",color:"white"}},clearClassName:{paddingLeft:10},dialogContent:{display:"flex",alignItems:"flex-end"},grid:{padding:"0px 15px 0px 0px"},card:{margin:"5px 0px 10px 0px",boxShadow:"none",width:"100%",border:"1px solid #ccc",background:"#f8f8f8",borderRadius:0},cardContent:{padding:"10px !important"},cardContainer:{display:"flex",alignItems:"flex-start"},iconButton:{margin:"5px 0px 5px 5px",borderRadius:0,border:"1px solid #ccc",padding:2,width:"fit-content"},label:{fontWeight:"bolder",display:"inline-block",verticalAlign:"middle",color:"#666",margin:"3px 0px"},icon:{marginRight:10},textFieldRoot:{marginTop:0},textFieldLabel:{marginBottom:0},checkbox:{marginTop:0,justifyContent:"center"},container:{display:"flex",alignItems:"center",marginBottom:5},checkboxLabel:{width:"100%"}}})),ds={isStartModel:"false",isDirectCreation:"true",isCustom:"false",metaJsonModel:null,metaJsonName:null,metaModelName:null,metaModelFullName:null,metaModel:null,model:null,pathCondition:null,processPath:null,userDefaultPath:null};function ps(e){var t=Object(P.getBusinessObject)(e);"bpmn:Participant"===(e&&e.type)&&(t=Object(P.getBusinessObject)(t.processRef));var n=t.extensionElements;return n&&n.values?n.values.find((function(e){return"camunda:ProcessConfiguration"===e.$type})):null}function bs(e,t,n,a){return w.a.createElement(e,a,t,n)}function fs(e){var t=e.element,n=e.index,i=e.label,o=e.bpmnFactory,u=e.bpmnModeler,b=ms(),f=Object(a.useState)(null),v=Object(l.a)(f,2),g=v[0],y=v[1],h=Object(a.useState)(!1),O=Object(l.a)(h,2),E=O[0],j=O[1],x=Object(a.useState)(!1),k=Object(l.a)(x,2),C=k[0],N=k[1],S=Object(a.useState)(null),M=Object(l.a)(S,2),T=M[0],F=M[1],_=Object(a.useState)(null),R=Object(l.a)(_,2),L=R[0],D=R[1],B=Object(a.useState)(!1),$=Object(l.a)(B,2),W=$[0],G=$[1],U=Object(a.useState)(!1),H=Object(l.a)(U,2),q=H[0],K=H[1],Y=Object(a.useState)(null),X=Object(l.a)(Y,2),Z=X[0],Q=X[1],te=Object(a.useState)(null),ne=Object(l.a)(te,2),ae=ne[0],re=ne[1],ie=Object(a.useState)(null),oe=Object(l.a)(ie,2),le=oe[0],ce=oe[1],se=Object(a.useState)(null),ue=Object(l.a)(se,2),me=ue[0],de=ue[1],pe=Object(a.useState)(!1),be=Object(l.a)(pe,2),fe=be[0],ve=be[1],ge=Object(a.useState)(null),ye=Object(l.a)(ge,2),he=ye[0],Oe=ye[1],Ee=Object(a.useState)(null),je=Object(l.a)(Ee,2),xe=je[0],we=je[1],ke=r.a.useCallback((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"processConfigurationParameters",n=ps(t),a=n&&n[e];return a}),[t]),Ce=r.a.useCallback((function(){var e=ke();return e||[]}),[ke]),Ne=function(e,t,n){var a=ke();if(a){var r=a[n];r&&(r[t]=e)}},Se=function(e,t,n,a,r){var i=Object(P.getBusinessObject)(n);"bpmn:Participant"===(n&&n.type)&&(i=Object(P.getBusinessObject)(i.processRef)),a||(a=w.a.createElement("bpmn:ExtensionElements",{values:[]},i,r),i.extensionElements=a);var o=ps(n);if(!o){var l=Me(t,o=function(e,t,n){return bs("camunda:ProcessConfiguration",e,t,n)}(i.extensionElements,r,{processConfigurationParameters:[]}),r,{});l.isStartModel="false",l.isDirectCreation="true",l.isCustom="false",o[e]=[l],i.extensionElements.values.push(o)}};function Me(e,t,n,a){return bs(e,t,n,a)}var Te=function(){var e=Object(p.a)(m.a.mark((function e(t,n,a,r,i,o){var l,u,p,b;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((l=Object(s.a)(g||[]))[r]=Object(c.a)(Object(c.a)({},l[r]||{}),{},Object(d.a)({},n,t&&t[a]||t)),"pathCondition"===n&&(l[r]=Object(c.a)(Object(c.a)({},l[r]||{}),{},{pathConditionValue:o}),Ne(o,"pathConditionValue",r)),u="","metaModel"!==n&&"metaJsonModel"!==n){e.next=16;break}return l[r]["".concat(n,"FullName")]="metaModel"===n?t&&t.fullName:void 0,e.next=8,vt(Object(c.a)(Object(c.a)({},l[r]),{},(p={},Object(d.a)(p,n,t),Object(d.a)(p,"metaModel"===n?"metaJsonModel":"metaModel",null),p)));case 8:u=e.sent,l[r]=Object(c.a)(Object(c.a)({},l[r]||{}),{},(b={},Object(d.a)(b,"metaModel"===n?"metaJsonModel":"metaModel",null),Object(d.a)(b,"model",u),b)),Ne(void 0,"".concat("metaModel"===n?"metaJsonModel":"metaModel"),r),Ne(u,"model",r),l[r].title=t?o:void 0,Ne(o,"title",r),o&&t||(l[r].title=void 0,Ne(void 0,"title",r)),Ne("metaModel"===n&&t?t.fullName:void 0,"metaModelFullName",r);case 16:Ne(t&&t[a]||t,n,r),y(l);case 18:case"end":return e.stop()}}),e)})));return function(t,n,a,r,i,o){return e.apply(this,arguments)}}(),Pe=function(e){return e&&e.metaModel?{fullName:e.metaModelFullName,name:e.metaModel,type:"metaModel"}:e&&e.metaJsonModel?{name:e.metaJsonModel,type:"metaJsonModel"}:void 0},Fe=r.a.useCallback((function(e){F(Pe(e))}),[]),_e=function(){var e=Object(p.a)(m.a.mark((function e(){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!he){e.next=7;break}return e.next=3,Rt(he);case 3:if(Te(he.length>0,"isTranslations",void 0,L&&L.key),!(xe&&xe.length>0&&xe[0].id)){e.next=7;break}return e.next=7,Ft(xe);case 7:ve(!1);case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(a.useEffect)((function(){var e=Ce();y(e);for(var t=0;t<e.length;t++){var n=e[t];if(z(n.isStartModel))return void Fe(n)}}),[Ce,Fe,t]),r.a.createElement("div",null,r.a.createElement(r.a.Fragment,null,n>0&&r.a.createElement("div",{className:b.divider})),r.a.createElement("div",null,r.a.createElement(A.a,{container:!0,alignItems:"center"},r.a.createElement(A.a,{item:!0,xs:6},r.a.createElement("div",{className:b.groupLabel},i))),r.a.createElement(A.a,null,g&&g.length>0&&r.a.createElement(ee.a,{className:b.reportTypography},r.a.createElement(Kc.a,{fontSize:"small",className:b.icon}),"Must provide meta model or custom model"),g&&g.length>0&&r.a.createElement(A.a,null,r.a.createElement(A.a,{size:"small","aria-label":"a dense table"},r.a.createElement(A.a,null,g.map((function(e,a){return r.a.createElement("div",{key:"card_".concat(n),className:b.cardContainer},r.a.createElement(Uc.a,{className:b.card},r.a.createElement(Hc.a,{className:b.cardContent},r.a.createElement(A.a,{key:a},r.a.createElement(A.a,{container:!0,className:b.container},r.a.createElement(A.a,{item:!0,xs:12,style:{justifyContent:"flex-end"},className:b.grid},r.a.createElement("label",{className:b.label},J("Model")),(void 0===e.isCustom?e.metaJsonModel:z(e.isCustom))?r.a.createElement(ei,{fetchMethod:function(){return jt()},update:function(e,t){Te(e,"metaJsonModel","name",a,"title",t)},name:"metaJsonModel",value:e.metaJsonModel||"",isLabel:!1,optionLabel:"name",optionLabelSecondary:"title"}):r.a.createElement(ei,{fetchMethod:function(){return Ot()},update:function(e,t){Te(e,"metaModel","name",a,"title",t)},name:"metaModel",optionLabel:"name",optionLabelSecondary:"title",value:e.metaModel||"",isLabel:!1}))),r.a.createElement(A.a,{container:!0,className:b.container},r.a.createElement(A.a,{item:!0,xs:4,className:b.grid},r.a.createElement(dn,{className:b.checkbox,labelClassName:b.checkboxLabel,entry:{id:"custom-".concat(a),modelProperty:"isCustom",label:J("Custom"),get:function(){return{isCustom:void 0===e.isCustom?!!e.metaJsonModel:z(e.isCustom)}},set:function(e,t){Te(!t.isCustom,"isCustom",void 0,a)}},element:t})),r.a.createElement(A.a,{item:!0,xs:4,className:b.grid},r.a.createElement(dn,{className:b.checkbox,labelClassName:b.checkboxLabel,entry:{id:"start-model-".concat(a),label:J("Start model ?"),modelProperty:"isStartModel",get:function(){return{isStartModel:z(e.isStartModel)}},set:function(t,n){Te(!n.isStartModel,"isStartModel",void 0,a),n.isStartModel||Fe(e)}},element:t})),r.a.createElement(A.a,{item:!0,xs:4,className:b.grid},r.a.createElement(dn,{className:b.checkbox,labelClassName:b.checkboxLabel,entry:{id:"direct-creation-".concat(a),modelProperty:"isDirectCreation",label:J("Direct creation ?"),get:function(){return{isDirectCreation:z(e.isDirectCreation)}},set:function(e,t){Te(!t.isDirectCreation,"isDirectCreation",void 0,a)}},element:t}))),r.a.createElement(A.a,{container:!0,className:b.container},r.a.createElement(A.a,{item:!0,xs:6,className:b.grid},r.a.createElement("label",{className:b.label},J("Title")),r.a.createElement("div",{style:{display:"flex"}},r.a.createElement(an,{element:t,canRemove:!z(e.isTranslations),rootClass:b.textFieldRoot,labelClass:b.textFieldLabel,clearClassName:b.clearClassName,disabled:z(e.isTranslations),readOnly:z(e.isTranslations),entry:{id:"title_".concat(a),name:"title",modelProperty:"title",get:function(){return{title:e.title}},set:function(t,n){n.title!==e.title&&Te(""===n.title?void 0:n.title,"title",void 0,a)}}}),r.a.createElement(qa.a,{className:b.newIcon,onClick:function(){ve(!0),D({processConfig:e,key:a})}}))),r.a.createElement(A.a,{item:!0,xs:6,className:b.grid},r.a.createElement("label",{className:b.label},J("Process path")),r.a.createElement("div",{style:{display:"flex"}},r.a.createElement(an,{element:t,canRemove:!0,rootClass:b.textFieldRoot,labelClass:b.textFieldLabel,clearClassName:b.clearClassName,disabled:z(e.isStartModel),entry:{id:"processPath_".concat(a),name:"processPath",modelProperty:"processPath",get:function(){return{processPath:e.processPath}},set:function(t,n){n.processPath!==e.processPath&&Te(""===n.processPath?void 0:n.processPath,"processPath",void 0,a)}}}),!z(e.isStartModel)&&r.a.createElement(qa.a,{className:b.newIcon,onClick:function(){if(j(!0),D({processConfig:e,key:a}),de(null),!T){var t=g&&g.find((function(e){return z(e.isStartModel)}));Fe(t)}}})))),r.a.createElement(A.a,{container:!0,className:b.container},r.a.createElement(A.a,{item:!0,xs:6,className:b.grid},r.a.createElement("label",{className:b.label},J("Condition")),r.a.createElement("div",{style:{display:"flex"}},r.a.createElement(an,{element:t,canRemove:!0,rootClass:b.textFieldRoot,labelClass:b.textFieldLabel,clearClassName:b.clearClassName,readOnly:!(!e||!e.pathConditionValue),entry:{id:"pathCondition_".concat(a),name:"pathCondition",modelProperty:"pathCondition",get:function(){return{pathCondition:e.pathCondition||""}},set:function(t,n){n.pathCondition!==e.pathCondition&&Te(""===n.pathCondition?void 0:n.pathCondition,"pathCondition",void 0,a)}}}),r.a.createElement(V.a,{title:"Enable","aria-label":"enable"},r.a.createElement(Ka.a,{className:b.newIcon,onClick:function(){e&&e.pathConditionValue&&(ce({key:a,processConfig:e}),Q("Path condition can't be managed using builder once changed manually."),re("Warning"),G(!0))}})),r.a.createElement(qa.a,{className:b.newIcon,onClick:function(){D({processConfig:e,key:a}),K(!0)}}))),r.a.createElement(A.a,{item:!0,xs:6,className:b.grid},r.a.createElement("label",{className:b.label},J("User default path")),r.a.createElement("div",{style:{display:"flex"}},r.a.createElement(an,{element:t,canRemove:!0,rootClass:b.textFieldRoot,labelClass:b.textFieldLabel,clearClassName:b.clearClassName,entry:{id:"userDefaultPath_".concat(a),name:"userDefaultPath",modelProperty:"userDefaultPath",get:function(){return{userDefaultPath:e.userDefaultPath}},set:function(e,t){Te(t.userDefaultPath,"userDefaultPath",void 0,a)}}}),r.a.createElement(qa.a,{className:b.newIcon,onClick:function(){N(!0),de(null),D({processConfig:e,key:a})}}))))))),r.a.createElement(A.a,{align:"center",className:b.Grid},r.a.createElement(fn.a,{className:b.iconButton,onClick:function(){!function(e){var t=Object(s.a)(g||[]);t.splice(e,1),y(t)}(a),function(e){var n=ke();if(!(e<0)&&(n.splice(e,1),0===n.length)){var a=Object(P.getBusinessObject)(t);"bpmn:Participant"===(t&&t.type)&&(a=Object(P.getBusinessObject)(a&&a.processRef));var r=a.extensionElements;if(!r||!r.values)return null;var i=r.values.findIndex((function(e){return"camunda:ProcessConfiguration"===e.$type}));if(i<0)return;r&&r.values&&(r.values.splice(i,1),0===r.values.length&&(a.extensionElements=void 0))}}(a)}},r.a.createElement(tn.a,{fontSize:"small"}))))})))))),r.a.createElement("div",{className:b.icons},r.a.createElement(fn.a,{className:b.iconButton,onClick:function(){var e=Object(s.a)(g||[]);e.push(Object(c.a)({},ds)),y(e),function(e,n){var a=Object(P.getBusinessObject)(t);"bpmn:Participant"===(t&&t.type)&&(a=Object(P.getBusinessObject)(a&&a.processRef));var r=a.extensionElements;if(r&&r.values){var i=r.values.find((function(e){return"camunda:ProcessConfiguration"===e.$type}));if(i){var l=Me(n,i,o,{});l.isStartModel="false",l.isDirectCreation="true",l.isCustom="false",i[e]&&0!==i[e].length?i[e].push(l):i[e]=[l]}else Se(e,n,t,a.extensionElements,o)}else Se(e,n,t,a.extensionElements,o)}("processConfigurationParameters","camunda:ProcessConfigurationParameter")}},r.a.createElement(vn.a,{fontSize:"small"})))),r.a.createElement(I.a,{open:E,onClose:function(e,t){"backdropClick"!==t&&(j(!1),D(null))},"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",classes:{paper:b.dialog}},r.a.createElement(za.a,{id:"alert-dialog-title"},"Process Path"),r.a.createElement(Ga.a,{className:b.dialogContent},r.a.createElement(wa,{getMetaFields:function(){return dt(Pe(L&&L.processConfig))},onChange:function(e,t){de(t),D({processConfig:Object(c.a)(Object(c.a)({},L&&L.processConfig||{}),{},{processPath:e}),key:L&&L.key})},startModel:T,value:{fieldName:L&&L.processConfig&&L.processConfig.processPath},isParent:!0})),r.a.createElement(Ua.a,null,r.a.createElement(In.a,{onClick:function(){if(me&&me.target!==(T&&T.fullName)&&me.jsonTarget!==(T&&T.name))return G(!0),void Q("Last subfield should be related to start model");j(!1),L&&Te(L.processConfig&&L.processConfig.processPath,"processPath",void 0,L.key)},color:"primary",autoFocus:!0,className:b.save},"OK"),r.a.createElement(In.a,{onClick:function(){j(!1)},color:"primary",autoFocus:!0,className:b.save},"Cancel"))),q&&r.a.createElement(Zr,{open:q,handleClose:function(){return K(!1)},getExpression:function(){var e,t=L&&L.processConfig&&L.processConfig.pathConditionValue;try{e=void 0!==t?JSON.parse(t):void 0}catch(n){}return{values:e}},bpmnModeler:u,setProperty:function(e){var t=e.expression,n=e.value;Te(t,"pathCondition",void 0,L&&L.key,void 0,n)},processConfigs:[L&&L.processConfig&&L.processConfig.metaModel,L&&L.processConfig&&L.processConfig.metaJsonModel],element:t,title:"Add Expression"}),W&&r.a.createElement(I.a,{open:W,onClose:function(e,t){"backdropClick"!==t&&G(!1)},"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",classes:{paper:b.dialog}},r.a.createElement(za.a,{id:"alert-dialog-title"},J(ae)),r.a.createElement(Ga.a,null,r.a.createElement(Ha.a,{id:"alert-dialog-description"},J(Z))),r.a.createElement(Ua.a,null,r.a.createElement(In.a,{className:b.save,onClick:function(){G(!1),Q(null),re(null);var e=le&&le.processConfig&&le.processConfig.pathCondition;Te(""===e?void 0:e,"pathCondition",void 0,le&&le.key),ce(null)},color:"primary",autoFocus:!0},"Ok"),r.a.createElement(In.a,{onClick:function(){return G(!1)},color:"primary",className:b.save},"Cancel"))),C&&r.a.createElement(I.a,{open:C,onClose:function(e,t){"backdropClick"!==t&&(N(!1),D(null))},"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",classes:{paper:b.dialog}},r.a.createElement(za.a,{id:"alert-dialog-title"},"User default Path"),r.a.createElement(Ga.a,{className:b.dialogContent},r.a.createElement(wa,{getMetaFields:function(){return dt(Pe(L&&L.processConfig))},onChange:function(e,t){de(t),D({processConfig:Object(c.a)(Object(c.a)({},L&&L.processConfig||{}),{},{userDefaultPath:e}),key:L&&L.key})},value:{fieldName:L&&L.processConfig&&L.processConfig.userDefaultPath},isParent:!0,isUserPath:!0})),r.a.createElement(Ua.a,null,r.a.createElement(In.a,{onClick:function(){if(me&&"com.axelor.auth.db.User"!==me.target)return G(!0),void Q("Last subfield should be related to user");N(!1),L&&Te(L.processConfig&&L.processConfig.userDefaultPath,"userDefaultPath",void 0,L.key)},color:"primary",autoFocus:!0,className:b.save},"OK"),r.a.createElement(In.a,{onClick:function(){N(!1)},color:"primary",autoFocus:!0,className:b.save},"Cancel"))),fe&&r.a.createElement(I.a,{open:fe,onClose:function(e,t){"backdropClick"!==t&&(ve(!1),D(null))},"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",classes:{paper:b.dialog}},r.a.createElement(za.a,{id:"alert-dialog-title"},J("Translations")),r.a.createElement(Ga.a,{className:b.dialogContent},r.a.createElement(us,{element:t,configKey:L&&L.processConfig&&L.processConfig.title,onChange:function(e,t){Oe(e),we(t)}})),r.a.createElement(Ua.a,null,r.a.createElement(In.a,{onClick:_e,color:"primary",autoFocus:!0,className:b.save},"OK"),r.a.createElement(In.a,{onClick:function(){ve(!1)},color:"primary",className:b.save},"Cancel"))))}var vs=Object(F.a)({groupLabel:{fontWeight:"bolder",display:"inline-block",verticalAlign:"middle",color:"#666",fontSize:"120%",margin:"10px 0px",transition:"margin 0.218s linear",fontStyle:"italic"},divider:{marginTop:15,borderTop:"1px dotted #ccc"},tableCell:{textAlign:"left"},tableHead:{fontWeight:600,fontSize:12,textAlign:"left"},iconButton:{margin:"5px 0px 5px 5px",borderRadius:0,padding:2,color:"black",width:"fit-content",border:"1px solid #ccc"},clear:{fontSize:"1rem"},table:{margin:"10px 0px",background:"#F8F8F8"},textRoot:{marginTop:0},confirm:{color:"#727272",width:"fit-content",border:"1px solid #ccc",height:23,fontSize:12,marginLeft:5,borderRadius:0,textTransform:"none",marginBottom:10,padding:"0px 10px !important"}});function gs(e){var t=e.element,n=e.bpmnModeler,i=e.index,o=e.label,u=Object(a.useState)(!1),b=Object(l.a)(u,2),f=b[0],v=b[1],g=Object(a.useState)(null),y=Object(l.a)(g,2),h=y[0],O=y[1],E=Object(a.useState)(null),j=Object(l.a)(E,2),x=j[0],w=j[1],k=Object(a.useState)(!1),C=Object(l.a)(k,2),N=C[0],S=C[1],M=Object(a.useState)(null),T=Object(l.a)(M,2),F=T[0],_=T[1],R=vs(),L=function(e){var a=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(t){var r=Object(P.getBusinessObject)(t),i=r&&r.$attrs&&r.$attrs["camunda:isTranslations"]||!1;if(z(i)||a){var o=t&&t.type,l="bpmn:TextAnnotation"===o?"text":"bpmn:Group"===o?"categoryValue":"name";t.businessObject[l]=e;var c=n.get("elementRegistry"),s=n.get("modeling"),u=c.get(t.id);u&&s&&s.updateProperties(u,Object(d.a)({},l,e))}}},D=function(){var e=Object(p.a)(m.a.mark((function e(n){var a,r,i,o,l,c,s,u,d;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Rt(n);case 2:a=e.sent,w(a),n&&n.length>0&&(r=F&&F["user.lang"])&&(i=n.find((function(e){return e.language===r})),o=i&&i.message,l=t&&t.businessObject,c=t&&t.type,s=l["bpmn:TextAnnotation"===c?"text":"bpmn:Group"===c?"categoryValue":"name"],u=l.$attrs["camunda:key"],t.businessObject.$attrs["camunda:key"]=u||s,(d=o||u||s)&&L(d));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),I=function(){var e=Object(p.a)(m.a.mark((function e(n){var a,r,i,o,l,c,u,d,p,b,f,v,g,y;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=Object(s.a)(x||[]),r=[a[n]],a.splice(n,1),!(r&&r.length>0&&r[0].id)){e.next=8;break}return e.next=6,Ft(r);case 6:e.sent&&(i=t&&t.businessObject,o=t&&t.type,l=i["bpmn:TextAnnotation"===o?"text":"bpmn:Group"===o?"categoryValue":"name"],c=i.$attrs["camunda:key"],a&&0===a.length&&L(c||l),a&&a.length>0&&(u=F&&F["user.lang"])&&(d=a.find((function(e){return e.language===u})),p=d&&d.message,b=t&&t.businessObject,f=t&&t.type,v=b["bpmn:TextAnnotation"===f?"text":"bpmn:Group"===f?"categoryValue":"name"],g=b.$attrs["camunda:key"],t.businessObject.$attrs["camunda:key"]=g||v,(y=p||g||v)&&L(y)));case 8:w(a);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),A=function(e,t,n){var a=arguments.length>3&&void 0!==arguments[3]&&arguments[3],r=Object(s.a)(x||[]);r[e]=Object(c.a)(Object(c.a)({},r[e]),{},Object(d.a)({},t,n)),w(r),a&&D(r)};return Object(a.useEffect)((function(){var e=!0;function n(){return(n=Object(p.a)(m.a.mark((function n(){var a,r,i,o,l,c;return m.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(t){n.next=2;break}return n.abrupt("return");case 2:if(a=t.businessObject){n.next=5;break}return n.abrupt("return");case 5:return r=t&&t.type,i=a["bpmn:TextAnnotation"===r?"text":"bpmn:Group"===r?"categoryValue":"name"],o=a.$attrs["camunda:key"],l=o||i,n.next=12,Tt(l);case 12:c=n.sent,e&&(O(l),w(c));case 14:case"end":return n.stop()}}),n)})))).apply(this,arguments)}return function(){n.apply(this,arguments)}(),function(){return e=!1}}),[t]),Object(a.useEffect)((function(){var e=!0;function t(){return(t=Object(p.a)(m.a.mark((function t(){var n;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,At();case 2:n=t.sent,e&&_(n);case 4:case"end":return t.stop()}}),t)})))).apply(this,arguments)}return function(){t.apply(this,arguments)}(),function(){return e=!1}}),[]),Object(a.useEffect)((function(){var e=!0,n=Object(P.getBusinessObject)(t),a=n&&n.$attrs&&n.$attrs["camunda:isTranslations"]||!1;return e&&v(z(a)),function(){return e=!1}}),[t]),Object(a.useEffect)((function(){var e=n.get("canvas");if(e){var a=!0,r=e.getRootElement();return(t&&t.id)!==(r&&r.id)?S(!!a):S(!1),function(){return a=!1}}}),[t,n]),N&&r.a.createElement("div",null,r.a.createElement(r.a.Fragment,null,i>0&&r.a.createElement("div",{className:R.divider})),r.a.createElement("div",{className:R.groupLabel},o),r.a.createElement("div",{style:{display:"flex",alignItems:"center"}},r.a.createElement(dn,{element:t,entry:{id:"isTranslations",label:J("Add translations"),modelProperty:"isTranslations",get:function(){return{isTranslations:f}},set:function(e,n){var a=!n.isTranslations;v(a);var r=Object(P.getBusinessObject)(t);if(r){r.$attrs?r.$attrs["camunda:isTranslations"]=a:r.$attrs={"camunda:isTranslations":a};var i=F&&F["user.lang"],o=x&&x.find((function(e){return e.language===i}));if(i&&o){var l=o&&o.message,c=r[t&&"bpmn:TextAnnotation"===t.type?"text":"name"],s=r.$attrs["camunda:key"];t.businessObject.$attrs["camunda:key"]=s||c;var u=a?l||s||c:s||c;u&&L(u,!0)}}}}}),f&&r.a.createElement(fn.a,{className:R.iconButton,onClick:function(){w([].concat(Object(s.a)(x||[]),[{message:"",language:"",key:"value:".concat(h)}]))}},r.a.createElement(vn.a,{fontSize:"small"}))),f&&x&&x.length>0&&r.a.createElement(r.a.Fragment,null,r.a.createElement(qc.a,{component:Za.a,className:R.table},r.a.createElement(Lo.a,{size:"small","aria-label":"a dense table"},r.a.createElement(Ao.a,null,r.a.createElement(Vo.a,null,r.a.createElement(Io.a,{className:R.tableHead,align:"center"},"Translation"),r.a.createElement(Io.a,{className:R.tableHead,align:"center"},"Language (Hint: en, fr)"),r.a.createElement(Io.a,{className:R.tableHead,align:"center"}))),r.a.createElement(Do.a,null,x&&x.length>0&&x.map((function(e,n){return r.a.createElement(Vo.a,{key:n},r.a.createElement(Io.a,{component:"th",scope:"row",align:"center",className:R.tableCell},r.a.createElement(an,{rootClass:R.textRoot,element:t,entry:{id:"message",modelProperty:"message",get:function(){return{message:e.message}},set:function(t,a){e.message!==a.message&&A(n,"message",a.message,!!e.id)}},isLabel:!1})),r.a.createElement(Io.a,{component:"th",scope:"row",align:"center",className:R.tableCell},r.a.createElement(an,{element:t,rootClass:R.textRoot,entry:{id:"language",modelProperty:"language",get:function(){return{language:e.language}},set:function(t,a){e.language!==a.language&&A(n,"language",a.language,!0)}},isLabel:!1})),r.a.createElement(Io.a,{component:"th",scope:"row",align:"center",className:R.tableCell},r.a.createElement(fn.a,{className:R.iconButton,onClick:function(){return I(n)}},r.a.createElement(tn.a,{className:R.clear}))))})))))))}var ys=Object(F.a)({groupLabel:{fontWeight:"bolder",display:"inline-block",verticalAlign:"middle",color:"#666",fontSize:"120%",margin:"10px 0px",transition:"margin 0.218s linear",fontStyle:"italic"},divider:{marginTop:15,borderTop:"1px dotted #ccc"}});function hs(e){var t=e.element,n=e.index,i=(e.label,Object(a.useState)(!1)),o=Object(l.a)(i,2),c=o[0],s=o[1],u=Object(a.useState)(null),m=Object(l.a)(u,2),p=m[0],b=m[1],f=Object(a.useState)(null),v=Object(l.a)(f,2),g=v[0],y=v[1],h=Object(a.useState)(null),O=Object(l.a)(h,2),E=O[0],j=O[1],x=ys(),w=function(e,n){var a=Object(P.getBusinessObject)(t),r="camunda:".concat(e);a&&(a.$attrs?a.$attrs[r]=n:a.$attrs=Object(d.a)({},r,n),n||delete a.$attrs[r])},k=r.a.useCallback((function(e){var n="camunda:".concat(e),a=Object(P.getBusinessObject)(t);return a.$attrs&&a.$attrs[n]||""}),[t]);var N=function(){var e=function(){var e=Object(P.getBusinessObject)(t);return Object(P.is)(t,"bpmn:Participant")&&(e=e.get("processRef")),e}(),n=function(e,t){return e&&C.a.getExtensionElements(e,t)||[]}(e,"camunda:ExecutionListener");if(n&&!(n.length<0)){var a=n.findIndex((function(e){return e&&e.$attrs&&"dmn_output_mapping"===e.$attrs.outId})),r=e&&e.extensionElements&&e.extensionElements.values;r&&r.splice(a,1),r&&0===r.length&&(r=void 0),e.extensionElements=r}};return Object(a.useEffect)((function(){var e=k("assignOutputToFields"),t=k("searchWith"),n=k("ifMultiple");j(z(e)),y(n),b(t)}),[k]),Object(a.useEffect)((function(){if(Object(P.is)(t,"bpmn:BusinessRuleTask")){var e=Object(P.getBusinessObject)(t);s(!!e)}else s(!1)}),[t]),c&&r.a.createElement("div",null,r.a.createElement(dn,{element:t,entry:{id:"assign-output-to-fields",label:J("Assign output to fields"),modelProperty:"assignOutputToFields",widget:"checkbox",get:function(){return{assignOutputToFields:E}},set:function(e,t){var n=!t.assignOutputToFields;j(n),w("assignOutputToFields",n),!1===n&&N()}}}),E&&r.a.createElement(r.a.Fragment,null,r.a.createElement(r.a.Fragment,null,n>0&&r.a.createElement("div",{className:x.divider})),r.a.createElement("div",{className:x.groupLabel},J("Relational field search")),r.a.createElement(on,{element:t,entry:{id:"searchWith",label:"Search with",modelProperty:"searchWith",selectOptions:[{name:"Equal",value:"Equal"},{name:"Like",value:"Like"}],emptyParameter:!0,get:function(){return{searchWith:p}},set:function(e,t){var n=t.searchWith;b(n),w("searchWith",n)}}}),r.a.createElement(on,{element:t,entry:{id:"ifMultiple",label:"If multiple",modelProperty:"ifMultiple",selectOptions:[{name:"Keep empty",value:"Keep empty"},{name:"Select first",value:"Select first"}],emptyParameter:!0,get:function(){return{ifMultiple:g}},set:function(e,t){var n=t.ifMultiple;y(n),w("ifMultiple",n)}}})))}var Os=n(428),Es=n(858),js=n(842),xs=n(843),ws=Object(F.a)((function(e){return{root:{height:"100%",overflow:"hidden",display:"flex",flexDirection:"column",justifyContent:"space-between"},groupLabel:{fontWeight:"bolder",display:"inline-block",verticalAlign:"middle",color:"#666",fontSize:"120%",margin:"10px 0px",transition:"margin 0.218s linear",fontStyle:"italic"},label:{fontWeight:"bolder",display:"inline-block",verticalAlign:"middle",color:"#666",fontSize:14,margin:"10px 0px",transition:"margin 0.218s linear",fontStyle:"italic"},divider:{marginTop:15,borderTop:"1px dotted #ccc"},comments:{overflowY:"auto",overflowX:"hidden"},textField:{marginTop:10,width:"100%"},reply:{display:"flex",alignItems:"center",justifyContent:"space-between"},button:{border:"1px solid #58B423",borderRadius:4,marginLeft:10},small:{width:e.spacing(4),height:e.spacing(4)},sublabel:{fontSize:14,margin:"10px 0px",fontStyle:"italic"},buttons:{margin:e.spacing(1),backgroundColor:"#0275d8",borderColor:"#0267bf",color:"white",textTransform:"none","&:hover":{backgroundColor:"#025aa5",borderColor:"#014682",color:"white"}}}})),ks={},Cs=function(e){if(ks[e])return ks[e];var t=function e(){var t=Math.round(10*Math.random())%De.length,n=Object.values(ks)||[];return n.includes(De[t])?n.length===De.length||n.includes("gray")?"gray":void e():De[t]}();return t?ks[e]=t:void 0};function Ns(e){var t=e.element,n=e.updateCommentsCount,i=Object(a.useState)(""),o=Object(l.a)(i,2),u=o[0],d=o[1],b=Object(a.useState)(null),f=Object(l.a)(b,2),v=f[0],g=f[1],y=Object(a.useState)(null),h=Object(l.a)(y,2),O=h[0],E=h[1],j=Object(a.useState)(null),x=Object(l.a)(j,2),w=x[0],k=x[1],C=ws(),N=function(e){return e.reduce((function(e,t){var n=t[1];return e[n]||(e[n]=[]),e[n].push([].concat(Object(s.a)(t),[!1])),e}),{})},S=function(e,t,n,a){var r=Object(c.a)({},O),i=r[e].findIndex((function(e){return e.includes(t)}));i>-1&&(r[e][i][a]=n,E(r))};return Object(a.useEffect)((function(){function e(){return(e=Object(p.a)(m.a.mark((function e(){var t;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,At();case 2:t=e.sent,k(t&&t["user.name"]||"");case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[]),Object(a.useEffect)((function(){var e=gu(t);E(N(e))}),[t]),r.a.createElement("div",{className:C.root},O&&0===Object.keys(O).length&&r.a.createElement("div",{style:{display:"flex",alignItems:"center"}},r.a.createElement("div",{style:{marginRight:20}},r.a.createElement(js.a,{style:{fontSize:25,color:"#666"}})),r.a.createElement("div",null,r.a.createElement("div",{className:C.groupLabel},"Add comments"),r.a.createElement("div",{className:C.sublabel},"You can add comments about diagrams or specific BPMN elements."))),r.a.createElement("div",{className:C.root},r.a.createElement("div",{className:C.comments},O&&Object.entries(O).map((function(e){var a=Object(l.a)(e,2),i=a[0],o=a[1];return r.a.createElement("div",{key:i},r.a.createElement("div",{className:C.label},function(e){return e===br()().format("DD/MM/YYYY")?"Today":e===br()().subtract(1,"days").format("DD/MM/YYYY")?"Yesterday":e}(i)),r.a.createElement("div",null,o&&o.length>0&&o.map((function(e,a){return r.a.createElement("div",{key:a,style:{display:"flex",alignItems:"flex-start",margin:"10px 0px"}},r.a.createElement("div",{style:{marginRight:10}},r.a.createElement(Es.a,{className:C.small,style:{background:Cs(e&&e[0]&&e[0].charAt(0))}},e&&e[0]&&e[0].charAt(0))),r.a.createElement("div",{style:{width:"calc(100% - 85px)"}},r.a.createElement("div",null,r.a.createElement("div",{style:{display:"flex",alignItems:"center"}},r.a.createElement("div",{style:{fontWeight:"bold",fontSize:14,marginRight:20}},e&&e[0]),r.a.createElement("div",{style:{color:"#999"}},e&&e[2]&&e[2].replace(".",":"))),e&&e[5]?r.a.createElement(r.a.Fragment,null,r.a.createElement(_n.a,{variant:"outlined",className:C.textField,onChange:function(e){return g(e.target.value)},defaultValue:e&&e[3],size:"small",placeholder:"comment",multiline:!0,rows:1}),r.a.createElement(In.a,{className:C.buttons,onClick:function(){S(i,e&&e[4],!1,5),S(i,e&&e[4],v,3),function(e,t,n){var a=gu(e),r=-1;a.some((function(e,n){var a=t[4]===e[4];return a&&(r=n),a})),-1!==r&&(a[r][3]=n);hu(e,a)}(t,e,v)}},"Update Comment"),r.a.createElement(In.a,{className:C.buttons,onClick:function(){S(i,e&&e[4],!1,5)}},"Cancel")):r.a.createElement("div",{style:{whiteSpace:"pre-wrap",overflowWrap:"break-word"}},e&&e[3]))),r.a.createElement("div",{style:{display:"flex",alignItems:"center"}},r.a.createElement(fn.a,{size:"small",onClick:function(){return S(i,e&&e[4],!0,5)}},r.a.createElement(qa.a,{fontSize:"small"})),r.a.createElement(fn.a,{size:"small",onClick:function(){!function(e,t){var n=Object(c.a)({},O),a=n[e].findIndex((function(e){return e.includes(t)}));a>-1&&(n[e].splice(a,1),E(n))}(i,e&&e[4]),Eu(t,e),n(!1)}},r.a.createElement(xs.a,{fontSize:"small"}))))}))))}))),r.a.createElement("div",{className:C.reply},r.a.createElement(_n.a,{label:"Reply...",variant:"outlined",className:C.textField,onChange:function(e){return d(e.target.value)},value:u,size:"small",multiline:!0,rows:4}),r.a.createElement(fn.a,{size:"small",className:C.button,onClick:function(){Ou(t,w,br()().format("DD/MM/YYYY"),br()().format("HH.mm"),u,Object(Os.a)());var e=gu(t);E(N(e)),d(""),n(!0)}},r.a.createElement(xn.a,{fontSize:"large",style:{color:"#58B423"}})))))}var Ss=n(859),Ms=n(844),Ts=n(850),Ps=n(845),Fs=n(416),_s=n.n(Fs),Rs=n(415),Ls=n.n(Rs),Ds=Object(F.a)((function(e){return{select:{width:"100%",background:"white",borderRadius:0}}}));function Is(e){var t=e.value,n=e.onChange,i=e.options,o=void 0===i?[]:i,c=(e.className,e.selectClassName),s=(t||{}).name,u=void 0===s?"":s,m=Ds(),d=Object(a.useState)(u),p=Object(l.a)(d,2),b=p[0],f=p[1];return Object(a.useEffect)((function(){f(u)}),[u]),r.a.createElement(Sn.a,{className:m.select,value:b||"",onChange:function(e){var t=o.find((function(t){return t.name===e.target.value}));n(t,e),f(e.target.value)},renderValue:function(e){var t=o.find((function(t){return t.name===e}));return t?r.a.createElement(sa.a,{label:t.title,size:"small",style:{background:t&&t.color,color:t&&t.border||"white"}}):r.a.createElement(r.a.Fragment,null)},inputProps:{name:"".concat(u),id:"outlined-".concat(u,"-native-simple")},classes:{select:c},variant:"outlined"},o&&o.map((function(e){return r.a.createElement(kn.a,{value:e.name,key:e.name},r.a.createElement(sa.a,{key:e.name,label:e.title,size:"small",style:{background:e&&e.color,color:e&&e.border||"white"}}))})))}Is.defaultProps={value:{},onChange:function(){}};var As=Is,Vs=Object(F.a)((function(e){return{label:{fontWeight:"bolder",display:"inline-block",verticalAlign:"middle",color:"#666",margin:"3px 0px"},select:{margin:0},wkfStatusColor:{padding:5,background:"white"},tableCell:{padding:"3px !important"},tableHead:{padding:"3px !important",fontWeight:"bolder",color:"#666",margin:"3px 0px"},tableData:{color:"black"},linkIcon:{color:"#0275d8",marginLeft:5,cursor:"pointer"},save:{margin:e.spacing(1),backgroundColor:"#0275d8",borderColor:"#0267bf",color:"white",textTransform:"none",width:"100%","&:hover":{backgroundColor:"#025aa5",borderColor:"#014682",color:"white"}},cardContent:{overflow:"auto",maxHeight:"80%",minWidth:250},cardActionView:{justifyContent:"flex-end"},buttons:{display:"flex",flexDirection:"column",alignItems:"center"},previousVersions:{display:"flex",alignItems:"center",justifyContent:"space-between"},expand:{transform:"rotate(0deg)",marginLeft:"auto",transition:e.transitions.create("transform",{duration:e.transitions.duration.shortest})},expandOpen:{transform:"rotate(180deg)"}}}));var Bs=function(e){window.top.document.getElementsByTagName("iframe")[0]&&window.top.document.getElementsByTagName("iframe")[0].contentWindow.parent.axelor.$openTab(e)},$s=function(e,t){window.top.document.getElementsByTagName("iframe")[0]&&window.top.document.getElementsByTagName("iframe")[0].contentWindow.parent.axelor.$openHtmlTab(e,J(t))};function Ws(e){var t=e.element,n=e.wkf,i=void 0===n?{}:n,o=e.reloadView,s=e.handleSnackbarClick,u=e.enableAppBuilder,b=void 0!==u&&u,f=e.fetchDiagram,v=e.showError,g=Object(a.useState)(null),y=Object(l.a)(g,2),h=y[0],O=y[1],E=Object(a.useState)(null),j=Object(l.a)(E,2),x=j[0],w=j[1],k=Object(a.useState)(null),C=Object(l.a)(k,2),N=C[0],S=C[1],M=Object(a.useState)(!1),T=Object(l.a)(M,2),P=T[0],F=T[1],_=Object(a.useState)(null),R=Object(l.a)(_,2),L=R[0],D=R[1],B=Object(a.useState)(!0),$=Object(l.a)(B,2),W=$[0],z=$[1],G=i||{},U=G.statusSelect,H=void 0===U?1:U,q=G.isActive,K=t&&t.$attrs||{},Y=[Le[1],Le[2],Le[3]],X=Vs(),Z=function(){F(!1),D(null)},Q=function(){var e=Object(p.a)(m.a.mark((function e(){var t,n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ve.action({model:"com.axelor.apps.base.db.Wizard",action:"action-wkf-model-view-dashboard",data:{context:{_model:"om.axelor.apps.base.db.Wizard",_wkf:Object(c.a)({},i),process:L&&L.name,_signal:"showDashboardBtn",_source:"showDashboardBtn",_viewName:"wfk-model-select-process-wizard-form",_viewType:"form",_views:{name:"wfk-model-select-process-wizard-form",type:"form"}}}});case 2:(t=e.sent)&&t.data&&t.data[0]&&t.data[0].view&&(n=t.data[0].view,Bs(n),Z());case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),ee=function(){var e=Object(p.a)(m.a.mark((function e(){var t;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ve.action({model:"com.axelor.apps.bpm.db.WkfModel",action:"action-wkf-model-method-back-to-draft",data:{context:Object(c.a)({_model:"com.axelor.apps.bpm.db.WkfModel"},i)}});case 2:(t=e.sent)&&t.data&&t.data[0]&&t.data[0].reload&&(s("success","Sucessfully drafted"),o());case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),te=function(){var e=Object(p.a)(m.a.mark((function e(){var t;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ve.action({model:"com.axelor.apps.bpm.db.WkfModel",action:"action-wkf-model-method-terminate",data:{context:Object(c.a)({_model:"com.axelor.apps.bpm.db.WkfModel"},i)}});case 2:(t=e.sent)&&t.data&&t.data[0]&&t.data[0].reload&&(s("success","Terminated"),o());case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),ae=function(){var e=Object(p.a)(m.a.mark((function e(){var t,n,a;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ve.action({model:"com.axelor.apps.bpm.db.WkfModel",action:"action-wkf-model-display-wkf-state",data:{context:Object(c.a)({_model:"com.axelor.apps.bpm.db.WkfModel"},i)}});case 2:(t=e.sent)&&0===t.status&&(n=(t||{}).data,(a=n&&n[0]&&n[0].view&&n[0].view.context&&n[0].view.context.$imageUrl)&&$s(a,"BPM State"));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),re=function(){var e=Object(p.a)(m.a.mark((function e(){var t,n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ve.action({model:"com.axelor.apps.bpm.db.WkfModel",action:" action-wkf-model-method-create-new-version",data:{context:Object(c.a)(Object(c.a)({_model:"com.axelor.apps.bpm.db.WkfModel"},i),{},{_signal:"newVersionBtn",_source:"newVersionBtn",_viewName:"wkf-model-form",_viewType:"form",__check_version:!0,_views:[{type:"grid",name:"wkf-model-grid"},{type:"form",name:"wkf-model-form"}]})}});case 2:if(!((t=e.sent)&&t.data&&t.data[0]&&t.data[0].values&&t.data[0].values.newVersionId)){e.next=8;break}if(n=t.data[0].values.newVersionId){e.next=7;break}return e.abrupt("return");case 7:f(n);case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),ie=r.a.useCallback(Object(p.a)(m.a.mark((function e(){var t,n,a;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=[],n=(i||{}).previousVersion,a=function(){var e=Object(p.a)(m.a.mark((function e(n){var r,i,o;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!n){e.next=13;break}return r=(n||{}).id,e.next=4,rt(r);case 4:if(e.t0=e.sent,e.t0){e.next=7;break}e.t0={};case 7:if(i=e.t0,o=(i||{}).previousVersion,t.push(i),!i||!i.previousVersion){e.next=13;break}return e.next=13,a(o);case 13:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),e.next=5,a(n);case 5:S(t);case 6:case"end":return e.stop()}}),e)}))),[i]);return Object(a.useEffect)((function(){var e=t&&t.$attrs&&t.$attrs["camunda:wkfStatusColor"],n=Fe.find((function(t){return t.name===e}));w(n||{name:"blue",title:"Blue",color:"#2196f3"})}),[t]),Object(a.useEffect)((function(){if(b){var e=K["camunda:appBuilder"];e&&("object"===typeof e?O(e):function(){t.apply(this,arguments)}())}function t(){return(t=Object(p.a)(m.a.mark((function t(){var n;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Ze({data:{criteria:[{fieldName:"code",operator:"=",value:e}],operator:"and"}});case 2:n=t.sent,O(n&&n[0]);case 4:case"end":return t.stop()}}),t)})))).apply(this,arguments)}}),[K,b]),Object(a.useEffect)((function(){ie()}),[ie]),r.a.createElement(r.a.Fragment,null,r.a.createElement(Ss.a,{nonLinear:!0,activeStep:H-1},Y.map((function(e){return r.a.createElement(Ms.a,{key:e},r.a.createElement(Ts.a,{onClick:function(){}},e))}))),r.a.createElement(an,{element:t,canRemove:!0,showError:v,isDefinition:!0,entry:{id:"code",label:J("Code"),modelProperty:"code",shouldValidate:!0,get:function(){return{code:K["camunda:code"]}},set:function(e,n){t&&t.$attrs&&(t.$attrs["camunda:code"]=n&&n.code&&n.code.toUpperCase())},validate:function(e,t){if(!t.code)return{code:"Must provide a value"}}}}),r.a.createElement(an,{element:t,canRemove:!0,showError:v,isDefinition:!0,entry:{id:"diagramName",label:J("Name"),modelProperty:"diagramName",shouldValidate:!0,get:function(){return{diagramName:K["camunda:diagramName"]}},set:function(e,n){t&&t.$attrs&&(t.$attrs["camunda:diagramName"]=n.diagramName)},validate:function(e,t){if(!t.diagramName)return{diagramName:"Must provide a value"}}}}),b&&r.a.createElement(r.a.Fragment,null,r.a.createElement("label",{className:X.label},J("App builder")),r.a.createElement(ei,{className:X.select,update:function(e,n){O(e),t&&t.$attrs&&(t.$attrs["camunda:appBuilder"]=e.code)},name:"appBuilder",value:h,isLabel:!1,fetchMethod:function(){return Ze()}})),r.a.createElement(an,{element:t,canRemove:!0,entry:{id:"versionTag",label:J("Version Tag"),modelProperty:"versionTag",get:function(){return{versionTag:K["camunda:versionTag"]}},set:function(e,n){t&&t.$attrs&&(t.$attrs["camunda:versionTag"]=n.versionTag)}}}),r.a.createElement("label",{className:X.label},J("Wkf status color")),r.a.createElement("br",null),r.a.createElement(As,{name:"wkfStatusColor",onChange:function(e){w(e),t&&t.$attrs&&(t.$attrs["camunda:wkfStatusColor"]=e&&e.name)},value:x,options:Fe,selectClassName:X.wkfStatusColor}),r.a.createElement(en,{element:t,canRemove:!0,rows:8,entry:{id:"description",label:J("Description"),modelProperty:"description",get:function(){return{description:K["camunda:description"]}},set:function(e,n){t&&t.$attrs&&(t.$attrs["camunda:description"]=n.description)}}}),N&&N.length>0&&r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:X.previousVersions},r.a.createElement("label",{className:X.label,style:{marginTop:10}},J("Previous Versions")),r.a.createElement("div",null,r.a.createElement(V.a,{title:J("Refresh"),children:r.a.createElement(fn.a,{onClick:ie,"aria-label":"Refresh"},r.a.createElement(Ls.a,null))}),r.a.createElement(fn.a,{className:ne()(X.expand,Object(d.a)({},X.expandOpen,W)),onClick:function(){z((function(e){return!e}))},"aria-expanded":W,"aria-label":"show more"},r.a.createElement(_s.a,null)))),r.a.createElement(Ps.a,{in:W,timeout:"auto",unmountOnExit:!0},r.a.createElement(Uc.a,{style:{marginTop:10}},r.a.createElement(qc.a,null,r.a.createElement(Lo.a,{size:"small","aria-label":"a dense table"},r.a.createElement("colgroup",null,r.a.createElement("col",{width:"5%"}),r.a.createElement("col",{width:"23%"}),r.a.createElement("col",{width:"22%"}),r.a.createElement("col",{width:"15%"}),r.a.createElement("col",{width:"15%"}),r.a.createElement("col",{width:"5%"})),r.a.createElement(Ao.a,null,r.a.createElement(Vo.a,null,r.a.createElement(Io.a,{className:X.tableHead,align:"center"}),r.a.createElement(Io.a,{className:X.tableHead,align:"center"},J("Code")),r.a.createElement(Io.a,{className:X.tableHead,align:"center"},J("Name")),r.a.createElement(Io.a,{className:X.tableHead,align:"center"},J("Version tag")),r.a.createElement(Io.a,{className:X.tableHead,align:"center"},J("Status")),r.a.createElement(Io.a,{className:X.tableHead,align:"center"},J("App builder")))),r.a.createElement(Do.a,null,N.map((function(e,t){return r.a.createElement(Vo.a,{key:t},r.a.createElement(Io.a,{className:X.tableData,align:"center"},r.a.createElement(Ja.a,{className:X.linkIcon,onClick:function(){window.top.document.getElementsByTagName("iframe")[0].contentWindow.parent.axelor.$openHtmlTab("wkf-editor/?id=".concat(e&&e.id),J("BPM editor"))}})),r.a.createElement(Io.a,{className:X.tableData,align:"center"},e.code),r.a.createElement(Io.a,{className:X.tableData,align:"center"},e.name),r.a.createElement(Io.a,{className:X.tableData,align:"center"},e.versionTag),r.a.createElement(Io.a,{className:X.tableData,align:"center"},J(Le[e.statusSelect])),r.a.createElement(Io.a,{className:X.tableData,align:"center"},e.appBuilder&&e.appBuilder.name))})))))))),r.a.createElement(A.a,{className:X.buttons},2===H&&q&&r.a.createElement(In.a,{variant:"contained",className:X.save,color:"primary",onClick:te},J("wkf.terminate.btn")),3===H&&q&&r.a.createElement(In.a,{variant:"contained",className:X.save,color:"primary",onClick:ee},J("Back to Draft")),r.a.createElement(In.a,{variant:"contained",className:X.save,color:"primary",onClick:ae},J("BPM State")),2===H&&r.a.createElement(In.a,{variant:"contained",className:X.save,color:"primary",onClick:re},J("New version")),r.a.createElement(In.a,{variant:"contained",className:X.save,color:"primary",onClick:function(){i&&i.wkfProcessList&&F(!0)}},J("Dashboard"))),P&&r.a.createElement(I.a,{fullWidth:!0,scroll:"paper",open:P,onClose:function(e,t){"backdropClick"!==t&&Z()},"aria-labelledby":"scroll-dialog-title"},r.a.createElement(za.a,{id:"scroll-dialog-title"},J("Select Process")),r.a.createElement(Ga.a,{dividers:!0,classes:{root:X.cardContent}},r.a.createElement("label",{className:X.label},J("Process")),r.a.createElement(ei,{className:X.select,options:i&&i.wkfProcessList,update:function(e){D(e)},name:"wkfProcessList",value:L,isLabel:!1})),r.a.createElement(Jo.a,{className:X.cardActionView},L&&r.a.createElement(In.a,{variant:"contained",className:X.save,color:"primary",onClick:Q},J("Show")),r.a.createElement(In.a,{variant:"contained",className:X.save,color:"primary",onClick:Z},J("Close")))))}var Js=function(e){if(Object(P.is)(e,"bpmn:Process"))return!0;var t=Fa.a.getServiceTaskLikeBusinessObject(e),n="external"===Fa.a.getImplementationType(t);return!!Fa.a.isExternalCapable(t)&&n},zs=function(e){var t=Object(P.getBusinessObject)(e);if(Object(P.is)(e,"bpmn:Process")||Object(P.is)(e,"bpmn:Participant")&&t.get("processRef"))return!0;var n=Object(P.getBusinessObject)(e);return!(!Ta.a.isAsyncBefore(n)&&!Ta.a.isAsyncAfter(n))||!!Object(P.is)(e,"bpmn:Event")&&!!Aa.a.getTimerEventDefinition(e)};function Gs(e,t,n,a,r,i,o){e=e&&(e.labelTarget||e);var l,c,s={id:"general",label:i("General"),entries:[]};Object(P.is)(e,"bpmn:Process")&&(l={description:"This maps to the process definition key."}),Object(P.is)(e,"bpmn:UserTask")&&(l={description:"This maps to the task definition key."}),Object(P.is)(e,"bpmn:Participant")&&(c={processIdDescription:"This maps to the process definition key."}),function(e,t,n,a){var r=a&&a.description;e.entries.push({id:"id",label:n("Id"),description:r&&n(r),modelProperty:"id",widget:"textField",getProperty:function(e){return Object(P.getBusinessObject)(e).id},setProperty:function(e,t){(e=e.labelTarget||e).businessObject&&(e.businessObject.id=t.id)},validate:function(e,t){var a=t.id,r=Object(P.getBusinessObject)(e),i=cn.a.isIdValid(r,a,n);return i?{id:i}:{}}})}(s,0,i,l),La(s,e,n,t,i,o),function(e,t,n,a){var r=Object(P.getBusinessObject)(t),i=a&&a.processIdDescription;if((Object(P.is)(t,"bpmn:Process")||Object(P.is)(t,"bpmn:Participant")&&r.get("processRef"))&&Object(P.is)(t,"bpmn:Participant")){var o={id:"process-id",label:n("Process Id"),description:i&&n(i),modelProperty:"processId",widget:"textField",get:function(e){return{processId:iu(e,"id").id}},set:function(e,t){e&&e.businessObject&&e.businessObject.processRef&&(e.businessObject.processRef.id=t.processId)},validate:function(e,t){var a=t.processId,r=Object(P.getBusinessObject)(e);if(r&&r.processRef){var i=cn.a.isIdValid(r&&r.processRef,a,n);return i?{processId:i}:{}}}};e.entries.push(o);var l=_a(t,{id:"process-name",label:n("Process Name")})[0];l.get=function(e){return iu(e,"name")},l.set=function(e,t){e&&e.businessObject&&e.businessObject.processRef&&(e.businessObject.processRef.name=t.name)},e.entries.push(l)}}(s,e,i,c),function(e,t,n){var a=Object(P.getBusinessObject)(t);if(a&&(Object(P.is)(t,"bpmn:Process")||Object(P.is)(t,"bpmn:Participant")&&a&&a.get("processRef"))){var r={id:"versionTag",label:n("Version Tag"),modelProperty:"versionTag",widget:"textField",get:function(e){var t=Object(P.getBusinessObject)(e),n={};return n.versionTag=t&&t.get("versionTag"),n},set:function(e,t){e&&e.businessObject&&(e.businessObject.versionTag=t.versionTag)}};Object(P.is)(t,"bpmn:Participant")&&(r.get=function(e){var t=a&&a.get("processRef");return{versionTag:t&&t.get("camunda:versionTag")}},r.set=function(e,t){e&&e.businessObject&&e.businessObject.processRef&&(e.businessObject.processRef.versionTag=t.versionTag)}),e.entries.push(r)}}(s,e,i),function(e,t,n){var a=Object(P.getBusinessObject)(t);if(a&&(Object(P.is)(t,"bpmn:Process")||Object(P.is)(t,"bpmn:Participant")&&a&&a.get("processRef"))){var r={id:"process-is-executable",label:n("Executable"),modelProperty:"isExecutable",widget:"checkbox",get:function(e){var t=Object(P.getBusinessObject)(e),n={};return n.isExecutable=t&&t.get("isExecutable"),n},set:function(e,t){e&&e.businessObject&&(e.businessObject.isExecutable=!t.isExecutable)}};Object(P.is)(t,"bpmn:Participant")&&(r.get=function(e){return iu(e,"isExecutable")},r.set=function(e,t){if(!Object(P.is)(e,"bpmn:Participant"))return{};var n=Object(P.getBusinessObject)(e).get("processRef");n.isExecutable=!t.isExecutable,e.businessObject.processRef=n}),e.entries.push(r)}}(s,e,i),function(e,t,n){t&&!Da.includes(t.type)&&e.entries.push({id:"color",label:n("Color"),widget:"colorPicker"})}(s,e,i);var u={id:"userTaskProps",label:i("Details"),entries:[],component:Bc},m={id:"serviceTaskDelegateProps",label:i("Details"),entries:[],component:oc},d={id:"scriptProps",label:i("Details"),entries:[],component:ec},p={id:"linkProps",label:i("Details"),entries:[],component:Ii},b={id:"callActivityProps",label:i("Details"),entries:[],component:ri},f={id:"eventProps",label:i("Details"),entries:[],component:Ri},v={id:"conditionalProps",label:i("Details"),entries:[],component:li},g={id:"startEventInitiator",label:i("Details"),entries:[],component:cc},y={id:"modelProps",label:i("Details"),entries:[],component:Gc},h={id:"multiInstance",label:i("Multi Instance"),entries:[],component:Ac},O={id:"businessRuleTasks",label:i("Business rule tasks"),entries:[],component:hs,className:"businessRuleTask"},E={id:"translations",label:i("Translations"),entries:[],component:gs},j={id:"jobConfiguration",label:i("Job Configuration"),entries:[],enabled:zs};!function(e,t,n,a){Object(P.is)(t,"camunda:JobPriorized")&&(e.entries=e.entries.concat(function(e,t,n,a){var r=n.getBusinessObject;return[{id:"jobPriority",label:a("Job Priority"),modelProperty:"jobPriority",widget:"textField",get:function(e,t){var n=r(e);return{jobPriority:n&&n.get("camunda:jobPriority")}},set:function(e,t){e&&e.businessObject&&(e.businessObject.jobPriority=t.jobPriority||void 0),e&&e.businessObject&&e.businessObject.processRef&&(e.businessObject.processRef.jobPriority=t.jobPriority||void 0)}}]}(0,0,{getBusinessObject:function(e){var t=Object(P.getBusinessObject)(e);return Object(P.is)(t,"bpmn:Participant")?t&&t.get("processRef"):t}},a))),Object(P.is)(t,"camunda:AsyncCapable")&&(e.entries=e.entries.concat(Ba(0,n,{getBusinessObject:P.getBusinessObject},a)))}(j,e,n,i);var x={id:"externalTaskConfiguration",label:i("External Task Configuration"),entries:[],enabled:Js};$a(x,e,0,i);var w=[];return w.push(s),w.push(u),w.push(m),w.push(d),w.push(p),w.push(b),w.push(f),w.push(v),w.push(g),w.push(y),w.push(O),w.push(h),w.push(E),e&&"bpmn:Process"!==e.type&&(w.push(x),w.push(j)),w}function Us(e,t,n,a){return[{id:"variables",label:a("Variables"),entries:[],component:wc}]}function Hs(e,t,n,a){return[{id:"listeners",label:a("Listeners"),entries:[],component:vc}]}function qs(e,t,n,a){return[{id:"view-attributes",label:a("View Attributes"),entries:[],component:ns}]}function Ks(e,t,n,a){return[{id:"menu-action-tab",label:a("Menu/Action"),entries:[],component:cs}]}function Ys(e,t,n,a){return[{id:"configuration",label:a("Process configs"),entries:[],component:fs}]}function Xs(e,t,n,a){return[{id:"comments",label:a("Comments"),entries:[],component:Ns,className:"comments"}]}function Zs(e,t,n,a){return[{id:"definitions",label:a("Definitions"),entries:[],component:Ws}]}var Qs=["general","menu-action-tab","listeners","comments"],eu=["general","menu-action-tab","comments"],tu=["general","listeners","comments"],nu=["general","comments"],au=["general","listeners","view-attributes","menu-action-tab","comments"],ru=[{type:"bpmn:Process",subType:void 0,tabs:["general","configuration","listeners","comments"]},{type:"bpmn:StartEvent",subType:void 0,tabs:Qs},{type:"bpmn:EndEvent",subType:void 0,tabs:au},{type:"bpmn:ExclusiveGateway",subType:void 0,tabs:tu},{type:"bpmn:EventBasedGateway",subType:void 0,tabs:tu},{type:"bpmn:InclusiveGateway",subType:void 0,tabs:tu},{type:"bpmn:ComplexGateway",subType:void 0,tabs:tu},{type:"bpmn:ParallelGateway",subType:void 0,tabs:tu},{type:"bpmn:AdHocSubProcess",subType:void 0,tabs:Qs},{type:"bpmn:StartEvent",subType:"bpmn:MessageEventDefinition",tabs:Qs},{type:"bpmn:StartEvent",subType:"bpmn:TimerEventDefinition",tabs:Qs},{type:"bpmn:StartEvent",subType:"bpmn:ConditionalEventDefinition",tabs:Qs},{type:"bpmn:StartEvent",subType:"bpmn:SignalEventDefinition",tabs:Qs},{type:"bpmn:StartEvent",subType:"bpmn:EscalationEventDefinition",tabs:tu},{type:"bpmn:StartEvent",subType:"bpmn:ErrorEventDefinition",tabs:tu},{type:"bpmn:StartEvent",subType:"bpmn:CancelEventDefinition",tabs:tu},{type:"bpmn:StartEvent",subType:"bpmn:CompensateEventDefinition",tabs:tu},{type:"bpmn:EndEvent",subType:"bpmn:CancelEventDefinition",tabs:tu},{type:"bpmn:EndEvent",subType:"bpmn:SignalEventDefinition",tabs:["general","variables","view-attributes","menu-action-tab","listeners","comments"]},{type:"bpmn:StartEvent",subType:"bpmn:IntermediateCatchEvent",tabs:au},{type:"bpmn:IntermediateCatchEvent",subType:"bpmn:MessageEventDefinition",tabs:au},{type:"bpmn:IntermediateThrowEvent",subType:void 0,tabs:tu},{type:"bpmn:IntermediateThrowEvent",subType:"bpmn:MessageEventDefinition",tabs:tu},{type:"bpmn:IntermediateCatchEvent",subType:"bpmn:TimerEventDefinition",tabs:au},{type:"bpmn:EndEvent",subType:"bpmn:MessageEventDefinition",tabs:au},{type:"bpmn:IntermediateCatchEvent",subType:"bpmn:ConditionalEventDefinition",tabs:au},{type:"bpmn:IntermediateCatchEvent",subType:"bpmn:LinkEventDefinition",tabs:au},{type:"bpmn:IntermediateThrowEvent",subType:"bpmn:LinkEventDefinition",tabs:nu},{type:"bpmn:IntermediateThrowEvent",subType:"bpmn:CompensateEventDefinition",tabs:tu},{type:"bpmn:EndEvent",subType:"bpmn:CompensateEventDefinition",tabs:au},{type:"bpmn:IntermediateCatchEvent",subType:"bpmn:SignalEventDefinition",tabs:au},{type:"bpmn:IntermediateThrowEvent",subType:"bpmn:SignalEventDefinition",tabs:["general","variables","listeners","comments"]},{type:"bpmn:EndEvent",subType:"bpmn:ErrorEventDefinition",tabs:au},{type:"bpmn:EndEvent",subType:"bpmn:TerminateEventDefinition",tabs:au},{type:"bpmn:Participant",subType:void 0,tabs:["general","configuration","listeners","comments"]},{type:"bpmn:Group",subType:void 0,tabs:eu},{type:"bpmn:Lane",subType:void 0,tabs:nu},{type:"bpmn:Collaboration",subType:void 0,tabs:nu},{type:"bpmn:SequenceFlow",subType:void 0,tabs:tu},{type:"bpmn:MessageFlow",subType:void 0,tabs:nu},{type:"bpmn:Task",subType:void 0,tabs:tu},{type:"bpmn:SendTask",subType:void 0,tabs:tu},{type:"bpmn:UserTask",subType:void 0,tabs:au},{type:"bpmn:ManualTask",subType:void 0,tabs:tu},{type:"bpmn:BusinessRuleTask",subType:void 0,tabs:tu},{type:"bpmn:ServiceTask",subType:void 0,tabs:tu},{type:"bpmn:ReceiveTask",subType:void 0,tabs:au},{type:"bpmn:ScriptTask",subType:void 0,tabs:tu},{type:"bpmn:CallActivity",subType:void 0,tabs:au},{type:"bpmn:SubProcess",subType:void 0,tabs:au},{type:"bpmn:IntermediateThrowEvent",subType:"bpmn:EscalationEventDefinition",tabs:tu},{type:"bpmn:EndEvent",subType:"bpmn:EscalationEventDefinition",tabs:au},{type:"bpmn:TextAnnotation",subType:void 0,tabs:nu},{type:"bpmn:Association",subType:void 0,tabs:eu},{type:"bpmn:Transaction",subType:void 0,tabs:Qs},{type:"bpmn:BoundaryEvent",subType:void 0,tabs:tu},{type:"bpmn:BoundaryEvent",subType:"bpmn:MessageEventDefinition",tabs:tu},{type:"bpmn:BoundaryEvent",subType:"bpmn:TimerEventDefinition",tabs:tu},{type:"bpmn:BoundaryEvent",subType:"bpmn:EscalationEventDefinition",tabs:tu},{type:"bpmn:BoundaryEvent",subType:"bpmn:ConditionalEventDefinition",tabs:tu},{type:"bpmn:BoundaryEvent",subType:"bpmn:ErrorEventDefinition",tabs:tu},{type:"bpmn:BoundaryEvent",subType:"bpmn:CancelEventDefinition",tabs:tu},{type:"bpmn:BoundaryEvent",subType:"bpmn:SignalEventDefinition",tabs:tu},{type:"bpmn:BoundaryEvent",subType:"bpmn:CompensateEventDefinition",tabs:tu},{type:"bpmn:DataObjectReference",subType:void 0,tabs:nu},{type:"bpmn:DataStoreReference",subType:void 0,tabs:nu},{type:"bpmn:DataOutputAssociation",subType:void 0,tabs:nu},{type:"bpmn:Definitions",subType:void 0,tabs:["definition"]}],iu=function(e,t){if(!Object(P.is)(e,"bpmn:Participant"))return{};var n=Object(P.getBusinessObject)(e).get("processRef"),a={};return a[t]=n&&n.get(t),a},ou=function(){for(var e,t,n,a=/[?&]id=([^&#]*)/g,r=/[?&]timerTask=([^&#]*)/g,i=window.location.href,o=!0;e=a.exec(i);)t=e[1];for(;n=r.exec(i);)o=z(n[1]);return{id:t,timerTask:o}},lu=function(){document.getElementById("inputFile").click()},cu=function(e){if(e){var t=(e.type||e.$type).toLowerCase(),n=!1;if("bpmn:subprocess"===t){var a=uu(e)||{};n=a.isLoop,n=a.isSequential}return t.includes("boundary")?t:t.includes("event")?"event":t.includes("task")?"task":t.includes("gateway")?"gateway":t.includes("bpmn:subprocess")&&n?"multiinstanceparallel":t}},su=function(){var e=Object(p.a)(m.a.mark((function e(t,n,a){var r,i;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=mu(a),e.next=3,ve.add("com.axelor.apps.bpm.db.WkfModel",Object(c.a)(Object(c.a)({},t),{},{oldNodes:JSON.stringify(r)}));case 3:(i=e.sent)&&i.data&&i.data[0]&&n(Object(c.a)({},i.data[0]));case 5:case"end":return e.stop()}}),e)})));return function(t,n,a){return e.apply(this,arguments)}}();function uu(e){var t=function(e){var t=Object(P.getBusinessObject)(e);return t&&t.loopCharacteristics}(e);return{isLoop:t&&"bpmn:MultiInstanceLoopCharacteristics"===t.$type,isSequential:t&&t.isSequential}}var mu=function(e){var t=e._definitions&&e._definitions.rootElements,n=t&&t.filter((function(e){return"bpmn:Process"===e.$type})),a={};return n&&n.forEach((function(e){var t=function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],a=Object(s.a)(n);return t&&t.flowElements&&t.flowElements.forEach((function(t){if(["event","task","gateway","bpmn:callactivity","bpmn:boundaryevent"].includes(cu(t)))a.push({id:t.id,name:t.name||t.id,type:cu(t)});else if(Pe.includes(cu(t))){if(Pe.includes(cu(t))){var n=uu(t),r=n.isLoop,i=n.isSequential;a.push({id:t.id,name:t.name||t.id,type:r?i?"multiinstancesequential":"multiinstanceparallel":cu(t)})}var o=e(t,[]);a=[].concat(Object(s.a)(a),Object(s.a)(o||[]))}})),a}(e);a[e.id]={elements:t}})),a};function du(e,t,n){return"function"!==typeof e.enabled||e.enabled(t,n)}function pu(e,t){return"function"!==typeof e.enabled||e.enabled(t)}function bu(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0,n=t.$type||t.type,a=t.businessObject&&t.businessObject.eventDefinitions&&t.businessObject.eventDefinitions[0].$type,r=ru.find((function(e){return e.type===n&&e.subType===a}))||{},i=r&&r.tabs,o=[];return e&&e.forEach((function(e){e&&(i&&i.includes(e.id)&&pu(e,t)&&o.push(e))})),o}function fu(e,t){var n=e.get("canvas"),a=(e.get("elementRegistry"),e.get("bpmnFactory"));e.get("elementTemplates");return bu(function(e,t,n,a,r,i,o){var l={id:"definition",label:i("General"),groups:Zs(0,0,0,i)},c={id:"general",label:i("General"),groups:Gs(e,t,n,0,0,i,o)},s={id:"variables",label:i("Variables"),groups:Us(0,0,0,i)},u={id:"listeners",label:i("Listeners"),groups:Hs(0,0,0,i)};return[l,c,{id:"view-attributes",label:i("View Attributes"),groups:qs(0,0,0,i)},s,{id:"menu-action-tab",label:i("Menu/Action"),groups:Ks(0,0,0,i)},{id:"configuration",label:i("Configuration"),groups:Ys(0,0,0,i)},u,{id:"comments",label:i("Comments"),groups:Xs(0,0,0,i)}]}(t,n,a,0,0,J,e),t)}function vu(e,t){var n,a=e.businessObject,r=a&&a.get("documentation");return r.some((function(e){return"text/x-comments"===e.textFormat&&(n=e)})),!n&&t&&(n=a&&a.$model.create("bpmn:Documentation",{textFormat:"text/x-comments"}),r.push(n)),n}function gu(e){var t=vu(e);return t&&t.text?t.text.split(/;\r?\n;/).map((function(e){return e.split(/:/)})):[]}function yu(e){var t=gu(e);return t&&t.length}function hu(e,t){var n=vu(e,!0),a=t.map((function(e){return e.join(":")})).join(";\n;");n.text=a}function Ou(e,t,n,a,r,i){var o=gu(e);o.push([t,n,a,r,i]),hu(e,o)}function Eu(e,t){var n=gu(e),a=-1;n.some((function(e,n){var r=t[4]===e[4];return r&&(a=n),r})),-1!==a&&n.splice(a,1),hu(e,n)}function ju(e){return e&&"bpmn:Definitions"===e.$type}var xu=Object(F.a)((function(e){return{groupLabel:{fontWeight:"bolder",display:"inline-block",verticalAlign:"middle",color:"#666",fontSize:"120%",margin:"10px 0px",transition:"margin 0.218s linear",fontStyle:"italic"},groupContainer:{marginTop:10},divider:{marginTop:15,borderTop:"1px dotted #ccc"},businessRuleTask:{marginTop:0},comments:{height:"calc(100% - 66px)"}}}));function wu(e){var t=e.entry,n=e.selectedElement,a=e.changeColor,i=e.bpmnModeler;e.wkf;return!function(e,t,n){return"function"===typeof t.hidden?t.hidden(e,n):"function"===typeof t.showLink&&!t.showLink(e,n)}(n,t)&&r.a.createElement("div",{key:t.id},r.a.createElement(Sa,{entry:t,selectedElement:n,changeColor:a,bpmnModeler:i}))}function ku(e){var t=e.group,n=e.index,a=e.selectedElement,i=e.id,o=e.handleAdd,l=e.wkf,c=e.reloadView,s=e.onSave,u=e.openSnackbar,m=e.handleMenuActionTab,d=e.updateCommentsCount,p=e.handleSnackbarClick,b=e.enableAppBuilder,f=e.fetchDiagram,v=e.changeColor,g=e.bpmnModeler,y=e.showError,h=xu();return r.a.createElement("div",{key:t.id,"data-group":t.id,className:ne()(h.groupContainer,h[t.className])},t.component?r.a.createElement(t.component,{element:a,index:n,label:t.label,bpmnModeler:g,bpmnFactory:g&&g.get("bpmnFactory"),bpmnModdle:g&&g.get("moddle"),id:i,handleAdd:o,wkf:l,reloadView:c,onSave:s,openSnackbar:u.open,handleMenuActionTab:m,updateCommentsCount:d,handleSnackbarClick:p,enableAppBuilder:b,fetchDiagram:f,showError:y}):t.entries.length>0&&r.a.createElement(r.a.Fragment,null,r.a.createElement(r.a.Fragment,null,n>0&&r.a.createElement("div",{className:h.divider})),r.a.createElement("div",{className:h.groupLabel},t.label),r.a.createElement("div",null,t.entries.map((function(e,t){return r.a.createElement(wu,{entry:e,key:t,selectedElement:a,changeColor:v,bpmnModeler:g})})))))}var Cu=n(758),Nu=n(434),Su=Object(Ca.a)({root:{borderBottom:"1px solid #e8e8e8",minHeight:24,marginTop:10},indicator:{backgroundColor:"#52B415",top:0},flexContainer:{height:"100%"}})(Cu.a),Mu=Object(Ca.a)((function(e){return{root:{textTransform:"none",minWidth:72,fontWeight:e.typography.fontWeightRegular,marginRight:e.spacing(1),padding:"0px 10px",minHeight:24,borderLeft:"1px solid #ccc",borderRight:"1px solid #ccc",borderTop:"1px solid #ccc",fontSize:12,"&:hover":{opacity:1},"&$selected":{fontWeight:e.typography.fontWeightMedium}},selected:{}}}))((function(e){return r.a.createElement(Nu.a,Object.assign({disableRipple:!0},e))})),Tu=Object(F.a)((function(e){return{nodeTitle:{fontSize:"120%",fontWeight:"bolder"}}}));function Pu(e){var t=e.selectedElement,n=e.tabs,a=e.tabValue,i=e.handleChange,o=e.isMenuActionDisable,l=e.comments,c=e.id,s=e.handleAdd,u=e.wkf,m=e.reloadView,d=e.onSave,p=e.openSnackbar,b=e.handleMenuActionTab,f=e.updateCommentsCount,v=e.handleSnackbarClick,g=e.enableAppBuilder,y=e.fetchDiagram,h=e.changeColor,O=e.bpmnModeler,E=e.showError,j=Tu();return r.a.createElement(r.a.Fragment,null,r.a.createElement(ee.a,{className:j.nodeTitle},t?ju(t)?"":t.id:""),r.a.createElement(Su,{value:a,onChange:i,variant:"scrollable",scrollButtons:"auto",ScrollButtonComponent:Na},n.map((function(e,t){return r.a.createElement(Mu,{disabled:"menu-action-tab"===e.id&&o,label:"comments"===e.id&&l?"".concat(e.label," (").concat(l,")"):e.label,key:t,"data-tab":e.id})}))),r.a.createElement(r.a.Fragment,null,n&&n[a]&&n[a].groups&&n[a].groups.map((function(e,n){return r.a.createElement(r.a.Fragment,{key:e.id},du(e,t)&&r.a.createElement(ku,{group:e,index:n,selectedElement:t,id:c,handleAdd:s,wkf:u,reloadView:m,onSave:d,openSnackbar:p,handleMenuActionTab:b,updateCommentsCount:f,handleSnackbarClick:v,enableAppBuilder:g,fetchDiagram:y,changeColor:h,bpmnModeler:O,showError:E}))}))))}var Fu=n(16),_u=n.n(Fu),Ru=n(193),Lu=n.n(Ru),Du=n(301),Iu=n.n(Du),Au=n(303),Vu=n.n(Au),Bu=n(304),$u=n.n(Bu),Wu=n(305),Ju=n.n(Wu),zu=n(306),Gu=n.n(zu),Uu=n(308),Hu=n.n(Uu),qu=n(309),Ku=n.n(qu),Yu=n(310),Xu=n.n(Yu),Zu=n(311),Qu=n.n(Zu),em=n(312),tm=n.n(em),nm=n(313),am=n.n(nm),rm=n(314),im=n.n(rm),om=n(315),lm=n.n(om),cm=n(316),sm=n.n(cm),um=n(317),mm=n.n(um),dm=n(318),pm=n.n(dm),bm=n(319),fm=n.n(bm),vm=n(320),gm=n.n(vm),ym=n(321),hm=n.n(ym),Om=n(322),Em=n.n(Om),jm=n(323),xm=n.n(jm),wm=n(324),km=n.n(wm),Cm=n(325),Nm=n.n(Cm),Sm=function(e){var t=Object(P.getBusinessObject)(e);if(Object(P.is)(e,"bpmn:Process")||Object(P.is)(e,"bpmn:Participant")&&t.get("processRef"))return!0;var n=Fa.a.getServiceTaskLikeBusinessObject(e),a="external"===Fa.a.getImplementationType(n);return!!Fa.a.isExternalCapable(n)&&a},Mm=function(e){var t=Object(P.getBusinessObject)(e);if(Object(P.is)(e,"bpmn:Process")||Object(P.is)(e,"bpmn:Participant")&&t.get("processRef"))return!0;var n=Object(P.getBusinessObject)(e);return!(!Ta.a.isAsyncBefore(n)&&!Ta.a.isAsyncAfter(n))||!!Object(P.is)(e,"bpmn:Event")&&!!Aa.a.getTimerEventDefinition(e)};function Tm(e,t,n,a,r,i){e=e.labelTarget||e;var o,l,c={id:"general",label:i("General"),entries:[]};Object(P.is)(e,"bpmn:Process")&&(o={description:"This maps to the process definition key."}),Object(P.is)(e,"bpmn:UserTask")&&(o={description:"This maps to the task definition key."}),Object(P.is)(e,"bpmn:Participant")&&(l={processIdDescription:"This maps to the process definition key."}),Ju()(c,e,i,o),Gu()(c,e,n,t,i),Iu()(c,e,i,l),mm()(c,e,i),Hu()(c,e,i),hm()(c,e,r,i);var s=Em()(e,r,n,i),u={id:"details",label:i("Details"),entries:[]};Ku()(u,e,n,i),am()(u,e,n,i),$u()(u,e,i),Xu()(u,e,n,i),Vu()(u,e,n,a,i),im()(u,e,n,i),tm()(u,e,n,i),lm()(u,e,i);var m={id:"multiInstance",label:i("Multi Instance"),entries:[]};Qu()(m,e,n,i);var d={id:"jobConfiguration",label:i("Job Configuration"),entries:[],enabled:Mm};xm()(d,e,n,i);var p={id:"externalTaskConfiguration",label:i("External Task Configuration"),entries:[],enabled:Sm};Nm()(p,e,n,i);var b={id:"historyConfiguration",label:i("History Configuration"),entries:[]};km()(b,e,n,i);var f=[];return f.push(c),s.forEach((function(e){f.push(e)})),f.push(u),f.push(m),"bpmn:Process"!==e.type&&(f.push(p),f.push(d),f.push(b)),f}function Pm(e,t,n,a){var r={id:"variables",label:a("Variables"),entries:[]};return sm()(r,e,t,a),[r]}function Fm(e,t,n,a){var r={id:"listeners",label:a("Listeners"),entries:[]},i=pm()(r,e,t,a),o={id:"listener-details",entries:[],enabled:function(e,t){return i.getSelectedListener(e,t)},label:function(e,t){return function(e,t){return Object(P.is)(e,"camunda:ExecutionListener")?t("Execution Listener"):Object(P.is)(e,"camunda:TaskListener")?t("Task Listener"):""}(i.getSelectedListener(e,t),a)}};fm()(o,e,t,i,a);var l={id:"listener-fields",label:a("Field Injection"),entries:[],enabled:function(e,t){return i.getSelectedListener(e,t)}};return gm()(l,e,t,i,a),[r,o,l]}function _m(e,t,n,a,r,i){Lu.a.call(this,e),this.getTabs=function(e){return[{id:"general",label:i("General"),groups:Tm(e,t,n,a,r,i)},{id:"variables",label:i("Variables"),groups:Pm(e,n,0,i)},{id:"listeners",label:i("Listeners"),groups:Fm(e,n,0,i),enabled:function(e){return!Aa.a.getLinkEventDefinition(e)||!Object(P.is)(e,"bpmn:IntermediateThrowEvent")&&Aa.a.getLinkEventDefinition(e)}}]}}_m.$inject=["eventBus","canvas","bpmnFactory","elementRegistry","elementTemplates","translate"],_u()(_m,Lu.a);var Rm=n(180),Lm=n(1),Dm=[{label:"Start Event",actionName:"replace-with-none-start",className:"bpmn-icon-start-event-none",target:{type:"bpmn:StartEvent"}},{label:"Intermediate Throw Event",actionName:"replace-with-none-intermediate-throwing",className:"bpmn-icon-intermediate-event-none",target:{type:"bpmn:IntermediateThrowEvent"}},{label:"End Event",actionName:"replace-with-none-end",className:"bpmn-icon-end-event-none",target:{type:"bpmn:EndEvent"}},{label:"Message Start Event",actionName:"replace-with-message-start",className:"bpmn-icon-start-event-message",target:{type:"bpmn:StartEvent",eventDefinitionType:"bpmn:MessageEventDefinition"}},{label:"Timer Start Event",actionName:"replace-with-timer-start",className:"bpmn-icon-start-event-timer",target:{type:"bpmn:StartEvent",eventDefinitionType:"bpmn:TimerEventDefinition"}},{label:"Conditional Start Event",actionName:"replace-with-conditional-start",className:"bpmn-icon-start-event-condition",target:{type:"bpmn:StartEvent",eventDefinitionType:"bpmn:ConditionalEventDefinition"}},{label:"Signal Start Event",actionName:"replace-with-signal-start",className:"bpmn-icon-start-event-signal",target:{type:"bpmn:StartEvent",eventDefinitionType:"bpmn:SignalEventDefinition"}}],Im=[{label:"Start Event",actionName:"replace-with-none-start",className:"bpmn-icon-start-event-none",target:{type:"bpmn:StartEvent"}},{label:"Intermediate Throw Event",actionName:"replace-with-none-intermediate-throwing",className:"bpmn-icon-intermediate-event-none",target:{type:"bpmn:IntermediateThrowEvent"}},{label:"End Event",actionName:"replace-with-none-end",className:"bpmn-icon-end-event-none",target:{type:"bpmn:EndEvent"}}],Am=[{label:"Start Event",actionName:"replace-with-none-start",className:"bpmn-icon-start-event-none",target:{type:"bpmn:StartEvent"}},{label:"Intermediate Throw Event",actionName:"replace-with-none-intermediate-throw",className:"bpmn-icon-intermediate-event-none",target:{type:"bpmn:IntermediateThrowEvent"}},{label:"End Event",actionName:"replace-with-none-end",className:"bpmn-icon-end-event-none",target:{type:"bpmn:EndEvent"}},{label:"Message Intermediate Catch Event",actionName:"replace-with-message-intermediate-catch",className:"bpmn-icon-intermediate-event-catch-message",target:{type:"bpmn:IntermediateCatchEvent",eventDefinitionType:"bpmn:MessageEventDefinition"}},{label:"Message Intermediate Throw Event",actionName:"replace-with-message-intermediate-throw",className:"bpmn-icon-intermediate-event-throw-message",target:{type:"bpmn:IntermediateThrowEvent",eventDefinitionType:"bpmn:MessageEventDefinition"}},{label:"Timer Intermediate Catch Event",actionName:"replace-with-timer-intermediate-catch",className:"bpmn-icon-intermediate-event-catch-timer",target:{type:"bpmn:IntermediateCatchEvent",eventDefinitionType:"bpmn:TimerEventDefinition"}},{label:"Escalation Intermediate Throw Event",actionName:"replace-with-escalation-intermediate-throw",className:"bpmn-icon-intermediate-event-throw-escalation",target:{type:"bpmn:IntermediateThrowEvent",eventDefinitionType:"bpmn:EscalationEventDefinition"}},{label:"Conditional Intermediate Catch Event",actionName:"replace-with-conditional-intermediate-catch",className:"bpmn-icon-intermediate-event-catch-condition",target:{type:"bpmn:IntermediateCatchEvent",eventDefinitionType:"bpmn:ConditionalEventDefinition"}},{label:"Link Intermediate Catch Event",actionName:"replace-with-link-intermediate-catch",className:"bpmn-icon-intermediate-event-catch-link",target:{type:"bpmn:IntermediateCatchEvent",eventDefinitionType:"bpmn:LinkEventDefinition",eventDefinitionAttrs:{name:""}}},{label:"Link Intermediate Throw Event",actionName:"replace-with-link-intermediate-throw",className:"bpmn-icon-intermediate-event-throw-link",target:{type:"bpmn:IntermediateThrowEvent",eventDefinitionType:"bpmn:LinkEventDefinition",eventDefinitionAttrs:{name:""}}},{label:"Compensation Intermediate Throw Event",actionName:"replace-with-compensation-intermediate-throw",className:"bpmn-icon-intermediate-event-throw-compensation",target:{type:"bpmn:IntermediateThrowEvent",eventDefinitionType:"bpmn:CompensateEventDefinition"}},{label:"Signal Intermediate Catch Event",actionName:"replace-with-signal-intermediate-catch",className:"bpmn-icon-intermediate-event-catch-signal",target:{type:"bpmn:IntermediateCatchEvent",eventDefinitionType:"bpmn:SignalEventDefinition"}},{label:"Signal Intermediate Throw Event",actionName:"replace-with-signal-intermediate-throw",className:"bpmn-icon-intermediate-event-throw-signal",target:{type:"bpmn:IntermediateThrowEvent",eventDefinitionType:"bpmn:SignalEventDefinition"}}],Vm=[{label:"Start Event",actionName:"replace-with-none-start",className:"bpmn-icon-start-event-none",target:{type:"bpmn:StartEvent"}},{label:"Intermediate Throw Event",actionName:"replace-with-none-intermediate-throw",className:"bpmn-icon-intermediate-event-none",target:{type:"bpmn:IntermediateThrowEvent"}},{label:"End Event",actionName:"replace-with-none-end",className:"bpmn-icon-end-event-none",target:{type:"bpmn:EndEvent"}},{label:"Message End Event",actionName:"replace-with-message-end",className:"bpmn-icon-end-event-message",target:{type:"bpmn:EndEvent",eventDefinitionType:"bpmn:MessageEventDefinition"}},{label:"Escalation End Event",actionName:"replace-with-escalation-end",className:"bpmn-icon-end-event-escalation",target:{type:"bpmn:EndEvent",eventDefinitionType:"bpmn:EscalationEventDefinition"}},{label:"Error End Event",actionName:"replace-with-error-end",className:"bpmn-icon-end-event-error",target:{type:"bpmn:EndEvent",eventDefinitionType:"bpmn:ErrorEventDefinition"}},{label:"Cancel End Event",actionName:"replace-with-cancel-end",className:"bpmn-icon-end-event-cancel",target:{type:"bpmn:EndEvent",eventDefinitionType:"bpmn:CancelEventDefinition"}},{label:"Compensation End Event",actionName:"replace-with-compensation-end",className:"bpmn-icon-end-event-compensation",target:{type:"bpmn:EndEvent",eventDefinitionType:"bpmn:CompensateEventDefinition"}},{label:"Signal End Event",actionName:"replace-with-signal-end",className:"bpmn-icon-end-event-signal",target:{type:"bpmn:EndEvent",eventDefinitionType:"bpmn:SignalEventDefinition"}},{label:"Terminate End Event",actionName:"replace-with-terminate-end",className:"bpmn-icon-end-event-terminate",target:{type:"bpmn:EndEvent",eventDefinitionType:"bpmn:TerminateEventDefinition"}}],Bm=[{label:"Exclusive Gateway",actionName:"replace-with-exclusive-gateway",className:"bpmn-icon-gateway-xor",target:{type:"bpmn:ExclusiveGateway"}},{label:"Parallel Gateway",actionName:"replace-with-parallel-gateway",className:"bpmn-icon-gateway-parallel",target:{type:"bpmn:ParallelGateway"}},{label:"Inclusive Gateway",actionName:"replace-with-inclusive-gateway",className:"bpmn-icon-gateway-or",target:{type:"bpmn:InclusiveGateway"}},{label:"Complex Gateway",actionName:"replace-with-complex-gateway",className:"bpmn-icon-gateway-complex",target:{type:"bpmn:ComplexGateway"}},{label:"Event based Gateway",actionName:"replace-with-event-based-gateway",className:"bpmn-icon-gateway-eventbased",target:{type:"bpmn:EventBasedGateway",instantiate:!1,eventGatewayType:"Exclusive"}}],$m=[{label:"Transaction",actionName:"replace-with-transaction",className:"bpmn-icon-transaction",target:{type:"bpmn:Transaction",isExpanded:!0}},{label:"Event Sub Process",actionName:"replace-with-event-subprocess",className:"bpmn-icon-event-subprocess-expanded",target:{type:"bpmn:SubProcess",triggeredByEvent:!0,isExpanded:!0}},{label:"Sub Process (collapsed)",actionName:"replace-with-collapsed-subprocess",className:"bpmn-icon-subprocess-collapsed",target:{type:"bpmn:SubProcess",isExpanded:!1}}],Wm=[{label:"Sub Process",actionName:"replace-with-subprocess",className:"bpmn-icon-subprocess-expanded",target:{type:"bpmn:SubProcess",isExpanded:!0}},{label:"Event Sub Process",actionName:"replace-with-event-subprocess",className:"bpmn-icon-event-subprocess-expanded",target:{type:"bpmn:SubProcess",triggeredByEvent:!0,isExpanded:!0}}],Jm=[{label:"Sub Process",actionName:"replace-with-subprocess",className:"bpmn-icon-subprocess-expanded",target:{type:"bpmn:SubProcess",isExpanded:!0}},{label:"Transaction",actionName:"replace-with-transaction",className:"bpmn-icon-transaction",target:{type:"bpmn:Transaction",isExpanded:!0}}],zm=[{label:"Task",actionName:"replace-with-task",className:"bpmn-icon-task",target:{type:"bpmn:Task"}},{label:"Send Task",actionName:"replace-with-send-task",className:"bpmn-icon-send",target:{type:"bpmn:SendTask"}},{label:"Receive Task",actionName:"replace-with-receive-task",className:"bpmn-icon-receive",target:{type:"bpmn:ReceiveTask"}},{label:"User Task",actionName:"replace-with-user-task",className:"bpmn-icon-user",target:{type:"bpmn:UserTask"}},{label:"Manual Task",actionName:"replace-with-manual-task",className:"bpmn-icon-manual",target:{type:"bpmn:ManualTask"}},{label:"Business Rule Task",actionName:"replace-with-rule-task",className:"bpmn-icon-business-rule",target:{type:"bpmn:BusinessRuleTask"}},{label:"Service Task",actionName:"replace-with-service-task",className:"bpmn-icon-service",target:{type:"bpmn:ServiceTask"}},{label:"Script Task",actionName:"replace-with-script-task",className:"bpmn-icon-script",target:{type:"bpmn:ScriptTask"}},{label:"Call Activity",actionName:"replace-with-call-activity",className:"bpmn-icon-call-activity",target:{type:"bpmn:CallActivity"}},{label:"Sub Process (collapsed)",actionName:"replace-with-collapsed-subprocess",className:"bpmn-icon-subprocess-collapsed",target:{type:"bpmn:SubProcess",isExpanded:!1}},{label:"Sub Process (expanded)",actionName:"replace-with-expanded-subprocess",className:"bpmn-icon-subprocess-expanded",target:{type:"bpmn:SubProcess",isExpanded:!0}}],Gm=[{label:"Data Store Reference",actionName:"replace-with-data-store-reference",className:"bpmn-icon-data-store",target:{type:"bpmn:DataStoreReference"}}],Um=[{label:"Data Object Reference",actionName:"replace-with-data-object-reference",className:"bpmn-icon-data-object",target:{type:"bpmn:DataObjectReference"}}],Hm=[{label:"Message Boundary Event",actionName:"replace-with-message-boundary",className:"bpmn-icon-intermediate-event-catch-message",target:{type:"bpmn:BoundaryEvent",eventDefinitionType:"bpmn:MessageEventDefinition"}},{label:"Timer Boundary Event",actionName:"replace-with-timer-boundary",className:"bpmn-icon-intermediate-event-catch-timer",target:{type:"bpmn:BoundaryEvent",eventDefinitionType:"bpmn:TimerEventDefinition"}},{label:"Escalation Boundary Event",actionName:"replace-with-escalation-boundary",className:"bpmn-icon-intermediate-event-catch-escalation",target:{type:"bpmn:BoundaryEvent",eventDefinitionType:"bpmn:EscalationEventDefinition"}},{label:"Conditional Boundary Event",actionName:"replace-with-conditional-boundary",className:"bpmn-icon-intermediate-event-catch-condition",target:{type:"bpmn:BoundaryEvent",eventDefinitionType:"bpmn:ConditionalEventDefinition"}},{label:"Error Boundary Event",actionName:"replace-with-error-boundary",className:"bpmn-icon-intermediate-event-catch-error",target:{type:"bpmn:BoundaryEvent",eventDefinitionType:"bpmn:ErrorEventDefinition"}},{label:"Cancel Boundary Event",actionName:"replace-with-cancel-boundary",className:"bpmn-icon-intermediate-event-catch-cancel",target:{type:"bpmn:BoundaryEvent",eventDefinitionType:"bpmn:CancelEventDefinition"}},{label:"Signal Boundary Event",actionName:"replace-with-signal-boundary",className:"bpmn-icon-intermediate-event-catch-signal",target:{type:"bpmn:BoundaryEvent",eventDefinitionType:"bpmn:SignalEventDefinition"}},{label:"Compensation Boundary Event",actionName:"replace-with-compensation-boundary",className:"bpmn-icon-intermediate-event-catch-compensation",target:{type:"bpmn:BoundaryEvent",eventDefinitionType:"bpmn:CompensateEventDefinition"}},{label:"Message Boundary Event (non-interrupting)",actionName:"replace-with-non-interrupting-message-boundary",className:"bpmn-icon-intermediate-event-catch-non-interrupting-message",target:{type:"bpmn:BoundaryEvent",eventDefinitionType:"bpmn:MessageEventDefinition",cancelActivity:!1}},{label:"Timer Boundary Event (non-interrupting)",actionName:"replace-with-non-interrupting-timer-boundary",className:"bpmn-icon-intermediate-event-catch-non-interrupting-timer",target:{type:"bpmn:BoundaryEvent",eventDefinitionType:"bpmn:TimerEventDefinition",cancelActivity:!1}},{label:"Escalation Boundary Event (non-interrupting)",actionName:"replace-with-non-interrupting-escalation-boundary",className:"bpmn-icon-intermediate-event-catch-non-interrupting-escalation",target:{type:"bpmn:BoundaryEvent",eventDefinitionType:"bpmn:EscalationEventDefinition",cancelActivity:!1}},{label:"Conditional Boundary Event (non-interrupting)",actionName:"replace-with-non-interrupting-conditional-boundary",className:"bpmn-icon-intermediate-event-catch-non-interrupting-condition",target:{type:"bpmn:BoundaryEvent",eventDefinitionType:"bpmn:ConditionalEventDefinition",cancelActivity:!1}},{label:"Signal Boundary Event (non-interrupting)",actionName:"replace-with-non-interrupting-signal-boundary",className:"bpmn-icon-intermediate-event-catch-non-interrupting-signal",target:{type:"bpmn:BoundaryEvent",eventDefinitionType:"bpmn:SignalEventDefinition",cancelActivity:!1}}],qm=[{label:"Message Start Event",actionName:"replace-with-message-start",className:"bpmn-icon-start-event-message",target:{type:"bpmn:StartEvent",eventDefinitionType:"bpmn:MessageEventDefinition"}},{label:"Timer Start Event",actionName:"replace-with-timer-start",className:"bpmn-icon-start-event-timer",target:{type:"bpmn:StartEvent",eventDefinitionType:"bpmn:TimerEventDefinition"}},{label:"Conditional Start Event",actionName:"replace-with-conditional-start",className:"bpmn-icon-start-event-condition",target:{type:"bpmn:StartEvent",eventDefinitionType:"bpmn:ConditionalEventDefinition"}},{label:"Signal Start Event",actionName:"replace-with-signal-start",className:"bpmn-icon-start-event-signal",target:{type:"bpmn:StartEvent",eventDefinitionType:"bpmn:SignalEventDefinition"}},{label:"Error Start Event",actionName:"replace-with-error-start",className:"bpmn-icon-start-event-error",target:{type:"bpmn:StartEvent",eventDefinitionType:"bpmn:ErrorEventDefinition"}},{label:"Escalation Start Event",actionName:"replace-with-escalation-start",className:"bpmn-icon-start-event-escalation",target:{type:"bpmn:StartEvent",eventDefinitionType:"bpmn:EscalationEventDefinition"}},{label:"Compensation Start Event",actionName:"replace-with-compensation-start",className:"bpmn-icon-start-event-compensation",target:{type:"bpmn:StartEvent",eventDefinitionType:"bpmn:CompensateEventDefinition"}},{label:"Message Start Event (non-interrupting)",actionName:"replace-with-non-interrupting-message-start",className:"bpmn-icon-start-event-non-interrupting-message",target:{type:"bpmn:StartEvent",eventDefinitionType:"bpmn:MessageEventDefinition",isInterrupting:!1}},{label:"Timer Start Event (non-interrupting)",actionName:"replace-with-non-interrupting-timer-start",className:"bpmn-icon-start-event-non-interrupting-timer",target:{type:"bpmn:StartEvent",eventDefinitionType:"bpmn:TimerEventDefinition",isInterrupting:!1}},{label:"Conditional Start Event (non-interrupting)",actionName:"replace-with-non-interrupting-conditional-start",className:"bpmn-icon-start-event-non-interrupting-condition",target:{type:"bpmn:StartEvent",eventDefinitionType:"bpmn:ConditionalEventDefinition",isInterrupting:!1}},{label:"Signal Start Event (non-interrupting)",actionName:"replace-with-non-interrupting-signal-start",className:"bpmn-icon-start-event-non-interrupting-signal",target:{type:"bpmn:StartEvent",eventDefinitionType:"bpmn:SignalEventDefinition",isInterrupting:!1}},{label:"Escalation Start Event (non-interrupting)",actionName:"replace-with-non-interrupting-escalation-start",className:"bpmn-icon-start-event-non-interrupting-escalation",target:{type:"bpmn:StartEvent",eventDefinitionType:"bpmn:EscalationEventDefinition",isInterrupting:!1}}],Km=[{label:"Sequence Flow",actionName:"replace-with-sequence-flow",className:"bpmn-icon-connection"},{label:"Default Flow",actionName:"replace-with-default-flow",className:"bpmn-icon-default-flow"},{label:"Conditional Flow",actionName:"replace-with-conditional-flow",className:"bpmn-icon-conditional-flow"}],Ym=[{label:"Expanded Pool",actionName:"replace-with-expanded-pool",className:"bpmn-icon-participant",target:{type:"bpmn:Participant",isExpanded:!0}}];function Xm(e,t,n,a,r,i,o){this._bpmnFactory=e,this._popupMenu=t,this._modeling=n,this._moddle=a,this._bpmnReplace=r,this._rules=i,this._translate=o,this.register()}Xm.$inject=["bpmnFactory","popupMenu","modeling","moddle","bpmnReplace","rules","translate"],Xm.prototype.register=function(){this._popupMenu.registerProvider("bpmn-replace",this)},Xm.prototype.getEntries=function(e){var t,n=e.businessObject;if(!this._rules.allowed("shape.replace",{element:e}))return[];var a=Object(Rm.a)(e);return Object(P.is)(n,"bpmn:DataObjectReference")?this._createEntries(e,Gm):Object(P.is)(n,"bpmn:DataStoreReference")?this._createEntries(e,Um):Object(P.is)(n,"bpmn:StartEvent")&&!Object(P.is)(n.$parent,"bpmn:SubProcess")?(t=Object(Lm.filter)(Dm,a),this._createEntries(e,t)):Object(P.is)(n,"bpmn:Participant")?(t=Object(Lm.filter)(Ym,(function(e){return Object(xi.isExpanded)(n)!==e.target.isExpanded})),this._createEntries(e,t)):Object(P.is)(n,"bpmn:StartEvent")&&Object(xi.isEventSubProcess)(n.$parent)?(t=Object(Lm.filter)(qm,(function(t){var n=!1!==t.target.isInterrupting,r=Object(P.getBusinessObject)(e).isInterrupting===n;return a(t)||!a(t)&&!r})),this._createEntries(e,t)):Object(P.is)(n,"bpmn:StartEvent")&&!Object(xi.isEventSubProcess)(n.$parent)&&Object(P.is)(n.$parent,"bpmn:SubProcess")?(t=Object(Lm.filter)(Im,a),this._createEntries(e,t)):Object(P.is)(n,"bpmn:EndEvent")?(t=Object(Lm.filter)(Vm,(function(e){return!("bpmn:CancelEventDefinition"===e.target.eventDefinitionType&&!Object(P.is)(n.$parent,"bpmn:Transaction"))&&a(e)})),this._createEntries(e,t)):Object(P.is)(n,"bpmn:BoundaryEvent")?(t=Object(Lm.filter)(Hm,(function(e){var t=e.target;if("bpmn:CancelEventDefinition"===t.eventDefinitionType&&!Object(P.is)(n.attachedToRef,"bpmn:Transaction"))return!1;var r=!1!==t.cancelActivity,i=n.cancelActivity===r;return a(e)||!a(e)&&!i})),this._createEntries(e,t)):Object(P.is)(n,"bpmn:IntermediateCatchEvent")||Object(P.is)(n,"bpmn:IntermediateThrowEvent")?(t=Object(Lm.filter)(Am,a),this._createEntries(e,t)):Object(P.is)(n,"bpmn:Gateway")?(t=Object(Lm.filter)(Bm,a),this._createEntries(e,t)):Object(P.is)(n,"bpmn:Transaction")?(t=Object(Lm.filter)(Wm,a),this._createEntries(e,t)):Object(xi.isEventSubProcess)(n)&&Object(xi.isExpanded)(n)?(t=Object(Lm.filter)(Jm,a),this._createEntries(e,t)):Object(P.is)(n,"bpmn:SubProcess")&&Object(xi.isExpanded)(n)?(t=Object(Lm.filter)($m,a),this._createEntries(e,t)):Object(P.is)(n,"bpmn:AdHocSubProcess")&&!Object(xi.isExpanded)(n)?(t=Object(Lm.filter)(zm,(function(t){var n=t.target,a="bpmn:SubProcess"===n.type,r=!0===n.isExpanded;return Object(Rm.a)(e,n)&&(!a||r)})),this._createEntries(e,t)):Object(P.is)(n,"bpmn:SequenceFlow")?this._createSequenceFlowEntries(e,Km):Object(P.is)(n,"bpmn:FlowNode")?(t=Object(Lm.filter)(zm,a),Object(P.is)(n,"bpmn:SubProcess")&&!Object(xi.isExpanded)(n)&&(t=Object(Lm.filter)(t,(function(e){return"Sub Process (collapsed)"!==e.label}))),this._createEntries(e,t)):[]},Xm.prototype.getHeaderEntries=function(e){var t=[];return Object(P.is)(e,"bpmn:Activity")&&!Object(xi.isEventSubProcess)(e)&&(t=t.concat(this._getLoopEntries(e))),Object(P.is)(e,"bpmn:DataObjectReference")&&(t=t.concat(this._getDataObjectIsCollection(e))),Object(P.is)(e,"bpmn:Participant")&&(t=t.concat(this._getParticipantMultiplicity(e))),!Object(P.is)(e,"bpmn:SubProcess")||Object(P.is)(e,"bpmn:Transaction")||Object(xi.isEventSubProcess)(e)||t.push(this._getAdHocEntry(e)),t},Xm.prototype._createEntries=function(e,t){var n=[],a=this;return Object(Lm.forEach)(t,(function(t){var r=a._createMenuEntry(t,e);n.push(r)})),n},Xm.prototype._createSequenceFlowEntries=function(e,t){var n=Object(P.getBusinessObject)(e),a=[],r=this._modeling,i=this._moddle,o=this;return Object(Lm.forEach)(t,(function(t){switch(t.actionName){case"replace-with-default-flow":n.sourceRef.default!==n&&(Object(P.is)(n.sourceRef,"bpmn:ExclusiveGateway")||Object(P.is)(n.sourceRef,"bpmn:InclusiveGateway")||Object(P.is)(n.sourceRef,"bpmn:ComplexGateway")||Object(P.is)(n.sourceRef,"bpmn:Activity"))&&a.push(o._createMenuEntry(t,e,(function(){r.updateProperties(e.source,{default:n})})));break;case"replace-with-conditional-flow":!n.conditionExpression&&Object(P.is)(n.sourceRef,"bpmn:Activity")&&a.push(o._createMenuEntry(t,e,(function(){var t=i.create("bpmn:FormalExpression",{body:""});r.updateProperties(e,{conditionExpression:t})})));break;default:if(Object(P.is)(n.sourceRef,"bpmn:Activity")&&n.conditionExpression)return a.push(o._createMenuEntry(t,e,(function(){r.updateProperties(e,{conditionExpression:void 0})})));if((Object(P.is)(n.sourceRef,"bpmn:ExclusiveGateway")||Object(P.is)(n.sourceRef,"bpmn:InclusiveGateway")||Object(P.is)(n.sourceRef,"bpmn:ComplexGateway")||Object(P.is)(n.sourceRef,"bpmn:Activity"))&&n.sourceRef.default===n)return a.push(o._createMenuEntry(t,e,(function(){r.updateProperties(e.source,{default:void 0})})))}})),a},Xm.prototype._createMenuEntry=function(e,t,n){var a=this._translate,r=this._bpmnReplace.replaceElement,i=e.label;return i&&"function"===typeof i&&(i=i(t)),n=n||function(){return r(t,e.target)},{label:a(i),className:e.className,id:e.actionName,action:n}},Xm.prototype._getLoopEntries=function(e){var t=this,n=this._translate;function a(n,a){var r;a.active?r=void 0:(r=t._moddle.create(a.options.loopCharacteristics),a.options.isSequential&&(r.isSequential=a.options.isSequential)),t._modeling.updateProperties(e,{loopCharacteristics:r})}var r,i,o,l=Object(P.getBusinessObject)(e).loopCharacteristics;return l&&(r=l.isSequential,i=void 0===l.isSequential,o=void 0!==l.isSequential&&!l.isSequential),[{id:"toggle-parallel-mi",className:"bpmn-icon-parallel-mi-marker",title:n("Parallel Multi Instance"),active:o,action:a,options:{loopCharacteristics:"bpmn:MultiInstanceLoopCharacteristics",isSequential:!1}},{id:"toggle-sequential-mi",className:"bpmn-icon-sequential-mi-marker",title:n("Sequential Multi Instance"),active:r,action:a,options:{loopCharacteristics:"bpmn:MultiInstanceLoopCharacteristics",isSequential:!0}},{id:"toggle-loop",className:"bpmn-icon-loop-marker",title:n("Loop"),active:i,action:a,options:{loopCharacteristics:"bpmn:StandardLoopCharacteristics"}}]},Xm.prototype._getDataObjectIsCollection=function(e){var t=this,n=this._translate;var a=e.businessObject.dataObjectRef,r=a.isCollection;return[{id:"toggle-is-collection",className:"bpmn-icon-parallel-mi-marker",title:n("Collection"),active:r,action:function(n,r){t._modeling.updateModdleProperties(e,a,{isCollection:!r.active})}}]},Xm.prototype._getParticipantMultiplicity=function(e){var t=this,n=this._bpmnFactory,a=this._translate;var r=e.businessObject.participantMultiplicity;return[{id:"toggle-participant-multiplicity",className:"bpmn-icon-parallel-mi-marker",title:a("Participant Multiplicity"),active:!!r,action:function(a,r){var i;r.active||(i=n.create("bpmn:ParticipantMultiplicity")),t._modeling.updateProperties(e,{participantMultiplicity:i})}}]},Xm.prototype._getAdHocEntry=function(e){var t=this._translate,n=Object(P.getBusinessObject)(e),a=Object(P.is)(n,"bpmn:AdHocSubProcess"),r=this._bpmnReplace.replaceElement;return{id:"toggle-adhoc",className:"bpmn-icon-ad-hoc-marker",title:t("Ad-hoc"),active:a,action:function(t,n){return r(e,a?{type:"bpmn:SubProcess"}:{type:"bpmn:AdHocSubProcess"},{autoResize:!1,layoutConnection:!1})}}};var Zm=n(329),Qm=n(67),ed=n(200),td=n(10),nd=n(3),ad=n(4),rd=n(261),id=new(n(82).default);function od(e,t,n,a,r,i,o){Zm.a.call(this,t,o);var l=e&&e.defaultFillColor,c=e&&e.defaultStrokeColor,s=id.next(),u={},m=n.computeStyle;function d(e,t){var n=Object(Lm.assign)({fill:"black",strokeWidth:1,strokeLinecap:"round",strokeDasharray:"none"},t.attrs),a=t.ref||{x:0,y:0},i=t.scale||1;"none"===n.strokeDasharray&&(n.strokeDasharray=[1e4,1]);var o=Object(ad.f)("marker");Object(ad.b)(t.element,n),Object(ad.a)(o,t.element),Object(ad.b)(o,{id:e,viewBox:"0 0 20 20",refX:a.x,refY:a.y,markerWidth:20*i,markerHeight:20*i,orient:"auto"});var l=Object(nd.query)("defs",r._svg);l||(l=Object(ad.f)("defs"),Object(ad.a)(r._svg,l)),Object(ad.a)(l,o),u[e]=o}function p(e){return e.replace(/[^0-9a-zA-z]+/g,"_")}function b(e,t,n){var a=e+"-"+p(t)+"-"+p(n)+"-"+s;return u[a]||function(e,t,n,a){if("sequenceflow-end"===t){var r=Object(ad.f)("path");Object(ad.b)(r,{d:"M 1 5 L 11 10 L 1 15 Z"}),d(e,{element:r,ref:{x:11,y:10},scale:.5,attrs:{fill:a,stroke:a}})}if("messageflow-start"===t){var i=Object(ad.f)("circle");Object(ad.b)(i,{cx:6,cy:6,r:3.5}),d(e,{element:i,attrs:{fill:n,stroke:a},ref:{x:6,y:6}})}if("messageflow-end"===t){var o=Object(ad.f)("path");Object(ad.b)(o,{d:"m 1 5 l 0 -3 l 7 3 l -7 3 z"}),d(e,{element:o,attrs:{fill:n,stroke:a,strokeLinecap:"butt"},ref:{x:8.5,y:5}})}if("association-start"===t){var l=Object(ad.f)("path");Object(ad.b)(l,{d:"M 11 5 L 1 10 L 11 15"}),d(e,{element:l,attrs:{fill:"none",stroke:a,strokeWidth:1.5},ref:{x:1,y:10},scale:.5})}if("association-end"===t){var c=Object(ad.f)("path");Object(ad.b)(c,{d:"M 1 5 L 11 10 L 1 15"}),d(e,{element:c,attrs:{fill:"none",stroke:a,strokeWidth:1.5},ref:{x:12,y:10},scale:.5})}if("conditional-flow-marker"===t){var s=Object(ad.f)("path");Object(ad.b)(s,{d:"M 0 10 L 8 6 L 16 10 L 8 14 Z"}),d(e,{element:s,attrs:{fill:n,stroke:a},ref:{x:-1,y:10},scale:.5})}if("conditional-default-flow-marker"===t){var u=Object(ad.f)("path");Object(ad.b)(u,{d:"M 6 4 L 10 16"}),d(e,{element:u,attrs:{stroke:a},ref:{x:0,y:10},scale:.5})}}(a,e,t,n),"url(#"+a+")"}function f(e,t,n,a,r){Object(Lm.isObject)(a)&&(r=a,a=0),a=a||0,"none"===(r=m(r,{stroke:"black",strokeWidth:2,fill:"white"})).fill&&delete r.fillOpacity;var i=t/2,o=n/2,l=Object(ad.f)("circle");return Object(ad.b)(l,{cx:i,cy:o,r:Math.round((t+n)/4-a)}),Object(ad.b)(l,r),Object(ad.a)(e,l),l}function v(e,t,n,a,r,i){Object(Lm.isObject)(r)&&(i=r,r=0),r=r||0,i=m(i,{stroke:"black",strokeWidth:2,fill:"white"});var o=Object(ad.f)("rect");return Object(ad.b)(o,{x:r,y:r,width:t-2*r,height:n-2*r,rx:a,ry:a}),Object(ad.b)(o,i),Object(ad.a)(e,o),o}function g(e,t,n){n=m(n,["no-fill"],{stroke:"black",strokeWidth:2,fill:"none"});var a=Object(ed.a)(t,n);return Object(ad.a)(e,a),a}function y(e,t,n){n=m(n,["no-fill"],{strokeWidth:2,stroke:"black"});var a=Object(ad.f)("path");return Object(ad.b)(a,{d:t}),Object(ad.b)(a,n),Object(ad.a)(e,a),a}function h(e,t,n,a){return y(t,n,Object(Lm.assign)({"data-marker":e},a))}function O(e){return function(t,n){return N[e](t,n)}}function E(e){return N[e]}function j(e,t){var n=Object(td.h)(e),a=Object(td.k)(n);return n.eventDefinitions&&n.eventDefinitions.length>1?n.parallelMultiple?E("bpmn:ParallelMultipleEventDefinition")(t,e,a):E("bpmn:MultipleEventDefinition")(t,e,a):Object(td.l)(n,"bpmn:MessageEventDefinition")?E("bpmn:MessageEventDefinition")(t,e,a):Object(td.l)(n,"bpmn:TimerEventDefinition")?E("bpmn:TimerEventDefinition")(t,e,a):Object(td.l)(n,"bpmn:ConditionalEventDefinition")?E("bpmn:ConditionalEventDefinition")(t,e):Object(td.l)(n,"bpmn:SignalEventDefinition")?E("bpmn:SignalEventDefinition")(t,e,a):Object(td.l)(n,"bpmn:EscalationEventDefinition")?E("bpmn:EscalationEventDefinition")(t,e,a):Object(td.l)(n,"bpmn:LinkEventDefinition")?E("bpmn:LinkEventDefinition")(t,e,a):Object(td.l)(n,"bpmn:ErrorEventDefinition")?E("bpmn:ErrorEventDefinition")(t,e,a):Object(td.l)(n,"bpmn:CancelEventDefinition")?E("bpmn:CancelEventDefinition")(t,e,a):Object(td.l)(n,"bpmn:CompensateEventDefinition")?E("bpmn:CompensateEventDefinition")(t,e,a):Object(td.l)(n,"bpmn:TerminateEventDefinition")?E("bpmn:TerminateEventDefinition")(t,e,a):null}function x(e,t,n){n=Object(Lm.assign)({size:{width:100}},n);var a=i.createText(t||"",n);return Object(ad.c)(a).add("djs-label"),Object(ad.a)(e,a),a}function w(e,t,n){return x(e,Object(td.h)(t).name,{box:t,align:n,padding:5,style:{fill:Object(td.i)(t,c)}})}function k(e,t,n){var a=x(e,t,{box:{height:30,width:n.height},align:"center-middle",style:{fill:Object(td.i)(n,c)}}),r=-1*n.height;Object(rd.b)(a,0,-r,270)}function C(e){for(var t=e.waypoints,n="m  "+t[0].x+","+t[0].y,a=1;a<t.length;a++)n+="L"+t[a].x+","+t[a].y+" ";return n}var N=this.handlers={"bpmn:Event":function(e,t,n){return"fillOpacity"in n||(n.fillOpacity=.95),f(e,t.width,t.height,n)},"bpmn:StartEvent":function(e,t){var n={fill:Object(td.d)(t,l),stroke:Object(td.i)(t,c)};Object(td.h)(t).isInterrupting||(n={strokeDasharray:"6",strokeLinecap:"round",fill:Object(td.d)(t,l),stroke:Object(td.i)(t,c)});var a=E("bpmn:Event")(e,t,n);return j(t,e),a},"bpmn:MessageEventDefinition":function(e,t,n){return y(e,a.getScaledPath("EVENT_MESSAGE",{xScaleFactor:.9,yScaleFactor:.9,containerWidth:t.width,containerHeight:t.height,position:{mx:.235,my:.315}}),{strokeWidth:1,fill:n?Object(td.i)(t,c):Object(td.d)(t,l),stroke:n?Object(td.d)(t,l):Object(td.i)(t,c)})},"bpmn:TimerEventDefinition":function(e,t){var n=f(e,t.width,t.height,.2*t.height,{strokeWidth:2,fill:Object(td.d)(t,l),stroke:Object(td.i)(t,c)});y(e,a.getScaledPath("EVENT_TIMER_WH",{xScaleFactor:.75,yScaleFactor:.75,containerWidth:t.width,containerHeight:t.height,position:{mx:.5,my:.5}}),{strokeWidth:2,strokeLinecap:"square",stroke:Object(td.i)(t,c)});for(var r=0;r<12;r++){var i=a.getScaledPath("EVENT_TIMER_LINE",{xScaleFactor:.75,yScaleFactor:.75,containerWidth:t.width,containerHeight:t.height,position:{mx:.5,my:.5}}),o=t.width/2;y(e,i,{strokeWidth:1,strokeLinecap:"square",transform:"rotate("+30*r+","+t.height/2+","+o+")",stroke:Object(td.i)(t,c)})}return n},"bpmn:EscalationEventDefinition":function(e,t,n){return y(e,a.getScaledPath("EVENT_ESCALATION",{xScaleFactor:1,yScaleFactor:1,containerWidth:t.width,containerHeight:t.height,position:{mx:.5,my:.2}}),{strokeWidth:1,fill:n?Object(td.i)(t,c):"none",stroke:Object(td.i)(t,c)})},"bpmn:ConditionalEventDefinition":function(e,t){return y(e,a.getScaledPath("EVENT_CONDITIONAL",{xScaleFactor:1,yScaleFactor:1,containerWidth:t.width,containerHeight:t.height,position:{mx:.5,my:.222}}),{strokeWidth:1,stroke:Object(td.i)(t,c)})},"bpmn:LinkEventDefinition":function(e,t,n){return y(e,a.getScaledPath("EVENT_LINK",{xScaleFactor:1,yScaleFactor:1,containerWidth:t.width,containerHeight:t.height,position:{mx:.57,my:.263}}),{strokeWidth:1,fill:n?Object(td.i)(t,c):"none",stroke:Object(td.i)(t,c)})},"bpmn:ErrorEventDefinition":function(e,t,n){return y(e,a.getScaledPath("EVENT_ERROR",{xScaleFactor:1.1,yScaleFactor:1.1,containerWidth:t.width,containerHeight:t.height,position:{mx:.2,my:.722}}),{strokeWidth:1,fill:n?Object(td.i)(t,c):"none",stroke:Object(td.i)(t,c)})},"bpmn:CancelEventDefinition":function(e,t,n){var r=y(e,a.getScaledPath("EVENT_CANCEL_45",{xScaleFactor:1,yScaleFactor:1,containerWidth:t.width,containerHeight:t.height,position:{mx:.638,my:-.055}}),{strokeWidth:1,fill:n?Object(td.i)(t,c):"none",stroke:Object(td.i)(t,c)});return Object(rd.a)(r,45),r},"bpmn:CompensateEventDefinition":function(e,t,n){return y(e,a.getScaledPath("EVENT_COMPENSATION",{xScaleFactor:1,yScaleFactor:1,containerWidth:t.width,containerHeight:t.height,position:{mx:.22,my:.5}}),{strokeWidth:1,fill:n?Object(td.i)(t,c):"none",stroke:Object(td.i)(t,c)})},"bpmn:SignalEventDefinition":function(e,t,n){return y(e,a.getScaledPath("EVENT_SIGNAL",{xScaleFactor:.9,yScaleFactor:.9,containerWidth:t.width,containerHeight:t.height,position:{mx:.5,my:.2}}),{strokeWidth:1,fill:n?Object(td.i)(t,c):"none",stroke:Object(td.i)(t,c)})},"bpmn:MultipleEventDefinition":function(e,t,n){return y(e,a.getScaledPath("EVENT_MULTIPLE",{xScaleFactor:1.1,yScaleFactor:1.1,containerWidth:t.width,containerHeight:t.height,position:{mx:.222,my:.36}}),{strokeWidth:1,fill:n?Object(td.i)(t,c):"none"})},"bpmn:ParallelMultipleEventDefinition":function(e,t){return y(e,a.getScaledPath("EVENT_PARALLEL_MULTIPLE",{xScaleFactor:1.2,yScaleFactor:1.2,containerWidth:t.width,containerHeight:t.height,position:{mx:.458,my:.194}}),{strokeWidth:1,fill:Object(td.i)(t,c),stroke:Object(td.i)(t,c)})},"bpmn:EndEvent":function(e,t){var n=E("bpmn:Event")(e,t,{strokeWidth:4,fill:Object(td.d)(t,l),stroke:Object(td.i)(t,c)});return j(t,e),n},"bpmn:TerminateEventDefinition":function(e,t){return f(e,t.width,t.height,8,{strokeWidth:4,fill:Object(td.i)(t,c),stroke:Object(td.i)(t,c)})},"bpmn:IntermediateEvent":function(e,t){var n=E("bpmn:Event")(e,t,{strokeWidth:1,fill:Object(td.d)(t,l),stroke:Object(td.i)(t,c)});return f(e,t.width,t.height,3,{strokeWidth:1,fill:Object(td.d)(t,"none"),stroke:Object(td.i)(t,c)}),j(t,e),n},"bpmn:IntermediateCatchEvent":O("bpmn:IntermediateEvent"),"bpmn:IntermediateThrowEvent":O("bpmn:IntermediateEvent"),"bpmn:Activity":function(e,t,n){return"fillOpacity"in(n=n||{})||(n.fillOpacity=.95),v(e,t.width,t.height,10,n)},"bpmn:Task":function(e,t){var n={fill:Object(td.d)(t,l),stroke:Object(td.i)(t,c)},a=E("bpmn:Activity")(e,t,n);return w(e,t,"center-middle"),S(e,t),a},"bpmn:ServiceTask":function(e,t){var n=E("bpmn:Task")(e,t);return y(e,a.getScaledPath("TASK_TYPE_SERVICE",{abspos:{x:12,y:18}}),{strokeWidth:1,fill:Object(td.d)(t,l),stroke:Object(td.i)(t,c)}),y(e,a.getScaledPath("TASK_TYPE_SERVICE_FILL",{abspos:{x:17.2,y:18}}),{strokeWidth:0,fill:Object(td.d)(t,l)}),y(e,a.getScaledPath("TASK_TYPE_SERVICE",{abspos:{x:17,y:22}}),{strokeWidth:1,fill:Object(td.d)(t,l),stroke:Object(td.i)(t,c)}),n},"bpmn:UserTask":function(e,t){var n=E("bpmn:Task")(e,t);return y(e,a.getScaledPath("TASK_TYPE_USER_1",{abspos:{x:15,y:12}}),{strokeWidth:.5,fill:Object(td.d)(t,l),stroke:Object(td.i)(t,c)}),y(e,a.getScaledPath("TASK_TYPE_USER_2",{abspos:{x:15,y:12}}),{strokeWidth:.5,fill:Object(td.d)(t,l),stroke:Object(td.i)(t,c)}),y(e,a.getScaledPath("TASK_TYPE_USER_3",{abspos:{x:15,y:12}}),{strokeWidth:.5,fill:Object(td.i)(t,c),stroke:Object(td.i)(t,c)}),n},"bpmn:ManualTask":function(e,t){var n=E("bpmn:Task")(e,t);return y(e,a.getScaledPath("TASK_TYPE_MANUAL",{abspos:{x:17,y:15}}),{strokeWidth:.5,fill:Object(td.d)(t,l),stroke:Object(td.i)(t,c)}),n},"bpmn:SendTask":function(e,t){var n=E("bpmn:Task")(e,t);return y(e,a.getScaledPath("TASK_TYPE_SEND",{xScaleFactor:1,yScaleFactor:1,containerWidth:21,containerHeight:14,position:{mx:.285,my:.357}}),{strokeWidth:1,fill:Object(td.i)(t,c),stroke:Object(td.d)(t,l)}),n},"bpmn:ReceiveTask":function(e,t){var n,r=Object(td.h)(t),i=E("bpmn:Task")(e,t);return r.instantiate?(f(e,28,28,4.4,{strokeWidth:1}),n=a.getScaledPath("TASK_TYPE_INSTANTIATING_SEND",{abspos:{x:7.77,y:9.52}})):n=a.getScaledPath("TASK_TYPE_SEND",{xScaleFactor:.9,yScaleFactor:.9,containerWidth:21,containerHeight:14,position:{mx:.3,my:.4}}),y(e,n,{strokeWidth:1,fill:Object(td.d)(t,l),stroke:Object(td.i)(t,c)}),i},"bpmn:ScriptTask":function(e,t){var n=E("bpmn:Task")(e,t);return y(e,a.getScaledPath("TASK_TYPE_SCRIPT",{abspos:{x:15,y:20}}),{strokeWidth:1,stroke:Object(td.i)(t,c)}),n},"bpmn:BusinessRuleTask":function(e,t){var n=E("bpmn:Task")(e,t),r=y(e,a.getScaledPath("TASK_TYPE_BUSINESS_RULE_HEADER",{abspos:{x:8,y:8}}));Object(ad.b)(r,{strokeWidth:1,fill:Object(td.d)(t,"#aaaaaa"),stroke:Object(td.i)(t,c)});var i=y(e,a.getScaledPath("TASK_TYPE_BUSINESS_RULE_MAIN",{abspos:{x:8,y:8}}));return Object(ad.b)(i,{strokeWidth:1,stroke:Object(td.i)(t,c)}),n},"bpmn:SubProcess":function(e,t,n){n=Object(Lm.assign)({fill:Object(td.d)(t,l),stroke:Object(td.i)(t,c)},n);var a=E("bpmn:Activity")(e,t,n),r=Object(xi.isExpanded)(t);return Object(xi.isEventSubProcess)(t)&&Object(ad.b)(a,{strokeDasharray:"1,2"}),w(e,t,r?"center-top":"center-middle"),r?S(e,t):S(e,t,["SubProcessMarker"]),a},"bpmn:AdHocSubProcess":function(e,t){return E("bpmn:SubProcess")(e,t)},"bpmn:Transaction":function(e,t){var a=E("bpmn:SubProcess")(e,t),r=n.style(["no-fill","no-events"],{stroke:Object(td.i)(t,c)});return v(e,t.width,t.height,8,3,r),a},"bpmn:CallActivity":function(e,t){return E("bpmn:SubProcess")(e,t,{strokeWidth:5})},"bpmn:Participant":function(e,t){var n={fillOpacity:.95,fill:Object(td.d)(t,l),stroke:Object(td.i)(t,c)},a=E("bpmn:Lane")(e,t,n);Object(xi.isExpanded)(t)?(g(e,[{x:30,y:0},{x:30,y:t.height}],{stroke:Object(td.i)(t,c)}),k(e,Object(td.h)(t).name,t)):x(e,Object(td.h)(t).name,{box:t,align:"center-middle",style:{fill:Object(td.i)(t,c)}});return!!Object(td.h)(t).participantMultiplicity&&E("ParticipantMultiplicityMarker")(e,t),a},"bpmn:Lane":function(e,t,n){var a=v(e,t.width,t.height,0,Object(Lm.assign)({fill:Object(td.d)(t,l),fillOpacity:.35,stroke:Object(td.i)(t,c)},n)),r=Object(td.h)(t);"bpmn:Lane"===r.$type&&k(e,r.name,t);return a},"bpmn:InclusiveGateway":function(e,t){var n=E("bpmn:Gateway")(e,t);return f(e,t.width,t.height,.24*t.height,{strokeWidth:2.5,fill:Object(td.d)(t,l),stroke:Object(td.i)(t,c)}),n},"bpmn:ExclusiveGateway":function(e,t){var n=E("bpmn:Gateway")(e,t),r=a.getScaledPath("GATEWAY_EXCLUSIVE",{xScaleFactor:.4,yScaleFactor:.4,containerWidth:t.width,containerHeight:t.height,position:{mx:.32,my:.3}});return Object(td.b)(t).isMarkerVisible&&y(e,r,{strokeWidth:1,fill:Object(td.i)(t,c),stroke:Object(td.i)(t,c)}),n},"bpmn:ComplexGateway":function(e,t){var n=E("bpmn:Gateway")(e,t);return y(e,a.getScaledPath("GATEWAY_COMPLEX",{xScaleFactor:.5,yScaleFactor:.5,containerWidth:t.width,containerHeight:t.height,position:{mx:.46,my:.26}}),{strokeWidth:1,fill:Object(td.i)(t,c),stroke:Object(td.i)(t,c)}),n},"bpmn:ParallelGateway":function(e,t){var n=E("bpmn:Gateway")(e,t);return y(e,a.getScaledPath("GATEWAY_PARALLEL",{xScaleFactor:.6,yScaleFactor:.6,containerWidth:t.width,containerHeight:t.height,position:{mx:.46,my:.2}}),{strokeWidth:1,fill:Object(td.i)(t,c),stroke:Object(td.i)(t,c)}),n},"bpmn:EventBasedGateway":function(e,t){var n=Object(td.h)(t),r=E("bpmn:Gateway")(e,t);f(e,t.width,t.height,.2*t.height,{strokeWidth:1,fill:"none",stroke:Object(td.i)(t,c)});var i=n.eventGatewayType,o=!!n.instantiate;if("Parallel"===i){var l=a.getScaledPath("GATEWAY_PARALLEL",{xScaleFactor:.4,yScaleFactor:.4,containerWidth:t.width,containerHeight:t.height,position:{mx:.474,my:.296}}),s=y(e,l);Object(ad.b)(s,{strokeWidth:1,fill:"none"})}else if("Exclusive"===i){if(!o){var u=f(e,t.width,t.height,.26*t.height);Object(ad.b)(u,{strokeWidth:1,fill:"none",stroke:Object(td.i)(t,c)})}!function(){var n=a.getScaledPath("GATEWAY_EVENT_BASED",{xScaleFactor:.18,yScaleFactor:.18,containerWidth:t.width,containerHeight:t.height,position:{mx:.36,my:.44}}),r={strokeWidth:2,fill:Object(td.d)(t,"none"),stroke:Object(td.i)(t,c)};y(e,n,r)}()}return r},"bpmn:Gateway":function(e,t){var n={fill:Object(td.d)(t,l),fillOpacity:.95,stroke:Object(td.i)(t,c)};return function(e,t,n,a){var r=t/2,i=n/2,o=[{x:r,y:0},{x:t,y:i},{x:r,y:n},{x:0,y:i}].map((function(e){return e.x+","+e.y})).join(" ");a=m(a,{stroke:"black",strokeWidth:2,fill:"white"});var l=Object(ad.f)("polygon");return Object(ad.b)(l,{points:o}),Object(ad.b)(l,a),Object(ad.a)(e,l),l}(e,t.width,t.height,n)},"bpmn:SequenceFlow":function(e,t){var n,a=C(t),r=Object(td.d)(t,l),i=Object(td.i)(t,c),o=y(e,a,{strokeLinejoin:"round",markerEnd:b("sequenceflow-end",r,i),stroke:Object(td.i)(t,c)}),s=Object(td.h)(t);return t.source&&(n=t.source.businessObject,s.conditionExpression&&n.$instanceOf("bpmn:Activity")&&Object(ad.b)(o,{markerStart:b("conditional-flow-marker",r,i)}),n.default&&(n.$instanceOf("bpmn:Gateway")||n.$instanceOf("bpmn:Activity"))&&n.default===s&&Object(ad.b)(o,{markerStart:b("conditional-default-flow-marker",r,i)})),o},"bpmn:Association":function(e,t,n){var a=Object(td.h)(t),r=Object(td.d)(t,l),i=Object(td.i)(t,c);return n=Object(Lm.assign)({strokeDasharray:"0.5, 5",strokeLinecap:"round",strokeLinejoin:"round",stroke:Object(td.i)(t,c)},n||{}),"One"!==a.associationDirection&&"Both"!==a.associationDirection||(n.markerEnd=b("association-end",r,i)),"Both"===a.associationDirection&&(n.markerStart=b("association-start",r,i)),g(e,t.waypoints,n)},"bpmn:DataInputAssociation":function(e,t){var n=Object(td.d)(t,l),a=Object(td.i)(t,c);return E("bpmn:Association")(e,t,{markerEnd:b("association-end",n,a)})},"bpmn:DataOutputAssociation":function(e,t){var n=Object(td.d)(t,l),a=Object(td.i)(t,c);return E("bpmn:Association")(e,t,{markerEnd:b("association-end",n,a)})},"bpmn:MessageFlow":function(e,t){var n=Object(td.h)(t),r=Object(td.b)(t),i=Object(td.d)(t,l),o=Object(td.i)(t,c),s=y(e,C(t),{markerEnd:b("messageflow-end",i,o),markerStart:b("messageflow-start",i,o),strokeDasharray:"10, 12",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"1.5px",stroke:Object(td.i)(t,c)});if(n.messageRef){var u=s.getPointAtLength(s.getTotalLength()/2),m=a.getScaledPath("MESSAGE_FLOW_MARKER",{abspos:{x:u.x,y:u.y}}),d={strokeWidth:1};"initiating"===r.messageVisibleKind?(d.fill="white",d.stroke="black"):(d.fill="#888",d.stroke="white"),y(e,m,d)}return s},"bpmn:DataObject":function(e,t){var n=y(e,a.getScaledPath("DATA_OBJECT_PATH",{xScaleFactor:1,yScaleFactor:1,containerWidth:t.width,containerHeight:t.height,position:{mx:.474,my:.296}}),{fill:Object(td.d)(t,l),fillOpacity:.95,stroke:Object(td.i)(t,c)}),r=Object(td.h)(t);return Object(td.j)(r)&&function(e,t){var n=(t.height-18)/t.height,r=a.getScaledPath("DATA_OBJECT_COLLECTION_PATH",{xScaleFactor:1,yScaleFactor:1,containerWidth:t.width,containerHeight:t.height,position:{mx:.33,my:n}});y(e,r,{strokeWidth:2,stroke:Object(td.i)(t,c)})}(e,t),n},"bpmn:DataObjectReference":O("bpmn:DataObject"),"bpmn:DataInput":function(e,t){var n=a.getRawPath("DATA_ARROW"),r=E("bpmn:DataObject")(e,t);return y(e,n,{strokeWidth:1}),r},"bpmn:DataOutput":function(e,t){var n=a.getRawPath("DATA_ARROW"),r=E("bpmn:DataObject")(e,t);return y(e,n,{strokeWidth:1,fill:"black"}),r},"bpmn:DataStoreReference":function(e,t){return y(e,a.getScaledPath("DATA_STORE",{xScaleFactor:1,yScaleFactor:1,containerWidth:t.width,containerHeight:t.height,position:{mx:0,my:.133}}),{strokeWidth:2,fill:Object(td.d)(t,l),fillOpacity:.95,stroke:Object(td.i)(t,c)})},"bpmn:BoundaryEvent":function(e,t){var n=Object(td.h)(t).cancelActivity,a={strokeWidth:1,fill:Object(td.d)(t,l),stroke:Object(td.i)(t,c)};n||(a.strokeDasharray="6",a.strokeLinecap="round");var r=Object(Lm.assign)({},a,{fillOpacity:1}),i=Object(Lm.assign)({},a,{fill:"none"}),o=E("bpmn:Event")(e,t,r);return f(e,t.width,t.height,3,i),j(t,e),o},"bpmn:Group":function(e,t){return v(e,t.width,t.height,10,{stroke:Object(td.i)(t,c),strokeWidth:1,strokeDasharray:"8,3,1,3",fill:"none",pointerEvents:"none"})},label:function(e,t){return function(e,t){var n={width:90,height:30,x:t.width/2+t.x,y:t.height/2+t.y};return x(e,Object(Qm.a)(t),{box:n,fitBox:!0,style:Object(Lm.assign)({},i.getExternalStyle(),{fill:Object(td.i)(t,c)})})}(e,t)},"bpmn:TextAnnotation":function(e,t){var n=v(e,t.width,t.height,0,0,{fill:"none",stroke:"none"});return y(e,a.getScaledPath("TEXT_ANNOTATION",{xScaleFactor:1,yScaleFactor:1,containerWidth:t.width,containerHeight:t.height,position:{mx:0,my:0}}),{stroke:Object(td.i)(t,c)}),x(e,Object(td.h)(t).text||"",{box:t,align:"left-top",padding:5,style:{fill:Object(td.i)(t,c)}}),n},ParticipantMultiplicityMarker:function(e,t){h("participant-multiplicity",e,a.getScaledPath("MARKER_PARALLEL",{xScaleFactor:1,yScaleFactor:1,containerWidth:t.width,containerHeight:t.height,position:{mx:t.width/2/t.width,my:(t.height-15)/t.height}}),{strokeWidth:2,fill:Object(td.d)(t,l),stroke:Object(td.i)(t,c)})},SubProcessMarker:function(e,t){var n=v(e,14,14,0,{strokeWidth:1,fill:Object(td.d)(t,l),stroke:Object(td.i)(t,c)});Object(rd.c)(n,t.width/2-7.5,t.height-20),h("sub-process",e,a.getScaledPath("MARKER_SUB_PROCESS",{xScaleFactor:1.5,yScaleFactor:1.5,containerWidth:t.width,containerHeight:t.height,position:{mx:(t.width/2-7.5)/t.width,my:(t.height-20)/t.height}}),{fill:Object(td.d)(t,l),stroke:Object(td.i)(t,c)})},ParallelMarker:function(e,t,n){h("parallel",e,a.getScaledPath("MARKER_PARALLEL",{xScaleFactor:1,yScaleFactor:1,containerWidth:t.width,containerHeight:t.height,position:{mx:(t.width/2+n.parallel)/t.width,my:(t.height-20)/t.height}}),{fill:Object(td.d)(t,l),stroke:Object(td.i)(t,c)})},SequentialMarker:function(e,t,n){h("sequential",e,a.getScaledPath("MARKER_SEQUENTIAL",{xScaleFactor:1,yScaleFactor:1,containerWidth:t.width,containerHeight:t.height,position:{mx:(t.width/2+n.seq)/t.width,my:(t.height-19)/t.height}}),{fill:Object(td.d)(t,l),stroke:Object(td.i)(t,c)})},CompensationMarker:function(e,t,n){h("compensation",e,a.getScaledPath("MARKER_COMPENSATION",{xScaleFactor:1,yScaleFactor:1,containerWidth:t.width,containerHeight:t.height,position:{mx:(t.width/2+n.compensation)/t.width,my:(t.height-13)/t.height}}),{strokeWidth:1,fill:Object(td.d)(t,l),stroke:Object(td.i)(t,c)})},LoopMarker:function(e,t,n){h("loop",e,a.getScaledPath("MARKER_LOOP",{xScaleFactor:1,yScaleFactor:1,containerWidth:t.width,containerHeight:t.height,position:{mx:(t.width/2+n.loop)/t.width,my:(t.height-7)/t.height}}),{strokeWidth:1,fill:Object(td.d)(t,l),stroke:Object(td.i)(t,c),strokeLinecap:"round",strokeMiterlimit:.5})},AdhocMarker:function(e,t,n){h("adhoc",e,a.getScaledPath("MARKER_ADHOC",{xScaleFactor:1,yScaleFactor:1,containerWidth:t.width,containerHeight:t.height,position:{mx:(t.width/2+n.adhoc)/t.width,my:(t.height-15)/t.height}}),{strokeWidth:1,fill:Object(td.i)(t,c),stroke:Object(td.i)(t,c)})}};function S(e,t,n){var a,r=Object(td.h)(t),i=n&&-1!==n.indexOf("SubProcessMarker");a=i?{seq:-21,parallel:-22,compensation:-42,loop:-18,adhoc:10}:{seq:-3,parallel:-6,compensation:-27,loop:0,adhoc:10},Object(Lm.forEach)(n,(function(n){E(n)(e,t,a)})),r.isForCompensation&&E("CompensationMarker")(e,t,a),"bpmn:AdHocSubProcess"===r.$type&&E("AdhocMarker")(e,t,a);var o=r.loopCharacteristics,l=o&&o.isSequential;o&&(void 0===l&&E("LoopMarker")(e,t,a),!1===l&&E("ParallelMarker")(e,t,a),!0===l&&E("SequentialMarker")(e,t,a))}this._drawPath=y}_u()(od,Zm.a),od.$inject=["config.bpmnRenderer","eventBus","styles","pathMap","canvas","textRenderer"],od.prototype.canRender=function(e){return Object(P.is)(e,"bpmn:BaseElement")},od.prototype.drawShape=function(e,t){var n=t.type;return(0,this.handlers[n])(e,t)},od.prototype.drawConnection=function(e,t){var n=t.type;return(0,this.handlers[n])(e,t)},od.prototype.getShapePath=function(e){return Object(P.is)(e,"bpmn:Event")?Object(td.a)(e):Object(P.is)(e,"bpmn:Activity")?Object(td.g)(e,10):Object(P.is)(e,"bpmn:Gateway")?Object(td.c)(e):Object(td.f)(e)};var ld={__init__:["propertiesProvider","replaceMenuProvider"],propertiesProvider:["type",_m],replaceMenuProvider:["type",Xm],bpmnRenderer:["type",od]},cd=n(417),sd=Object(F.a)((function(e){return{dialogPaper:{padding:5,minWidth:300,overflow:"auto"},save:{margin:e.spacing(1),backgroundColor:"#0275d8",borderColor:"#0267bf",color:"white",textTransform:"none","&:hover":{backgroundColor:"#025aa5",borderColor:"#014682",color:"white"}}}}));function ud(e){var t=e.openAlert,n=e.alertClose,a=e.message,i=e.title,o=e.handleAlertOk,l=sd();return r.a.createElement(I.a,{open:t,onClose:function(e,t){"backdropClick"!==t&&n(e)},"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",classes:{paper:l.dialogPaper}},r.a.createElement(za.a,{id:"alert-dialog-title"},i),r.a.createElement(Ga.a,null,r.a.createElement(Ha.a,{id:"alert-dialog-description"},a)),r.a.createElement(Ua.a,null,r.a.createElement(In.a,{onClick:o,className:l.save},"OK"),r.a.createElement(In.a,{onClick:n,className:l.save},"Cancel")))}var md=Object(F.a)((function(e){return{dialogPaper:{padding:5,minWidth:450,overflow:"auto"},button:{margin:e.spacing(1),backgroundColor:"#0275d8",borderColor:"#0267bf",color:"white","&:hover":{backgroundColor:"#025aa5",borderColor:"#014682",color:"white"}},select:{minWidth:250,marginLeft:10},tableCell:{padding:"0px 10px",textAlign:"left"},tableHead:{fontWeight:600,fontSize:12},process:{marginTop:10},processHeader:{marginBottom:10,fontSize:12}}}));function dd(e){var t=e.open,n=e.onClose,i=e.ids,o=e.onOk,s=e.wkf,u=i||{},m=u.oldElements,p=u.currentElements,b=Object(a.useState)({}),f=Object(l.a)(b,2),v=f[0],g=f[1],y=Object(a.useState)(!0),h=Object(l.a)(y,2),O=h[0],E=h[1],j=md(),x=function(e,t){var n=p[e];return n&&n.elements&&n.elements.filter((function(e){return e.type===t}))||[]},w=r.a.useCallback((function(e,t){var n=p[e];return n&&n.elements&&n.elements.find((function(e){return e.id===t}))}),[p]);return Object(a.useEffect)((function(){var e={};m&&(Object.entries(m).forEach((function(t){var n=Object(l.a)(t,2),a=n[0],r=n[1],i={};r.elements.forEach((function(e){var t=w(a,e.id);e&&(i[e.id]=t&&t.id)})),a&&(e[a]=i)})),g(e))}),[m,w]),r.a.createElement(I.a,{open:t,onClose:function(e,t){"backdropClick"!==t&&n(e)},"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",classes:{paper:j.dialogPaper}},r.a.createElement(za.a,null,r.a.createElement("strong",null,"Node Mapping")),r.a.createElement(Ga.a,null,s&&1===s.statusSelect&&m&&r.a.createElement(Qa.a,{control:r.a.createElement(Bi.a,{checked:O,onChange:function(){E((function(e){return!e}))},color:"primary",name:"isMigrateOld"}),label:"Migrate previous version records?"}),m&&Object.entries(m).map((function(e){var t=Object(l.a)(e,2),n=t[0],a=t[1];return r.a.createElement("div",{key:n,className:j.process},r.a.createElement(ee.a,{className:j.processHeader},r.a.createElement("strong",null,n)),r.a.createElement(qc.a,{component:Za.a},r.a.createElement(Lo.a,{size:"small","aria-label":"a dense table"},r.a.createElement(Ao.a,null,r.a.createElement(Vo.a,null,r.a.createElement(Io.a,{className:j.tableHead,align:"center"},"Old Node"),r.a.createElement(Io.a,{className:j.tableHead,align:"center"},"Current Node"))),r.a.createElement(Do.a,null,a.elements&&a.elements.map((function(e,t){return r.a.createElement(Vo.a,{key:t},r.a.createElement(Io.a,{component:"th",scope:"row",align:"center",className:j.tableCell},e.name),r.a.createElement(Io.a,{component:"th",scope:"row",align:"center",className:j.tableCell},r.a.createElement(ei,{className:j.select,isLabel:!1,options:x(n,e.type),defaultValue:w(n,e.id)||{},update:function(t){return function(e,t,n){var a=Object(c.a)({},v);a[n]=Object(c.a)(Object(c.a)({},a[n]),{},Object(d.a)({},e&&e.id,t&&t.id)),g(a)}(e,t,n)},isTranslated:!1})))}))))))}))),r.a.createElement(Ua.a,null,r.a.createElement(In.a,{onClick:function(){o(v,O)},className:j.button,color:"primary",variant:"outlined"},"Ok"),r.a.createElement(In.a,{onClick:n,variant:"outlined",color:"primary",className:j.button,style:{textTransform:"none"}},"Cancel")))}n(394),n(395),n(729),n(396),n(730);var pd=n(82).default,bd={display:"flex",alignItems:"center",justifyContent:"center",borderLeft:"solid 1px #ddd",background:"#f0f0f0"},fd=r.a.lazy((function(){return n.e(3).then(n.bind(null,865))})),vd=Object(F.a)((function(e){return{drawerPaper:{background:"#F8F8F8",width:"100%",position:"absolute",borderLeft:"1px solid #ccc",overflow:"auto",height:"100%"},drawerContainer:{padding:10,height:"100%"},select:{minWidth:150,marginLeft:20,marginTop:0,border:"none"},label:{display:"inline-block",verticalAlign:"middle",color:"rgba(0, 0, 0, 0.54)",margin:"8px 0px 3px 25px"}}})),gd=null,yd=new pd([32,32,1]).nextPrefixed("Process_");function hd(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!e.businessObject||!e.businessObject.di||!e.businessObject.di.stroke&&!e.businessObject.di.fill||t){var n=gd.get("modeling"),a={};Object(P.is)(e,["bpmn:Gateway"])?(a.stroke=Se["bpmn:Gateway"],a.fill=Ce["bpmn:Gateway"],e.businessObject.di.set("stroke",Se["bpmn:Gateway"]),e.businessObject.di.set("fill",Ce["bpmn:Gateway"])):(e.businessObject.di.set("stroke",Se[e.type]),a.stroke=Se[e.type],Ce[e.type]&&!["bpmn:SequenceFlow","bpmn:MessageFlow","bpmn:Association"].includes(e.type)&&(a.fill=Ce[e.type],e.businessObject.di.set("fill",Ce[e.type]))),n.setColor(e,a)}}var Od=function(){var e=Object(a.useState)(null),t=Object(l.a)(e,2),n=t[0],i=t[1],o=Object(a.useState)(null),u=Object(l.a)(o,2),b=u[0],g=u[1],h=Object(a.useState)(!1),E=Object(l.a)(h,2),x=E[0],k=E[1],S=Object(a.useState)(!1),F=Object(l.a)(S,2),I=F[0],A=F[1],V=Object(a.useState)(!0),B=Object(l.a)(V,2),G=B[0],U=B[1],H=Object(a.useState)(!0),q=Object(l.a)(H,2),K=q[0],Y=q[1],X=Object(a.useState)("Item is required."),Z=Object(l.a)(X,2),ee=Z[0],te=Z[1],ne=Object(a.useState)({oldIds:null,currentIds:null}),ae=Object(l.a)(ne,2),re=ae[0],ie=ae[1],oe=Object(a.useState)({open:!1,messageType:null,message:null}),le=Object(l.a)(oe,2),ce=le[0],se=le[1],ue=Object(a.useState)(null),me=Object(l.a)(ue,2),de=me[0],pe=me[1],be=Object(a.useState)(!1),fe=Object(l.a)(be,2),ge=fe[0],ye=fe[1],he=Object(a.useState)(null),Oe=Object(l.a)(he,2),Ee=Oe[0],je=Oe[1],xe=Object(a.useState)(0),we=Object(l.a)(xe,2),ke=we[0],Ne=we[1],Pe=Object(a.useState)([]),Fe=Object(l.a)(Pe,2),_e=Fe[0],Re=Fe[1],Le=Object(a.useState)(380),De=Object(l.a)(Le,2),Ae=De[0],Ve=De[1],Be=Object(a.useState)("100%"),$e=Object(l.a)(Be,2),We=$e[0],Je=$e[1],ze=Object(a.useState)("Error"),Ge=Object(l.a)(ze,2),Ue=Ge[0],He=Ge[1],qe=Object(a.useState)(!1),Ke=Object(l.a)(qe,2),Ye=Ke[0],Xe=Ke[1],Qe=Object(a.useState)(!1),it=Object(l.a)(Qe,2),ot=it[0],lt=it[1],ct=vd(),st=r.a.useRef(null),ut=function(){k(!0)},mt=function(){k(!1)},dt=function(e,t){se({open:!0,messageType:e,message:t})},pt=function(e,t){"clickaway"!==t&&se({open:!1,messageType:null,message:null})},bt=function(){var e=Object(p.a)(m.a.mark((function e(t,n,a){var r,i,o,l,c,s,u,p,b,f,v,g,y,h,O;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a){e.next=2;break}return e.abrupt("return");case 2:if(r=Object(P.getBusinessObject)(t)){e.next=5;break}return e.abrupt("return");case 5:if(z(r.$attrs&&r.$attrs["camunda:isTranslations"]||!1)){e.next=8;break}return e.abrupt("return");case 8:return e.next=10,Tt(a);case 10:if(!((i=e.sent)&&i.length>0)){e.next=35;break}return e.next=14,At();case 14:if(o=e.sent,l=o&&o["user.lang"]){e.next=18;break}return e.abrupt("return");case 18:if(c=i.find((function(e){return e.language===l})),t){e.next=21;break}return e.abrupt("return");case 21:if(s=c&&c.message,u=t&&t.businessObject,p=t&&t.type,f=u[b="bpmn:TextAnnotation"===p?"text":"bpmn:Group"===p?"categoryValue":"name"],v=u.$attrs["camunda:key"],g=s||v||f,t.businessObject[b]=g,y=n.get("elementRegistry"),h=n.get("modeling"),O=y.get(t.id)){e.next=34;break}return e.abrupt("return");case 34:h&&h.updateProperties(O,Object(d.a)({},b,g));case 35:case"end":return e.stop()}}),e)})));return function(t,n,a){return e.apply(this,arguments)}}(),ft=function(e,t){var n="camunda:".concat(t),a=Object(P.getBusinessObject)(e);return"bpmn:Participant"===(e&&e.type)&&(a=Object(P.getBusinessObject)(a&&a.processRef)),a&&a.$attrs&&a.$attrs[n]||""},vt=r.a.useCallback((function(e){if(e)if(Te.includes(e.type)){var t=ft(e,"metaModel"),n=ft(e,"metaJsonModel");ye(!n&&!t)}else ye(!1)}),[]),gt=r.a.useCallback((function(e,t,n,a){gd.importXML(e,(function(e){if(e)dt("error","Error! Can't import XML");else{t&&su(a,i,gd),gd.get("canvas").zoom("fit-viewport");var n=gd._definitions;n&&n.$attrs&&a&&["code","name","versionTag","appBuilder","description","wkfStatusColor"].forEach((function(e){"name"===e?Dt("diagramName",a[e],!0):"appBuilder"===e?Dt("appBuilder",a[e]&&a[e].code,!0):Dt(e,a[e],!0)}));var r=fu(gd,n);Re(r),Ne(0),pe(n);var o=gd.get("elementRegistry"),c=gd.get("modeling"),s=o&&o._elements;s&&(Object.entries(s).forEach((function(e){var t=Object(l.a)(e,2),n=(t[0],t[1]);if(n){var a=n.element;if(a){if(c&&a.businessObject&&a.businessObject.di){var r=Object(P.is)(a,["bpmn:Gateway"])?"bpmn:Gateway":a.type,i={stroke:a.businessObject.di.stroke||Se[r]};!a.businessObject.di.fill&&!Ce[r]||["bpmn:SequenceFlow","bpmn:MessageFlow","bpmn:Association"].includes(a.type)||(i.fill=a.businessObject.di.fill||Ce[r]),c.setColor(a,i)}if(["Shape","Root"].includes(a.constructor.name)){var o=a.businessObject;if(!o)return;if(function(e){return Object(T.isAny)(e,Ie)}(a))return;if("false"===o.$attrs["camunda:displayStatus"])return;!o.$attrs||void 0!==o.$attrs["camunda:displayStatus"]&&null!==o.$attrs["camunda:displayStatus"]||(o.$attrs["camunda:displayStatus"]=!0)}var s=Object(P.getBusinessObject)(a),u=a&&a.type,m="bpmn:TextAnnotation"===u?"text":"bpmn:Group"===u?"categoryValue":"name",d=a.businessObject.$attrs["camunda:key"]||s&&s.get([m]);bt(a,gd,d)}}})),gd.saveXML({format:!0},(function(e,t){e||(st.current=t)})))}}))}),[]),yt=r.a.useCallback((function(e,t,n,a){var r=e||'<?xml version="1.0" encoding="UTF-8" ?>\n      <bpmn2:definitions \n        xmlns:xs="http://www.w3.org/2001/XMLSchema-instance" \n        xs:schemaLocation="http://www.omg.org/spec/BPMN/20100524/MODEL BPMN20.xsd" \n        xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" \n        xmlns:bpmn2="http://www.omg.org/spec/BPMN/20100524/MODEL" \n        xmlns:bpmndi="http://www.omg.org/spec/BPMN/20100524/DI" \n        xmlns:dc="http://www.omg.org/spec/DD/20100524/DC" \n        xmlns:di="http://www.omg.org/spec/DD/20100524/DI" \n        id="sample-diagram" targetNamespace="http://bpmn.io/schema/bpmn">\n        <bpmn2:process id="'.concat(yd,'" isExecutable="true">\n          <bpmn2:startEvent id="StartEvent_1" />\n        </bpmn2:process>\n        <bpmndi:BPMNDiagram id="BPMNDiagram_1">\n          <bpmndi:BPMNPlane id="BPMNPlane_1" bpmnElement="').concat(yd,'">\n            <bpmndi:BPMNShape id="_BPMNShape_StartEvent_2" bpmnElement="StartEvent_1" bioc:stroke="#55c041" bioc:fill="#ccecc6">\n              <dc:Bounds height="36.0" width="36.0" x="412.0" y="240.0" />\n            </bpmndi:BPMNShape>\n          </bpmndi:BPMNPlane>\n        </bpmndi:BPMNDiagram>\n      </bpmn2:definitions>');gt(r,t,n,a)}),[gt]),ht=r.a.useCallback(function(){var e=Object(p.a)(m.a.mark((function e(t){var n,a,r,o=arguments;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=o.length>1&&void 0!==o[1]&&o[1],!t){e.next=13;break}return e.next=4,rt(t);case 4:if(e.t0=e.sent,e.t0){e.next=7;break}e.t0={};case 7:a=e.t0,r=a.diagramXml,i(a),yt(r,n,t,a),e.next=14;break;case 13:yt(void 0,n,t);case 14:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[yt]),Ot=function(e){var t=e.target.files,n=new FileReader;t&&t[0]&&t[0].name&&!t[0].name.includes(".bpmn")?dt("error","Upload Bpmn files only"):(n.readAsText(t&&t[0]),n.onload=function(e){gt(e.target.result,!1)})};function Et(e,t){return e&&e.reduce((function(e,n){return n.name===t&&e.push([]),e[e.length-1]&&e[e.length-1].push(n),e}),[])}var jt=function(){var e=Object(p.a)(m.a.mark((function e(){var t,n,a;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,gd.saveXML({format:!0});case 2:if(e.t0=e.sent,e.t0){e.next=5;break}e.t0={};case 5:return t=e.t0,n=t.xml,a=st.current,e.abrupt("return","".concat(a)!=="".concat(n));case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),xt=function(){i(null),g(null),yt()},wt=function(){var e=Object(p.a)(m.a.mark((function e(){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,jt();case 2:e.sent?(te("Current changes will be lost. Do you really want to proceed?"),He("Refresh"),ut()):It();case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),kt=function(){var e=Object(p.a)(m.a.mark((function e(){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,jt();case 2:e.sent?(te("Current changes will be lost. Do you really want to proceed?"),He("New"),ut()):xt(),lt(!1);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Ct=function(){var e=gd._definitions,t=e&&e.$attrs,a=t["camunda:diagramName"],r=t["camunda:code"];if(!a||!r)return dt("error",a||r?a?r?"":"Code is required.":"Name is required.":"Name and code are required."),void lt(!0);if(ot&&lt(!1),!K){var o=gd.get("elementRegistry").filter((function(e){var t=Object(P.getBusinessObject)(e);if(t&&t.eventDefinitions&&t.eventDefinitions.find((function(e){return"bpmn:TimerEventDefinition"===e.$type})))return e;return null}));if(o&&o.length>0)return void dt("error","Timer events are not supported.")}var l=gd.get("elementRegistry"),u=l&&l._elements,d=!0;u&&Object.values(u).forEach((function(e){var t=e.element,n=Object(P.getBusinessObject)(t),a=n.extensionElements,r=n&&n.name||t&&t.id;if(!t.id)return te("Id is required in ".concat(r)),ut(),void(d=!1);if(["bpmn:EndEvent","bpmn:IntermediateCatchEvent"].concat(Object(s.a)(Te)).includes(e.element.type)){var i,o;if(a&&a.values&&(i=(o=a.values.find((function(e){return"camunda:Properties"===e.$type})))&&o.values),i&&i.length<1)return;var l=Et(i,"model"),u=[];l&&l.forEach((function(e){var t={items:[]},n=Et(e,"item");e.forEach((function(e){if("model"===e.name&&(t.model={model:e.value,fullName:e.value}),"modelName"===e.name&&(t.model=Object(c.a)(Object(c.a)({},t.model),{},{name:e.value})),"modelType"===e.name&&(t.model=Object(c.a)(Object(c.a)({},t.model),{},{type:e.value})),"modelLabel"===e.name&&(t.modelLabel=e.value,t.model=Object(c.a)(Object(c.a)({},t.model),{},{title:e.value})),"view"===e.name&&(t.view={name:e.value}),"viewLabel"===e.name&&(t.viewLabel=e.value,t.view=Object(c.a)(Object(c.a)({},t.view),{},{title:e.value})),"roles"===e.name){if(!e.value)return;var n=e.value.split(","),a=[];n.forEach((function(e){a.push({name:e})})),t.roles=a}})),n&&n.forEach((function(e){var n=e.find((function(e){return"item"===e.name})),a=e.find((function(e){return"itemLabel"===e.name})),r=e.find((function(e){return["readonly","readonlyIf","hidden","hideIf","required","requiredIf","title","domain","active"].includes(e.name)})),i=e.find((function(e){return"permanent"===e.name}));t.items.push({itemName:{name:n&&n.value,label:a&&a.value},itemNameLabel:a&&a.value,attributeName:r&&r.name,attributeValue:r&&r.value,permanent:i&&i.value})})),u.push(t)})),u&&u.length>0&&u&&u.forEach((function(e){var t=e.items,n=void 0===t?[]:t,a=n.filter((function(e){return e&&(!e.itemName||!e.attributeName)}));if(n.length<1||a.length===n.length)return te("Item is required in ".concat(r)),ut(),void(d=!1);n.length>0&&n.forEach((function(e){var t=e.itemName,n=e.attributeName,a=e.attributeValue;if(!t||!n)return te("Item name is required in ".concat(r)),ut(),void(d=!1);if(!a){if(!["readonly","hidden","required"].includes(n))return d=!1,te("Item value is required in ".concat(r)),void ut();a=!1}}))}))}})),d&&gd.saveXML({format:!0},function(){var e=Object(p.a)(m.a.mark((function e(t,a){var r,o,l,s,u,d;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=function(){return(s=Object(p.a)(m.a.mark((function e(){var t;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o["camunda:appBuilder"]){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,Ze({data:{criteria:[{fieldName:"code",operator:"=",value:o["camunda:appBuilder"]}],operator:"and"}});case 4:return t=e.sent,e.abrupt("return",t&&t[0]);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)},l=function(){return s.apply(this,arguments)},r=gd._definitions,o=r&&r.$attrs,st.current=a,e.next=7,l();case 7:return u=e.sent,e.next=10,ve.add("com.axelor.apps.bpm.db.WkfModel",Object(c.a)(Object(c.a)({},n),{},{diagramXml:a,name:o["camunda:diagramName"],code:o["camunda:code"],wkfStatusColor:o["camunda:wkfStatusColor"]||"blue",versionTag:o["camunda:versionTag"],description:o["camunda:description"],appBuilder:u}));case 10:(d=e.sent)&&d.data&&d.data[0]?(i(Object(c.a)({},d.data[0])),g(d.data[0].id),dt("success","Saved Successfully")):dt("error",d&&d.data&&(d.data.message||d.data.title)||"Error!");case 12:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}())};function Nt(e,t){return e&&C.a.getExtensionElements(e,t)||[]}var St=function(e){var t=Object(P.getBusinessObject)(e);return Object(P.is)(e,"bpmn:Participant")&&(t=t&&t.get("processRef")),t},Mt=function(e,t,n,a){var r=gd.get("bpmnFactory"),i={event:n,script:w.a.createElement("camunda:Script",{scriptFormat:"axelor",value:a},St(),r)},o=w.a.createElement(t,i,void 0,r);o.$attrs.outId="dmn_output_mapping";var l=St(e),c=l&&l.extensionElements;return c||(c=w.a.createElement("bpmn:ExtensionElements",{values:[]},l,r),e.businessObject.extensionElements=c),e.businessObject.extensionElements.values.push(o),o},Pt=function(){var e=Object(p.a)(m.a.mark((function e(){var t,n,a,r,i,o,l,c,s,u,d,p,b,f,v,g,y;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=gd.get("elementRegistry"),(n=t.filter((function(e){return Object(P.is)(e,"bpmn:BusinessRuleTask")})))&&!(n.length<0)){e.next=4;break}return e.abrupt("return",{status:-1});case 4:if((a=n&&n.filter((function(e){return e&&e.businessObject&&e.businessObject.$attrs&&z(e.businessObject.$attrs["camunda:assignOutputToFields"])})))&&!(a.length<0)){e.next=7;break}return e.abrupt("return",{status:-1});case 7:r=0;case 8:if(!(r<a.length)){e.next=24;break}if(!(i=a[r])||!i.businessObject){e.next=21;break}return o=i.businessObject.$attrs&&i.businessObject.$attrs["camunda:ifMultiple"],l=i.businessObject.$attrs&&i.businessObject.$attrs["camunda:searchWith"],c=i.businessObject.resultVariable,s=i.businessObject.decisionRef,u=i.businessObject.$attrs&&(i.businessObject.$attrs["camunda:metaModelModelName"]||i.businessObject.$attrs["camunda:metaJsonModelModelName"]),d={decisionId:s,ctxModel:u,searchWith:l,ifMultiple:o,resultVariable:c},e.next=19,ve.action({model:"com.axelor.apps.bpm.db.WkfModel",action:"action-wkf-dmn-model-method-create-output-to-field-script",data:{context:d}});case 19:(p=e.sent)&&p.data&&p.data[0]&&(b=p.data[0].values,(f=b.script)&&(v=St(i),g=Nt(v,"camunda:ExecutionListener"),(y=g.find((function(e){return e&&e.$attrs&&"dmn_output_mapping"===e.$attrs.outId})))&&y.script?y.script.value=f:Mt(i,"camunda:ExecutionListener","end",f)));case 21:r++,e.next=8;break;case 24:return e.abrupt("return",{status:0});case 25:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Ft=function(){var e=Object(p.a)(m.a.mark((function e(t,a){var r,o=arguments;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=o.length>2&&void 0!==o[2]?o[2]:n,gd.saveXML({format:!0},function(){var e=Object(p.a)(m.a.mark((function e(n,o){var l,s,u,d;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return st.current=o,e.next=3,ve.add("com.axelor.apps.bpm.db.WkfModel",Object(c.a)(Object(c.a)({},r),{},{diagramXml:o}));case 3:if(!((l=e.sent)&&l.data&&l.data[0])){e.next=14;break}return i(Object(c.a)({},l.data[0])),s=Object(c.a)(Object(c.a)({_model:"com.axelor.apps.bpm.db.WkfModel"},l.data[0]),{},{wkfMigrationMap:t}),r&&1===r.statusSelect&&r.oldNodes&&(s.isMigrateOld=a),e.next=10,ve.action({model:"com.axelor.apps.bpm.db.WkfModel",action:"action-wkf-model-method-deploy",data:{context:Object(c.a)({},s)}});case 10:(u=e.sent)&&u.data&&u.data[0]&&u.data[0].reload?(r&&1!==r.statusSelect&&dt("success","Deployed Successfully"),ht(r.id,!0)):dt("error",u&&u.data&&(u.data.message||u.data.title)||"Error!"),e.next=15;break;case 14:dt("error",l&&l.data&&(l.data.message||l.data.title)||"Error!");case 15:if(!r||1!==r.statusSelect){e.next=20;break}return e.next=18,ve.action({model:"com.axelor.apps.bpm.db.WkfModel",action:"action-wkf-model-method-start",data:{context:Object(c.a)({_model:"com.axelor.apps.bpm.db.WkfModel"},l.data[0])}});case 18:(d=e.sent)&&d.data&&d.data[0]&&d.data[0].reload?(dt("success","Started Successfully"),ht(r.id,!0)):dt("error",d&&d.data&&(d.data.message||d.data.title)||"Error!");case 20:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}());case 2:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),_t=function(){var e=Object(p.a)(m.a.mark((function e(t,a){var r,i,o,l,s,u;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(A(!1),!n||1!==n.statusSelect){e.next=14;break}if(r=gd._definitions&&gd._definitions.rootElements,i=r&&r.filter((function(e){return"bpmn:Process"===e.$type})),!((o=i.map((function(e){return e.id})))&&o.length>0)){e.next=14;break}return e.next=8,Ut({data:{criteria:[{fieldName:"name",operator:"IN",value:o}]},limit:1});case 8:if(l=e.sent,s=l&&l[0],u=n&&n.wkfProcessList&&n.wkfProcessList.map((function(e){return e.name}))||[],!s||n.previousVersion||u&&u.some((function(e){return o&&o.includes(e)}))){e.next=14;break}return dt("error","Please provide unique process id"),e.abrupt("return");case 14:return e.next=16,Pt();case 16:0===e.sent.status?gd.saveXML({format:!0},function(){var e=Object(p.a)(m.a.mark((function e(r,i){var o;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return st.current=i,e.next=3,ve.add("com.axelor.apps.bpm.db.WkfModel",Object(c.a)(Object(c.a)({},n),{},{diagramXml:i}));case 3:o=e.sent,Ft(t,a,o&&o.data&&o.data[0]);case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()):Ft(t,a);case 18:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),Rt=function(){var e=Object(p.a)(m.a.mark((function e(){var t,a;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n){e.next=2;break}return e.abrupt("return");case 2:t=mu(gd),a=JSON.parse(n.oldNodes),ie({currentElements:t,oldElements:a}),A(!0);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Lt=function(){var e=Object(p.a)(m.a.mark((function e(){var t;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("Question"!==Ue){e.next=7;break}return e.next=3,tt(b);case 3:"string"!==typeof(t=e.sent)?(dt("success","Deleted Successfully"),kt()):dt("error",t),e.next=8;break;case 7:"New"===Ue?xt():"Refresh"===Ue&&It();case 8:mt(),He("Error");case 10:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Dt=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],a=gd._definitions,r=a&&a.$attrs;if(r){var i=["null",""].includes(r["camunda:".concat(e)])||!n||!t||""===t&&"null"===t?r["camunda:".concat(e)]?r["camunda:".concat(e)]:!t||""===t&&"null"===t?void 0:t:t;if(r["camunda:".concat(e)]=i,!i)return void delete r["camunda:".concat(e)]}},It=function(){ht(b)},Vt=[{name:"New",icon:r.a.createElement("i",{className:"fa fa-plus",style:{fontSize:18}}),tooltipText:"Add New",onClick:kt},{name:"Save",icon:r.a.createElement("i",{className:"fa fa-floppy-o",style:{fontSize:18}}),tooltipText:"Save",onClick:Ct},{name:"Delete",icon:r.a.createElement("i",{className:"fa fa-trash-o",style:{fontSize:18}}),tooltipText:"Delete",onClick:function(){te("Are you sure you want to delete this record?"),He("Question"),ut()}},{name:"Image",icon:r.a.createElement("i",{className:"fa fa-picture-o",style:{fontSize:18}}),tooltipText:"Download SVG",onClick:function(){gd.saveSVG({format:!0},function(){var e=Object(p.a)(m.a.mark((function e(t,n){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:W(n,"diagram.svg");case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}())}},{name:"UploadXml",icon:r.a.createElement("i",{className:"fa fa-upload",style:{fontSize:18}}),tooltipText:"Upload",onClick:lu},{name:"DownloadXml",icon:r.a.createElement("i",{className:"fa fa-download",style:{fontSize:18}}),tooltipText:"Download",onClick:function(){gd.saveXML({format:!0},function(){var e=Object(p.a)(m.a.mark((function e(t,n){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:W(n,"diagram.bpmn");case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}())}},{name:"Deploy",icon:r.a.createElement("i",{className:"fa fa-rocket",style:{fontSize:18}}),tooltipText:n&&1===n.statusSelect?"Start":"Deploy",onClick:Rt,disable:!b},{name:"Diagram properties",icon:r.a.createElement("i",{className:"fa fa-bars",style:{fontSize:18}}),tooltipText:"Show diagram properties",onClick:function(){var e=gd._definitions;e&&e.$attrs&&n&&["code","name","versionTag","appBuilder","description","wkfStatusColor"].forEach((function(e){"name"===e?Dt("diagramName",n[e]):"appBuilder"===e?Dt("appBuilder",n[e]&&n[e].code):Dt(e,n[e])})),zt({element:e},!1)}},{name:"Refresh",icon:r.a.createElement("i",{className:"fa fa-refresh",style:{fontSize:18}}),tooltipText:"Refresh",onClick:wt}];function Bt(e,t){var n=gd.get("bpmnFactory"),a=w.a.createElement("bpmn:ExtensionElements",{values:[]},t,n);return{cmd:j.a.updateBusinessObject(e,t,{extensionElements:a}),parent:a}}function $t(e){return function(e){return Object(P.is)(e,"bpmn:ExtensionElements")}(e)?(t=e,f()(t.$parent.extensionElements&&t.$parent.extensionElements.values,(function(e){return Object(P.is)(e,"camunda:Properties")}))):e.properties;var t}var Wt=function(e,t){var n,a=Object(P.getBusinessObject)(de),r=gd.get("bpmnFactory"),i=Object(P.getBusinessObject)(de),o=$t(n=Bt(de,a).parent);o||(o=w.a.createElement("camunda:Properties",{},n,r));var l={name:e,value:t},c=w.a.createElement("camunda:Property",l,o,r),s=r.create("camunda:Properties");if(s.get("values").push(c),i.extensionElements){var u=C.a.getExtensionElements(a,"camunda:Properties");if(u&&u[0]&&u[0].values)u[0].values.push(c);else!function(){var e=gd.get("bpmnFactory"),t=Object(P.getBusinessObject)(de),n=Bt(de,t),a=w.a.createElement("camunda:Properties",{},n&&n.parent,e);de.businessObject.extensionElements&&de.businessObject.extensionElements.values&&de.businessObject.extensionElements.values.push(a)}(),C.a.getExtensionElements(a,"camunda:Properties")[0].values=[c]}else i.extensionElements=r.create("bpmn:ExtensionElements"),i.extensionElements.get("values").push(s)},Jt=function(e){U("0px"!==e)},zt=r.a.useCallback((function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=e.element;if(n&&"label"===n.type){var a=gd.get("elementRegistry"),r=a.get(n.businessObject&&n.businessObject.id);n=r}var i=fu(gd,n);if(Ne(0),Re(i),pe(n),t){var o=yu(n);je(o),vt(n)}U(!0)}),[vt]),Gt=function(e){e.preventDefault(),e.returnValue="Are you sure you want to close the tab?"};return Object(a.useEffect)((function(){return window.top&&window.top.addEventListener("beforeunload",Gt),function(){window.top&&window.top.removeEventListener("beforeunload",Gt)}})),Object(a.useEffect)((function(){var e=window.top&&window.top.angular&&window.top.angular.element(window.top.document.querySelector('[ng-repeat="tab in navTabs"][class="ng-scope active"] [ng-click="closeTab(tab)"]')).scope();e&&(e.tab.$viewScope.confirmDirty=function(e,t){gd.saveXML({format:!0},function(){var n=Object(p.a)(m.a.mark((function n(a,r){var i;return m.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(i=st.current,"".concat(i)!=="".concat(r)){n.next=6;break}return n.abrupt("return",e&&e());case 6:window.top.axelor.dialogs.confirm(window.top._t("Current changes will be lost. Do you really want to proceed?"),(function(n){return n?e&&e():t&&t()}));case 7:case"end":return n.stop()}}),n)})));return function(e,t){return n.apply(this,arguments)}}())})}),[]),Object(a.useEffect)((function(){var e={container:"#bpmnview",keyboard:{bindTo:document},propertiesPanel:{parent:"#js-properties-panel"},additionalModules:[y.a,O.a,ld,M.a,{preserveElementColors:["value",{}]}],moddleExtensions:{camunda:cd}};gd=new v.a(Object(c.a)({},e));var t=ou(),n=t.id,a=t.timerTask;g(n),Y(a),ht(n)}),[ht]),Object(a.useEffect)((function(){gd&&(gd.on("commandStack.connection.create.postExecuted",(function(e){hd(e&&e.context&&e.context.connection)})),gd.on("commandStack.shape.create.postExecuted",(function(e){hd(e&&e.context&&e.context.shape)})),gd.get("eventBus").on("commandStack.shape.replace.postExecuted",(function(e){hd(e&&e.context&&e.context.newShape,!0),zt({element:e&&e.context&&e.context.newShape})})),gd.on("element.click",(function(e){zt(e)})),gd.on("shape.removed",(function(){var e=gd.get("elementRegistry"),t=gd.getDefinitions(),n=t&&t.rootElements&&t.rootElements[0];if(n){var a=e.get(n.id);a&&zt({element:a})}})))}),[zt]),Object(a.useEffect)((function(){function e(){return(e=Object(p.a)(m.a.mark((function e(){var t,n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,at({data:{_domain:"self.code = 'bpm'"}});case 2:if(t=e.sent){e.next=5;break}return e.abrupt("return");case 5:return e.next=7,nt(t.appBpm&&t.appBpm.id);case 7:n=e.sent,Xe(n&&n.enableAppBuilder);case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[]),r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{id:"container"},r.a.createElement(r.a.Suspense,{fallback:r.a.createElement(r.a.Fragment,null)},!K&&r.a.createElement(fd,null)),r.a.createElement("div",{id:"bpmncontainer"},r.a.createElement("div",{id:"propview"}),r.a.createElement("div",{id:"bpmnview"},r.a.createElement("div",{className:"toolbar-buttons"},Vt.map((function(e){return r.a.createElement("div",{key:e.name},"UploadXml"===e.name&&r.a.createElement("input",{id:"inputFile",type:"file",name:"file",onChange:Ot,style:{display:"none"}}),r.a.createElement($,{title:e.tooltipText,children:r.a.createElement("button",{onClick:e.onClick,disabled:e.disable||!1,className:"property-button"},e.icon)}))})),r.a.createElement("div",{style:{width:"calc(100% - 450px)"}},r.a.createElement("label",{className:ct.label},J("BPM model")),r.a.createElement(ei,{className:ct.select,disableClearable:!0,update:function(e){var t=e||{},n=t.diagramXml,a=t.id;i(e),g(a),yt(n,!1,a,e)},name:"wkf",value:n,optionLabel:"name",optionLabelSecondary:"description",isLabel:!1,fetchMethod:function(){return et()},disableUnderline:!1,isOptionEllipsis:!0}))),r.a.createElement(_.a,null))),r.a.createElement("div",null,r.a.createElement(D.a,{style:bd,size:{width:Ae,height:We},onResizeStop:function(e,t,n,a){Ve((function(e){return e+a.width})),Je(We+a.height),Jt(Ae+a.width)},maxWidth:window.innerWidth-150},r.a.createElement(R.a,{variant:"persistent",anchor:"right",open:G,style:{width:380},classes:{paper:ct.drawerPaper},id:"drawer"},r.a.createElement("div",{className:ct.drawerContainer},r.a.createElement(Pu,{tabs:_e,tabValue:ke,handleChange:function(e,t){Ne(t)},isMenuActionDisable:ge,comments:Ee,selectedElement:de,id:b,handleAdd:function(e){if(e){var t=e.values,n=void 0===t?[]:t;n&&n.length>0&&n&&n.forEach((function(e){var t=e.model,n=e.modelLabel,a=e.view,r=e.viewLabel,i=e.roles,o=void 0===i?[]:i,l=e.items,c=void 0===l?[]:l;if(t&&(Wt("model","metaJsonModel"===t.type?"com.axelor.meta.db.MetaJsonRecord":t.fullName||t.model),Wt("modelName",t.name),Wt("modelLabel",n),Wt("modelType",t.type)),a&&(Wt("view",a.name),Wt("viewLabel",r)),o.length>0){var s=o.map((function(e){return e.name}));Wt("roles",s.toString())}c.length>0&&c.forEach((function(e){var t=e.itemName,n=e.itemNameLabel,a=e.attributeName,r=e.attributeValue,i=e.permanent;Wt("item",t&&t.name),Wt("itemLabel",n),Wt("permanent",i||!1),a&&""!==a&&Wt(a,r)}))}))}},wkf:n,reloadView:It,onSave:Ct,openSnackbar:ce,handleMenuActionTab:function(e){ye(e)},updateCommentsCount:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];je(e?function(e){return e+1}:function(e){return e-1})},handleSnackbarClick:dt,enableAppBuilder:Ye,fetchDiagram:ht,changeColor:function(e){if(de&&e){var t=gd.get("modeling"),n={};n.stroke=e,["bpmn:SequenceFlow","bpmn:MessageFlow","bpmn:Association"].includes(de&&de.type)||(n.fill=["bpmn:Process","bpmn:Participant","bpmn:Group"].includes(de&&de.type)?"white":Me[e.toLowerCase()]),t.setColor(de,n)}},bpmnModeler:gd,showError:ot}))),r.a.createElement("div",{className:"bpmn-property-toggle",onClick:function(){Ve((function(e){return 0===e?380:0})),Jt(0===Ae?380:0)}},"Properties Panel")),r.a.createElement("div",{className:"properties-panel-parent",id:"js-properties-panel"})),ce.open&&r.a.createElement(L.a,{open:ce.open,autoHideDuration:2e3,onClose:pt},r.a.createElement(N.a,{elevation:6,variant:"filled",onClose:pt,className:"snackbarAlert",severity:ce.messageType},r.a.createElement("div",{dangerouslySetInnerHTML:{__html:ce.message}}))),x&&r.a.createElement(ud,{openAlert:x,alertClose:mt,handleAlertOk:Lt,message:ee,title:Ue}),I&&r.a.createElement(dd,{open:I,onClose:function(){return A(!1)},ids:re,onOk:function(e,t){return _t(e,t)},wkf:n})),r.a.createElement(Q,null))};function Ed(e,t,n,a,r,i,o,l){this._readOnly=!1,this._eventBus=e;var c=this;function s(e,t,n){var a=e[t];e[t]=function(){return n.call(this,a,arguments)}}function u(e,t){s(e,t,(function(e,t){if(!c._readOnly)return e.apply(this,t)}))}function m(e,t){s(e,t,(function(e,t){if(!c._readOnly)return e.apply(this,t)}))}e.on("readOnly.changed",10001,(function(e){c._readOnly=e.readOnly,e.readOnly&&(a.cancel(),t.close(),n.cancel()),o._update()})),u(t,"open"),u(n,"init"),u(a,"activate"),m(i,"moveShape"),m(i,"updateAttachment"),m(i,"moveElements"),m(i,"moveConnection"),m(i,"layoutConnection"),m(i,"createConnection"),m(i,"createShape"),m(i,"createLabel"),m(i,"appendShape"),m(i,"removeElements"),m(i,"distributeElements"),m(i,"removeShape"),m(i,"removeConnection"),m(i,"replaceShape"),m(i,"pasteElements"),m(i,"alignElements"),m(i,"resizeShape"),m(i,"createSpace"),m(i,"updateWaypoints"),m(i,"reconnectStart"),m(i,"reconnectEnd"),s(l,"getPaletteEntries",(function(e,t){var n=e.apply(this,t);if(c._readOnly){var a=["hand-tool"];fi()(n,(function(e,t){-1===a.indexOf(t)&&delete n[t]}))}return n}))}Ed.$inject=["eventBus","contextPad","dragging","directEditing","editorActions","modeling","palette","paletteProvider"],Ed.prototype.readOnly=function(e){var t=!!e,n=!!this._readOnly;return void 0===e||t===n?n:(this._readOnly=t,this._eventBus.fire("readOnly.changed",{readOnly:t}),t)};var jd={__init__:["readOnly"],readOnly:["type",Ed]},xd=null,wd={"bpmn:Task":"#cfe7f4","bpmn:UserTask":"#c5ebf3","bpmn:SendTask":"#fddeb3","bpmn:ReceiveTask":"#fde8b3","bpmn:ManualTask":"#c5e0fc","bpmn:BusinessRuleTask":"#f8cfde","bpmn:ServiceTask":"#c5ece4","bpmn:ScriptTask":"#ffeed4","bpmn:CallActivity":"#fee5bf","bpmn:SubProcess":"#E4EBF8","bpmn:SequenceFlow":"#8095B3","bpmn:StartEvent":"#ccecc6","bpmn:EndEvent":"#ffd4c7","bpmn:Gateway":"#fdecb3","bpmn:IntermediateThrowEvent":"#ffe0b3","bpmn:IntermediateCatchEvent":"#ffe0b3"},kd={"bpmn:Task":"#5EAEDA","bpmn:UserTask":"#3FBDD6","bpmn:SendTask":"#F79000","bpmn:ReceiveTask":"#F8B200","bpmn:ManualTask":"#3F97F6","bpmn:BusinessRuleTask":"#E76092","bpmn:ServiceTask":"#3EBFA5","bpmn:ScriptTask":"#FF9E0F","bpmn:CallActivity":"#FBA729","bpmn:SubProcess":"#6097fc","bpmn:SequenceFlow":"#8095B3","bpmn:StartEvent":"#55c041","bpmn:EndEvent":"#ff7043","bpmn:Gateway":"#f9c000","bpmn:IntermediateThrowEvent":"#ff9800","bpmn:IntermediateCatchEvent":"#ff9800","bpmn:Participant":"#c8c8c8","bpmn:Lane":"#c8c8c8","bpmn:Group":"#c8c8c8","bpmn:Association":"#8095B3","bpmn:TextAnnotation":"#A9B1BD"},Cd=function(){var e=Object(p.a)(m.a.mark((function e(t){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t&&Object.entries(t).forEach(function(){var e=Object(p.a)(m.a.mark((function e(t){var n,a,r,i,o,c,s,u,p,b,f,v,g,y,h,O,E,j;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=Object(l.a)(t,2),n[0],a=n[1],r=a.element,i=Object(P.getBusinessObject)(r),(o=i.$attrs["camunda:key"])&&r){e.next=6;break}return e.abrupt("return");case 6:if(z(i.$attrs&&i.$attrs["camunda:isTranslations"]||!1)){e.next=9;break}return e.abrupt("return");case 9:return e.next=11,Tt(o);case 11:if(!((c=e.sent)&&c.length>0)){e.next=31;break}return e.next=15,At();case 15:if(s=e.sent,u=s&&s["user.lang"]){e.next=19;break}return e.abrupt("return");case 19:p=c.find((function(e){return e.language===u})),b=p&&p.message,f=r&&r.type,g=i[v="bpmn:TextAnnotation"===f?"text":"bpmn:Group"===f?"categoryValue":"name"],y=i.$attrs["camunda:key"],h=b||y||g,r.businessObject[v]=h,O=xd.get("elementRegistry"),E=xd.get("modeling"),j=O.get(r.id),E&&E.updateProperties(j,Object(d.a)({},v,h));case 31:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Nd=function(){var e=Object(p.a)(m.a.mark((function e(t,n,a){var r,i,o;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t){e.next=7;break}return e.next=3,ve.fetchId("com.axelor.apps.bpm.db.WkfModel",t);case 3:r=e.sent,i=r&&r.data&&r.data[0]||{},o=i.diagramXml,Md(n,o,a);case 7:case"end":return e.stop()}}),e)})));return function(t,n,a){return e.apply(this,arguments)}}(),Sd=function(){var e=Object(p.a)(m.a.mark((function e(t,n,a){var r,i;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t){e.next=5;break}return e.next=3,ve.action({model:"com.axelor.apps.bpm.db.WkfModel",action:"action-wkf-instance-method-get-instance-xml",data:{context:{_model:"com.axelor.apps.bpm.db.WkfModel",instanceId:t}}});case 3:(r=e.sent)&&r.data&&r.data[0]&&r.data[0].values&&(i=r.data[0].values.xml,Md(n,i,a));case 5:case"end":return e.stop()}}),e)})));return function(t,n,a){return e.apply(this,arguments)}}(),Md=function(e,t,n){t&&xd.importXML(t,(function(t){if(t)return console.error("could not import BPMN 2.0 diagram",t);xd.get("canvas").zoom("fit-viewport"),xd.get("readOnly").readOnly(!0);var a=xd.get("elementRegistry"),r=a&&a._elements;if(r){Cd(r),Object.entries(r).forEach((function(e){var t=Object(l.a)(e,2),n=(t[0],t[1]);if(n){var a=n.element;if(a){var r=xd.get("modeling");if(r&&a.businessObject&&a.businessObject.di){var i=Object(P.is)(a,["bpmn:Gateway"])?"bpmn:Gateway":a.type;r.setColor(a,{stroke:a.businessObject.di.stroke||kd[i],fill:a.businessObject.di.fill||wd[i]})}}}})),Object.keys(r).filter((function(t){return e&&e.includes(t)})).forEach((function(e){var t=a.getGraphics(e),n=t&&t.querySelector(".djs-visual"),r=n&&n.childNodes&&n.childNodes[0];r&&r.style&&(r.style.strokeWidth="5px",r.style.stroke="#006400")}));var i=n&&n.split(",")||[],o=[],c=Object.keys(r)||[];if(!(c.length<1)&&!(i.length<=0)){i.forEach((function(e){var t=e.split(":");c.includes(t[0])&&o.push({id:t[0],count:t[1]})}));var s=xd.get("overlays");o.length<=0||o.forEach((function(e){s.add(e.id,"note",{position:{bottom:18,right:18},html:'<div class="diagram-note">'.concat(e.count,"</div>")})}))}}}))},Td=function(){xd.get("zoomScroll").stepZoom(1)},Pd=function(){xd.get("zoomScroll").stepZoom(-1)},Fd=function(){xd.get("canvas").zoom("fit-viewport")};var _d=function(e){var t=e.isInstance,n=Object(a.useState)(null),i=Object(l.a)(n,2),o=i[0],c=i[1],s=Object(a.useState)(null),u=Object(l.a)(s,2),d=u[0],b=u[1],f=Object(a.useState)({open:!1,messageType:null,message:null}),g=Object(l.a)(f,2),y=g[0],h=g[1],O=Object(a.useState)(null),E=Object(l.a)(O,2),j=E[0],x=E[1],w=Object(a.useState)(null),k=Object(l.a)(w,2),C=k[0],S=k[1],M=Object(a.useState)(null),T=Object(l.a)(M,2),P=T[0],F=T[1],_=[{name:"DownloadSVG",icon:r.a.createElement("i",{className:"fa fa-picture-o",style:{fontSize:18}}),tooltipText:"Download SVG",onClick:function(){xd.saveSVG({format:!0},function(){var e=Object(p.a)(m.a.mark((function e(t,n){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:W(n,"diagram.svg");case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}())},classname:"property-button"},{name:"ZoomInIcon",icon:r.a.createElement("i",{className:"fa fa-plus","aria-hidden":"true"}),tooltipText:"Zoom In",onClick:Td,classname:"zoom-buttons"},{name:"zoomOut",icon:r.a.createElement("i",{className:"fa fa-minus","aria-hidden":"true"}),tooltipText:"Zoom Out",onClick:Pd,classname:"zoom-buttons"},{name:"resetZoom",icon:r.a.createElement("i",{className:"fa fa-refresh","aria-hidden":"true"}),tooltipText:"Reset Zoom",onClick:Fd,classname:"zoom-buttons"}],R=function(e,t){h({open:!0,messageType:e,message:t})},D=function(e,t){"clickaway"!==t&&h({open:!1,messageType:null,message:null})},I=function(){var e=Object(p.a)(m.a.mark((function e(){var n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t&&o&&j&&j.includes(o.id)){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,ve.action({model:"com.axelor.apps.bpm.db.WkfModel",action:"action-wkf-instance-method-restart-instance",data:{context:{_model:"com.axelor.apps.bpm.db.WkfModel",processInstanceId:d,activityId:o&&o.id}}});case 4:(n=e.sent)&&0===n.status?(R("success","Restarted successfully"),Sd(d,C,P)):R("error",n&&n.data&&(n.data.message||n.data.title)||"Error!"),c(null);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),A=function(){var e=Object(p.a)(m.a.mark((function e(){var n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t&&o&&C&&C.includes(o.id)){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,ve.action({model:"com.axelor.apps.bpm.db.WkfModel",action:"action-wkf-instance-method-cancel-node",data:{context:{_model:"com.axelor.apps.bpm.db.WkfModel",processInstanceId:d,activityId:o&&o.id}}});case 4:(n=e.sent)&&0===n.status?(R("success","Cancelled successfully"),Sd(d,C,P)):R("error",n&&n.data&&(n.data.message||n.data.title)||"Error!"),c(null);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(a.useEffect)((function(){xd=new v.a({container:"#canvas-task",additionalModules:[jd]});var e=function(e){for(var t,n,a,r,i,o,l=/[?&]id=([^&#]*)/g,c=/[?&]taskIds=([^&#]*)/g,s=/[?&]activityCount=([^&#]*)/g,u=/[?&]instanceId=([^&#]*)/g,m=window.location.href;n=c.exec(m);){o=n[1].split(",")}for(;a=s.exec(m);)r=a[1];if(e)for(;i=u.exec(m);)return{id:i[1],taskIds:o,activityCounts:r};else for(;t=l.exec(m);)return{id:t[1],taskIds:o,activityCounts:r}}(t)||{},n=e.id,a=e.taskIds,r=e.activityCounts;if(b(n),S(a),F(r),t){var i=r&&r.split(",")||[],o=[];i&&i.forEach((function(e){var t=e.split(":");o.push(t[0])})),x(o),Sd(n,a,r)}else Nd(n,a,r)}),[t]),Object(a.useEffect)((function(){xd&&(t&&xd.on("element.click",(function(e){var t=(e||{}).element;c(t)})),xd.on("shape.changed",(function(e){var t=(e||{}).element,n=xd.get("elementRegistry");if(t&&C&&C.includes(t.id)){var a=n.getGraphics(t.id),r=a&&a.querySelector(".djs-visual"),i=r&&r.childNodes&&r.childNodes[0];i&&i.style&&(i.style.strokeWidth="5px",i.style.stroke="#006400")}})))}),[t,C]),r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{style:{display:"flex",padding:10}},_.map((function(e){return r.a.createElement("div",{key:e.name,style:{display:"flex"}},r.a.createElement($,{title:e.tooltipText,children:r.a.createElement("button",{onClick:e.onClick,className:e.classname},e.icon)}))})),t&&r.a.createElement(r.a.Fragment,null,r.a.createElement($,{title:"Restart",children:r.a.createElement("button",{onClick:I,className:"restart-button"},J("Restart"))}),o&&C&&C.includes(o.id)&&r.a.createElement($,{title:"Cancel Node",children:r.a.createElement("button",{onClick:A,className:"restart-button"},J("Cancel Node"))}))),r.a.createElement("div",{id:"canvas-task"}),y.open&&r.a.createElement(L.a,{open:y.open,autoHideDuration:2e3,onClose:D},r.a.createElement(N.a,{elevation:6,variant:"filled",onClose:D,className:"snackbarAlert",severity:y.messageType},y.message)),r.a.createElement(Q,null))},Rd=n(421),Ld=n(425),Dd=n(424),Id=n(426),Ad=n(427),Vd=n(239),Bd=n(55),$d=n(94),Wd=n(241),Jd=n(45),zd=function(e,t){return"ws/rest/".concat(e,"/").concat(t)},Gd=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(ue.a)(this,e),this.model=t.model}return Object(me.a)(e,[{key:"search",value:function(e){var t=e.fields,n=e.sortBy,a=e.data,r=e.limit,i=e.offset,o=zd(this.model,"search");return ve.post(o,{fields:t,sortBy:n,data:a,limit:r,offset:i})}},{key:"fetch",value:function(e,t){var n="".concat(e,"/fetch"),a=zd(this.model,n);return ve.post(a,t)}},{key:"view",value:function(e){return ve.post("/ws/meta/view",e)}},{key:"fields",value:function(e){return ve.post("/ws/meta/view/fields",e)}},{key:"save",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=zd(this.model,"");return ve.post(n,Object(c.a)({},t?e:{data:e}))}},{key:"removeAll",value:function(e){var t=zd(this.model,"removeAll");return ve.post(t,{records:e})}},{key:"action",value:function(e,t){var n="/ws/action/".concat(e);return ve.post(n,Object(c.a)(Object(c.a)({},t),{},{model:this.model}))}}]),e}();new Gd({model:"com.axelor.meta.db.MetaModel"}),new Gd({model:"com.axelor.meta.db.MetaField"});function Ud(e){return Hd.apply(this,arguments)}function Hd(){return(Hd=Object(p.a)(m.a.mark((function e(t){var n,a;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=new Gd({model:t}),e.next=3,n.search({});case 3:if(!(a=e.sent)||-1!==a.status){e.next=6;break}return e.abrupt("return",[]);case 6:return e.abrupt("return",a&&a.data);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function qd(e){return Kd.apply(this,arguments)}function Kd(){return(Kd=Object(p.a)(m.a.mark((function e(t){var n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ve.search("com.axelor.meta.db.MetaJsonRecord",{data:{criteria:[{fieldName:"jsonModel",operator:"=",value:t}],operator:"and"}});case 2:if(!(n=e.sent)||-1!==n.status){e.next=5;break}return e.abrupt("return",[]);case 5:return e.abrupt("return",n&&n.data);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Yd(e){return Xd.apply(this,arguments)}function Xd(){return(Xd=Object(p.a)(m.a.mark((function e(t){var n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ve.search("com.axelor.meta.db.MetaJsonField",{data:{criteria:[{fieldName:"jsonModel",operator:"=",value:t},{fieldName:"nameField",operator:"=",value:!0}],operator:"and"},fields:["name"]});case 2:if(!((n=e.sent)&&n.status>-1)){e.next=5;break}return e.abrupt("return",n.data&&n.data[0]);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Zd=Object(F.a)((function(){return{input:{border:"1px solid #ccc",margin:"8px 0px",padding:"0px 5px",background:"white"},label:{fontWeight:"bolder",display:"inline-block",verticalAlign:"middle",color:"#666",marginBottom:3}}})),Qd=function(e,t){if(e)return"date"===t?br()(br()(e).format("YYYY-MM-DD")).format("YYYY-MM-DDTHH:MM:SS"):br()(e).format("YYYY-MM-DDTHH:MM:SS")};function ep(e){var t,n=e.type,i=e.updateDRDCell,o=e.ruleValue,c=e.rule,s=e.defaultType,u=e.comparisonOperator,d=e.rangeStartValue,b=e.rangeEndValue,f=e.rangeEndType,v=e.rangeStartType,g=e.setValueType,y=e.metaField,h=e.element,O=e.value,E=e.isOutput,j=e.relationalField,x=e.valueFrom,w=Zd(),k=j||y||{},C=k.targetName,N=k.target,S=k.fullName,M=k.name,T=k.targetModel,P=k.model,F=k.jsonTarget,_=Object(a.useState)(null),R=Object(l.a)(_,2),L=R[0],D=R[1],I=Object(a.useState)(null),A=Object(l.a)(I,2),V=A[0],B=A[1],$=function(){var e=Object(p.a)(m.a.mark((function e(){var t,n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("com.axelor.meta.db.MetaJsonRecord"!==P||!F){e.next=10;break}return e.next=3,qd(F);case 3:return t=e.sent,e.next=6,Yd(F);case 6:n=e.sent,B(n&&n.name),e.next=13;break;case 10:return e.next=12,Ud(N||T);case 12:t=e.sent;case 13:return e.abrupt("return",t);case 14:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();if("string"!==n||E){if("boolean"===n){var W=Object(Wd.a)(o&&o.text);g("defaultTypeValue",$e.find((function(e){return e.id===W})))}else if(["date","datetime","time"].includes(n)){var z=Object(Jd.c)(o&&o.text)||{},G=z.type,U=void 0===G?"exact":G,H=z.date,q=z.dates;o&&o.text&&""!==o.text&&g("defaultTypeValue",Ge.find((function(e){return e.id===U}))),t="between"===U?q:H?H?[H,null]:H||[null,null]:[null,null]}else if(["long","integer","double","decimal"].includes(n)&&!E){var K=Object(Bd.c)(o&&o.text)||{},Y=K.type,X=void 0===Y?s:Y,Z=K.operator,Q=K.start,ee=K.end;g("defaultTypeValue",We.find((function(e){return e.id===X}))),"comparison"===X?g("comparisonOperator",Je.find((function(e){return e.id===Z}))):"range"===X&&(g("rangeStartType",ze.find((function(e){return e.id===Q}))),g("rangeEndType",ze.find((function(e){return e.id===ee}))))}else if("selection"===n){var te=(y||{}).selectionList,ne=o&&o.text;g("defaultTypeValue",te&&te.find((function(e){return e.value===ne})))}else if(Ue.includes(n)&&!E){var ae=(Object($d.b)(o&&o.text)||{}).type;g("defaultTypeValue",Be.find((function(e){return e.id===ae})))}}else{var re=(Object($d.b)(o&&o.text)||{}).type;g("defaultTypeValue",Be.find((function(e){return e.id===re})))}switch(Object(a.useEffect)((function(){var e=y||{},t=e.name,n=e.type;Ue.includes(n&&n.toLowerCase())?D(null):D(t)}),[y]),n){case"string":return r.a.createElement(r.a.Fragment,null,"model"===x&&E?r.a.createElement(r.a.Fragment,null,r.a.createElement("label",{className:w.label},J("Select Value")),r.a.createElement(ei,{update:function(e){var t=e&&e.name,n=(t=t&&t.replace(/['"]+/g,""))&&!/^"[^"]*"$/.test("".concat(t.trim()))?'"'.concat(t,'"'):t;(n||"").replace(/[\u200B-\u200D\uFEFF]/g,""),i(o,c,n),g("setValue",n)},value:O,fetchMethod:function(){return function(e,t){return Zt.apply(this,arguments)}(S||M)},isLabel:!1})):r.a.createElement(r.a.Fragment,null,r.a.createElement("label",{className:w.label},J("Edit String")),!E&&r.a.createElement(ei,{update:function(e){var t=(Object($d.b)(o&&o.text)||{}).values,n=void 0===t?[]:t;if(e&&"disjunction"===e.id)i(o,c,n&&n.join(","));else{if(!n.join(","))return;i(o,c,"not(".concat(n.join(","),")"))}},value:s||{name:"Match one",id:"disjunction"},options:Be,isLabel:!1}),r.a.createElement(an,{element:h,entry:{id:"value",label:J("Value"),modelProperty:"value",get:function(){return{value:O}},set:function(e,t){var n=t.value,a=(n=n&&n.replace(/['"]+/g,""))&&n.replace(/['"]+/g,"").split(","),r=!1;a.length>1&&(n=a.map((function(e){return'"'.concat(e,'"')})).join(","),r=!0);var l=!n||/^"[^"]*"$/.test("".concat(n.trim()))||r?n:'"'.concat(n,'"');(l||"").replace(/[\u200B-\u200D\uFEFF]/g,""),i(o,c,l),g("setValue",l)}},canRemove:!0}),r.a.createElement(oe,{desciption:"Strings must be in double quotes. Add multiple strings with comma."})));case"boolean":return r.a.createElement(r.a.Fragment,null,r.a.createElement("label",{className:w.label},J("Value")),r.a.createElement(ei,{update:function(e){i(o,c,e&&e.id||"")},value:s,options:$e,isLabel:!1}));case"date":case"datetime":case"time":return E?r.a.createElement(ca,{type:n,disableUnderline:!0,className:w.input,value:t&&t[0]?br()(t[0]):null,onChange:function(e){i(o,c,e?Object(Jd.a)("exact",[Qd(e,n)]):"")}}):r.a.createElement(r.a.Fragment,null,r.a.createElement("label",{className:w.label},J("Edit Date")),r.a.createElement(ei,{update:function(e){g("defaultTypeValue",e);var a=e&&"between"===e.id?[t[0],Qd(br()(t[0]).add(1,"days"),n)]:t;e&&Object(Jd.c)(Object(Jd.a)(e&&e.id,a))&&i(o,c,Object(Jd.a)(e&&e.id,a))},value:s,options:Ge,isLabel:!1}),s&&"between"===s.id?r.a.createElement(r.a.Fragment,null,r.a.createElement("label",{className:w.label},J("Value")),r.a.createElement(ca,{disableUnderline:!0,className:w.input,type:n,value:t&&t[0]?br()(t[0]):null,onChange:function(e){i(o,c,e&&s?Object(Jd.a)(s&&s.id,[Qd(e,n),Qd(t&&t[1]||br()(e).add(1,"days"),n)]):"")}}),r.a.createElement(ca,{disableUnderline:!0,className:w.input,type:n,value:t&&t[1]?br()(t[1]):null,onChange:function(e){i(o,c,e&&s?Object(Jd.a)(s&&s.id,[t&&t[0]||null,Qd(e,n)]):"")}})):s&&r.a.createElement(r.a.Fragment,null,r.a.createElement("label",{className:w.label},J("Value")),r.a.createElement(ca,{disableUnderline:!0,className:w.input,type:n,value:t&&t[0]?br()(t[0]):null,onChange:function(e){i(o,c,e&&s?Object(Jd.a)(s&&s.id,[Qd(e,n)]):"")}})));case"double":case"integer":case"long":case"decimal":var ie=Object(Bd.c)(o&&o.text)||{},le=ie.value,ce=ie.values;return E?r.a.createElement(r.a.Fragment,null,r.a.createElement("label",{className:w.label},J("Value")),r.a.createElement(Wn,{value:Number(le),type:n,className:w.input,scale:99,disableUnderline:!0,onChange:function(e){i(o,c,"".concat(e))}})):r.a.createElement(r.a.Fragment,null,r.a.createElement("label",{className:w.label},J("Edit Number")),r.a.createElement(ei,{update:function(e){g("defaultTypeValue",e),e&&("comparison"===e.id?i(o,c,Object(Bd.a)(u&&u.id||"exact",le||0)):i(o,c,Object(Bd.b)(d,b,v&&v.id,f&&f.id)))},value:s,options:We,isLabel:!1}),s&&"comparison"===s.id?r.a.createElement(r.a.Fragment,null,r.a.createElement(ei,{update:function(e){g("comparisonOperator",e||{name:"Equals",id:"equals"}),i(o,c,Object(Bd.a)(e&&(e.id||"equals"),le||0))},value:u||{name:"Equals",id:"equals"},options:Je,isLabel:!1}),r.a.createElement("label",{className:w.label},J(" Value")),r.a.createElement(Wn,{value:le,type:n,className:w.input,disableUnderline:!0,scale:99,onChange:function(e){i(o,c,Object(Bd.a)(u&&u.id||"equals",e))}})):r.a.createElement(r.a.Fragment,null,r.a.createElement("label",{className:w.label},J("Start Value")),r.a.createElement(ei,{update:function(e){g("rangeStartType",e),i(o,c,Object(Bd.b)(d,b,e&&e.id,f&&f.id))},value:v,options:ze,isLabel:!1}),r.a.createElement("label",{className:w.label},J(" Value")),r.a.createElement(Wn,{value:ce&&ce[0],type:n,scale:99,className:w.input,disableUnderline:!0,onChange:function(e){i(o,c,Object(Bd.b)(e,b,v&&v.id,f&&f.id))}}),r.a.createElement("label",{className:w.label},J("End Value")),r.a.createElement(ei,{update:function(e){g("rangeEndType",e),i(o,c,Object(Bd.b)(d,b,v&&v.id,e&&e.id))},value:f,options:ze,isLabel:!1}),r.a.createElement("label",{className:w.label},J(" Value")),r.a.createElement(Wn,{className:w.input,value:ce&&ce[1],type:n,disableUnderline:!0,onChange:function(e){i(o,c,Object(Bd.b)(d,e,v&&v.id,f&&f.id))}})));case"selection":return r.a.createElement(r.a.Fragment,null,r.a.createElement("label",{className:w.label},J("Select Value")),r.a.createElement(ei,{update:function(e){i(o,c,e&&e.value)},value:s,options:y.selectionList,isLabel:!1}));case"one_to_one":case"many_to_one":case"many_to_many":case"one_to_many":case"json_one_to_one":case"json_many_to_one":case"json_many_to_many":case"json_one_to_many":case"one-to-one":case"many-to-one":case"many-to-many":case"one-to-many":case"json-one-to-one":case"json-many-to-one":case"json-many-to-many":case"json-one-to-many":var se=(Object($d.b)(o&&o.text)||{}).values;return r.a.createElement(r.a.Fragment,null,!E&&r.a.createElement(r.a.Fragment,null,r.a.createElement("label",{className:w.label},J("Edit String")),r.a.createElement(ei,{update:function(e){var t=(Object($d.b)(o&&o.text)||{}).values;e&&"disjunction"===e.id?i(o,c,t&&t.join(",")):i(o,c,"not(".concat(t&&t.join(","),")"))},value:s,options:Be,isLabel:!1})),r.a.createElement("label",{className:w.label},J("Select Value")),r.a.createElement(ei,{className:w.select,multiple:!0,fetchMethod:function(){return $()},update:function(e){var t,n=[];e&&e.forEach((function(e){if("string"!==typeof e)return t=e&&e.length>0?e.find((function(e){return e&&e[L||V||C||"name"]})):e[L||V||C||"name"],void n.push('"'.concat(t,'"'));n.push(e)})),i(o,c,n&&n.toString())},name:"value",value:se||[],isLabel:!1,optionLabel:L||V||C||"name",optionLabelSecondary:"title"}));default:return r.a.createElement(r.a.Fragment,null,r.a.createElement("label",{className:w.label},J("Edit String")),!E&&r.a.createElement(ei,{update:function(e){var t=(Object($d.b)(o&&o.text)||{}).values,n=void 0===t?[]:t;e&&"disjunction"===e.id?i(o,c,n&&n.join(",")):i(o,c,"not(".concat(n.join(","),")"))},value:s,options:Be,isLabel:!1}),r.a.createElement(an,{element:h,entry:{id:"value",label:J("Value"),modelProperty:"value",get:function(){return{value:O}},set:function(e,t){var n=t.value,a=(n=n&&n.replace(/['"]+/g,""))&&n.replace(/['"]+/g,"").split(","),r=!1;a.length>1&&(n=a.map((function(e){return'"'.concat(e,'"')})).join(","),r=!0);var l=!n||/^"[^"]*"$/.test("".concat(n.trim()))||r?n:'"'.concat(n,'"');(l||"").replace(/[\u200B-\u200D\uFEFF]/g,""),i(o,c,l),g("setValue",l)}},canRemove:!0}),r.a.createElement(oe,{desciption:"Strings must be in double quotes. Add multiple strings with comma."}))}}function tp(e){var t=e.element,n=e.dmnModeler,i=e.rule,o=e.ruleFieldType,c=e.ruleIndex,s=e.entity,u=e.isOutput,m=void 0!==u&&u,d=Object(a.useState)(null),p=Object(l.a)(d,2),b=p[0],f=p[1],v=Object(a.useState)("context"),g=Object(l.a)(v,2),y=g[0],h=g[1],O=Object(a.useState)(""),E=Object(l.a)(O,2),j=E[0],x=E[1],w=Object(a.useState)(""),k=Object(l.a)(w,2),C=k[0],N=k[1],S=Object(a.useState)(null),M=Object(l.a)(S,2),T=M[0],P=M[1],F=Object(a.useState)(null),_=Object(l.a)(F,2),R=_[0],L=_[1],D=Object(a.useState)({name:"Equals",id:"equals"}),I=Object(l.a)(D,2),A=I[0],V=I[1],B=Object(a.useState)(0),$=Object(l.a)(B,2),W=$[0],J=$[1],z=Object(a.useState)(0),G=Object(l.a)(z,2),U=G[0],H=G[1],q=Object(a.useState)({name:"Include",id:"include"}),K=Object(l.a)(q,2),Y=K[0],X=K[1],Z=Object(a.useState)({name:"Include",id:"include"}),Q=Object(l.a)(Z,2),ee=Q[0],te=Q[1];return Object(a.useEffect)((function(){var e=m?s:s&&s.inputExpression,t=e&&e.$attrs&&e.$attrs["camunda:textMetaField"],n=e&&e.$attrs&&e.$attrs["camunda:relationalField"],a=e&&e.$attrs&&e.$attrs["camunda:valueFrom"],r=t?JSON.parse(t):void 0,i=n?JSON.parse(n):void 0;P(r),L(i);var o=r?r.selection?"selection":i&&i.type?i.type.toLowerCase():r.type&&r.type.toLowerCase():e&&e.typeRef;o=qe.includes(o)?o:"string",f(o),h(a)}),[s,m,n]),Object(a.useEffect)((function(){x(i&&i[o]&&i[o][c]&&i[o][c].text)}),[i,o,c]),r.a.createElement(r.a.Fragment,null,b&&r.a.createElement(ep,{type:b,updateDRDCell:function(e,t,a){var r=n.getActiveViewer(),i=r.get("modeling"),o=r.get("sheet").getRoot().rows;if(o){var l=o.findIndex((function(e){return e.id===t.id})),c=o[l];if(c){var s=c.cells&&c.cells.findIndex((function(t){return t.id===e.id})),u=o[l].cells[s];if(i.editCell(u.businessObject,a),["long","integer","double","decimal"].includes(b)){var m=Object(Bd.c)(u.businessObject&&u.businessObject.text)||{},d=m.values,p=m.start,f=m.end;return d&&(J(d[0]),H(d[1])),p&&X(ze.find((function(e){return e.id===p}))),void(f&&te(ze.find((function(e){return e.id===f}))))}x(a)}}},rule:i,ruleValue:i[o][c],defaultType:C,setValueType:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";switch(e){case"comparisonOperator":return void V(t);case"rangeStartValue":return void J(t);case"rangeEndValue":return void H(t);case"defaultTypeValue":return void N(t);case"rangeStartType":return void X(t);case"rangeEndType":return void te(t);case"setValue":return void x(t);default:return}},comparisonOperator:A,rangeStartValue:W,rangeEndValue:U,rangeEndType:ee,rangeStartType:Y,metaField:T,isOutput:m,element:t,value:j,relationalField:R,valueFrom:y}))}var np=Object(F.a)((function(e){return{expressionBuilder:{display:"flex",alignItems:"flex-end",justifyContent:"space-between"},newIcon:{color:"#58B423",marginLeft:5},new:{cursor:"pointer",display:"flex"},dialog:{minWidth:300},dialogContent:{display:"flex",alignItems:"flex-end"},save:{margin:e.spacing(1),backgroundColor:"#0275d8",borderColor:"#0267bf",textTransform:"none",color:"white","&:hover":{backgroundColor:"#025aa5",borderColor:"#014682",color:"white"}}}}));function ap(e){var t=e.element,n=e.input,i=e.dmnModeler,o=e.getData,c=e.getModel,u=np(),b=Object(a.useState)(null),f=Object(l.a)(b,2),v=f[0],g=f[1],y=Object(a.useState)(!1),h=Object(l.a)(y,2),O=h[0],E=h[1],j=Object(a.useState)(!1),x=Object(l.a)(j,2),w=x[0],k=x[1],C=Object(a.useState)(null),N=Object(l.a)(C,2),S=N[0],M=N[1],T=Object(a.useState)(!1),P=Object(l.a)(T,2),F=P[0],_=P[1],R=Object(a.useState)(null),L=Object(l.a)(R,2),D=L[0],A=L[1],V=Object(a.useState)([]),B=Object(l.a)(V,2),$=B[0],W=B[1],z=function(){E(!1)},G=function(e,t,n){i.getActiveViewer().get("modeling").updateProperties(n,Object(d.a)({},e,t))},U=function(){var e=Object(p.a)(m.a.mark((function e(){var t,n,a,r,i,o,l,s,u;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!v||!v.inputExpression){e.next=26;break}if(t=Y(c()),n=w&&t&&""!==w?"".concat(t,".").concat(w):v.inputExpression.text?v.inputExpression.text:void 0,G("text",n,v.inputExpression),G("camunda:textMetaField",JSON.stringify(S||{}),v.inputExpression),G("camunda:allFields",JSON.stringify($||{}),v.inputExpression),S&&"BOOLEAN"!==S.type?G("camunda:relationalField",JSON.stringify(D||{}),v.inputExpression):G("camunda:relationalField",void 0,v.inputExpression),_(!!S),a=S&&S.type&&S.type.toLowerCase(),!He.includes(a)){e.next=13;break}G("typeRef",a,v.inputExpression),e.next=26;break;case 13:if(!Ue.includes(a)){e.next=25;break}if(G("typeRef","string",v.inputExpression),i=(r=S||{}).targetName,o=r.model,l=r.jsonTarget,s=i,"com.axelor.meta.db.MetaJsonRecord"!==o||!l){e.next=22;break}return e.next=20,Yd(l);case 20:u=e.sent,s=u&&u.name?u.name:i;case 22:G("text",n&&s?"".concat(n,".").concat(s):n,v.inputExpression),e.next=26;break;case 25:["date","datetime","time"].includes(a)?G("typeRef","date",v.inputExpression):G("typeRef","decimal"===a?"double":"string",v.inputExpression);case 26:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(a.useEffect)((function(){g(n);var e=((n||{}).inputExpression||{}).$attrs;_(!(!e||!e["camunda:textMetaField"])),W(e&&e["camunda:allFields"]?JSON.parse(e["camunda:allFields"]):[]),A(e&&e["camunda:relationalField"]?JSON.parse(e["camunda:relationalField"]):void 0),M(e&&e["camunda:textMetaField"]?JSON.parse(e["camunda:textMetaField"]):void 0)}),[n]),r.a.createElement(r.a.Fragment,null,r.a.createElement(an,{element:t,entry:{id:"label",label:J("Label"),modelProperty:"label",get:function(){return{label:v&&v.label}},set:function(e,t){var n=t.label;G("label",n,v)}},canRemove:!0}),r.a.createElement("div",{className:u.expressionBuilder},r.a.createElement(an,{element:t,entry:{id:"expression",label:J("Expression"),modelProperty:"expression",get:function(){return{expression:v&&v.inputExpression&&v.inputExpression.text}},set:function(e,t){var n=t.expression;(n||"").replace(/[\u200B-\u200D\uFEFF]/g,""),n||(G("camunda:textMetaField",void 0,v.inputExpression),G("camunda:relationalField",void 0,v.inputExpression),G("camunda:allFields",void 0,v.inputExpression),_(!1)),G("text",n,v.inputExpression)}},canRemove:!0}),r.a.createElement("div",{className:u.new},r.a.createElement(qa.a,{className:u.newIcon,onClick:function(){E(!0)}}),O&&r.a.createElement(I.a,{open:O,onClose:function(e,t){"backdropClick"!==t&&z()},"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",classes:{paper:u.dialog}},r.a.createElement(za.a,{id:"alert-dialog-title"},"Expression"),r.a.createElement(Ga.a,{className:u.dialogContent},r.a.createElement(wa,{getMetaFields:function(){return dt(o())},allowAllFields:!0,excludeUITypes:!0,onChange:function(e,t,n){k(e),M(t);var a=e&&e.split("."),r=[].concat(Object(s.a)($||[]),[t]),i=r&&a&&r.filter((function(e){return a.includes(e&&e.name)})),o=i&&n&&i.find((function(e){return(e&&e.name)===n.name}));A(o?n:null),W(i)},value:{fieldName:function(){if(v){var e=((v||{}).inputExpression||{}).text,t=e&&e.split("."),n=t&&t.length>0?t.slice(1).join("."):e;return w||n||""}}(),allFields:$},isParent:!0})),r.a.createElement(Ua.a,null,r.a.createElement(In.a,{onClick:function(){U(),z()},color:"primary",autoFocus:!0,className:u.save},"OK"),r.a.createElement(In.a,{onClick:function(){z(),k(null)},color:"primary",autoFocus:!0,className:u.save},"Cancel"))))),r.a.createElement(on,{element:t,entry:{id:"expressionLanguage",label:"Expression Language",modelProperty:"expressionLanguage",selectOptions:Ae,get:function(){return{expressionLanguage:v&&v.inputExpression&&v.inputExpression.expressionLanguage}},set:function(e,t){var n=t.expressionLanguage;v&&v.inputExpression&&G("expressionLanguage",n,v.inputExpression)}}}),r.a.createElement(an,{element:t,entry:{id:"inputVariable",label:J("Input Variable"),modelProperty:"inputVariable",get:function(){return{inputVariable:v&&v.inputVariable}},set:function(e,t){var n=t.inputVariable;G("inputVariable",n,v)}},canRemove:!0}),r.a.createElement(on,{element:t,entry:{id:"typeRef",label:J("Type"),modelProperty:"typeRef",selectOptions:Ve,disabled:F,get:function(){return{typeRef:v&&v.inputExpression&&v.inputExpression.typeRef}},set:function(e,t){var n=t.typeRef;v&&v.inputExpression&&G("typeRef",n,v.inputExpression)}}}),r.a.createElement(an,{element:t,entry:{id:"defaultValue",label:J("Default value"),modelProperty:"defaultValue",get:function(){return{defaultValue:v&&v.$attrs&&v.$attrs["camunda:defaultValue"]}},set:function(e,t){var n=t.defaultValue;G("camunda:defaultValue",n,v)}},canRemove:!0}))}var rp=Object(F.a)((function(e){return{expressionBuilder:{display:"flex",alignItems:"flex-end",justifyContent:"space-between"},newIcon:{color:"#58B423",marginLeft:5},new:{cursor:"pointer",display:"flex"},dialog:{minWidth:300},dialogContent:{display:"flex",alignItems:"flex-end",flexDirection:"column"},save:{margin:e.spacing(1),backgroundColor:"#0275d8",borderColor:"#0267bf",textTransform:"none",color:"white","&:hover":{backgroundColor:"#025aa5",borderColor:"#014682",color:"white"}},radio:{padding:"1px 9px",color:"#0275d8","&.MuiRadio-colorSecondary.Mui-checked":{color:"#0275d8"}},group:{display:"flex",flexDirection:"row"},MuiAutocompleteRoot:{width:"250px",marginRight:"10px"},grid:{flexDirection:"row",alignItems:"flex-end",overflow:"auto",width:"100%",display:"flex"}}}));function ip(e){var t=e.element,n=e.output,i=e.dmnModeler,o=e.getData,c=e.getModel,u=Object(a.useState)(null),b=Object(l.a)(u,2),f=b[0],v=b[1],g=Object(a.useState)(!1),y=Object(l.a)(g,2),h=y[0],O=y[1],E=Object(a.useState)(null),j=Object(l.a)(E,2),x=j[0],w=j[1],k=Object(a.useState)(null),C=Object(l.a)(k,2),N=C[0],S=C[1],M=Object(a.useState)(!1),T=Object(l.a)(M,2),P=T[0],F=T[1],_=Object(a.useState)(null),R=Object(l.a)(_,2),L=R[0],D=R[1],V=Object(a.useState)([]),B=Object(l.a)(V,2),$=B[0],W=B[1],z=Object(a.useState)("context"),G=Object(l.a)(z,2),U=G[0],H=G[1],q=Object(a.useState)(null),K=Object(l.a)(q,2),X=K[0],Z=K[1],Q=rp(),ee=function(e,t,n){i.getActiveViewer().get("modeling").updateProperties(n,Object(d.a)({},e,t))},te=function(){var e=Object(p.a)(m.a.mark((function e(){var t,n,a,r,i,o,l,s,u;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!f){e.next=31;break}if(ee("camunda:valueFrom",U,f),"context"!==U){e.next=30;break}if(t=Y(c()),n=x&&t&&""!==x?"".concat(t,".").concat(x):f.$attrs&&f.$attrs["camunda:text"]?f.$attrs["camunda:text"]:void 0,ee("camunda:text",n,f),ee("camunda:textMetaField",JSON.stringify(N||{}),f),ee("camunda:allFields",JSON.stringify($||{}),f),N&&"BOOLEAN"!==N.type?ee("camunda:relationalField",JSON.stringify(L||{}),f):ee("camunda:relationalField",void 0,f),F(!!N),a=N&&N.type&&N.type.toLowerCase(),!He.includes(a)){e.next=15;break}ee("typeRef",N.type.toLowerCase(),f),e.next=28;break;case 15:if(!Ue.includes(a)){e.next=27;break}if(ee("typeRef","string",f),i=(r=N||{}).targetName,o=r.model,l=r.jsonTarget,s=i,"com.axelor.meta.db.MetaJsonRecord"!==o||!l){e.next=24;break}return e.next=22,Yd(l);case 22:u=e.sent,s=u&&u.name?u.name:i;case 24:ee("camunda:text",n&&s?"".concat(n,".").concat(s):n,f),e.next=28;break;case 27:["date","datetime","time"].includes(a)?ee("typeRef","date",f):ee("typeRef","decimal"===a?"double":"string",f);case 28:e.next=31;break;case 30:"model"===U&&(ee("camunda:text",x,f),ee("typeRef","string",f),ee("camunda:textMetaField",JSON.stringify(X||{}),f),ee("camunda:allFields",void 0,f),ee("camunda:relationalField",void 0,f));case 31:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(a.useEffect)((function(){v(n);var e=(n||{}).$attrs;F(!(!e||!e["camunda:textMetaField"]));var t=e&&e["camunda:valueFrom"];H(t||"context"),"model"===t?Z(e&&e["camunda:textMetaField"]?JSON.parse(e["camunda:textMetaField"]):void 0):(W(e&&e["camunda:allFields"]?JSON.parse(e["camunda:allFields"]):[]),D(e&&e["camunda:relationalField"]?JSON.parse(e["camunda:relationalField"]):void 0),S(e&&e["camunda:textMetaField"]?JSON.parse(e["camunda:textMetaField"]):void 0))}),[n]),r.a.createElement(r.a.Fragment,null,r.a.createElement(an,{element:t,entry:{id:"label",label:J("Label"),modelProperty:"label",get:function(){return{label:f&&f.label}},set:function(e,t){var n=t.label;ee("label",n,f)}},canRemove:!0}),r.a.createElement("div",{className:Q.expressionBuilder},r.a.createElement(an,{element:t,entry:{id:"expression",label:J("Expression"),modelProperty:"expression",get:function(){return{expression:f&&f.$attrs&&f.$attrs["camunda:text"]}},set:function(e,t){var n=t.expression;(n||"").replace(/[\u200B-\u200D\uFEFF]/g,""),n||(ee("camunda:textMetaField",void 0,f),ee("camunda:relationalField",void 0,f),ee("camunda:allFields",void 0,f),ee("camunda:valueFrom",void 0,f),F(!1),Z(null)),ee("camunda:text",n&&""!==n?n:void 0,f)}},canRemove:!0}),r.a.createElement("div",{className:Q.new},r.a.createElement(qa.a,{className:Q.newIcon,onClick:function(){return O(!0)}}),h&&r.a.createElement(I.a,{open:h,onClose:function(e,t){"backdropClick"!==t&&O(!1)},"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",classes:{paper:Q.dialog}},r.a.createElement(za.a,{id:"alert-dialog-title"},"Expression"),r.a.createElement(Ga.a,{className:Q.dialogContent},r.a.createElement(A.a,null,r.a.createElement(fr.a,{"aria-label":"radioType",name:"radioType",value:U||"context",className:Q.group,onChange:function(e){H(e.target.value)}},r.a.createElement(Qa.a,{value:"context",control:r.a.createElement(vr.a,{className:Q.radio,size:"small"}),label:"Context"}),r.a.createElement(Qa.a,{value:"model",control:r.a.createElement(vr.a,{className:Q.radio,size:"small"}),label:"Model"}))),r.a.createElement(A.a,{className:Q.grid},"model"===U?r.a.createElement(ja,{name:"model",title:"Model",placeholder:"model",fetchAPI:function(){return wt()},optionLabelKey:"name",onChange:function(e){Z(e),w(e&&e.name)},value:X,classes:{root:Q.MuiAutocompleteRoot}}):r.a.createElement(wa,{getMetaFields:function(){return dt(o())},allowAllFields:!0,excludeUITypes:!0,onChange:function(e,t,n){w(e),S(t);var a=e&&e.split("."),r=[].concat(Object(s.a)($||[]),[t]),i=r&&a&&r.filter((function(e){return a.includes(e&&e.name)})),o=i&&n&&i.find((function(e){return(e&&e.name)===n.name}));D(o?n:null),W(i)},value:{fieldName:function(){if(f){var e=f&&f.$attrs&&f.$attrs["camunda:text"],t=e&&e.split("."),n=t&&t.length>0?t.slice(1).join("."):e;return x||n||""}}(),allFields:$},isParent:!0}))),r.a.createElement(Ua.a,null,r.a.createElement(In.a,{onClick:function(){te(),O(!1),ee("name","model"===U?void 0:N&&N.name,f)},color:"primary",autoFocus:!0,className:Q.save},"OK"),r.a.createElement(In.a,{onClick:function(){O(!1),w(null)},color:"primary",autoFocus:!0,className:Q.save},"Cancel"))))),r.a.createElement(an,{element:t,entry:{id:"name",label:J("Output Name"),modelProperty:"name",get:function(){return{name:f&&f.name}},set:function(e,t){var n=t.name;ee("name",n,f)}},canRemove:!0}),r.a.createElement(on,{element:t,entry:{id:"typeRef",label:J("Type"),modelProperty:"typeRef",selectOptions:Ve,disabled:P,get:function(){return{typeRef:f&&f.typeRef}},set:function(e,t){var n=t.typeRef;f&&ee("typeRef",n,f)}}}),r.a.createElement(an,{element:t,entry:{id:"defaultValue",label:J("Default value"),modelProperty:"defaultValue",get:function(){return{defaultValue:f&&f.$attrs&&f.$attrs["camunda:defaultValue"]}},set:function(e,t){var n=t.defaultValue;ee("camunda:defaultValue",n,f)}},canRemove:!0}))}var op=n(66),lp=n(73),cp=n(72),sp=n(5),up=n(863),mp=n(85);function dp(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function pp(e,t){return!t||"object"!==(n=t,"function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?typeof n:n&&"function"===typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n)&&"function"!==typeof t?bp(e):t;var n}function bp(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function fp(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");var n,a;e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&(n=e,a=t,Object.setPrototypeOf(n,a)||(n.__proto__=a))}function vp(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var gp=function(e){function t(e,n){var a,r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),vp(bp(a=pp(this,(r=t,r.__proto__||Object.getPrototypeOf(r)).call(this,e,n))),"onClick",(function(e){var t=a.props.output;a._eventBus.fire("output.edit",{event:e,output:t})})),vp(bp(a),"onContextmenu",(function(e){var t=a.props.output.id;a._eventBus.fire("cell.contextmenu",{event:e,id:t})})),vp(bp(a),"onElementsChanged",(function(){a.forceUpdate()})),Object(up.a)(bp(a),mp.a),a._translate=n.injector.get("translate"),a}var n,a,r;return fp(t,e),n=t,(a=[{key:"componentWillMount",value:function(){var e=this.context.injector;this._changeSupport=this.context.changeSupport,this._eventBus=e.get("eventBus"),this._elementRegistry=e.get("elementRegistry");var t=this.props.output;this._changeSupport.onElementsChanged(t.id,this.onElementsChanged)}},{key:"componentWillUnmount",value:function(){var e=this.props.output;this._changeSupport.offElementsChanged(e.id,this.onElementsChanged)}},{key:"render",value:function(){var e=this.props,t=e.output,n=e.index,a=e.outputsLength,r=t.label,i=t.name,o=t.outputValues,l=t.typeRef,c=t.width?t.width+"px":"192px";return Object(sp.e)(1,"th","output-cell output-editor",[this.slotFills({type:"cell-inner",context:{cellType:"output-cell",col:this._elementRegistry.get(t.id),index:n,outputsLength:a},col:t}),Object(sp.e)(1,"div","clause",0===n?this._translate("Then"):this._translate("And"),0),r?Object(sp.e)(1,"div","output-label",r,0,{title:this._translate("Output Label")}):Object(sp.e)(1,"div","output-name",i,0,{title:this._translate("Output Name")}),Object(sp.e)(1,"div","output-variable",o&&o.text||l,0,{title:o&&o.text?this._translate("Output Values"):this._translate("Output Type")})],0,{"data-col-id":t.id,onClick:this.onClick,onContextmenu:this.onContextmenu,style:{width:c}})}}])&&dp(n.prototype,a),r&&dp(n,r),t}(sp.a),yp=n(110);function hp(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function Op(e,t){return!t||"object"!==(n=t,"function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?typeof n:n&&"function"===typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t;var n}function Ep(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");var n,a;e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&(n=e,a=t,Object.setPrototypeOf(n,a)||(n.__proto__=a))}var jp=function(e){function t(e,n){var a,r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(a=Op(this,(r=t,Object.setPrototypeOf?Object.getPrototypeOf(r):r.__proto__||Object.getPrototypeOf(r)).call(this,e,n))).translate=n.injector?n.injector.get("translate"):xp,a.setName=function(e){e=e||void 0,a.handleChange({name:e})},a.setLabel=function(e){e=e||void 0,a.handleChange({label:e})},a}var n,a,r;return Ep(t,e),n=t,(a=[{key:"handleChange",value:function(e){var t=this.props.onChange;"function"===typeof t&&t(e)}},{key:"render",value:function(){var e=this.props.label;return Object(sp.e)(1,"div","context-menu-container ref-output-editor output-edit custom-context-edit",[Object(sp.e)(1,"div","dms-form-control",Object(sp.b)(2,yp.a,{className:"dms-output-label",value:e||"",placeholder:this.translate("Output"),singleLine:!0,onInput:this.setLabel}),2)],4)}}])&&hp(n.prototype,a),r&&hp(n,r),t}(sp.a);function xp(e){return e}var wp=n(330);function kp(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function Cp(e){for(var t=arguments,n=function(){var n=null!=t[a]?t[a]:{};a%2?kp(n,!0).forEach((function(t){Pp(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):kp(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))},a=1;a<arguments.length;a++)n();return e}function Np(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function Sp(e,t){return!t||"object"!==(n=t,"function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?typeof n:n&&"function"===typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n)&&"function"!==typeof t?Mp(e):t;var n}function Mp(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Tp(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");var n,a;e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&(n=e,a=t,Object.setPrototypeOf(n,a)||(n.__proto__=a))}function Pp(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Fp=function(e){function t(e,n){var a,r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),Pp(Mp(a=Sp(this,(r=t,r.__proto__||Object.getPrototypeOf(r)).call(this,e,n))),"persistChanges",(function(){var e=a.props.context.output,t=a.state.unsaved;t&&(a.modeling.updateProperties(e,t),a.setState({unsaved:!1}))})),Pp(Mp(a),"handleChange",(function(e){a.setState({unsaved:Cp({},a.state.unsaved,{},e)},a.persistChanges)})),a.state={},Object(wp.a)(Mp(a)),a.persistChanges=a.debounceInput(a.persistChanges),a}var n,a,r;return Tp(t,e),n=t,(a=[{key:"getValue",value:function(e){var t=this.props.context.output,n=this.state.unsaved;return n&&e in n?n[e]:t.get(e)}},{key:"render",value:function(){return Object(sp.b)(2,jp,{name:this.getValue("name"),label:this.getValue("label"),onChange:this.handleChange})}}])&&Np(n.prototype,a),r&&Np(n,r),t}(sp.a);Fp.$inject=["debounceInput","modeling"];var _p=function e(t,n,a,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),t.onGetComponent("cell",(function(e){if("output-header"===e.cellType)return gp})),t.onGetComponent("context-menu",(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if("output-edit"===e.contextMenuType)return Fp})),a.on("output.edit",(function(e){var t=e.event,a=e.output,r=t.target,i=Object(nd.closest)(r,"th",!0),o=i.getBoundingClientRect(),l=o.left,c=o.top,s=function(e){if(!Object(nd.matches)(e,".output-cell + .output-cell"))return{x:-1,y:0}}(i);n.open({x:l,y:c,align:"bottom-right"},{contextMenuType:"output-edit",output:a,offset:s})}))};function Rp(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function Lp(e,t){return!t||"object"!==(n=t,"function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?typeof n:n&&"function"===typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n)&&"function"!==typeof t?Dp(e):t;var n}function Dp(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Ip(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");var n,a;e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&(n=e,a=t,Object.setPrototypeOf(n,a)||(n.__proto__=a))}function Ap(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}_p.$inject=["components","contextMenu","eventBus","renderer"];var Vp=function(e){function t(e,n){var a,r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),Ap(Dp(a=Lp(this,(r=t,r.__proto__||Object.getPrototypeOf(r)).call(this,e,n))),"onClick",(function(e){var t=a.props.input;a._eventBus.fire("input.edit",{event:e,input:t})})),Ap(Dp(a),"onContextmenu",(function(e){var t=a.props.input.id;a._eventBus.fire("cell.contextmenu",{event:e,id:t})})),Ap(Dp(a),"onElementsChanged",(function(){a.forceUpdate()})),Object(up.a)(Dp(a),mp.a),a._translate=n.injector.get("translate"),a}var n,a,r;return Ip(t,e),n=t,(a=[{key:"componentWillMount",value:function(){var e=this.context.injector;this._changeSupport=this.context.changeSupport,this._sheet=e.get("sheet"),this._eventBus=e.get("eventBus"),this._elementRegistry=e.get("elementRegistry");var t=this._sheet.getRoot(),n=this.props.input;this._changeSupport.onElementsChanged(t.id,this.onElementsChanged),this._changeSupport.onElementsChanged(n.id,this.onElementsChanged)}},{key:"componentWillUnmount",value:function(){var e=this._sheet.getRoot(),t=this.props.input;this._changeSupport.offElementsChanged(e.id,this.onElementsChanged),this._changeSupport.offElementsChanged(t.id,this.onElementsChanged)}},{key:"render",value:function(){var e=this.props,t=e.input,n=e.index,a=e.inputsLength,r=t.inputExpression,i=t.inputValues,o=t.get("label"),l=t.width?t.width+"px":"192px";return Object(sp.e)(1,"th","input-cell input-editor",[this.slotFills({type:"cell-inner",context:{cellType:"input-cell",col:this._elementRegistry.get(t.id),index:n,inputsLength:a},col:t}),Object(sp.e)(1,"div","clause",0===n?this._translate("When"):this._translate("And"),0),o?Object(sp.e)(1,"div","input-label",o,0,{title:this._translate("Input Label")}):Object(sp.e)(1,"div","input-expression",r.text,0,{title:this._translate("Input Expression")}),Object(sp.e)(1,"div","input-variable",i&&i.text||r.typeRef,0,{title:i&&i.text?this._translate("Input Values"):this._translate("Input Type")})],0,{"data-col-id":t.id,onClick:this.onClick,onContextmenu:this.onContextmenu,style:{width:l}})}}])&&Rp(n.prototype,a),r&&Rp(n,r),t}(sp.a);function Bp(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function $p(e,t){return!t||"object"!==(n=t,"function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?typeof n:n&&"function"===typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t;var n}function Wp(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");var n,a;e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&(n=e,a=t,Object.setPrototypeOf(n,a)||(n.__proto__=a))}var Jp=function(e){function t(e,n){var a,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(a=$p(this,(r=t,r.__proto__||Object.getPrototypeOf(r)).call(this,e,n))).translate=n.injector?n.injector.get("translate"):Gp;var i=e.defaultExpressionLanguage.value;return a.setExpressionLanguage=function(e){a.handleChange({expressionLanguage:e})},a.handleValue=function(e){var t=a.props.expressionLanguage,n={text:e};zp(e)&&!t&&(n.expressionLanguage=i),zp(e)||t!==i||(n.expressionLanguage=void 0),a.handleChange(n)},a.handleLanguageChange=function(e){a.setExpressionLanguage(e)},a.handleLabelChange=function(e){var t=e||void 0;a.handleChange({label:t})},a.handleInputVariableChange=function(e){var t=e||void 0;a.handleChange({inputVariable:t})},a}var n,a,r;return Wp(t,e),n=t,(a=[{key:"handleChange",value:function(e){var t=this.props.onChange;"function"===typeof t&&t(e)}},{key:"render",value:function(){var e=this.props.label;return Object(sp.e)(1,"div","context-menu-container ref-input-editor input-edit custom-context-edit",[Object(sp.e)(1,"div","dms-form-control",Object(sp.b)(2,yp.a,{className:"dms-input-label",value:e||"",placeholder:this.translate("Input"),singleLine:!0,onInput:this.handleLabelChange}),2)],4)}}])&&Bp(n.prototype,a),r&&Bp(n,r),t}(sp.a);function zp(e){return e&&e.split(/\n/).length>1}function Gp(e){return e}function Up(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function Hp(e){for(var t=arguments,n=function(){var n=null!=t[a]?t[a]:{};a%2?Up(n,!0).forEach((function(t){Qp(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Up(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))},a=1;a<arguments.length;a++)n();return e}function qp(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},i=Object.keys(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function Kp(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function Yp(e,t){return!t||"object"!==(n=t,"function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?typeof n:n&&"function"===typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n)&&"function"!==typeof t?Xp(e):t;var n}function Xp(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Zp(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");var n,a;e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&(n=e,a=t,Object.setPrototypeOf(n,a)||(n.__proto__=a))}function Qp(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var eb=function(e){function t(e,n){var a,r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),Qp(Xp(a=Yp(this,(r=t,Object.setPrototypeOf?Object.getPrototypeOf(r):r.__proto__||Object.getPrototypeOf(r)).call(this,e,n))),"persistChanges",(function(){var e=a.props.context.input,t=a.state.unsaved;if(t){var n,r=t.inputVariable,i=t.label,o=qp(t,["inputVariable","label"]),l={};"inputVariable"in t&&(l.inputVariable=r),"label"in t&&(l.label=i),n=o,Object.keys(n).length&&(l.inputExpression=o),a.modeling.updateProperties(e,l),a.setState({unsaved:!1})}})),Qp(Xp(a),"handleChange",(function(e){a.setState({unsaved:Hp({},a.state.unsaved,{},e)},a.persistChanges)})),a.state={},Object(wp.a)(Xp(a)),a.persistChanges=a.debounceInput(a.persistChanges),a._expressionLanguages=n.injector.get("expressionLanguages"),a}var n,a,r;return Zp(t,e),n=t,(a=[{key:"getValue",value:function(e){var t=this.props.context.input,n=this.state.unsaved,a=t;return"expressionLanguage"!==e&&"text"!==e||(a=a.inputExpression),n&&e in n?n[e]:a.get(e)}},{key:"render",value:function(){var e=this._expressionLanguages.getDefault("inputHeadCell"),t=this._expressionLanguages.getAll();return Object(sp.b)(2,Jp,{expressionLanguage:this.getValue("expressionLanguage")||e.value,expressionLanguages:t,defaultExpressionLanguage:e,inputVariable:this.getValue("inputVariable"),label:this.getValue("label"),text:this.getValue("text"),onChange:this.handleChange})}}])&&Kp(n.prototype,a),r&&Kp(n,r),t}(sp.a);eb.$inject=["debounceInput","modeling","injector"];var tb=function e(t,n,a,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),t.onGetComponent("cell",(function(e){if("input-header"===e.cellType)return Vp})),t.onGetComponent("context-menu",(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if("input-edit"===e.contextMenuType)return eb})),a.on("input.edit",(function(e){var t=e.event,a=e.input,r=t.target,i=Object(nd.closest)(r,"th",!0).getBoundingClientRect(),o=i.left,l=i.top;n.open({x:o,y:l,align:"bottom-right"},{contextMenuType:"input-edit",input:a})}))};tb.$inject=["components","contextMenu","eventBus","renderer"];var nb=n(249),ab=n(246),rb=n(248),ib=n(84),ob={__depends__:[rb.a,op.a,lp.a,cp.a,ib.a,ab.a,nb.a],__init__:["inputEditingProvider","outputEditingProvider"],inputEditingProvider:["type",tb],outputEditingProvider:["type",_p]};function lb(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function cb(e,t){return!t||"object"!==(n=t,"function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?typeof n:n&&"function"===typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n)&&"function"!==typeof t?sb(e):t;var n}function sb(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ub(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");var n,a;e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&(n=e,a=t,Object.setPrototypeOf(n,a)||(n.__proto__=a))}function mb(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var db=function(e){function t(e,n){var a,r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),mb(sb(a=cb(this,(r=t,Object.setPrototypeOf?Object.getPrototypeOf(r):r.__proto__||Object.getPrototypeOf(r)).call(this,e,n))),"onChange",(function(e){a.modeling.editHitPolicy("FIRST",void 0)})),mb(sb(a),"onElementsChanged",(function(){a.forceUpdate()})),Object(wp.a)(sb(a)),a}var n,a,r;return ub(t,e),n=t,(a=[{key:"componentDidMount",value:function(){this.onChange(),this.changeSupport.onElementsChanged(this.getRoot().id,this.onElementsChanged)}},{key:"componentWillUnmount",value:function(){this.changeSupport.offElementsChanged(this.getRoot().id,this.onElementsChanged)}},{key:"getRoot",value:function(){return this.sheet.getRoot()}},{key:"render",value:function(){return Object(sp.e)(1,"div","hit-policy",[Object(sp.e)(1,"label","dms-label",Object(sp.d)("Hit Policy:"),2),Object(sp.e)(1,"label","dms-label",Object(sp.d)("First"),2)],4,{title:"Rules may overlap. The first matching rule will be chosen"})}}])&&lb(n.prototype,a),r&&lb(n,r),t}(sp.a);function pb(e){e.onGetComponent("hit-policy",(function(){return db}))}db.$inject=["changeSupport","sheet","modeling"],pb.$inject=["components"];var bb={__depends__:[op.a],__init__:["hitPolicyProvider"],hitPolicyProvider:["type",pb]},fb=n(116),vb=n(53),gb=n(11);function yb(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function hb(e,t){return!t||"object"!==(n=t,"function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?typeof n:n&&"function"===typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n)&&"function"!==typeof t?Ob(e):t;var n}function Ob(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Eb(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");var n,a;e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&(n=e,a=t,Object.setPrototypeOf(n,a)||(n.__proto__=a))}var jb=function(e){function t(e,n){var a,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(a=hb(this,(r=t,r.__proto__||Object.getPrototypeOf(r)).call(this,e,n))).state={top:0,left:0,isVisible:!1,isDisabled:!0};var i=n.injector,o=a._eventBus=i.get("eventBus"),l=i.get("simpleMode"),c=n.injector.get("elementRegistry"),s=n.injector.get("expressionLanguages");return a._renderer=i.get("renderer"),a._selection=n.injector.get("selection"),a.updatePosition=a.updatePosition.bind(Ob(a)),o.on("cellSelection.changed",(function(e){var t=e.elementId,n=c.get(t);if(n&&l.canSimpleEdit(n)){a.setState({isVisible:!1,selection:n},a.updatePosition);var r=!function(e,t,n){return!t||t===function(e,t){if(Object(gb.e)(e.col))return t.getDefault("inputCell").value;if(Object(gb.f)(e.col))return t.getDefault("outputCell").value}(e,n)}(n,n.businessObject.expressionLanguage,s);a.setState({isVisible:!1,selection:n,isDisabled:r},a.updatePosition)}else a.setState({isVisible:!1})})),a.onClick=a.onClick.bind(Ob(a)),a}var n,a,r;return Eb(t,e),n=t,(a=[{key:"updatePosition",value:function(){var e=this.state.selection,t=this.node;if(e&&t){var n=this._renderer.getContainer(),a=n.getBoundingClientRect(),r=Object(vb.g)(e.id,n).getBoundingClientRect(),i=this.node.getBoundingClientRect(),o=function(e){var t=Object(nd.closest)(e,".tjs-table-container");if(!t)return{scrollTop:0,scrollLeft:0};var n=t.scrollLeft;return{scrollTop:t.scrollTop,scrollLeft:n}}(t),l=o.scrollLeft,c=o.scrollTop,s={};r.left+r.width/2>a.width/2?(s.left=-a.left+r.left-i.width+4+l+"px",t.classList.remove("right"),t.classList.add("left")):(s.left=-a.left+r.left+r.width-4+l+"px",t.classList.remove("left"),t.classList.add("right")),r.top+r.height/2>a.height/2?(s.top=-a.top+r.top-i.height+4+c+"px",t.classList.remove("top"),t.classList.add("bottom")):(s.top=-a.top+r.top-4+c+"px",t.classList.remove("bottom"),t.classList.add("top")),Object(Lm.assign)(this.node.style,s)}}},{key:"onClick",value:function(){if(!this.state.isDisabled){var e=this._selection.get();e&&(this._eventBus.fire("simpleMode.open",{element:e,node:Object(vb.g)(e.id,this._container)}),this.setState({isVisible:!1}))}}},{key:"render",value:function(){var e=this,t=this.state,n=t.isDisabled,a=t.isVisible,r=t.top,i=t.left,o=["simple-mode-button","no-deselect"];return n&&o.push("disabled"),a?Object(sp.e)(1,"div",o.join(" "),Object(sp.e)(1,"span","dmn-icon-edit"),2,{onClick:this.onClick,style:{top:r,left:i},title:n?"Editing not supported for set expression language":"Edit"},null,(function(t){return e.node=t})):null}}])&&yb(n.prototype,a),r&&yb(n,r),t}(sp.a);function xb(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}var wb=function(){function e(t,n,a,r,i){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._providers=[],t.onGetComponent("table.before",(function(){return jb})),r.on("simpleMode.open",(function(e){var t=e.element,a=e.node.getBoundingClientRect(),r=a.left,o=a.top,l=a.width,c=a.height,s=i.getContainer();n.open({x:r+s.parentNode.scrollLeft,y:o+s.parentNode.scrollTop,width:l,height:c},{contextMenuType:"simple-mode-edit",element:t,offset:{x:4,y:4}})})),r.on("cell.click",(function(e){var t=e.event,n=e.node,i=e.id;if(function(e){if(e.altKey)return!1;return e.ctrlKey||e.metaKey}(t)){var o=a.get(i);o&&r.fire("simpleMode.open",{node:n,element:o}),e.preventDefault()}}))}var t,n,a;return t=e,(n=[{key:"registerProvider",value:function(e){this._providers.push(e)}},{key:"canSimpleEdit",value:function(e){return this._providers.reduce((function(t,n){return t||n(e)}),!1)}}])&&xb(t.prototype,n),a&&xb(t,a),e}();wb.$inject=["components","contextMenu","elementRegistry","eventBus","renderer"];var kb={__depends__:[op.a,fb.a,cp.a],__init__:["simpleMode"],simpleMode:["type",wb]},Cb=n(33);var Nb=function(e,t,n,a){Object(gb.d)(t,["dmn:DRGElement","dmn:Definitions"])&&(e.entries=e.entries.concat(function(e,t,n){return[{id:"name",label:t("Name"),modelProperty:"name",widget:"textBox",get:function(){return{name:Object(gb.a)(e).get(["name"])}},set:function(e,t){e.businessObject?e.businessObject.name=t.name:e.name=t.name;var a=n._viewers.drd.get("modeling"),r=n._viewers.drd.get("elementRegistry").get(e.id);r&&a&&a.updateProperties(r,{name:t.name})}}]}(t,n,a)))};var Sb=Object(F.a)({root:{display:"flex",flexDirection:"column"},groupLabel:{fontWeight:"bolder",display:"inline-block",verticalAlign:"middle",color:"#666",fontSize:"120%",margin:"10px 0px",transition:"margin 0.218s linear",fontStyle:"italic"},divider:{marginTop:15,borderTop:"1px dotted #ccc"},label:{fontWeight:"bolder",display:"inline-block",verticalAlign:"middle",color:"#666",margin:"3px 0px"},select:{margin:0},metajsonModel:{marginTop:10}});function Mb(e){var t=e.element,n=e.label,i=Object(a.useState)(!1),o=Object(l.a)(i,2),c=o[0],s=o[1],u=Object(a.useState)(null),m=Object(l.a)(u,2),p=m[0],b=m[1],f=Object(a.useState)(null),v=Object(l.a)(f,2),g=v[0],y=v[1],h=Object(a.useState)(!1),O=Object(l.a)(h,2),E=O[0],j=O[1],x=Sb(),w=r.a.useCallback((function(e,n){var a=Object(gb.a)(t);"bpmn:Participant"===(t&&t.type)&&(a=Object(gb.a)(a.processRef));var r="camunda:".concat(e);a&&(a.$attrs?a.$attrs[r]=n:a.$attrs=Object(d.a)({},r,n),void 0===n&&delete a.$attrs[r])}),[t]),k=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"name";if(!t)return w(e,void 0),void w("".concat(e,"ModelName"),void 0);w(e,t[n]),w("".concat(e,"ModelName"),t.fullName||t.name)},C=function(e,t,n){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"name";k(e,t,a),t||w("".concat(e,"Label"),void 0),w("".concat(e,"Label"),n)},N=r.a.useCallback((function(e){var n="camunda:".concat(e),a=Object(gb.a)(t);return a&&a.$attrs&&a.$attrs[n]||""}),[t]),S=r.a.useCallback((function(e){var t=N("".concat(e,"Label")),n=N(e);if(n){var a={name:n};return t&&(a.title=t),a}return null}),[N]);return Object(a.useEffect)((function(){Object(gb.c)(t,"dmn:Definitions")?s(!0):s(!1)}),[t]),Object(a.useEffect)((function(){var e=S("metaModel"),t=S("metaJsonModel"),n=N("isCustom");j(void 0===n||""===n?!!t:z(n)),b(e),y(t)}),[S,N]),c&&r.a.createElement("div",{className:x.root},r.a.createElement("div",{className:x.divider}),r.a.createElement("div",{className:x.groupLabel},n),r.a.createElement("label",{className:x.label},J("Model")),r.a.createElement(dn,{className:x.checkbox,entry:{id:"custom-model",modelProperty:"isCustom",label:J("Custom"),get:function(){return{isCustom:E}},set:function(e,t){var n=!t.isCustom;j(n),w("isCustom",n),y(void 0),C("metaJsonModel",void 0),b(void 0),C("metaModel",void 0)}},element:t}),E?r.a.createElement(ei,{className:ne()(x.select,x.metajsonModel),fetchMethod:function(){return jt()},update:function(e,t){y(e),C("metaJsonModel",e,t)},name:"metaJsonModel",value:g,placeholder:J("Custom model"),isLabel:!1,optionLabel:"name",optionLabelSecondary:"title"}):r.a.createElement(ei,{className:x.select,fetchMethod:function(){return Ot()},update:function(e,t){b(e),C("metaModel",e,t)},name:"metaModel",value:p,isLabel:!1,placeholder:J("Model"),optionLabel:"name",optionLabelSecondary:"title"}))}function Tb(e,t,n){e=e.labelTarget||e;var a,r={id:"general",label:t("General"),entries:[]};Object(gb.c)(e,"dmn:Decision")&&(a={description:"This maps to the decision definition key."}),function(e,t,n,a){var r=a&&a.description;e.entries.push({id:"id",label:n("Id"),description:r&&n(r),modelProperty:"id",widget:"textField",getProperty:function(e){return Object(gb.a)(e).id},setProperty:function(e,t){(e=e.labelTarget||e).businessObject&&(e.businessObject.id=t.id)},validate:function(e,t){var a=t.id;if("__implicitroot"!==a){var r=Object(gb.a)(e),i=Object(Cb.b)(r,a,n);return i?{id:i}:{}}}})}(r,0,t,a),Nb(r,e,t,n),function(e,t,n){if(Object(gb.a)(t)&&Object(gb.c)(t,"dmn:Decision")){var a={id:"versionTag",label:n("Version Tag"),modelProperty:"versionTag",widget:"textField",get:function(e){var t=Object(gb.a)(e),n={};return n.versionTag=t.get("versionTag"),n},set:function(e,t){e&&e.businessObject&&(e.businessObject.versionTag=t.versionTag)}};e.entries.push(a)}}(r,e,t);var i={id:"modelProps",label:t("Details"),entries:[],component:Mb},o={id:"historyConfiguration",label:t("History Configuration"),entries:[]};!function(e,t,n){if(Object(gb.a)(t)&&Object(gb.c)(t,"dmn:Decision")){var a={id:"historyTimeToLive",label:n("History Time To Live"),modelProperty:"historyTimeToLive",widget:"textField",get:function(e){var t=Object(gb.a)(e),n={};return n.historyTimeToLive=t.get("historyTimeToLive"),n},set:function(e,t){e&&e.businessObject&&(e.businessObject.historyTimeToLive=t.historyTimeToLive)}};e.entries.push(a)}}(o,e,t);var l=[];return l.push(r),l.push(o),l.push(i),l}var Pb=n(182),Fb=n(242),_b=n(253),Rb=n(243),Lb=n(244);function Db(e,t){e=e.labelTarget||e;var n,a={id:"general",label:t("General"),entries:[]};Object(gb.c)(e,"dmn:Decision")&&(n={description:"This maps to the decision definition key."}),Object(Fb.a)(a,e,t,n),Object(_b.a)(a,e,t),Object(Rb.a)(a,e,t);var r={id:"historyConfiguration",label:t("History Configuration"),entries:[]};Object(Lb.a)(r,e,t);var i=[];return i.push(a),i.push(r),i}function Ib(e,t){Pb.a.call(this,e),this.getTabs=function(e){return[{id:"general",label:t("General"),groups:Db(e,t)}]}}Ib.$inject=["eventBus","translate"],_u()(Ib,Pb.a);var Ab=Ib;function Vb(e,t,n,a,r,i,o){this._palette=e,this._create=t,this._elementFactory=n,this._handTool=a,this._lassoTool=r,this._translate=i,this._drdFactory=o,e.registerProvider(this)}Vb.$inject=["palette","create","elementFactory","handTool","lassoTool","translate","drdFactory"],Vb.prototype.getPaletteEntries=function(e){var t={},n=this._create,a=this._elementFactory,r=this._handTool,i=this._lassoTool,o=this._drdFactory,l=this._translate;function c(e,t,r,i,l){function c(t){var r=a.createShape(Object(Lm.assign)({type:e},l));if("dmn:Decision"===e&&r){var i=r.businessObject,c=o.create("dmn:DecisionTable");i&&(i.decisionLogic=c),c.$parent=i;var s=o.create("dmn:OutputClause");s.typeRef="string",s.$parent=c,c.output=[s];var u=o.create("dmn:InputClause");u.$parent=c;var m=o.create("dmn:LiteralExpression",{typeRef:"string"});u.inputExpression=m,m.$parent=u,c.input=[u]}n.start(t,r)}return{group:t,className:r,title:i,action:{dragstart:c,click:c}}}return Object(Lm.assign)(t,{"hand-tool":{group:"tools",className:"dmn-icon-hand-tool",title:l("Activate the hand tool"),action:{click:function(e){r.activateHand(e)}}},"lasso-tool":{group:"tools",className:"dmn-icon-lasso-tool",title:l("Activate the lasso tool"),action:{click:function(e){i.activateSelection(e)}}},"tool-separator":{group:"tools",separator:!0},"create.decision":c("dmn:Decision","drd","dmn-icon-decision",l("Create Decision Table")),"create.input-data":c("dmn:InputData","drd","dmn-icon-input-data",l("Create Input Data")),"create.knowledge-source":c("dmn:KnowledgeSource","drd","dmn-icon-knowledge-source",l("Create Knowledge Source")),"create.business-knowledge-model":c("dmn:BusinessKnowledgeModel","drd","dmn-icon-business-knowledge",l("Create Knowledge Model"))}),t};var Bb={__init__:["propertiesProvider","paletteProvider"],propertiesProvider:["type",Ab],paletteProvider:["type",Vb]},$b=(n(733),n(734),n(735),n(736),n(737),n(738),n(739),n(740),null),Wb={display:"flex",alignItems:"center",justifyContent:"center",borderLeft:"solid 1px #ddd",background:"#f0f0f0"},Jb=Object(F.a)((function(e){return{drawerPaper:{background:"#F8F8F8",width:"100%",position:"absolute",borderLeft:"1px solid #ccc",overflow:"auto",height:"100%"},drawerContainer:{padding:10,height:"100%",textAlign:"left"},groupLabel:{fontWeight:"bolder",display:"inline-block",verticalAlign:"middle",color:"#666",fontSize:"120%",margin:"10px 0px",transition:"margin 0.218s linear",fontStyle:"italic"},groupContainer:{marginTop:10},divider:{marginTop:15,borderTop:"1px dotted #ccc"},nodeTitle:{fontSize:"120%",fontWeight:"bolder"},dialog:{minWidth:300},label:{fontWeight:"bolder",display:"inline-block",verticalAlign:"middle",color:"#666",margin:"3px 0px"},textButton:{minWidth:100,fontWeight:"bold",minHeight:30},save:{margin:e.spacing(1),backgroundColor:"#0275d8",borderColor:"#0267bf",textTransform:"none",color:"white","&:hover":{backgroundColor:"#025aa5",borderColor:"#014682",color:"white"}}}}));function zb(e,t){if(e&&e.getActiveViewer())return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=["general"],n=[];return e&&e.forEach((function(e){e&&t&&t.includes(e.id)&&n.push(e)})),n}(function(e,t,n){return[{id:"general",label:t("General"),groups:Tb(e,t,n)}]}(t,J,e),t)}var Gb=function(){document.getElementById("inputFile").click()},Ub=function(){document.getElementById("inputExcelFile").click()},Hb=function(){$b.saveXML({format:!0},(function(e,t){if(e)return console.error("could not save DMN 1.1 diagram",e);W(t,"diagram.dmn")}))};var qb=function(){var e=Object(a.useState)(null),t=Object(l.a)(e,2),n=t[0],i=t[1],o=Object(a.useState)({open:!1,messageType:null,message:null}),u=Object(l.a)(o,2),d=u[0],b=u[1],f=Object(a.useState)(380),v=Object(l.a)(f,2),g=v[0],y=v[1],h=Object(a.useState)("100%"),O=Object(l.a)(h,2),E=O[0],j=O[1],x=Object(a.useState)(!0),w=Object(l.a)(x,2),k=w[0],C=w[1],S=Object(a.useState)(null),M=Object(l.a)(S,2),T=M[0],P=M[1],F=Object(a.useState)(0),_=Object(l.a)(F,2),A=_[0],V=_[1],B=Object(a.useState)(null),W=Object(l.a)(B,2),z=W[0],G=W[1],H=Object(a.useState)(null),q=Object(l.a)(H,2),K=q[0],Y=q[1],X=Object(a.useState)(null),Z=Object(l.a)(X,2),te=Z[0],ae=Z[1],re=Object(a.useState)(null),ie=Object(l.a)(re,2),oe=ie[0],le=ie[1],ce=Object(a.useState)(null),se=Object(l.a)(ce,2),ue=se[0],me=se[1],de=Object(a.useState)(null),pe=Object(l.a)(de,2),fe=pe[0],ge=pe[1],ye=Object(a.useState)(null),he=Object(l.a)(ye,2),Oe=he[0],Ee=he[1],je=Object(a.useState)(null),xe=Object(l.a)(je,2),we=xe[0],ke=xe[1],Ce=Object(a.useState)(null),Ne=Object(l.a)(Ce,2),Se=Ne[0],Me=Ne[1],Te=Object(a.useState)(!1),Pe=Object(l.a)(Te,2),Fe=Pe[0],_e=Pe[1],Re=Object(a.useState)(null),Le=Object(l.a)(Re,2),De=Le[0],Ie=Le[1],Ae=Jb(),Ve=function(){var e=Se&&Se.businessObject,t=e&&e.$attrs&&(e.$attrs["camunda:metaModel"]||e.$attrs["camunda:metaJsonModel"]);if(t)return e.$attrs["camunda:metaModel"]?{fullName:e.$attrs["camunda:metaModelModelName"],name:t,type:"metaModel"}:e.$attrs["camunda:metaJsonModel"]?{name:t,type:"metaJsonModel"}:void 0},Be=function(){var e=Se&&Se.businessObject;return e&&e.$attrs&&(e.$attrs["camunda:metaModel"]||e.$attrs["camunda:metaJsonModel"])};function $e(e){var t=e.entry;return r.a.createElement("div",{key:t.id},function(e){if(e||!e.widget)switch(e.widget){case"textField":return r.a.createElement(an,{entry:e,element:T,canRemove:!0});case"textBox":return r.a.createElement(en,{entry:e,element:T});case"selectBox":return r.a.createElement(on,{entry:e,element:T});case"checkbox":return r.a.createElement(dn,{entry:e,element:T});default:return r.a.createElement(en,{entry:e,element:T})}}(t))}var We=function(e,t){b({open:!0,messageType:e,message:t})},Je=function(e,t){"clickaway"!==t&&b({open:!1,messageType:null,message:null})},ze=function(){var e=Object(p.a)(m.a.mark((function e(t){var n,a,r,i,o,l,c,s=arguments;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=s.length>1&&void 0!==s[1]?s[1]:0,a=U(t),i=n+(r=1e5)<a&&a.size?n+r:a&&a.size,o=a&&a.slice(n,i),l=be(t,n),e.next=8,Yt(o,l);case 8:(c=e.sent)&&c.id?Ie(c):n<a&&a.size&&(c.fileId&&(t.id=c.fileId),ze(t,r+n));case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Ge=function(){var e=Object(p.a)(m.a.mark((function e(){var t,a;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ve.action({model:"com.axelor.apps.bpm.db.WkfDmnModel",action:"action-dmn-model-method-import-dmn-table",data:{context:{dataFile:De,_dmnModelId:n&&n.id}}});case 2:if(e.sent){e.next=6;break}return We("error","Import failed"),e.abrupt("return");case 6:return We("success","Imported successfully"),_e(!1),Ie(null),e.next=11,ve.search("com.axelor.apps.bpm.db.WkfDmnModel",{data:{_domain:"self.id = ".concat(n&&n.id)}});case 11:if(!((t=e.sent)&&t.data&&t.data[0])){e.next=18;break}if(a=t.data[0]){e.next=16;break}return e.abrupt("return");case 16:i(Object(c.a)({},a)),Ke(a.diagramXml);case 18:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Ue=function(){var e=Object(p.a)(m.a.mark((function e(t){var n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=t.target.files,r=void 0,n=Array.prototype.slice.call(a).slice(0,r).map((function(e,t){return{file:e,index:t,progress:0,cancelled:!1,completed:!1,chunkProgress:new Array(Math.floor(e.size/524288)+1).fill(0),error:!1,totalUploaded:0}}))){e.next=3;break}return e.abrupt("return");case 3:ze(n&&n[0]);case 4:case"end":return e.stop()}var a,r}),e)})));return function(t){return e.apply(this,arguments)}}(),He=function(){var e=Object(p.a)(m.a.mark((function e(){var t,a,r,i,o;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ve.action({model:"com.axelor.apps.bpm.db.WkfDmnModel",action:"action-dmn-model-method-export-dmn-table",data:{context:Object(c.a)({},n||{})}});case 2:if(t=e.sent){e.next=5;break}return e.abrupt("return");case 5:if(a=t.data,r=a&&a[0]||{},i=r.view,!(o=i&&i.views&&i.views[0]&&i.views[0].name)){e.next=11;break}return e.next=11,ve.download(o,n&&n.name||"DMN");case 11:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),qe=r.a.useCallback((function(e){var t=e.element;t&&"label"===t.type&&(t=($b&&$b.getActiveViewer()).get("elementRegistry").get(t.businessObject&&t.businessObject.id));var n=zb($b,t);V(0),G(n),P(t),C(!0)}),[]),Ke=r.a.useCallback(function(){var e=Object(p.a)(m.a.mark((function e(t){var n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(Ld.a)(t);case 2:n=e.sent,$b.importXML(n,(function(e){if(e)return console.error("could not import DMN 1.1 diagram",e);var t=$b.getActiveView();if(t&&"drd"===t.type){var n=$b.getActiveViewer(),a=n.get("eventBus");n.get("canvas").zoom("fit-viewport");var r=$b._viewers.drd&&$b._viewers.drd.get("elementRegistry"),i=r&&r.get($b._activeView.id);Me(i),qe({element:i}),a.on("drillDown.click",(function(e){e.stopPropagation(),y(0);var t=(e||{}).element;Y(t),qe({element:{id:"__implicitroot"}})})),a.on("element.click",(function(e){var t=e.element;P(t),qe(e)})),a.on("commandStack.shape.replace.postExecuted",(function(e){qe({element:e&&e.context&&e.context.newShape})})),a.on("shape.removed",(function(){var e=$b._viewers.drd.get("elementRegistry").get($b._activeView.id);e&&qe({element:e})}))}}));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[qe]),Ye=r.a.useCallback((function(e){Ke(e||'<?xml version="1.0" encoding="UTF-8"?>\n<definitions xmlns="http://www.omg.org/spec/DMN/20151101/dmn.xsd" xmlns:biodi="http://bpmn.io/schema/dmn/biodi/1.0" id="Definitions_1oj7khq" name="DRD" namespace="http://camunda.org/schema/1.0/dmn">\n  <decision id="Decision_1jui1qf" name="Decision 1">\n    <extensionElements>\n      <biodi:bounds x="157" y="81" width="180" height="80" />\n    </extensionElements>\n    <decisionTable id="decisionTable_1">\n      <input id="input_1">\n        <inputExpression id="inputExpression_1" typeRef="string">\n          <text></text>\n        </inputExpression>\n      </input>\n      <output id="output_1" typeRef="string" />\n    </decisionTable>\n  </decision>\n</definitions>')}),[Ke]),Xe=r.a.useCallback(function(){var e=Object(p.a)(m.a.mark((function e(t,n){var a,r,i;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t){e.next=10;break}return e.next=3,ve.fetchId("com.axelor.apps.bpm.db.WkfDmnModel",t);case 3:a=e.sent,r=a&&a.data&&a.data[0]||{},i=r.diagramXml,n(r),Ye(i),e.next=11;break;case 10:Ye();case 11:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),[Ye]),Ze=function(e){var t=e.target.files,n=new FileReader;t&&t[0]&&t[0].name&&!t[0].name.includes(".dmn")?We("error","Upload dmn files only"):(n.readAsText(t[0]),n.onload=function(e){Ke(e.target.result)})},Qe=function(){$b.saveXML({format:!0},function(){var e=Object(p.a)(m.a.mark((function e(t,a){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:ve.add("com.axelor.apps.bpm.db.WkfDmnModel",Object(c.a)(Object(c.a)({},n),{},{diagramXml:a})).then((function(e){e&&e.data&&e.data[0]?(i(Object(c.a)({},e.data[0])),We("success","Saved Successfully")):We("error",e&&e.data&&(e.data.message||e.data.title)||"Error!")}));case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}())},et=function(){var e=Object(p.a)(m.a.mark((function e(){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:$b.saveXML({format:!0},function(){var e=Object(p.a)(m.a.mark((function e(t,a){var r,o;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ve.add("com.axelor.apps.bpm.db.WkfDmnModel",Object(c.a)(Object(c.a)({},n),{},{diagramXml:a}));case 2:if(!((r=e.sent)&&r.data&&r.data[0])){e.next=11;break}return i(Object(c.a)({},r.data[0])),e.next=7,ve.action({model:"com.axelor.apps.bpm.db.WkfDmnModel",action:"action-wkf-dmn-model-method-deploy",data:{context:Object(c.a)({_model:"com.axelor.apps.bpm.db.WkfDmnModel"},r.data[0])}});case 7:(o=e.sent)&&o.data&&o.data[0]&&o.data[0].reload?(We("success","Deployed Successfully"),Xe(n.id,i)):We("error",o&&o.data&&(o.data.message||o.data.title)||"Error!"),e.next=12;break;case 11:We("error",r&&r.data&&(r.data.message||r.data.title)||"Error!");case 12:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}());case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),tt=[{name:"Save",icon:r.a.createElement("i",{className:"fa fa-floppy-o",style:{fontSize:18}}),tooltipText:"Save",onClick:Qe},{name:"UploadXml",icon:r.a.createElement("i",{className:"fa fa-upload",style:{fontSize:18}}),tooltipText:"Upload",onClick:Gb},{name:"DownloadXml",icon:r.a.createElement("i",{className:"fa fa-download",style:{fontSize:18}}),tooltipText:"Download",onClick:Hb},{name:"Deploy",icon:r.a.createElement("i",{className:"fa fa-rocket",style:{fontSize:18}}),tooltipText:"Deploy",onClick:et}],nt=function(e){C("0px"!==e)},at=function(e){var t=e.group,n=e.index;return r.a.createElement("div",{key:t.id,"data-group":t.id,className:ne()(Ae.groupContainer,Ae[t.className])},t.component?r.a.createElement(t.component,{element:T,index:n,label:t.label,onSave:Qe}):t.entries.length>0&&r.a.createElement(r.a.Fragment,null,r.a.createElement(r.a.Fragment,null,n>0&&r.a.createElement("div",{className:Ae.divider})),r.a.createElement("div",{className:Ae.groupLabel},t.label),r.a.createElement("div",null,t.entries.map((function(e,t){return r.a.createElement($e,{entry:e,key:t})})))))};return Object(a.useEffect)((function(){$b=new Rd.a({drd:{propertiesPanel:{parent:"#properties"},additionalModules:[Dd.a,Ad.a,Id.a,Bb],keyboard:{bindTo:document}},decisionTable:{additionalModules:[ob,kb,bb]},container:"#canvas",moddleExtensions:{camunda:Vd}});var e=function(){for(var e,t=/[?&]id=([^&#]*)/g,n=window.location.href;e=t.exec(n);)return e[1]}();Xe(e,i)}),[Xe]),r.a.createElement("div",{className:"App"},r.a.createElement("div",{className:"modeler"},r.a.createElement("div",{id:"canvas"},r.a.createElement("div",{className:"toolbar-buttons"},tt.map((function(e){return r.a.createElement("div",{key:e.name},"UploadXml"===e.name&&r.a.createElement("input",{id:"inputFile",type:"file",name:"file",onChange:Ze,style:{display:"none"}}),r.a.createElement($,{title:e.tooltipText,children:r.a.createElement("button",{onClick:e.onClick,className:"property-button"},e.icon)}))})),r.a.createElement($,{title:"Export",children:r.a.createElement("button",{onClick:He,className:ne()(Ae.textButton,"property-button")},J("Export"))}),r.a.createElement($,{title:"Import",children:r.a.createElement("button",{onClick:function(){return _e(!0)},className:ne()(Ae.textButton,"property-button")},J("Import"))}),T&&"__implicitroot"===T.id&&r.a.createElement("button",{className:ne()(Ae.textButton,"property-button"),onClick:function(e){e.stopPropagation();var t=$b.getViews().find((function(e){return"drd"===e.type}));t&&$b.open(t),Y(null),P(Se),ae(null),ge(null),le(null),me(null),Ee(null)}},"View DRD"))),r.a.createElement("div",null,r.a.createElement(D.a,{style:Wb,size:{width:g,height:E},onResizeStop:function(e,t,n,a){y((function(e){return e+a.width})),j(E+a.height),nt(g+a.width)},maxWidth:window.innerWidth-150},r.a.createElement(R.a,{variant:"persistent",anchor:"right",open:k,style:{width:380},classes:{paper:Ae.drawerPaper},id:"drawer"},r.a.createElement("div",{className:Ae.drawerContainer},T&&"__implicitroot"!==T.id&&r.a.createElement(ee.a,{className:Ae.nodeTitle},T&&T.id),r.a.createElement(Su,{value:A,onChange:function(e,t){V(t)}},r.a.createElement(Mu,{label:"General","data-tab":"General"})),T&&"__implicitroot"===T.id?K&&r.a.createElement("div",{style:{marginTop:10}},K&&r.a.createElement(r.a.Fragment,null,te&&!we&&r.a.createElement(ap,{element:T,input:te,dmnModeler:$b,getData:Ve,getModel:Be}),we&&r.a.createElement(tp,{entity:te,element:T,dmnModeler:$b,rule:we,ruleFieldType:"inputEntry",ruleIndex:fe}),oe&&!Oe&&r.a.createElement(ip,{element:T,output:oe,dmnModeler:$b,getData:Ve,getModel:Be}),Oe&&r.a.createElement(tp,{entity:oe,element:T,dmnModeler:$b,rule:Oe,ruleFieldType:"outputEntry",ruleIndex:ue,isOutput:!0}))):r.a.createElement(r.a.Fragment,null,z&&z[A]&&z[A].groups&&z[A].groups.map((function(e,t){return r.a.createElement(at,{key:t,group:e,index:t})}))),r.a.createElement("div",{id:"properties",style:{display:"none"}}))),r.a.createElement("div",{className:"bpmn-property-toggle",onClick:function(){y((function(e){return 0===e?380:0})),nt(0===g?380:0),K&&K.businessObject&&K.businessObject.decisionLogic&&"dmn:LiteralExpression"===K.businessObject.decisionLogic.$type||K&&function(){if($b){var e=$b.getActiveViewer();if(e){var t=e.get("sheet");if(t){var n=t._eventBus;n.on("commandStack.row.add.executed",(function(e){var t=(e||{}).context||{},n=t.newRoot,a=(t.row||{}).cells;if(n&&a){var r=[].concat(Object(s.a)(n.businessObject.input||[]),Object(s.a)(n.businessObject.output||[]));a.length>0&&a.forEach((function(e,t){if(e&&e.businessObject){var n=r&&r[t].$attrs&&r[t].$attrs["camunda:defaultValue"];n&&(e.businessObject.text=n)}}))}})),n.on("input.edit",(function(e){ae(e.input),le(null),Ee(null),ke(null)})),n.on("output.edit",(function(e){le(e.output),ae(null),Ee(null),ke(null)})),n.on("cell.click",(function(e){var n=e.id,a=t.getRoot().rows,r=a&&a.find((function(e){return e.cells.some((function(e){return e.id===n}))}));if(!r)return ae(null),Ee(null),ke(null),void le(null);var i=r.cells.find((function(e){return e.id===n})),o=K&&K.businessObject&&K.businessObject.decisionLogic||{},l=o.input,c=o.output,s=o.rule,u=i||{},m=u.col,d=u.row,p=l.find((function(e){return e.id===m.id})),b=s&&s.map((function(e,t){var n=Object.assign({},e);return n.label="Rule ".concat(t+1),n}));if(b){var f=b.find((function(e){return e.id===d.id})),v=l.findIndex((function(e){return e.id===m.id}));if(p)ae(p),ge(v),ke(f),le(null),me(null),Ee(null);else{if(v=c&&c.findIndex((function(e){return e.id===m.id})),!(p=c&&c.find((function(e){return e.id===m.id}))))return;le(p),me(v),Ee(f),ae(null),ge(null),ke(null)}}}))}}}}()}},"Properties Panel")))),d.open&&r.a.createElement(L.a,{open:d.open,autoHideDuration:2e3,onClose:Je},r.a.createElement(N.a,{elevation:6,variant:"filled",onClose:Je,className:"snackbarAlert"},d.message)),Fe&&r.a.createElement(I.a,{open:Fe,onClose:function(e,t){"backdropClick"!==t&&_e(!1)},"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",classes:{paper:Ae.dialog}},r.a.createElement(za.a,{id:"alert-dialog-title"},J("Upload")),r.a.createElement(Ga.a,null,r.a.createElement("input",{id:"inputExcelFile",type:"file",name:"file",onChange:Ue,style:{display:"none"}}),r.a.createElement($,{title:J("Import"),children:r.a.createElement("button",{onClick:Ub,className:ne()(Ae.textButton,"property-button")},r.a.createElement("i",{className:"fa fa-upload",style:{fontSize:18}}))}),De&&r.a.createElement(ee.a,null,De.fileName)),r.a.createElement(Ua.a,null,r.a.createElement(In.a,{className:Ae.save,onClick:Ge,color:"primary"},J("Import")),r.a.createElement(In.a,{onClick:function(){_e(!1)},color:"primary",autoFocus:!0,className:Ae.save},"OK"),r.a.createElement(In.a,{onClick:function(){_e(!1)},color:"primary",autoFocus:!0,className:Ae.save},J("Cancel")))),r.a.createElement(Q,null))},Kb=!1;var Yb=function(){var e=Object(a.useState)(null),t=Object(l.a)(e,2),n=t[0],i=t[1];return Object(a.useEffect)((function(){var e=function(){for(var e=/[?&]id=([^&#]*)/g,t=/[?&]taskIds=([^&#]*)/g,n=/[?&]instanceId=([^&#]*)/g,a=/[?&]type=dmn([^&#]*)/g,r=window.location.href,i="bpmnModeler";e.exec(r);)i="bpmnModeler";for(;t.exec(r);)i="bpmnViewer";for(;a.exec(r);)i="dmnModeler";for(;n.exec(r);)i="bpmnViewer",Kb=!0;return i}()||{};i(e)}),[i]),r.a.createElement(r.a.Fragment,null,"dmnModeler"===n?r.a.createElement(qb,null):"bpmnModeler"===n?r.a.createElement(Od,null):"bpmnViewer"===n?r.a.createElement(_d,{isInstance:Kb}):r.a.createElement(r.a.Fragment,null))};n(741);o.a.render(r.a.createElement(Yb,null),document.getElementById("root"))}},[[460,1,2]]]);