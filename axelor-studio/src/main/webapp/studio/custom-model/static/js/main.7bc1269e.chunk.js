(this["webpackJsonpaxelor-studio"]=this["webpackJsonpaxelor-studio"]||[]).push([[0],{1:function(e,t,a){"use strict";var n=a(10),r=a(4),i=a(8),o=["NavSelect","CheckboxSelect","RadioSelect","MultiSelect","ImageSelect"],l={boolean:["InlineCheckbox","Toggle","BooleanSelect","BooleanRadio","BooleanSwitch"].concat(o),integer:["RelativeTime","Duration","Progress","SelectProgress"].concat(o),string:["Email","Url","Password","Html","CodeEditor","ImageLine"].concat(o),text:["Html","CodeEditor"].concat(o),"many-to-one":["SuggestBox","Image","binary-link"],"json-many-to-one":["SuggestBox","Image","binary-link"],"one-to-one":["SuggestBox","Image"],"json-one-to-one":["SuggestBox","Image"],"many-to-many":["TagSelect"],"json-many-to-many":["TagSelect"],binary:["Image","BinaryLink"].concat(o),date:[].concat(o),datetime:[].concat(o),time:[].concat(o),button:["Button","InfoButton","ToolButton"],decimal:["RelativeTime","Duration","Progress","SelectProgress"].concat(o)},c=a(2);a.d(t,"I",(function(){return s})),a.d(t,"fb",(function(){return u})),a.d(t,"T",(function(){return d})),a.d(t,"m",(function(){return f})),a.d(t,"eb",(function(){return m})),a.d(t,"k",(function(){return p})),a.d(t,"c",(function(){return b})),a.d(t,"s",(function(){return g})),a.d(t,"X",(function(){return v})),a.d(t,"S",(function(){return h})),a.d(t,"lb",(function(){return y})),a.d(t,"gb",(function(){return O})),a.d(t,"U",(function(){return j})),a.d(t,"W",(function(){return w})),a.d(t,"nb",(function(){return x})),a.d(t,"J",(function(){return k})),a.d(t,"K",(function(){return T})),a.d(t,"G",(function(){return S})),a.d(t,"D",(function(){return C})),a.d(t,"C",(function(){return M})),a.d(t,"l",(function(){return E})),a.d(t,"M",(function(){return F})),a.d(t,"V",(function(){return I})),a.d(t,"ib",(function(){return N})),a.d(t,"jb",(function(){return A})),a.d(t,"kb",(function(){return L})),a.d(t,"P",(function(){return W})),a.d(t,"b",(function(){return V})),a.d(t,"cb",(function(){return q})),a.d(t,"db",(function(){return B})),a.d(t,"q",(function(){return P})),a.d(t,"p",(function(){return _})),a.d(t,"Q",(function(){return U})),a.d(t,"i",(function(){return R})),a.d(t,"N",(function(){return D})),a.d(t,"t",(function(){return J})),a.d(t,"mb",(function(){return z})),a.d(t,"Y",(function(){return X})),a.d(t,"u",(function(){return H})),a.d(t,"v",(function(){return Y})),a.d(t,"R",(function(){return Z})),a.d(t,"O",(function(){return G})),a.d(t,"y",(function(){return Q})),a.d(t,"hb",(function(){return $})),a.d(t,"j",(function(){return K})),a.d(t,"n",(function(){return ee})),a.d(t,"g",(function(){return te})),a.d(t,"B",(function(){return ae})),a.d(t,"A",(function(){return ne})),a.d(t,"F",(function(){return re})),a.d(t,"E",(function(){return ie})),a.d(t,"Z",(function(){return oe})),a.d(t,"f",(function(){return le})),a.d(t,"w",(function(){return ce})),a.d(t,"r",(function(){return se})),a.d(t,"a",(function(){return ue})),a.d(t,"o",(function(){return de})),a.d(t,"e",(function(){return fe})),a.d(t,"L",(function(){return me})),a.d(t,"z",(function(){return pe})),a.d(t,"x",(function(){return be})),a.d(t,"ab",(function(){return ge})),a.d(t,"H",(function(){return ve})),a.d(t,"h",(function(){return he})),a.d(t,"d",(function(){return ye})),a.d(t,"bb",(function(){return Oe}));var s=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=Object.assign({},e);return Object(i.f)(Object(r.a)({name:"name",title:"Name",required:!0,readOnly:!0,regex:/^[a-z]/i,regexErrorMessage:"First Letter of the name should always be alphabet",unique:!0,isDisabled:function(e){var t=e.properties,a=(e.metaFieldStore,e.editWidgetType),n=e.modelType;return n===c.h.BASE&&"customField"!==a||!(n!==c.h.CUSTOM||!t||!t.id||"form"!==t.type)},requiredFor:["button","label","panel","string","panel-dashlet","separator","panel-stack","integer","date","time","datetime","decimal","one-to-many","many-to-many","boolean","label","viewer","editor","one-to-one","spacer","long","hilite"]},t))},u=Object(i.f)({name:"type",column:"type_name",title:"Type",required:!0,selection:"json.field.type",readOnly:"true",formatter:function(e,t){if(t.tab)return"panel-tabs";var a=e.indexOf("entity");return-1!==a?e.substring(0,a):e}}),d=Object(i.e)({name:"type",title:"Type",column:"type_name",required:!0,data:["string","integer"],defaultOption:!1,disableClearable:!0,isDisabled:function(e){e.properties,e.metaFieldStore;var t=e.editWidgetType;if(e.modelType===c.h.BASE&&"customField"!==t)return!0}}),f=Object(i.e)({name:"dummyType",title:"Type",data:Object(n.a)(c.b)}),m=Object(i.f)({name:"title",title:"Title",translationView:!1}),p=Object(i.f)({name:"defaultValue",dependModelType:c.h.CUSTOM,title:"Default value"}),b=Object(i.c)({name:"appBuilder",title:"App name",ref:"com.axelor.studio.db.AppBuilder",dependModelType:c.h.CUSTOM}),g=Object(i.f)({name:"help",title:"Help",dependModelType:c.h.CUSTOM}),v=Object(i.b)({name:"sequence",title:"Sequence",dependModelType:c.h.CUSTOM}),h=Object(i.c)({name:"roles",title:"Roles",ref:"com.axelor.auth.db.Role",multiple:!0,dependModelType:c.h.CUSTOM}),y={name:"valueExpr",title:"Value expr",type:"text",dependModelType:c.h.CUSTOM},O=Object(i.a)({name:"updateSelection",dependModelType:c.h.CUSTOM,title:"New selection",uncheckDialog:!0}),j=Object(i.d)({name:"selection",title:"Selection",ref:"com.axelor.meta.db.MetaSelect",valueField:"name",dependModelType:c.h.CUSTOM,requiredWhen:O.name,requiredNegation:!0,isDisabled:function(e,t,a){return e.updateSelection}}),w=Object(i.f)({name:"selectionText",type:"text",depends:"updateSelection",dependValue:!0,dependModelType:c.h.CUSTOM,requiredWhen:O.name,title:"Select options"}),x=Object(i.e)({name:"widget",data:l,title:"Widget",dependModelType:c.h.CUSTOM}),k=Object(i.d)({name:"onChange",ref:"com.axelor.meta.db.MetaAction",dependModelType:c.h.CUSTOM,title:"On change",multiple:!0,canAddNew:!0,commaSeparated:!0}),T=Object(i.d)({title:"On new",name:"onNew",ref:"com.axelor.meta.db.MetaAction",dependModelType:c.h.CUSTOM,multiple:!0,commaSeparated:!0,canAddNew:!0}),S=(Object(i.d)({title:"On load",name:"onLoad",ref:"com.axelor.meta.db.MetaAction",multiple:!0,commaSeparated:!0,canAddNew:!0}),Object(i.d)({name:"onSave",ref:"com.axelor.meta.db.MetaAction",multiple:!0,commaSeparated:!0,title:"On save",canAddNew:!0}),Object(i.b)({name:"minSize",title:"Min",dependModelType:c.h.CUSTOM})),C=Object(i.b)({name:"maxSize",title:"Max",dependModelType:c.h.CUSTOM}),M=Object(i.a)({name:"isJsonRelationalField",title:"Is json relational field",dependModelType:c.h.CUSTOM,getValue:function(e){var t=e.type;if(t&&0===t.indexOf("json"))return!0;return!1},change:function(e,t){var a=t.type;if(!0===e){if(!(0===a.indexOf("json"))){var n="json-".concat(a);return{type:n,serverType:n}}}else if(!1===e){if(0===a.indexOf("json")){var r=a.substring("json-".length);return{type:r,serverType:r}}}return{}}}),E=Object(i.f)({name:"domain",title:"Domain"}),F=Object(i.f)({name:"prompt",title:"Prompt",parentField:"widgetAttrs"}),I=Object(i.f)({name:"selection-in",dependModelType:c.h.BASE,showInCustomField:!1,title:"Selection in"}),N=Object(i.f)({name:"value",title:"Value",dependModelType:c.h.BASE,showInCustomField:!1}),A=Object(i.f)({name:"value:add",title:"Value:add",dependModelType:c.h.BASE,showInCustomField:!1}),L=Object(i.f)({name:"value:del",title:"Value:del",dependModelType:c.h.BASE,showInCustomField:!1}),W=Object(i.a)({name:"refresh",title:"Refresh",dependModelType:c.h.BASE,showInCustomField:!1}),V=Object(i.a)({name:"active",title:"Active",dependModelType:c.h.BASE,showInCustomField:!1,shouldRender:function(e){return e.xPath&&e.xPath.includes("panel-tabs")}}),q=Object(i.c)({name:"targetJsonModel",required:!0,ref:"com.axelor.meta.db.MetaJsonModel",displayField:"title",dependModelType:c.h.CUSTOM,title:"Target json model"}),B=Object(i.d)({name:"targetModel",title:"Target model",required:!0,ref:"com.axelor.meta.db.MetaModel",valueField:"fullName",canAddNew:!1,isDisabled:function(e,t,a){return"customField"!==t&&"field"!==e.serverType&&a!==c.h.CUSTOM}}),P=Object(i.d)({name:"gridView",title:"Grid view",ref:"com.axelor.meta.db.MetaView",valueField:"name",dependModelType:c.h.CUSTOM,needsTargetModel:[c.n.OneToMany,c.n.ManyToMany,c.n.ManyToOne]}),_=Object(i.d)({name:"formView",title:"Form view",ref:"com.axelor.meta.db.MetaView",valueField:"name",dependModelType:c.h.CUSTOM,needsTargetModel:[c.n.OneToMany,c.n.ManyToMany,c.n.ManyToOne]}),U=Object(i.a)({name:"required",title:"Required",defaultValue:"false",isDisabled:function(e){var t=e.properties,a=(e.metaFieldStore,e.editWidgetType);return!(e.modelType!==c.h.BASE||"customField"===a||!t.requiredIf||!t.requiredIf.length)}}),R=Object(i.b)({name:"columnSequence",title:"Column sequence",dependModelType:c.h.CUSTOM}),D=Object(i.a)({name:"readonly",title:"Readonly",isDisabled:function(e){var t=e.properties,a=(e.metaFieldStore,e.editWidgetType);return!(e.modelType!==c.h.BASE||"customField"===a||!t.readonlyIf||!t.readonlyIf.length)}}),J=Object(i.a)({name:"hidden",title:"Hidden",isDisabled:function(e){var t=e.properties;return!(!t.hideIf||!t.hideIf.length)}}),z=Object(i.a)({name:"visibleInGrid",title:"Visible in grid",dependModelType:c.h.CUSTOM}),X=Object(i.f)({name:"showIf",title:"Show if",dependModelType:c.h.CUSTOM}),H=Object(i.f)({name:"hideIf",title:"Hide if",isDisabled:function(e){return!!e.properties.hidden}}),Y=Object(i.f)({name:"if",title:"If",dependModelType:c.h.CUSTOM}),Z=Object(i.f)({name:"requiredIf",title:"Required if",isDisabled:function(e){var t=e.properties,a=(e.metaFieldStore,e.editWidgetType);return!(e.modelType!==c.h.BASE||"customField"===a||!t.required)}}),G=Object(i.f)({name:"readonlyIf",title:"Readonly if",isDisabled:function(e){var t=e.properties,a=(e.metaFieldStore,e.editWidgetType);return!(e.modelType!==c.h.BASE||"customField"===a||!t.readonly)}}),Q=Object(i.f)({name:"includeIf",title:"Include if",dependModelType:c.h.CUSTOM}),$=Object(i.f)({name:"validIf",title:"Valid if",parentField:"widgetAttrs",modelType:c.h.CUSTOM,dependModelType:c.h.CUSTOM}),K=(Object(i.f)({name:"canSave",dependModelType:c.h.CUSTOM,title:"Can save"}),Object(i.f)({name:"css",title:"Css",parentField:"widgetAttrs",modelType:c.h.CUSTOM})),ee=Object(i.a)({name:"editable",title:"Editable",dependModelType:c.h.CUSTOM}),te=Object(i.e)({name:"colSpan",title:"Colspan",parentField:"widgetAttrs",data:[""].concat(Object(n.a)(Array(12).fill().map((function(e,t){return(t+1).toString()})))),modelType:c.h.CUSTOM,dependModelType:c.h.CUSTOM,getOptionLabel:function(e){return e?e.toString():""},isDisabled:function(e){e.properties;var t=e.parentPanel;return!(!t||![c.k.toolbar,c.k.menubar].includes(t.serverType))}}),ae=Object(i.e)({name:"itemSpan",title:"Itemspan",parentField:"widgetAttrs",data:[""].concat(Object(n.a)(Array(12).fill().map((function(e,t){return(t+1).toString()})))),modelType:c.h.CUSTOM,dependModelType:c.h.CUSTOM,getOptionLabel:function(e){return e?e.toString():""},isDisabled:function(e){e.properties;var t=e.parentPanel;return!(!t||![c.k.toolbar,c.k.menubar].includes(t.serverType))}}),ne=Object(i.a)({name:"isGenerateMenu",title:"Generate menu"}),re=Object(i.f)({name:"menuBuilderTitle",title:"Menu title",depends:"isGenerateMenu",dependValue:!0,requiredWhen:ne.name}),ie=Object(i.c)({name:"menuBuilderParent",ref:"com.axelor.meta.db.MetaMenu",title:"Parent",depends:"isGenerateMenu",dependValue:!0,valueField:"id",displayField:"title",shouldFetchInStart:!0,limit:null,getOptionLabel:function(e,t){return function e(t,a){var n=t.title||"";if(t.parent){var r=a.find((function(e){return e.id===t.parent.id}));if(r){var i=e(r,a&&a.filter((function(e){return e.id!==r.id}))||[]);i&&(n="".concat(i," > ").concat(n))}}return n}(e,t)}}),oe=Object(i.a)({name:"showTitle",parentField:"widgetAttrs",defaultValue:!0,modelType:c.h.CUSTOM,dependModelType:c.h.CUSTOM,title:"Show title"}),le=Object(i.a)({name:"canSearch",dependModelType:c.h.CUSTOM,title:"Can search"}),ce=Object(i.f)({name:"if-module",title:"If-module",dependModelType:c.h.CUSTOM}),se=Object(i.f)({name:"height",dependModelType:c.h.CUSTOM}),ue=Object(i.d)({name:"action",title:"Action",ref:"com.axelor.meta.db.MetaAction",requiredFor:["panel-dashlet","item"],dependModelType:c.h.CUSTOM,multiple:!0,commaSeparated:!0,canAddNew:!0}),de=Object(i.f)({name:"field",title:"Field",required:!0,requiredFor:["panel-related"],dependModelType:c.h.CUSTOM}),fe=Object(i.a)({name:"canMove",dependModelType:c.h.CUSTOM,title:"Can move"}),me=Object(i.f)({name:"orderBy",dependModelType:c.h.CUSTOM,title:"Order by"}),pe=Object(i.d)({name:"view",title:"View",ref:"com.axelor.meta.db.MetaView",valueField:"name",requiredFor:["panel-include"],dependModelType:c.h.CUSTOM}),be=Object(i.f)({name:"from",title:"From"}),ge=Object(i.a)({name:"sidebar",title:"Sidebar",parentField:"widgetAttrs",modelType:c.h.CUSTOM,dependModelType:c.h.CUSTOM,showInCustomField:!1}),ve=(Object(i.a)({name:"password",title:"Password"}),Object(i.d)({name:"model",title:"Model",required:!0,ref:"com.axelor.meta.db.MetaModel",valueField:"fullName"})),he=Object(i.e)({name:"color",title:"Color",data:["default","primary","warning","success","danger","info"]}),ye=Object(i.e)({name:"background",title:"Background",data:["default","primary","warning","success","danger","info"]}),Oe=Object(i.a)({name:"strong",title:"Strong",dependModelType:c.h.BASE});Image},190:function(e,t,a){e.exports=a(242)},195:function(e,t,a){},196:function(e,t,a){},2:function(e,t,a){"use strict";a.d(t,"k",(function(){return n})),a.d(t,"g",(function(){return r})),a.d(t,"d",(function(){return i})),a.d(t,"j",(function(){return o})),a.d(t,"e",(function(){return l})),a.d(t,"f",(function(){return c})),a.d(t,"i",(function(){return s})),a.d(t,"n",(function(){return u})),a.d(t,"o",(function(){return d})),a.d(t,"h",(function(){return f})),a.d(t,"c",(function(){return m})),a.d(t,"a",(function(){return p})),a.d(t,"b",(function(){return b})),a.d(t,"l",(function(){return g})),a.d(t,"m",(function(){return v}));var n={panel:"panel",tabs:"panel-tabs",field:"field",dumpField:"dump_field",form:"form",panelStack:"panel-stack",panelDashlet:"panel-dashlet",panelRelated:"panel-related",panelInclude:"panel-include",menu:"menu",menuItem:"item",divider:"divider",menubar:"menubar",toolbar:"toolbar"},r={CONTAINER:"panel",ROOTCONTAINER:"root-container",ITEM:"item",DUMMY:"dummy"},i={string:"string",number:"number",button:"button",spacer:"spacer",boolean:"boolean",separator:"separator",hilite:"hilite"},o={stack:"stack",flow:"flow",grid:"grid",custom:"custom"},l={max:12},c={createWidgets:{tabs:Symbol(),panel:Symbol(),field:Symbol()},form:-1,customForm:-2,dumpField:0},s={colSpan:12,cols:12,id:c.createWidgets.panel,image:"panel.png",items:[],layout:"grid",mappedBy:void 0,model:"com.axelor.meta.db.MetaJsonRecord",modelField:"attrs",relationship:void 0,title:void 0,type:r.CONTAINER,widgetAttrs:JSON.stringify({showTitle:"false",colSpan:12,itemSpan:6})},u={OneToMany:"one-to-many",ManyToMany:"many-to-many",ManyToOne:"many-to-one",OneToOne:"one-to-one"},d={include:n.panelInclude,MANY_TO_MANY:"many-to-many",MANY_TO_ONE:"many-to-one",ONE_TO_ONE:"one-to-one",ONE_TO_MANY:"one-to-many"},f={BASE:"BASE",CUSTOM:"CUSTOM"},m={META:"META"},p={showTitle:!0,readonly:!1,required:!1,hidden:!1,sidebar:!1,canCollapse:!1,stacked:!1,canMove:!1,canSearch:!1,multiline:!1},b=["string","integer","decimal","boolean","datetime","date","time","many-to-one","one-to-many","many-to-many"],g={readonlyIf:"readonly",requiredIf:"required",hideIf:"hidden",collapseIf:"canCollapse"},v=["value:add","value:del","refresh","active"]},202:function(e,t){},204:function(e,t){},23:function(e,t,a){"use strict";a.d(t,"n",(function(){return d})),a.d(t,"o",(function(){return f})),a.d(t,"p",(function(){return g})),a.d(t,"d",(function(){return j})),a.d(t,"s",(function(){return w})),a.d(t,"f",(function(){return k})),a.d(t,"q",(function(){return T})),a.d(t,"k",(function(){return S})),a.d(t,"j",(function(){return M})),a.d(t,"e",(function(){return F})),a.d(t,"i",(function(){return N})),a.d(t,"c",(function(){return L})),a.d(t,"r",(function(){return V})),a.d(t,"a",(function(){return B})),a.d(t,"g",(function(){return _})),a.d(t,"m",(function(){return R})),a.d(t,"t",(function(){return J})),a.d(t,"b",(function(){return X})),a.d(t,"h",(function(){return Y})),a.d(t,"l",(function(){return G}));var n=a(10),r=a(13),i=a.n(r),o=a(4),l=a(24),c=a(2),s=a(27),u=a(5),d=new s.a({model:"com.axelor.meta.db.MetaJsonField"}),f=new s.a({model:"com.axelor.meta.db.MetaJsonModel"}),m=new s.a({model:"com.axelor.apps.base.db.AppBpm"}),p=new s.a({model:"com.axelor.auth.db.User"}),b=new s.a({model:"com.axelor.meta.db.MetaView"}),g=new s.a({model:"com.axelor.meta.db.MetaModel"}),v=new s.a({model:"com.axelor.meta.db.MetaAttrs"}),h=new s.a({model:"com.axelor.meta.db.MetaSelect"}),y=new s.a({model:"com.axelor.studio.db.SelectionBuilder"}),O=new s.a({model:"com.axelor.meta.db.MetaTranslation"});function j(e,t){var a="self.jsonModel = null and self.modelField='".concat(e.name,"' and self.model='").concat(t.fullName,"'");return d.search({data:{_domain:a},sortBy:["sequence"]})}function w(e){return x.apply(this,arguments)}function x(){return(x=Object(l.a)(i.a.mark((function e(t){var a,n,r,l,c,s,u,m;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,f.save(t);case 4:if(a=e.sent,r=(n=a||{}).data,-1!==n.status){e.next=8;break}return e.abrupt("return",a);case 8:return l=r&&r[0]||{},c=l.fields,s=function(e){return e.map((function(e){var t=e.data,a=void 0===t?[]:t;if(a[0])return{id:a[0].id,$version:a[0].version}})).filter((function(e){return e}))},e.next=12,Promise.all(t.fields.map((function(e){var t=c&&c.find((function(t){return t.name===e.name}));return d.save(Object(o.a)(Object(o.a)({},e),{},{id:null===t||void 0===t?void 0:t.id,version:null===t||void 0===t?void 0:t.version}))})));case 12:return u=e.sent,m=s(u),e.abrupt("return",{data:[Object(o.a)(Object(o.a)({},r&&r[0]||{}),{},{fields:m})]});case 15:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function k(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=[];if(e.length){n.push({fieldName:"id",operator:"in",value:e});var r={criteria:n};d.search({data:r,sortBy:["sequence"]}).then((function(e){if(e.data){var n=e.data||[],r=Object(u.h)(n,a);t((function(e){e.items=n.filter((function(e){return"panel"===e.type})).map((function(e){return e.id})),e.widgets=Object(o.a)({},r.widgets),e.items=r.items}))}}))}else t((function(e){e.widgets={"-1":Object(o.a)(Object(o.a)({type:"form"},a),Object(u.k)(a?a.menuBuilder:void 0)),0:{type:"dump_field",name:""}},e.items=[],e.loader=!1}))}function T(e){return f.removeAll([e])}function S(){return C.apply(this,arguments)}function C(){return(C=Object(l.a)(i.a.mark((function e(){var t,a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={data:{_domain:"self.app.code = :code",_domainContext:{code:"bpm"}},fields:["enableAppBuilder"],limit:1,offset:0},e.next=3,m.search(Object(o.a)({},t));case 3:if(a=e.sent,!Array.isArray(a&&a.data)||!a.data[0]){e.next=6;break}return e.abrupt("return",a.data[0].enableAppBuilder);case 6:return e.abrupt("return",!1);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function M(e){return E.apply(this,arguments)}function E(){return(E=Object(l.a)(i.a.mark((function e(t){var a,n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=Object(o.a)({_model:"com.axelor.meta.db.MetaJsonModel",_id:null},t),"action-studio-json-model-method-isgeneratemenu-onchange",n={action:"action-studio-json-model-method-isgeneratemenu-onchange",model:"com.axelor.meta.db.MetaJsonModel",data:{context:a}},e.next=5,f.action(n);case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function F(e){return I.apply(this,arguments)}function I(){return(I=Object(l.a)(i.a.mark((function e(t){var a,n,r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f.fetch(t);case 2:return a=e.sent,n=a.data,r=void 0===n?[]:n,e.abrupt("return",r[0]);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function N(e){return A.apply(this,arguments)}function A(){return(A=Object(l.a)(i.a.mark((function e(t){var a,n,r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={operator:"and",criteria:[{fieldName:"name",operator:"=",value:"".concat(t.name)}]},e.next=3,b.search({data:a});case 3:return(n=e.sent).data&&(r=u.g.getViews(n.data,t.name)),e.abrupt("return",r);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function L(e){return W.apply(this,arguments)}function W(){return(W=Object(l.a)(i.a.mark((function e(t){var a,r,o,l,s,u,d;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.model,r=t.view,o=[{fieldName:"model",operator:"=",value:a},{fieldName:"view",operator:"=",value:r}],e.next=4,v.search({data:{criteria:o},limit:null});case 4:if(!(l=e.sent).data||!Array.isArray(l.data)){e.next=10;break}return s=Object.keys(c.l),u=Object.values(c.l),d=Object(n.a)(l.data).map((function(e){return u.includes(e.name)?e.value.startsWith('"')&&e.value.endsWith('"')?(e.value=e.value.replace('"',""),e.value=e.value.replace('"',"")):["true","false"].includes(e.value)||(e.name=s[u.indexOf(e.name)]):(e.value=e.value.replace('"',""),e.value=e.value.replace('"',"")),e})),e.abrupt("return",d);case 10:return e.abrupt("return",[]);case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function V(e){return q.apply(this,arguments)}function q(){return(q=Object(l.a)(i.a.mark((function e(t){var a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.saveAll(Object(n.a)(t));case 2:if(!(a=e.sent).data||!Array.isArray(a.data)){e.next=5;break}return e.abrupt("return",a.data);case 5:return e.abrupt("return",[]);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function B(e){return P.apply(this,arguments)}function P(){return(P=Object(l.a)(i.a.mark((function e(t){var a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.removeAll(t);case 2:if(!(a=e.sent).data||!Array.isArray(a.data)){e.next=5;break}return e.abrupt("return",a.data);case 5:return e.abrupt("return",[]);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function _(){return U.apply(this,arguments)}function U(){return(U=Object(l.a)(i.a.mark((function e(){var t,a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=[{fieldName:"name",operator:"=",value:"select.language"}],e.next=3,h.search({data:{criteria:t},fields:["items.value","items.title"]});case 3:if(!((a=e.sent)&&a.data&&Array.isArray(a.data))){e.next=6;break}return e.abrupt("return",a.data.map((function(e){return{title:e["items.title"],value:e["items.value"]}})));case 6:return e.abrupt("return",[]);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function R(e){return D.apply(this,arguments)}function D(){return(D=Object(l.a)(i.a.mark((function e(t){var a,n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=[{fieldName:"key",operator:"in",value:t}],e.next=3,O.search({data:{criteria:a}});case 3:if(!(n=e.sent).data||!Array.isArray(n.data)){e.next=6;break}return e.abrupt("return",n.data);case 6:return e.abrupt("return",[]);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function J(e){return z.apply(this,arguments)}function z(){return(z=Object(l.a)(i.a.mark((function e(t){var a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O.saveAll(Object(n.a)(t));case 2:if(!(a=e.sent).data||!Array.isArray(a.data)){e.next=5;break}return e.abrupt("return",a.data);case 5:return e.abrupt("return",[]);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function X(e){return H.apply(this,arguments)}function H(){return(H=Object(l.a)(i.a.mark((function e(t){var a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O.removeAll(t);case 2:if(!(a=e.sent).data||!Array.isArray(a.data)){e.next=5;break}return e.abrupt("return",a.data);case 5:return e.abrupt("return",[]);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Y(){return Z.apply(this,arguments)}function Z(){return(Z=Object(l.a)(i.a.mark((function e(){var t,a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p.info();case 2:if(!(t=e.sent)||!t["user.id"]){e.next=9;break}return e.next=6,p.fetch(t["user.id"]);case 6:if(!((a=e.sent)&&a.data&&a.data[0])){e.next=9;break}return e.abrupt("return",a.data[0]);case 9:return e.abrupt("return",null);case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function G(e){return Q.apply(this,arguments)}function Q(){return(Q=Object(l.a)(i.a.mark((function e(t){var a,n,r,l,c,s,u;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a="",!t){e.next=9;break}return n={metaSelect:Object(o.a)({},t)},r={data:{context:n},action:"action-selection-builder-method-fill-selection-text",model:"com.axelor.studio.db.SelectionBuilder"},e.next=6,y.action(r);case 6:l=e.sent,c=l.data,(s=void 0===c?[]:c)[0]&&(u=s[0].values||{}).selectionText&&(a=u.selectionText);case 9:return e.abrupt("return",a);case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},242:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),i=a(26),o=a.n(i),l=(a(195),a(196),a(10)),c=a(40),s=a(288),u=a(287),d=a(285),f=a(170),m=a(307),p=a(306),b=a(171),g=a(15),v=a(289),h=a(309),y=a(304),O=a(302),j=a(303),w=a(20),x=a.n(w),k=a(67),T=a(86),S=a(244),C=a(5),M=Object(d.a)({fieldsContainer:{display:"flex",justifyContent:"center",alignItems:"center",background:"#e7eaec",borderRadius:5},fieldImage:{display:"flex",justifyContent:"center",alignItems:"center",padding:15},fieldLabel:{fontWeight:"600"},icon:{width:20,height:20,backgroundRepeat:"no-repeat",backgroundSize:"contain",backgroundPosition:"center",position:"absolute"},gridContainer:{display:"flex",alignItems:"center",flexWrap:"nowrap"},labelContainer:{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",display:"flex",alignItems:"center"}}),E=function(e){var t=e.serverType||e.type;return t&&-1!==t.indexOf("datetime")?"datetime.png":t&&-1!==t.indexOf("date")?"date.png":t&&-1!==t.indexOf("time")?"time.png":t&&-1!==t.indexOf("decimal")?"decimal.png":e.image?e.image:"".concat(t,".png")};var F=function(e){var t=M(),a=e.attrs,n=e.targetName;return r.a.createElement("div",{className:t.fieldsContainer},r.a.createElement(S.a,{arrow:!0,title:Object(C.r)(a.title||a[n]||a.name),placement:"top"},r.a.createElement(u.a,{container:!0,className:t.gridContainer},r.a.createElement(u.a,{xs:4,item:!0,className:t.fieldImage},r.a.createElement("div",{className:t.icon,style:{backgroundImage:"url(./images/".concat(E(a),")")}})),r.a.createElement(u.a,{xs:8,item:!0,className:t.labelContainer},r.a.createElement(k.a,{variant:"caption",className:t.fieldLabel},Object(C.r)(Object(C.b)(a.title||a[n]||a.name)))))))},I=a(81),N=Object(d.a)((function(e){return{field:Object(g.a)({width:"calc(50% - 10px)",padding:5},e.breakpoints.down("sm"),{width:"100%"})}}));function A(e){var t=N();return r.a.createElement("div",Object.assign({},e,{className:x()(t.field,e.className)}))}var L=a(31),W=a(2),V=Object(d.a)({container:{padding:"0 10px",display:"flex",flexWrap:"wrap",alignItems:"center",justifyContent:"space-between"},fieldGroupTitle:{padding:"25px 25px 0px 25px",color:"white"}}),q=r.a.memo((function(){var e=V(),t=Object(L.b)().state,a=[].concat(Object(l.a)(T.a),Object(l.a)(T.b)).filter((function(e){return"Menu"!==e.name||t.modelType!==W.h.CUSTOM}));return r.a.createElement(r.a.Fragment,null,a.map((function(a,n){return r.a.createElement(r.a.Fragment,{key:n},r.a.createElement(k.a,{variant:"body1",className:e.fieldGroupTitle},Object(C.r)(a.name)),r.a.createElement(u.a,{className:e.container},a.value&&a.value.map((function(e,a){return e.editorType&&!e.editorType.includes(t.modelType)?null:function(e){return![W.k.menubar,W.k.toolbar].includes(e.type)||!t.widgets||-1===Object.values(t.widgets).findIndex((function(t){return t.type===e.type}))}(e)?r.a.createElement(A,{key:a},r.a.createElement(I.default,{id:e.id,attrs:e,design:!0,component:F,isCoreField:!0,isPalleteField:!0})):null}))))})))})),B=a(13),P=a.n(B),_=a(24),U=a(4),R=a(16),D=a(21),J=a(308),z=a(293),X=a(301),H=a(315),Y=a(310),Z=a(78),G=a(299),Q=a(28),$=a.n(Q),K=a(27);function ee(e,t){var a=r.a.useRef(!1);r.a.useEffect((function(){if(a.current){var n=setTimeout((function(){return e()}),t);return function(){return clearTimeout(n)}}a.current=!0}),[e,t])}var te=a(298),ae=a(292),ne=a(165),re=a.n(ne),ie=a(166),oe=a.n(ie),le=a(314),ce=a(297),se=a(291),ue=a(290),de=a(294),fe=a(295),me=a(296),pe=Object(d.a)((function(e){return{root:{width:"100%",backgroundColor:e.palette.background.paper,maxHeight:300,overflow:"auto"},input:{width:"80%",marginRight:10},titleHeader:{borderBottom:"0.5px solid #ddd"},listItem:{borderBottom:"1px solid #ddd",paddingTop:10,paddingBottom:10},closeText:{textTransform:"capitalize"}}}));function be(e){var t=e.list,a=void 0===t?[]:t,n=e.onChange,i=e.handleClose,o=e.offset,l=e.total,d=e.displayField,f=e.getOptionLabel,m=Object(c.a)(),p=pe(),b=Object(s.a)(m.breakpoints.down("sm")),g=r.a.useCallback((function(e){n(e),i()}),[n,i]),v=o+a.length<l,h=o>0,y=function(e){return f?f(e):e[d||"name"]};return r.a.createElement("div",null,r.a.createElement(le.a,{fullScreen:b,maxWidth:"sm",fullWidth:!0,open:e.open,onClose:e.handleClose,"aria-labelledby":"responsive-dialog-title"},r.a.createElement(ue.a,{id:"responsive-dialog-title",className:p.titleHeader},"Search ".concat(e.title||"item")),r.a.createElement(se.a,null,r.a.createElement(u.a,{container:!0},r.a.createElement(ae.a,{className:p.input,value:e.searchText,onChange:function(t){return e.setSearchText(t.target.value)}}),r.a.createElement(z.a,{onClick:e.onPrevious,disabled:!h},r.a.createElement(re.a,null)),r.a.createElement(z.a,{onClick:e.onNext,disabled:!v},r.a.createElement(oe.a,null))),r.a.createElement(de.a,{className:p.root},a.map((function(e,t){return r.a.createElement(fe.a,{className:p.listItem,key:t,role:void 0,dense:!0,button:!0,onClick:function(){return g(e)}},r.a.createElement(me.a,{id:t,primary:y(e)}))})))),r.a.createElement(ce.a,null,r.a.createElement(te.a,{autoFocus:!0,onClick:e.handleClose,color:"primary"},r.a.createElement(k.a,{className:p.closeText},"Close")))))}var ge=Object(G.a)(),ve=Object(d.a)({autoComplete:{backgroundColor:"#293846",marginTop:15,".modern-dark &":{backgroundColor:"#323232"}},label:{color:"#e7eaec !important",fontSize:12},popperAutoComplete:{"& ul, .MuiAutocomplete-noOptions":{backgroundColor:"rgb(41, 56, 70) !important",".modern-dark &":{backgroundColor:"#1b1b1b !important"}},"& li, .MuiAutocomplete-noOptions":{color:"#e7eaec !important",backgroundColor:"rgb(41, 56, 70) !important",".modern-dark &":{backgroundColor:"#1b1b1b !important"}},"& li:hover, .MuiAutocomplete-noOptions":{color:"#e7eaec !important",backgroundColor:"#2f4050 !important",".modern-dark &":{backgroundColor:"#323232 !important"}}},input:{color:"#e7eaec",fontSize:13},root:{color:"#e7eaec"},error:{color:"red",marginBottom:5,fontSize:13},option:{fontSize:13},disabled:{color:"#a3a3a3 !important",fontSize:12}});function he(e){var t=e.field,a=t.name,i=t.ref,o=t.title,c=t.valueField,s=void 0===c?"id":c,u=t.type,d=t.multiple,f=void 0!==d&&d,m=t.commaSeparated,p=t.displayField,b=void 0===p?"name":p,v=t.limit,h=void 0===v?10:v,y=t.data,O=void 0===y?[]:y,j=t.isDisabled,w=t.needsTargetModel,x=t.canAddNew,T=void 0!==x&&x,S=t.getOptionLabel,M=t.shouldFetchInStart,E=void 0!==M&&M,F=e.props,I=e.error,N=F.propertyList,A=F.setPropertyList,L=F.onChange,W=F.editWidgetType,V=F.modelType,q=N[a]||"";if(m&&"select"===u){var B=q?q.split(","):[];q=B.map((function(e){return Object(g.a)({},s,e)}))}var P=Object(n.useState)(Object(l.a)(O)),_=Object(D.a)(P,2),R=_[0],z=_[1],X=Object(n.useState)(""),H=Object(D.a)(X,2),Z=H[0],G=H[1],Q=r.a.useRef(!0),te=Object(n.useState)(!1),ae=Object(D.a)(te,2),ne=ae[0],re=ae[1],ie=Object(n.useState)(0),oe=Object(D.a)(ie,2),le=oe[0],ce=oe[1],se=Object(n.useState)(0),ue=Object(D.a)(se,2),de=ue[0],fe=ue[1],me=Object(n.useState)(!1),pe=Object(D.a)(me,2),he=pe[0],ye=pe[1],Oe=N.targetModel,je=ve(),we=!!j&&j(N,W,V),xe=Object(n.useCallback)((function(e,t,a){"reset"!==a&&G("objectSelection"===u&&"object"===typeof t?t[b]:t)}),[u,b]),ke=Object(n.useCallback)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return m?e?e.map((function(e){return e.name})).join(","):"":i?e[s]:e}),[s,m,i]),Te=Object(n.useCallback)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=[];if(e&&n.push({fieldName:"name",operator:"like",value:e}),"gridView"!==a&&"formView"!==a||!w.includes(F.type)||Oe){"gridView"===a&&(w.includes(F.type)&&n.push({fieldName:"model",operator:"=",value:Oe}),n.push({fieldName:"type",operator:"=",value:"grid"})),"formView"===a&&(w.includes(F.type)&&n.push({fieldName:"model",operator:"=",value:Oe}),n.push({fieldName:"type",operator:"=",value:"form"}));var r={criteria:n,operator:"and"},o=["name","fullName",s,b,"parent"].filter((function(e){return e}));return E&&he?void 0:new K.a({model:i}).search({fields:o,data:r,limit:h,offset:t}).then((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.data,a=e.total;if(ye(!0),t&&t.length&&Q.current){!ne&&a>h&&t.push({name:Object(C.r)("Show more..."),id:"studio_show_More_View"}),fe(a);var n=$.a.uniqBy(t,b);z(n)}}))}}),[a,i,Oe,s,b,h,w,F.type,ne,he,E]),Se=r.a.useCallback((function(){i&&Te(Z)}),[Te,Z,i]),Ce=r.a.useCallback((function(e){return e&&"string"===typeof e&&i&&(e=Object(g.a)({},s,e)),e}),[i,s]),Me=r.a.useCallback((function(e){G(e),ce(0)}),[]),Ee=r.a.useCallback((function(){var e=le+h;e<=de&&(ce(e),Te(Z,e))}),[h,de,le,Te,Z]),Fe=r.a.useCallback((function(){var e=le-h;ce(e=e>0?e:0),Te(Z,e)}),[le,h,Z,Te]),Ie=r.a.useCallback((function(){re(!1),ce(0)}),[]),Ne=r.a.useCallback((function(e,t){var n;if("studio_show_More_View"!==(null===(n=t)||void 0===n?void 0:n.id)){if(f){if(Me(""),e.fromDialog)t=[].concat(Object(l.a)(q),[t]);else-1!==t.findIndex((function(e){return"studio_show_More_View"===(null===e||void 0===e?void 0:e.id)}))&&re(!0);t=t.map((function(e){if("studio_show_More_View"!==(null===e||void 0===e?void 0:e.id))return Ce(e)})).filter((function(e){return e}))}else t&&t.inputValue&&t.inputValue.length&&i&&(t[s]=t.inputValue);var r=Object(U.a)(Object(U.a)({},N),{},Object(g.a)({},a,"objectSelection"===u?t:t&&ke(t))),o={};if("targetModel"===a){var c=(r||{}).targetModel;o={gridView:t?Object(C.j)(c):null,formView:t?Object(C.j)(c,!0):null}}A(Object(U.a)(Object(U.a)({},r||{}),o)),L(Object(U.a)(Object(U.a)({},r||{}),o),"selection"!==a?a:void 0)}else re(!0)}),[ke,f,a,L,A,N,q,u,i,Ce,s,Me]);return ee(Se,500),Object(n.useEffect)((function(){return Q.current=!0,Te(),function(){Q.current=!1}}),[Te]),Object(n.useEffect)((function(){f||G("object"===typeof q?q[b]:q)}),[f,q,b,u]),r.a.createElement(r.a.Fragment,null,r.a.createElement(Y.a,{classes:{inputFocused:we?je.disabled:je.input,clearIndicator:je.input,popupIndicator:we?je.disabled:je.input,popper:je.popperAutoComplete,option:je.option,noOptions:je.option},className:je.autoComplete,disabled:we,multiple:f,options:R,forcePopupIcon:!0,freeSolo:"objectSelection"!==u,value:f?q||[]:function(e){return"string"===typeof e&&i?Object(g.a)({},s,e):e}(q),inputValue:Z||"",size:"small",onInputChange:xe,filterOptions:function(e,t){var a=ge(e,t);""!==Z&&T&&a.splice(0,0,{inputValue:Z,name:Z,title:'Add "'.concat(Z,'"'),type:"canAddNew"});var n=e.find((function(e){return"studio_show_More_View"===e.id}));n&&!["",null,void 0].includes(t.inputValue)&&(!(-1!==a.findIndex((function(e){return"studio_show_More_View"===e.id})))&&a.push(Object(U.a)({},n)));return a},onChange:Ne,renderInput:function(e){return r.a.createElement(J.a,Object.assign({},e,{autoComplete:"off",variant:"outlined",label:Object(C.r)(Object(C.b)(o||a)),InputLabelProps:{className:we?je.disabled:je.label}}))},getOptionLabel:function(e){return S?S(e,R):"canAddNew"===e.type?e.title:"string"===typeof e?e:e[b]||""}}),I&&r.a.createElement(k.a,{className:je.error},I),ne&&r.a.createElement(be,{searchText:Z,list:R,total:de,offset:le,displayField:b,open:ne,onNext:Ee,onPrevious:Fe,handleClose:Ie,setSearchText:Me,title:Object(C.r)(Object(C.b)(o||a)),onChange:function(e){return Ne({fromDialog:!0},e)}}))}var ye=a(1),Oe=["keyValue"],je=Object(d.a)({container:{marginBottom:15},row:{display:"flex"},languageText:{width:"15%",marginTop:8,textTransform:"capitalize",textAlign:"center"}});var we=function(e){var t=je(),a=Object(L.b)(),n=a.state,i=a.update,o=e.keyValue,c=Object(R.a)(e,Oe),s=n.translationList,u=r.a.useState([]),d=Object(D.a)(u,2),f=d[0],m=d[1],p=r.a.useCallback((function(e){var t=e.key,a=e.message,n=e.language;m((function(e){var r=Object(l.a)(e),i=r.findIndex((function(e){return e.key===t&&e.language===n}));return-1!==i?r[i]=Object(U.a)(Object(U.a)({},r[i]),{},{message:a}):r.push({key:t,message:a,language:n}),Object(l.a)(r)}))}),[]),b=r.a.useCallback((function(e){var t=e.key,a=e.message,n=e.language;i((function(e){var r=e.translationList.findIndex((function(e){return e.key===t&&e.language===n}));-1!==r?e.translationList[r].message=a:e.translationList.push({key:t,message:a,language:n})}))}),[i]);return r.a.useEffect((function(){m(Object(l.a)(s))}),[s]),r.a.createElement("div",{className:t.container},n.languageList.map((function(e,a){var n;return r.a.createElement("div",{key:a,className:t.row},r.a.createElement(k.a,{classes:{root:t.languageText}},e.value),r.a.createElement(J.a,Object.assign({variant:"outlined"},c,{value:(null===(n=f.find((function(t){return t.key===o&&t.language===e.value})))||void 0===n?void 0:n.message)||"",onChange:function(t){return p({key:o,message:t.target.value,language:e.value})},onBlur:function(t){return t.target.value&&b({key:o,message:t.target.value,language:e.value})}})))})))},xe=a(168),ke=a.n(xe),Te=a(167),Se=a.n(Te),Ce=a(169),Me=a.n(Ce),Ee=a(23),Fe=a(300),Ie=Object(d.a)({paper:{minWidth:300}});function Ne(e){var t=e.onOk,a=e.onClose,n=e.open,i=e.message,o=e.title,l=void 0===o?"Delete Confirmation":o,c=Ie();return r.a.createElement(le.a,{open:n,onClose:a,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",classes:{paper:c.paper}},r.a.createElement(ue.a,{id:"alert-dialog-title"},Object(C.r)(l)),r.a.createElement(se.a,null,r.a.createElement(Fe.a,{id:"alert-dialog-description"},Object(C.r)(i))),r.a.createElement(ce.a,null,r.a.createElement(te.a,{onClick:t,color:"primary"},Object(C.r)("Yes")),r.a.createElement(te.a,{onClick:a,color:"primary",autoFocus:!0},Object(C.r)("No"))))}var Ae=["title","name","type","required","readOnly","max","min","parentField","translationView"],Le=["name","title","parentField","defaultValue","uncheckDialog"],We=["name","required","data","helper","title","color","disableClearable","parentField","parentPanel","getOptionLabel"],Ve=["children"],qe=Object(d.a)({input:{backgroundColor:"#293846",marginTop:15,".modern-dark &":{backgroundColor:"#323232"}},translationInput:{paddingTop:10,paddingBottom:10},translationInputView:{backgroundColor:"#293846",marginBottom:5,".modern-dark &":{backgroundColor:"#323232"}},label:{color:"#f7f7f7",fontSize:12,"&#outlined-basic-label":{color:"#f7f7f7"},"&.MuiInputLabel-shrink":{top:"1px !important"}},outlinedRoot:{color:"#ffffff","&:hover $notchedOutline":{borderColor:"#ffffff"},"&$focused $notchedOutline":{borderColor:"white",borderWidth:1}},notchedOutline:{},focused:{color:"#ffffff"},switchBase:{"&$checked":{color:"#ffffff"},"&$checked + $track":{backgroundColor:"#ffffff"}},checked:{},track:{},selection:{color:"#ffffff",backgroundColor:"#293846",".modern-dark &":{backgroundColor:"#323232"}},iconOutlined:{color:"#ffffff"},panelTitle:{color:"white",fontWeight:"600"},panelMargin:{margin:"25px 0px 0px 0px"},disableInput:{color:"#a3a3a3 !important"},unique:{color:"#0275d8"},required:{color:"red"},translateButton:{color:"#ffffff",padding:"10px 12px","& > span > svg":{fontSize:"1.1rem"}},staticSelectMenuItem:{color:"#ffffff",backgroundColor:"rgb(41, 56, 70) !important","&:hover":{backgroundColor:"#293846 !important"}},autoComplete:{width:"100%",marginTop:15,backgroundColor:"#293846","& > div > label":{color:"#ffffff !important",fontSize:13},".modern-dark &":{backgroundColor:"#323232"}},autoCompleteInput:{color:"#ffffff",fontSize:13},autoCompleteOption:{fontSize:13,"& ul, .MuiAutocomplete-noOptions":{backgroundColor:"rgb(41, 56, 70) !important",".modern-dark &":{backgroundColor:"#1b1b1b !important"}},"& li, .MuiAutocomplete-noOptions":{color:"#ffffff !important",backgroundColor:"rgb(41, 56, 70) !important",".modern-dark &":{backgroundColor:"#1b1b1b !important"}},"& li:hover, .MuiAutocomplete-noOptions":{color:"#ffffff !important",backgroundColor:"#2f4050 !important",".modern-dark &":{backgroundColor:"#323232 !important"}}},textFieldInput:{fontSize:13},booleanInputLabel:{fontSize:12},disabled:{color:"#a3a3a3 !important",fontSize:12}}),Be=r.a.createContext();var Pe=function(e){return e.includes("studio:")};function _e(e){var t=e.index,a=e.multiline,n=void 0!==a&&a,i=e.error,o=e.parentPanel,l=e.onTranslationRemove,c=e.clearable,s=void 0!==c&&c,u=qe(),d=r.a.useState(!1),f=Object(D.a)(d,2),m=f[0],p=f[1],b=e.field,g=b.title,v=b.name,h=b.type,y=(b.required,b.readOnly),O=b.max,j=b.min,w=b.parentField,x=b.translationView,k=Object(R.a)(b,Ae),T=r.a.useContext(Be),S=T.propertyList,M=T.setPropertyList,E=T.onChange,F=T.modelType,I=T.metaFieldStore,N=T.editWidgetType,A=function(e,t){var a=qe();return r.a.createElement("span",null,r.a.createElement("span",null,e),t.unique&&r.a.createElement("span",{className:a.unique}," (unique) "),t.required&&r.a.createElement("span",{className:a.required}," * "))}(Object(C.r)(Object(C.b)(g||v)),e.field),L=Object(C.r)(Object(C.b)(g||v));"showIf"===v||"requiredIf"===v?L="id == 1":"hideIf"===v?L="id == null":"readOnlyIf"===v&&(L="id != null");var V=S[v]||"";if((F===k.modelType||"customField"===T.editWidgetType)&&w){var q=S[w]?JSON.parse(S[w]):{};V=q[v]||""}k.formatter&&(V=k.formatter(V,S));var B=Boolean(y);k.isDisabled&&(B=k.isDisabled({properties:S,metaFieldStore:I,editWidgetType:N,modelType:F,parentPanel:o}));var P=r.a.useCallback((function(){if(!Pe(V)){var e=Object(C.i)({name:v,fieldName:S[v]||h});E(Object(U.a)(Object(U.a)({},S||{}),Object(C.l)(v,e,w,S[w],!(F===k.modelType)||"customField"===N)),v)}}),[S,v,h,V,E,k.modelType,F,w,N]),_=r.a.useCallback((function(){p(!1),E(Object(U.a)(Object(U.a)({},S||{}),Object(C.l)(v,"",w,S[w],!(F===k.modelType))),v),l(V)}),[l,V,v,w,F,E,S,k.modelType]),X=r.a.useCallback((function(){p(!0)}),[]),H=r.a.useCallback((function(){p(!1)}),[]);return r.a.createElement(r.a.Fragment,null,r.a.createElement(J.a,{error:Boolean(i),helperText:i,InputLabelProps:{className:B?u.disabled:u.label},size:"small",InputProps:{classes:{root:u&&B?"":u.outlinedRoot,notchedOutline:u&&u.notchedOutline,focused:u&&u.focused,disabled:u&&u.disableInput,input:u&&u.textFieldInput},endAdornment:x?Pe(V)?r.a.createElement(z.a,{className:u.translateButton,onClick:X},r.a.createElement(Se.a,null)):r.a.createElement(z.a,{className:u.translateButton,onClick:P},r.a.createElement(ke.a,null)):s?r.a.createElement(z.a,{className:u.translateButton,onClick:function(){var e="",t=!0;k.modelType===W.h.BASE&&"customField"!==T.editWidgetType&&(t=""!==e||void 0!==S[v]),k.modelType===W.h.CUSTOM&&"customField"===T.editWidgetType&&(e=e||null),t&&E(Object(U.a)(Object(U.a)({},S||{}),Object(C.l)(v,e,w,S[w],!(F===k.modelType)||"customField"===N)),v)}},r.a.createElement(Me.a,null)):null},inputProps:{min:j,max:O},key:t,className:u&&u.input,id:"outlined-basic",multiline:n,type:"integer"===h?"number":h,label:A,placeholder:L,variant:"outlined",disabled:B||x&&Pe(V),value:V,minRows:3,autoComplete:"off",onChange:function(e){if("integer"!==h||!isNaN(Number(e.target.value))){if(j&&O){var t=Number(e.target.value);if(t<j||t>O)return}var a=e.target.value;M(Object(U.a)(Object(U.a)({},S||{}),Object(C.l)(v,a,w,S[w],!(F!==k.modelType)||"customField"===N)))}},onBlur:function(e){if("integer"!==h||!isNaN(Number(e.target.value))){if(j&&O){var t=Number(e.target.value);if(t<j||t>O)return}var a,n=e.target.value,r=!0;if(k.modelType===W.h.BASE&&"customField"!==T.editWidgetType&&(r=""!==n||void 0!==S[v]),k.modelType===W.h.CUSTOM&&"customField"===T.editWidgetType&&(n=n||null),r)E(Object(U.a)(Object(U.a)({},S||{}),Object(C.l)(v,!n||"name"!==v&&""!==(null===(a=n)||void 0===a?void 0:a.trim())?n:n.trim(),w,S[w],!(F===k.modelType)||"customField"===N)),v)}}}),x&&Pe(V)&&r.a.createElement(we,{InputProps:{classes:{root:u&&u.outlinedRoot,notchedOutline:u&&u.notchedOutline,focused:u&&u.focused,disabled:u&&u.disableInput,input:u&&u.translationInput}},InputLabelProps:{className:B?u.disabled:u.label},className:u&&u.translationInputView,keyValue:V}),m&&r.a.createElement(Ne,{open:m,message:"Are you sure, do you want to delete translations?",onClose:H,onOk:_}))}function Ue(e){var t=Object(n.useState)(!1),a=Object(D.a)(t,2),i=a[0],o=a[1],l=e.index,c=e.field,s=c.name,u=c.title,d=c.parentField,f=c.defaultValue,m=c.uncheckDialog,p=Object(R.a)(c,Le),b=r.a.useContext(Be),g=b.propertyList,v=b.setPropertyList,h=b.onChange,y=b.modelType,O=b.editWidgetType,j=b.metaFieldStore,w=Object(C.m)(g,s,d,f,!(y!==p.modelType)||"customField"===O),x=Boolean(w?!("false"===w):w),k=qe();p.getValue&&(x=p.getValue(g));var T=!1;p.isDisabled&&(T=p.isDisabled({properties:g,metaFieldStore:j,editWidgetType:O,modelType:y})),u=Object(C.r)(Object(C.b)(u||s));var S=function(){m&&o(!1),v(Object(U.a)(Object(U.a)(Object(U.a)({},g),p.change?p.change(!x,g):{}),Object(C.l)(s,!x,d,g[d],!(y!==p.modelType)||"customField"===O))),h(Object(U.a)(Object(U.a)(Object(U.a)({},g),p.change?p.change(!x,g):{}),Object(C.l)(s,!x,d,g[d],!(y!==p.modelType)||"customField"===O)),s)};return r.a.createElement(r.a.Fragment,null,r.a.createElement(X.a,{style:{marginTop:15},key:l,classes:{label:k&&k.booleanInputLabel,disabled:k.disabled},control:r.a.createElement(H.a,{classes:{switchBase:k&&k.switchBase,track:k&&k.track,checked:k&&k.checked},checked:x,disabled:T,onChange:function(){m&&x&&g&&g.selectionText?o(!0):S()},value:g[s]}),label:Object(C.r)(Object(C.b)(u||s))}),i&&r.a.createElement(Ne,{open:i,message:"Are you sure?",onClose:function(){return o(!1)},onOk:S,title:"Confirm"}))}function Re(e){var t=e.index,a=e.field,n=a.name,i=(a.required,a.data),o=(a.helper,a.title),l=a.color,c=a.disableClearable,s=void 0!==c&&c,u=a.parentField,d=(a.parentPanel,a.getOptionLabel),f=Object(R.a)(a,We),m=r.a.useContext(Be),p=m.propertyList,b=m.setPropertyList,g=m.type,v=m.onChange,h=m.modelType,y=m.metaFieldStore,O=m.editWidgetType,j=qe();"object"!==typeof i||Array.isArray(i)||(i=i[(W.o[g]||g).toLowerCase()]||[]),o=Object(C.r)(Object(C.b)(o||n));var w=function(e){var t=e.color;return r.a.createElement("div",{style:{width:15,height:15,backgroundColor:t}})},x=p[n]||"";h!==f.modelType&&"customField"!==m.editWidgetType||!u||(x=(p[u]?JSON.parse(p[u]):{})[n]||"");var k=!1;return f.isDisabled&&(k=f.isDisabled({properties:p,metaFieldStore:y,editWidgetType:O,modelType:h})),r.a.createElement(Y.a,{options:i,classes:{root:j.selection,inputFocused:k?j.disabled:j.autoCompleteInput,clearIndicator:j.autoCompleteInput,popupIndicator:k?j.disabled:j.autoCompleteInput,option:j.autoCompleteOption,groupLabel:j.autoCompleteOption,popper:j.autoCompleteOption,noOptions:j.autoCompleteOption},disableClearable:s,size:"small",className:j.autoComplete,autoHighlight:!0,disabled:k,onChange:function(e,t){var a=Object(U.a)(Object(U.a)({},p),Object(C.l)(n,t,u,p[u],h===f.modelType||"customField"===m.editWidgetType));"colSpan"===n&&(a.colSpan=t),b(a),v(a,n)},getOptionLabel:function(e){return d?d(e):"object"===typeof e?e.text:e},renderOption:function(e){return"object"===typeof e?r.a.createElement("div",{key:t,value:e.value},r.a.createElement("i",{className:"fa ".concat(e),style:{marginRight:4}}),Object(C.r)(e.text)):r.a.createElement("div",{key:t,value:e},l&&r.a.createElement(w,{color:e}),r.a.createElement("i",{className:"fa ".concat(e),style:{marginRight:4}}),r.a.createElement("span",null,Object(C.r)(e)))},value:x,renderInput:function(e){return r.a.createElement(J.a,Object.assign({},e,{label:Object(C.r)(Object(C.b)(o||n)),variant:"outlined",classes:{root:j.selection},autoComplete:"off",inputProps:Object(U.a)(Object(U.a)({},e.inputProps),{},{autoComplete:"new-password"})}))}})}function De(){var e=r.a.useContext(Be),t=e.elements,a=e.id,n=e.propertyList,i=e.enableAppBuilder,o=e.modelType,l=e.editWidgetType,c=e.errors,s=e.entityType,u=e.actualType,d=e.parentPanel,f=e.onTranslationRemove;return r.a.createElement(r.a.Fragment,null,t.map((function(t,m){if(!1===function(e,t){if(e.depends){var a=t[e.depends];return e.dependValue===a}}(t,n))return null;if(!function(e,t,a,n){return(!e.dependModelType||e.dependModelType===t||"customField"===a)&&(("customField"!==a||!1!==e.showInCustomField)&&!(e.shouldRender&&!e.shouldRender(n)))}(t,o,l,n))return null;if("appBuilder"===t.name&&!i)return null;if([u,s].includes(W.c.META)&&"packageName"===t.name)return null;var p="".concat(m,"_").concat(a);switch(t.type){case"string":return r.a.createElement(_e,{field:t,key:p,index:p,multiline:!1,error:c[t.name],onTranslationRemove:f});case"integer":return r.a.createElement(_e,{field:t,key:p,index:p,multiline:!1,error:c[t.name],parentPanel:d,clearable:!0});case"boolean":return r.a.createElement(Ue,{field:t,key:p,index:p,error:c[t.name]});case"select":case"objectSelection":return r.a.createElement(he,{field:t,key:p,index:p,props:e,error:c[t.name]});case"staticSelect":return r.a.createElement(Re,{field:t,key:p,index:p,error:c[t.name],parentPanel:d});case"text":return r.a.createElement(_e,{field:t,key:p,index:p,multiline:!0,error:c[t.name]});default:return r.a.createElement(_e,{field:t,key:p,index:p,error:c[t.name]})}})))}function Je(e){var t=e.children,a=Object(R.a)(e,Ve);return r.a.createElement(Be.Provider,{value:a},t)}function ze(e){var t,a,i,o,l=Object(L.b)(),c=l.state,s=l.onWidgetChange,d=l.onTranslationRemove,f=c.widgets,m=c.editWidget,p=c.editWidgetType,b=c.customFieldWidgets,g=c.modelType,v=c.enableAppBuilder,h=c.metaFieldStore,y=void 0===h?[]:h,O=c.errorList,j=void 0===O?{}:O,w=c.entityType,T=c.actualType,S=null;m&&("customField"===p&&b?S=b[m]:"customField"!==p&&f&&(S=f[m]));var M=S||{},E=M.serverType,F=M.isSelectionField,I=(S||{}).type,N="field"===E?I||"string":E||I;if("datetime"===(N=N&&N.toLowerCase().replace(/_/g,"-"))){var A=null===y||void 0===y?void 0:y.find((function(e){return e.name===S.name}));A&&"true"==="".concat(A.tz)&&(N="zoneddatetime")}var V=Object(n.useState)({}),q=Object(D.a)(V,2),B=q[0],R=q[1],J=Z.b.find((function(e){return e.type===N}));if("form"===N&&c.modelType===W.h.CUSTOM&&(J=Z.b.find((function(e){return"modelForm"===e.type}))),F&&(N=["string","integer"].includes(S&&S.type)?S.type:N,J&&J.value)){var z=J.value.overview.findIndex((function(e){return"type"===e.name}));J.value.overview.splice(z,1,ye.T);var X=J&&J.value||{},H=X.fieldOptions,Y=X.widgetAttributes;J=Object(U.a)(Object(U.a)({},J||{}),{},{value:Object(U.a)(Object(U.a)({},J.value||{}),{},{fieldOptions:(H||[]).filter((function(e){return!["minSize","maxSize","regex"].includes(e.name)})),widgetAttributes:(Y||[]).filter((function(e){return!["multiline"].includes(e.name)}))})})}var G=qe(),Q=r.a.useRef(null),$=r.a.useState(0),K=Object(D.a)($,2),ee=K[0],te=K[1];function ae(e,t){return ne.apply(this,arguments)}function ne(){return(ne=Object(_.a)(P.a.mark((function e(t,a){var n,r,i,o,l;return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=Object(U.a)({},t),a===ye.C.name&&(n[ye.cb.name]=null,n[ye.db.name]=null,n[ye.q.name]=null,n[ye.p.name]=null),a!==ye.C.name&&"type"!==a&&(n.type=S.type),"updateSelection"!==a||n.updateSelection||(n.selection=null),n.updateSelection){e.next=8;break}n.selectionText="",e.next=13;break;case 8:return r={name:n.selection},e.next=11,Object(Ee.l)(r);case 11:i=e.sent,n.selectionText=n.selectionText||i;case 13:if(!n.selection||!n.updateSelection||a){e.next=19;break}return o={name:n.selection},e.next=17,Object(Ee.l)(o);case 17:l=e.sent,n.selectionText=n.selectionText||l;case 19:n.selection&&"object"===typeof n.selection&&(n.selection=n.selection.name),s({id:m,props:Object(U.a)({},n)});case 21:case"end":return e.stop()}}),e)})))).apply(this,arguments)}r.a.useEffect((function(){R(Object(U.a)(Object(U.a)({},S||{}),{},{type:N})),te(Q&&Q.current&&Q.current.offsetWidth)}),[S,N]),I=N;var re={};m&&j&&(re=j[m]||{});var ie=Object.values(f||{}).find((function(e){return e.items&&-1!==e.items.indexOf(m)}));return"panel-tabs"===(null===(t=S)||void 0===t?void 0:t.type)&&"customField"===p||(null===(a=J)||void 0===a?void 0:a.dependModelType)&&"true"==="".concat(null===(i=S)||void 0===i?void 0:i.tab)&&(null===(o=J)||void 0===o?void 0:o.dependModelType)!==g?null:r.a.createElement(u.a,{style:{padding:20}},I&&J&&!(c.modelType===W.h.CUSTOM&&J.type===W.k.tabs)&&Object.keys(J.value).map((function(e,t){return r.a.createElement(u.a,{key:t},r.a.createElement(k.a,{variant:"body1",className:x()(G.panelTitle,0!==t&&G.panelMargin)},function(e,t){return e.filter((function(e){return!e.dependModelType||e.dependModelType===t})).length>0}(J.value[e],g)&&Object(C.r)(Object(C.c)(e))),r.a.createElement(u.a,{style:{display:"flex",flexDirection:"column",width:"90%"}},r.a.createElement(Je,{key:m,elements:J.value[e],propertyList:B,setPropertyList:R,labelWidth:ee,inputLabel:Q,type:I,onWidgetChange:s,id:m,onChange:ae,modelType:g,enableAppBuilder:v,editWidgetType:p,metaFieldStore:y,errors:re,entityType:w,actualType:T,parentPanel:ie,onTranslationRemove:d},r.a.createElement(De,null))))})))}var Xe=r.a.memo((function(){return r.a.createElement("div",{style:{color:"#fff"}},r.a.createElement(ze,null))})),He=Object(d.a)({root:{boxShadow:"1px 2px 8px 0px rgb(1 1 1 / 75%) !important",backgroundColor:"#2f4050",".modern-dark &":{backgroundColor:"#1b1b1b"},height:"100%",width:"100%",borderTop:"1px solid #2f4050"},tab:{minHeight:"fit-content",minWidth:"fit-content",textTransform:"none",color:"#fff",fontWeight:"600",backgroundColor:"#293846",".modern-dark &":{color:"#fff",backgroundColor:"#1b1b1b"},"&>span":{flexDirection:"row","& > svg":{marginBottom:"0px !important",marginRight:5}}},tabs:{backgroundColor:"#293846",minHeight:"42px !important",borderTopRightRadius:5,".modern-dark &":{backgroundColor:"#1b1b1b"}},container:{backgroundColor:"#2f4050",height:"calc(100% - 42px)",overflow:"auto",scrollbarWidth:"thin",borderBottomRightRadius:5,".modern-dark &":{backgroundColor:"#1b1b1b"}},activeTab:{backgroundColor:"#2f4050",borderBottom:"2px solid #fff",".modern-dark &":{backgroundColor:"#323232"}}}),Ye=[{label:"Properties",icon:r.a.createElement(O.a,null),view:r.a.createElement(Xe,null)},{label:"Attributes",icon:r.a.createElement(j.a,null),view:r.a.createElement(q,null)}],Ze=r.a.memo((function(e){var t=e.children,a=He();return r.a.createElement(u.a,{className:a.container},r.a.createElement(u.a,{style:{color:"#000",height:"100%"}},t))})),Ge=r.a.memo((function(){var e=He(),t=Object(L.b)(),a=t.state,n=t.update,i=a.tabIndex,o=a.editWidget;return r.a.createElement(v.a,{square:!0,className:e.root},r.a.createElement(h.a,{value:i,onChange:function(e,t){(0!==t||o)&&n((function(e){e.tabIndex=t}))},variant:"fullWidth",className:e.tabs,TabIndicatorProps:{style:{display:"none"}}},Ye.map((function(t,a){return r.a.createElement(y.a,{key:a,className:x()(e.tab,Object(g.a)({},e.activeTab,i===a)),icon:t.icon,label:Object(C.r)(t.label),style:{color:1!==a||o?"#fff":"#a6a6a6"}})}))),Ye.map((function(e,t){return i===t&&r.a.createElement(Ze,{key:t},e.view)})))})),Qe=a(305),$e=(a(84),a(59),a(99),a(83));function Ke(e){var t=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],a=getComputedStyle(e),n="absolute"===a.position,r=t?/(auto|scroll|hidden)/:/(auto|scroll)/;if("fixed"===a.position)return document.body;for(var i=e;i=i.parentElement;)if(a=getComputedStyle(i),(!n||"static"!==a.position)&&r.test(a.overflow+a.overflowY+a.overflowX))return i;return document.body}(e);t&&window.requestAnimationFrame((function(){t.scrollTo({top:e.offsetTop+14,behavior:"smooth"})}))}var et=Object(d.a)({uiContainer:{display:"flex",flexDirection:"column"},container:{display:"flex",flexDirection:"column",height:"fit-content",position:"relative"},loaderContainer:{display:"flex",flexDirection:"column",justifyContent:"center",height:"100%",position:"absolute",zIndex:1e3,border:"0px",backgroundColor:"rgba(0,0,0,0.05)",bottom:0,top:0,left:0,right:0,alignItems:"center"},emptyFormInfo:{minHeight:"24vh !important"}});var tt=function(e){var t,a,n=e.design,i=Object(L.b)(),o=et(),l=r.a.createRef(),c=i.state,s=c.widgets,u=c.customFieldWidgets,d=c.loader,f=c.errorList,m=c.modelField,p=c.modelType,b=(i.state.widgets||[])[-1];return r.a.useEffect((function(){var e=l.current;e&&(Ke(e),e&&e.focus())}),[l]),r.a.createElement("div",{className:x()(o.uiContainer)},r.a.createElement("div",{id:"form-view",className:x()(o.container,Object(g.a)({},o.emptyFormInfo,!b&&!u))},d&&r.a.createElement("div",{className:x()(o.loaderContainer)},r.a.createElement(Qe.a,null)),s&&r.a.createElement(I.default,(t={index:0,id:W.f.form,attrs:i.state.widgets[W.f.form],onSelect:i.onSelect,items:i.state.items,dragWidget:i.state.dragWidget,hoverWidget:i.state.hoverWidget,editWidget:i.state.editWidget,widgets:i.state.widgets},Object(g.a)(t,"onSelect",i.onSelect),Object(g.a)(t,"onMove",i.onMove),Object(g.a)(t,"onDrag",i.onDrag),Object(g.a)(t,"onHover",i.onHover),Object(g.a)(t,"onWidgetChange",i.onWidgetChange),Object(g.a)(t,"setHoverAttr",i.setHoverAttr),Object(g.a)(t,"addTabPanel",i.addTabPanel),Object(g.a)(t,"canRemove",p!==W.h.BASE),Object(g.a)(t,"errorList",f),Object(g.a)(t,"design",n),Object(g.a)(t,"component",$e.a),t)),u&&r.a.createElement("div",{className:"custom-field-pallett-view",ref:l,tabIndex:1},r.a.createElement("div",{className:"custom-field-view-header"},(null===m||void 0===m?void 0:m.name)||"attrs"),r.a.createElement(I.default,(a={_type:"customField",index:0,id:W.f.customForm,attrs:i.state.customFieldWidgets[W.f.customForm],onSelect:i.onSelect,items:i.state.customFieldItems,dragWidget:i.state.dragWidget,hoverWidget:i.state.hoverWidget,editWidget:i.state.editWidget,widgets:i.state.customFieldWidgets},Object(g.a)(a,"onSelect",i.onSelect),Object(g.a)(a,"onMove",i.onMove),Object(g.a)(a,"onDrag",i.onDrag),Object(g.a)(a,"addTabPanel",i.addTabPanel),Object(g.a)(a,"onHover",i.onHover),Object(g.a)(a,"onWidgetChange",i.onWidgetChange),Object(g.a)(a,"setHoverAttr",i.setHoverAttr),Object(g.a)(a,"errorList",f),Object(g.a)(a,"design",n),Object(g.a)(a,"component",$e.a),a)))))},at=r.a.memo((function(){var e=r.a.useState(!0),t=Object(D.a)(e,1)[0];return r.a.createElement("div",{className:x()("form-layout-container",{"form-layout-design":t}),style:{display:"flex",width:"100%",height:"100%",justifyContent:"center",overflow:"auto",position:"relative"}},r.a.createElement(tt,{design:t}))})),nt=a(52),rt=a.n(nt),it=["value","label","model","searchFilter","onChange","options","filterData","limit","onSearch","modelType"],ot=Object(d.a)({autoComplete:{"& > div > label":{color:"#e7eaec !important",fontSize:12}},autoCompleteRoot:{width:200,marginLeft:10,color:"#e7eaec"},inputView:{color:"#fff",fontSize:13,"& > *":{color:"#fff"}},popperView:{"& ul, .MuiAutocomplete-noOptions":{backgroundColor:"rgb(41, 56, 70) !important",".modern-dark &":{backgroundColor:"#1b1b1b !important"}},"& li, .MuiAutocomplete-noOptions":{color:"#e7eaec !important",backgroundColor:"rgb(41, 56, 70) !important",".modern-dark &":{backgroundColor:"#1b1b1b !important"}},"& li:hover, .MuiAutocomplete-noOptions":{color:"#e7eaec !important",backgroundColor:"#2f4050 !important",".modern-dark &":{backgroundColor:"#323232 !important"}}},option:{fontSize:13}});var lt=r.a.memo((function(e){var t=e.value,a=e.label,i=e.model,o=e.searchFilter,c=e.onChange,s=e.options,u=e.filterData,d=e.limit,f=void 0===d?10:d,m=e.onSearch,p=e.modelType,b=Object(R.a)(e,it),g=ot(),v=Object(n.useState)(""),h=Object(D.a)(v,2),y=h[0],O=h[1],j=Object(n.useState)(!1),w=Object(D.a)(j,2),x=w[0],k=w[1],T=Object(n.useState)(Object(l.a)(s||[])),S=Object(D.a)(T,2),M=S[0],E=S[1],F=Object(n.useState)(!1),I=Object(D.a)(F,2),N=I[0],A=I[1],L=Object(n.useState)(0),W=Object(D.a)(L,2),V=W[0],q=W[1],B=Object(n.useState)(0),z=Object(D.a)(B,2),X=z[0],H=z[1],Z=r.a.useCallback(Object(_.a)(P.a.mark((function e(){var t,a,n,r,c,s,d,b,g,v,h=arguments;return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=h.length>0&&void 0!==h[0]?h[0]:"",!m){e.next=15;break}return k(!0),e.next=5,m({limit:f,searchText:t,searchFilter:o,filterData:u,modelType:p,offset:V});case 5:a=e.sent,n=a.models,r=a.total,!N&&r>f&&n.push({name:Object(C.r)("Show more..."),id:"studio_show_More_View"}),c=$.a.uniqBy(n,"name"),E(c),k(!1),H(r),e.next=23;break;case 15:s=new K.a({model:i}),k(!0),d=o(t)||{},b=[],t&&b.push({fieldName:"name",operator:"like",value:t}),g=Object(U.a)(Object(U.a)(Object(U.a)({},d._domain&&{_domain:d._domain}),d._domainContext&&{_domainContext:d._domainContext}),{},{criteria:[].concat(b,Object(l.a)(d.criteria||[])),operator:"and"}),v=d.fields||[],s.search({fields:v,data:g,limit:f,offset:V}).then((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.data,a=void 0===t?[]:t,n=e.total;k(!1);var r=u?u(Object(l.a)(a)):Object(l.a)(a);!N&&n>f&&r.push({name:Object(C.r)("Show more..."),id:"studio_show_More_View"}),H(n);var i=$.a.uniqBy(r,"name");E(i)}));case 23:case"end":return e.stop()}}),e)}))),[o,i,u,N,f,m,p,V]),G=r.a.useCallback((function(){var e=V+f;e<=X&&q(e)}),[f,X,V]),Q=r.a.useCallback((function(){q((function(e){var t=e-f;return t>0?t:0}))}),[f]),te=r.a.useCallback((function(){!s&&Z(y)}),[y,Z,s]),ae=r.a.useCallback((function(e,t){"studio_show_More_View"===(null===t||void 0===t?void 0:t.id)?A(!0):c(t)}),[c]),ne=r.a.useCallback((function(e){O(e),q(0)}),[]),re=r.a.useCallback((function(){A(!1),q(0)}),[]);return ee(te,500),Object(n.useEffect)((function(){!s&&Z()}),[Z,s,i]),Object(n.useEffect)((function(){t||O("")}),[t]),r.a.createElement(r.a.Fragment,null,r.a.createElement(Y.a,Object.assign({clearOnEscape:!0,autoComplete:!0,classes:{root:g.autoCompleteRoot,inputFocused:g.input,clearIndicator:g.input,popupIndicator:g.input,input:g.inputView,endAdornment:g.inputView,popper:g.popperView,option:g.option,noOptions:g.option},size:"small",className:g.autoComplete,onInputChange:function(e,t){return O(t)},renderInput:function(e){return e.inputProps.value=y,r.a.createElement(J.a,Object.assign({},e,{placeholder:Object(C.r)(a),fullWidth:!0}))},options:Object(l.a)(M),loading:x,getOptionLabel:function(e){return"string"===typeof e?e:b.getOptionLabel?b.getOptionLabel(e):e.name},onChange:ae,filterOptions:function(e){return e},value:t||null,getOptionSelected:function(e,t){return e.name===t.name}},b)),r.a.createElement(be,{searchText:y,list:M,model:i,total:X,offset:V,open:N,onNext:G,onPrevious:Q,handleClose:re,setSearchText:ne,onChange:c,title:Object(C.r)(a),getOptionLabel:b.getOptionLabel}))}));function ct(e){return st.apply(this,arguments)}function st(){return(st=Object(_.a)(P.a.mark((function e(t){var a,n,r,i,o,c,s,u,d,f,m,p,b;return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.searchFilter,n=t.limit,r=t.searchText,i=t.modelType,o=t.offset,c=a(r)||{},s=[],r&&s.push({fieldName:"name",operator:"like",value:r}),u=Object(U.a)(Object(U.a)(Object(U.a)({},c._domain&&{_domain:c._domain}),c._domainContext&&{_domainContext:c._domainContext}),{},{criteria:[].concat(s,Object(l.a)(c.criteria||[])),operator:"and"}),d=c.fields||[],f=i===W.h.CUSTOM?Ee.o:Ee.p,e.next=9,f.search({fields:d,data:u,limit:n,offset:o});case 9:return m=e.sent,p=[],m&&m.data&&Array.isArray(m.data)&&(b=m.data.map((function(e){var t=p.findIndex((function(t){return t.name===e.name&&t.packageName===e.packageName}));if(-1===t||i===W.h.BASE)return i===W.h.BASE&&-1!==t&&p.splice(t,1),Object(U.a)(Object(U.a)({},e),{},{entityType:W.c.META});p.splice(t,1,Object(U.a)(Object(U.a)({},p[t]),{},{actualType:W.c.META}))})).filter((function(e){return e})),p.push.apply(p,Object(l.a)(b))),e.abrupt("return",{models:p,total:m&&m.total});case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var ut=a(34),dt=["model","update","modelType","modelField","startLoader","entityType","metaFieldStore","clearHistory","reset"],ft=["fields"],mt=new K.a({model:"com.axelor.meta.db.MetaView"}),pt=[{name:Object(C.r)("View"),value:W.h.BASE},{name:Object(C.r)("Custom"),value:W.h.CUSTOM}];var bt=r.a.memo((function(e){var t=e.model,a=e.update,n=e.modelType,i=e.modelField,o=e.startLoader,c=(e.entityType,e.metaFieldStore),s=e.clearHistory,u=e.reset,d=Object(R.a)(e,dt),f="com.axelor.meta.db.".concat(n!==W.h.CUSTOM?"MetaModel":"MetaJsonModel"),m=r.a.useCallback((function(e,t){var n=[];if(e.length){n.push({fieldName:"id",operator:"in",value:e});var r={criteria:n};Ee.n.search({data:r,sortBy:["sequence"]}).then((function(e){if(e.data){var n=e.data||[],r=Object(C.h)(n,t);a((function(e){e.widgets=Object(U.a)({},r.widgets),e.items=r.items,e.loader=!1}))}else a((function(e){e.loader=!1}))}))}else{var i=Object(C.h)([],t);a((function(e){e.widgets=Object(U.a)({},i.widgets),e.items=i.items,e.loader=!1,e.model=t,e.customModel=t,e.editWidget=-1,e.editWidgetType=null}))}}),[a]),p=r.a.useCallback(function(){var e=Object(_.a)(P.a.mark((function e(t){var r,i;return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=new K.a({model:f}),t){e.next=7;break}if(n!==W.h.CUSTOM){e.next=5;break}return u(),e.abrupt("return");case 5:return a((function(e){s(e),e.model=null,e.customModel=null,e.items=[],e.exView=null,e.view=null,e.widgets=null,e.initialItems=null,e.initialWidgets=null,e.customFieldWidgets=null,e.customFieldItems=null,e.customFields=[],e.modelField=null,e.extensionXML=null,e.extensionView=null,e.originalXML=null,e.selectedView=null,e.metaFields=[],e.metaFieldStore=[],e.extensionMoves=[],e.errorList={},e.attrsList=[],e.translationList=[],e.initialTranslationList=[],e.removedTranslationList=[]})),e.abrupt("return");case 7:i={fields:["metaFields","packageName","name","fullName"],related:{metaFields:["typeName","label","mappedBy","relationship","name","packageName"]}},n===W.h.CUSTOM&&(a((function(e){e.loader=!0})),i={related:{menuBuilder:["title","parentMenu"]}}),r.fetch(t.id,i).then((function(e){if(e.data){var r=e.data[0],i=r.fields,o=void 0===i?[]:i,c=Object(R.a)(r,ft);a((function(e){s(e),e.model=t,e.entityType=t.entityType,e.widgets=null,e.initialWidgets=null,e.items=[],e.initialItems=null,e.view=null,e.exView=null,e.modelField=null,e.customFields=[],e.customFieldWidgets=null,e.originalXML=null,e.extensionXML=null,e.extensionView=null,e.extensionMoves=[],e.errorList={},e.attrsList=[],e.translationList=[],e.initialTranslationList=[],e.removedTranslationList=[],e.selectedView=null,e.editWidget=-1,e.editWidgetType=null,e.tabIndex=0;var a=(r.metaFields||[]).map((function(e){return JSON.parse(JSON.stringify(Object(U.a)(Object(U.a)(Object(U.a)({},e),{},{type:W.n[e.relationship]||(e.typeName||"").toLowerCase()},e.relationship&&{targetModel:"".concat(e.packageName,".").concat(e.typeName)}),{},{packageName:void 0})))}));n===W.h.BASE?(e.metaFieldStore=Object(l.a)(a),e.metaFields=Object(l.a)(a)):(m(o.map((function(e){return e.id})),c),e.customModel=r)}))}}));case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[a,f,n,m,s,u]),b=r.a.useCallback(function(){var e=Object(_.a)(P.a.mark((function e(n){var r,i,u,d,f,m,p,b,g,v;return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o(),n){e.next=4;break}return a((function(e){s(e),e.items=[],e.exView=null,e.view=null,e.widgets=null,e.initialItems=null,e.initialWidgets=null,e.customFieldWidgets=null,e.customFieldItems=null,e.customFields=[],e.modelField=null,e.extensionXML=null,e.extensionView=null,e.originalXML=null,e.loader=!1,e.metaFields=e.metaFieldStore,e.selectedView=null,e.extensionMoves=[],e.errorList={},e.attrsList=[],e.translationList=[],e.initialTranslationList=[],e.removedTranslationList=[]})),e.abrupt("return");case 4:return e.next=6,Object(Ee.i)(n);case 6:return r=e.sent,e.next=9,Object(Ee.c)({model:t.name,view:n.name});case 9:return i=e.sent,u=C.g.generateXMLToViewSchema({view:r.view,fields:c,extensionXML:r.extensionXML,attrsList:i}),d=Object.values(u.widgets).filter((function(e){return e.title&&e.title.startsWith("studio:")})).map((function(e){return e.title})),e.next=14,Object(Ee.m)(d);case 14:return f=e.sent,m={operator:"and",criteria:[{operator:"or",criteria:[{fieldName:"computed",operator:"=",value:!1},{fieldName:"computed",operator:"isNull"}]},{operator:"or",criteria:[{fieldName:"extension",operator:"=",value:!1},{fieldName:"extension",operator:"isNull"}]},{fieldName:"name",operator:"=",value:"".concat(n.name)}]},mt.search({data:m}).then((function(e){var t=e.data,n=void 0===t?[]:t;n[0]&&a((function(e){e.originalXML=JSON.parse(rt.a.xml2json(n[0].xml,{compact:!1,fullTagEmptyElement:!1}))}))})),p={_domain:"self.xmlId = 'studio-".concat(n.name,"' and self.extension = true")},e.next=20,mt.search({data:p});case 20:b=e.sent,g=b.data,(v=(void 0===g?[]:g)[0])&&a((function(e){e.extensionView=v,e.extensionXML=JSON.parse(rt.a.xml2json(v.xml,{compact:!1,fullTagEmptyElement:!1}))})),a((function(e){s(e),e.attrsList=i,e.translationList=f,e.initialTranslationList=f,e.removedTranslationList=[],u&&(e.widgets=u.widgets,e.initialWidgets=u.widgets,e.items=u.items,e.initialItems=u.items,e.metaFields=Object(l.a)(e.metaFieldStore).filter((function(e){return-1===u.fieldList.findIndex((function(t){return t.name===e.name}))}))),e.selectedView=n,r.view&&(e.view={fields:e.metaFields,view:r.view},e.exView=r.view),e.customFields=[],e.customFieldWidgets=null,e.customFieldItems=null,e.modelField=null,e.loader=!1,e.extensionMoves=[],e.errorList={},Object(ut.b)(e)}));case 25:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[a,o,c,s,t]),v=r.a.useCallback((function(){var e="self.type='form'",a="".concat(t?t.fullName:"");return{_domain:e="".concat(e," and self.model='").concat(a,"' and (self.computed = true OR self.name NOT IN (select meta.name from MetaView meta where meta.computed = true))"),fields:["name","model","title","type","extension","xmlId","computed","xml"]}}),[t]),h=r.a.useCallback((function(){return{fields:["name","fullName","packageName"]}}),[]),y=r.a.useCallback((function(){return{_domain:"self.json = true and self.metaModel.id='".concat(t?t.id:-1,"'"),fields:["name"]}}),[t]),O=r.a.useCallback((function(e){e?Object(Ee.d)(e,t).then((function(t){var n=t.data,r=void 0===n?[]:n,i=Object(C.h)(r,void 0,"","customForm");a((function(t){var a,n,o=$.a.uniqueId();t.customFieldWidgets=(null===(a=Object.keys(i.widgets))||void 0===a?void 0:a.length)>2?i.widgets:Object(U.a)(Object(U.a)({},i.widgets),{},Object(g.a)({},o,Object(U.a)({name:"panel".concat(o)},W.i))),t.customFieldItems=(null===(n=i.items)||void 0===n?void 0:n.length)>0?i.items:["".concat(o)],t.customFields=r,t.modelField=e}))})):a((function(t){t.customFieldWidgets=null,t.customFieldItems=null,t.customFields=[],t.modelField=e}))}),[t,a]),j=r.a.useCallback((function(e){var t=e.value;[W.h.CUSTOM,W.h.BASE].includes(t)&&Object(Ee.k)().then((function(e){a((function(t){t.enableAppBuilder=e}))}));var n=function(t){t.modelType=e?e.value:null,t.entityType=null,t.initialWidgets=null,t.initialItems=null,t.modelField=null,t.customFields=[],t.customFieldWidgets=null,t.metaFieldStore=[],t.extensionMoves=[],t.removedTranslationList=[]};t!==W.h.CUSTOM?a((function(e){s(e),n(e),e.model=null,e.customModel=null,e.widgets=null,e.items=[],e.view=null,e.exView=null,e.metaFields=[],e.metaFields=[],e.selectedView=null,e.errorList={},e.attrsList=[],e.translationList=[],e.initialTranslationList=[]})):u(n)}),[a,u,s]),w=r.a.useCallback((function(e){return e.filter((function(t){if(!t.computed&&-1!==e.findIndex((function(e){return e.name===t.name&&e.computed})))return!1;return!0!==t.extension}))}),[]);return r.a.createElement(r.a.Fragment,null,r.a.createElement(lt,{options:pt,value:pt.find((function(e){return e.value===n})),filterSelectedOptions:!0,label:"Type",onChange:j,disableClearable:!0}),r.a.createElement(lt,{onChange:p,label:"Model",model:f,searchFilter:h,value:t,onSearch:ct,modelType:n}),n===W.h.BASE&&r.a.createElement(r.a.Fragment,null,r.a.createElement(lt,{onChange:b,label:"View",model:"com.axelor.meta.db.MetaView",searchFilter:v,getOptionLabel:function(e){return!0===e.extension?"".concat(e.name," (Extension)"):!0===e.computed?"".concat(e.name," (Computed)"):e.name},value:d.selectedView,filterData:w}),r.a.createElement(lt,{label:"Custom fields",model:"com.axelor.meta.db.MetaField",searchFilter:y,onChange:O,value:i})))})),gt=["update","saveView","modelType","saveCustomFieldView","removeView","model","onNew","reset"],vt=Object(d.a)({toolbarContainer:{display:"flex",flexWrap:"wrap",width:"100%",height:"inherit",backgroundColor:"rgb(41, 56, 70)",padding:"0.5rem 0.75rem",".modern-dark &":{backgroundColor:"#323232"}},toolItemView:{color:"#fff",padding:"5px 10px"},crudIcon:{height:"1em",width:"1em",fontSize:14,cursor:"pointer"},selectionContainer:{flex:1,display:"flex",alignItems:"center",flexWrap:"wrap"},toolbarActions:{display:"flex",alignItems:"center"},disableBtn:{color:"#555 !important"}});function ht(e){var t=vt();return r.a.createElement(z.a,Object.assign({className:t.toolItemView,classes:{disabled:t.disableBtn}},e))}var yt=r.a.memo((function(e){var t,a=e.update,i=e.saveView,o=e.modelType,l=e.saveCustomFieldView,c=e.removeView,s=e.model,u=e.onNew,d=e.reset,f=Object(R.a)(e,gt),m=vt(),p=r.a.useCallback((function(){i(),o===W.h.BASE&&l()}),[i,l,o]),b=!(f.extensionView||(t=f.selectedView,t&&t.xmlId&&0===t.xmlId.indexOf("studio-"))||o===W.h.CUSTOM&&Boolean(f.customModel)),g=o===W.h.BASE&&!s,v=Object.keys(f.errorList).length>0;return function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=Object(n.useRef)(t);Object(n.useLayoutEffect)((function(){r.current=t}));var i=Object(n.useCallback)((function(t){e.some((function(e){return t.key===e&&t.ctrlKey}))&&(t.preventDefault(),r.current(t))}),[e]);Object(n.useEffect)((function(){var e=null!==a&&void 0!==a?a:document;return e&&e.addEventListener("keydown",i),function(){return e&&e.removeEventListener("keydown",i)}}),[i,a])}(["s"],p),r.a.createElement("div",{className:m.toolbarContainer},r.a.createElement("div",{className:m.toolbarActions},r.a.createElement(ht,{className:m.toolItemView,onClick:f.onSidePanelToggle},r.a.createElement("i",{className:x()("fa fa-bars",m.crudIcon)})),o!==W.h.BASE&&r.a.createElement(ht,{className:m.toolItemView,onClick:u,disabled:g},r.a.createElement("i",{className:x()("fa fa-plus",m.crudIcon)})),r.a.createElement(ht,{className:m.toolItemView,onClick:p,disabled:v},r.a.createElement("i",{className:x()("fa fa-floppy-o",m.crudIcon)})),o===W.h.CUSTOM&&r.a.createElement(ht,{className:m.toolItemView,onClick:c,disabled:b},r.a.createElement("i",{className:x()("fa fa-trash-o",m.crudIcon)}))),r.a.createElement("div",{className:m.selectionContainer},r.a.createElement(bt,Object.assign({model:s,update:a,modelType:o,reset:d},f))),r.a.createElement("div",{className:m.toolbarActions},r.a.createElement(ht,{className:m.toolItemView,onClick:function(){return f.refresh()},disabled:!f.customModel&&!s},r.a.createElement("i",{className:x()("fa fa-refresh",m.crudIcon)})),r.a.createElement(ht,{className:m.toolItemView,onClick:function(){return f.undo()},disabled:f.pastLength<=0},r.a.createElement("i",{className:x()("fa fa-reply",m.crudIcon)})),r.a.createElement(ht,{onClick:function(){return f.redo()},disabled:f.futureLength<=0},r.a.createElement("i",{className:x()("fa fa-share",m.crudIcon)}))))})),Ot=a(87),jt=a(63);function wt(e){return e.split("[").length-1>1}var xt=function(e,t){if(e){var a=e.attributes,n=C.g.exploreTarget(e.target),r=Object.values(t).find((function(e){var t=C.g.exploreTarget(e.xPath);return t.self||n.self?t.self===n.self:!(!t.parent&&!n.parent)&&t.parent===n.parent})),i=C.g.dashToCamelCase(a.name);if(r){var o=r[i],l=r[a.maskName];if(void 0===l&&(l=""),void 0===o&&(o=!1),a.maskName!==a.name){if("".concat(l)==="".concat(a.value))return!0}else{if("".concat(o)==="".concat(a.value))return!0;if(["",void 0,null].includes(r[i])&&["",void 0,null].includes(a.value))return!0;if(a.maskName!==a.name&&["",void 0,null].includes(r[a.maskName])&&["",void 0,null].includes(a.value))return!0}}}return!1};function kt(e,t){var a=[],n=[],r=e.attrsList,i=void 0===r?[]:r,o=e.extensionMoves.filter((function(e){return"attribute"===e.name})),l=e.selectedView,c=e.model,s=new Map,u=function(e){var t=e.widgets,a=e.items;return Object.keys(t).forEach((function(e){var n=Object(ut.a)(t,a,e);t[e].xPath=n})),t}(C.g.generateXMLToViewSchema({view:e.view.view,fields:e.metaFieldStore,attrsList:e.attrsList}));return o.forEach((function(e){var t=function(e){return W.l[e]}(e.attributes.name)||e.attributes.name,a=e.attributes.value,n=Object.assign({},Object(U.a)(Object(U.a)({},e),{},{attributes:Object(U.a)(Object(U.a)({},e.attributes),{},{name:t,value:a,maskName:e.attributes.name})}));s.set(t,n)})),s.forEach((function(e){var r=e,o=C.g.exploreTarget(r.target),s=r.attributes,d=function(e){var t=e.self,a=e.parent,n="",r=t||a;if(r){var i=r.indexOf("@name='")+"@name='".length,o=r.indexOf("']");n=r.substring(i,o)}return n}(o),f=i.findIndex((function(e){return d.includes(e.field)&&(e.name===s.name||W.l[e.name]===s.name)})),m=i[f],p=xt(r,t),b=xt(r,u),g=a.findIndex((function(e){return o.self&&o.self.includes(e.field)&&e.name===s.name})),v=W.a[s.name];p||b?-1!==g?a.splice(g,1):m&&m.id&&n.push({id:m.id,version:m.version}):m?[null,void 0].includes(s.value)?v?v===s.value&&n.push({id:m.id,version:m.version}):n.push({id:m.id,version:m.version}):m.value!==s.value&&(v?v===s.value&&n.push({id:m.id,version:m.version}):-1===g?a.push(Object(U.a)(Object(U.a)({},m),{},{name:s.name,value:s.value,maskName:s.maskName})):(a[g].value=s.value,a[g].maskName=s.maskName)):d&&(-1===g?a.push({view:l.name,model:c.fullName,name:s.name,maskName:s.maskName,value:s.value,field:d}):(a[g].value=s.value,a[g].maskName=s.maskName))})),{changedAttrsList:a,removedAttrsList:n}}function Tt(e,t){var a=[],n=e.extensionMoves.filter((function(e){return"attribute"!==e.name})),r=Object(l.a)(n);return n.forEach((function(e,t){if(e.target){var n=C.g.exploreTarget(e.target),i=!0;n.self&&wt(n.self)&&(i=!1),n.parent&&wt(n.parent)&&(i=!1),"attribute"===e.name&&i&&function(e){if(-1===a.findIndex((function(t){return t.target===e.target&&t.name===e.attributes.name}))){var t=r.map((function(t,a){if(t.target===e.target&&t.attributes&&e.attributes.name===t.attributes.name)return a})).filter((function(e){return void 0!==e})),n=t[t.length-1];a.push({target:e.target,name:e.attributes.name}),r=r.filter((function(t,a){return t.target!==e.target||!e.attributes||!t.attributes||e.attributes.name!==t.attributes.name||n===a}))}}(e),"replace"===e.name&&i&&((null===n||void 0===n?void 0:n.self)&&n.self.includes("panel")||!(null===n||void 0===n?void 0:n.self)&&(null===n||void 0===n?void 0:n.parent.includes("panel"))||function(e){var t=!1,a=C.g.exploreTarget(e.target),n=r.findIndex((function(e){return"insert"===e.name&&(e.elements&&e.elements[0]&&a.self?a.self.includes("'".concat(e.elements[0].name,"'")):a.parent&&a.parent.includes(e.elements[0].name))})),i=r.filter((function(e){if(e.target){var t=C.g.exploreTarget(e.target);return["insert","move"].includes(e.name)&&t.self&&t.self.includes(a.self)}return!1}));if(-1===n||i.length||(t=!0,r.splice(n,1),Object(l.a)(r).forEach((function(t){if("move"===t.name&&t.source&&t.source===e.target){var a=r.findIndex((function(t){return"move"===t.name&&t.source&&t.source===e.target}));-1!==a&&r.splice(a,1)}}))),r=r.filter((function(t){return"attribute"!==t.name||t.target!==e.target})),t){var o=r.findIndex((function(t){return"replace"===t.name&&t.target===e.target}));-1!==o&&r.splice(o,1)}}(e))}})),r}var St=["fields"],Ct=["fields"],Mt=new K.a({model:"com.axelor.meta.db.MetaView"}),Et=new K.a({model:"com.axelor.meta.db.MetaJsonField"}),Ft=function(e){var t=e.widgets,a=e.items;return Object.keys(t).forEach((function(e){var n=Object(ut.a)(t,a,e);t[e].xPath=n})),t},It=function(e,t,a){var n=[];return{changedTranslationList:e.filter((function(e){if(-1!==a.indexOf(e.key))return e.id&&n.push({id:e.id,version:e.version}),!1;if(e.id){var r=t.find((function(t){return t.language===e.language&&t.key===e.key}));return!(!r||r.message===e.message)}return!0})),deletedTranslationList:n}};var Nt=r.a.memo((function(e){var t=Object(L.b)(),a=t.state,n=t.update,i=t.startLoader,o=t.undo,c=t.redo,s=t.clearHistory,u=r.a.useState(!1),d=Object(D.a)(u,2),f=d[0],m=d[1],p=a.customFieldWidgets,b=a.widgets,v=a.modelType,h=r.a.useCallback((function(){n((function(e){e.loader=!1}))}),[n]),y=r.a.useCallback((function(e){n((function(t){e&&e(t),t.errorList={},t.customModel=null,t.exView=null,t.view=null,t.extensionXML=null,t.extensionView=null,t.loader=!1,t.metaFields=t.metaFieldStore||[],t.selectedView=null,t.translationList=[],t.initialTranslationList=[],t.attrsList=[],t.model=null;var a=$.a.uniqueId();t.widgets=Object(g.a)({"-1":Object(U.a)({type:"form",cols:12,extension:!1},C.g.getDefaultProperties(t.modelType)),0:{type:"dump_field",name:""}},a,Object(U.a)({name:"panel".concat(a)},W.i)),t.items=["".concat(a)],t.editWidget=-1,t.editWidgetType=null,t.tabIndex=0}))}),[n]),O=r.a.useCallback((function(){i();var e,t=function(e){n((function(t){s(t),t.customModel=null,t.dialog=e,t.widgets=null,t.initialItems=null,t.initialWidgets=null,t.items=[],t.view=null,t.metaFields=[],t.selectedView=null,t.originalXML=null,t.extensionXML=null,t.selectedView=null,t.loader=!1,t.extensionView=null,t.errorList={},t.modelType===W.h.CUSTOM&&y()}))};a.modelType===W.h.CUSTOM?(a.model||a.customModel)&&Object(Ee.q)(a.model||a.customModel).then((function(e){var a=e||{},r=a.data;if(-1!==a.status)t(null);else{var i=(r||{}).message,o={message:void 0===i?"":i,type:"alert"};n((function(e){e.loader=!1,e.dialog=o}))}})):(a.extensionView?e={id:a.extensionView.id,version:a.extensionView.version}:a.selectedView&&a.selectedView.xmlId&&0===a.selectedView.xmlId.indexOf("studio-")&&(e={id:a.selectedView.id,version:a.selectedView.version}),e&&Mt.removeAll([e]).then((function(e){t(null)})))}),[n,a,i,s,y]),j=r.a.useCallback(Object(_.a)(P.a.mark((function e(){var t,r,o,l,c,s,u,d,f,m;return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a.modelType!==W.h.CUSTOM){e.next=16;break}if(t=a.customModel){e.next=4;break}return e.abrupt("return");case 4:return e.next=6,Object(Ee.e)(t.id);case 6:if(e.t0=e.sent,e.t0){e.next=9;break}e.t0={};case 9:r=e.t0,o=r.fields,l=void 0===o?[]:o,(c=Object(R.a)(r,St)).menuBuilder&&(c.menuBuilder=Object(U.a)(Object(U.a)({},t.menuBuilder),c.menuBuilder)),Object(Ee.f)(l.map((function(e){return e.id})),n,c),n((function(e){e.customModel=Object(U.a)(Object(U.a)({},r||{}),{},{menuBuilder:null===c||void 0===c?void 0:c.menuBuilder}),e.model=r,e.loader=!1,e.removedCustomFields=[]})),e.next=26;break;case 16:if(!a.widgets){e.next=25;break}return u=a.view,e.next=20,Mt.fetch(null===u||void 0===u||null===(s=u.view)||void 0===s?void 0:s.id);case 20:d=e.sent,f=d&&d.data&&d.data[0],n((function(e){e.loader=!1;var t=e.view,a=C.g.generateXMLToViewSchema({view:f,fields:e.metaFieldStore,extensionXML:t.extensionXML,attrsList:[]});e.widgets=a.widgets,e.initialWidgets=a.widgets,e.items=a.items,e.initialItems=a.items,e.extensionMoves=[],e.attrsList=[],Object(ut.b)(e)})),e.next=26;break;case 25:(a.customFieldItems||a.removedCustomFields.length)&&(null===(m=a.modelField)||void 0===m?void 0:m.name)?(i(),Object(Ee.d)(a.modelField,a.model).then((function(e){var t=e.data,a=void 0===t?[]:t,r=Object(C.h)(a,void 0,"","customForm");n((function(e){e.customFieldWidgets=r.widgets,e.customFieldItems=r.items,e.customFields=a,e.loader=!1,e.removedCustomFields=[]}))}))):h();case 26:case"end":return e.stop()}}),e)}))),[n,a,h,i]),w=r.a.useCallback((function(){var e,t=(Object.values((v===W.h.BASE?p:b)||{})||[]).find((function(e){return e.type===W.k.tabs}));if(t&&!(null===t||void 0===t||null===(e=t.items)||void 0===e?void 0:e.length)){var a={message:Object(C.r)("Tabs should have atleast one panel"),type:"alert"};return n((function(e){e.loader=!1,e.dialog=a})),!1}return!0}),[p,b,n,v]),x=r.a.useCallback(Object(_.a)(P.a.mark((function e(){var t,r,o,c,s,u,d,f,m,p,b,g,v,h,y,j,x,k,T,S,M,E,F,I,N,A,L,V,q,B,D,J,z,X,H,Y,Z,G,Q,$,K,ee,te,ae,ne,re,ie;return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a.widgets){e.next=2;break}return e.abrupt("return");case 2:if(w()){e.next=4;break}return e.abrupt("return");case 4:if(i(),a.modelType!==W.h.CUSTOM){e.next=37;break}if(t=C.g.getCustomModelFields(a.items,a.widgets,null,!0),r=t.fields,o=Object.values(a.widgets||{})||[],!((new Set(o.map((function(e){return e.name})))||[]).size<o.length)){e.next=13;break}return c={message:Object(C.r)("Field name should be unique"),type:"alert"},n((function(e){e.loader=!1,e.dialog=c})),e.abrupt("return");case 13:if((s=a.widgets[-1]).name&&s.title){e.next=18;break}return u={message:"Please enter form name and title",type:"alert"},n((function(e){e.loader=!1,e.dialog=u})),e.abrupt("return");case 18:if(d=Object(U.a)(Object(U.a)(Object(U.a)({},a.customModel),C.g.getFormProperties(s)),{},{fields:r},a.customModel&&{version:a.customModel.version}),!0===s.isGenerateMenu&&(d.menuBuilder=Object(U.a)(Object(U.a)({},(a.customModel||{}).menuBuilder),{},{title:s.menuBuilderTitle,parentMenu:s.menuBuilderParent,version:((a.customModel||{}).menuBuilder||{}).$version})),f=a.customModel||{},m=f.isGenerateMenu,s.isGenerateMenu===m){e.next=31;break}return e.next=24,Object(Ee.j)(d);case 24:if(p=e.sent,b=p.data,!(g=void 0===b?[]:b)[0]||!g[0].reload){e.next=31;break}return e.next=29,Object(Ee.e)(d.id);case 29:v=e.sent,d=Object(U.a)(Object(U.a)({},d),{},{menuBuilder:null,version:v.version});case 31:if(!a.removedCustomFields.length){e.next=34;break}return e.next=34,Et.removeAll(a.removedCustomFields);case 34:Object(Ee.s)(d).then((function(e){var t=e||{},a=t.data;if(-1!==t.status){var r=a&&a[0],i=r.fields,o=void 0===i?[]:i,l=Object(R.a)(r,Ct);l.menuBuilder&&(l.menuBuilder=Object(U.a)(Object(U.a)({},d.menuBuilder),l.menuBuilder)),Object(Ee.f)(o.map((function(e){return e.id})),n,l),n((function(e){e.customModel=r,e.model=r,e.loader=!1,e.removedCustomFields=[]}))}else{var c=a||{},s=c.message,u=void 0===s?"":s,f=c.title,m=u;f&&f.includes(Object(C.r)("Unique constraint violation"))&&(m=Object(C.r)("Model name should be unique"),u.includes("com.axelor.meta.db.MetaJsonRecord")&&(m=Object(C.r)("Field name should be unique")));var p={message:m,type:"alert"};n((function(e){e.loader=!1,e.dialog=p}))}})),e.next=114;break;case 37:if(!a.widgets){e.next=114;break}if(h=["viewId","modelId","version","helpOverride","menubar","xml","computed","xmlId","type","cols","colSpan","serverType"],a.exView&&!C.g.isCreatedFromStudio(a.exView)){e.next=61;break}if((j=a.widgets[-1]).name&&j.title){e.next=45;break}return x={message:"Please enter form name and title",type:"alert"},n((function(e){e.loader=!1,e.dialog=x})),e.abrupt("return");case 45:return e.next=47,Mt.search({data:{_domain:"self.name = '".concat(j.name,"'")}});case 47:if(!((k=e.sent)&&k.total&&k.total>0)||(null===(y=a.exView)||void 0===y?void 0:y.id)){e.next=52;break}return T={message:"View name already exists",type:"alert"},n((function(e){e.loader=!1,e.dialog=T})),e.abrupt("return");case 52:S=Object(Ot.a)(a.widgets,a.items,a.modelType),M=a.model.fullName,E={elements:[{name:"form",type:"element",attributes:Object(U.a)(Object(U.a)({model:M},C.g.getFormProperties(j,[].concat(h,["extension","id"]))),{},{id:a.exView&&a.exView.xmlId?a.exView.xmlId:"studio-".concat(j.name)}),elements:Object(l.a)(S)}]},F=C.g.processXML(rt.a.json2xml(E,{compact:!1,fullTagEmptyElement:!1})),I={xml:F,extension:j.extension,type:"form",name:j.name,title:j.title,model:M,xmlId:"studio-".concat(j.name)},a.exView&&a.exView.id&&(I.id=a.exView.id,I.version=a.exView.version,I.xmlId=a.exView.xmlId||I.xmlId),Mt.save(I).then(function(){var e=Object(_.a)(P.a.mark((function e(t){var a,r,i,o;return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(-1!==t.status){e.next=6;break}a=t.data,r={title:a.title,message:a.string||a.message,type:"alert"},n((function(e){e.loader=!1,e.dialog=r})),e.next=11;break;case 6:if(!t.data||!t.data[0]){e.next=11;break}return e.next=9,Mt.fetch(t.data[0].id);case 9:(i=e.sent).data&&i.data[0]&&(o=i.data[0],n((function(e){var t=C.g.generateXMLToViewSchema({view:o,fields:e.metaFieldStore});e.widgets=t.widgets,e.initialWidgets=t.widgets,e.items=t.items,e.initialItems=t.items,e.metaView=o,e.exView=o,e.selectedView=Object(U.a)({},o),e.loader=!1})));case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),e.next=114;break;case 61:if(N=a.view.view,A=a.model.fullName,L=C.g.generateViewFromJson({view:a.originalXML,fields:a.metaFieldStore}),V=Ft(L),q=Tt(a),B=kt(a,V),D=B.changedAttrsList,J=B.removedAttrsList,z=Object(jt.b)(q,a),X=!1,H=[],!D.length){e.next=76;break}return X=!0,Y=Object.values(W.l),Z=D.map((function(e){return[].concat(Object(l.a)(Y),Object(l.a)(W.m)).includes(e.name)?e:Object(U.a)(Object(U.a)({},e),{},{value:'"'.concat(e.value,'"')})})),e.next=76,Object(Ee.r)(Z);case 76:if(!J.length){e.next=80;break}return X=!0,e.next=80,Object(Ee.a)(J);case 80:if(!X){e.next=84;break}return e.next=83,Object(Ee.c)({model:a.model.fullName,view:a.selectedView.name});case 83:H=e.sent;case 84:if(G=It(a.translationList,a.initialTranslationList,a.removedTranslationList),Q=G.changedTranslationList,$=G.deletedTranslationList,K=[],ee=!1,!Q.length){e.next=91;break}return ee=!0,e.next=91,Object(Ee.t)(Q);case 91:if(!$.length){e.next=95;break}return ee=!0,e.next=95,Object(Ee.b)($);case 95:if(!ee){e.next=101;break}return te=Object.values(a.widgets).filter((function(e){return e.title&&e.title.startsWith("studio:")})).map((function(e){return e.title})),e.next=99,Object(Ee.m)(te);case 99:K=e.sent,n((function(e){e.translationList=K,e.initialTranslationList=K,e.removedTranslationList=[]}));case 101:if(z.length||a.extensionXML){e.next=104;break}return a.extensionView?O():n((function(e){e.loader=!1;var t=e.view;if(X){var a=C.g.generateXMLToViewSchema({view:t.view,fields:e.metaFieldStore,extensionXML:t.extensionXML,attrsList:H});e.widgets=a.widgets,e.initialWidgets=a.widgets,e.items=a.items,e.initialItems=a.items,e.extensionMoves=[],e.attrsList=H,Object(ut.b)(e)}})),e.abrupt("return");case 104:if(ae=function(e){if(!e)return[];var t=e.elements;return t[0]&&t[0].elements?t[0].elements:void 0},ne={elements:[{type:"element",name:a.widgets[-1].type,attributes:{model:A,id:"studio-".concat(N.name),title:a.widgets[-1].title,name:N.name,extension:"true"},elements:[].concat(Object(l.a)(ae(a.extensionXML)),Object(l.a)(z))}]},re=C.g.processXML(rt.a.json2xml(ne,{compact:!1,fullTagEmptyElement:!1})),ie={xml:re,extension:!0,type:a.widgets[-1].type},ie=a.extensionView?Object(U.a)(Object(U.a)({},ie),{},{id:a.extensionView.id,version:a.extensionView.version}):Object(U.a)(Object(U.a)({},ie),{},{model:A,name:N.name,title:N.title,xmlId:"studio-".concat(N.name)}),!a.extensionView){e.next=113;break}if(a.extensionView.xml!==ie.xml){e.next=113;break}return n((function(e){e.loader=!1,X&&n((function(e){e.loader=!1;var t=e.view,a=C.g.generateXMLToViewSchema({view:t.view,fields:e.metaFieldStore,extensionXML:t.extensionXML,attrsList:H});e.widgets=a.widgets,e.initialWidgets=a.widgets,e.items=a.items,e.initialItems=a.items,X&&(e.attrsList=H),Object(ut.b)(e)}))})),e.abrupt("return");case 113:Mt.save(ie).then(function(){var e=Object(_.a)(P.a.mark((function e(t){var r,i,o,l;return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(-1!==t.status){e.next=5;break}r={message:t.data.string,type:"alert"},n((function(e){e.loader=!1,e.dialog=r})),e.next=12;break;case 5:if(!t.data||!t.data[0]){e.next=12;break}return i=t.data[0],o=a.view.view,e.next=10,Object(Ee.i)(o);case 10:l=e.sent,n((function(e){var a=C.g.generateXMLToViewSchema({view:l.view,fields:e.metaFieldStore,extensionXML:l.extensionXML,attrsList:H});e.widgets=a.widgets,e.initialWidgets=a.widgets,e.items=a.items,e.initialItems=a.items,e.exView=t.data[0],e.extensionMoves=[],e.loader=!1,X&&(e.attrsList=H),e.extensionView=Object(U.a)(Object(U.a)(Object(U.a)({},e.extensionView),i),{},{version:l.extensionXML.id===i.id?l.extensionXML.version:i.version}),Object(ut.b)(e)}));case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 114:case"end":return e.stop()}}),e)}))),[a,n,i,w,O]),k=r.a.useCallback((function(){n((function(e){e.dialog=null}))}),[n]),T=r.a.useCallback((function(){i(),y((function(e){s(e)}))}),[y,i,s]);r.a.useEffect((function(){y((function(e){e.modelType=W.h.CUSTOM}))}),[y]);var S=r.a.useCallback(Object(_.a)(P.a.mark((function e(){var t,r,o,l,c,s,u,d,f,m,p,b,g,v,y;return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!a.customFieldItems&&!a.removedCustomFields.length||!(null===(t=a.modelField)||void 0===t?void 0:t.name)){e.next=33;break}if(w()){e.next=3;break}return e.abrupt("return");case 3:if(r=Object.fromEntries(Object.entries(a.customFieldWidgets).filter((function(e){var t,a=Object(D.a)(e,2)[1];return a.type===W.g.CONTAINER&&(null===(t=a.items)||void 0===t?void 0:t.length)>0||Object(C.o)(a)||a.type!==W.g.CONTAINER||"number"===typeof a.id}))),o=Object.values(r||{})||[],!((new Set(o.map((function(e){return e.name})))||[]).size<(o&&o.filter((function(e){return"customForm"!==e.type}))||[]).length)){e.next=10;break}return l={message:Object(C.r)("Field name should be unique"),type:"alert"},n((function(e){e.loader=!1,e.dialog=l})),e.abrupt("return");case 10:if(i(),c={modelField:a.modelField.name,model:a.model.fullName},s=C.g.getCustomModelFields(a.customFieldItems,r,c,!0),!(u=s.fields).length&&!a.removedCustomFields.length){e.next=32;break}return d=u.map((function(e){return Et.save(e)})),e.next=17,Promise.all(d);case 17:if(f=e.sent,!(m=f&&f.find((function(e){return-1===e.status})))||!m.data){e.next=26;break}return p=m.data||{},b=p.title,g=p.message,v=g,b&&b.includes(Object(C.r)("Unique constraint violation"))&&(v=Object(C.r)("Field name should be unique")),y={message:v,type:"alert"},n((function(e){e.loader=!1,e.dialog=y})),e.abrupt("return");case 26:if(!a.removedCustomFields.length){e.next=29;break}return e.next=29,Et.removeAll(a.removedCustomFields);case 29:Object(Ee.d)(a.modelField,a.model).then((function(e){var t=e.data,a=void 0===t?[]:t,r=Object(C.h)(a,void 0,"","customForm");n((function(e){e.customFieldWidgets=r.widgets,e.customFieldItems=r.items,e.customFields=a,e.loader=!1,e.removedCustomFields=[]}))})),e.next=33;break;case 32:h();case 33:case"end":return e.stop()}}),e)}))),[n,h,a,i,w]),M=r.a.useCallback((function(){m(!1)}),[]),E=r.a.useCallback((function(){m(!0)}),[]),F=r.a.useCallback((function(){M(),O()}),[O,M]),I=r.a.useCallback((function(){n((function(e){e.sidePanel=!e.sidePanel}))}),[n]);return r.a.createElement(r.a.Fragment,null,function(){var e=a.dialog;return e&&r.a.createElement(le.a,{open:Boolean(Object(C.r)(e.message))},r.a.createElement(ue.a,null,Object(C.r)(e.title||"Alert")),r.a.createElement(se.a,null,r.a.createElement("div",{dangerouslySetInnerHTML:{__html:Object(C.r)(e.message)}})),r.a.createElement(ce.a,null,r.a.createElement(te.a,{onClick:k,color:"primary",autoFocus:!0},"OK")))}(),r.a.createElement(yt,{update:n,saveView:x,saveCustomFieldView:S,removeView:E,model:a.model,extensionView:a.extensionView,modelType:a.modelType,onNew:T,modelField:a.modelField,customModel:a.customModel,selectedView:a.selectedView,startLoader:i,errorList:a.errorList,entityType:a.entityType,metaFieldStore:a.metaFieldStore,undo:o,redo:c,refresh:j,pastLength:a.past.length,futureLength:a.future.length,clearHistory:s,onSidePanelToggle:I,reset:y}),r.a.createElement(Ne,{open:f,onClose:M,onOk:F,message:"Are you sure? Do you want to delete it?"}))})),At=Object(d.a)({container:{display:"flex",height:"100%",flexDirection:"column",flexWrap:"nowrap"},toolbarWrapper:{flex:0,display:"flex",flexWrap:"wrap"},panelContainer:{display:"flex",flex:1,overflow:"hidden"},sidePanel:{height:"100%",".modern-dark &":{backgroundColor:"#202124"}},mainPanel:{height:"100%",overflow:"auto",".modern-dark &":{backgroundColor:"#202124"}}}),Lt=Object(f.a)({typography:{fontFamily:'"Open Sans", "Helvetica Neue", Helvetica, Arial, sans-serif'}});function Wt(){var e=At(),t=Object(c.a)(),a=Object(L.b)(),n=a.state,i=a.update,o=n.sidePanel,d=void 0===o||o,f=Object(s.a)(t.breakpoints.down("sm")),m=r.a.useRef();return r.a.useEffect((function(){Object(Ee.g)().then((function(e){i((function(t){t.languageList=Object(l.a)(e)}))})),Object(Ee.h)().then((function(e){e&&e.theme&&(document.body.className=e.theme)})),Object(Ee.k)().then((function(e){i((function(t){t.enableAppBuilder=e}))}))}),[i]),r.a.useEffect((function(){i((function(e){e.sidePanel=!f}))}),[f,i]),r.a.useEffect((function(){var e=m.current;e&&e.focus()}),[]),r.a.createElement(u.a,{container:!0,className:e.container,tabIndex:0,ref:m},r.a.createElement(u.a,{item:!0,xs:12,className:e.toolbarWrapper},r.a.createElement(Nt,null)),r.a.createElement(u.a,{container:!0,className:e.panelContainer},d&&r.a.createElement(u.a,{item:!0,xs:f?4:3,className:e.sidePanel},r.a.createElement(Ge,null)),r.a.createElement(u.a,{item:!0,xs:d?f?8:9:12,className:e.mainPanel},r.a.createElement(at,null))))}function Vt(){return r.a.createElement(L.a,null,r.a.createElement(p.a,{backend:b.a},r.a.createElement(m.a,{theme:Lt},r.a.createElement(Wt,null))))}o.a.render(r.a.createElement(Vt,null),document.getElementById("root"))},27:function(e,t,a){"use strict";var n,r=a(106),i=a(107),o=a(4),l=a(162),c=a.n(l),s={"X-Requested-With":"XMLHttpRequest","Content-Type":"application/json",Accept:"application/json"},u={};function d(e){var t=document.cookie||"";return t!==n&&(n=t,u=t.split("; ").reduce((function(e,t){var a=t.split("=");return e[a[0]]=a[1],e}),{})),u[e]}var f=function(e,t){return"ws/rest/".concat(e,"/").concat(t)},m=new(function(){function e(t){Object(r.a)(this,e),this.baseURL="../../"}return Object(i.a)(e,[{key:"request",value:function(e,t,a){var n={};return"get"!==t&&(n.data=a),c()(Object(o.a)({method:t,baseURL:this.baseURL,headers:Object(o.a)(Object(o.a)({},s),{},{"X-CSRF-Token":d("CSRF-TOKEN")}),url:e},n))}},{key:"interceptor",value:function(e,t,a){var n=this;return this.request(e,t,a).then((function(r){if(200===r.status)return r.data||{status:r.status};if(401===r.status){var i=localStorage.getItem("credential");if(i){var o=JSON.parse(i),l=o.username,c=o.password;return n.login(l,c).then((function(r){if(200===r.status)return n.interceptor(e,t,a)}))}}return Promise.resolve("Error")})).catch((function(r){if(r.response&&401===r.response.status)return n.relogin(e,t,a)}))}},{key:"relogin",value:function(e,t,a){var n=this,r=localStorage.getItem("credential");if(r){var i=JSON.parse(r),o=i.username,l=i.password;return this.login(o,l).then((function(r){if(200===r.status)return n.interceptor(e,t,a)}))}}},{key:"get",value:function(e){return this.interceptor(e,"get")}},{key:"post",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.interceptor(e,"post",t)}},{key:"delete",value:function(e,t){return this.interceptor(e,"delete",t)}},{key:"login",value:function(e,t){var a={username:e,password:t};return this.interceptor("login.jsp","post",a).then((function(a){return 200===a.status&&localStorage.setItem("credential",JSON.stringify({username:e,password:t})),{status:a.status}}))}},{key:"logout",value:function(){return this.interceptor("logout").then((function(){localStorage.removeItem("credential")}))}}]),e}()),p=function(){function e(t){Object(r.a)(this,e),this.model=t.model}return Object(i.a)(e,[{key:"search",value:function(e){var t=e.fields,a=e.sortBy,n=e.data,r=e.limit,i=e.offset,o=f(this.model,"search");return m.post(o,{fields:t,sortBy:a,data:n,limit:r,offset:i})}},{key:"fetch",value:function(e,t){var a="".concat(e,"/fetch"),n=f(this.model,a);return m.post(n,t)}},{key:"view",value:function(e){return m.post("/ws/meta/view",e)}},{key:"save",value:function(e){var t=f(this.model,"");return m.post(t,{data:e})}},{key:"saveAll",value:function(e){var t=f(this.model,"");return m.post(t,{records:e})}},{key:"removeAll",value:function(e){var t=f(this.model,"removeAll");return m.post(t,{records:e})}},{key:"login",value:function(e,t){return m.login(e,t)}},{key:"logout",value:function(){return m.logout()}},{key:"action",value:function(e){return m.post("ws/action",e)}},{key:"info",value:function(){return m.get("ws/app/info")}}]),e}();t.a=p},31:function(e,t,a){"use strict";a.d(t,"b",(function(){return v}));var n=a(4),r=a(10),i=a(21),o=a(0),l=a.n(o),c=a(25),s=a(28),u=a.n(s),d=a(2),f=a(5),m=a(63),p=a(34),b=a(66),g=l.a.createContext();function v(){return l.a.useContext(g)}t.a=function(e){var t=e.children,a=function(e){var t=l.a.useState(e),a=Object(i.a)(t,2),n=a[0],r=a[1];return[n,l.a.useCallback((function(e){return r(Object(c.a)(e))}),[r])]}({future:[],past:[],title:"",items:[],widgets:null,dragWidget:null,editWidget:null,hoverWidget:null,initialWidgets:null,initialItems:null,tabIndex:0,modelType:"BASE",customFields:[],customFieldItems:[],customFieldWidgets:null,modelField:null,hoverAttr:{},loader:!1,removedCustomFields:[],errorList:{},entityType:d.c.META,actualType:null,extensionMoves:[],sidePanel:!0,attrsList:[],removedTranslationList:[]}),o=Object(i.a)(a,2),s=o[0],v=o[1],h=s.widgets;function y(e,t){var a="customField"===t?s.customFieldWidgets:s.widgets;return function e(t){var n=a[t].items;return(void 0===n?[]:n).reduce((function(t,a){return t.concat(e(a))}),[t])}(e)}function O(e,t){t.exView&&!f.g.isCreatedFromStudio(t.exView)&&Object(m.a)(e,t)}function j(e,t){var a=e.id,n=e.props,r=e.reset,i=void 0!==r&&r,o=function(e){S(e);var t="customField"===e.editWidgetType,r=[];Object(f.q)(n,e,a,t);var o="customField"===e.editWidgetType?e.customFieldWidgets:e.widgets;i&&(o[a]={});var l="customField"===e.editWidgetType&&e.customFieldWidgets?e.customFieldWidgets[a]:e.widgets[a];l&&Object.keys(n).forEach((function(e){var t=n[e];/^[a-z]/i.test(l.name)&&(l.name=Object(f.d)(l.name,!(n.type===d.k.form)));if((void 0===l[e]?"":l[e])!==t){var i=-1===a?"/":o[a].xPath,c=[void 0,null].includes(t)?"":t;Object(f.n)(s)&&r.push({name:"attribute",target:i,attributes:{name:f.g.keyReplacer(e,d.h.BASE),value:f.g.valueConverter(c,e)},id:a})}if("colSpan"===e){var u=Object.keys(o).find((function(e){return(o[e].items||[]).indexOf(a)>-1}));if(t=Math.min(Number(o[u]&&o[u].cols||t),t),o&&u&&o[u].type===d.k.panel)t=JSON.parse((o[u]||{}).widgetAttrs||"{}").itemSpan||t}else if("cols"===e&&t)t=Math.min(12,Number(t));else if("widgetAttrs"===e){var m=JSON.parse(t||"{}"),p=o[a].items;p&&p.forEach((function(e){var t=o[e];JSON.parse(t.widgetAttrs||"{}").colSpan||(t.colSpan=m.itemSpan)}))}l[e]=t,"layout"===e&&t===d.j.stack&&(l.cols=12)})),"customField"!==e.editWidgetType&&e.modelType===d.h.BASE&&(O(r,e),Object(p.b)(e))};t?o(t):v(o)}function w(e,t){var a=e.id,n=void 0===a?null:a,r=e.type,i=void 0===r?null:r,o=function(e){e.editWidget=n,e.tabIndex=0,e.editWidgetType=i};t?o(t):v(o)}function x(e,t){var a=e.attrs,i=e.id,o=u.a.uniqueId(),l=function(e){var t=e.modelType===d.h.BASE?"customFieldWidgets":"widgets";e[t][i]=Object(n.a)(Object(n.a)({},a),{},{items:[].concat(Object(r.a)(a.items||[]),[o])}),e[t][o]=Object(n.a)(Object(n.a)({},d.i),{},{name:"panel".concat(o),title:"Tab",widgetAttrs:JSON.stringify({tab:"true"})})};t?l(t):v(l),j({id:i,props:{current:o}},t)}var k=l.a.useCallback((function(){v((function(e){e.loader=!0}))}),[v]);function T(e,t){Object.keys(e).forEach((function(a){t[a]=Object(c.b)(e[a])}))}function S(e){e.past.push({widgets:Object(c.b)(e.widgets),items:Object(c.b)(e.items),extensionMoves:Object(c.b)(e.extensionMoves),customFieldWidgets:Object(c.b)(e.customFieldWidgets),customFields:Object(c.b)(e.customFields),customFieldItems:Object(c.b)(e.customFieldItems),metaFields:Object(c.b)(e.metaFields),removedCustomFields:Object(c.b)(e.removedCustomFields),errorList:Object(c.b)(e.errorList)}),e.future.length&&(e.future=[])}var C={onWidgetChange:j,onMove:function(e,t,a){var n=e.source,r=e.destination,i=function(e){return{isMoved:e}};if(!n||!r||r.id===d.f.form&&s.items.length>1)return i(!1);if(Object.values(d.f.createWidgets).indexOf(n.id)>-1)return i(!0);var o="customField"===a?s.customFieldWidgets:h;return!n.attrs.isNew&&Object(f.e)(o,n,r)||[d.k.panel,d.k.tabs].includes(n.attrs.type)&&y(n.id,a).indexOf(r.id===d.f.dumpField?r.panelId:r.id)>-1?i(!1):i(!0)},onDrag:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=t.props,i=t.isDrop;v((function(t){var o=[],l=a.attrs,c=void 0===l?{}:l,u=Object(n.a)({type:c.type,title:c.label,name:c.name,relationship:c.relationship,mappedBy:c.mappedBy},c);c&&"string"===c.name&&(u.visibleInGrid=!0),c&&"selection"===c.name&&(u.updateSelection=!0);var m=t.dragWidget,g=t.hoverWidget,v=t.editWidget,h=t.dragWidgetProps,y=t.widgets,j=t.customFieldWidgets;t.dragWidget=null,t.hoverWidget=null;var k=Object(n.a)({},t.hoverAttr);if(u.widgetAttrs&&k.widgetAttrs){var T=JSON.parse(k.widgetAttrs||"{}"),C=JSON.parse(u.widgetAttrs||"{}");k.widgetAttrs=JSON.stringify(Object(n.a)(Object(n.a)({},C),T))}if(t.dragWidgetProps=Object.assign({},a,{attrs:Object(n.a)(Object(n.a)({},u),k)}),v&&v===m&&(t.editWidget=null),i){var M,E,F,I,N;if(!g||!h)return;S(t);var A=t.metaFields.findIndex((function(e){return e.typeName===h.attrs.typeName&&e.name===h.attrs.name}));-1!==A&&t.metaFields.splice(A,1),h.attrs=Object(n.a)(Object(n.a)({},h.attrs),t.hoverAttr);var L,W=Object(f.p)({hoverWidget:g,dragWidgetProps:h})(t),V=W.extendList,q=W.newId;if(o.push.apply(o,Object(r.a)(V)),"customField"!==g._type&&(L=t.widgets[g.panelId]),g.panelId&&![d.k.menubar,d.k.toolbar].includes(null===(M=L)||void 0===M?void 0:M.type)){var B=Object(f.f)(t,g.panelId,g._type).extendList,P=void 0===B?[]:B;o.push.apply(o,Object(r.a)(P))}if(h.panelId&&g.panelId!==h.panelId&&![d.k.menubar,d.k.toolbar].includes(null===(E=L)||void 0===E?void 0:E.type)){var _=Object(f.f)(t,h.panelId,g._type).extendList,U=void 0===_?[]:_;o.push.apply(o,Object(r.a)(U))}if("customField"!==g._type&&t.modelType===d.h.BASE&&(Object(b.c)(t,h.panelId),Object(b.c)(t,g.panelId),O(o,t),Object(p.b)(t)),t.hoverAttr={},(null===h||void 0===h||null===(F=h.attrs)||void 0===F?void 0:F.type)===d.k.tabs&&!(null===h||void 0===h||null===(I=h.attrs)||void 0===I||null===(N=I.items)||void 0===N?void 0:N.length)){var R,D,J=t.modelType===d.h.BASE?j:y,z=null===(R=Object.keys(J||{}))||void 0===R?void 0:R.find((function(e){var t;return(null===(t=J[e])||void 0===t?void 0:t.type)===d.k.tabs}));x({attrs:null===(D=s.dragWidgetProps)||void 0===D?void 0:D.attrs,id:z},t)}q&&w({id:q,type:null===g||void 0===g?void 0:g._type},t)}else t.dragWidget=e}))},onRemove:function(e,t,a,n){var i=[],o="customField"===n;window.confirm(Object(f.r)("Sure want to delete?"))&&v((function(l){S(l);var c="customField"===n?l.customFieldWidgets:l.widgets,u="customField"===n?"customFieldItems":"items",m=c[a];if(!o&&l.modelType===d.h.BASE){var g=l.metaFieldStore.findIndex((function(e){return(e.typeName===m.typeName||"field"===m.type)&&e.name===m.name}));-1!==g&&l.metaFields.unshift(l.metaFieldStore[g])}var v=e&&d.f.form!==e;if((t=(v?c[e].items:l[u]).findIndex((function(e){return"".concat(e)==="".concat(a)})))>-1&&c[a]){var h=y(a,n);h.forEach((function(e){if(o||s.modelType===d.h.CUSTOM){var t=c[e];t.id&&(s.modelType!==d.h.CUSTOM||t.version)&&l.removedCustomFields.push({id:t.id,version:t.version})}}));var j=Object(r.a)(h);if(v)if(c[e].layout!==d.j.grid||[d.k.menubar,d.k.toolbar].includes(c[e].type))c[e].items.splice(t,1);else{var w=Object(f.a)(l,{panelId:e,index:t,id:a},n);h=h.concat(w.ids),Object(f.n)(s)&&i.push.apply(i,Object(r.a)(w.extendList))}else l[u].splice(t,1);c[a]&&Object(f.n)(s)&&i.push({name:"replace",target:c[a].xPath}),h.forEach((function(e){c[e]&&(j.includes(e)||Object(f.n)(s)&&i.push({name:"replace",target:c[e].xPath}),delete c[e])})),h.indexOf(l.editWidget)>-1&&(l.editWidget=null)}Object(b.b)(l,a),o||l.modelType!==d.h.BASE||(Object(b.c)(l,e),O(i,l),Object(p.b)(l))}))},onHover:function(e){v((function(t){t.hoverWidget=e}))},onSelect:w,state:s,update:v,setHoverAttr:function(e){v((function(t){t.hoverAttr=e}))},startLoader:k,undo:function(){v((function(e){e.past.length&&(e.future.unshift({widgets:Object(c.b)(e.widgets),items:Object(c.b)(e.items),extensionMoves:Object(c.b)(e.extensionMoves),customFieldWidgets:Object(c.b)(e.customFieldWidgets),customFields:Object(c.b)(e.customFields),customFieldItems:Object(c.b)(e.customFieldItems),metaFields:Object(c.b)(e.metaFields),removedCustomFields:Object(c.b)(e.removedCustomFields),errorList:Object(c.b)(e.errorList)}),T(e.past[e.past.length-1],e),e.past.splice(e.past.length-1,1))}))},redo:function(){v((function(e){e.future.length&&(e.past.push({widgets:Object(c.b)(e.widgets),items:Object(c.b)(e.items),extensionMoves:Object(c.b)(e.extensionMoves),customFieldWidgets:Object(c.b)(e.customFieldWidgets),customFieldItems:Object(c.b)(e.customFieldItems),metaFields:Object(c.b)(e.metaFields),customFields:Object(c.b)(e.customFields),removedCustomFields:Object(c.b)(e.removedCustomFields),errorList:Object(c.b)(e.errorList)}),T(e.future[0],e),e.future.splice(0,1))}))},clearHistory:function(e){e.future=[],e.past=[]},onTranslationRemove:function(e){v((function(t){t.removedTranslationList.push(e)}))},addTabPanel:x};return l.a.createElement(g.Provider,{value:C},t)}},34:function(e,t,a){"use strict";a.d(t,"a",(function(){return o})),a.d(t,"b",(function(){return l}));var n=a(5),r=a(2),i=function(e){return["viewer","editor","hilite"].includes(e)?"field":e};function o(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],a=arguments.length>2?arguments[2]:void 0,l=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"";if(-1===a)return"";var c=""===l,s=function(t,a){var n=e[a];return t.filter((function(t){return t!==a&&e[t]&&[e[t].name,e[t].originalName].includes(n.name)})).length>0},u=function(t,a){var n=e[a];return t.filter((function(t){return e[t]&&[e[t].name,e[t].originalName].includes(n.name)})).indexOf(a)+1},d=function(t,a,r){return t.filter((function(t){return e[t]&&i(n.g.getWidgetType(e[t],"field"))===a})).indexOf(r)+1},f=function(){var t=e[a];return!!t.name&&1===Object.values(e).filter((function(e){return e.name===t.name})).length},m=function(){return!c&&!!f()},p=!0,b=Object.values(e),g=Object.keys(e);if(b.forEach((function(r,c){if(r.items&&-1!==r.items.findIndex((function(e){return e===a}))){p=!1;var f=e[a],b=i(n.g.getWidgetType(f,"field"));if(f.name){var v="/".concat(b,"[@name='").concat(f.name,"']");if(s(r.items,a)){var h=u(r.items,a);h>0&&(v="".concat(v,"[").concat(h,"]"))}l="".concat(v).concat(l)}else{var y=d(r.items,b,a);l="/".concat(b,"[").concat(y,"]").concat(l)}l=m()?"/".concat(l):o(e,t,g[c],l)}})),p){var v=t.findIndex((function(e){return e===a}));if(-1!==v){var h=e[a];if(h.name){var y="//".concat(h.type,"[@name='").concat(h.name,"']");if([r.k.menubar,r.k.toolbar,r.k.divider].includes(h.type)&&(y="//".concat(h.type)),s(t,a)){var O=u(t,a);O>0&&(y="".concat(y,"[").concat(O,"]"))}l="".concat(y).concat(l)}else{var j=d(t,h.type,a);l="//".concat(h.type,"[").concat(j,"]").concat(l)}}}return l}function l(e){Object.keys(e.widgets).forEach((function(t){var a=o(e.widgets,e.items,t);e.widgets[t].xPath=a}))}},5:function(e,t,a){"use strict";a.d(t,"b",(function(){return w})),a.d(t,"d",(function(){return x})),a.d(t,"c",(function(){return k})),a.d(t,"r",(function(){return T})),a.d(t,"f",(function(){return E})),a.d(t,"a",(function(){return F})),a.d(t,"q",(function(){return I})),a.d(t,"n",(function(){return N})),a.d(t,"p",(function(){return A})),a.d(t,"e",(function(){return L})),a.d(t,"o",(function(){return W})),a.d(t,"k",(function(){return B})),a.d(t,"h",(function(){return P})),a.d(t,"l",(function(){return H})),a.d(t,"m",(function(){return Y})),a.d(t,"i",(function(){return te})),a.d(t,"j",(function(){return ae}));var n=a(15),r=a(10),i=a(4),o=a(16),l=a(28),c=a.n(l),s=a(2),u=a(86),d=a(52),f=a.n(d),m=a(66),p=a(153),b=a.n(p),g=a(34),v=a(63),h=a(154),y=a.n(h),O=["widget","id"],j=["type"];function w(e){return e&&e.replace(/([A-Z])/g," $1").replace(/^./,(function(e){return e.toUpperCase()}))}var x=function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(e){var a;if(e=e.trim(),t)a=Object(l.camelCase)(e);else{var n=Object(l.camelCase)(e);a=n[0].toUpperCase()+n.slice(1)}return a}},k=function(e){var t=e.replace(/([A-Z])/g," $1");return t&&t.charAt(0).toUpperCase()+t.slice(1).toLowerCase()};function T(e){return window&&window.top&&window.top._t&&"string"===typeof e?window.top._t(e):e}var S=function(e){var t=e.widget,a=e.id,n=Object(o.a)(e,O);return Object(i.a)({colSpan:t.colSpan||1,serverType:s.d.spacer,type:s.k.field,isDummy:!0,name:"spacer".concat(a),title:"Spacer"},n)},C=function(e,t){var a=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=a?e.customFieldWidgets:e.widgets;return!0===t||n[t]&&n[t].isDummy},M=function(e,t,a){var n=t.cols,r=void 0===n?12:n,i=t.items,o=arguments.length>3&&void 0!==arguments[3]&&arguments[3],l=o?e.customFieldWidgets:e.widgets,c=[],s=0,u=0,d=[],f=function(e){for(var t=e;t<r;t++)d.push({index:t,item:!0,colSpan:1,indices:[t]})};return i.forEach((function(e){var t=Number(l[e].colSpan||1);(u+=t)>r&&(f(s),s=0,u=t,c.push(d),d=[]),a&&a(e,{column:s,row:c.length}),d.push({index:s,item:e,colSpan:t,indices:new Array(t).fill(0).map((function(e,t){return s+t}))}),s+=t})),f(s),c.push(d),c},E=function(e,t,a){var n=[],r="customField"===a,i=r?e.customFieldWidgets:e.widgets,o=i[t];if(o.layout!==s.j.grid)return{};var l=o.cols,c=void 0===l?12:l,u=o.items,d=M(e,{cols:c,items:u},null,r),f=[],m={};return d.forEach((function(t){t.forEach((function(t,a){if(C(e,t.item,r)){var n=m[t.index]||[];n.push(t),m[t.index]=n}})),t.every((function(t){return C(e,t.item,r)}))&&(f=f.concat(t.map((function(e){return e.item}))))})),f.length&&(o.items=o.items.filter((function(e){return-1===f.indexOf(e)})),f.forEach((function(t){i[t]&&(N(e)&&n.push({name:"replace",target:i[t].xPath,id:t}),i[t]&&delete i[t])}))),{extendList:n}},F=function(e,t,a){var n=t.id,o=t.index,l=t.panelId,u=[],d="customField"===a,f=d?e.customFieldWidgets:e.widgets,m=f[l],p=f[n]||{colSpan:1},b=m.cols,g=void 0===b?12:b,v=m.items,h=m.items[m.items.length-1]===n,y={column:null,row:null},O=[],j=[],w=[],x=M(e,{cols:g,items:v},(function(e,t){e===n&&(y=t)}),d);x.forEach((function(e,t){y.row===t&&(j=e.map((function(e){return e.item})));var a=e.find((function(e){return e.index===y.column}));a&&w.push(a.item)}));var k=m.items.splice(o,1),T=function(t){return t===n||C(e,t,d)};if(j.every(T)&&(m.items=m.items.filter((function(e){return!j.includes(e)})),O=O.concat(j)),x.length-1===w.length&&w.every(T)&&(m.items=m.items.filter((function(e){return!w.includes(e)})),O=O.concat(w)),0===O.length&&!f[k].isDummy&&!h){var E=c.a.uniqueId(),F={};e.modelType===s.h.CUSTOM&&(F={model:p.model,modelField:p.modelField}),f[E]=S(Object(i.a)({widget:{},id:E,colSpan:p.colSpan},F));var I=f[m.items[o]];N(e)&&u.push({name:"insert",position:"before",elements:[f[E]],target:I.xPath}),m.items.splice(o,0,E)}return{ids:[].concat(Object(r.a)(O),[n]),extendList:u}},I=function(e,t,a,n){var r=Object(m.a)(e,t.modelType,n);Object.keys(r).length?t.errorList[a]=r:t.errorList[a]&&delete t.errorList[a]};function N(e){return e.exView&&!z(e.exView)}var A=function(e){var t=e.hoverWidget,a=e.dragWidgetProps;return function(e){var n,r=[],o="customField"===t._type,l="customField"!==t._type||a.panelId?"items":"customFieldItems",u="customField"!==t._type||t.panelId?"items":"customFieldItems",d="customField"===t._type?e.customFieldWidgets:e.widgets,f=((t.panelId?d[t.panelId]:e)[u]||[]).slice(),m=t.meta,p=m.colSpan,b=m.grid,h=void 0===b?[]:b,y=m.row,O=m.relatedColSpan;a.attrs&&void 0!==a.attrs.isNew&&delete a.attrs.isNew;var j=d[t.panelId],w=null===j||void 0===j?void 0:j.serverType;if(a.attrs&&!a.attrs.colSpan)if(p&&a.attrs&&![s.k.menu,s.k.menuItem,s.k.divider].includes(a.attrs.type)&&![s.k.toolbar,s.k.menubar].includes(w)){var x=a.attrs.colSpan;if(w===s.k.panel&&Number(j.itemSpan)?a.attrs.colSpan=Number(j.itemSpan):a.attrs.colSpan=O||p,o){var k={colSpan:O||p};a.attrs.widgetAttrs=JSON.stringify(k)}if("".concat(a.attrs.colSpan)!=="".concat(x)){if(e.modelType===s.h.CUSTOM){var T=JSON.parse(a.attrs.widgetAttrs||"{}");T.colSpan=O||p,a.attrs.widgetAttrs=JSON.stringify(T)}N(e)&&r.push({name:"attribute",target:a.attrs.xPath,attributes:{name:"colSpan",value:a.attrs.colSpan}})}if(e.modelType===s.h.CUSTOM){var C=JSON.parse(a.attrs.widgetAttrs||"{}");C.colSpan=6,a.attrs.widgetAttrs=JSON.stringify(C)}}else if(a.attrs&&e.modelType===s.h.CUSTOM){var M=JSON.parse(a.attrs.widgetAttrs||"{}");M.colSpan=O||p,a.attrs.colSpan=O||p,a.attrs.widgetAttrs=JSON.stringify(M)}var E=[],F=function(e){var t=e.grid,a=e.items,n=e.widgetIndex,r=e.hoverCellRowIndex,o=[],l=[],c=!0,s=0;if(t.length&&(t.forEach((function(e,t){e.colSpan=Number(e.colSpan||1),e.id&&c&&t<n&&(s=a.indexOf(e.id)+1),!e.separator&&e.rowIndex<=r&&(t<n?e.id?(o=[],s=a.indexOf(e.id)+1):a.length&&o.push(Object(i.a)(Object(i.a)({},e),{},{colSpan:e.colSpan||6,isSpacer:!0})):c&&t>n&&(e.id?(s=a.indexOf(e.id),c=!1):a.length&&l.push(Object(i.a)(Object(i.a)({},e),{},{isSpacer:!0}))))})),a.length)){var u=a[a.length-1],d=t.findIndex((function(e){return"".concat(e.id)==="".concat(u)}));n>d&&-1!==d&&(l=[],s=a.length+1)}return{afterWidgets:l,beforeWidgets:o,itemIndex:s}}({grid:h,items:f,widgetIndex:Number(t.index),hoverCellRowIndex:y}),A=F.beforeWidgets,L=F.afterWidgets,W=F.itemIndex,V=void 0===W?0:W,q=!1;if(a.id&&d[a.id]){var B=a.panelId?d[a.panelId]:e,P=B[l],_=P.indexOf(a.id);if([s.j.grid].includes(B.layout)){var U=c.a.uniqueId(),R=P[P.length-1]===a.id,D=!1;a.panelId===t.panelId&&a.index<t.index&&(D=!0);var J=a.panelId?d[a.panelId]:null,z=!1;if(J&&[s.k.tabs,s.k.panelStack].includes(J.type)&&(z=!0),R&&!D||z||[s.k.menubar,s.k.toolbar].includes(w))P.splice(_,1);else{var X={colSpan:d[a.id].colSpan||1,serverType:s.d.spacer,type:s.k.field,isDummy:!0,name:"spacer".concat(U),title:"Spacer"};e.modelType===s.h.CUSTOM&&(X.model=a.attrs.model,X.modelField=a.attrs.modelField,X.widgetAttrs=JSON.stringify({colSpan:X.colSpan})),o&&(X.widgetAttrs=JSON.stringify({colSpan:X.colSpan})),d[U]=Object.assign({},X),N(e)&&r.push({name:"insert",position:"before",target:a.attrs.xPath,elements:[X],id:U}),P.splice(_,1,U)}}else a.panelId===t.panelId&&a.index<t.index&&(q=!0,V--),P.splice(_,1)}if(t.attrs.isDummy){var H=!a.id||Object.values(s.f.createWidgets).indexOf(a.id)>-1,Y=H?c.a.uniqueId():a.id,Z=Object.assign({},a.attrs||{});return H&&!1!==Z.isCoreField&&Z.name&&(Z.name="".concat(Z.name).concat(Y)),I(Z,e,Y,o),H?(d[Y]=Object.assign({},Z),N(e)&&r.push({name:"insert",position:"before",target:t.attrs.xPath,elements:[Z],id:Y})):(N(e)&&r.push({name:"move",source:a.attrs.xPath,position:"before",target:t.attrs.xPath}),d[a.id]=Object.assign(Object(i.a)({},d[a.id]),Z)),(t.panelId?d[t.panelId]:e)[u].splice(f.indexOf(t.id)-(q?1:0),1,Y),N(e)&&r.push({name:"replace",target:t.attrs.xPath}),{extendList:r,newId:Y}}if(t.meta&&t.meta.horizontal){var G=Number(t.index);a.panelId===t.panelId&&a.index<t.index&&(G-=2),V=Math.ceil(Number(G/2))}((t.panelId?d[t.panelId]:e).layout||s.j.flow)===s.j.flow&&(A=[],L=[]);var Q,K=[],ee=(t.panelId?d[t.panelId]:e)[u]||[],te=ee[V],ae=d[ee[V]],ne="before";!ae&&ee.length<=V&&(te=ee[ee.length-1],ae=d[ee[ee.length-1]],ne="after"),ae&&"true"==="".concat(ae.sidebar)&&(a.attrs.sidebar="true",N(e)&&r.push({name:"attribute",target:a.attrs.xPath,attributes:{name:"sidebar",value:"true"}})),ae&&(Q=ae.xPath||Object(g.a)(d,e[u],te));var re=function(t,a){var n=$(a.xPath),r=e.extensionMoves.filter((function(e){if(e.target){var t=$(e.target);if("replace"===e.name){if(n.self)return t.parent.indexOf(n.self)>=0;if(t.parent.indexOf(n.parent)>=0)return!0}}return!1}));return!(![s.k.menu,s.d.button,s.k.menuItem].includes(t.attrs.type)||![s.k.menubar,s.k.toolbar,s.k.menu].includes(a.type)||0!==a.items.length||r.length)},ie=[];return A.concat([a]).concat(L).forEach((function(n){var r=Object.assign({},n.attrs||{}),l=n.id,u="symbol"===typeof l,f=!l||u,m=!0;if([s.k.menubar,s.k.toolbar].includes(w)&&n.isSpacer&&(m=!1),m){if(f&&(l=c.a.uniqueId(),!1!==r.isCoreField&&(r&&Object.keys(r).length&&I(r,e,l,o),r.name&&(r.name="".concat(r.name).concat(l))),u&&(e.editWidget=l)),n.isSpacer&&n.isSpacer){var p=a.attrs||{};r=S({widget:n,id:l,model:p.model,modelField:p.modelField,widgetAttrs:JSON.stringify({colSpan:n.colSpan||6})})}if(f){if(N(e)&&!o)if(ae)N(e)&&ie["after"===ne?"unshift":"push"]({name:"insert",position:ne,target:Q,elements:[r],id:l});else{var b=d[t.panelId];re(a,b)?Object(v.c)(e,r,l,t.panelId):ie["after"===ne?"unshift":"push"]({name:"insert",position:"inside",target:b.xPath,elements:[r],id:l})}K.push(l),d[l]=Object.assign({},r)}else{if(N(e)&&!o)if(ae)N(e)&&ie["after"===ne?"unshift":"push"]({name:"move",source:a.attrs.xPath,position:ne,target:Q});else{var g=d[t.panelId];re(a,g)?Object(v.c)(e,a.attrs,a.id,t.panelId):N(e)&&ie["after"===ne?"unshift":"push"]({name:"move",source:a.attrs.xPath,position:"inside",target:g.xPath})}d[a.id]=Object.assign(Object(i.a)({},d[a.id]),r)}E.push(l)}})),r.push.apply(r,ie),(n=(t.panelId?d[t.panelId]:e)[u]||[]).splice.apply(n,[V,0].concat(E)),{extendList:r,newId:E&&E[E.length-1]}}},L=function(e,t,a){if(e[t.id]&&(e[t.panelId]&&e[t.panelId].exclusive&&a.panelId!==t.panelId))return!0;if(e[a.id]&&(e[a.panelId]&&e[a.panelId].exclusive&&t.panelId!==a.panelId))return!0;return!1},W=function(e){var t=e.type,a=e.widgetAttrs;if(t===s.k.panel&&a&&"true"===JSON.parse(a||"{}").tab)return!0;return!1},V=function(e){var t=JSON.parse(e.widgetAttrs||"{}"),a=e.type===s.k.panel?12:6;return t.colSpan||a},q=function(e){return[s.k.panel,s.k.tabs].includes(e.type)?{cols:12}:{}},B=function(e){return e?{menuBuilderTitle:e.title,menuBuilderParent:e.parentMenu}:{}},P=function(){var e,t,a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],o=arguments.length>1?arguments[1]:void 0,l=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",u=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"form",d=!1,f={},m=[],p=[];if(a&&a.length&&a.forEach((function(e){var a=c.a.uniqueId(),n=W(e);if([s.k.panel,s.k.tabs].includes(e.type))d=!0,t=a,e.items=[],e.layout="grid";else if(!d){var o=f[t];o?(o.items.push(a),f[t]=Object(i.a)(Object(i.a)({},f[t]),{},{items:Object(r.a)(o.items)})):d=!0}d&&(d=!1,n?p.push(a):m.push(a)),e.selectionText&&e.selectionText.length&&(e.updateSelection=!0),f[a]=Object(i.a)(Object(i.a)(Object(i.a)({},e),{},{colSpan:V(e)},q(e)),{},{type:"".concat(e.type).concat(l)})})),p.length){var b=c.a.uniqueId(),g={items:[].concat(p),type:s.k.tabs,title:"Tab Panel"};m.push(b),f[b]=Object(i.a)({},g)}var v="customForm"===u?s.f.customForm:s.f.form,h={widgets:Object(i.a)((e={},Object(n.a)(e,v,Object(i.a)(Object(i.a)({type:u,cols:12},o),B(o?o.menuBuilder:void 0))),Object(n.a)(e,s.f.dumpField,{type:s.k.dumpField,name:""}),e),f),items:[].concat(m)};return h};var _=function(e,t){if(t===s.h.BASE){["formView","gridView","minSize","maxSize"].includes(e={targetModel:"target",minSize:"min",maxSize:"max"}[e]||e)&&(e=Z(e)),["bind"].includes(e)&&(e="x-".concat(Z(e)))}return e},U=function(e,t){var a={targetModel:"target",minSize:"min",maxSize:"max"};if(t===s.h.BASE){var n=Object.values(a).findIndex((function(t){return t===e}));-1!==n&&(e=Object.keys(a)[n])}return e};function R(e){var t=[];return u.b.forEach((function(e){var a=e.value,n=(void 0===a?[]:a).map((function(e){return e.serverType}));t.push.apply(t,Object(r.a)(n))})),"field"===e.serverType&&t.includes(e.type)}function D(e,t){return e&&["title","text"].includes(t)&&(e=e.replace(/</g,"&lt;")),e}var J=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],a={},n=["image","serverType","isModelField","isCoreField","current"].concat(Object(r.a)(t));return Object.keys(e).forEach((function(t){n.includes(t)||("type"===t&&["item","field"].includes(e[t])?a[t]=e.serverType:a[t]=""===e[t]?null:e[t])})),a},z=function(e){var t=e.xmlId,a=void 0===t?null:t,n=e.extension;if(a&&!n&&0===a.indexOf("studio-"))return!0;return!1},X=function(e,t){var a=s.a[e];return void 0!==a&&"".concat(a)==="".concat(t)},H=function(e,t,a,r){var o=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],l=Object(n.a)({},e,t);if(o){var c="string"===typeof r?JSON.parse(r):r||{};if(a&&![void 0,"",null].includes(t)){if(X(e,t))return delete c[e],Object(n.a)({},a,JSON.stringify(Object(i.a)({},c)));var s=Object(n.a)({},e,"".concat(t));return Object(n.a)({},a,JSON.stringify(Object(i.a)(Object(i.a)({},c),s)))}if(a&&(!t||""===t))return delete c[e],Object(n.a)({},a,JSON.stringify(Object(i.a)({},c)))}return"showTitle"===e&&!0===t?{showTitle:void 0}:l},Y=function(e,t,a,n){var r=!(arguments.length>4&&void 0!==arguments[4])||arguments[4];if(r&&a){if(e[a]){var i=JSON.parse(e[a]);return[void 0,null].includes(i[t])?n:i[t]}return n||null}return[void 0,null].includes(e[t])?n:e[t]},Z=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"-";return e.replace(/[A-Z]/g,(function(e){return t+e.toLowerCase()}))},G=function(e){return e.replace(/-([a-z])/g,(function(e){return e[1].toUpperCase()}))},Q=function(e,t){var a=s.a[e];return!(![!0,!1].includes(a)||"".concat(t)!=="".concat(a))},$=function(e){var t=e.split("/"),a=t.length,n=a>3?t[a-2]:t[a-1],r=a>3?t[a-1]:void 0;return{parent:n,self:r}},K=function(e){var t,a=e.view,l=e.fields,u=(e.original,e.extensionXML,e.attrsList),d=a.elements,f=function(e,t,a,n){var r,l,c,u={};if(e){var d,f,m=e.attributes||{},p=m.type,b=Object(o.a)(m,j);-1===e.name.indexOf("panel")&&(r=t.find((function(e){return e.name===b.name})));var g={};Object.keys(b).map((function(e){var t=e;0===e.indexOf("x-")&&(t=e.substring(2)),g[U(G(t),s.h.BASE)]=b[e]}));var v=(l=(null===(d=r)||void 0===d?void 0:d.target)||(null===(f=r)||void 0===f?void 0:f.targetModel),c=b.target,l||c);u=Object(i.a)(Object(i.a)(Object(i.a)(Object(i.a)({},g),{},{colSpan:Number(b.colSpan||6)},function(e,t,a,n){return{name:e.name}}(b,0,0,e.name)),function(e,t,a){var n,r;return t?(n=t.type.toLowerCase(),r=e):(n=e,r=a||("field"===e?void 0:e)),{serverType:s.o[n]||n,type:s.o[r]||r}}(e.name,r,p)),function(e,t){return e.title?{title:e.title}:(null===t||void 0===t?void 0:t.label)?{autoTitle:t.label}:e.name?{autoTitle:Z(e.name," ")}:{}}(b,r)),v&&(u.targetModel=v),e.name&&(e.name.indexOf(s.k.panel)>=0||[s.k.menubar,s.k.toolbar].includes(e.name))&&(u.colSpan=Number(b.colSpan||12),u.cols=12,u.layout="grid",u.serverType="panel"===u.type&&!0===u.tab?s.k.tabs:u.serverType||u.type)}return{widget:u,field:r}},m=function(e){return e.name},p=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],a=arguments.length>1?arguments[1]:void 0,n=["panel-mail"],o={},l=[],d=[];return t.forEach((function(t){if((!t.attributes||"true"!=="".concat(t.attributes.json))&&!n.includes(t.name)&&"cdata"!==t.type){var p=c.a.uniqueId(),b=f(t,a),g=b.widget,v=b.field;if(v&&d.push(v),l.push(p),t.name&&t.name.indexOf(s.k.panel)>=0&&(g.items=[]),t.elements&&"field"!==t.name){var h=e(t.elements,a,t.attributes);o=Object(i.a)(Object(i.a)({},o),h._widgets),g.items=Object(r.a)(h.itemList),d.push.apply(d,Object(r.a)(h.fieldList))}if(t.elements&&"field"===t.name){var y=m(t.elements[0]);y&&(g.type=y,g.elements=t.elements)}if(g.name)(u||[]).filter((function(e){return e.field===g.name})).forEach((function(e){["selection-in"].includes(e.name)?g[e.name]=e.value:g[U(G(e.name),s.h.BASE)]=e.value}));o[p]=Object(i.a)({},g)}})),{_widgets:o,itemList:l,fieldList:d}}(d,l),b=p.itemList,g=p._widgets,v=p.fieldList,h=g[b[0]],y=h.items||[];return delete g[b[0]],{widgets:Object(i.a)((t={},Object(n.a)(t,s.f.form,Object(i.a)(Object(i.a)({type:s.k.form,cols:12},h),{},{items:void 0})),Object(n.a)(t,s.f.dumpField,{type:s.k.dumpField,name:""}),t),g),items:y,fieldList:v}},ee=function(e){return JSON.parse(f.a.xml2json(e,{compact:!1,fullTagEmptyElement:!1})).elements[0].elements};var te=function(e){var t=e.name,a=e.fieldName,n=function(e){for(var t="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ",a="",n=e;n>0;--n)a+=t[Math.floor(Math.random()*t.length)];return a}(6);return"studio:".concat(n,":").concat(a,":").concat(t)};function ae(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],a=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(e){if(a)return"custom-model-".concat(e.name,"-").concat(t?"form":"grid");var n=e.split("."),r=n[n.length-1];if(r){var i=y()(r);return"".concat(i.toLowerCase(),"-").concat(t?"form":"grid")}}}t.g={camleCaseString:w,translate:T,processXML:function(e,t){return b()(e)},getWidgetAttrs:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],a=arguments.length>2?arguments[2]:void 0,n={},i=["version","type","typeName","label","items","serverType","layout","cols","isCoreField","isModelField","relationship","current","autoTitle","metaModel","targetSearch","editorType","appBuilder"].concat(Object(r.a)(t));if("field"!==e.serverType&&i.push("targetModel","targetName","target"),Object.keys(e).forEach((function(t){if(!i.includes(t)&&""!==e[t]){var r=!0;a===s.h.BASE&&Q(t,e[t])&&(r=!1),r&&("dummyType"===t?n.type=e[t]:n[_(t,a)]=D(e[t],t))}})),e.type===s.k.panelInclude&&"object"===typeof e.view&&(n.view=e.view.name),(e.isModelField||R(e))&&(n.type=e.type),e.type===s.k.panelRelated&&(n.name=e.field),n.name){var o=n.name.indexOf("[");-1!==o&&(n.name=n.name.substring(0,o))}return n},getCustomModelFields:function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],a=arguments.length>1?arguments[1]:void 0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=arguments.length>3&&void 0!==arguments[3]&&arguments[3],l=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,c=[];return t.forEach((function(t){if(a[t]){var u=Object(i.a)({},a[t]),d=[];if(!["dump_field","form"].includes(u.type)&&(u.type!==s.k.tabs&&("symbol"===typeof u.id&&delete u.id,"false"!==u.showTitle&&delete u.showTitle,o&&(u.sequence=l,l++),"spacer"===u.serverType&&d.push("title"),c.push(Object(i.a)(Object(i.a)({},J(u,d)),n))),u.items&&u.items.length)){var f=e(u.items,a,n,o,l);c.push.apply(c,Object(r.a)(f.fields)),l=f.sequence}}})),{fields:c,sequence:l}},isCreatedFromStudio:z,getFormProperties:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],a=["type","cols","items"].concat(Object(r.a)(t)),n={};return Object.keys(e).forEach((function(t){a.includes(t)||(n[t]=""===e[t]?null:e[t])})),n},getDefaultProperties:function(e){switch(e){case s.h.CUSTOM:return{formWidth:"large"};case s.h.BASE:return{width:"large"};default:return{}}},getPatchList:function(e){if(e){var t=e.elements,a=void 0===t?[]:t;if(a[0])return a[0].elements||[]}return[]},keyReplacer:_,valueConverter:D,filterFormPatch:function(e){return e.filter((function(e){return"/"===e.attributes.target}))},getCurrentFormAttributes:function(e){var t=e.elements;return(void 0===t?[]:t)[0].attributes||{}},mergeFormAttributes:function(e,t){var a=e.findIndex((function(e){return"/"===e.attributes.target})),n=-1===a?0:a,r=-1===a?0:1;return Object.keys(t).length?e.splice(n,r,Object(i.a)({},t)):-1!==a&&e.splice(a,1),e},camelToDashCase:Z,dashToCamelCase:G,isSamePositionInOriginal:function e(t,a,n,r){var i=n.attrs||n||{},o=!1;return(t||[]).forEach((function(t){if(t.elements){if(t.attributes&&a&&t.attributes.name===a.name){var l=t.elements[r];l&&l.attributes&&i&&l.attributes.name===i.name&&(o=!0)}if(!o&&t.elements&&t.elements.length)!0===e(t.elements,a,n,r)&&(o=!0)}})),o},getWidgetType:function(e,t){var a=e.isModelField||!1===e.isCoreField||"field"===e.serverType?"field":e.type?e.type.toLowerCase():t;return a=["spacer","label","button"].includes(e.serverType)?e.serverType:a},isDefaultValue:Q,getReferenceProperty:function(e){return Object(n.a)({},s.k.panelInclude,"view")[e]||"name"},checkTarget:function(e,t,a){var n=e.split("/");return a?n[a]===t:e===t},exploreTarget:$,getViews:function(e,t){var a=e.find((function(e){return!0===e.computed})),n=e.find((function(e){return!0!==e.computed&&!0!==e.extension}));return{view:a||n,originalXML:n,extensionXML:e.find((function(e){return!0===e.extension&&e.xmlId==="studio-".concat(t)}))}},generateXMLToViewSchema:function(e){var t=e.view,a=e.fields,n=e.original,r=void 0!==n&&n,i=e.extensionXML,o=e.attrsList,l=JSON.parse(f.a.xml2json(t.xml,{compact:!1,fullTagEmptyElement:!1})).elements;return K({view:{elements:l},fields:a,original:r,extensionXML:i,attrsList:o})},generateViewFromJson:K,getChangeList:function(e,t){var a=[],n=e.widgets,r=ee(t),i=Object.values(n),o=Object.keys(n);return r.forEach((function(e){var t=e.elements,n=(void 0===t?[]:t)[0];if(n&&n.attributes&&"move"===n.name){var r=$(n.attributes.source);if(r.self){var l=r.self?i.findIndex((function(e){return"".concat(e.type,"[@name='").concat(e.name,"']")===r.self})):i.findIndex((function(e){return"".concat(e.type,"[@name='").concat(e.name,"']")===r.parent}));o[l]&&a.push(o[l])}}})),a},getDefaultGridFormName:ae,isPanelTab:W}},51:function(e,t,a){"use strict";a.d(t,"a",(function(){return g})),a.d(t,"c",(function(){return v}));var n=a(21),r=a(16),i=a(4),o=a(0),l=a.n(o),c=a(20),s=a.n(c),u=a(2),d=a(31),f=["className","attrs","children"],m=function(e,t){var a=e.widgetAttrs?JSON.parse(e.widgetAttrs):{};return a.colSpan?Number(a.colSpan):t||e.colSpan||6},p=1,b=12,g=function(e){var t=e.className,a=e.attrs,n=e.children,i=Object(r.a)(e,f);return l.a.createElement("div",Object.assign({className:s()(t,a.cols?"grid-span grid-".concat(a.cols):"")},i),n)};function v(){var e=l.a.useState((function(){return null})),t=Object(n.a)(e,2),r=t[0],i=t[1];return l.a.useEffect((function(){Promise.resolve().then(a.bind(null,81)).then((function(e){return i((function(){return e.default}))}))}),[]),r}t.b=function(e){var t=v(),a=Object(d.b)().state,n=a.widgets,r=a.customFieldWidgets,o=e.className,c=e.items,s=e.attrs,f=void 0===s?{}:s,h=e.panelId,y=e.design,O="customField"===e._type?r:n,j=JSON.parse(f.widgetAttrs||"{}"),w=Number(f.cols||1),x=2*w+1,k=f.layout===u.j.stack,T=y?1:0,S=(100-(1===x?0:x/2+1)*T)/((x-1)/2),C=null===j||void 0===j?void 0:j.itemSpan,M=l.a.useMemo((function(){var e=0;return function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:b,a=arguments.length>2?arguments[2]:void 0,n=arguments.length>3?arguments[3]:void 0,r=[],o=1===t||a,l=o?b:t,c=[],s=0,d=function(e){return Number(e)};if(!e.length){var f={id:0,separator:!0},g={id:0,dummy:!0,dummyPanel:!0,colSpan:o?12:6};return[[f,g,f].concat(o?[]:[g,f])]}for(var v=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.item,a=e.overflow,n=void 0!==a&&a;if(n){var i=l-(s-d(t.colSpan));c.push({id:0,dummy:!0,colSpan:i})}r.push(c),c=[],s=0},h=function(e){return c.push(e)},y=0;y<e.length;y++){var O=Object.assign(e[y],o?{colSpan:b}:{colSpan:d(m(e[y],n))}),j=O.colSpan,w=void 0===j?p:j,x=y===e.length-1;if((s+=d(w))>l?(v({item:O,overflow:!0}),s=w,h(O)):s===l?(c.push(O),v({item:O})):c.push(O),x&&c.length){var k=c.reduce((function(e,t){var a=t.colSpan;return e+(void 0===a?p:a)}),0),T=l-k;T>0&&c.push({id:0,dummy:!0,colSpan:T}),r.push(c)}}for(var S=[],C=0;C<r.length;C++){var M,E=r[C],F=![u.k.menubar,u.k.toolbar].includes(null===(M=E[0])||void 0===M?void 0:M.type),I=[],N=[],A=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{separator:!0};return e.push(Object(i.a)({id:0,colSpan:1},t))};A(I),F&&A(N,{relatedColSpan:m(E[0],n),separator:!0});for(var L=0;L<E.length;L++){var W=E[L],V=m(W,n);A(I,{dummy:!0,colSpan:V}),A(N,W),A(I,{relatedColSpan:V,separator:!0}),F&&A(N,{relatedColSpan:V,separator:!0})}F?S.push(I):S.push([]),S.push(N),C===r.length-1&&S.push(I)}return S}(c.map((function(e){return Object.assign({},O[e]||{},{id:e})})),w,k,C).map((function(t,a){var n=0;return t.map((function(t){var r=n;return n+=t.separator?0:Number(t.colSpan||1),Object(i.a)(Object(i.a)({},t),{},{rowIndex:a,columnIndex:r,cellIndice:e++})}))}))}),[c,O,w,k,C]),E=M.reduce((function(e,t){return e.concat(t)}),[]);return l.a.createElement(g,{attrs:f,className:o},l.a.createElement("table",{cellPadding:"0",cellSpacing:"0"},y&&l.a.createElement("colgroup",null,k?l.a.createElement("col",{width:"100%"}):new Array(x).fill(0).map((function(e,t){return l.a.createElement("col",{key:t,width:"".concat(t%2===1?S:T,"%")})}))),l.a.createElement("tbody",null,M.map((function(a,n){return l.a.createElement("tr",{className:n%2===0?"empty-row":"fill-row",key:n},a.map((function(a,r){var i=a.id,o=a.colSpan,c=a.cellIndice,s=a.columnIndex,u=a.separator,d=a.relatedColSpan;return l.a.createElement("td",{className:u?"separator":"",key:c,colSpan:o>1?2*o-1:o},t&&l.a.createElement(t,{design:y,meta:{isSeparator:Boolean(u),colSpan:o,row:n,col:r,colIndex:s,grid:E,total:x,relatedColSpan:d},panelId:h,key:c,id:i,index:c,panelColumns:f.cols,_type:e._type,errorList:e.errorList,canRemove:e.canRemove}))})))})))))}},59:function(e,t,a){"use strict";var n=a(16),r=a(0),i=a.n(r),o=a(20),l=a.n(o),c=a(51),s=a(2),u=a(5),d=["id","attrs","design","isTab"];t.a=i.a.memo((function(e){var t=e.id,a=e.attrs,r=e.design,o=e.isTab,f=void 0!==o&&o,m=Object(n.a)(e,d),p=m.errorList[t]||{};return i.a.createElement(i.a.Fragment,null,(a.title||[s.k.toolbar,s.k.menubar].includes(a.serverType))&&i.a.createElement("div",{className:l()("panel-header",{inline:f})},Object(u.r)(a.title||a.autoTitle),a.serverType===s.k.toolbar&&i.a.createElement("i",{className:"fa fa-wrench",title:"toolbar"}),a.serverType===s.k.menubar&&i.a.createElement("i",{className:"fa fa-bars",title:"menubar"})),p.items&&!f&&i.a.createElement("div",{className:l()("panel-children-error")},p.items),!f&&i.a.createElement(c.b,{design:r,className:"panel-body",items:a.items||[],attrs:a,panelId:t,_type:m._type,errorList:m.errorList,canRemove:m.canRemove}))}))},63:function(e,t,a){"use strict";a.d(t,"a",(function(){return s})),a.d(t,"b",(function(){return u})),a.d(t,"c",(function(){return f}));var n=a(4),r=a(10),i=a(87),o=a(2),l=a(5);function c(e,t,a,n){for(var r=n.widgets,i=!1,o=0;o<e.length;o++){var l=e[o];if(l.name===(r[a]&&r[a].name)&&(l[t.attributes.name]=t.attributes.value,i=!0),i)break;if(l.items&&l.items.length){var s=c(l.items,t,a,n);if(s){i=s;break}}}return i}function s(e,t){var a;!function(){var a=["widgetAttrs","items","current","elements","tz","targetModel","_type"];Object(r.a)(e).forEach((function(r,i){if("insert"===r.name){var o=r.id,s=e.findIndex((function(e){return"replace"===e.name&&e.id===o&&!e.target})),u=e.findIndex((function(e){return e.id===o&&"insert"===e.name}));-1!==s&&(e.splice(s,1),e.splice(u,1))}"attribute"===r.name&&function(){var i=r.id;if(r.attributes&&l.g.isDefaultValue(r.attributes.name,r.attributes.value)){var o=e.findIndex((function(e){return e.id===i&&"attribute"===e.name&&e.attributes.name===r.attributes.name}));e.splice(o,1,Object(n.a)(Object(n.a)({},e[o]),{},{attributes:Object(n.a)(Object(n.a)({},e[o].attributes),{},{value:r.attributes.value})}))}if(r.attributes&&a.includes(r.attributes.name)){var s=e.findIndex((function(e){return e.id===i&&"attribute"===e.name&&a.includes(e.attributes.name)}));e.splice(s,1)}else for(var u=!1,d=0;d<t.extensionMoves.length;d++){var f=t.extensionMoves[d];if("insert"===f.name)for(var m=f.elements,p=0;p<m.length;p++){var b=m[p];if(b.name===(t.widgets[i]&&t.widgets[i].name)){t.extensionMoves[d].elements[p][r.attributes.name]=r.attributes.value,u=!0;break}if(b.items&&b.items.length)c(b.items,r,i,t)&&(u=!0)}if(u){var g=e.findIndex((function(e){return e.id===i&&"attribute"===e.name}));e.splice(g,1);break}}}()}))}(),(a=t.extensionMoves).push.apply(a,Object(r.a)(e))}function u(e,t){return e.map((function(e){var t;if("insert"===e.name&&(t=e.elements.map((function(e){if(e&&e.items&&e.items.length){var t=Object(n.a)({},e);return t.elements=function e(t){return t.map((function(t){var a=[];return t.items&&(a=e(t.items)),Object(i.c)(Object(n.a)(Object(n.a)({},t),{},{elements:a}),[],null,o.h.BASE)}))}(e.items),t}return e})).filter((function(e){return e}))),e.target)return Object(i.b)(Object(n.a)({target:e.target,position:e.position,source:e.source,type:e.name,widgetAttrs:t},e.attributes))})).filter((function(e){return e}))}function d(e,t,a,n){for(var r=n.widgets,i=!1,o=0;o<e.length;o++){var l=e[o];if(l.name===r[a].name&&(l.items?l.items.push(t):l.items=[t],i=!0),i)break;if(l.items&&l.items.length){var c=d(l.items,t,a,n);if(c){i=c;break}}}return i}function f(e,t,a,n){for(var r=[],i=!1,o=e.widgets,l=0;l<e.extensionMoves.length;l++){var c=e.extensionMoves[l];if("insert"===c.name)for(var s=c.elements,u=0;u<s.length;u++){var f=s[u];if(f.name===o[n].name&&f.items&&0===f.items.length){e.extensionMoves[l].elements[u].items.push(t),i=!0;break}if(f.items&&f.items.length)d(f.items,t,n,e)&&(i=!0)}if(i)break}return i&&t.xPath&&r.push({name:"replace",target:t.xPath}),r}},66:function(e,t,a){"use strict";a.d(t,"a",(function(){return l})),a.d(t,"c",(function(){return c})),a.d(t,"b",(function(){return s}));var n=a(10),r=a(78),i=a(2),o=a(5);function l(e,t){var a=arguments.length>2&&void 0!==arguments[2]&&arguments[2],l={},c="field"===e.serverType?e.type:e.serverType||e.type;c=c&&c.toLowerCase().replace(/_/g,"-");var s=r.a.find((function(e){return e.type===c}));if("form"===c&&t===i.h.CUSTOM&&(s=r.a.find((function(e){return"modelForm"===e.type}))),!a&&t===i.h.BASE&&[i.k.panel,i.k.panelStack,i.k.tabs,i.k.menu,i.k.menubar,i.k.toolbar].includes(c)&&e.items&&0===e.items.length){var u=c===i.k.menu?Object(o.r)("Atleast one menu item required"):Object(o.r)("Atleast one children required");l.items=u}if(!s)return l;var d=Object.keys(s.value).reduce((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;return[].concat(Object(n.a)(e),Object(n.a)(s.value[t]))}),[]);return d.forEach((function(t){var a=function(){l[t.name]="".concat(Object(o.r)(t.title||t.name)," ").concat(Object(o.r)("required"))};((t.requiredFor&&t.requiredFor.includes(c)&&!e[t.name]||t.required&&!e[t.name])&&a(),t.requiredWhen&&(t.requiredNegation?!e[t.requiredWhen]:e[t.requiredWhen])&&!e[t.name]&&(e.isSelectionField||["menuBuilderTitle"].includes(t.name)||["selectionText"].includes(t.name)&&e.updateSelection)&&a(),t.regex)&&(new RegExp(t.regex).test(e[t.name])||l[t.name]||(l[t.name]=Object(o.r)(t.regexErrorMessage)))})),l}function c(e,t){var a=e.widgets[t],n=e.errorList[t]||{};a&&(a.items&&a.items.length>0?n.items&&delete n.items:n.items=Object(o.r)("Atleast one children required"),Object.keys(n).length?e.errorList[t]=n:delete e.errorList[t])}function s(e,t){e.errorList[t]&&delete e.errorList[t]}},78:function(e,t,a){"use strict";var n=a(4),r=["fa-500px","fa-address-book","fa-address-book-o","fa-address-card","fa-address-card-o","fa-adjust","fa-adn","fa-align-center","fa-align-justify","fa-align-left","fa-align-right","fa-amazon","fa-ambulance","fa-american-sign-language-interpreting","fa-anchor","fa-android","fa-angellist","fa-angle-double-down","fa-angle-double-left","fa-angle-double-right","fa-angle-double-up","fa-angle-down","fa-angle-left","fa-angle-right","fa-angle-up","fa-apple","fa-archive","fa-area-chart","fa-arrow-circle-down","fa-arrow-circle-left","fa-arrow-circle-o-down","fa-arrow-circle-o-left","fa-arrow-circle-o-right","fa-arrow-circle-o-up","fa-arrow-circle-right","fa-arrow-circle-up","fa-arrow-down","fa-arrow-left","fa-arrow-right","fa-arrow-up","fa-arrows","fa-arrows-alt","fa-arrows-h","fa-arrows-v","fa-asl-interpreting","fa-assistive-listening-systems","fa-asterisk","fa-at","fa-audio-description","fa-automobile","fa-backward","fa-balance-scale","fa-ban","fa-bandcamp","fa-bank","fa-bar-chart","fa-bar-chart-o","fa-barcode","fa-bars","fa-bath","fa-bathtub","fa-battery","fa-battery-0","fa-battery-1","fa-battery-2","fa-battery-3","fa-battery-4","fa-battery-empty","fa-battery-full","fa-battery-half","fa-battery-quarter","fa-battery-three-quarters","fa-bed","fa-beer","fa-behance","fa-behance-square","fa-bell","fa-bell-o","fa-bell-slash","fa-bell-slash-o","fa-bicycle","fa-binoculars","fa-birthday-cake","fa-bitbucket","fa-bitbucket-square","fa-bitcoin","fa-black-tie","fa-blind","fa-bluetooth","fa-bluetooth-b","fa-bold","fa-bolt","fa-bomb","fa-book","fa-bookmark","fa-bookmark-o","fa-braille","fa-briefcase","fa-btc","fa-bug","fa-building","fa-building-o","fa-bullhorn","fa-bullseye","fa-bus","fa-buysellads","fa-cab","fa-calculator","fa-calendar","fa-calendar-check-o","fa-calendar-minus-o","fa-calendar-o","fa-calendar-plus-o","fa-calendar-times-o","fa-camera","fa-camera-retro","fa-car","fa-caret-down","fa-caret-left","fa-caret-right","fa-caret-square-o-down","fa-caret-square-o-left","fa-caret-square-o-right","fa-caret-square-o-up","fa-caret-up","fa-cart-arrow-down","fa-cart-plus","fa-cc","fa-cc-amex","fa-cc-diners-club","fa-cc-discover","fa-cc-jcb","fa-cc-mastercard","fa-cc-paypal","fa-cc-stripe","fa-cc-visa","fa-certificate","fa-chain","fa-chain-broken","fa-check","fa-check-circle","fa-check-circle-o","fa-check-square","fa-check-square-o","fa-chevron-circle-down","fa-chevron-circle-left","fa-chevron-circle-right","fa-chevron-circle-up","fa-chevron-down","fa-chevron-left","fa-chevron-right","fa-chevron-up","fa-child","fa-chrome","fa-circle","fa-circle-o","fa-circle-o-notch","fa-circle-thin","fa-clipboard","fa-clock-o","fa-clone","fa-close","fa-cloud","fa-cloud-download","fa-cloud-upload","fa-cny","fa-code","fa-code-fork","fa-codepen","fa-codiepie","fa-coffee","fa-cog","fa-cogs","fa-columns","fa-comment","fa-comment-o","fa-commenting","fa-commenting-o","fa-comments","fa-comments-o","fa-compass","fa-compress","fa-connectdevelop","fa-contao","fa-copy","fa-copyright","fa-creative-commons","fa-credit-card","fa-credit-card-alt","fa-crop","fa-crosshairs","fa-css3","fa-cube","fa-cubes","fa-cut","fa-cutlery","fa-dashboard","fa-dashcube","fa-database","fa-deaf","fa-deafness","fa-dedent","fa-delicious","fa-desktop","fa-deviantart","fa-diamond","fa-digg","fa-dollar","fa-dot-circle-o","fa-download","fa-dribbble","fa-drivers-license","fa-drivers-license-o","fa-dropbox","fa-drupal","fa-edge","fa-edit","fa-eercast","fa-eject","fa-ellipsis-h","fa-ellipsis-v","fa-empire","fa-envelope","fa-envelope-o","fa-envelope-open","fa-envelope-open-o","fa-envelope-square","fa-envira","fa-eraser","fa-etsy","fa-eur","fa-euro","fa-exchange","fa-exclamation","fa-exclamation-circle","fa-exclamation-triangle","fa-expand","fa-expeditedssl","fa-external-link","fa-external-link-square","fa-eye","fa-eye-slash","fa-eyedropper","fa-fa","fa-facebook","fa-facebook-f","fa-facebook-official","fa-facebook-square","fa-fast-backward","fa-fast-forward","fa-fax","fa-feed","fa-female","fa-fighter-jet","fa-file","fa-file-archive-o","fa-file-audio-o","fa-file-code-o","fa-file-excel-o","fa-file-image-o","fa-file-movie-o","fa-file-o","fa-file-pdf-o","fa-file-photo-o","fa-file-picture-o","fa-file-powerpoint-o","fa-file-sound-o","fa-file-text","fa-file-text-o","fa-file-video-o","fa-file-word-o","fa-file-zip-o","fa-files-o","fa-film","fa-filter","fa-fire","fa-fire-extinguisher","fa-firefox","fa-first-order","fa-flag","fa-flag-checkered","fa-flag-o","fa-flash","fa-flask","fa-flickr","fa-floppy-o","fa-folder","fa-folder-o","fa-folder-open","fa-folder-open-o","fa-font","fa-font-awesome","fa-fonticons","fa-fort-awesome","fa-forumbee","fa-forward","fa-foursquare","fa-free-code-camp","fa-frown-o","fa-futbol-o","fa-gamepad","fa-gavel","fa-gbp","fa-ge","fa-gear","fa-gears","fa-genderless","fa-get-pocket","fa-gg","fa-gg-circle","fa-gift","fa-git","fa-git-square","fa-github","fa-github-alt","fa-github-square","fa-gitlab","fa-gittip","fa-glass","fa-glide","fa-glide-g","fa-globe","fa-google","fa-google-plus","fa-google-plus-circle","fa-google-plus-official","fa-google-plus-square","fa-google-wallet","fa-graduation-cap","fa-gratipay","fa-grav","fa-group","fa-h-square","fa-hacker-news","fa-hand-grab-o","fa-hand-lizard-o","fa-hand-o-down","fa-hand-o-left","fa-hand-o-right","fa-hand-o-up","fa-hand-paper-o","fa-hand-peace-o","fa-hand-pointer-o","fa-hand-rock-o","fa-hand-scissors-o","fa-hand-spock-o","fa-hand-stop-o","fa-handshake-o","fa-hard-of-hearing","fa-hashtag","fa-hdd-o","fa-header","fa-headphones","fa-heart","fa-heart-o","fa-heartbeat","fa-history","fa-home","fa-hospital-o","fa-hotel","fa-hourglass","fa-hourglass-1","fa-hourglass-2","fa-hourglass-3","fa-hourglass-end","fa-hourglass-half","fa-hourglass-o","fa-hourglass-start","fa-houzz","fa-html5","fa-i-cursor","fa-id-badge","fa-id-card","fa-id-card-o","fa-ils","fa-image","fa-imdb","fa-inbox","fa-indent","fa-industry","fa-info","fa-info-circle","fa-inr","fa-instagram","fa-institution","fa-internet-explorer","fa-intersex","fa-ioxhost","fa-italic","fa-joomla","fa-jpy","fa-jsfiddle","fa-key","fa-keyboard-o","fa-krw","fa-language","fa-laptop","fa-lastfm","fa-lastfm-square","fa-leaf","fa-leanpub","fa-legal","fa-lemon-o","fa-level-down","fa-level-up","fa-life-bouy","fa-life-buoy","fa-life-ring","fa-life-saver","fa-lightbulb-o","fa-line-chart","fa-link","fa-linkedin","fa-linkedin-square","fa-linode","fa-linux","fa-list","fa-list-alt","fa-list-ol","fa-list-ul","fa-location-arrow","fa-lock","fa-long-arrow-down","fa-long-arrow-left","fa-long-arrow-right","fa-long-arrow-up","fa-low-vision","fa-magic","fa-magnet","fa-mail-forward","fa-mail-reply","fa-mail-reply-all","fa-male","fa-map","fa-map-marker","fa-map-o","fa-map-pin","fa-map-signs","fa-mars","fa-mars-double","fa-mars-stroke","fa-mars-stroke-h","fa-mars-stroke-v","fa-maxcdn","fa-meanpath","fa-medium","fa-medkit","fa-meetup","fa-meh-o","fa-mercury","fa-microchip","fa-microphone","fa-microphone-slash","fa-minus","fa-minus-circle","fa-minus-square","fa-minus-square-o","fa-mixcloud","fa-mobile","fa-mobile-phone","fa-modx","fa-money","fa-moon-o","fa-mortar-board","fa-motorcycle","fa-mouse-pointer","fa-music","fa-navicon","fa-neuter","fa-newspaper-o","fa-object-group","fa-object-ungroup","fa-odnoklassniki","fa-odnoklassniki-square","fa-opencart","fa-openid","fa-opera","fa-optin-monster","fa-outdent","fa-pagelines","fa-paint-brush","fa-paper-plane","fa-paper-plane-o","fa-paperclip","fa-paragraph","fa-paste","fa-pause","fa-pause-circle","fa-pause-circle-o","fa-paw","fa-paypal","fa-pencil","fa-pencil-square","fa-pencil-square-o","fa-percent","fa-phone","fa-phone-square","fa-photo","fa-picture-o","fa-pie-chart","fa-pied-piper","fa-pied-piper-alt","fa-pied-piper-pp","fa-pinterest","fa-pinterest-p","fa-pinterest-square","fa-plane","fa-play","fa-play-circle","fa-play-circle-o","fa-plug","fa-plus","fa-plus-circle","fa-plus-square","fa-plus-square-o","fa-podcast","fa-power-off","fa-print","fa-product-hunt","fa-puzzle-piece","fa-qq","fa-qrcode","fa-question","fa-question-circle","fa-question-circle-o","fa-quora","fa-quote-left","fa-quote-right","fa-ra","fa-random","fa-ravelry","fa-rebel","fa-recycle","fa-reddit","fa-reddit-alien","fa-reddit-square","fa-refresh","fa-registered","fa-remove","fa-renren","fa-reorder","fa-repeat","fa-reply","fa-reply-all","fa-resistance","fa-retweet","fa-rmb","fa-road","fa-rocket","fa-rotate-left","fa-rotate-right","fa-rouble","fa-rss","fa-rss-square","fa-rub","fa-ruble","fa-rupee","fa-s15","fa-safari","fa-save","fa-scissors","fa-scribd","fa-search","fa-search-minus","fa-search-plus","fa-sellsy","fa-send","fa-send-o","fa-server","fa-share","fa-share-alt","fa-share-alt-square","fa-share-square","fa-share-square-o","fa-shekel","fa-sheqel","fa-shield","fa-ship","fa-shirtsinbulk","fa-shopping-bag","fa-shopping-basket","fa-shopping-cart","fa-shower","fa-sign-in","fa-sign-language","fa-sign-out","fa-signal","fa-signing","fa-simplybuilt","fa-sitemap","fa-skyatlas","fa-skype","fa-slack","fa-sliders","fa-slideshare","fa-smile-o","fa-snapchat","fa-snapchat-ghost","fa-snapchat-square","fa-snowflake-o","fa-soccer-ball-o","fa-sort","fa-sort-alpha-asc","fa-sort-alpha-desc","fa-sort-amount-asc","fa-sort-amount-desc","fa-sort-asc","fa-sort-desc","fa-sort-down","fa-sort-numeric-asc","fa-sort-numeric-desc","fa-sort-up","fa-soundcloud","fa-space-shuttle","fa-spinner","fa-spoon","fa-spotify","fa-square","fa-square-o","fa-stack-exchange","fa-stack-overflow","fa-star","fa-star-half","fa-star-half-empty","fa-star-half-full","fa-star-half-o","fa-star-o","fa-steam","fa-steam-square","fa-step-backward","fa-step-forward","fa-stethoscope","fa-sticky-note","fa-sticky-note-o","fa-stop","fa-stop-circle","fa-stop-circle-o","fa-street-view","fa-strikethrough","fa-stumbleupon","fa-stumbleupon-circle","fa-subscript","fa-subway","fa-suitcase","fa-sun-o","fa-superpowers","fa-superscript","fa-support","fa-table","fa-tablet","fa-tachometer","fa-tag","fa-tags","fa-tasks","fa-taxi","fa-telegram","fa-television","fa-tencent-weibo","fa-terminal","fa-text-height","fa-text-width","fa-th","fa-th-large","fa-th-list","fa-themeisle","fa-thermometer","fa-thermometer-0","fa-thermometer-1","fa-thermometer-2","fa-thermometer-3","fa-thermometer-4","fa-thermometer-empty","fa-thermometer-full","fa-thermometer-half","fa-thermometer-quarter","fa-thermometer-three-quarters","fa-thumb-tack","fa-thumbs-down","fa-thumbs-o-down","fa-thumbs-o-up","fa-thumbs-up","fa-ticket","fa-times","fa-times-circle","fa-times-circle-o","fa-times-rectangle","fa-times-rectangle-o","fa-tint","fa-toggle-down","fa-toggle-left","fa-toggle-off","fa-toggle-on","fa-toggle-right","fa-toggle-up","fa-trademark","fa-train","fa-transgender","fa-transgender-alt","fa-trash","fa-trash-o","fa-tree","fa-trello","fa-tripadvisor","fa-trophy","fa-truck","fa-try","fa-tty","fa-tumblr","fa-tumblr-square","fa-turkish-lira","fa-tv","fa-twitch","fa-twitter","fa-twitter-square","fa-umbrella","fa-underline","fa-undo","fa-universal-access","fa-university","fa-unlink","fa-unlock","fa-unlock-alt","fa-unsorted","fa-upload","fa-usb","fa-usd","fa-user","fa-user-circle","fa-user-circle-o","fa-user-md","fa-user-o","fa-user-plus","fa-user-secret","fa-user-times","fa-users","fa-vcard","fa-vcard-o","fa-venus","fa-venus-double","fa-venus-mars","fa-viacoin","fa-viadeo","fa-viadeo-square","fa-video-camera","fa-vimeo","fa-vimeo-square","fa-vine","fa-vk","fa-volume-control-phone","fa-volume-down","fa-volume-off","fa-volume-up","fa-warning","fa-wechat","fa-weibo","fa-weixin","fa-whatsapp","fa-wheelchair","fa-wheelchair-alt","fa-wifi","fa-wikipedia-w","fa-window-close","fa-window-close-o","fa-window-maximize","fa-window-minimize","fa-window-restore","fa-windows","fa-won","fa-wordpress","fa-wpbeginner","fa-wpexplorer","fa-wpforms","fa-wrench","fa-xing","fa-xing-square","fa-y-combinator","fa-y-combinator-square","fa-yahoo","fa-yc","fa-yc-square","fa-yelp","fa-yen","fa-yoast","fa-youtube","fa-youtube-play","fa-youtube-square"],i=a(1),o=a(8),l=a(2);a.d(t,"b",(function(){return V}));var c={overview:[Object(i.I)({existsCheck:!0}),i.fb,i.eb,i.k,i.c,i.s,i.X],fieldOptions:[i.U,i.gb,i.W,i.V,i.nb,i.J,i.G,i.D,Object(o.f)({name:"regex",dependModelType:l.h.CUSTOM}),i.ib],uiOptions:[i.Q,i.N,Object(o.a)({name:"nameField",title:"Name column",dependModelType:l.h.CUSTOM}),i.t,i.mb,i.i,i.j],conditions:[i.Y,i.u,i.R,i.O,i.y,i.hb],valueExpr:[i.lb],roles:[i.S],widgetAttributes:[i.g,i.Z,Object(o.a)({name:"multiline",parentField:"widgetAttrs",modelType:l.h.CUSTOM,dependModelType:l.h.CUSTOM})]},s={overview:[Object(i.I)({existsCheck:!0}),i.fb,i.eb,i.k,i.c,i.s,i.X],fieldOptions:[i.U,i.gb,i.W,i.V,i.nb,i.J,i.G,i.D,i.ib],uiOptions:[i.Q,i.N,i.t,i.mb,i.i,i.j],conditions:[i.Y,i.u,i.R,i.O,i.y,i.hb],valueExpr:[i.lb],roles:[i.S],widgetAttributes:[i.g,i.Z]},u={overview:[Object(i.I)({existsCheck:!0}),i.fb,i.eb,i.k,i.c,i.s,i.X],fieldOptions:[i.nb,i.J,i.G,i.D,Object(o.b)({name:"precision",default:6}),Object(o.b)({name:"scale",default:2}),i.ib],uiOptions:[i.Q,i.N,i.t,i.mb,i.i,i.j],conditions:[i.Y,i.u,i.R,i.O,i.y,i.hb],valueExpr:[i.lb],roles:[i.S],widgetAttributes:[i.g,i.Z]},d={overview:[Object(i.I)({existsCheck:!0}),i.fb,i.eb,i.k,i.c,i.s,i.X],fieldOptions:[i.nb,i.J,i.ib],uiOptions:[i.Q,i.N,i.t,i.mb,i.i,i.j],conditions:[i.Y,i.u,i.R,i.O,i.y,i.hb],valueExpr:[i.lb],roles:[i.S],widgetAttributes:[i.g,i.Z]},f={overview:[Object(i.I)({existsCheck:!0}),i.fb,i.eb,i.k,i.c,i.s,i.X],fieldOptions:[i.nb,i.J,i.ib],uiOptions:[i.Q,i.N,i.t,i.mb,i.i,i.j],conditions:[i.Y,i.u,i.R,i.O,i.y,i.hb],valueExpr:[i.lb],roles:[i.S],widgetAttributes:[i.g,i.Z]},m={overview:[Object(i.I)({existsCheck:!0}),i.fb,i.eb,i.c],uiOptions:[i.N,i.t,i.ab,Object(o.a)({name:"canCollapse",parentField:"widgetAttrs",modelType:l.h.CUSTOM,dependModelType:l.h.CUSTOM}),Object(o.f)({name:"collapseIf",parentField:"widgetAttrs",modelType:l.h.CUSTOM,dependModelType:l.h.CUSTOM}),i.i,i.j,i.b],conditions:[i.Y,i.u,i.O],roles:[i.S],widgetAttributes:[i.g,i.B,i.Z]},p={overview:[Object(i.I)({existsCheck:!0}),i.fb,i.c],uiOptions:[i.N,i.t,i.ab,Object(o.a)({name:"canCollapse",parentField:"widgetAttrs",modelType:l.h.CUSTOM,dependModelType:l.h.CUSTOM}),Object(o.f)({name:"collapseIf",parentField:"widgetAttrs",modelType:l.h.CUSTOM,dependModelType:l.h.CUSTOM}),i.i,i.j],conditions:[i.Y,i.u,i.O],roles:[i.S],widgetAttributes:[i.g]},b={overview:[Object(i.I)({existsCheck:!0}),i.fb,i.eb,i.c],uiOptions:[i.N,i.t,i.i,i.j],conditions:[i.Y,i.u,i.O],roles:[i.S],widgetAttributes:[i.Z]},g={overview:[Object(i.I)({existsCheck:!0}),i.fb,i.eb,i.c,i.s,i.X,i.M],fieldOptions:[i.nb,Object(o.d)({name:"onClick",title:"On click",required:!0,ref:"com.axelor.meta.db.MetaAction",requiredFor:["button"],dependModelType:l.h.CUSTOM,multiple:!0,commaSeparated:!0,canAddNew:!0})],uiOptions:[i.N,i.t,i.mb,i.i,i.j],conditions:[i.Y,i.u,i.R,i.O,i.y,i.hb],roles:[i.S],widgetAttributes:[i.g,i.Z,Object(o.e)({name:"icon",title:"Icon",data:r,helper:"https://fontawesome.com/cheatsheet",parentField:"widgetAttrs",modelType:l.h.CUSTOM})]},v={overview:[Object(i.I)({existsCheck:!0}),i.fb,i.eb,i.k,i.c,i.s,i.X],uiOptions:[i.t,i.i,i.j],conditions:[i.Y,i.u,i.R,i.O,i.y,i.hb],roles:[i.S],widgetAttributes:[i.g]},h={overview:[Object(i.I)({existsCheck:!0}),i.fb,i.c],fieldOptions:[],uiOptions:[i.t,i.i,i.j],conditions:[i.Y,i.u,i.hb],roles:[i.S],widgetAttributes:[i.g]},y={overview:[Object(i.I)({existsCheck:!0}),i.fb,i.eb,i.c],fieldOptions:[i.nb],uiOptions:[i.Q,i.t,i.i,i.j],conditions:[i.Y,i.u,i.R,i.O,i.hb],valueExpr:[i.lb],roles:[i.S],widgetAttributes:[i.g,i.Z]},O={overview:[Object(i.I)({existsCheck:!0}),i.fb,i.eb,i.c],fieldOptions:[i.nb],uiOptions:[i.Q,i.t,i.N,i.i,i.j],conditions:[i.Y,i.u,i.R,i.O,i.hb],valueExpr:[i.lb],roles:[i.S],widgetAttributes:[i.g,i.Z]},j={overview:[Object(i.I)({existsCheck:!0}),i.fb,i.eb,i.k,i.c,i.s,i.X],fieldOptions:[i.nb,i.J,i.C,i.l,i.db,i.q,i.p,i.ib],uiOptions:[i.Q,i.N,i.t,i.mb,i.i,i.j],conditions:[i.Y,i.u,i.R,i.O,i.y,i.hb],valueExpr:[i.lb],roles:[i.S],widgetAttributes:[i.g,i.Z]},w={overview:[Object(i.I)({existsCheck:!0}),i.fb,i.eb,i.c,i.s,i.X],fieldOptions:[i.nb,i.J,i.C,i.l,i.db,i.q,i.p,i.jb,i.kb,i.ib],uiOptions:[i.Q,i.N,i.t,i.mb,i.i,i.j],conditions:[i.Y,i.u,i.R,i.O,i.y,i.hb],valueExpr:[i.lb],roles:[i.S],widgetAttributes:[i.g,i.Z]},x={overview:[Object(i.I)({existsCheck:!0}),i.fb,i.eb,i.c,i.s,i.X],fieldOptions:[i.nb,i.J,i.C,i.l,i.cb,i.ib],uiOptions:[i.Q,i.N,i.t,i.mb,i.i,i.j],conditions:[i.Y,i.u,i.R,i.O,i.y,i.hb],valueExpr:[i.lb],roles:[i.S],widgetAttributes:[i.g,i.Z]},k={overview:[Object(i.I)({existsCheck:!0}),Object(n.a)(Object(n.a)({},i.eb),{},{required:!0}),i.c,Object(o.e)({name:"formWidth",title:"Form width",data:["large"]}),Object(o.f)({name:"orderBy",title:"Order by"}),i.A,i.E,i.F],actions:[Object(o.d)({title:"On new",name:"onNew",ref:"com.axelor.meta.db.MetaAction",dependModelType:l.h.CUSTOM,multiple:!0,commaSeparated:!0,canAddNew:!0}),Object(o.d)({title:"On save",name:"onSave",ref:"com.axelor.meta.db.MetaAction",dependModelType:l.h.CUSTOM,multiple:!0,commaSeparated:!0,canAddNew:!0})]},T={overview:[Object(i.I)(),i.fb,i.eb,i.c],uiOptions:[i.t,i.mb,i.i,i.j],conditions:[i.Y,i.u,i.O,i.y,i.hb],widgetAttributes:[i.g,i.Z]},S={overview:[Object(i.I)(),i.m]},C={overview:[Object(i.I)({existsCheck:!0}),i.fb,Object(n.a)(Object(n.a)({},i.eb),{},{readOnly:!0,translationView:!1})]},M={overview:[Object(i.I)({existsCheck:!0}),i.fb,i.eb,i.H,i.n]},E={overview:[Object(i.I)({existsCheck:!0}),i.fb,i.a,i.eb,i.f,i.w],uiOptions:[i.N,i.t,i.r,i.j,i.P],conditions:[i.Y,i.u,i.O],widgetAttributes:[i.g,i.Z]},F={overview:[Object(i.I)({existsCheck:!0}),i.fb,i.a],widgetAttributes:[i.Z]},I={overview:[Object(i.I)({existsCheck:!0}),i.fb],conditions:[i.v,i.Y,i.u,i.w]},N={overview:[Object(i.I)({existsCheck:!0}),i.fb],widgetAttributes:[i.Z],conditions:[i.v,i.w,i.y]},A={overview:[Object(i.I)({existsCheck:!0}),i.fb,i.eb,i.o,i.K,i.J],uiOptions:[i.p,i.q,i.r,i.n,i.N,i.t,i.j],conditions:[i.Y,i.u,i.O,i.hb,i.e,i.L],widgetAttributes:[i.g,i.Z]},L={overview:[i.fb,i.z,i.x,i.w],widgetAttributes:[i.Z]},W={overview:[Object(i.I)({existsCheck:!0}),i.v,i.h,i.d,i.bb,i.j]},V=[{type:"form",value:C},{type:"grid",value:M},{type:"modelForm",value:k},{type:"string",value:c},{type:"byte[]",value:c},{type:"integer",value:s},{type:"number",value:s},{type:"decimal",value:u},{type:"bigdecimal",value:u},{type:"boolean",value:d},{type:"datetime",value:f},{type:"localdatetime",value:f},{type:"zoneddatetime",value:f},{type:"date",value:f},{type:"localdate",value:f},{type:"time",value:f},{type:"panel",value:m,dependModelType:l.h.BASE},{type:"panel-stack",value:p},{type:"panel-tab",value:b},{type:"button",value:g},{type:"separator",value:v},{type:"spacer",value:h},{type:"label",value:y},{type:"many-to-one",value:j},{type:"many-to-many",value:w},{type:"one-to-many",value:w},{type:"json-many-to-one",value:x},{type:"json-many-to-many",value:x},{type:"json-one-to-many",value:x},{type:"include",value:k},{type:"panel-tabs",value:b,showInCustomField:!1},{type:"panel-dashlet",value:E},{type:"panel-related",value:A},{type:"panel-include",value:L},{type:"text",value:T},{type:"long",value:u},{type:"panel-dashlet",value:T},{type:"dashlet",value:T},{type:"static",value:T},{type:"one-to-one",value:j},{type:"binary",value:T},{type:"field",value:T},{type:"dummy",value:S},{type:"viewer",value:O},{type:"editor",value:y},{type:"menu",value:N},{type:"item",value:F},{type:"divider",value:I},{type:"hilite",value:W}];t.a=V},8:function(e,t,a){"use strict";a.d(t,"f",(function(){return r})),a.d(t,"c",(function(){return i})),a.d(t,"b",(function(){return o})),a.d(t,"d",(function(){return l})),a.d(t,"e",(function(){return c})),a.d(t,"a",(function(){return s}));var n=a(4),r=function(e){var t=Object.assign({},e);return Object(n.a)({type:"string"},t)},i=function(e){var t=Object.assign({},e);return Object(n.a)({type:"objectSelection"},t)},o=function(e){var t=Object.assign({},e);return Object(n.a)({type:"integer"},t)},l=function(e){var t=Object.assign({},e);return Object(n.a)({type:"select",valueField:"name"},t)},c=function(e){var t=Object.assign({},e);return Object(n.a)({type:"staticSelect"},t)},s=function(e){var t=Object.assign({},e);return Object(n.a)({type:"boolean"},t)}},81:function(e,t,a){"use strict";a.r(t);var n=a(16),r=a(10),i=a(4),o=a(0),l=a.n(o),c=a(20),s=a.n(c),u=a(172),d=a(312),f=a(313),m=a(31),p=a(2),b=a(84),g=a(59),v=a(99),h=a(83),y=a(21),O=a(51),j=a(5),w=["id","attrs","design","isTab"];var x=l.a.memo((function(e){var t=e.id,a=e.attrs,r=e.design,i=e.isTab,o=void 0===i||i,c=Object(n.a)(e,w),u=c.errorList[t]||{},d=l.a.useState(!1),f=Object(y.a)(d,2),m=f[0],p=f[1],b=l.a.useCallback((function(e){e.stopPropagation(),p((function(e){return!e}))}),[]),g=m?"down":"up";return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:s()("menu-header",{inline:o})},l.a.createElement("div",{className:"menu-toggle-button",onClick:b},l.a.createElement("i",{className:"fa fa-chevron-".concat(g)})),l.a.createElement("span",null,Object(j.r)(a.title||a.autoTitle)),l.a.createElement("div",{className:"menu-toggle-button",onClick:b},l.a.createElement("i",{className:"fa fa-chevron-".concat(g)}))),u.items&&!o&&l.a.createElement("div",{className:s()("panel-children-error")},u.items),m&&l.a.createElement(O.b,{design:r,className:"panel-body",items:a.items||[],attrs:a,panelId:t,_type:c._type,errorList:c.errorList,canRemove:c.canRemove}))})),k={field:{component:b.a,props:{className:"field-container"}},dump_field:{component:b.a,props:{className:"field-container dump"}},panel:{component:g.a,props:{className:"panel"}},menubar:{component:g.a,props:{className:"panel menubar"}},menu:{component:x,props:{className:"panel menu"}},toolbar:{component:g.a,props:{className:"panel toolbar"}},"panel-stack":{component:g.a,props:{className:"panel"}},"panel-include":{component:g.a,props:{className:"panel"}},form:{component:h.a,props:{className:"form-layout"}},customForm:{component:h.a,props:{className:"form-layout"}},"panel-tabs":{component:v.a,props:{className:"panel tabs-panel"}}};a.d(t,"WidgetComponent",(function(){return N}));var T=["id","isDragging","connectDragSource","connectDropTarget","highlighted","hovered","tabId","className","component","attrs","state","update","onWidgetChange","errorList"],S=Symbol(),C={canDrag:function(e){var t=e.state,a="customField"===e._type;if(t.modelType!==p.h.BASE||a||e.isPalleteField)return!(e.id===p.f.dumpField||!1===e.attrs.draggable||e.attrs.isDummy||e.attrs.type===p.k.form)},beginDrag:function(e){var t=Object(i.a)({},e),a="panel"===t.attrs.serverType;return e.state.modelType===p.h.CUSTOM||"customField"===e._type?t.attrs=Object(i.a)(Object(i.a)({},t.attrs),{},{model:"com.axelor.meta.db.MetaJsonRecord",modelField:"attrs",widgetAttrs:JSON.stringify({colSpan:JSON.parse(t.attrs.widgetAttrs||"{}").colSpan,showTitle:!a||"false"})}):e.state.modelType===p.h.BASE&&(t.attrs.isModelField&&(t.attrs=Object(i.a)(Object(i.a)(Object(i.a)({},t.attrs),"field"!==t.attrs.serverType&&{type:t.attrs.serverType}),{},{serverType:"field"})),t.attrs=Object(i.a)(Object(i.a)({},t.attrs),{},{widgetAttrs:JSON.stringify({showTitle:!a||"false"})})),e.onDrag(e.id,{props:t}),Object(i.a)({},e)},endDrag:function(e,t){e.onDrag(null,{isDrop:t.didDrop(),props:{},newProps:t.getItem()})},isDragging:function(e,t){return e.id===t.getItem().id}},M={hover:function(e,t){var a=t.getItem(),n=a.index,o=a.panelId,l=a.id,c=a.attrs,s=e.index,u=e.panelId,d=e.id,f=e.attrs,m=e.state,b=e.meta,g=e.setHoverAttr,v=[p.k.panel,p.k.panelDashlet,p.k.panelRelated,p.k.panelInclude],h="customField"===e._type,y="customField"===e._type?m.customFieldWidgets:m.widgets,O=e.panelId?y[e.panelId]:null;if(b){if(c.type===p.k.tabs){if(0===b.row&&!c.isNew)return;if(b.grid){var w=Math.max.apply(Math,Object(r.a)(b.grid.map((function(e){return e.rowIndex}))));if(b.row<w)return}}if(c.type===p.k.panel){var x=b.grid,k=b.row,T=x&&x.find((function(e){return e.type===p.k.tabs}));if(T&&T.rowIndex<k)return}if(m.modelType!==p.h.BASE||h){if([p.k.menubar,p.k.toolbar].includes(c.type)){var S=Object.values(m.widgets||{}).find((function(e){return[p.k.menubar,p.k.toolbar].includes(e.type)}))?2:0;if(u)return;if(!b)return;if(b.row>S||1!==b.col)return}if((m.modelType!==p.h.CUSTOM&&!h||![p.k.menubar,p.k.toolbar].includes(c.serverType))&&([p.k.menuItem,p.k.menu,p.k.divider].includes(c.serverType)||!O||O.type!==p.k.menu)&&(![p.k.menuItem,p.k.divider].includes(c.serverType)||O&&O.type===p.k.menu)&&(![p.k.menu].includes(c.serverType)||O&&[p.k.menu,p.k.menubar].includes(O.type))&&(!O||O.type!==p.k.menubar||c.type===p.k.menu)&&(!O||O.type!==p.k.toolbar||c.type===p.d.button)&&(O||[].concat(v,[p.k.tabs,p.k.panelStack,p.k.menubar,p.k.toolbar]).includes(c.type))&&(!O||O.type!==p.k.panelStack||v.includes(c.type))&&(!O||O.type!==p.k.tabs||v.includes(c.type))){if(m.modelType===p.h.CUSTOM||"customField"===e._type){if([p.k.panelDashlet,p.k.panelInclude,p.k.panelRelated,p.k.panelStack].includes(c.type))return;var C="customField"===e._type?m.customFieldWidgets:m.widgets,M="customField"===e._type?m.customFieldItems:m.items;if(-1!==Object.keys(C).findIndex((function(e){return C[e].type===p.k.tabs}))&&c.type===p.k.tabs&&c.isNew)return;if([p.k.panel,p.k.tabs].includes(c.type)&&e.panelId&&!M.includes(e.panelId))return;if(O&&c.type===p.k.panel&&O.type!==p.k.tabs)return;if(O&&c.type===p.k.tabs&&O.type===p.k.panel)return;var E=m.hoverAttr.widgetAttrs,F=void 0===E?"{}":E,I=JSON.parse(F);if(O&&c.type===p.k.panel&&O.type===p.k.tabs&&!I.tab)g({title:c.title||Object(j.r)("Tab"),widgetAttrs:JSON.stringify({tab:"true"})});else if(!O&&c.type===p.k.panel&&I.tab){var N=JSON.parse(c.widgetAttrs||"{}");g({title:c.title,widgetAttrs:JSON.stringify(Object(i.a)(Object(i.a)({},N),{},{tab:"false"}))})}}else if(e.panelId){var A=y[e.panelId];if(A&&[p.k.tabs,p.k.panelStack].includes(c.type))return;if([p.k.panelDashlet,p.k.panelRelated,p.k.panelInclude].includes(A.type))return}if((!1!==c.isCoreField||"customField"!==e._type)&&!(s===n&&o===u||("form"!==f.type&&f.id||[]).indexOf(l)>-1||(c.items||[]).indexOf(d)>-1||!t.isOver({shallow:!0})||c.type===p.k.field&&f.type===p.k.form||c.type===p.k.field&&void 0!==e.tabId||e.state.hoverWidget&&e.state.hoverWidget.id===d&&e.state.hoverWidget.index===s&&e.state.hoverWidget.panelId===u)){if(l===e.state.dragWidget)try{if(l&&!c.isNew&&o===u&&(n+1===s||n-1===s))return void(e.state.hoverWidget&&e.onHover(null));e.onMove({source:{panelId:o,index:n,id:l,attrs:c},destination:{panelId:u,index:s,id:d,attrs:f,_type:e._type}},!0,e._type).isMoved&&e.onHover?e.onHover({meta:e.meta||{},id:d,index:s,panelId:u,position:!e.panelColumns||"1"!=="".concat(e.panelColumns)&&"".concat(e.panelColumns)!=="".concat(c.colSpan)||void 0!==e.tabId?"default":"top",attrs:f,_type:e._type}):e.state.hoverWidget&&e.onHover(null)}catch(V){}if(O&&O.widgetAttrs){var L=JSON.parse(O.widgetAttrs||"{}"),W=JSON.parse(c.widgetAttrs||"{}");L.itemSpan&&!W.colSpan&&g({colSpan:L.itemSpan})}}}}}},canDrop:function(e,t){var a;return"form"!==(null===e||void 0===e||null===(a=e.attrs)||void 0===a?void 0:a.type)}};function E(e){var t=e.id,a=e.isDragging,r=e.connectDragSource,i=e.connectDropTarget,o=e.highlighted,c=e.hovered,u=e.tabId,d=e.className,f=e.component,m=e.attrs,b=e.state,g=e.update,v=e.onWidgetChange,h=e.errorList,y=void 0===h?{}:h,O=Object(n.a)(e,T),w=b.dragWidget,x="customField"===O._type?b.customFieldWidgets:b.widgets;l.a.useEffect((function(){g((function(e){e.hoverWidget&&(e.hoverWidget.visible=c)}))}),[g,c,t,w,m]);var S=k[m.type]||k.field;O.isTab&&!k[m.type]&&(S=k.panel);var C=S,M=C.component,E=C.props,F=void 0===E?{}:E;f&&(M=f);var I=!0;Object.values(p.f.createWidgets).indexOf(t)>-1&&(I=!1,i=function(e){return e});var N=I&&b.editWidget===t,A=void 0!==u,L=!!A&&!O.isTab,W=I&&Number(t)>0&&!L&&O.design&&!1!==O.canRemove;return(L||t&&t!==p.f.form&&"symbol"!==typeof t&&!m.isDummy)&&(i=function(e){return e}),!1===m.isExist||!O.design&&p.f.dumpField?null:l.a.createElement(l.a.Fragment,null,r(i(l.a.createElement("div",Object.assign({},F,{className:s()(d,"widget",F.className,{"dummy-widget":m.isDummy,edit:N,highlighted:o,hovered:c,active:I&&a,"form-field":I,"panel-field":"panel"===m.type,"non-title-panel":"panel"===m.type&&!O.isTab&&!m.title,"error-field":Boolean(y[t]),"pallete-field":O.isPalleteField}),_type:O._type,onClick:function(e){I&&O.onSelect&&(e.stopPropagation(),t!==p.f.dumpField&&O.onSelect({id:t,type:O._type})),A&&(e.stopPropagation(),t!==p.f.dumpField&&x[u]&&v({id:u,props:{current:t,_type:O._type}}))}}),!L&&b.hoverWidget&&"symbol"!==typeof t&&Number(t)>=0&&b.hoverWidget.index===O.index&&!1!==b.hoverWidget.visible&&b.hoverWidget.panelId===O.panelId&&l.a.createElement("div",{className:s()("hover-liner",{"dummy-widget":m.isDummy||0===t},b.hoverWidget.position)}),M&&l.a.createElement(M,Object.assign({id:t,isDragging:b.dragWidget===t,attrs:m,_type:O._type,errorList:y,canRemove:O.canRemove,draggable:m.type!==p.k.menubar},O)),W&&!b.dragWidget&&l.a.createElement("span",{onClick:function(e){O.onRemove&&(e.stopPropagation(),O.onRemove(O.panelId,O.index,t,O._type))},className:"widget-remove",title:Object(j.r)("Remove Widget")},l.a.createElement("i",{className:"fa fa-remove"}))))))}var F=function(e){return l.a.createElement(E,Object.assign({},e,{connectDropTarget:function(e){return e},connectDragSource:function(e){return e}}))},I=Object(u.a)(Object(d.a)(S,M,(function(e,t){return{highlighted:!1,hovered:t.isOver(),connectDropTarget:e.dropTarget()}})),Object(f.a)(S,C,(function(e,t){return{connectDragSource:e.dragSource(),isDragging:t.isDragging()}})))(E),N=function(e){var t=Object(m.b)(),a=t.state,n="customField"===e._type?a.customFieldWidgets:a.widgets,r=n&&n[e.id]?n[e.id]:e.attrs||{},o=Object(i.a)(Object(i.a)({},t),{},{attrs:r}),c=r.type!==p.k.menubar;return e.design||c?l.a.createElement(I,Object.assign({},o,e)):l.a.createElement(F,Object.assign({},o,e))};t.default=l.a.memo(N)},83:function(e,t,a){"use strict";var n=a(16),r=a(0),i=a.n(r),o=a(51),l=a(2),c=["attrs","items","design","widgets"],s=["items","colSpan"];t.a=function(e){e.attrs;var t=e.items,a=void 0===t?[]:t,r=e.design,u=e.widgets,d=Object(n.a)(e,c),f=i.a.useMemo((function(){var e=a.filter((function(e){return u[e]&&["true",!0].includes(u[e].sidebar)})),t=a.filter((function(e){return u[e]&&!["true",!0].includes(u[e].sidebar)}));return e.length>0?{items:[{layout:l.j.grid,items:t,colSpan:9},{layout:l.j.grid,items:e,colSpan:3}]}:{items:[{layout:l.j.grid,items:t,colSpan:12}]}}),[a,u]);return i.a.createElement("div",{className:"flex-container"},f.items.map((function(e,t){var a=e.items,l=e.colSpan,c=Object(n.a)(e,s);return i.a.createElement("div",{className:"flex-item span-".concat(l),key:t},i.a.createElement(o.b,{key:t,design:r,className:"form-body",items:a,attrs:c,_type:d._type,widgets:u,errorList:d.errorList,canRemove:d.canRemove}))})))}},84:function(e,t,a){"use strict";var n=a(16),r=a(0),i=a.n(r),o=a(20),l=a.n(o),c=a(2),s=a(13),u=a.n(s),d=a(4),f=a(10),m=a(24),p=a(21),b=a(27),g=a(23),v=a(5),h=new b.a({model:"com.axelor.meta.db.MetaView"}),y=["panel","label","spacer","button"],O=function(e){return!y.includes(e.type)&&e.visibleInGrid&&!e.hidden};var j=function(e){var t=e.attrs,a=e.id,n=t||{},o=n.gridView,l=n.targetModel,c=n.title,s=n.autoTitle,b=n.action,y=n.targetJsonModel,j=Object(r.useState)([]),w=Object(p.a)(j,2),x=w[0],k=w[1],T=Object(r.useState)(null),S=Object(p.a)(T,2),C=S[0],M=S[1];return Object(r.useEffect)((function(){function e(){return(e=Object(m.a)(u.a.mark((function e(){var t,a,n,r,i,c;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=o,!b){e.next=8;break}return a={action:b,model:"com.axelor.meta.db.MetaAction",data:{context:{_id:null}}},e.next=6,h.action(a);case 6:(n=e.sent).data&&n.data[0]&&n.data[0].view&&n.data[0].view.views&&(r=n.data[0].view.views.find((function(e){return"grid"===e.type})))&&(t=r.name);case 8:if(!y){e.next=14;break}if(y.name||!y.id){e.next=13;break}return e.next=12,Object(g.e)(y.id);case 12:i=e.sent;case 13:t=Object(v.j)(i||y,!1,!0);case 14:c={model:l,data:{type:"grid",name:t}},t?h.view(c).then((function(e){if(e.data&&e.data.view){var t=e.data.view,a=t.items,n=void 0===a?[]:a,r=t.title;if(M(r),y){var i=[];return n.forEach((function(e){var t=e.jsonFields;(void 0===t?[]:t).forEach((function(e){O(e)&&i.push(e)}))})),void k((function(){return Object(f.a)(i||[])}))}var o=e.data,l=o.fields,c=void 0===l?[]:l,s=o.jsonAttrs,u=void 0===s?[]:s,m={};c.forEach((function(e){m[e.name]=e.title}));var p=n.map((function(e){return Object(d.a)(Object(d.a)({},e),{},{title:m[e.name]})}));u&&u.length>0&&u.forEach((function(e){O(e)&&p.push(e)})),k(p)}})):k([]);case 16:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[o,l,y,a,b]),i.a.createElement("div",null,i.a.createElement("div",{className:"one-to-many-header"},i.a.createElement("span",null,Object(v.r)(c||C||s))),i.a.createElement("table",null,i.a.createElement("tbody",{className:"one-to-many-row"},Object(f.a)(Array(3)).map((function(e,t){return i.a.createElement("tr",{style:{display:"flex"},key:"row_".concat(t)},x.map((function(e,a){return i.a.createElement("td",{className:"one-to-many-col one-to-many-col-border",key:"td_".concat(a),style:{borderBottom:0===t?"1px solid #ddd":""}},0===t&&e?Object(v.r)(e.title||e.autoTitle):"")})))})))))},w=["inputProps"],x=["title"],k=["title"],T=function(e){return i.a.createElement("input",Object.assign({type:"text",autoComplete:"off"},e,{className:"text-input"}))},S=function(e){return i.a.createElement("textarea",Object.assign({rows:6},e))},C=function(e){return i.a.createElement("div",{className:"spacer"})},M=function(e){return i.a.createElement("div",{className:"spacer"},i.a.createElement("hr",{className:"separator-field"}))},E=function(e){var t=e.inputProps,a=Object(n.a)(e,w);return i.a.createElement("div",{className:"boolean-wrapper"},i.a.createElement("input",Object.assign({},t,{type:"checkbox"})),i.a.createElement("span",{className:"boolean-text",title:Object(v.r)(a.title||a.name)},Object(v.r)(a.title||a.name)))},F=function(e){var t=e.title,a=Object(n.a)(e,x);return i.a.createElement("div",{className:"button-container"},i.a.createElement("button",Object.assign({},a,{className:"button-view",title:Object(v.r)(t)}),Object(v.r)(t)))},I=function(e){var t=e.title;Object(n.a)(e,k);return i.a.createElement("div",{className:"menu-item-container"},Object(v.r)(t))},N=function(e){var t=e.color,a=e.background,n=e.strong;return i.a.createElement("div",{className:l()("hilite hilite hilite-background-".concat(a," hilite-text-").concat(t),{"hilite-strong":n})},"hilite")};t.a=function(e){var t=e.id,a=e.attrs;if(t===c.f.dumpField)return i.a.createElement("div",{className:"dump-field"});var n,r=a.name,o=a.title,l=a.serverType,s=a.multiline,u=a.type,d=a.autoTitle,f=a.widget,m=(n=a,["name","title","defaultValue","placeholder","readOnly","checked","disabled","rows","required"].reduce((function(e,t){return void 0!==n[t]&&(e[t]=n[t]),"required"===t&&(e[t]="true"===n[t]),e}),{})),p=l&&"field"!==l?l.toLowerCase():u,b=function(){return i.a.createElement(i.a.Fragment,null,i.a.createElement("label",{className:"widget label",title:Object(v.r)(o||a.autoTitle||r)},Object(v.r)(o||a.autoTitle||r)),s?i.a.createElement(S,m):"Image"===a.widget?i.a.createElement("img",{alt:o||a.autoTitle||r,src:"./images/not_found.png",className:"image-widget"}):i.a.createElement(T,Object.assign({type:l===c.d.number?"number":"text"},m)))};switch(null===p||void 0===p?void 0:p.toLowerCase()){case c.d.boolean:return i.a.createElement(E,{title:o||d,name:r,inputProps:m});case c.d.spacer:return i.a.createElement(C,null);case c.d.hilite:return i.a.createElement(N,a);case c.d.separator:case c.k.divider:return i.a.createElement(M,null);case c.k.menuItem:return i.a.createElement(I,{title:o});case c.d.button:return i.a.createElement(F,Object.assign({},m,{title:o||r}));case"selection":case"label":return i.a.createElement("span",{dangerouslySetInnerHTML:{__html:o}});case"panel-dashlet":case"panel-related":case"one-to-many":case"json-one-to-many":return i.a.createElement(j,{attrs:a,id:t});case"many-to-many":case"json-many-to-many":return"TagSelect"!==f?i.a.createElement(j,{attrs:a,id:t}):i.a.createElement(b,null);default:return i.a.createElement(b,null)}}},86:function(e,t,a){"use strict";a.d(t,"a",(function(){return r})),a.d(t,"b",(function(){return i}));var n=a(2),r=[{name:"Common",value:[{name:"label",title:"Label",type:"label",image:"label.png",id:n.f.createWidgets.field,serverType:"label",colSpan:6},{name:"button",type:"button",title:"Button",image:"button.png",id:n.f.createWidgets.field,serverType:"button",colSpan:6},{name:"separator",type:"separator",title:"Separator",image:"seperator.png",id:n.f.createWidgets.field,serverType:"separator",colSpan:6},{name:"spacer",type:"spacer",title:"Spacer",serverType:"spacer",image:"line_spacing.png",id:n.f.createWidgets.field,colSpan:6},{name:"selection",title:"Selection",type:n.g.ITEM,image:"integer.png",id:n.f.createWidgets.field,serverType:"string",isSelectionField:!0,colSpan:6}]},{name:"Panels",value:[{name:"panel",type:n.g.CONTAINER,items:[],image:"panel.png",id:n.f.createWidgets.panel,serverType:n.k.panel,cols:12,layout:"grid",colSpan:12},{name:"Tabs",type:n.k.tabs,image:"panel_tabs.png",tab:!0,items:[],id:n.f.createWidgets.tabs,serverType:n.k.panel,isNew:!0,colSpan:12,title:"Tabs",current:null,layout:"grid"}]}],i=[{name:"Fields",value:[{name:"string",type:n.g.ITEM,title:"String",image:"string.png",id:n.f.createWidgets.field,isModelField:!0,serverType:"string",colSpan:6},{name:"integer",type:n.g.ITEM,title:"Integer",image:"integer.png",id:n.f.createWidgets.field,isModelField:!0,serverType:"integer",colSpan:6},{name:"decimal",type:n.g.ITEM,title:"Decimal",image:"decimal.png",id:n.f.createWidgets.field,isModelField:!0,serverType:"decimal",colSpan:6},{name:"boolean",type:n.g.ITEM,title:"Boolean",image:"boolean.png",id:n.f.createWidgets.field,isModelField:!0,serverType:"boolean",colSpan:6},{name:"datetime",type:n.g.ITEM,title:"Date time",image:"datetime.png",id:n.f.createWidgets.field,isModelField:!0,serverType:"datetime",colSpan:6},{name:"date",type:n.g.ITEM,title:"Date",image:"date.png",id:n.f.createWidgets.field,isModelField:!0,serverType:"date",colSpan:6},{name:"time",type:n.g.ITEM,title:"Time",image:"time.png",id:n.f.createWidgets.field,isModelField:!0,serverType:"time",colSpan:6}]},{name:"Relational fields",value:[{name:"manyToOne",type:n.g.ITEM,title:"Many to one",image:"many-to-one.png",id:n.f.createWidgets.field,isModelField:!0,serverType:"many-to-one",colSpan:6},{name:"oneToMany",type:n.g.ITEM,title:"One to many",image:"one-to-many.png",id:n.f.createWidgets.field,isModelField:!0,serverType:"one-to-many",colSpan:6},{name:"manyToMany",type:n.g.ITEM,title:"Many to many",image:"many-to-many.png",id:n.f.createWidgets.field,isModelField:!0,serverType:"many-to-many",colSpan:6}]}]},87:function(e,t,a){"use strict";a.d(t,"b",(function(){return f})),a.d(t,"c",(function(){return m})),a.d(t,"a",(function(){return p}));var n=a(10),r=a(16),i=a(4),o=a(5),l=a(2),c=["target","type","position","source","name","value","widgetAttrs","itemSource"],s=["id","image","elements"],u=["items","cols","serverType","version","type","widgetAttrs","current","selectionList","autoTitle","isModelField","elements","relationship","isDummy","metaModel","targetSearch","layout","massUpdate","xPath","tz"];function d(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:l.h.BASE;return m(e,[],null,t)}function f(e){var t=e.target,a=e.type,n=e.position,i=e.source,o=e.name,l=e.value,s=e.widgetAttrs,u=(e.itemSource,Object(r.a)(e,c),{target:t}),f=[];if(s&&!["replace","attribute","move"].includes(a)&&(Array.isArray(s)?f=s.map((function(e){return d(e)})).filter((function(e){return e})):f.push(d(s))),f.length||["replace","attribute","move"].includes(a)){var m={attributes:u,type:"element",name:"extend",elements:[{type:"element",name:a,attributes:{position:n,source:i,name:o,value:l},elements:f}]};return JSON.parse(JSON.stringify(m))}}function m(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],a=arguments.length>3?arguments[3]:void 0,c=(e.id,e.image,e.elements),d=void 0===c?[]:c,f=Object(r.a)(e,s),m=["panel","panel-related","panel-dashlet","panel-tabs","panel-stack","panel-include","button","label","spacer","separator","menu","item","toolbar","menubar","divider"],p=[].concat(u),b=m.includes(f.type)?f.type:"field";b=m.includes(f.serverType)?f.serverType:b,b=e.tab?"panel-tabs":b,f.type===l.k.panelInclude&&(p=[].concat(Object(n.a)(p),["title","colSpan"])),b===l.k.tabs&&(p=[].concat(Object(n.a)(p),["tab","title"])),"spacer"===b&&(p=[].concat(Object(n.a)(p),["title","isDummy"])),b===l.k.panelInclude&&(p=[].concat(Object(n.a)(p),["module","name"])),[l.k.menu,l.k.menuItem,l.k.toolbar,l.k.menubar].includes(b)&&(p=[].concat(Object(n.a)(p),["colSpan"])),[l.k.toolbar,l.k.menubar].includes(b)&&(p=[].concat(Object(n.a)(p),["colSpan","name","title"])),[l.k.divider].includes(b)&&(p=[].concat(Object(n.a)(p),["colSpan","title"]));return{attributes:Object(i.a)({},o.g.getWidgetAttrs(f,p,a)),type:"element",name:b,elements:[].concat(Object(n.a)(t),Object(n.a)(d))}}function p(e,t,a){var n={},r=[];return t.length&&t.forEach((function(t){var o=e[t],l=[];o&&(o.items&&o.items.length&&(l=p(e,o.items,a)),r.push(Object(i.a)({},m(o,l,n,a))))})),r}},99:function(e,t,a){"use strict";var n=a(10),r=a(16),i=a(0),o=a.n(i),l=a(20),c=a.n(l),s=a(244),u=a(163),d=a.n(u),f=a(51),m=a(5),p=["id","attrs","isDragging","isTab","addTabPanel"],b={cols:1};t.a=function(e){var t=Object(f.c)(),a=e.id,i=e.attrs,l=(e.isDragging,e.isTab),u=void 0!==l&&l,g=e.addTabPanel,v=Object(r.a)(e,p),h=i.title,y=i.items,O=void 0===y?[]:y,j=i.current,w=Object(n.a)(O.slice()).reduce((function(e,t){return e.concat([t,0])}),[0]),x=function(t,a){return{key:t||"".concat(t).concat(a),id:t,meta:{horizontal:!0},index:a,panelId:e.id,panelColumns:i.cols,tabId:e.id}},k=O.indexOf(j);return-1===k&&(k=0,j=O.length?O[0]:0),o.a.createElement(o.a.Fragment,null,h&&o.a.createElement("div",{className:c()("panel-header panel-tab-header",{inline:u})},h),!u&&o.a.createElement(f.a,{className:"panel-body",attrs:b},o.a.createElement("div",{className:c()("tabs")},w.map((function(e,a){return t&&o.a.createElement(t,Object.assign({},v,x(e,a),{isTab:!0,className:j===e?"active-tab":""}))})),o.a.createElement("div",{style:{display:"flex",alignItems:"center"}},o.a.createElement(s.a,{title:Object(m.r)("Add tab"),arrow:!0},o.a.createElement(d.a,{onClick:function(){return g({attrs:i,id:a})}})))),O.length>0&&t&&o.a.createElement(t,Object.assign({},v,x(j,k)))))}}},[[190,1,2]]]);
//# sourceMappingURL=main.7bc1269e.chunk.js.map