{"version":3,"sources":["Properties/widgetList.js","Properties/propertyFields.js","Properties/properties.helper.js","Properties/fieldTypes.js","Properties/fa-icons.js","constants.js","Toolbar/api.js","Editor/utils.js","Editor/index.js","Panels/MainPanel.js","common.func.js","components/SearchView.js","Toolbar/Select.js","Toolbar/customModelSearch.js","Toolbar/ViewSelection.js","Toolbar/Toolbar.js","custom-hooks/useKeyPress.js","Toolbar/DeleteConfirmation.js","store/optimizeExtension.js","Toolbar/ToolbarContainer.js","components/SelectComponent.js","components/TranslationGrid.js","Properties/widgets/StaticSelection.js","Properties/widgets/Select.js","Properties/widgets/Content.js","Properties/widgets/CheckboxField.js","Properties/widgets/SelectionWidget.js","Properties/index.js","Panels/PropertiesPanel/PropertiesView.js","Panels/PropertiesPanel/PropertiesPanelView.js","components/FieldComponent.js","Panels/AttributesPanel/Field.js","Panels/AttributesPanel/AddPanelView.js","App.js","index.js","services/http.js","services/axelor.rest.js","store/context.js","store/xpathGenerator.js","utils.js","components/Grid.js","components/Panel.js","store/computeXML.js","store/validation.js","Properties/list.js","components/Menu.js","components/Registery.js","components/PopoverAlert.js","components/Widget.js","components/Form.js","components/RelationalFieldGridView.js","components/Field.js","fields.js","store/extensionGenerator.js","components/TabPanel.js"],"names":["selectWidget","data","boolean","integer","string","text","binary","date","datetime","time","button","decimal","Name","props","StringField","name","title","required","readOnly","regex","regexErrorMessage","unique","isDisabled","properties","editWidgetType","metaFieldStore","modelType","MODEL_TYPE","BASE","CUSTOM","id","type","requiredFor","Type","column","selection","formatter","value","tab","entityIndex","indexOf","substring","SelectableType","StaticSelectField","defaultOption","disableClearable","DummyType","DataTypes","Title","translationView","DefaultValue","dependModelType","AppBuilder","ObjectSelectionField","ref","Help","Sequence","IntegerField","Roles","multiple","ValueExpression","Selection","SelectField","valueField","Widget","widgetList","OnChange","canAddNew","commaSeparated","OnNew","Min","Max","JsonRelationalField","BooleanField","getValue","change","_type","serverType","length","Domain","Prompt","parentField","SelectionIn","showInCustomField","Value","ValueAdd","ValueDel","Refresh","Active","shouldRender","list","xPath","includes","TargetJsonModel","displayField","TargetModel","property","GridView","needsTargetModel","relationalFields","OneToMany","ManyToMany","ManyToOne","FormView","Required","defaultValue","ColumnSequence","ReadOnly","Hidden","VisibleInGrid","ShowIf","HideIf","If","RequiredIf","ReadOnlyIf","IncludeIf","ValidIf","Css","Editable","ColSpan","Array","fill","map","_","i","toString","getOptionLabel","option","parentPanel","TYPE","toolbar","menubar","ItemSpan","IsGenerateMenu","MenuBuilderTitle","depends","dependValue","requiredWhen","MenuBuilderParent","shouldFetchInStart","limit","getMenuBuilderTitle","parent","find","item","parentText","filter","f","ShowTitle","CanSearch","IfModule","Height","Action","Field","CanMove","OrderBy","IncludeView","IncludeFrom","Sidebar","Model","Color","Background","Strong","Image","fontAwesome","panel","tabs","field","dumpField","form","panelStack","panelDashlet","panelRelated","panelInclude","menu","menuItem","divider","ItemTypes","CONTAINER","ROOTCONTAINER","ITEM","DUMMY","FIELD_TYPE","number","spacer","separator","hilite","PANEL_TYPE","stack","flow","grid","custom","GRID_SIZE","max","IDS","createWidgets","Symbol","customForm","PANEL_PROPS","colSpan","cols","image","items","layout","mappedBy","undefined","model","modelField","relationship","widgetAttrs","JSON","stringify","showTitle","itemSpan","OneToOne","typeReplacer","include","MANY_TO_MANY","MANY_TO_ONE","ONE_TO_ONE","ONE_TO_MANY","ENTITY_TYPE","META","DEFAULT_VALUE","readonly","hidden","sidebar","canCollapse","stacked","canMove","canSearch","multiline","conditionProperties","readonlyIf","requiredIf","hideIf","collapseIf","otherNoQuoteProps","metaJsonFieldService","AxelorService","metaModelService","appBpmService","appUserService","metaViewService","modelService","metaAttrsService","metaSelectService","selectionBuilderService","metaTranslationService","fetchCustomFields","_domain","fullName","search","sortBy","saveCustomModel","save","res","status","fields","getFields","all","$version","version","e","Promise","updatedField","response","updatedFields","fetchJSONFields","ids","update","record","criteria","push","fieldName","operator","then","schema","generateCustomModelSchema","draft","l","widgets","getMenuBuilder","menuBuilder","0","loader","removeCustomModel","removeAll","getEnableAppBuilder","a","payload","_domainContext","code","offset","bpmResult","isArray","enableAppBuilder","generateMenuChange","customModel","_context","_model","_id","action","context","fetchCustomModel","modelId","fetch","result","fetchViews","view","viewCriteria","viewList","views","Utils","getViews","fetchAttrsList","conditionPropertiesKeys","Object","keys","conditionPropertiesValues","values","startsWith","endsWith","replace","saveAttrsList","saveAll","deleteAttrsList","fetchLanguages","d","getTranslationList","keyList","saveTranslationList","deleteTranslationList","fetchUserPreferences","info","userInfo","userResponse","getSelectionText","metaSelect","selectionText","payloadData","actionResponse","_properties","customScrollTo","element","scrollableParent","includeHidden","style","getComputedStyle","excludeStaticParent","position","overflowRegex","document","body","parentElement","test","overflow","overflowY","overflowX","getScrollParent","window","requestAnimationFrame","scrollTo","top","offsetTop","behavior","useStyles","makeStyles","uiContainer","display","flexDirection","alignSelf","container","height","loaderContainer","justifyContent","zIndex","border","backgroundColor","bottom","left","right","alignItems","emptyFormInfo","minHeight","FormViewUI","design","store","useStore","classes","customPanelRef","useRef","state","customFieldWidgets","errorList","formInfo","customFieldWidgetsExists","useEffect","current","focus","className","classNames","CircularProgress","index","attrs","onSelect","dragWidget","hoverWidget","editWidget","onMove","onDrag","onHover","onWidgetChange","setHoverAttr","addTabPanel","Form","tabIndex","customFieldItems","React","memo","toolbarOffset","useState","width","paddingRight","Editor","useDebounceEffect","handler","interval","isMounted","timer","setTimeout","clearTimeout","theme","root","palette","background","paper","maxHeight","input","marginRight","titleHeader","borderBottom","listItem","paddingTop","paddingBottom","closeText","textTransform","ResponsiveDialog","onChange","handleClose","total","useTheme","fullScreen","useMediaQuery","breakpoints","down","handleItemClick","useCallback","canNext","canPrev","getLabel","Dialog","maxWidth","fullWidth","open","onClose","aria-labelledby","DialogTitle","DialogContent","Grid","Input","searchText","setSearchText","target","IconButton","onClick","onPrevious","disabled","onNext","List","ListItem","key","role","dense","ListItemText","primary","DialogActions","Button","autoFocus","color","Typography","autoComplete","fontSize","autoCompleteRoot","marginLeft","inputView","popperView","label","searchFilter","options","filterData","onSearch","loading","setLoading","setList","searchMore","setSearchMore","setOffset","setTotal","models","translate","uniqueList","uniqBy","service","_data","handleNext","newOffset","handlePrevious","debounceHandler","handleChange","handleTextChange","Fragment","clearOnEscape","inputFocused","clearIndicator","popupIndicator","endAdornment","popper","noOptions","size","onInputChange","renderInput","params","inputProps","TextField","placeholder","filterOptions","getOptionSelected","modelSearch","modelResult","modelIndex","findIndex","m","packageName","splice","entityType","actualType","modelTypes","startLoader","clearHistory","reset","modelName","handleModelSelect","exView","initialItems","initialWidgets","customFields","extensionXML","extensionView","originalXML","selectedView","metaFields","extensionMoves","attrsList","translationList","initialTranslationList","removedTranslationList","related","rest","_fields","parse","typeName","toLowerCase","targetModel","handleViewSelect","generateXMLToViewSchema","translationNames","widget","originalViewData","convert","xml2json","xml","compact","fullTagEmptyElement","_viewSearch","fieldList","generateXpath","viewFilter","modelFilter","metaFieldFilter","handleMetaFieldSelect","newId","uniqueId","handleTypeSelect","updater","handleViewFilterData","computed","extension","filterSelectedOptions","toolbarContainer","flexWrap","padding","toolItemView","crudIcon","cursor","selectionContainer","flex","toolbarActions","disableBtn","ToolbarButton","saveView","saveCustomFieldView","removeView","onNew","showAlert","isRemoveDisabled","xmlId","Boolean","isNewDisabled","isSaveDisabled","obj","callback","node","callbackRef","useLayoutEffect","handleKeyPress","event","some","ctrlKey","preventDefault","targetNode","addEventListener","removeEventListener","useKeyPress","classnames","refresh","undo","pastLength","redo","futureLength","minWidth","borderColor","DeleteConfirmation","onOk","message","aria-describedby","DialogContentText","hasIndex","path","split","isSameAsOriginal","originalWidgets","attributes","itemExplore","exploreTarget","widgetExplore","self","attributeName","dashToCamelCase","widgetValue","maskedValue","maskName","getUpdatedAttrsList","newAttrsList","removedAttrsList","moves","movesMap","Map","currentWidgets","forEach","widgetId","eGeneratePath","getWidgets","move","convertConditionName","newMove","assign","set","moveExplore","pathText","endIndex","getName","fieldIndex","attr","isOriginal","isCurrent","newAttrsIndex","changedAttrsList","optimizeExtension","processed","explore","flag","p","_list","_item","lastItem","k","filterListForAttribute","canRemoveReplace","insertIndex","elements","source","moveIndex","removeIndex","filterListForRemove","customFieldService","getChangedTranslationList","initialList","deletedTranslationList","changedTranslationList","initialItem","language","deleteConfirmationDialog","setDeleteConfirmationDialog","closeLoader","getDefaultProperties","clearView","dialog","removedCustomFields","isTabsPanelEmpty","panelTab","v","getCustomModelFields","propertyValues","Set","formProperties","getFormProperties","isGenerateMenu","menuBuilderTitle","parentMenu","menuBuilderParent","reload","errorMessage","exemptAttributes","isCreatedFromStudio","viewSearch","patch","generateView","processXML","json2xml","error","fetchResult","metaView","originalSchema","generateViewFromJson","getXML","isAttrsChanged","conditionalValues","isTranslationChanged","getExistingExtension","json","handleNew","customWidgets","fromEntries","entries","isPanelTab","extraProps","failedRes","r","handleConfirmationClose","deleteView","handleRemoveConfirmation","dangerouslySetInnerHTML","__html","renderDialog","past","future","createFilterOptions","marginTop","popperAutoComplete","marginBottom","SelectComponent","_props","preData","propertyList","setPropertyList","val","setData","setsearchText","moreDialog","setMoreDialog","initialFetch","setInitialFetch","handleInputChange","reason","getSelectValue","join","fetchOptions","uniqueData","optionDebounceHandler","getInputAsOption","handleSearch","_value","fromDialog","inputValue","updatedValue","gridView","getDefaultGridFormName","formView","forcePopupIcon","freeSolo","filtered","showMore","o","variant","camleCaseString","InputLabelProps","row","languageText","textAlign","TranslationGrid","keyValue","translations","setTranslations","handleTranslationChange","_translations","newList","translationIndex","handleTranslationUpdate","languageList","lang","onBlur","autoCompleteInput","autoCompleteOption","StaticSelection","helper","ColorTag","groupLabel","autoHighlight","getProperty","renderOption","select","StaticSelect","selectClassName","optionLabel","optionValue","setVal","Autocomplete","renderValue","Chip","defaultProps","WKF_COLORS","textField","Content","forwardRef","connectDragSource","connectDropTarget","handleRow","deleteRow","updateSelection","addRow","rowsCount","elementRef","useImperativeHandle","getNode","onKeyDown","aria-label","iconButton","clsx","whiteSpace","textOverflow","editable","InputProps","fontWeight","icon","fontAwesomeList","DropTarget","hover","monitor","component","dragIndex","getItem","hoverIndex","hoverBoundingRect","getBoundingClientRect","hoverMiddleY","hoverClientY","getClientOffset","y","moveCard","connect","dropTarget","DragSource","beginDrag","dragSource","isDragging","CheckboxField","openAlert","setAlertOpen","uncheckDialog","alertMessage","handleDialogOk","getPropertyValue","fieldValue","handleOnChange","Checkbox","checked","resize","alertPaper","checkbox","content","dialogContent","ok","btn","dialogActions","paddingLeft","SelectionWidget","rows","setRows","openGrid","setOpenGrid","isSelectionField","cloneRows","dragCard","saveRow","createRows","trim","optionKeyValue","titleLower","pop","addOptions","validateErrors","CardContent","FormControlLabel","control","startIcon","updateWidget","translationInput","translationInputView","outlinedRoot","borderWidth","notchedOutline","focused","switchBase","track","iconOutlined","panelTitle","panelMargin","margin","disableInput","translateButton","staticSelectMenuItem","textFieldInput","booleanInputLabel","PropertiesContext","createContext","isValueGenerated","StringInput","onTranslationRemove","clearable","confirm","setConfirm","min","useContext","Label","handleTranslationClick","newValue","generateFieldUniqueTitle","handleTranslationRemove","removeTranslation","helperText","minRows","isNaN","Number","Switch","RenderPropertyField","errors","checkDepend","checkModel","PropertiesProvider","children","Provider","Properties","selectedType","tz","typeFieldIndex","overview","fieldOptions","widgetAttributes","inputLabel","labelWidth","setLabelWidth","changedPropertyName","newProperties","offsetWidth","w","hasPropertyToShow","capitalizeFirst","resizeStyle","borderLeft","drawerPaper","propertyToggle","transform","borderRadius","transformOrigin","userSelect","boxShadow","drawerOpen","setDrawerOpen","setWidth","setHeight","setCSSWidth","checkWindowSize","prev","innerWidth","onResizeStop","direction","enable","Drawer","anchor","transitionDuration","fieldImage","backgroundRepeat","backgroundSize","backgroundPosition","getImageURL","FieldComponent","targetName","Tooltip","arrow","placement","backgroundImage","attributeItem","isResponsive","fieldTypes","modelFields","Container","fieldType","editorType","showField","xs","isCoreField","isPalleteField","Divider","toolbarWrapper","panelContainer","propertiesPanel","mainPanel","createTheme","typography","fontFamily","AppContent","toolbarHeight","setToolbarHeight","gridRef","mainContainerRef","toolbarSelector","alertUser","returnValue","querySelector","resizeObserver","ResizeObserver","offsetHeight","observe","unobserve","scope","angular","$viewScope","confirmDirty","cancelCallback","axelor","dialogs","_t","confirmed","console","App","DndProvider","backend","Backend","ThemeProvider","ReactDOM","render","getElementById","lastCookieString","headers","Accept","lastCookies","readCookie","cookieString","cookie","reduce","parts","joinURL","subURL","services","this","baseURL","url","method","axios","request","credential","localStorage","username","password","login","interceptor","resolve","catch","relogin","setItem","removeItem","post","_subURL","records","logout","get","StoreContext","StoreProvider","setState","produce","useMutableState","hoverAttr","getAllChildrenIds","widgetType","collectIds","concat","onExtension","moveIds","generateExtension","generateHistory","isCustomField","extendList","setErrorList","caseConverter","isExtensionView","keyReplacer","valueConverter","parentId","x","Math","child","panelId","setPresent","object","original","destination","resolver","isMoved","_widgets","isNew","checkExclusive","isDrop","_extendList","_attrs","dragWidgetProps","extraAttr","_eWidgetAttr","_attrsWidgetAttr","hoverPanel","reorderGrid","checkGridEmptyCells","validateParentPanelItems","allWidgets","tabId","onRemove","widgetItems","unshift","isPanel","childrenIds","arrangeItems","arrangeGrid","validateOnRemove","getItemType","itemId","isFirstLevel","hasSameNameInParentItems","originalName","getSameItemIndex","getTypeWiseItemIndex","getWidgetType","isUniquePanel","canStopParentLink","findRoot","widgetIds","_widget","itemPath","itemIndex","word","str","toUpperCase","isCamelCase","convertedText","camelCase","textToConvert","slice","charAt","getSpacer","other","isDummy","isDummyWidget","getGrid","trackElement","ind","span","fillRow","start","indices","modelFieldType","removeIds","emptyColumns","cell","every","removeWidget","isLastItemRemove","columnCells","rowCells","meta","gridRow","findCol","deleteItem","isDummyItem","$id","otherProps","targetWidget","validate","dragWidgetItems","_items","destinationItems","hoverCellRowIndex","relatedColSpan","hoverType","existingColspan","newIds","widgetIndex","beforeWidgets","afterWidgets","cellIndex","rowIndex","isSpacer","lastItemIndex","collectWidgets","isRemovedFromSameList","sourcePanel","sourceItems","sourceItemIndex","isLastItem","isLastItemInSamePanel","hoverParent","horizontal","ceil","hoverPath","newWidgetIds","hoverWidgetParentItems","hoverWidgetId","actualHoverWidget","shouldInsertInParent","hoverPathInfo","targetInfo","isCreateWidget","shouldAdd","processMoves","exclusive","getColSpan","defaultColspan","getCols","_panelId","typeLateral","formType","formItems","tabItems","_ID","isTab","replacer","minSize","maxSize","camelToDashCase","editorKeyReplacer","_keyIndex","isDummyField","types","getCustomWidget","exempt","exemptedAttrs","isAttrHasDefaultValue","parentValue","shouldCheckParent","_obj","caseString","g","isDefaultValue","targetSplit","getElementToWidget","itemList","fieldTarget","itemTarget","_key","elementType","getElementName","TYPE_REPLACER","getElementTypes","autoTitle","getTitle","getSpecialType","getXMLToViewItems","exclude","getExtensionElements","chars","floor","random","randomString","isForm","isJson","modelString","viewName","dasherize","xmlString","indent","format","getWidgetAttrs","isModelField","squareIndex","additionalProps","countSequence","sequence","except","formWidth","getPatchList","xmlJson","filterFormPatch","patchList","getCurrentFormAttributes","mergeFormAttributes","formPatch","targetIndex","remove","isSamePositionInOriginal","hoverItemIndex","defaultType","getReferenceProperty","checkTarget","checkString","which","getChangeList","extensionXml","elems","moveElement","col","parentItemSpan","DEFAULTS","GridContainer","useGridWidget","WidgetComponent","setWidgetComponent","module","default","gridSize","columns","isStackLayout","spacerWidth","colWidth","useMemo","cellIndice","isStack","getItemColspan","$cell","dummy","dummyPanel","fillColspan","addItem","occupiedSpan","remainSpan","fullGrid","draggable","upRow","midRow","addCell","$row","j","getFullGrid","c","columnIndex","gridRows","arr","cellPadding","cellSpacing","indice","isSeparator","colIndex","panelColumns","canRemove","inline","setAttributeOnNewWidget","inserted","_inserted","exemptedAttributes","attrIndex","cleatVirtualAction","generateNestedView","_subItems","getWidgetObject","getExtendJson2","insertOnNewPanel","lst","addErrorMessage","requiredNegation","RegExp","stringOption","existsCheck","uiOptions","conditions","valueExpr","roles","integerOption","decimalOption","booleanOption","datetimeOption","panelOption","panelStackOption","panelTabOption","buttonOption","seperatorOption","spacerOption","labelOption","viewerOption","manyToOneOption","manyToManyAndOneToManyOption","customRelationOption","formOption","actions","commonOption","dummyOption","viewOption","gridOption","panelDashletOption","menuItemOption","dividerOption","menuOption","panelRelatedOption","panelIncludeOption","hiliteOption","openMenu","setOpenMenu","handleToggleMenu","stopPropagation","Registery","dump_field","Panel","Menu","TabPanel","dialogContainer","PopoverAlert","anchorEl","handleYes","Popover","anchorOrigin","vertical","Box","CardSource","canDrag","WIDGET_TYPE","isGrid","endDrag","didDrop","newProps","CardTarget","dragPanelId","dragId","dragAttrs","hoverPanelId","hoverId","hoverAttrs","panelSet","maxIndex","gridTab","rowCount","stateItems","widgetKey","isOver","shallow","parentWidgetAttrs","dragAttrsWidgetAttrs","highlighted","hovered","DefaultWidgetComponent","setAnchorEl","visible","registryField","Registry","componentProps","isFormField","isEdit","isTabWidget","isTabWidgetContent","showRemove","isExist","edit","active","currentTarget","SimpleWidget","DraggableWidget","compose","FormComponent","rootPanel","mainItems","excludedUITypes","showInGrid","visibleInGrid","RelationalFieldGridView","targetJsonModel","gridItems","setGridItems","gridTitle","setGridTitle","actionResult","jsonFields","jsonAttrs","displayFields","allFields","TextInput","MultiTextInput","Spacer","Separator","MenuItem","Hilite","strong","DefaultWidget","alt","src","getWidgetAttrsObject","itemSource","uiFields","subViews","panelAttrs","TabPanelComponent","getTabAttributes","activeTabIndex"],"mappings":"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ACPf,KAAM,CAAC,UAAW,UAAW,UAAW,UAAW,SAAU,UAGjDiK,GAASzF,YAAa,CAClC1D,KAAM,SACNC,MAAO,SACPmC,gBAAiBxB,IAAWC,OAoD5BuI,O,uPEruBYrJ,EAAc,SAAH,OAASD,EAAK,wCACrCkB,KAAM,UACHlB,IAGSwC,EAAuB,SAAH,OAASxC,EAAK,wCAC9CkB,KAAM,mBACHlB,IAGS4C,EAAe,SAAH,OAAS5C,EAAK,wCACtCkB,KAAM,WACHlB,IAGSiD,EAAc,SAAH,OAASjD,EAAK,wCACrCkB,KAAM,SACNgC,WAAY,QACTlD,IAGS8B,EAAoB,SAAH,OAAS9B,EAAK,wCAC3CkB,KAAM,gBACHlB,IAGS4D,EAAe,SAAH,OAAS5D,EAAK,wCACtCkB,KAAM,WACHlB,K,iCCwvBWuJ,IArxBK,CACnB,WACA,kBACA,oBACA,kBACA,oBACA,YACA,SACA,kBACA,mBACA,gBACA,iBACA,YACA,eACA,yCACA,YACA,aACA,eACA,uBACA,uBACA,wBACA,qBACA,gBACA,gBACA,iBACA,cACA,WACA,aACA,gBACA,uBACA,uBACA,yBACA,yBACA,0BACA,uBACA,wBACA,qBACA,gBACA,gBACA,iBACA,cACA,YACA,gBACA,cACA,cACA,sBACA,iCACA,cACA,QACA,uBACA,gBACA,cACA,mBACA,SACA,cACA,UACA,eACA,iBACA,aACA,UACA,UACA,aACA,aACA,eACA,eACA,eACA,eACA,eACA,mBACA,kBACA,kBACA,qBACA,4BACA,SACA,UACA,aACA,oBACA,UACA,YACA,gBACA,kBACA,aACA,gBACA,mBACA,eACA,sBACA,aACA,eACA,WACA,eACA,iBACA,UACA,UACA,UACA,UACA,cACA,gBACA,aACA,eACA,SACA,SACA,cACA,gBACA,cACA,cACA,SACA,gBACA,SACA,gBACA,cACA,sBACA,sBACA,gBACA,qBACA,sBACA,YACA,kBACA,SACA,gBACA,gBACA,iBACA,yBACA,yBACA,0BACA,uBACA,cACA,qBACA,eACA,QACA,aACA,oBACA,iBACA,YACA,mBACA,eACA,eACA,aACA,iBACA,WACA,kBACA,WACA,kBACA,oBACA,kBACA,oBACA,yBACA,yBACA,0BACA,uBACA,kBACA,kBACA,mBACA,gBACA,WACA,YACA,YACA,cACA,oBACA,iBACA,eACA,aACA,WACA,WACA,WACA,oBACA,kBACA,SACA,UACA,eACA,aACA,cACA,YACA,SACA,UACA,aACA,aACA,eACA,gBACA,kBACA,cACA,gBACA,aACA,cACA,oBACA,YACA,UACA,eACA,sBACA,iBACA,qBACA,UACA,gBACA,UACA,UACA,WACA,SACA,aACA,eACA,cACA,cACA,UACA,cACA,YACA,eACA,aACA,gBACA,aACA,UACA,YACA,kBACA,cACA,cACA,qBACA,uBACA,aACA,YACA,UACA,UACA,aACA,WACA,gBACA,gBACA,YACA,cACA,gBACA,mBACA,qBACA,qBACA,YACA,YACA,UACA,SACA,UACA,cACA,iBACA,wBACA,0BACA,YACA,kBACA,mBACA,0BACA,SACA,eACA,gBACA,QACA,cACA,gBACA,uBACA,qBACA,mBACA,kBACA,SACA,UACA,YACA,iBACA,UACA,oBACA,kBACA,iBACA,kBACA,kBACA,kBACA,YACA,gBACA,kBACA,oBACA,uBACA,kBACA,eACA,iBACA,kBACA,iBACA,gBACA,aACA,UACA,YACA,UACA,uBACA,aACA,iBACA,UACA,oBACA,YACA,WACA,WACA,YACA,cACA,YACA,cACA,iBACA,mBACA,UACA,kBACA,eACA,kBACA,cACA,aACA,gBACA,oBACA,aACA,cACA,aACA,WACA,SACA,QACA,UACA,WACA,gBACA,gBACA,QACA,eACA,UACA,SACA,gBACA,YACA,gBACA,mBACA,YACA,YACA,WACA,WACA,aACA,WACA,YACA,iBACA,wBACA,0BACA,wBACA,mBACA,oBACA,cACA,UACA,WACA,cACA,iBACA,iBACA,mBACA,iBACA,iBACA,kBACA,eACA,kBACA,kBACA,oBACA,iBACA,qBACA,kBACA,iBACA,iBACA,qBACA,aACA,WACA,YACA,gBACA,WACA,aACA,eACA,aACA,UACA,gBACA,WACA,eACA,iBACA,iBACA,iBACA,mBACA,oBACA,iBACA,qBACA,WACA,WACA,cACA,cACA,aACA,eACA,SACA,WACA,UACA,WACA,YACA,cACA,UACA,iBACA,SACA,eACA,iBACA,uBACA,cACA,aACA,YACA,YACA,SACA,cACA,SACA,gBACA,SACA,cACA,YACA,YACA,mBACA,UACA,aACA,WACA,aACA,gBACA,cACA,eACA,eACA,eACA,gBACA,iBACA,gBACA,UACA,cACA,qBACA,YACA,WACA,UACA,cACA,aACA,aACA,oBACA,UACA,qBACA,qBACA,sBACA,mBACA,gBACA,WACA,YACA,kBACA,gBACA,oBACA,UACA,SACA,gBACA,WACA,aACA,eACA,UACA,iBACA,iBACA,mBACA,mBACA,YACA,cACA,YACA,YACA,YACA,WACA,aACA,eACA,gBACA,sBACA,WACA,kBACA,kBACA,oBACA,cACA,YACA,kBACA,UACA,WACA,YACA,kBACA,gBACA,mBACA,WACA,aACA,YACA,iBACA,kBACA,oBACA,mBACA,0BACA,cACA,YACA,WACA,mBACA,aACA,eACA,iBACA,iBACA,mBACA,eACA,eACA,WACA,WACA,kBACA,oBACA,SACA,YACA,YACA,mBACA,qBACA,aACA,WACA,kBACA,WACA,eACA,eACA,gBACA,oBACA,mBACA,eACA,iBACA,sBACA,WACA,UACA,iBACA,mBACA,UACA,UACA,iBACA,iBACA,mBACA,aACA,eACA,WACA,kBACA,kBACA,QACA,YACA,cACA,qBACA,uBACA,WACA,gBACA,iBACA,QACA,YACA,aACA,WACA,aACA,YACA,kBACA,mBACA,aACA,gBACA,YACA,YACA,aACA,YACA,WACA,eACA,gBACA,aACA,SACA,UACA,YACA,iBACA,kBACA,YACA,SACA,gBACA,SACA,WACA,WACA,SACA,YACA,UACA,cACA,YACA,YACA,kBACA,iBACA,YACA,UACA,YACA,YACA,WACA,eACA,sBACA,kBACA,oBACA,YACA,YACA,YACA,UACA,kBACA,kBACA,qBACA,mBACA,YACA,aACA,mBACA,cACA,YACA,aACA,iBACA,aACA,cACA,WACA,WACA,aACA,gBACA,aACA,cACA,oBACA,qBACA,iBACA,mBACA,UACA,oBACA,qBACA,qBACA,sBACA,cACA,eACA,eACA,sBACA,uBACA,aACA,gBACA,mBACA,aACA,WACA,aACA,YACA,cACA,oBACA,oBACA,UACA,eACA,qBACA,oBACA,iBACA,YACA,WACA,kBACA,mBACA,kBACA,iBACA,iBACA,mBACA,UACA,iBACA,mBACA,iBACA,mBACA,iBACA,wBACA,eACA,YACA,cACA,WACA,iBACA,iBACA,aACA,WACA,YACA,gBACA,SACA,UACA,WACA,UACA,cACA,gBACA,mBACA,cACA,iBACA,gBACA,QACA,cACA,aACA,eACA,iBACA,mBACA,mBACA,mBACA,mBACA,mBACA,uBACA,sBACA,sBACA,yBACA,gCACA,gBACA,iBACA,mBACA,iBACA,eACA,YACA,WACA,kBACA,oBACA,qBACA,uBACA,UACA,iBACA,iBACA,gBACA,eACA,kBACA,eACA,eACA,WACA,iBACA,qBACA,WACA,aACA,UACA,YACA,iBACA,YACA,WACA,SACA,SACA,YACA,mBACA,kBACA,QACA,YACA,aACA,oBACA,cACA,eACA,UACA,sBACA,gBACA,YACA,YACA,gBACA,cACA,YACA,SACA,SACA,UACA,iBACA,mBACA,aACA,YACA,eACA,iBACA,gBACA,WACA,WACA,aACA,WACA,kBACA,gBACA,aACA,YACA,mBACA,kBACA,WACA,kBACA,UACA,QACA,0BACA,iBACA,gBACA,eACA,aACA,YACA,WACA,YACA,cACA,gBACA,oBACA,UACA,iBACA,kBACA,oBACA,qBACA,qBACA,oBACA,aACA,SACA,eACA,gBACA,gBACA,aACA,YACA,UACA,iBACA,kBACA,yBACA,WACA,QACA,eACA,UACA,SACA,WACA,aACA,kBACA,sB,+BClxBD,8fACO,IAAMnC,EAAO,CACnBoC,MAAO,QACPC,KAAM,aACNC,MAAO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","file":"static/js/main.142c310f.chunk.js","sourcesContent":["const selectWidget = [\n\t\"NavSelect\",\n\t\"CheckboxSelect\",\n\t\"RadioSelect\",\n\t\"MultiSelect\",\n\t\"ImageSelect\",\n];\nconst data = {\n\tboolean: [\n\t\t\"InlineCheckbox\",\n\t\t\"Toggle\",\n\t\t\"BooleanSelect\",\n\t\t\"BooleanRadio\",\n\t\t\"BooleanSwitch\",\n\t\t...selectWidget,\n\t],\n\tinteger: [\n\t\t\"RelativeTime\",\n\t\t\"Duration\",\n\t\t\"Progress\",\n\t\t\"SelectProgress\",\n\t\t...selectWidget,\n\t],\n\tstring: [\n\t\t\"Email\",\n\t\t\"Url\",\n\t\t\"Password\",\n\t\t\"Html\",\n\t\t\"CodeEditor\",\n\t\t\"ImageLine\",\n\t\t...selectWidget,\n\t],\n\ttext: [\"Html\", \"CodeEditor\", ...selectWidget],\n\t\"many-to-one\": [\"SuggestBox\", \"Image\", \"binary-link\"],\n\t\"json-many-to-one\": [\"SuggestBox\", \"Image\", \"binary-link\"],\n\t\"one-to-one\": [\"SuggestBox\", \"Image\"],\n\t\"json-one-to-one\": [\"SuggestBox\", \"Image\"],\n\t\"many-to-many\": [\"TagSelect\"],\n\t\"json-many-to-many\": [\"TagSelect\"],\n\tbinary: [\"Image\", \"BinaryLink\", ...selectWidget],\n\tdate: [...selectWidget],\n\tdatetime: [...selectWidget],\n\ttime: [...selectWidget],\n\tbutton: [\"Button\", \"InfoButton\", \"ToolButton\"],\n\tdecimal: [\n\t\t\"RelativeTime\",\n\t\t\"Duration\",\n\t\t\"Progress\",\n\t\t\"SelectProgress\",\n\t\t...selectWidget,\n\t],\n};\n\nexport default data;\n","import {\n\tStringField,\n\tObjectSelectionField,\n\tIntegerField,\n\tSelectField,\n\tStaticSelectField,\n\tBooleanField,\n} from \"./fieldTypes\";\nimport widgetList from \"./widgetList\";\nimport { MODEL_TYPE, DataTypes, relationalFields, TYPE } from \"../constants\";\nimport { getMenuBuilderTitle } from \"./properties.helper\";\n\n/** Overview Fields */\nexport const Name = ({ ...props } = {}) =>\n\tStringField({\n\t\tname: \"name\",\n\t\ttitle: \"Name\",\n\t\trequired: true,\n\t\treadOnly: true,\n\t\tregex: /^[a-z]/i,\n\t\tregexErrorMessage: \"First Letter of the name should always be alphabet\",\n\t\tunique: true,\n\t\tisDisabled: ({ properties, metaFieldStore, editWidgetType, modelType }) => {\n\t\t\tif (modelType === MODEL_TYPE.BASE && editWidgetType !== \"customField\") {\n\t\t\t\t// const name = properties['name'];\n\t\t\t\t// const index = metaFieldStore.findIndex(field => field.name === name);\n\t\t\t\t// return index !== -1 ? true : false;\n\t\t\t\treturn true;\n\t\t\t}\n\t\t\tif (\n\t\t\t\tmodelType === MODEL_TYPE.CUSTOM &&\n\t\t\t\tproperties &&\n\t\t\t\tproperties.id &&\n\t\t\t\tproperties.type === \"form\"\n\t\t\t) {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t\treturn false;\n\t\t},\n\t\trequiredFor: [\n\t\t\t\"button\",\n\t\t\t\"label\",\n\t\t\t\"panel\",\n\t\t\t\"string\",\n\t\t\t\"panel-dashlet\",\n\t\t\t\"separator\",\n\t\t\t\"panel-stack\",\n\t\t\t\"integer\",\n\t\t\t\"date\",\n\t\t\t\"time\",\n\t\t\t\"datetime\",\n\t\t\t\"decimal\",\n\t\t\t\"one-to-many\",\n\t\t\t\"many-to-many\",\n\t\t\t\"boolean\",\n\t\t\t\"label\",\n\t\t\t\"viewer\",\n\t\t\t\"editor\",\n\t\t\t\"one-to-one\",\n\t\t\t\"spacer\",\n\t\t\t\"long\",\n\t\t\t\"hilite\",\n\t\t],\n\t\t...props,\n\t});\n\nexport const Type = StringField({\n\tname: \"type\",\n\tcolumn: \"type_name\",\n\ttitle: \"Type\",\n\trequired: true,\n\tselection: \"json.field.type\",\n\treadOnly: \"true\",\n\tformatter: (value, properties) => {\n\t\tif (properties.tab) {\n\t\t\treturn \"panel-tabs\";\n\t\t}\n\t\tconst entityIndex = value.indexOf(\"entity\");\n\t\tif (entityIndex !== -1) {\n\t\t\treturn value.substring(0, entityIndex);\n\t\t}\n\t\treturn value;\n\t},\n});\n\nexport const SelectableType = StaticSelectField({\n\tname: \"type\",\n\ttitle: \"Type\",\n\tcolumn: \"type_name\",\n\trequired: true,\n\tdata: [\"string\", \"integer\"],\n\tdefaultOption: false,\n\tdisableClearable: true,\n\tisDisabled: ({ properties, metaFieldStore, editWidgetType, modelType }) => {\n\t\tif (modelType === MODEL_TYPE.BASE && editWidgetType !== \"customField\") {\n\t\t\treturn true;\n\t\t}\n\t},\n});\n\nexport const DummyType = StaticSelectField({\n\tname: \"dummyType\",\n\ttitle: \"Type\",\n\tdata: [...DataTypes],\n});\n\nexport const Title = StringField({\n\tname: \"title\",\n\ttitle: \"Title\",\n\ttranslationView: false,\n});\n\nexport const DefaultValue = StringField({\n\tname: \"defaultValue\",\n\tdependModelType: MODEL_TYPE.CUSTOM,\n\ttitle: \"Default value\",\n});\n\nexport const AppBuilder = ObjectSelectionField({\n\tname: \"appBuilder\",\n\ttitle: \"App name\",\n\tref: \"com.axelor.studio.db.AppBuilder\",\n\tdependModelType: MODEL_TYPE.CUSTOM,\n});\n\nexport const Help = StringField({\n\tname: \"help\",\n\ttitle: \"Help\",\n\tdependModelType: MODEL_TYPE.CUSTOM,\n});\n\nexport const Sequence = IntegerField({\n\tname: \"sequence\",\n\ttitle: \"Sequence\",\n\tdependModelType: MODEL_TYPE.CUSTOM,\n});\n\n/** Roles Fields */\nexport const Roles = ObjectSelectionField({\n\tname: \"roles\",\n\ttitle: \"Roles\",\n\tref: \"com.axelor.auth.db.Role\",\n\tmultiple: true,\n\tdependModelType: MODEL_TYPE.CUSTOM,\n});\n\n/** ValueExpr Fields */\nexport const ValueExpression = {\n\tname: \"valueExpr\",\n\ttitle: \"Value expr\",\n\ttype: \"text\",\n\tdependModelType: MODEL_TYPE.CUSTOM,\n};\n\n/** Field Options Fields */\nexport const Selection = SelectField({\n\tname: \"selection\",\n\ttitle: \"Selection\",\n\tref: \"com.axelor.meta.db.MetaSelect\",\n\tvalueField: \"name\",\n\tdependModelType: MODEL_TYPE.CUSTOM,\n\ttype:\"selection\",\n});\n\nexport const Widget = StaticSelectField({\n\tname: \"widget\",\n\tdata: widgetList,\n\ttitle: \"Widget\",\n\tdependModelType: MODEL_TYPE.CUSTOM,\n});\n\nexport const OnChange = SelectField({\n\tname: \"onChange\",\n\tref: \"com.axelor.meta.db.MetaAction\",\n\tdependModelType: MODEL_TYPE.CUSTOM,\n\ttitle: \"On change\",\n\tmultiple: true,\n\tcanAddNew: true,\n\tcommaSeparated: true,\n});\n\nexport const OnNew = SelectField({\n\ttitle: \"On new\",\n\tname: \"onNew\",\n\tref: \"com.axelor.meta.db.MetaAction\",\n\tdependModelType: MODEL_TYPE.CUSTOM,\n\tmultiple: true,\n\tcommaSeparated: true,\n\tcanAddNew: true,\n});\n\nexport const OnLoad = SelectField({\n\ttitle: \"On load\",\n\tname: \"onLoad\",\n\tref: \"com.axelor.meta.db.MetaAction\",\n\tmultiple: true,\n\tcommaSeparated: true,\n\tcanAddNew: true,\n});\n\nexport const OnSave = SelectField({\n\tname: \"onSave\",\n\tref: \"com.axelor.meta.db.MetaAction\",\n\tmultiple: true,\n\tcommaSeparated: true,\n\ttitle: \"On save\",\n\tcanAddNew: true,\n});\n\nexport const Min = IntegerField({\n\tname: \"minSize\",\n\ttitle: \"Min\",\n\tdependModelType: MODEL_TYPE.CUSTOM,\n});\n\nexport const Max = IntegerField({\n\tname: \"maxSize\",\n\ttitle: \"Max\",\n\tdependModelType: MODEL_TYPE.CUSTOM,\n});\n\nexport const JsonRelationalField = BooleanField({\n\tname: \"isJsonRelationalField\",\n\ttitle: \"Is json relational field\",\n\tdependModelType: MODEL_TYPE.CUSTOM,\n\tgetValue: (properties) => {\n\t\tconst type = properties[\"type\"];\n\t\tif (type) {\n\t\t\tconst hasJSONField = type.indexOf(\"json\") === 0;\n\t\t\tif (hasJSONField) {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\t\treturn false;\n\t},\n\tchange: (value, properties) => {\n\t\tconst type = properties[\"type\"];\n\t\tif (value === true) {\n\t\t\tconst has = type.indexOf(\"json\") === 0;\n\t\t\tif (!has) {\n\t\t\t\tconst _type = `json-${type}`;\n\t\t\t\treturn {\n\t\t\t\t\ttype: _type,\n\t\t\t\t\tserverType: _type,\n\t\t\t\t};\n\t\t\t}\n\t\t} else if (value === false) {\n\t\t\tconst has = type.indexOf(\"json\") === 0;\n\t\t\tif (has) {\n\t\t\t\tconst _type = type.substring(\"json-\".length);\n\t\t\t\treturn {\n\t\t\t\t\ttype: _type,\n\t\t\t\t\tserverType: _type,\n\t\t\t\t};\n\t\t\t}\n\t\t}\n\t\treturn {};\n\t},\n});\n\nexport const Domain = StringField({\n\tname: \"domain\",\n\ttitle: \"Domain\",\n});\n\nexport const Prompt = StringField({\n\tname: \"prompt\",\n\ttitle: \"Prompt\",\n\tparentField: \"widgetAttrs\",\n});\n\nexport const SelectionIn = StringField({\n\tname: \"selection-in\",\n\tdependModelType: MODEL_TYPE.BASE,\n\tshowInCustomField: false,\n\ttitle: \"Selection in\",\n});\n\nexport const Value = StringField({\n\tname: \"value\",\n\ttitle: \"Value\",\n\tdependModelType: MODEL_TYPE.BASE,\n\tshowInCustomField: false,\n});\n\nexport const ValueAdd = StringField({\n\tname: \"value:add\",\n\ttitle: \"Value:add\",\n\tdependModelType: MODEL_TYPE.BASE,\n\tshowInCustomField: false,\n});\n\nexport const ValueDel = StringField({\n\tname: \"value:del\",\n\ttitle: \"Value:del\",\n\tdependModelType: MODEL_TYPE.BASE,\n\tshowInCustomField: false,\n});\n\nexport const Refresh = BooleanField({\n\tname: \"refresh\",\n\ttitle: \"Refresh\",\n\tdependModelType: MODEL_TYPE.BASE,\n\tshowInCustomField: false,\n});\n\nexport const Active = BooleanField({\n\tname: \"active\",\n\ttitle: \"Active\",\n\tdependModelType: MODEL_TYPE.BASE,\n\tshowInCustomField: false,\n\tshouldRender: (list) => {\n\t\treturn list.xPath && list.xPath.includes(\"panel-tabs\");\n\t},\n});\n\nexport const TargetJsonModel = ObjectSelectionField({\n\tname: \"targetJsonModel\",\n\trequired: true,\n\tref: \"com.axelor.meta.db.MetaJsonModel\",\n\tdisplayField: \"title\",\n\tdependModelType: MODEL_TYPE.CUSTOM,\n\ttitle: \"Target json model\",\n});\n\nexport const TargetModel = SelectField({\n\tname: \"targetModel\",\n\ttitle: \"Target model\",\n\trequired: true,\n\tref: \"com.axelor.meta.db.MetaModel\",\n\tvalueField: \"fullName\",\n\tcanAddNew: false,\n\tisDisabled: (property, editWidgetType, modelType) => {\n\t\treturn (\n\t\t\teditWidgetType !== \"customField\" &&\n\t\t\tproperty.serverType !== \"field\" &&\n\t\t\tmodelType !== MODEL_TYPE.CUSTOM\n\t\t);\n\t},\n});\n\nexport const GridView = SelectField({\n\tname: \"gridView\",\n\ttitle: \"Grid view\",\n\tref: \"com.axelor.meta.db.MetaView\",\n\tvalueField: \"name\",\n\tdependModelType: MODEL_TYPE.CUSTOM,\n\tneedsTargetModel: [\n\t\trelationalFields.OneToMany,\n\t\trelationalFields.ManyToMany,\n\t\trelationalFields.ManyToOne,\n\t],\n});\n\nexport const FormView = SelectField({\n\tname: \"formView\",\n\ttitle: \"Form view\",\n\tref: \"com.axelor.meta.db.MetaView\",\n\tvalueField: \"name\",\n\tdependModelType: MODEL_TYPE.CUSTOM,\n\tneedsTargetModel: [\n\t\trelationalFields.OneToMany,\n\t\trelationalFields.ManyToMany,\n\t\trelationalFields.ManyToOne,\n\t],\n});\n\n/** Ui options fields */\nexport const Required = BooleanField({\n\tname: \"required\",\n\ttitle: \"Required\",\n\tdefaultValue: \"false\",\n\tisDisabled: ({ properties, metaFieldStore, editWidgetType, modelType }) => {\n\t\tif (modelType === MODEL_TYPE.BASE && editWidgetType !== \"customField\") {\n\t\t\tif (properties[\"requiredIf\"] && properties[\"requiredIf\"].length) {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\t\treturn false;\n\t},\n});\n\nexport const ColumnSequence = IntegerField({\n\tname: \"columnSequence\",\n\ttitle: \"Column sequence\",\n\tdependModelType: MODEL_TYPE.CUSTOM,\n});\n\nexport const ReadOnly = BooleanField({\n\tname: \"readonly\",\n\ttitle: \"Readonly\",\n\tisDisabled: ({ properties, metaFieldStore, editWidgetType, modelType }) => {\n\t\tif (modelType === MODEL_TYPE.BASE && editWidgetType !== \"customField\") {\n\t\t\tif (properties[\"readonlyIf\"] && properties[\"readonlyIf\"].length) {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\t\treturn false;\n\t},\n});\n\nexport const Hidden = BooleanField({\n\tname: \"hidden\",\n\ttitle: \"Hidden\",\n\tisDisabled: ({ properties }) => {\n\t\tif (properties[\"hideIf\"] && properties[\"hideIf\"].length) {\n\t\t\treturn true;\n\t\t}\n\t\treturn false;\n\t},\n});\n\nexport const VisibleInGrid = BooleanField({\n\tname: \"visibleInGrid\",\n\ttitle: \"Visible in grid\",\n\tdependModelType: MODEL_TYPE.CUSTOM,\n});\n\n/** Conditions Fields*/\nexport const ShowIf = StringField({\n\tname: \"showIf\",\n\ttitle: \"Show if\",\n\tdependModelType: MODEL_TYPE.CUSTOM,\n});\n\nexport const HideIf = StringField({\n\tname: \"hideIf\",\n\ttitle: \"Hide if\",\n\tisDisabled: ({ properties }) => {\n\t\tif (properties[\"hidden\"]) {\n\t\t\treturn true;\n\t\t}\n\t\treturn false;\n\t},\n});\n\nexport const If = StringField({\n\tname: \"if\",\n\ttitle: \"If\",\n\tdependModelType: MODEL_TYPE.CUSTOM,\n});\n\nexport const RequiredIf = StringField({\n\tname: \"requiredIf\",\n\ttitle: \"Required if\",\n\tisDisabled: ({ properties, metaFieldStore, editWidgetType, modelType }) => {\n\t\tif (modelType === MODEL_TYPE.BASE && editWidgetType !== \"customField\") {\n\t\t\tif (properties[\"required\"]) {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\t\treturn false;\n\t},\n});\n\nexport const ReadOnlyIf = StringField({\n\tname: \"readonlyIf\",\n\ttitle: \"Readonly if\",\n\tisDisabled: ({ properties, metaFieldStore, editWidgetType, modelType }) => {\n\t\tif (modelType === MODEL_TYPE.BASE && editWidgetType !== \"customField\") {\n\t\t\tif (properties[\"readonly\"]) {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\t\treturn false;\n\t},\n});\n\nexport const IncludeIf = StringField({\n\tname: \"includeIf\",\n\ttitle: \"Include if\",\n\tdependModelType: MODEL_TYPE.CUSTOM,\n});\n\nexport const ValidIf = StringField({\n\tname: \"validIf\",\n\ttitle: \"Valid if\",\n\tparentField: \"widgetAttrs\",\n\tmodelType: MODEL_TYPE.CUSTOM,\n\tdependModelType: MODEL_TYPE.CUSTOM,\n});\n\nexport const CanSave = StringField({\n\tname: \"canSave\",\n\tdependModelType: MODEL_TYPE.CUSTOM,\n\ttitle: \"Can save\",\n});\n\nexport const Css = StringField({\n\tname: \"css\",\n\ttitle: \"Css\",\n\tparentField: \"widgetAttrs\",\n\tmodelType: MODEL_TYPE.CUSTOM,\n\t// dependModelType: MODEL_TYPE.BASE,\n});\n\nexport const Editable = BooleanField({\n\tname: \"editable\",\n\ttitle: \"Editable\",\n\tdependModelType: MODEL_TYPE.CUSTOM,\n});\n\n/** Widget Fields*/\nexport const ColSpan = StaticSelectField({\n\tname: \"colSpan\",\n\ttitle: \"Colspan\",\n\tparentField: \"widgetAttrs\",\n\tdata: [\n\t\t\"\",\n\t\t...Array(12)\n\t\t\t.fill()\n\t\t\t.map((_, i) => (i + 1).toString()),\n\t],\n\tmodelType: MODEL_TYPE.CUSTOM,\n\tdependModelType: MODEL_TYPE.CUSTOM,\n\tgetOptionLabel: (option) => {\n\t\treturn option ? option.toString() : \"\";\n\t},\n\tisDisabled: ({ properties, parentPanel }) => {\n\t\tif (parentPanel) {\n\t\t\tif ([TYPE.toolbar, TYPE.menubar].includes(parentPanel.serverType)) {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\t\treturn false;\n\t},\n});\n\nexport const ItemSpan = StaticSelectField({\n\tname: \"itemSpan\",\n\ttitle: \"Itemspan\",\n\tparentField: \"widgetAttrs\",\n\tdata: [\n\t\t\"\",\n\t\t...Array(12)\n\t\t\t.fill()\n\t\t\t.map((_, i) => (i + 1).toString()),\n\t],\n\tmodelType: MODEL_TYPE.CUSTOM,\n\tdependModelType: MODEL_TYPE.CUSTOM,\n\tgetOptionLabel: (option) => {\n\t\treturn option ? option.toString() : \"\";\n\t},\n\tisDisabled: ({ properties, parentPanel }) => {\n\t\tif (\n\t\t\tparentPanel &&\n\t\t\t[TYPE.toolbar, TYPE.menubar].includes(parentPanel.serverType)\n\t\t) {\n\t\t\treturn true;\n\t\t}\n\t\treturn false;\n\t},\n});\n\nexport const IsGenerateMenu = BooleanField({\n\tname: \"isGenerateMenu\",\n\ttitle: \"Generate menu\",\n});\n\nexport const MenuBuilderTitle = StringField({\n\tname: \"menuBuilderTitle\",\n\ttitle: \"Menu title\",\n\tdepends: \"isGenerateMenu\",\n\tdependValue: true,\n\trequiredWhen: IsGenerateMenu.name,\n});\n\nexport const MenuBuilderParent = ObjectSelectionField({\n\tname: \"menuBuilderParent\",\n\tref: \"com.axelor.meta.db.MetaMenu\",\n\ttitle: \"Parent\",\n\tdepends: \"isGenerateMenu\",\n\tdependValue: true,\n\tvalueField: \"id\",\n\tdisplayField: \"title\",\n\tshouldFetchInStart: true,\n\tlimit: null,\n\tgetOptionLabel: (option, data) => {\n\t\treturn getMenuBuilderTitle(option, data);\n\t},\n});\n\nexport const ShowTitle = BooleanField({\n\tname: \"showTitle\",\n\tparentField: \"widgetAttrs\",\n\tdefaultValue: true,\n\tmodelType: MODEL_TYPE.CUSTOM,\n\tdependModelType: MODEL_TYPE.CUSTOM,\n\ttitle: \"Show title\",\n});\n\nexport const CanSearch = BooleanField({\n\tname: \"canSearch\",\n\tdependModelType: MODEL_TYPE.CUSTOM,\n\ttitle: \"Can search\",\n});\n\nexport const IfModule = StringField({\n\tname: \"if-module\",\n\ttitle: \"If-module\",\n\tdependModelType: MODEL_TYPE.CUSTOM,\n});\n\nexport const Height = StringField({\n\tname: \"height\",\n\tdependModelType: MODEL_TYPE.CUSTOM,\n});\n\nexport const Action = SelectField({\n\tname: \"action\",\n\ttitle: \"Action\",\n\tref: \"com.axelor.meta.db.MetaAction\",\n\trequiredFor: [\"panel-dashlet\", \"item\"],\n\tdependModelType: MODEL_TYPE.CUSTOM,\n\tmultiple: true,\n\tcommaSeparated: true,\n\tcanAddNew: true,\n});\n\nexport const Field = StringField({\n\tname: \"field\",\n\ttitle: \"Field\",\n\trequired: true,\n\trequiredFor: [\"panel-related\"],\n\tdependModelType: MODEL_TYPE.CUSTOM,\n});\n\nexport const CanMove = BooleanField({\n\tname: \"canMove\",\n\tdependModelType: MODEL_TYPE.CUSTOM,\n\ttitle: \"Can move\",\n});\n\nexport const OrderBy = StringField({\n\tname: \"orderBy\",\n\tdependModelType: MODEL_TYPE.CUSTOM,\n\ttitle: \"Order by\",\n});\n\nexport const IncludeView = SelectField({\n\tname: \"view\",\n\ttitle: \"View\",\n\tref: \"com.axelor.meta.db.MetaView\",\n\tvalueField: \"name\",\n\trequiredFor: [\"panel-include\"],\n\tdependModelType: MODEL_TYPE.CUSTOM,\n});\n\nexport const IncludeFrom = StringField({\n\tname: \"from\",\n\ttitle: \"From\",\n});\n\nexport const Sidebar = BooleanField({\n\tname: \"sidebar\",\n\ttitle: \"Sidebar\",\n\tparentField: \"widgetAttrs\",\n\tmodelType: MODEL_TYPE.CUSTOM,\n\tdependModelType: MODEL_TYPE.CUSTOM,\n\tshowInCustomField: false,\n});\n\nexport const Password = BooleanField({\n\tname: \"password\",\n\ttitle: \"Password\",\n});\n\nexport const Model = SelectField({\n\tname: \"model\",\n\ttitle: \"Model\",\n\trequired: true,\n\tref: \"com.axelor.meta.db.MetaModel\",\n\tvalueField: \"fullName\",\n});\n\nexport const Color = StaticSelectField({\n\tname: \"color\",\n\ttitle: \"Color\",\n\tdata: [\"default\", \"primary\", \"warning\", \"success\", \"danger\", \"info\"],\n});\n\nexport const Background = StaticSelectField({\n\tname: \"background\",\n\ttitle: \"Background\",\n\tdata: [\"default\", \"primary\", \"warning\", \"success\", \"danger\", \"info\"],\n});\n\nexport const Strong = BooleanField({\n\tname: \"strong\",\n\ttitle: \"Strong\",\n\tdependModelType: MODEL_TYPE.BASE,\n});\n\nexport default {\n\tName,\n\tType,\n\tTitle,\n\tDefaultValue,\n\tAppBuilder,\n\tHelp,\n\tSequence,\n\tRoles,\n\tValueExpression,\n\tSelection,\n\tWidget,\n\tOnChange,\n\tMin,\n\tMax,\n\tJsonRelationalField,\n\tDomain,\n\tTargetJsonModel,\n\tTargetModel,\n\tGridView,\n\tFormView,\n\tRequired,\n\tColumnSequence,\n\tReadOnly,\n\tHidden,\n\tVisibleInGrid,\n\tShowIf,\n\tHideIf,\n\tRequiredIf,\n\tReadOnlyIf,\n\tIncludeIf,\n\tValidIf,\n\tColSpan,\n\tShowTitle,\n\tOnNew,\n\tOnLoad,\n\tOnSave,\n\tEditable,\n\tDummyType,\n\tIfModule,\n\tAction,\n\tHeight,\n\tCanSearch,\n\tField,\n\tCanMove,\n\tOrderBy,\n\tIncludeFrom,\n\tIncludeView,\n\tPassword,\n\tImage,\n\tIsGenerateMenu,\n\tMenuBuilderParent,\n\tMenuBuilderTitle,\n\tModel,\n\tColor,\n\tStrong,\n\tBackground,\n\tItemSpan,\n\tCss,\n};\n","export const getMenuBuilderTitle = (option, data) => {\n\tlet text = option.title || \"\";\n\tif (option.parent) {\n\t\tconst parent = data.find((item) => item.id === option.parent.id);\n\t\tif (parent) {\n\t\t\tconst parentText = getMenuBuilderTitle(\n\t\t\t\tparent,\n\t\t\t\t(data && data.filter((f) => f.id !== parent.id)) || []\n\t\t\t);\n\t\t\tif (parentText) {\n\t\t\t\ttext = `${parentText} > ${text}`;\n\t\t\t}\n\t\t}\n\t}\n\treturn text;\n};\n","/** Set field types */\nexport const StringField = ({ ...props }) => ({\n\ttype: \"string\",\n\t...props,\n});\n\nexport const ObjectSelectionField = ({ ...props }) => ({\n\ttype: \"objectSelection\",\n\t...props,\n});\n\nexport const IntegerField = ({ ...props }) => ({\n\ttype: \"integer\",\n\t...props,\n});\n\nexport const SelectField = ({ ...props }) => ({\n\ttype: \"select\",\n\tvalueField: \"name\",\n\t...props,\n});\n\nexport const StaticSelectField = ({ ...props }) => ({\n\ttype: \"staticSelect\",\n\t...props,\n});\n\nexport const BooleanField = ({ ...props }) => ({\n\ttype: \"boolean\",\n\t...props,\n});\n\nexport default {\n\tStringField,\n\tObjectSelectionField,\n\tIntegerField,\n\tSelectField,\n\tStaticSelectField,\n\tBooleanField,\n};\n","const fontAwesome = [\n\t\"fa-500px\",\n\t\"fa-address-book\",\n\t\"fa-address-book-o\",\n\t\"fa-address-card\",\n\t\"fa-address-card-o\",\n\t\"fa-adjust\",\n\t\"fa-adn\",\n\t\"fa-align-center\",\n\t\"fa-align-justify\",\n\t\"fa-align-left\",\n\t\"fa-align-right\",\n\t\"fa-amazon\",\n\t\"fa-ambulance\",\n\t\"fa-american-sign-language-interpreting\",\n\t\"fa-anchor\",\n\t\"fa-android\",\n\t\"fa-angellist\",\n\t\"fa-angle-double-down\",\n\t\"fa-angle-double-left\",\n\t\"fa-angle-double-right\",\n\t\"fa-angle-double-up\",\n\t\"fa-angle-down\",\n\t\"fa-angle-left\",\n\t\"fa-angle-right\",\n\t\"fa-angle-up\",\n\t\"fa-apple\",\n\t\"fa-archive\",\n\t\"fa-area-chart\",\n\t\"fa-arrow-circle-down\",\n\t\"fa-arrow-circle-left\",\n\t\"fa-arrow-circle-o-down\",\n\t\"fa-arrow-circle-o-left\",\n\t\"fa-arrow-circle-o-right\",\n\t\"fa-arrow-circle-o-up\",\n\t\"fa-arrow-circle-right\",\n\t\"fa-arrow-circle-up\",\n\t\"fa-arrow-down\",\n\t\"fa-arrow-left\",\n\t\"fa-arrow-right\",\n\t\"fa-arrow-up\",\n\t\"fa-arrows\",\n\t\"fa-arrows-alt\",\n\t\"fa-arrows-h\",\n\t\"fa-arrows-v\",\n\t\"fa-asl-interpreting\",\n\t\"fa-assistive-listening-systems\",\n\t\"fa-asterisk\",\n\t\"fa-at\",\n\t\"fa-audio-description\",\n\t\"fa-automobile\",\n\t\"fa-backward\",\n\t\"fa-balance-scale\",\n\t\"fa-ban\",\n\t\"fa-bandcamp\",\n\t\"fa-bank\",\n\t\"fa-bar-chart\",\n\t\"fa-bar-chart-o\",\n\t\"fa-barcode\",\n\t\"fa-bars\",\n\t\"fa-bath\",\n\t\"fa-bathtub\",\n\t\"fa-battery\",\n\t\"fa-battery-0\",\n\t\"fa-battery-1\",\n\t\"fa-battery-2\",\n\t\"fa-battery-3\",\n\t\"fa-battery-4\",\n\t\"fa-battery-empty\",\n\t\"fa-battery-full\",\n\t\"fa-battery-half\",\n\t\"fa-battery-quarter\",\n\t\"fa-battery-three-quarters\",\n\t\"fa-bed\",\n\t\"fa-beer\",\n\t\"fa-behance\",\n\t\"fa-behance-square\",\n\t\"fa-bell\",\n\t\"fa-bell-o\",\n\t\"fa-bell-slash\",\n\t\"fa-bell-slash-o\",\n\t\"fa-bicycle\",\n\t\"fa-binoculars\",\n\t\"fa-birthday-cake\",\n\t\"fa-bitbucket\",\n\t\"fa-bitbucket-square\",\n\t\"fa-bitcoin\",\n\t\"fa-black-tie\",\n\t\"fa-blind\",\n\t\"fa-bluetooth\",\n\t\"fa-bluetooth-b\",\n\t\"fa-bold\",\n\t\"fa-bolt\",\n\t\"fa-bomb\",\n\t\"fa-book\",\n\t\"fa-bookmark\",\n\t\"fa-bookmark-o\",\n\t\"fa-braille\",\n\t\"fa-briefcase\",\n\t\"fa-btc\",\n\t\"fa-bug\",\n\t\"fa-building\",\n\t\"fa-building-o\",\n\t\"fa-bullhorn\",\n\t\"fa-bullseye\",\n\t\"fa-bus\",\n\t\"fa-buysellads\",\n\t\"fa-cab\",\n\t\"fa-calculator\",\n\t\"fa-calendar\",\n\t\"fa-calendar-check-o\",\n\t\"fa-calendar-minus-o\",\n\t\"fa-calendar-o\",\n\t\"fa-calendar-plus-o\",\n\t\"fa-calendar-times-o\",\n\t\"fa-camera\",\n\t\"fa-camera-retro\",\n\t\"fa-car\",\n\t\"fa-caret-down\",\n\t\"fa-caret-left\",\n\t\"fa-caret-right\",\n\t\"fa-caret-square-o-down\",\n\t\"fa-caret-square-o-left\",\n\t\"fa-caret-square-o-right\",\n\t\"fa-caret-square-o-up\",\n\t\"fa-caret-up\",\n\t\"fa-cart-arrow-down\",\n\t\"fa-cart-plus\",\n\t\"fa-cc\",\n\t\"fa-cc-amex\",\n\t\"fa-cc-diners-club\",\n\t\"fa-cc-discover\",\n\t\"fa-cc-jcb\",\n\t\"fa-cc-mastercard\",\n\t\"fa-cc-paypal\",\n\t\"fa-cc-stripe\",\n\t\"fa-cc-visa\",\n\t\"fa-certificate\",\n\t\"fa-chain\",\n\t\"fa-chain-broken\",\n\t\"fa-check\",\n\t\"fa-check-circle\",\n\t\"fa-check-circle-o\",\n\t\"fa-check-square\",\n\t\"fa-check-square-o\",\n\t\"fa-chevron-circle-down\",\n\t\"fa-chevron-circle-left\",\n\t\"fa-chevron-circle-right\",\n\t\"fa-chevron-circle-up\",\n\t\"fa-chevron-down\",\n\t\"fa-chevron-left\",\n\t\"fa-chevron-right\",\n\t\"fa-chevron-up\",\n\t\"fa-child\",\n\t\"fa-chrome\",\n\t\"fa-circle\",\n\t\"fa-circle-o\",\n\t\"fa-circle-o-notch\",\n\t\"fa-circle-thin\",\n\t\"fa-clipboard\",\n\t\"fa-clock-o\",\n\t\"fa-clone\",\n\t\"fa-close\",\n\t\"fa-cloud\",\n\t\"fa-cloud-download\",\n\t\"fa-cloud-upload\",\n\t\"fa-cny\",\n\t\"fa-code\",\n\t\"fa-code-fork\",\n\t\"fa-codepen\",\n\t\"fa-codiepie\",\n\t\"fa-coffee\",\n\t\"fa-cog\",\n\t\"fa-cogs\",\n\t\"fa-columns\",\n\t\"fa-comment\",\n\t\"fa-comment-o\",\n\t\"fa-commenting\",\n\t\"fa-commenting-o\",\n\t\"fa-comments\",\n\t\"fa-comments-o\",\n\t\"fa-compass\",\n\t\"fa-compress\",\n\t\"fa-connectdevelop\",\n\t\"fa-contao\",\n\t\"fa-copy\",\n\t\"fa-copyright\",\n\t\"fa-creative-commons\",\n\t\"fa-credit-card\",\n\t\"fa-credit-card-alt\",\n\t\"fa-crop\",\n\t\"fa-crosshairs\",\n\t\"fa-css3\",\n\t\"fa-cube\",\n\t\"fa-cubes\",\n\t\"fa-cut\",\n\t\"fa-cutlery\",\n\t\"fa-dashboard\",\n\t\"fa-dashcube\",\n\t\"fa-database\",\n\t\"fa-deaf\",\n\t\"fa-deafness\",\n\t\"fa-dedent\",\n\t\"fa-delicious\",\n\t\"fa-desktop\",\n\t\"fa-deviantart\",\n\t\"fa-diamond\",\n\t\"fa-digg\",\n\t\"fa-dollar\",\n\t\"fa-dot-circle-o\",\n\t\"fa-download\",\n\t\"fa-dribbble\",\n\t\"fa-drivers-license\",\n\t\"fa-drivers-license-o\",\n\t\"fa-dropbox\",\n\t\"fa-drupal\",\n\t\"fa-edge\",\n\t\"fa-edit\",\n\t\"fa-eercast\",\n\t\"fa-eject\",\n\t\"fa-ellipsis-h\",\n\t\"fa-ellipsis-v\",\n\t\"fa-empire\",\n\t\"fa-envelope\",\n\t\"fa-envelope-o\",\n\t\"fa-envelope-open\",\n\t\"fa-envelope-open-o\",\n\t\"fa-envelope-square\",\n\t\"fa-envira\",\n\t\"fa-eraser\",\n\t\"fa-etsy\",\n\t\"fa-eur\",\n\t\"fa-euro\",\n\t\"fa-exchange\",\n\t\"fa-exclamation\",\n\t\"fa-exclamation-circle\",\n\t\"fa-exclamation-triangle\",\n\t\"fa-expand\",\n\t\"fa-expeditedssl\",\n\t\"fa-external-link\",\n\t\"fa-external-link-square\",\n\t\"fa-eye\",\n\t\"fa-eye-slash\",\n\t\"fa-eyedropper\",\n\t\"fa-fa\",\n\t\"fa-facebook\",\n\t\"fa-facebook-f\",\n\t\"fa-facebook-official\",\n\t\"fa-facebook-square\",\n\t\"fa-fast-backward\",\n\t\"fa-fast-forward\",\n\t\"fa-fax\",\n\t\"fa-feed\",\n\t\"fa-female\",\n\t\"fa-fighter-jet\",\n\t\"fa-file\",\n\t\"fa-file-archive-o\",\n\t\"fa-file-audio-o\",\n\t\"fa-file-code-o\",\n\t\"fa-file-excel-o\",\n\t\"fa-file-image-o\",\n\t\"fa-file-movie-o\",\n\t\"fa-file-o\",\n\t\"fa-file-pdf-o\",\n\t\"fa-file-photo-o\",\n\t\"fa-file-picture-o\",\n\t\"fa-file-powerpoint-o\",\n\t\"fa-file-sound-o\",\n\t\"fa-file-text\",\n\t\"fa-file-text-o\",\n\t\"fa-file-video-o\",\n\t\"fa-file-word-o\",\n\t\"fa-file-zip-o\",\n\t\"fa-files-o\",\n\t\"fa-film\",\n\t\"fa-filter\",\n\t\"fa-fire\",\n\t\"fa-fire-extinguisher\",\n\t\"fa-firefox\",\n\t\"fa-first-order\",\n\t\"fa-flag\",\n\t\"fa-flag-checkered\",\n\t\"fa-flag-o\",\n\t\"fa-flash\",\n\t\"fa-flask\",\n\t\"fa-flickr\",\n\t\"fa-floppy-o\",\n\t\"fa-folder\",\n\t\"fa-folder-o\",\n\t\"fa-folder-open\",\n\t\"fa-folder-open-o\",\n\t\"fa-font\",\n\t\"fa-font-awesome\",\n\t\"fa-fonticons\",\n\t\"fa-fort-awesome\",\n\t\"fa-forumbee\",\n\t\"fa-forward\",\n\t\"fa-foursquare\",\n\t\"fa-free-code-camp\",\n\t\"fa-frown-o\",\n\t\"fa-futbol-o\",\n\t\"fa-gamepad\",\n\t\"fa-gavel\",\n\t\"fa-gbp\",\n\t\"fa-ge\",\n\t\"fa-gear\",\n\t\"fa-gears\",\n\t\"fa-genderless\",\n\t\"fa-get-pocket\",\n\t\"fa-gg\",\n\t\"fa-gg-circle\",\n\t\"fa-gift\",\n\t\"fa-git\",\n\t\"fa-git-square\",\n\t\"fa-github\",\n\t\"fa-github-alt\",\n\t\"fa-github-square\",\n\t\"fa-gitlab\",\n\t\"fa-gittip\",\n\t\"fa-glass\",\n\t\"fa-glide\",\n\t\"fa-glide-g\",\n\t\"fa-globe\",\n\t\"fa-google\",\n\t\"fa-google-plus\",\n\t\"fa-google-plus-circle\",\n\t\"fa-google-plus-official\",\n\t\"fa-google-plus-square\",\n\t\"fa-google-wallet\",\n\t\"fa-graduation-cap\",\n\t\"fa-gratipay\",\n\t\"fa-grav\",\n\t\"fa-group\",\n\t\"fa-h-square\",\n\t\"fa-hacker-news\",\n\t\"fa-hand-grab-o\",\n\t\"fa-hand-lizard-o\",\n\t\"fa-hand-o-down\",\n\t\"fa-hand-o-left\",\n\t\"fa-hand-o-right\",\n\t\"fa-hand-o-up\",\n\t\"fa-hand-paper-o\",\n\t\"fa-hand-peace-o\",\n\t\"fa-hand-pointer-o\",\n\t\"fa-hand-rock-o\",\n\t\"fa-hand-scissors-o\",\n\t\"fa-hand-spock-o\",\n\t\"fa-hand-stop-o\",\n\t\"fa-handshake-o\",\n\t\"fa-hard-of-hearing\",\n\t\"fa-hashtag\",\n\t\"fa-hdd-o\",\n\t\"fa-header\",\n\t\"fa-headphones\",\n\t\"fa-heart\",\n\t\"fa-heart-o\",\n\t\"fa-heartbeat\",\n\t\"fa-history\",\n\t\"fa-home\",\n\t\"fa-hospital-o\",\n\t\"fa-hotel\",\n\t\"fa-hourglass\",\n\t\"fa-hourglass-1\",\n\t\"fa-hourglass-2\",\n\t\"fa-hourglass-3\",\n\t\"fa-hourglass-end\",\n\t\"fa-hourglass-half\",\n\t\"fa-hourglass-o\",\n\t\"fa-hourglass-start\",\n\t\"fa-houzz\",\n\t\"fa-html5\",\n\t\"fa-i-cursor\",\n\t\"fa-id-badge\",\n\t\"fa-id-card\",\n\t\"fa-id-card-o\",\n\t\"fa-ils\",\n\t\"fa-image\",\n\t\"fa-imdb\",\n\t\"fa-inbox\",\n\t\"fa-indent\",\n\t\"fa-industry\",\n\t\"fa-info\",\n\t\"fa-info-circle\",\n\t\"fa-inr\",\n\t\"fa-instagram\",\n\t\"fa-institution\",\n\t\"fa-internet-explorer\",\n\t\"fa-intersex\",\n\t\"fa-ioxhost\",\n\t\"fa-italic\",\n\t\"fa-joomla\",\n\t\"fa-jpy\",\n\t\"fa-jsfiddle\",\n\t\"fa-key\",\n\t\"fa-keyboard-o\",\n\t\"fa-krw\",\n\t\"fa-language\",\n\t\"fa-laptop\",\n\t\"fa-lastfm\",\n\t\"fa-lastfm-square\",\n\t\"fa-leaf\",\n\t\"fa-leanpub\",\n\t\"fa-legal\",\n\t\"fa-lemon-o\",\n\t\"fa-level-down\",\n\t\"fa-level-up\",\n\t\"fa-life-bouy\",\n\t\"fa-life-buoy\",\n\t\"fa-life-ring\",\n\t\"fa-life-saver\",\n\t\"fa-lightbulb-o\",\n\t\"fa-line-chart\",\n\t\"fa-link\",\n\t\"fa-linkedin\",\n\t\"fa-linkedin-square\",\n\t\"fa-linode\",\n\t\"fa-linux\",\n\t\"fa-list\",\n\t\"fa-list-alt\",\n\t\"fa-list-ol\",\n\t\"fa-list-ul\",\n\t\"fa-location-arrow\",\n\t\"fa-lock\",\n\t\"fa-long-arrow-down\",\n\t\"fa-long-arrow-left\",\n\t\"fa-long-arrow-right\",\n\t\"fa-long-arrow-up\",\n\t\"fa-low-vision\",\n\t\"fa-magic\",\n\t\"fa-magnet\",\n\t\"fa-mail-forward\",\n\t\"fa-mail-reply\",\n\t\"fa-mail-reply-all\",\n\t\"fa-male\",\n\t\"fa-map\",\n\t\"fa-map-marker\",\n\t\"fa-map-o\",\n\t\"fa-map-pin\",\n\t\"fa-map-signs\",\n\t\"fa-mars\",\n\t\"fa-mars-double\",\n\t\"fa-mars-stroke\",\n\t\"fa-mars-stroke-h\",\n\t\"fa-mars-stroke-v\",\n\t\"fa-maxcdn\",\n\t\"fa-meanpath\",\n\t\"fa-medium\",\n\t\"fa-medkit\",\n\t\"fa-meetup\",\n\t\"fa-meh-o\",\n\t\"fa-mercury\",\n\t\"fa-microchip\",\n\t\"fa-microphone\",\n\t\"fa-microphone-slash\",\n\t\"fa-minus\",\n\t\"fa-minus-circle\",\n\t\"fa-minus-square\",\n\t\"fa-minus-square-o\",\n\t\"fa-mixcloud\",\n\t\"fa-mobile\",\n\t\"fa-mobile-phone\",\n\t\"fa-modx\",\n\t\"fa-money\",\n\t\"fa-moon-o\",\n\t\"fa-mortar-board\",\n\t\"fa-motorcycle\",\n\t\"fa-mouse-pointer\",\n\t\"fa-music\",\n\t\"fa-navicon\",\n\t\"fa-neuter\",\n\t\"fa-newspaper-o\",\n\t\"fa-object-group\",\n\t\"fa-object-ungroup\",\n\t\"fa-odnoklassniki\",\n\t\"fa-odnoklassniki-square\",\n\t\"fa-opencart\",\n\t\"fa-openid\",\n\t\"fa-opera\",\n\t\"fa-optin-monster\",\n\t\"fa-outdent\",\n\t\"fa-pagelines\",\n\t\"fa-paint-brush\",\n\t\"fa-paper-plane\",\n\t\"fa-paper-plane-o\",\n\t\"fa-paperclip\",\n\t\"fa-paragraph\",\n\t\"fa-paste\",\n\t\"fa-pause\",\n\t\"fa-pause-circle\",\n\t\"fa-pause-circle-o\",\n\t\"fa-paw\",\n\t\"fa-paypal\",\n\t\"fa-pencil\",\n\t\"fa-pencil-square\",\n\t\"fa-pencil-square-o\",\n\t\"fa-percent\",\n\t\"fa-phone\",\n\t\"fa-phone-square\",\n\t\"fa-photo\",\n\t\"fa-picture-o\",\n\t\"fa-pie-chart\",\n\t\"fa-pied-piper\",\n\t\"fa-pied-piper-alt\",\n\t\"fa-pied-piper-pp\",\n\t\"fa-pinterest\",\n\t\"fa-pinterest-p\",\n\t\"fa-pinterest-square\",\n\t\"fa-plane\",\n\t\"fa-play\",\n\t\"fa-play-circle\",\n\t\"fa-play-circle-o\",\n\t\"fa-plug\",\n\t\"fa-plus\",\n\t\"fa-plus-circle\",\n\t\"fa-plus-square\",\n\t\"fa-plus-square-o\",\n\t\"fa-podcast\",\n\t\"fa-power-off\",\n\t\"fa-print\",\n\t\"fa-product-hunt\",\n\t\"fa-puzzle-piece\",\n\t\"fa-qq\",\n\t\"fa-qrcode\",\n\t\"fa-question\",\n\t\"fa-question-circle\",\n\t\"fa-question-circle-o\",\n\t\"fa-quora\",\n\t\"fa-quote-left\",\n\t\"fa-quote-right\",\n\t\"fa-ra\",\n\t\"fa-random\",\n\t\"fa-ravelry\",\n\t\"fa-rebel\",\n\t\"fa-recycle\",\n\t\"fa-reddit\",\n\t\"fa-reddit-alien\",\n\t\"fa-reddit-square\",\n\t\"fa-refresh\",\n\t\"fa-registered\",\n\t\"fa-remove\",\n\t\"fa-renren\",\n\t\"fa-reorder\",\n\t\"fa-repeat\",\n\t\"fa-reply\",\n\t\"fa-reply-all\",\n\t\"fa-resistance\",\n\t\"fa-retweet\",\n\t\"fa-rmb\",\n\t\"fa-road\",\n\t\"fa-rocket\",\n\t\"fa-rotate-left\",\n\t\"fa-rotate-right\",\n\t\"fa-rouble\",\n\t\"fa-rss\",\n\t\"fa-rss-square\",\n\t\"fa-rub\",\n\t\"fa-ruble\",\n\t\"fa-rupee\",\n\t\"fa-s15\",\n\t\"fa-safari\",\n\t\"fa-save\",\n\t\"fa-scissors\",\n\t\"fa-scribd\",\n\t\"fa-search\",\n\t\"fa-search-minus\",\n\t\"fa-search-plus\",\n\t\"fa-sellsy\",\n\t\"fa-send\",\n\t\"fa-send-o\",\n\t\"fa-server\",\n\t\"fa-share\",\n\t\"fa-share-alt\",\n\t\"fa-share-alt-square\",\n\t\"fa-share-square\",\n\t\"fa-share-square-o\",\n\t\"fa-shekel\",\n\t\"fa-sheqel\",\n\t\"fa-shield\",\n\t\"fa-ship\",\n\t\"fa-shirtsinbulk\",\n\t\"fa-shopping-bag\",\n\t\"fa-shopping-basket\",\n\t\"fa-shopping-cart\",\n\t\"fa-shower\",\n\t\"fa-sign-in\",\n\t\"fa-sign-language\",\n\t\"fa-sign-out\",\n\t\"fa-signal\",\n\t\"fa-signing\",\n\t\"fa-simplybuilt\",\n\t\"fa-sitemap\",\n\t\"fa-skyatlas\",\n\t\"fa-skype\",\n\t\"fa-slack\",\n\t\"fa-sliders\",\n\t\"fa-slideshare\",\n\t\"fa-smile-o\",\n\t\"fa-snapchat\",\n\t\"fa-snapchat-ghost\",\n\t\"fa-snapchat-square\",\n\t\"fa-snowflake-o\",\n\t\"fa-soccer-ball-o\",\n\t\"fa-sort\",\n\t\"fa-sort-alpha-asc\",\n\t\"fa-sort-alpha-desc\",\n\t\"fa-sort-amount-asc\",\n\t\"fa-sort-amount-desc\",\n\t\"fa-sort-asc\",\n\t\"fa-sort-desc\",\n\t\"fa-sort-down\",\n\t\"fa-sort-numeric-asc\",\n\t\"fa-sort-numeric-desc\",\n\t\"fa-sort-up\",\n\t\"fa-soundcloud\",\n\t\"fa-space-shuttle\",\n\t\"fa-spinner\",\n\t\"fa-spoon\",\n\t\"fa-spotify\",\n\t\"fa-square\",\n\t\"fa-square-o\",\n\t\"fa-stack-exchange\",\n\t\"fa-stack-overflow\",\n\t\"fa-star\",\n\t\"fa-star-half\",\n\t\"fa-star-half-empty\",\n\t\"fa-star-half-full\",\n\t\"fa-star-half-o\",\n\t\"fa-star-o\",\n\t\"fa-steam\",\n\t\"fa-steam-square\",\n\t\"fa-step-backward\",\n\t\"fa-step-forward\",\n\t\"fa-stethoscope\",\n\t\"fa-sticky-note\",\n\t\"fa-sticky-note-o\",\n\t\"fa-stop\",\n\t\"fa-stop-circle\",\n\t\"fa-stop-circle-o\",\n\t\"fa-street-view\",\n\t\"fa-strikethrough\",\n\t\"fa-stumbleupon\",\n\t\"fa-stumbleupon-circle\",\n\t\"fa-subscript\",\n\t\"fa-subway\",\n\t\"fa-suitcase\",\n\t\"fa-sun-o\",\n\t\"fa-superpowers\",\n\t\"fa-superscript\",\n\t\"fa-support\",\n\t\"fa-table\",\n\t\"fa-tablet\",\n\t\"fa-tachometer\",\n\t\"fa-tag\",\n\t\"fa-tags\",\n\t\"fa-tasks\",\n\t\"fa-taxi\",\n\t\"fa-telegram\",\n\t\"fa-television\",\n\t\"fa-tencent-weibo\",\n\t\"fa-terminal\",\n\t\"fa-text-height\",\n\t\"fa-text-width\",\n\t\"fa-th\",\n\t\"fa-th-large\",\n\t\"fa-th-list\",\n\t\"fa-themeisle\",\n\t\"fa-thermometer\",\n\t\"fa-thermometer-0\",\n\t\"fa-thermometer-1\",\n\t\"fa-thermometer-2\",\n\t\"fa-thermometer-3\",\n\t\"fa-thermometer-4\",\n\t\"fa-thermometer-empty\",\n\t\"fa-thermometer-full\",\n\t\"fa-thermometer-half\",\n\t\"fa-thermometer-quarter\",\n\t\"fa-thermometer-three-quarters\",\n\t\"fa-thumb-tack\",\n\t\"fa-thumbs-down\",\n\t\"fa-thumbs-o-down\",\n\t\"fa-thumbs-o-up\",\n\t\"fa-thumbs-up\",\n\t\"fa-ticket\",\n\t\"fa-times\",\n\t\"fa-times-circle\",\n\t\"fa-times-circle-o\",\n\t\"fa-times-rectangle\",\n\t\"fa-times-rectangle-o\",\n\t\"fa-tint\",\n\t\"fa-toggle-down\",\n\t\"fa-toggle-left\",\n\t\"fa-toggle-off\",\n\t\"fa-toggle-on\",\n\t\"fa-toggle-right\",\n\t\"fa-toggle-up\",\n\t\"fa-trademark\",\n\t\"fa-train\",\n\t\"fa-transgender\",\n\t\"fa-transgender-alt\",\n\t\"fa-trash\",\n\t\"fa-trash-o\",\n\t\"fa-tree\",\n\t\"fa-trello\",\n\t\"fa-tripadvisor\",\n\t\"fa-trophy\",\n\t\"fa-truck\",\n\t\"fa-try\",\n\t\"fa-tty\",\n\t\"fa-tumblr\",\n\t\"fa-tumblr-square\",\n\t\"fa-turkish-lira\",\n\t\"fa-tv\",\n\t\"fa-twitch\",\n\t\"fa-twitter\",\n\t\"fa-twitter-square\",\n\t\"fa-umbrella\",\n\t\"fa-underline\",\n\t\"fa-undo\",\n\t\"fa-universal-access\",\n\t\"fa-university\",\n\t\"fa-unlink\",\n\t\"fa-unlock\",\n\t\"fa-unlock-alt\",\n\t\"fa-unsorted\",\n\t\"fa-upload\",\n\t\"fa-usb\",\n\t\"fa-usd\",\n\t\"fa-user\",\n\t\"fa-user-circle\",\n\t\"fa-user-circle-o\",\n\t\"fa-user-md\",\n\t\"fa-user-o\",\n\t\"fa-user-plus\",\n\t\"fa-user-secret\",\n\t\"fa-user-times\",\n\t\"fa-users\",\n\t\"fa-vcard\",\n\t\"fa-vcard-o\",\n\t\"fa-venus\",\n\t\"fa-venus-double\",\n\t\"fa-venus-mars\",\n\t\"fa-viacoin\",\n\t\"fa-viadeo\",\n\t\"fa-viadeo-square\",\n\t\"fa-video-camera\",\n\t\"fa-vimeo\",\n\t\"fa-vimeo-square\",\n\t\"fa-vine\",\n\t\"fa-vk\",\n\t\"fa-volume-control-phone\",\n\t\"fa-volume-down\",\n\t\"fa-volume-off\",\n\t\"fa-volume-up\",\n\t\"fa-warning\",\n\t\"fa-wechat\",\n\t\"fa-weibo\",\n\t\"fa-weixin\",\n\t\"fa-whatsapp\",\n\t\"fa-wheelchair\",\n\t\"fa-wheelchair-alt\",\n\t\"fa-wifi\",\n\t\"fa-wikipedia-w\",\n\t\"fa-window-close\",\n\t\"fa-window-close-o\",\n\t\"fa-window-maximize\",\n\t\"fa-window-minimize\",\n\t\"fa-window-restore\",\n\t\"fa-windows\",\n\t\"fa-won\",\n\t\"fa-wordpress\",\n\t\"fa-wpbeginner\",\n\t\"fa-wpexplorer\",\n\t\"fa-wpforms\",\n\t\"fa-wrench\",\n\t\"fa-xing\",\n\t\"fa-xing-square\",\n\t\"fa-y-combinator\",\n\t\"fa-y-combinator-square\",\n\t\"fa-yahoo\",\n\t\"fa-yc\",\n\t\"fa-yc-square\",\n\t\"fa-yelp\",\n\t\"fa-yen\",\n\t\"fa-yoast\",\n\t\"fa-youtube\",\n\t\"fa-youtube-play\",\n\t\"fa-youtube-square\",\n];\n\nexport default fontAwesome;\n","// TYPE define all elements\nexport const TYPE = {\n\tpanel: \"panel\",\n\ttabs: \"panel-tabs\",\n\tfield: \"field\",\n\tdumpField: \"dump_field\",\n\tform: \"form\",\n\tpanelStack: \"panel-stack\",\n\tpanelDashlet: \"panel-dashlet\",\n\tpanelRelated: \"panel-related\",\n\tpanelInclude: \"panel-include\",\n\tmenu: \"menu\",\n\tmenuItem: \"item\",\n\tdivider: \"divider\",\n\tmenubar: \"menubar\",\n\ttoolbar: \"toolbar\",\n};\n\nexport const ItemTypes = {\n\tCONTAINER: \"panel\",\n\tROOTCONTAINER: \"root-container\",\n\tITEM: \"item\",\n\tDUMMY: \"dummy\",\n};\n\n// FIELD_TYPE define all field types(manage on server end)\nexport const FIELD_TYPE = {\n\tstring: \"string\",\n\tnumber: \"number\",\n\tbutton: \"button\",\n\tspacer: \"spacer\",\n\tboolean: \"boolean\",\n\tseparator: \"separator\",\n\thilite: \"hilite\",\n};\n\n// Panel Container Types\nexport const PANEL_TYPE = {\n\tstack: \"stack\",\n\tflow: \"flow\",\n\tgrid: \"grid\",\n\tcustom: \"custom\",\n};\n\n// define Grid Size constants\nexport const GRID_SIZE = {\n\tmax: 12,\n};\n\n// contains all unique ids for special widgets\nexport const IDS = {\n\tcreateWidgets: {\n\t\ttabs: Symbol(),\n\t\tpanel: Symbol(),\n\t\tfield: Symbol(),\n\t},\n\tform: -1,\n\tcustomForm: -2,\n\tdumpField: 0,\n};\n\nexport const PANEL_PROPS = {\n\tcolSpan: 12,\n\tcols: 12,\n\tid: IDS.createWidgets.panel,\n\timage: \"panel.png\",\n\titems: [],\n\tlayout: \"grid\",\n\tmappedBy: undefined,\n\tmodel: \"com.axelor.meta.db.MetaJsonRecord\",\n\tmodelField: \"attrs\",\n\trelationship: undefined,\n\ttitle: undefined,\n\ttype: ItemTypes.CONTAINER,\n\twidgetAttrs: JSON.stringify({\n\t\tshowTitle: \"false\",\n\t\tcolSpan: 12,\n\t\titemSpan: 6,\n\t}),\n};\n\nexport const relationalFields = {\n\tOneToMany: \"one-to-many\",\n\tManyToMany: \"many-to-many\",\n\tManyToOne: \"many-to-one\",\n\tOneToOne: \"one-to-one\",\n};\n\nexport const typeReplacer = {\n\tinclude: TYPE.panelInclude,\n\tMANY_TO_MANY: \"many-to-many\",\n\tMANY_TO_ONE: \"many-to-one\",\n\tONE_TO_ONE: \"one-to-one\",\n\tONE_TO_MANY: \"one-to-many\",\n};\n\nexport const MODEL_TYPE = {\n\tBASE: \"BASE\",\n\tCUSTOM: \"CUSTOM\",\n};\n\nexport const ENTITY_TYPE = {\n\tMETA: \"META\",\n};\n\nexport const DEFAULT_VALUE = {\n\tshowTitle: true,\n\treadonly: false,\n\trequired: false,\n\thidden: false,\n\tsidebar: false,\n\tcanCollapse: false,\n\tstacked: false,\n\tcanMove: false,\n\tcanSearch: false,\n\tmultiline: false,\n};\n\nexport const DataTypes = [\n\t\"string\",\n\t\"integer\",\n\t\"decimal\",\n\t\"boolean\",\n\t\"datetime\",\n\t\"date\",\n\t\"time\",\n\t\"many-to-one\",\n\t\"one-to-many\",\n\t\"many-to-many\",\n];\n\nexport const conditionProperties = {\n\treadonlyIf: \"readonly\",\n\trequiredIf: \"required\",\n\thideIf: \"hidden\",\n\tcollapseIf: \"canCollapse\",\n};\n\nexport const otherNoQuoteProps = [\n\t\"value:add\",\n\t\"value:del\",\n\t\"refresh\",\n\t\"active\",\n];\n","import { conditionProperties } from \"../constants\";\nimport AxelorService from \"./../services/axelor.rest\";\nimport Utils, { generateCustomModelSchema, getMenuBuilder } from \"./../utils\";\n\nexport const metaJsonFieldService = new AxelorService({\n\tmodel: \"com.axelor.meta.db.MetaJsonField\",\n});\nexport const metaModelService = new AxelorService({\n\tmodel: \"com.axelor.meta.db.MetaJsonModel\",\n});\nconst appBpmService = new AxelorService({\n\tmodel: \"com.axelor.apps.base.db.AppBpm\",\n});\nconst appUserService = new AxelorService({ model: \"com.axelor.auth.db.User\" });\n\nconst metaViewService = new AxelorService({\n\tmodel: \"com.axelor.meta.db.MetaView\",\n});\nexport const modelService = new AxelorService({\n\tmodel: \"com.axelor.meta.db.MetaModel\",\n});\n\nexport const metaAttrsService = new AxelorService({\n\tmodel: \"com.axelor.meta.db.MetaAttrs\",\n});\n\nexport const metaSelectService = new AxelorService({\n\tmodel: \"com.axelor.meta.db.MetaSelect\",\n});\n\nexport const selectionBuilderService = new AxelorService({\n\tmodel: \"com.axelor.studio.db.SelectionBuilder\",\n});\n\nexport const metaTranslationService = new AxelorService({\n\tmodel: \"com.axelor.meta.db.MetaTranslation\",\n});\n\nexport function fetchCustomFields(modelField, model) {\n\tconst _domain = `self.jsonModel = null and self.modelField='${modelField.name}' and self.model='${model.fullName}'`;\n\treturn metaJsonFieldService.search({\n\t\tdata: { _domain },\n\t\tsortBy: [\"sequence\"],\n\t});\n}\n\n/**\n * selection fields are needs to be save seperately to save selections\n */\nexport async function saveCustomModel(model) {\n\tif (!model) return;\n\tconst res = await metaModelService.save(model);\n\tconst { data, status } = res || {};\n\tif (status === -1) {\n\t\treturn res;\n\t}\n\tconst { fields } = (data && data[0]) || {};\n\tconst getFields = (all) => {\n\t\tconst fields = all\n\t\t\t.map((res) => {\n\t\t\t\tconst { data = [] } = res;\n\t\t\t\tif (data[0]) {\n\t\t\t\t\treturn { id: data[0].id, $version: data[0].version };\n\t\t\t\t}\n\t\t\t\treturn undefined;\n\t\t\t})\n\t\t\t.filter((e) => e);\n\t\treturn fields;\n\t};\n\tconst response = await Promise.all(\n\t\tmodel.fields.map((field) => {\n\t\t\tconst updatedField = fields && fields.find((f) => f.name === field.name);\n\t\t\treturn metaJsonFieldService.save({\n\t\t\t\t...field,\n\t\t\t\tid: updatedField?.id,\n\t\t\t\tversion: updatedField?.version,\n\t\t\t});\n\t\t})\n\t);\n\tconst updatedFields = getFields(response);\n\treturn {\n\t\tdata: [\n\t\t\t{\n\t\t\t\t...((data && data[0]) || {}),\n\t\t\t\tfields: updatedFields,\n\t\t\t},\n\t\t],\n\t};\n}\n\nexport function fetchJSONFields(ids, update, record = {}) {\n\tconst criteria = [];\n\tif (ids.length) {\n\t\tcriteria.push({ fieldName: \"id\", operator: \"in\", value: ids });\n\n\t\tconst data = {\n\t\t\tcriteria,\n\t\t};\n\t\tmetaJsonFieldService.search({ data, sortBy: [\"sequence\"] }).then((res) => {\n\t\t\tif (res.data) {\n\t\t\t\tconst list = res.data || [];\n\t\t\t\tconst schema = generateCustomModelSchema(list, record);\n\t\t\t\tupdate((draft) => {\n\t\t\t\t\tdraft.items = list.filter((l) => l.type === \"panel\").map((e) => e.id);\n\t\t\t\t\tdraft.widgets = {\n\t\t\t\t\t\t...schema.widgets,\n\t\t\t\t\t};\n\t\t\t\t\tdraft.items = schema.items;\n\t\t\t\t});\n\t\t\t}\n\t\t});\n\t} else {\n\t\tupdate((draft) => {\n\t\t\tdraft.widgets = {\n\t\t\t\t\"-1\": {\n\t\t\t\t\ttype: \"form\",\n\t\t\t\t\t...record,\n\t\t\t\t\t...getMenuBuilder(record ? record.menuBuilder : undefined),\n\t\t\t\t},\n\t\t\t\t0: { type: \"dump_field\", name: \"\" },\n\t\t\t};\n\t\t\tdraft.items = [];\n\t\t\tdraft.loader = false;\n\t\t});\n\t}\n}\n\nexport function removeCustomModel(model) {\n\treturn metaModelService.removeAll([model]);\n}\n\nexport async function getEnableAppBuilder() {\n\tconst payload = {\n\t\tdata: {\n\t\t\t_domain: \"self.app.code = :code\",\n\t\t\t_domainContext: { code: \"bpm\" },\n\t\t},\n\t\tfields: [\"enableAppBuilder\"],\n\t\tlimit: 1,\n\t\toffset: 0,\n\t};\n\tconst bpmResult = await appBpmService.search({ ...payload });\n\tif (Array.isArray(bpmResult && bpmResult.data) && bpmResult.data[0]) {\n\t\treturn bpmResult.data[0].enableAppBuilder;\n\t}\n\treturn false;\n}\n\nexport async function generateMenuChange(customModel) {\n\tconst _context = {\n\t\t_model: \"com.axelor.meta.db.MetaJsonModel\",\n\t\t_id: null,\n\t\t...customModel,\n\t};\n\tconst changeAction =\n\t\t\"action-studio-json-model-method-isgeneratemenu-onchange\";\n\tconst data = {\n\t\taction: changeAction,\n\t\tmodel: \"com.axelor.meta.db.MetaJsonModel\",\n\t\tdata: {\n\t\t\tcontext: _context,\n\t\t},\n\t};\n\treturn await metaModelService.action(data);\n}\n\nexport async function fetchCustomModel(modelId) {\n\tconst result = await metaModelService.fetch(modelId);\n\tconst { data = [] } = result;\n\treturn data[0];\n}\n\nexport async function fetchViews(view) {\n\tconst viewCriteria = {\n\t\toperator: \"and\",\n\t\tcriteria: [{ fieldName: \"name\", operator: \"=\", value: `${view.name}` }],\n\t};\n\tconst viewList = await metaViewService.search({ data: viewCriteria });\n\tlet views;\n\tif (viewList.data) {\n\t\tviews = Utils.getViews(viewList.data, view.name);\n\t}\n\treturn views;\n}\n\nexport async function fetchModelFields(model) {\n\tif (!model || (model && (!model.packageName || !model.name))) return [];\n\tlet fields = [];\n\tconst _data = {\n\t\t_domain: `self.packageName = '${model.packageName}' and self.name = '${model.name}'`,\n\t};\n\tconst result = await modelService.search({ data: _data });\n\tif (result.data && result.data[0]) {\n\t\tconst record = result.data[0];\n\t\tconst data = {\n\t\t\tfields: [\"metaFields\"],\n\t\t\trelated: {\n\t\t\t\tmetaFields: [\n\t\t\t\t\t\"typeName\",\n\t\t\t\t\t\"label\",\n\t\t\t\t\t\"mappedBy\",\n\t\t\t\t\t\"relationship\",\n\t\t\t\t\t\"name\",\n\t\t\t\t\t\"packageName\",\n\t\t\t\t\t\"typeName\",\n\t\t\t\t],\n\t\t\t},\n\t\t};\n\t\tconst modelData = await modelService.fetch(record.id, data);\n\n\t\tif (modelData && modelData.data[0]) {\n\t\t\tfields = modelData.data[0].metaFields;\n\t\t\treturn fields;\n\t\t}\n\t}\n\treturn fields;\n}\n\nexport async function fetchAttrsList({ model, view }) {\n\tconst criteria = [\n\t\t{ fieldName: \"model\", operator: \"=\", value: model },\n\t\t{ fieldName: \"view\", operator: \"=\", value: view },\n\t];\n\tconst result = await metaAttrsService.search({\n\t\tdata: { criteria },\n\t\tlimit: null,\n\t});\n\tif (result.data && Array.isArray(result.data)) {\n\t\tconst conditionPropertiesKeys = Object.keys(conditionProperties);\n\t\tconst conditionPropertiesValues = Object.values(conditionProperties);\n\n\t\tconst data = [...result.data].map((item) => {\n\t\t\tif (conditionPropertiesValues.includes(item.name)) {\n\t\t\t\tif (item.value.startsWith('\"') && item.value.endsWith('\"')) {\n\t\t\t\t\titem.value = item.value.replace(`\"`, \"\");\n\t\t\t\t\titem.value = item.value.replace(`\"`, \"\");\n\t\t\t\t} else {\n\t\t\t\t\tif (![\"true\", \"false\"].includes(item.value)) {\n\t\t\t\t\t\titem.name =\n\t\t\t\t\t\t\tconditionPropertiesKeys[\n\t\t\t\t\t\t\t\tconditionPropertiesValues.indexOf(item.name)\n\t\t\t\t\t\t\t];\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\titem.value = item.value.replace(`\"`, \"\");\n\t\t\t\titem.value = item.value.replace(`\"`, \"\");\n\t\t\t}\n\t\t\treturn item;\n\t\t});\n\t\treturn data;\n\t}\n\treturn [];\n}\n\nexport async function saveAttrsList(list) {\n\tconst result = await metaAttrsService.saveAll([...list]);\n\tif (result.data && Array.isArray(result.data)) {\n\t\treturn result.data;\n\t}\n\treturn [];\n}\n\nexport async function deleteAttrsList(list) {\n\tconst result = await metaAttrsService.removeAll(list);\n\tif (result.data && Array.isArray(result.data)) {\n\t\treturn result.data;\n\t}\n\treturn [];\n}\n\nexport async function fetchLanguages() {\n\tconst criteria = [\n\t\t{ fieldName: \"name\", operator: \"=\", value: \"select.language\" },\n\t];\n\tconst result = await metaSelectService.search({\n\t\tdata: { criteria },\n\t\tfields: [\"items.value\", \"items.title\"],\n\t});\n\tif (result && result.data && Array.isArray(result.data)) {\n\t\treturn result.data.map((d) => {\n\t\t\treturn { title: d[\"items.title\"], value: d[\"items.value\"] };\n\t\t});\n\t}\n\treturn [];\n}\n\nexport async function getTranslationList(keyList) {\n\tconst criteria = [{ fieldName: \"key\", operator: \"in\", value: keyList }];\n\tconst result = await metaTranslationService.search({ data: { criteria } });\n\tif (result.data && Array.isArray(result.data)) {\n\t\treturn result.data;\n\t}\n\treturn [];\n}\n\nexport async function saveTranslationList(list) {\n\tconst result = await metaTranslationService.saveAll([...list]);\n\tif (result.data && Array.isArray(result.data)) {\n\t\treturn result.data;\n\t}\n\treturn [];\n}\n\nexport async function deleteTranslationList(list) {\n\tconst result = await metaTranslationService.removeAll(list);\n\tif (result.data && Array.isArray(result.data)) {\n\t\treturn result.data;\n\t}\n\treturn [];\n}\n\nexport async function fetchUserPreferences() {\n\tconst userInfo = await appUserService.info();\n\tif (userInfo && userInfo[\"user.id\"]) {\n\t\tconst userResponse = await appUserService.fetch(userInfo[\"user.id\"]);\n\t\tif (userResponse && userResponse.data && userResponse.data[0]) {\n\t\t\treturn userResponse.data[0];\n\t\t}\n\t}\n\treturn null;\n}\n\nexport async function getSelectionText(metaSelect) {\n\tlet selectionText = \"\";\n\tif (metaSelect) {\n\t\tconst context = {\n\t\t\tmetaSelect: {\n\t\t\t\t...metaSelect,\n\t\t\t},\n\t\t};\n\t\tconst payloadData = {\n\t\t\tdata: { context },\n\t\t\taction: \"action-selection-builder-method-fill-selection-text\",\n\t\t\tmodel: \"com.axelor.studio.db.SelectionBuilder\",\n\t\t};\n\t\tconst actionResponse = await selectionBuilderService.action(payloadData);\n\t\tconst { data = [] } = actionResponse;\n\t\tif (data[0]) {\n\t\t\tconst _properties = data[0].values || {};\n\t\t\tif (_properties.selectionText) {\n\t\t\t\tselectionText = _properties.selectionText;\n\t\t\t}\n\t\t}\n\t}\n\treturn selectionText;\n}\n","export function getScrollParent(element, includeHidden = false) {\n\tvar style = getComputedStyle(element);\n\tvar excludeStaticParent = style.position === \"absolute\";\n\tvar overflowRegex = includeHidden ? /(auto|scroll|hidden)/ : /(auto|scroll)/;\n\n\tif (style.position === \"fixed\") return document.body;\n\tfor (var parent = element; (parent = parent.parentElement); ) {\n\t\tstyle = getComputedStyle(parent);\n\t\tif (excludeStaticParent && style.position === \"static\") {\n\t\t\tcontinue;\n\t\t}\n\t\tif (overflowRegex.test(style.overflow + style.overflowY + style.overflowX))\n\t\t\treturn parent;\n\t}\n\n\treturn document.body;\n}\n\nexport function customScrollTo(element) {\n\tconst scrollableParent = getScrollParent(element);\n\tif (scrollableParent) {\n\t\twindow.requestAnimationFrame(() => {\n\t\t\tscrollableParent.scrollTo({\n\t\t\t\ttop: element.offsetTop + 14, //14 is top padding of div\n\t\t\t\tbehavior: \"smooth\",\n\t\t\t});\n\t\t});\n\t}\n}\n","import React, { useRef, useEffect } from \"react\";\nimport CircularProgress from \"@material-ui/core/CircularProgress\";\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport classNames from \"classnames\";\n\nimport { Widget, Form } from \"../components\";\nimport { IDS, MODEL_TYPE } from \"../constants\";\nimport { useStore } from \"../store/context\";\nimport { customScrollTo } from \"./utils\";\n\nconst useStyles = makeStyles({\n\tuiContainer: {\n\t\tdisplay: \"flex\",\n\t\tflexDirection: \"column\",\n\t\talignSelf: \"baseline\",\n\t},\n\tcontainer: {\n\t\tdisplay: \"flex\",\n\t\tflexDirection: \"column\",\n\t\theight: \"fit-content\",\n\t\tposition: \"relative\",\n\t},\n\tloaderContainer: {\n\t\tdisplay: \"flex\",\n\t\tflexDirection: \"column\",\n\t\tjustifyContent: \"center\",\n\t\theight: \"100%\",\n\t\tposition: \"absolute\",\n\t\tzIndex: 1000,\n\t\tborder: \"0px\",\n\t\tbackgroundColor: \"rgba(0,0,0,0.05)\",\n\t\tbottom: 0,\n\t\ttop: 0,\n\t\tleft: 0,\n\t\tright: 0,\n\t\talignItems: \"center\",\n\t},\n\temptyFormInfo: {\n\t\tminHeight: \"24vh !important\",\n\t},\n});\n// Render Main Form UI View\nfunction FormViewUI({ design }) {\n\tconst store = useStore();\n\tconst classes = useStyles();\n\tconst customPanelRef = useRef(null);\n\tconst {\n\t\twidgets,\n\t\tcustomFieldWidgets,\n\t\tloader,\n\t\terrorList,\n\t\tmodelField,\n\t\tmodelType,\n\t} = store.state;\n\tconst formInfo = (store.state.widgets || [])[-1];\n\n\tconst customFieldWidgetsExists = !!customFieldWidgets;\n\tuseEffect(() => {\n\t\tconst grid = customPanelRef.current;\n\t\tif (grid && customFieldWidgetsExists) {\n\t\t\tcustomScrollTo(grid);\n\t\t\tgrid && grid.focus();\n\t\t}\n\t}, [customFieldWidgetsExists]);\n\n\treturn (\n\t\t<div className={classNames(classes.uiContainer)}>\n\t\t\t<div\n\t\t\t\tid=\"form-view\"\n\t\t\t\tclassName={classNames(classes.container, {\n\t\t\t\t\t[classes.emptyFormInfo]: !formInfo && !customFieldWidgets,\n\t\t\t\t})}\n\t\t\t>\n\t\t\t\t{loader && (\n\t\t\t\t\t<div className={classNames(classes.loaderContainer)}>\n\t\t\t\t\t\t<CircularProgress />\n\t\t\t\t\t</div>\n\t\t\t\t)}\n\t\t\t\t{widgets && (\n\t\t\t\t\t<Widget\n\t\t\t\t\t\tindex={0}\n\t\t\t\t\t\tid={IDS.form}\n\t\t\t\t\t\tattrs={store.state.widgets[IDS.form]}\n\t\t\t\t\t\tonSelect={store.onSelect}\n\t\t\t\t\t\t{...{\n\t\t\t\t\t\t\titems: store.state.items,\n\t\t\t\t\t\t\tdragWidget: store.state.dragWidget,\n\t\t\t\t\t\t\thoverWidget: store.state.hoverWidget,\n\t\t\t\t\t\t\teditWidget: store.state.editWidget,\n\t\t\t\t\t\t\twidgets: store.state.widgets,\n\t\t\t\t\t\t\tonSelect: store.onSelect,\n\t\t\t\t\t\t\tonMove: store.onMove,\n\t\t\t\t\t\t\tonDrag: store.onDrag,\n\t\t\t\t\t\t\tonHover: store.onHover,\n\t\t\t\t\t\t\tonWidgetChange: store.onWidgetChange,\n\t\t\t\t\t\t\tsetHoverAttr: store.setHoverAttr,\n\t\t\t\t\t\t\taddTabPanel: store.addTabPanel,\n\t\t\t\t\t\t\tcanRemove: modelType === MODEL_TYPE.BASE ? false : true,\n\t\t\t\t\t\t\terrorList,\n\t\t\t\t\t\t}}\n\t\t\t\t\t\tdesign={design}\n\t\t\t\t\t\tcomponent={Form}\n\t\t\t\t\t/>\n\t\t\t\t)}\n\t\t\t\t{customFieldWidgets && (\n\t\t\t\t\t<div\n\t\t\t\t\t\tclassName=\"custom-field-pallett-view\"\n\t\t\t\t\t\tref={customPanelRef}\n\t\t\t\t\t\ttabIndex={1}\n\t\t\t\t\t>\n\t\t\t\t\t\t<div className=\"custom-field-view-header\">\n\t\t\t\t\t\t\t{modelField?.name || \"attrs\"}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<Widget\n\t\t\t\t\t\t\t_type=\"customField\"\n\t\t\t\t\t\t\tindex={0}\n\t\t\t\t\t\t\tid={IDS.customForm}\n\t\t\t\t\t\t\tattrs={store.state.customFieldWidgets[IDS.customForm]}\n\t\t\t\t\t\t\tonSelect={store.onSelect}\n\t\t\t\t\t\t\t{...{\n\t\t\t\t\t\t\t\titems: store.state.customFieldItems,\n\t\t\t\t\t\t\t\tdragWidget: store.state.dragWidget,\n\t\t\t\t\t\t\t\thoverWidget: store.state.hoverWidget,\n\t\t\t\t\t\t\t\teditWidget: store.state.editWidget,\n\t\t\t\t\t\t\t\twidgets: store.state.customFieldWidgets,\n\t\t\t\t\t\t\t\tonSelect: store.onSelect,\n\t\t\t\t\t\t\t\tonMove: store.onMove,\n\t\t\t\t\t\t\t\tonDrag: store.onDrag,\n\t\t\t\t\t\t\t\taddTabPanel: store.addTabPanel,\n\t\t\t\t\t\t\t\tonHover: store.onHover,\n\t\t\t\t\t\t\t\tonWidgetChange: store.onWidgetChange,\n\t\t\t\t\t\t\t\tsetHoverAttr: store.setHoverAttr,\n\t\t\t\t\t\t\t\terrorList,\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\tdesign={design}\n\t\t\t\t\t\t\tcomponent={Form}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</div>\n\t\t\t\t)}\n\t\t\t</div>\n\t\t</div>\n\t);\n}\n\nexport default FormViewUI;\n","import React from \"react\";\nimport classNames from \"classnames\";\nimport Editor from \"./../Editor\";\n\nexport default React.memo(function MainPanel({ toolbarOffset }) {\n\tconst [design] = React.useState(true);\n\n\treturn (\n\t\t<div\n\t\t\tclassName={classNames(\"form-layout-container\", {\n\t\t\t\t\"form-layout-design\": design,\n\t\t\t})}\n\t\t\tstyle={{\n\t\t\t\tdisplay: \"flex\",\n\t\t\t\twidth: \"100%\",\n\t\t\t\theight: `calc(100vh - ${toolbarOffset}px)`,\n\t\t\t\tjustifyContent: \"center\",\n\t\t\t\toverflow: \"auto\",\n\t\t\t\tposition: \"relative\",\n\t\t\t\tpaddingRight: \"1em\",\n\t\t\t}}\n\t\t>\n\t\t\t<Editor design={design} />\n\t\t</div>\n\t);\n});\n","import React from \"react\";\n\nexport function useDebounceEffect(handler, interval) {\n\tconst isMounted = React.useRef(false);\n\tReact.useEffect(() => {\n\t\tif (isMounted.current) {\n\t\t\tconst timer = setTimeout(() => handler(), interval);\n\t\t\treturn () => clearTimeout(timer);\n\t\t}\n\t\tisMounted.current = true;\n\t}, [handler, interval]);\n}\n","import React from \"react\";\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport Button from \"@material-ui/core/Button\";\nimport Grid from \"@material-ui/core/Grid\";\nimport Input from \"@material-ui/core/Input\";\nimport ChevronLeft from \"@material-ui/icons/ChevronLeft\";\nimport ChevronRight from \"@material-ui/icons/ChevronRight\";\nimport Typography from \"@material-ui/core/Typography\";\nimport Dialog from \"@material-ui/core/Dialog\";\nimport DialogActions from \"@material-ui/core/DialogActions\";\nimport DialogContent from \"@material-ui/core/DialogContent\";\nimport DialogTitle from \"@material-ui/core/DialogTitle\";\nimport useMediaQuery from \"@material-ui/core/useMediaQuery\";\nimport List from \"@material-ui/core/List\";\nimport ListItem from \"@material-ui/core/ListItem\";\nimport ListItemText from \"@material-ui/core/ListItemText\";\nimport { useTheme } from \"@material-ui/core/styles\";\nimport IconButton from \"@material-ui/core/IconButton\";\n\nconst useStyles = makeStyles((theme) => ({\n\troot: {\n\t\twidth: \"100%\",\n\t\tbackgroundColor: theme.palette.background.paper,\n\t\tmaxHeight: 300,\n\t\toverflow: \"auto\",\n\t},\n\tinput: {\n\t\twidth: \"80%\",\n\t\tmarginRight: 10,\n\t},\n\ttitleHeader: {\n\t\tborderBottom: \"0.5px solid #ddd\",\n\t},\n\tlistItem: {\n\t\tborderBottom: \"1px solid #ddd\",\n\t\tpaddingTop: 10,\n\t\tpaddingBottom: 10,\n\t},\n\tcloseText: {\n\t\ttextTransform: \"capitalize\",\n\t},\n}));\n\nexport default function ResponsiveDialog(props) {\n\tconst {\n\t\tlist = [],\n\t\tonChange,\n\t\thandleClose,\n\t\toffset,\n\t\ttotal,\n\t\tdisplayField,\n\t\tgetOptionLabel,\n\t} = props;\n\tconst theme = useTheme();\n\tconst classes = useStyles();\n\tconst fullScreen = useMediaQuery(theme.breakpoints.down(\"sm\"));\n\n\tconst handleItemClick = React.useCallback(\n\t\t(item) => {\n\t\t\tonChange(item);\n\t\t\thandleClose();\n\t\t},\n\t\t[onChange, handleClose]\n\t);\n\n\tconst canNext = offset + list.length < total;\n\tconst canPrev = offset > 0;\n\n\tconst getLabel = (item) => {\n\t\treturn getOptionLabel ? getOptionLabel(item) : item[displayField || \"name\"];\n\t};\n\n\treturn (\n\t\t<div>\n\t\t\t<Dialog\n\t\t\t\tfullScreen={fullScreen}\n\t\t\t\tmaxWidth=\"sm\"\n\t\t\t\tfullWidth={true}\n\t\t\t\topen={props.open}\n\t\t\t\tonClose={props.handleClose}\n\t\t\t\taria-labelledby=\"responsive-dialog-title\"\n\t\t\t>\n\t\t\t\t<DialogTitle\n\t\t\t\t\tid=\"responsive-dialog-title\"\n\t\t\t\t\tclassName={classes.titleHeader}\n\t\t\t\t>{`Search ${props.title || \"item\"}`}</DialogTitle>\n\t\t\t\t<DialogContent>\n\t\t\t\t\t<Grid container>\n\t\t\t\t\t\t<Input\n\t\t\t\t\t\t\tclassName={classes.input}\n\t\t\t\t\t\t\tvalue={props.searchText}\n\t\t\t\t\t\t\tonChange={(e) => props.setSearchText(e.target.value)}\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t<IconButton onClick={props.onPrevious} disabled={!canPrev}>\n\t\t\t\t\t\t\t<ChevronLeft />\n\t\t\t\t\t\t</IconButton>\n\t\t\t\t\t\t<IconButton onClick={props.onNext} disabled={!canNext}>\n\t\t\t\t\t\t\t<ChevronRight />\n\t\t\t\t\t\t</IconButton>\n\t\t\t\t\t</Grid>\n\t\t\t\t\t<List className={classes.root}>\n\t\t\t\t\t\t{list.map((item, i) => (\n\t\t\t\t\t\t\t<ListItem\n\t\t\t\t\t\t\t\tclassName={classes.listItem}\n\t\t\t\t\t\t\t\tkey={i}\n\t\t\t\t\t\t\t\trole={undefined}\n\t\t\t\t\t\t\t\tdense\n\t\t\t\t\t\t\t\tbutton\n\t\t\t\t\t\t\t\tonClick={() => handleItemClick(item)}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<ListItemText id={i} primary={getLabel(item)} />\n\t\t\t\t\t\t\t</ListItem>\n\t\t\t\t\t\t))}\n\t\t\t\t\t</List>\n\t\t\t\t</DialogContent>\n\t\t\t\t<DialogActions>\n\t\t\t\t\t<Button autoFocus onClick={props.handleClose} color=\"primary\">\n\t\t\t\t\t\t<Typography className={classes.closeText}>Close</Typography>\n\t\t\t\t\t</Button>\n\t\t\t\t</DialogActions>\n\t\t\t</Dialog>\n\t\t</div>\n\t);\n}\n","import React, { useState, useEffect } from \"react\";\nimport { TextField } from \"@material-ui/core\";\nimport AutoComplete from \"@material-ui/lab/Autocomplete\";\nimport _ from \"lodash\";\nimport { makeStyles } from \"@material-ui/core/styles\";\n\nimport AxelorService from \"./../services/axelor.rest\";\nimport { useDebounceEffect } from \"./../common.func\";\nimport SearchView from \"../components/SearchView\";\nimport { translate } from \"../utils\";\nconst useStyles = makeStyles({\n\tautoComplete: {\n\t\t\"& > div > label\": {\n\t\t\tcolor: \"#e7eaec !important\",\n\t\t\tfontSize: 12,\n\t\t},\n\t},\n\tautoCompleteRoot: {\n\t\twidth: 200,\n\t\tmarginLeft: 10,\n\t\tcolor: \"#e7eaec\",\n\t},\n\tinputView: {\n\t\tcolor: \"#fff\",\n\t\tfontSize: 13,\n\t\t\"& > *\": {\n\t\t\tcolor: \"#fff\",\n\t\t},\n\t},\n\tpopperView: {\n\t\t\"& ul, .MuiAutocomplete-noOptions\": {\n\t\t\tbackgroundColor: \"rgb(41, 56, 70) !important\",\n\t\t\t\".modern-dark &\": {\n\t\t\t\tbackgroundColor: \"#1b1b1b !important\",\n\t\t\t},\n\t\t},\n\t\t\"& li, .MuiAutocomplete-noOptions\": {\n\t\t\tcolor: \"#e7eaec !important\",\n\t\t\tbackgroundColor: \"rgb(41, 56, 70) !important\",\n\t\t\t\".modern-dark &\": {\n\t\t\t\tbackgroundColor: \"#1b1b1b !important\",\n\t\t\t},\n\t\t},\n\t\t\"& li:hover, .MuiAutocomplete-noOptions\": {\n\t\t\tcolor: \"#e7eaec !important\",\n\t\t\tbackgroundColor: \"#2f4050 !important\",\n\t\t\t\".modern-dark &\": {\n\t\t\t\tbackgroundColor: \"#323232 !important\",\n\t\t\t},\n\t\t},\n\t},\n\toption: {\n\t\tfontSize: 13,\n\t},\n});\n\nfunction Select({\n\tvalue,\n\tlabel,\n\tmodel,\n\tsearchFilter,\n\tonChange,\n\toptions,\n\tfilterData,\n\tlimit = 10,\n\tonSearch,\n\tmodelType,\n\t...props\n}) {\n\tconst classes = useStyles();\n\tconst [searchText, setSearchText] = useState(\"\");\n\tconst [loading, setLoading] = useState(false);\n\tconst [list, setList] = useState([...(options ? options : [])]);\n\tconst [searchMore, setSearchMore] = useState(false);\n\tconst [offset, setOffset] = useState(0);\n\tconst [total, setTotal] = useState(0);\n\n\tconst search = React.useCallback(\n\t\tasync (searchText = \"\") => {\n\t\t\tif (onSearch) {\n\t\t\t\tsetLoading(true);\n\t\t\t\tconst { models, total } = await onSearch({\n\t\t\t\t\tlimit,\n\t\t\t\t\tsearchText,\n\t\t\t\t\tsearchFilter,\n\t\t\t\t\tfilterData,\n\t\t\t\t\tmodelType,\n\t\t\t\t\toffset,\n\t\t\t\t});\n\t\t\t\t!searchMore &&\n\t\t\t\t\ttotal > limit &&\n\t\t\t\t\tmodels.push({\n\t\t\t\t\t\tname: translate(\"Show more...\"),\n\t\t\t\t\t\tid: \"studio_show_More_View\",\n\t\t\t\t\t});\n\t\t\t\tconst uniqueList = _.uniqBy(models, \"name\");\n\t\t\t\tsetList(uniqueList);\n\t\t\t\tsetLoading(false);\n\t\t\t\tsetTotal(total);\n\t\t\t} else {\n\t\t\t\tconst service = new AxelorService({ model });\n\t\t\t\tsetLoading(true);\n\t\t\t\tconst _data = searchFilter(searchText) || {};\n\t\t\t\tconst criteria = [];\n\t\t\t\tif (searchText) {\n\t\t\t\t\tcriteria.push({\n\t\t\t\t\t\tfieldName: \"name\",\n\t\t\t\t\t\toperator: \"like\",\n\t\t\t\t\t\tvalue: searchText,\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\tconst data = {\n\t\t\t\t\t...(_data._domain && { _domain: _data._domain }),\n\t\t\t\t\t...(_data._domainContext && { _domainContext: _data._domainContext }),\n\t\t\t\t\tcriteria: [...criteria, ...(_data.criteria || [])],\n\t\t\t\t\toperator: \"and\",\n\t\t\t\t};\n\t\t\t\tconst fields = _data.fields || [];\n\t\t\t\tservice\n\t\t\t\t\t.search({ fields, data, limit, offset: offset })\n\t\t\t\t\t.then((response = {}) => {\n\t\t\t\t\t\tconst { data = [], total } = response;\n\t\t\t\t\t\tsetLoading(false);\n\t\t\t\t\t\tconst list = filterData ? filterData([...data]) : [...data];\n\t\t\t\t\t\t!searchMore &&\n\t\t\t\t\t\t\ttotal > limit &&\n\t\t\t\t\t\t\tlist.push({\n\t\t\t\t\t\t\t\tname: translate(\"Show more...\"),\n\t\t\t\t\t\t\t\tid: \"studio_show_More_View\",\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\tsetTotal(total);\n\t\t\t\t\t\tconst uniqueList = _.uniqBy(list, \"name\");\n\t\t\t\t\t\tsetList(uniqueList);\n\t\t\t\t\t});\n\t\t\t}\n\t\t},\n\t\t[\n\t\t\tsearchFilter,\n\t\t\tmodel,\n\t\t\tfilterData,\n\t\t\tsearchMore,\n\t\t\tlimit,\n\t\t\tonSearch,\n\t\t\tmodelType,\n\t\t\toffset,\n\t\t]\n\t);\n\n\tconst handleNext = React.useCallback(() => {\n\t\tconst newOffset = offset + limit;\n\t\tif (newOffset <= total) {\n\t\t\tsetOffset(newOffset);\n\t\t}\n\t}, [limit, total, offset]);\n\n\tconst handlePrevious = React.useCallback(() => {\n\t\tsetOffset((offset) => {\n\t\t\tconst newOffset = offset - limit;\n\t\t\treturn newOffset > 0 ? newOffset : 0;\n\t\t});\n\t}, [limit]);\n\n\tconst debounceHandler = React.useCallback(() => {\n\t\t!options && search(searchText);\n\t}, [searchText, search, options]);\n\n\tconst handleChange = React.useCallback(\n\t\t(e, value) => {\n\t\t\tif (value?.id === \"studio_show_More_View\") {\n\t\t\t\tsetSearchMore(true);\n\t\t\t} else {\n\t\t\t\tonChange(value);\n\t\t\t}\n\t\t},\n\t\t[onChange]\n\t);\n\n\tconst handleTextChange = React.useCallback((value) => {\n\t\tsetSearchText(value);\n\t\tsetOffset(0);\n\t}, []);\n\n\tconst handleClose = React.useCallback(() => {\n\t\tsetSearchMore(false);\n\t\tsetOffset(0);\n\t}, []);\n\n\tuseDebounceEffect(debounceHandler, 500);\n\n\tuseEffect(() => {\n\t\t!options && search();\n\t}, [search, options, model]);\n\n\tuseEffect(() => {\n\t\tif (!value) {\n\t\t\tsetSearchText(\"\");\n\t\t}\n\t}, [value]);\n\treturn (\n\t\t<React.Fragment>\n\t\t\t<AutoComplete\n\t\t\t\tclearOnEscape\n\t\t\t\tautoComplete\n\t\t\t\tclasses={{\n\t\t\t\t\troot: classes.autoCompleteRoot,\n\t\t\t\t\tinputFocused: classes.input,\n\t\t\t\t\tclearIndicator: classes.input,\n\t\t\t\t\tpopupIndicator: classes.input,\n\t\t\t\t\tinput: classes.inputView,\n\t\t\t\t\tendAdornment: classes.inputView,\n\t\t\t\t\tpopper: classes.popperView,\n\t\t\t\t\toption: classes.option,\n\t\t\t\t\tnoOptions: classes.option,\n\t\t\t\t}}\n\t\t\t\tsize=\"small\"\n\t\t\t\tclassName={classes.autoComplete}\n\t\t\t\tonInputChange={(e, value) => setSearchText(value)}\n\t\t\t\trenderInput={(params) => {\n\t\t\t\t\tparams.inputProps.value = searchText;\n\t\t\t\t\treturn (\n\t\t\t\t\t\t<TextField {...params} placeholder={translate(label)} fullWidth />\n\t\t\t\t\t);\n\t\t\t\t}}\n\t\t\t\toptions={[...list]}\n\t\t\t\tloading={loading}\n\t\t\t\tgetOptionLabel={(option) =>\n\t\t\t\t\ttypeof option === \"string\"\n\t\t\t\t\t\t? option\n\t\t\t\t\t\t: props.getOptionLabel\n\t\t\t\t\t\t? props.getOptionLabel(option)\n\t\t\t\t\t\t: option.name\n\t\t\t\t}\n\t\t\t\tonChange={handleChange}\n\t\t\t\tfilterOptions={(options) => options}\n\t\t\t\tvalue={value || null}\n\t\t\t\tgetOptionSelected={(option, value) => option.name === value.name}\n\t\t\t\t{...props}\n\t\t\t/>\n\t\t\t<SearchView\n\t\t\t\tsearchText={searchText}\n\t\t\t\tlist={list}\n\t\t\t\tmodel={model}\n\t\t\t\ttotal={total}\n\t\t\t\toffset={offset}\n\t\t\t\topen={searchMore}\n\t\t\t\tonNext={handleNext}\n\t\t\t\tonPrevious={handlePrevious}\n\t\t\t\thandleClose={handleClose}\n\t\t\t\tsetSearchText={handleTextChange}\n\t\t\t\tonChange={onChange}\n\t\t\t\ttitle={translate(label)}\n\t\t\t\tgetOptionLabel={props.getOptionLabel}\n\t\t\t/>\n\t\t</React.Fragment>\n\t);\n}\n\nexport default React.memo(Select);\n","import { modelService, metaModelService } from \"./api\";\nimport { ENTITY_TYPE, MODEL_TYPE } from \"../constants\";\n\nexport async function modelSearch({\n\tsearchFilter,\n\tlimit,\n\tsearchText,\n\tmodelType,\n\toffset,\n}) {\n\tconst _data = searchFilter(searchText) || {};\n\tconst criteria = [];\n\tif (searchText) {\n\t\tcriteria.push({\n\t\t\tfieldName: \"name\",\n\t\t\toperator: \"like\",\n\t\t\tvalue: searchText,\n\t\t});\n\t}\n\tconst data = {\n\t\t...(_data._domain && { _domain: _data._domain }),\n\t\t...(_data._domainContext && { _domainContext: _data._domainContext }),\n\t\tcriteria: [...criteria, ...(_data.criteria || [])],\n\t\toperator: \"and\",\n\t};\n\tconst fields = _data.fields || [];\n\tconst service =\n\t\tmodelType === MODEL_TYPE.CUSTOM ? metaModelService : modelService;\n\tconst modelResult = await service.search({ fields, data, limit, offset });\n\tconst models = [];\n\tif (modelResult && modelResult.data && Array.isArray(modelResult.data)) {\n\t\tconst list = modelResult.data\n\t\t\t.map((record) => {\n\t\t\t\tconst modelIndex = models.findIndex(\n\t\t\t\t\t(m) => m.name === record.name && m.packageName === record.packageName\n\t\t\t\t);\n\t\t\t\tif (modelIndex === -1 || modelType === MODEL_TYPE.BASE) {\n\t\t\t\t\tif (modelType === MODEL_TYPE.BASE && modelIndex !== -1) {\n\t\t\t\t\t\tmodels.splice(modelIndex, 1);\n\t\t\t\t\t}\n\t\t\t\t\treturn { ...record, entityType: ENTITY_TYPE.META };\n\t\t\t\t} else {\n\t\t\t\t\tmodels.splice(modelIndex, 1, {\n\t\t\t\t\t\t...models[modelIndex],\n\t\t\t\t\t\tactualType: ENTITY_TYPE.META,\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\treturn undefined;\n\t\t\t})\n\t\t\t.filter((e) => e);\n\t\tmodels.push(...list);\n\t}\n\treturn { models, total: modelResult && modelResult.total };\n}\n","import React from \"react\";\n\nimport AxelorService from \"./../services/axelor.rest\";\nimport Utils, { generateCustomModelSchema, translate } from \"./../utils\";\nimport Select from \"./Select\";\nimport { relationalFields, MODEL_TYPE, PANEL_PROPS } from \"./../constants\";\nimport {\n\tfetchCustomFields,\n\tgetEnableAppBuilder,\n\tfetchViews,\n\tfetchAttrsList,\n\tgetTranslationList,\n\tmetaJsonFieldService,\n} from \"./api\";\nimport { modelSearch } from \"./customModelSearch\";\nimport { generateXpath } from \"./../store/xpathGenerator\";\nimport convert from \"xml-js\";\nimport _ from \"lodash\";\n\nconst metaViewService = new AxelorService({\n\tmodel: \"com.axelor.meta.db.MetaView\",\n});\n\nconst modelTypes = [\n\t{ name: translate(\"View\"), value: MODEL_TYPE.BASE },\n\t{ name: translate(\"Custom\"), value: MODEL_TYPE.CUSTOM },\n];\n\nfunction ViewSelection({\n\tmodel,\n\tupdate,\n\tmodelType,\n\tmodelField,\n\tstartLoader,\n\tentityType,\n\tmetaFieldStore,\n\tclearHistory,\n\treset,\n\t...props\n}) {\n\tconst modelName = `com.axelor.meta.db.${\n\t\tmodelType !== MODEL_TYPE.CUSTOM ? \"MetaModel\" : \"MetaJsonModel\"\n\t}`;\n\n\tconst fetchJSONFields = React.useCallback(\n\t\t(ids, record) => {\n\t\t\tconst criteria = [];\n\t\t\tif (ids.length) {\n\t\t\t\tcriteria.push({ fieldName: \"id\", operator: \"in\", value: ids });\n\t\t\t\tconst data = {\n\t\t\t\t\tcriteria,\n\t\t\t\t};\n\t\t\t\tmetaJsonFieldService\n\t\t\t\t\t.search({ data, sortBy: [\"sequence\"] })\n\t\t\t\t\t.then((res) => {\n\t\t\t\t\t\tif (res.data) {\n\t\t\t\t\t\t\tconst list = res.data || [];\n\t\t\t\t\t\t\tconst schema = generateCustomModelSchema(list, record);\n\t\t\t\t\t\t\tupdate((draft) => {\n\t\t\t\t\t\t\t\tdraft.widgets = {\n\t\t\t\t\t\t\t\t\t...schema.widgets,\n\t\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\t\tdraft.items = schema.items;\n\t\t\t\t\t\t\t\tdraft.loader = false;\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tupdate((draft) => {\n\t\t\t\t\t\t\t\tdraft.loader = false;\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t} else {\n\t\t\t\tconst schema = generateCustomModelSchema([], record);\n\t\t\t\tupdate((draft) => {\n\t\t\t\t\tdraft.widgets = {\n\t\t\t\t\t\t...schema.widgets,\n\t\t\t\t\t};\n\t\t\t\t\tdraft.items = schema.items;\n\t\t\t\t\tdraft.loader = false;\n\t\t\t\t\tdraft.model = record;\n\t\t\t\t\tdraft.customModel = record;\n\t\t\t\t\tdraft.editWidget = -1;\n\t\t\t\t\tdraft.editWidgetType = null;\n\t\t\t\t});\n\t\t\t}\n\t\t},\n\t\t[update]\n\t);\n\n\tconst handleModelSelect = React.useCallback(\n\t\tasync (model) => {\n\t\t\tconst metaModelService = new AxelorService({ model: modelName });\n\t\t\tif (!model) {\n\t\t\t\tif (modelType === MODEL_TYPE.CUSTOM) {\n\t\t\t\t\treset();\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tupdate((draft) => {\n\t\t\t\t\tclearHistory(draft);\n\t\t\t\t\tdraft.model = null;\n\t\t\t\t\tdraft.customModel = null;\n\t\t\t\t\tdraft.items = [];\n\t\t\t\t\tdraft.exView = null;\n\t\t\t\t\tdraft.view = null;\n\t\t\t\t\tdraft.widgets = null;\n\t\t\t\t\tdraft.initialItems = null;\n\t\t\t\t\tdraft.initialWidgets = null;\n\t\t\t\t\tdraft.customFieldWidgets = null;\n\t\t\t\t\tdraft.customFieldItems = null;\n\t\t\t\t\tdraft.customFields = [];\n\t\t\t\t\tdraft.modelField = null;\n\t\t\t\t\tdraft.extensionXML = null;\n\t\t\t\t\tdraft.extensionView = null;\n\t\t\t\t\tdraft.originalXML = null;\n\t\t\t\t\tdraft.selectedView = null;\n\t\t\t\t\tdraft.metaFields = [];\n\t\t\t\t\tdraft.metaFieldStore = [];\n\t\t\t\t\tdraft.extensionMoves = [];\n\t\t\t\t\tdraft.errorList = {};\n\t\t\t\t\tdraft.attrsList = [];\n\t\t\t\t\tdraft.translationList = [];\n\t\t\t\t\tdraft.initialTranslationList = [];\n\t\t\t\t\tdraft.removedTranslationList = [];\n\t\t\t\t});\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tlet data = {\n\t\t\t\tfields: [\"metaFields\", \"packageName\", \"name\", \"fullName\"],\n\t\t\t\trelated: {\n\t\t\t\t\tmetaFields: [\n\t\t\t\t\t\t\"typeName\",\n\t\t\t\t\t\t\"label\",\n\t\t\t\t\t\t\"mappedBy\",\n\t\t\t\t\t\t\"relationship\",\n\t\t\t\t\t\t\"name\",\n\t\t\t\t\t\t\"packageName\",\n\t\t\t\t\t],\n\t\t\t\t},\n\t\t\t};\n\t\t\tif (modelType === MODEL_TYPE.CUSTOM) {\n\t\t\t\tupdate((draft) => {\n\t\t\t\t\tdraft.loader = true;\n\t\t\t\t});\n\t\t\t\tdata = {\n\t\t\t\t\trelated: {\n\t\t\t\t\t\tmenuBuilder: [\"title\", \"parentMenu\"],\n\t\t\t\t\t},\n\t\t\t\t};\n\t\t\t}\n\t\t\tmetaModelService.fetch(model.id, data).then((res) => {\n\t\t\t\tif (res.data) {\n\t\t\t\t\tconst record = res.data[0];\n\t\t\t\t\tconst { fields = [], ...rest } = record;\n\t\t\t\t\tupdate((draft) => {\n\t\t\t\t\t\tclearHistory(draft);\n\t\t\t\t\t\tdraft.model = model;\n\t\t\t\t\t\tdraft.entityType = model.entityType;\n\t\t\t\t\t\tdraft.widgets = null;\n\t\t\t\t\t\tdraft.initialWidgets = null;\n\t\t\t\t\t\tdraft.items = [];\n\t\t\t\t\t\tdraft.initialItems = null;\n\t\t\t\t\t\tdraft.view = null;\n\t\t\t\t\t\tdraft.exView = null;\n\t\t\t\t\t\tdraft.modelField = null;\n\t\t\t\t\t\tdraft.customFields = [];\n\t\t\t\t\t\tdraft.customFieldWidgets = null;\n\t\t\t\t\t\tdraft.originalXML = null;\n\t\t\t\t\t\tdraft.extensionXML = null;\n\t\t\t\t\t\tdraft.extensionView = null;\n\t\t\t\t\t\tdraft.extensionMoves = [];\n\t\t\t\t\t\tdraft.errorList = {};\n\t\t\t\t\t\tdraft.attrsList = [];\n\t\t\t\t\t\tdraft.translationList = [];\n\t\t\t\t\t\tdraft.initialTranslationList = [];\n\t\t\t\t\t\tdraft.removedTranslationList = [];\n\t\t\t\t\t\tdraft.selectedView = null;\n\t\t\t\t\t\tdraft.editWidget = -1;\n\t\t\t\t\t\tdraft.editWidgetType = null;\n\t\t\t\t\t\tdraft.tabIndex = 0;\n\t\t\t\t\t\tconst _fields = (record.metaFields || []).map((f) => {\n\t\t\t\t\t\t\treturn JSON.parse(\n\t\t\t\t\t\t\t\tJSON.stringify({\n\t\t\t\t\t\t\t\t\t...f,\n\t\t\t\t\t\t\t\t\ttype:\n\t\t\t\t\t\t\t\t\t\trelationalFields[f.relationship] ||\n\t\t\t\t\t\t\t\t\t\t(f.typeName || \"\").toLowerCase(),\n\t\t\t\t\t\t\t\t\t...(f.relationship && {\n\t\t\t\t\t\t\t\t\t\ttargetModel: `${f.packageName}.${f.typeName}`,\n\t\t\t\t\t\t\t\t\t}),\n\t\t\t\t\t\t\t\t\tpackageName: undefined,\n\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t});\n\t\t\t\t\t\tif (modelType === MODEL_TYPE.BASE) {\n\t\t\t\t\t\t\tdraft.metaFieldStore = [..._fields];\n\t\t\t\t\t\t\tdraft.metaFields = [..._fields];\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tfetchJSONFields(\n\t\t\t\t\t\t\t\tfields.map((f) => f.id),\n\t\t\t\t\t\t\t\trest\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\tdraft.customModel = record;\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\t\t[update, modelName, modelType, fetchJSONFields, clearHistory, reset]\n\t);\n\n\tconst handleViewSelect = React.useCallback(\n\t\tasync (view) => {\n\t\t\tstartLoader();\n\t\t\tif (!view) {\n\t\t\t\tupdate((draft) => {\n\t\t\t\t\tclearHistory(draft);\n\t\t\t\t\tdraft.items = [];\n\t\t\t\t\tdraft.exView = null;\n\t\t\t\t\tdraft.view = null;\n\t\t\t\t\tdraft.widgets = null;\n\t\t\t\t\tdraft.initialItems = null;\n\t\t\t\t\tdraft.initialWidgets = null;\n\t\t\t\t\tdraft.customFieldWidgets = null;\n\t\t\t\t\tdraft.customFieldItems = null;\n\t\t\t\t\tdraft.customFields = [];\n\t\t\t\t\tdraft.modelField = null;\n\t\t\t\t\tdraft.extensionXML = null;\n\t\t\t\t\tdraft.extensionView = null;\n\t\t\t\t\tdraft.originalXML = null;\n\t\t\t\t\tdraft.loader = false;\n\t\t\t\t\tdraft.metaFields = draft.metaFieldStore;\n\t\t\t\t\tdraft.selectedView = null;\n\t\t\t\t\tdraft.extensionMoves = [];\n\t\t\t\t\tdraft.errorList = {};\n\t\t\t\t\tdraft.attrsList = [];\n\t\t\t\t\tdraft.translationList = [];\n\t\t\t\t\tdraft.initialTranslationList = [];\n\t\t\t\t\tdraft.removedTranslationList = [];\n\t\t\t\t});\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tconst views = await fetchViews(view);\n\t\t\tconst attrsList = await fetchAttrsList({\n\t\t\t\tmodel: model.name,\n\t\t\t\tview: view.name,\n\t\t\t});\n\t\t\tconst schema = Utils.generateXMLToViewSchema({\n\t\t\t\tview: views.view,\n\t\t\t\tfields: metaFieldStore,\n\t\t\t\textensionXML: views.extensionXML,\n\t\t\t\tattrsList,\n\t\t\t});\n\t\t\tconst translationNames = Object.values(schema.widgets)\n\t\t\t\t.filter((widget) => widget.title && widget.title.startsWith(\"studio:\"))\n\t\t\t\t.map((widget) => widget.title);\n\t\t\tconst translationList = await getTranslationList(translationNames);\n\t\t\tconst originalViewData = {\n\t\t\t\toperator: \"and\",\n\t\t\t\tcriteria: [\n\t\t\t\t\t{\n\t\t\t\t\t\toperator: \"or\",\n\t\t\t\t\t\tcriteria: [\n\t\t\t\t\t\t\t{ fieldName: \"computed\", operator: \"=\", value: false },\n\t\t\t\t\t\t\t{ fieldName: \"computed\", operator: \"isNull\" },\n\t\t\t\t\t\t],\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\toperator: \"or\",\n\t\t\t\t\t\tcriteria: [\n\t\t\t\t\t\t\t{ fieldName: \"extension\", operator: \"=\", value: false },\n\t\t\t\t\t\t\t{ fieldName: \"extension\", operator: \"isNull\" },\n\t\t\t\t\t\t],\n\t\t\t\t\t},\n\t\t\t\t\t{ fieldName: \"name\", operator: \"=\", value: `${view.name}` },\n\t\t\t\t],\n\t\t\t};\n\t\t\tmetaViewService.search({ data: originalViewData }).then((res) => {\n\t\t\t\tconst { data = [] } = res;\n\t\t\t\tif (data[0]) {\n\t\t\t\t\tupdate((draft) => {\n\t\t\t\t\t\tdraft.originalXML = JSON.parse(\n\t\t\t\t\t\t\tconvert.xml2json(data[0].xml, {\n\t\t\t\t\t\t\t\tcompact: false,\n\t\t\t\t\t\t\t\tfullTagEmptyElement: false,\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t);\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t});\n\t\t\t// fetch studio extension view\n\t\t\tconst _viewSearch = {\n\t\t\t\t_domain: `self.xmlId = 'studio-${view.name}' and self.extension = true`,\n\t\t\t};\n\t\t\tconst res = await metaViewService.search({ data: _viewSearch });\n\t\t\tconst { data: resData = [] } = res;\n\t\t\tconst record = resData[0];\n\t\t\tif (record) {\n\t\t\t\tupdate((draft) => {\n\t\t\t\t\tdraft.extensionView = record;\n\t\t\t\t\tdraft.extensionXML = JSON.parse(\n\t\t\t\t\t\tconvert.xml2json(record.xml, {\n\t\t\t\t\t\t\tcompact: false,\n\t\t\t\t\t\t\tfullTagEmptyElement: false,\n\t\t\t\t\t\t})\n\t\t\t\t\t);\n\t\t\t\t});\n\t\t\t}\n\t\t\tupdate((draft) => {\n\t\t\t\tclearHistory(draft);\n\t\t\t\tdraft.attrsList = attrsList;\n\t\t\t\tdraft.translationList = translationList;\n\t\t\t\tdraft.initialTranslationList = translationList;\n\t\t\t\tdraft.removedTranslationList = [];\n\t\t\t\tif (schema) {\n\t\t\t\t\tdraft.widgets = schema.widgets;\n\t\t\t\t\tdraft.initialWidgets = schema.widgets;\n\t\t\t\t\tdraft.items = schema.items;\n\t\t\t\t\tdraft.initialItems = schema.items;\n\t\t\t\t\tdraft.metaFields = [...draft.metaFieldStore].filter(\n\t\t\t\t\t\t(field) =>\n\t\t\t\t\t\t\tschema.fieldList.findIndex((f) => f.name === field.name) === -1\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t\tdraft.selectedView = view;\n\t\t\t\tif (views.view) {\n\t\t\t\t\tdraft.view = { fields: draft.metaFields, view: views.view };\n\t\t\t\t\tdraft.exView = views.view;\n\t\t\t\t}\n\t\t\t\tdraft.customFields = [];\n\t\t\t\tdraft.customFieldWidgets = null;\n\t\t\t\tdraft.customFieldItems = null;\n\t\t\t\tdraft.modelField = null;\n\t\t\t\tdraft.loader = false;\n\t\t\t\tdraft.extensionMoves = [];\n\t\t\t\tdraft.errorList = {};\n\t\t\t\tgenerateXpath(draft);\n\t\t\t});\n\t\t},\n\t\t[update, startLoader, metaFieldStore, clearHistory, model]\n\t);\n\n\tconst viewFilter = React.useCallback(() => {\n\t\tlet _domain = `self.type='form'`;\n\t\tlet _model = `${model ? model.fullName : \"\"}`;\n\t\t_domain = `${_domain} and self.model='${_model}' and (self.computed = true OR self.name NOT IN (select meta.name from MetaView meta where meta.computed = true))`;\n\t\treturn {\n\t\t\t_domain,\n\t\t\tfields: [\n\t\t\t\t\"name\",\n\t\t\t\t\"model\",\n\t\t\t\t\"title\",\n\t\t\t\t\"type\",\n\t\t\t\t\"extension\",\n\t\t\t\t\"xmlId\",\n\t\t\t\t\"computed\",\n\t\t\t\t\"xml\",\n\t\t\t],\n\t\t};\n\t}, [model]);\n\n\tconst modelFilter = React.useCallback(() => {\n\t\treturn {\n\t\t\tfields: [\"name\", \"fullName\", \"packageName\"],\n\t\t};\n\t}, []);\n\n\tconst metaFieldFilter = React.useCallback(() => {\n\t\tconst _domain = `self.json = true and self.metaModel.id='${\n\t\t\tmodel ? model.id : -1\n\t\t}'`;\n\t\treturn {\n\t\t\t_domain,\n\t\t\tfields: [\"name\"],\n\t\t};\n\t}, [model]);\n\n\tconst handleMetaFieldSelect = React.useCallback(\n\t\t(field) => {\n\t\t\tif (field) {\n\t\t\t\tfetchCustomFields(field, model).then((res) => {\n\t\t\t\t\tconst { data = [] } = res;\n\t\t\t\t\tconst schema = generateCustomModelSchema(\n\t\t\t\t\t\tdata,\n\t\t\t\t\t\tundefined,\n\t\t\t\t\t\t\"\",\n\t\t\t\t\t\t\"customForm\"\n\t\t\t\t\t);\n\t\t\t\t\tupdate((draft) => {\n\t\t\t\t\t\tconst newId = _.uniqueId();\n\t\t\t\t\t\tdraft.customFieldWidgets =\n\t\t\t\t\t\t\tObject.keys(schema.widgets)?.length > 2\n\t\t\t\t\t\t\t\t? schema.widgets\n\t\t\t\t\t\t\t\t: {\n\t\t\t\t\t\t\t\t\t\t...schema.widgets,\n\t\t\t\t\t\t\t\t\t\t[newId]: {\n\t\t\t\t\t\t\t\t\t\t\tname: `panel${newId}`,\n\t\t\t\t\t\t\t\t\t\t\t...PANEL_PROPS,\n\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t  };\n\t\t\t\t\t\tdraft.customFieldItems =\n\t\t\t\t\t\t\tschema.items?.length > 0 ? schema.items : [`${newId}`];\n\t\t\t\t\t\tdraft.customFields = data;\n\t\t\t\t\t\tdraft.modelField = field;\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\tupdate((draft) => {\n\t\t\t\t\tdraft.customFieldWidgets = null;\n\t\t\t\t\tdraft.customFieldItems = null;\n\t\t\t\t\tdraft.customFields = [];\n\t\t\t\t\tdraft.modelField = field;\n\t\t\t\t});\n\t\t\t}\n\t\t},\n\t\t[model, update]\n\t);\n\n\tconst handleTypeSelect = React.useCallback(\n\t\t(type) => {\n\t\t\tconst { value } = type;\n\t\t\tif ([MODEL_TYPE.CUSTOM, MODEL_TYPE.BASE].includes(value)) {\n\t\t\t\tgetEnableAppBuilder().then((res) => {\n\t\t\t\t\tupdate((draft) => {\n\t\t\t\t\t\tdraft.enableAppBuilder = res;\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t\t}\n\t\t\tconst updater = (draft) => {\n\t\t\t\tdraft.modelType = type ? type.value : null;\n\t\t\t\tdraft.entityType = null;\n\t\t\t\tdraft.initialWidgets = null;\n\t\t\t\tdraft.initialItems = null;\n\t\t\t\tdraft.modelField = null;\n\t\t\t\tdraft.customFields = [];\n\t\t\t\tdraft.customFieldWidgets = null;\n\t\t\t\tdraft.metaFieldStore = [];\n\t\t\t\tdraft.extensionMoves = [];\n\t\t\t\tdraft.removedTranslationList = [];\n\t\t\t};\n\t\t\tif (value === MODEL_TYPE.CUSTOM) {\n\t\t\t\treset(updater);\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tupdate((draft) => {\n\t\t\t\tclearHistory(draft);\n\t\t\t\tupdater(draft);\n\t\t\t\tdraft.model = null;\n\t\t\t\tdraft.customModel = null;\n\t\t\t\tdraft.widgets = null;\n\t\t\t\tdraft.items = [];\n\t\t\t\tdraft.view = null;\n\t\t\t\tdraft.exView = null;\n\t\t\t\tdraft.metaFields = [];\n\t\t\t\tdraft.metaFields = [];\n\t\t\t\tdraft.selectedView = null;\n\t\t\t\tdraft.errorList = {};\n\t\t\t\tdraft.attrsList = [];\n\t\t\t\tdraft.translationList = [];\n\t\t\t\tdraft.initialTranslationList = [];\n\t\t\t});\n\t\t},\n\t\t[update, reset, clearHistory]\n\t);\n\n\tconst handleViewFilterData = React.useCallback((list) => {\n\t\tconst newList = list.filter((view) => {\n\t\t\tif (!view.computed) {\n\t\t\t\tconst index = list.findIndex((e) => e.name === view.name && e.computed);\n\t\t\t\tif (index !== -1) {\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (view.extension === true) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\treturn true;\n\t\t});\n\t\treturn newList;\n\t}, []);\n\n\tconst getOptionLabel = (option) => {\n\t\tif (option.extension === true) {\n\t\t\treturn `${option.name} (Extension)`;\n\t\t}\n\t\tif (option.computed === true) {\n\t\t\treturn `${option.name} (Computed)`;\n\t\t}\n\t\treturn option.name;\n\t};\n\treturn (\n\t\t<>\n\t\t\t<Select\n\t\t\t\toptions={modelTypes}\n\t\t\t\tvalue={modelTypes.find((e) => e.value === modelType)}\n\t\t\t\tfilterSelectedOptions={true}\n\t\t\t\tlabel=\"Type\"\n\t\t\t\tonChange={handleTypeSelect}\n\t\t\t\tdisableClearable\n\t\t\t/>\n\t\t\t<Select\n\t\t\t\tonChange={handleModelSelect}\n\t\t\t\tlabel=\"Model\"\n\t\t\t\tmodel={modelName}\n\t\t\t\tsearchFilter={modelFilter}\n\t\t\t\tvalue={model}\n\t\t\t\tonSearch={modelSearch}\n\t\t\t\tmodelType={modelType}\n\t\t\t/>\n\t\t\t{modelType === MODEL_TYPE.BASE && (\n\t\t\t\t<React.Fragment>\n\t\t\t\t\t<Select\n\t\t\t\t\t\tonChange={handleViewSelect}\n\t\t\t\t\t\tlabel=\"View\"\n\t\t\t\t\t\tmodel=\"com.axelor.meta.db.MetaView\"\n\t\t\t\t\t\tsearchFilter={viewFilter}\n\t\t\t\t\t\tgetOptionLabel={getOptionLabel}\n\t\t\t\t\t\tvalue={props.selectedView}\n\t\t\t\t\t\tfilterData={handleViewFilterData}\n\t\t\t\t\t/>\n\t\t\t\t\t<Select\n\t\t\t\t\t\tlabel=\"Custom fields\"\n\t\t\t\t\t\tmodel=\"com.axelor.meta.db.MetaField\"\n\t\t\t\t\t\tsearchFilter={metaFieldFilter}\n\t\t\t\t\t\tonChange={handleMetaFieldSelect}\n\t\t\t\t\t\tvalue={modelField}\n\t\t\t\t\t/>\n\t\t\t\t</React.Fragment>\n\t\t\t)}\n\t\t</>\n\t);\n}\n\nexport default React.memo(ViewSelection);\n","import React from \"react\";\nimport { IconButton } from \"@material-ui/core\";\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport classnames from \"classnames\";\nimport ViewSelection from \"./ViewSelection\";\nimport { MODEL_TYPE } from \"./../constants\";\nimport { useKeyPress } from \"../custom-hooks/useKeyPress\";\n\nconst useStyles = makeStyles({\n\ttoolbarContainer: {\n\t\tdisplay: \"flex\",\n\t\tflexWrap: \"wrap\",\n\t\twidth: \"100%\",\n\t\theight: \"inherit\",\n\t\tbackgroundColor: \"rgb(41, 56, 70)\",\n\t\tpadding: \"0.5rem 0.75rem\",\n\t\t\".modern-dark &\": {\n\t\t\tbackgroundColor: \"#323232\",\n\t\t},\n\t},\n\ttoolItemView: {\n\t\tcolor: \"#fff\",\n\t\tpadding: \"5px 10px\",\n\t},\n\tcrudIcon: {\n\t\theight: \"1em\",\n\t\twidth: \"1em\",\n\t\tfontSize: 14,\n\t\tcursor: \"pointer\",\n\t},\n\tselectionContainer: {\n\t\tflex: 1,\n\t\tdisplay: \"flex\",\n\t\talignItems: \"center\",\n\t\tflexWrap: \"wrap\",\n\t},\n\ttoolbarActions: {\n\t\tdisplay: \"flex\",\n\t\talignItems: \"center\",\n\t},\n\tdisableBtn: {\n\t\tcolor: \"#555 !important\",\n\t},\n});\n\nfunction isStudioView(view) {\n\tif (view && view.xmlId && view.xmlId.indexOf(\"studio-\") === 0) {\n\t\treturn true;\n\t}\n\treturn false;\n}\n\nfunction ToolbarButton(props) {\n\tconst classes = useStyles();\n\treturn (\n\t\t<IconButton\n\t\t\tclassName={classes.toolItemView}\n\t\t\tclasses={{ disabled: classes.disableBtn }}\n\t\t\t{...props}\n\t\t/>\n\t);\n}\n\nfunction Toolbar({\n\tupdate,\n\tsaveView,\n\tmodelType,\n\tsaveCustomFieldView,\n\tremoveView,\n\tmodel,\n\tonNew,\n\treset,\n\terrorList,\n\tshowAlert,\n\tonSelect,\n\t...props\n}) {\n\tconst classes = useStyles();\n\tconst isRemoveDisabled = !(\n\t\tprops.extensionView ||\n\t\tisStudioView(props.selectedView) ||\n\t\t(modelType === MODEL_TYPE.CUSTOM && Boolean(props.customModel))\n\t);\n\tconst isNewDisabled = modelType === MODEL_TYPE.BASE && !model;\n\tconst isSaveDisabled = Object.keys(errorList).length > 0;\n\tconst getValue = (obj) => Object.values(obj || {});\n\tconst save = React.useCallback(() => {\n\t\tif (isSaveDisabled) {\n\t\t\tshowAlert((getValue((getValue(errorList) || [])[0]) || [])[0]);\n\t\t\treturn;\n\t\t}\n\t\tsaveView();\n\t\tif (modelType === MODEL_TYPE.BASE) {\n\t\t\tsaveCustomFieldView();\n\t\t}\n\t\tonSelect(-1);\n\t}, [\n\t\tsaveView,\n\t\tsaveCustomFieldView,\n\t\tmodelType,\n\t\tisSaveDisabled,\n\t\tshowAlert,\n\t\terrorList,\n\t\tonSelect,\n\t]);\n\n\tuseKeyPress([\"s\"], save);\n\n\treturn (\n\t\t<div className={classes.toolbarContainer}>\n\t\t\t<div className={classes.toolbarActions}>\n\t\t\t\t{modelType !== MODEL_TYPE.BASE && (\n\t\t\t\t\t<ToolbarButton\n\t\t\t\t\t\tclassName={classes.toolItemView}\n\t\t\t\t\t\tonClick={onNew}\n\t\t\t\t\t\tdisabled={isNewDisabled}\n\t\t\t\t\t>\n\t\t\t\t\t\t<i className={classnames(\"fa fa-plus\", classes.crudIcon)} />\n\t\t\t\t\t</ToolbarButton>\n\t\t\t\t)}\n\t\t\t\t<ToolbarButton\n\t\t\t\t\tclassName={classes.toolItemView}\n\t\t\t\t\tonClick={save}\n\t\t\t\t\tdisabled={isSaveDisabled}\n\t\t\t\t>\n\t\t\t\t\t<i className={classnames(\"fa fa-floppy-o\", classes.crudIcon)} />\n\t\t\t\t</ToolbarButton>\n\t\t\t\t{modelType === MODEL_TYPE.CUSTOM && (\n\t\t\t\t\t<ToolbarButton\n\t\t\t\t\t\tclassName={classes.toolItemView}\n\t\t\t\t\t\tonClick={removeView}\n\t\t\t\t\t\tdisabled={isRemoveDisabled}\n\t\t\t\t\t>\n\t\t\t\t\t\t<i className={classnames(\"fa fa-trash-o\", classes.crudIcon)} />\n\t\t\t\t\t</ToolbarButton>\n\t\t\t\t)}\n\t\t\t</div>\n\t\t\t<div className={classes.selectionContainer}>\n\t\t\t\t<ViewSelection\n\t\t\t\t\tmodel={model}\n\t\t\t\t\tupdate={update}\n\t\t\t\t\tmodelType={modelType}\n\t\t\t\t\treset={reset}\n\t\t\t\t\t{...props}\n\t\t\t\t/>\n\t\t\t</div>\n\t\t\t<div className={classes.toolbarActions}>\n\t\t\t\t<ToolbarButton\n\t\t\t\t\tclassName={classes.toolItemView}\n\t\t\t\t\tonClick={() => props.refresh()}\n\t\t\t\t\tdisabled={!props.customModel && !model}\n\t\t\t\t>\n\t\t\t\t\t<i className={classnames(\"fa fa-refresh\", classes.crudIcon)} />\n\t\t\t\t</ToolbarButton>\n\t\t\t\t<ToolbarButton\n\t\t\t\t\tclassName={classes.toolItemView}\n\t\t\t\t\tonClick={() => props.undo()}\n\t\t\t\t\tdisabled={props.pastLength <= 0}\n\t\t\t\t>\n\t\t\t\t\t<i className={classnames(\"fa fa-reply\", classes.crudIcon)} />\n\t\t\t\t</ToolbarButton>\n\t\t\t\t<ToolbarButton\n\t\t\t\t\tonClick={() => props.redo()}\n\t\t\t\t\tdisabled={props.futureLength <= 0}\n\t\t\t\t>\n\t\t\t\t\t<i className={classnames(\"fa fa-share\", classes.crudIcon)} />\n\t\t\t\t</ToolbarButton>\n\t\t\t</div>\n\t\t</div>\n\t);\n}\n\nexport default React.memo(Toolbar);\n","import { useEffect, useRef, useLayoutEffect, useCallback } from \"react\";\n\nexport const useKeyPress = (keys, callback, node = null) => {\n\t// implement the callback ref pattern\n\tconst callbackRef = useRef(callback);\n\tuseLayoutEffect(() => {\n\t\tcallbackRef.current = callback;\n\t});\n\n\t// handle what happens on key press\n\tconst handleKeyPress = useCallback(\n\t\t(event) => {\n\t\t\t// check if one of the key is part of the ones we want\n\t\t\tif (keys.some((key) => event.key === key && event.ctrlKey)) {\n\t\t\t\tevent.preventDefault();\n\t\t\t\tcallbackRef.current(event);\n\t\t\t}\n\t\t},\n\t\t[keys]\n\t);\n\n\tuseEffect(() => {\n\t\t// target is either the provided node or the document\n\t\tconst targetNode = node ?? document;\n\t\t// attach the event listener\n\t\ttargetNode && targetNode.addEventListener(\"keydown\", handleKeyPress);\n\n\t\t// remove the event listener\n\t\treturn () =>\n\t\t\ttargetNode && targetNode.removeEventListener(\"keydown\", handleKeyPress);\n\t}, [handleKeyPress, node]);\n};\n","import React from \"react\";\nimport Button from \"@material-ui/core/Button\";\nimport Dialog from \"@material-ui/core/Dialog\";\nimport DialogActions from \"@material-ui/core/DialogActions\";\nimport DialogContent from \"@material-ui/core/DialogContent\";\nimport DialogContentText from \"@material-ui/core/DialogContentText\";\nimport DialogTitle from \"@material-ui/core/DialogTitle\";\nimport { makeStyles } from \"@material-ui/core/styles\";\n\nimport { translate } from \"../utils\";\n\nconst useStyles = makeStyles({\n\tpaper: {\n\t\tminWidth: 300,\n\t},\n\tbutton: {\n\t\ttextTransform: \"none\",\n\t\tbackgroundColor: \"#0275d8\",\n\t\tborderColor: \"#0275d8\",\n\t\tcolor: \"#fff\",\n\t\t\"&:hover\": {\n\t\t\tbackgroundColor: \"#0275d8\",\n\t\t\tborderColor: \"#0275d8\",\n\t\t\tcolor: \"#fff\",\n\t\t},\n\t},\n});\n\nexport default function DeleteConfirmation({\n\tonOk,\n\tonClose,\n\topen,\n\tmessage,\n\ttitle = \"Delete Confirmation\",\n}) {\n\tconst classes = useStyles();\n\treturn (\n\t\t<Dialog\n\t\t\topen={open}\n\t\t\tonClose={onClose}\n\t\t\taria-labelledby=\"alert-dialog-title\"\n\t\t\taria-describedby=\"alert-dialog-description\"\n\t\t\tclasses={{\n\t\t\t\tpaper: classes.paper,\n\t\t\t}}\n\t\t>\n\t\t\t<DialogTitle id=\"alert-dialog-title\">{translate(title)}</DialogTitle>\n\t\t\t<DialogContent>\n\t\t\t\t<DialogContentText id=\"alert-dialog-description\">\n\t\t\t\t\t{translate(message)}\n\t\t\t\t</DialogContentText>\n\t\t\t</DialogContent>\n\t\t\t<DialogActions>\n\t\t\t\t<Button onClick={onOk} color=\"primary\" className={classes.button}>\n\t\t\t\t\t{translate(\"Yes\")}\n\t\t\t\t</Button>\n\t\t\t\t<Button onClick={onClose} color=\"primary\" autoFocus className={classes.button}>\n\t\t\t\t\t{translate(\"No\")}\n\t\t\t\t</Button>\n\t\t\t</DialogActions>\n\t\t</Dialog>\n\t);\n}\n","import Utils from \"../utils\";\nimport { DEFAULT_VALUE, conditionProperties } from \"../constants\";\nimport { eGeneratePath } from \"./../store/xpathGenerator\";\n\nfunction hasIndex(path) {\n\treturn path.split(\"[\").length - 1 > 1;\n}\n\nfunction convertConditionName(name) {\n\tconst propertyName = conditionProperties[name];\n\treturn propertyName;\n}\n\nconst getWidgets = ({ widgets, items }) => {\n\tObject.keys(widgets).forEach((widgetId) => {\n\t\tconst path = eGeneratePath(widgets, items, widgetId);\n\t\twidgets[widgetId].xPath = path;\n\t});\n\treturn widgets;\n};\n\nfunction getName({ self, parent }) {\n\tlet name = \"\";\n\tconst pathText = self || parent;\n\tif (pathText) {\n\t\tconst finder = \"@name='\";\n\t\tconst index = pathText.indexOf(finder) + finder.length;\n\t\tconst endIndex = pathText.indexOf(\"']\");\n\t\tname = pathText.substring(index, endIndex);\n\t}\n\treturn name;\n}\n\nconst isSameAsOriginal = (item, originalWidgets) => {\n\tif (item) {\n\t\tconst { attributes } = item;\n\t\tconst itemExplore = Utils.exploreTarget(item.target);\n\t\tconst widget = Object.values(originalWidgets).find((widget) => {\n\t\t\tconst widgetExplore = Utils.exploreTarget(widget.xPath);\n\t\t\tif (widgetExplore.self || itemExplore.self) {\n\t\t\t\treturn widgetExplore.self === itemExplore.self;\n\t\t\t} else if (widgetExplore.parent || itemExplore.parent) {\n\t\t\t\treturn widgetExplore.parent === itemExplore.parent;\n\t\t\t}\n\t\t\treturn false;\n\t\t});\n\t\tconst attributeName = Utils.dashToCamelCase(attributes.name);\n\t\tif (widget) {\n\t\t\tlet widgetValue = widget[attributeName];\n\t\t\tlet maskedValue = widget[attributes.maskName];\n\t\t\tif (maskedValue === undefined) {\n\t\t\t\tmaskedValue = \"\";\n\t\t\t}\n\t\t\tif (widgetValue === undefined) {\n\t\t\t\twidgetValue = false;\n\t\t\t}\n\t\t\tif (attributes.maskName !== attributes.name) {\n\t\t\t\tif (`${maskedValue}` === `${attributes.value}`) {\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t} else if (`${widgetValue}` === `${attributes.value}`) {\n\t\t\t\treturn true;\n\t\t\t} else if (\n\t\t\t\t[\"\", undefined, null].includes(widget[attributeName]) &&\n\t\t\t\t[\"\", undefined, null].includes(attributes.value)\n\t\t\t) {\n\t\t\t\treturn true;\n\t\t\t} else if (\n\t\t\t\tattributes.maskName !== attributes.name &&\n\t\t\t\t[\"\", undefined, null].includes(widget[attributes.maskName]) &&\n\t\t\t\t[\"\", undefined, null].includes(attributes.value)\n\t\t\t) {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\t}\n\treturn false;\n};\n\nexport function getUpdatedAttrsList(state, originalWidgets) {\n\tconst newAttrsList = [];\n\tconst removedAttrsList = [];\n\tconst { attrsList = [] } = state;\n\tconst moves = state.extensionMoves.filter((m) => m.name === \"attribute\");\n\tconst view = state.selectedView;\n\tconst model = state.model;\n\tconst movesMap = new Map();\n\tconst currentSchema = Utils.generateXMLToViewSchema({\n\t\tview: state.view.view,\n\t\tfields: state.metaFieldStore,\n\t\tattrsList: state.attrsList,\n\t});\n\tconst currentWidgets = getWidgets(currentSchema);\n\n\tmoves.forEach((move) => {\n\t\tconst convertedName = convertConditionName(move.attributes.name);\n\t\tconst name = convertedName || move.attributes.name;\n\t\tconst value = move.attributes.value;\n\t\tconst newMove = Object.assign(\n\t\t\t{},\n\t\t\t{\n\t\t\t\t...move,\n\t\t\t\tattributes: {\n\t\t\t\t\t...move.attributes,\n\t\t\t\t\tname,\n\t\t\t\t\tvalue,\n\t\t\t\t\tmaskName: move.attributes.name,\n\t\t\t\t},\n\t\t\t}\n\t\t);\n\t\tmovesMap.set(name, newMove);\n\t});\n\tmovesMap.forEach((value) => {\n\t\tconst move = value;\n\t\tconst moveExplore = Utils.exploreTarget(move.target);\n\t\tconst { attributes } = move;\n\t\tconst fieldName = getName(moveExplore);\n\t\tconst fieldIndex = attrsList.findIndex(\n\t\t\t(attr) =>\n\t\t\t\tfieldName.includes(attr.field) &&\n\t\t\t\t(attr.name === attributes.name ||\n\t\t\t\t\tconditionProperties[attr.name] === attributes.name)\n\t\t);\n\t\tconst field = attrsList[fieldIndex];\n\t\tconst isOriginal = isSameAsOriginal(move, originalWidgets);\n\t\tconst isCurrent = isSameAsOriginal(move, currentWidgets);\n\t\tconst newAttrsIndex = newAttrsList.findIndex(\n\t\t\t(attr) =>\n\t\t\t\tmoveExplore.self &&\n\t\t\t\tmoveExplore.self.includes(attr.field) &&\n\t\t\t\tattr.name === attributes.name\n\t\t);\n\t\tlet defaultValue = DEFAULT_VALUE[attributes.name];\n\t\tif (isOriginal || isCurrent) {\n\t\t\tif (newAttrsIndex !== -1) {\n\t\t\t\tnewAttrsList.splice(newAttrsIndex, 1);\n\t\t\t} else if (field && field.id) {\n\t\t\t\tremovedAttrsList.push({ id: field.id, version: field.version });\n\t\t\t}\n\t\t} else {\n\t\t\tif (field) {\n\t\t\t\tif ([null, undefined].includes(attributes.value)) {\n\t\t\t\t\tif (defaultValue) {\n\t\t\t\t\t\tif (defaultValue === attributes.value) {\n\t\t\t\t\t\t\tremovedAttrsList.push({ id: field.id, version: field.version });\n\t\t\t\t\t\t}\n\t\t\t\t\t} else {\n\t\t\t\t\t\tremovedAttrsList.push({ id: field.id, version: field.version });\n\t\t\t\t\t}\n\t\t\t\t} else if (field.value !== attributes.value) {\n\t\t\t\t\tif (defaultValue) {\n\t\t\t\t\t\tif (defaultValue === attributes.value) {\n\t\t\t\t\t\t\tremovedAttrsList.push({ id: field.id, version: field.version });\n\t\t\t\t\t\t}\n\t\t\t\t\t} else {\n\t\t\t\t\t\tif (newAttrsIndex === -1) {\n\t\t\t\t\t\t\tnewAttrsList.push({\n\t\t\t\t\t\t\t\t...field,\n\t\t\t\t\t\t\t\tname: attributes.name,\n\t\t\t\t\t\t\t\tvalue: attributes.value,\n\t\t\t\t\t\t\t\tmaskName: attributes.maskName,\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tnewAttrsList[newAttrsIndex].value = attributes.value;\n\t\t\t\t\t\t\tnewAttrsList[newAttrsIndex].maskName = attributes.maskName;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tif (fieldName) {\n\t\t\t\t\t// const hasInAttrsList = attrsList.find(attr => )\n\t\t\t\t\t// if(defaultValue !== attributes.value) {\n\t\t\t\t\tif (newAttrsIndex === -1) {\n\t\t\t\t\t\tnewAttrsList.push({\n\t\t\t\t\t\t\tview: view.name,\n\t\t\t\t\t\t\tmodel: model.fullName,\n\t\t\t\t\t\t\tname: attributes.name,\n\t\t\t\t\t\t\tmaskName: attributes.maskName,\n\t\t\t\t\t\t\tvalue: attributes.value,\n\t\t\t\t\t\t\tfield: fieldName,\n\t\t\t\t\t\t});\n\t\t\t\t\t} else {\n\t\t\t\t\t\tnewAttrsList[newAttrsIndex].value = attributes.value;\n\t\t\t\t\t\tnewAttrsList[newAttrsIndex].maskName = attributes.maskName;\n\t\t\t\t\t}\n\t\t\t\t\t// } else if(newAttrsIndex !== -1) {\n\t\t\t\t\t// \tnewAttrsList.splice(newAttrsIndex, 1);\n\t\t\t\t\t// }\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t});\n\treturn { changedAttrsList: newAttrsList, removedAttrsList };\n}\n\nexport function optimizeExtension(state, originalWidgets) {\n\tconst processed = [];\n\tconst moves = state.extensionMoves.filter((m) => m.name !== \"attribute\");\n\tlet list = [...moves];\n\tconst filterListForAttribute = (move) => {\n\t\tif (\n\t\t\tprocessed.findIndex(\n\t\t\t\t(p) => p.target === move.target && p.name === move.attributes.name\n\t\t\t) === -1\n\t\t) {\n\t\t\tconst _list = list\n\t\t\t\t.map((_item, i) => {\n\t\t\t\t\tif (\n\t\t\t\t\t\t_item.target === move.target &&\n\t\t\t\t\t\t_item.attributes &&\n\t\t\t\t\t\tmove.attributes.name === _item.attributes.name\n\t\t\t\t\t) {\n\t\t\t\t\t\treturn i;\n\t\t\t\t\t}\n\t\t\t\t\treturn undefined;\n\t\t\t\t})\n\t\t\t\t.filter((e) => e !== undefined);\n\t\t\tconst lastItem = _list[_list.length - 1];\n\t\t\tprocessed.push({ target: move.target, name: move.attributes.name });\n\t\t\tlist = list.filter((item, k) => {\n\t\t\t\tif (item.target === move.target) {\n\t\t\t\t\tif (\n\t\t\t\t\t\tmove.attributes &&\n\t\t\t\t\t\titem.attributes &&\n\t\t\t\t\t\tmove.attributes.name === item.attributes.name\n\t\t\t\t\t) {\n\t\t\t\t\t\treturn lastItem === k ? true : false;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\treturn true;\n\t\t\t});\n\t\t}\n\t};\n\n\tconst filterListForRemove = (move) => {\n\t\tlet canRemoveReplace = false;\n\t\tconst explore = Utils.exploreTarget(move.target);\n\t\t// check for insert nodes\n\t\tconst insertIndex = list.findIndex((item) => {\n\t\t\tif (item.name === \"insert\") {\n\t\t\t\treturn item.elements && item.elements[0] && explore.self\n\t\t\t\t\t? explore.self.includes(`'${item.elements[0].name}'`)\n\t\t\t\t\t: explore.parent && explore.parent.includes(item.elements[0].name);\n\t\t\t}\n\t\t\treturn false;\n\t\t});\n\t\tconst depends = list.filter((item) => {\n\t\t\tif (item.target) {\n\t\t\t\tconst itemExplore = Utils.exploreTarget(item.target);\n\t\t\t\treturn (\n\t\t\t\t\t[\"insert\", \"move\"].includes(item.name) &&\n\t\t\t\t\titemExplore.self &&\n\t\t\t\t\titemExplore.self.includes(explore.self)\n\t\t\t\t);\n\t\t\t}\n\t\t\treturn false;\n\t\t});\n\t\tif (insertIndex !== -1 && !depends.length) {\n\t\t\tcanRemoveReplace = true;\n\t\t\tlist.splice(insertIndex, 1);\n\t\t\t// check for move\n\t\t\t[...list].forEach((item) => {\n\t\t\t\tif (\n\t\t\t\t\titem.name === \"move\" &&\n\t\t\t\t\titem.source &&\n\t\t\t\t\titem.source === move.target\n\t\t\t\t) {\n\t\t\t\t\tconst moveIndex = list.findIndex(\n\t\t\t\t\t\t(_item) =>\n\t\t\t\t\t\t\t_item.name === \"move\" &&\n\t\t\t\t\t\t\t_item.source &&\n\t\t\t\t\t\t\t_item.source === move.target\n\t\t\t\t\t);\n\t\t\t\t\tif (moveIndex !== -1) {\n\t\t\t\t\t\tlist.splice(moveIndex, 1);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t\t// remove attribute changes\n\t\tlist = list.filter((item) => {\n\t\t\tif (item.name === \"attribute\" && item.target === move.target) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\treturn true;\n\t\t});\n\t\tif (canRemoveReplace) {\n\t\t\tconst removeIndex = list.findIndex(\n\t\t\t\t(item) => item.name === \"replace\" && item.target === move.target\n\t\t\t);\n\t\t\tif (removeIndex !== -1) {\n\t\t\t\tlist.splice(removeIndex, 1);\n\t\t\t}\n\t\t}\n\t};\n\n\tmoves.forEach((move, i) => {\n\t\tif (move.target) {\n\t\t\tconst explore = Utils.exploreTarget(move.target);\n\t\t\tlet flag = true;\n\t\t\tif (explore.self && hasIndex(explore.self)) {\n\t\t\t\tflag = false;\n\t\t\t}\n\t\t\tif (explore.parent && hasIndex(explore.parent)) {\n\t\t\t\tflag = false;\n\t\t\t}\n\t\t\tif (move.name === \"attribute\" && flag) {\n\t\t\t\tfilterListForAttribute(move);\n\t\t\t}\n\t\t\tif (move.name === \"replace\" && flag) {\n\t\t\t\tif (\n\t\t\t\t\t!(\n\t\t\t\t\t\t(explore?.self && explore.self.includes(\"panel\")) ||\n\t\t\t\t\t\t(!explore?.self && explore?.parent.includes(\"panel\"))\n\t\t\t\t\t)\n\t\t\t\t) {\n\t\t\t\t\tfilterListForRemove(move);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t});\n\treturn list;\n}\n","import React from \"react\";\nimport convert from \"xml-js\";\nimport {\n\tDialog,\n\tDialogTitle,\n\tDialogContent,\n\tDialogActions,\n\tButton,\n} from \"@material-ui/core\";\nimport _ from \"lodash\";\nimport { makeStyles } from \"@material-ui/core/styles\";\n\nimport Toolbar from \"./Toolbar\";\nimport { useStore } from \"../store/context\";\nimport { generateView } from \"../store/extensionGenerator\";\nimport AxelorService from \"./../services/axelor.rest\";\nimport Utils, {\n\tgenerateCustomModelSchema,\n\ttranslate,\n\tisPanelTab,\n} from \"../utils\";\nimport {\n\tMODEL_TYPE,\n\tconditionProperties,\n\totherNoQuoteProps,\n\tItemTypes,\n\tPANEL_PROPS,\n\tTYPE,\n} from \"../constants\";\nimport {\n\tsaveCustomModel,\n\tfetchJSONFields,\n\tremoveCustomModel,\n\tgenerateMenuChange,\n\tfetchCustomModel,\n\tfetchCustomFields,\n\tfetchViews,\n\tsaveAttrsList,\n\tfetchAttrsList,\n\tsaveTranslationList,\n\tgetTranslationList,\n\tdeleteAttrsList,\n\tdeleteTranslationList,\n} from \"./api\";\nimport DeleteConfirmation from \"./DeleteConfirmation\";\nimport { getXML } from \"./../store/computeXML\";\nimport { generateXpath, eGeneratePath } from \"./../store/xpathGenerator\";\nimport {\n\toptimizeExtension,\n\tgetUpdatedAttrsList,\n} from \"../store/optimizeExtension\";\n\nconst metaViewService = new AxelorService({\n\tmodel: \"com.axelor.meta.db.MetaView\",\n});\nconst customFieldService = new AxelorService({\n\tmodel: \"com.axelor.meta.db.MetaJsonField\",\n});\n\nconst useStyles = makeStyles(() => ({\n\tpaper: {\n\t\tminWidth: 300,\n\t},\n\tbutton: {\n\t\ttextTransform: \"none\",\n\t\tbackgroundColor: \"#0275d8\",\n\t\tborderColor: \"#0275d8\",\n\t\tcolor: \"#fff\",\n\t\t\"&:hover\": {\n\t\t\tbackgroundColor: \"#0275d8\",\n\t\t\tborderColor: \"#0275d8\",\n\t\t\tcolor: \"#fff\",\n\t\t},\n\t},\n}));\n\nconst getWidgets = ({ widgets, items }) => {\n\tObject.keys(widgets).forEach((widgetId) => {\n\t\tconst path = eGeneratePath(widgets, items, widgetId);\n\t\twidgets[widgetId].xPath = path;\n\t});\n\treturn widgets;\n};\n\nconst getChangedTranslationList = (\n\tlist,\n\tinitialList,\n\tremovedTranslationList\n) => {\n\tconst deletedTranslationList = [];\n\tconst changedTranslationList = list.filter((item) => {\n\t\tif (removedTranslationList.indexOf(item.key) !== -1) {\n\t\t\titem.id &&\n\t\t\t\tdeletedTranslationList.push({ id: item.id, version: item.version });\n\t\t\treturn false;\n\t\t}\n\t\tif (item.id) {\n\t\t\tconst initialItem = initialList.find(\n\t\t\t\t(i) => i.language === item.language && i.key === item.key\n\t\t\t);\n\t\t\tif (initialItem && initialItem.message !== item.message) {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t\treturn false;\n\t\t}\n\t\treturn true;\n\t});\n\treturn { changedTranslationList, deletedTranslationList };\n};\n\nfunction ToolbarContainer(props) {\n\tconst { state, update, startLoader, undo, redo, clearHistory, onSelect } =\n\t\tuseStore();\n\tconst [deleteConfirmationDialog, setDeleteConfirmationDialog] =\n\t\tReact.useState(false);\n\tconst { customFieldWidgets, widgets, modelType } = state;\n\tconst classes = useStyles();\n\n\tconst closeLoader = React.useCallback(() => {\n\t\tupdate((draft) => {\n\t\t\tdraft.loader = false;\n\t\t});\n\t}, [update]);\n\n\tconst reset = React.useCallback(\n\t\t(updater) => {\n\t\t\tupdate((draft) => {\n\t\t\t\tupdater && updater(draft);\n\t\t\t\tdraft.errorList = {};\n\t\t\t\tdraft.customModel = null;\n\t\t\t\tdraft.exView = null;\n\t\t\t\tdraft.view = null;\n\t\t\t\tdraft.extensionXML = null;\n\t\t\t\tdraft.extensionView = null;\n\t\t\t\tdraft.loader = false;\n\t\t\t\tdraft.metaFields = draft.metaFieldStore || [];\n\t\t\t\tdraft.selectedView = null;\n\t\t\t\tdraft.translationList = [];\n\t\t\t\tdraft.initialTranslationList = [];\n\t\t\t\tdraft.attrsList = [];\n\t\t\t\tdraft.model = null;\n\t\t\t\tconst newId = _.uniqueId();\n\t\t\t\tdraft.widgets = {\n\t\t\t\t\t\"-1\": {\n\t\t\t\t\t\ttype: \"form\",\n\t\t\t\t\t\tcols: 12,\n\t\t\t\t\t\textension: false,\n\t\t\t\t\t\t...Utils.getDefaultProperties(draft.modelType),\n\t\t\t\t\t},\n\t\t\t\t\t0: { type: \"dump_field\", name: \"\" },\n\t\t\t\t\t[newId]: {\n\t\t\t\t\t\tname: `panel${newId}`,\n\t\t\t\t\t\t...PANEL_PROPS,\n\t\t\t\t\t},\n\t\t\t\t};\n\t\t\t\tdraft.items = [`${newId}`];\n\t\t\t\tdraft.editWidget = -1;\n\t\t\t\tdraft.editWidgetType = null;\n\t\t\t\tdraft.tabIndex = 0;\n\t\t\t});\n\t\t},\n\t\t[update]\n\t);\n\n\tconst removeView = React.useCallback(\n\t\tfunction removeView() {\n\t\t\tstartLoader();\n\t\t\tconst clearView = (dialog) => {\n\t\t\t\tupdate((draft) => {\n\t\t\t\t\tclearHistory(draft);\n\t\t\t\t\tdraft.customModel = null;\n\t\t\t\t\tdraft.dialog = dialog;\n\t\t\t\t\tdraft.widgets = null;\n\t\t\t\t\tdraft.initialItems = null;\n\t\t\t\t\tdraft.initialWidgets = null;\n\t\t\t\t\tdraft.items = [];\n\t\t\t\t\tdraft.view = null;\n\t\t\t\t\tdraft.metaFields = [];\n\t\t\t\t\tdraft.selectedView = null;\n\t\t\t\t\tdraft.originalXML = null;\n\t\t\t\t\tdraft.extensionXML = null;\n\t\t\t\t\tdraft.selectedView = null;\n\t\t\t\t\tdraft.loader = false;\n\t\t\t\t\tdraft.extensionView = null;\n\t\t\t\t\tdraft.errorList = {};\n\t\t\t\t\tif (draft.modelType === MODEL_TYPE.CUSTOM) {\n\t\t\t\t\t\treset();\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t};\n\t\t\tif (state.modelType === MODEL_TYPE.CUSTOM) {\n\t\t\t\tif (state.model || state.customModel) {\n\t\t\t\t\tremoveCustomModel(state.model || state.customModel).then((res) => {\n\t\t\t\t\t\tconst { data, status } = res || {};\n\t\t\t\t\t\tif (status === -1) {\n\t\t\t\t\t\t\tconst { message = \"\" } = data || {};\n\t\t\t\t\t\t\tconst dialog = {\n\t\t\t\t\t\t\t\tmessage,\n\t\t\t\t\t\t\t\ttype: \"alert\",\n\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\tupdate((draft) => {\n\t\t\t\t\t\t\t\tdraft.loader = false;\n\t\t\t\t\t\t\t\tdraft.dialog = dialog;\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tclearView(null);\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tlet record;\n\t\t\t\tif (state.extensionView) {\n\t\t\t\t\trecord = {\n\t\t\t\t\t\tid: state.extensionView.id,\n\t\t\t\t\t\tversion: state.extensionView.version,\n\t\t\t\t\t};\n\t\t\t\t} else if (\n\t\t\t\t\tstate.selectedView &&\n\t\t\t\t\tstate.selectedView.xmlId &&\n\t\t\t\t\tstate.selectedView.xmlId.indexOf(\"studio-\") === 0\n\t\t\t\t) {\n\t\t\t\t\trecord = {\n\t\t\t\t\t\tid: state.selectedView.id,\n\t\t\t\t\t\tversion: state.selectedView.version,\n\t\t\t\t\t};\n\t\t\t\t}\n\t\t\t\tif (record) {\n\t\t\t\t\tmetaViewService.removeAll([record]).then((e) => {\n\t\t\t\t\t\tclearView(null);\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\t[update, state, startLoader, clearHistory, reset]\n\t);\n\n\tconst refresh = React.useCallback(async () => {\n\t\tif (state.modelType === MODEL_TYPE.CUSTOM) {\n\t\t\tconst { customModel } = state;\n\t\t\tif (!customModel) return;\n\t\t\tconst record = (await fetchCustomModel(customModel.id)) || {};\n\t\t\tconst { fields = [], ...rest } = record;\n\t\t\tif (rest.menuBuilder) {\n\t\t\t\trest.menuBuilder = {\n\t\t\t\t\t...customModel.menuBuilder,\n\t\t\t\t\t...rest.menuBuilder,\n\t\t\t\t};\n\t\t\t}\n\t\t\tfetchJSONFields(\n\t\t\t\tfields.map((f) => f.id),\n\t\t\t\tupdate,\n\t\t\t\trest\n\t\t\t);\n\t\t\tupdate((draft) => {\n\t\t\t\tdraft.customModel = {\n\t\t\t\t\t...(record || {}),\n\t\t\t\t\tmenuBuilder: rest?.menuBuilder,\n\t\t\t\t};\n\t\t\t\tdraft.model = record;\n\t\t\t\tdraft.loader = false;\n\t\t\t\tdraft.removedCustomFields = [];\n\t\t\t\tdraft.errorList = {};\n\t\t\t});\n\t\t} else {\n\t\t\tif (state.widgets) {\n\t\t\t\tconst { view } = state;\n\t\t\t\tconst res = await metaViewService.fetch(view?.view?.id);\n\t\t\t\tconst record = res && res.data && res.data[0];\n\t\t\t\tupdate((draft) => {\n\t\t\t\t\tdraft.loader = false;\n\t\t\t\t\tconst views = draft.view;\n\t\t\t\t\tconst schema = Utils.generateXMLToViewSchema({\n\t\t\t\t\t\tview: record,\n\t\t\t\t\t\tfields: draft.metaFieldStore,\n\t\t\t\t\t\textensionXML: views.extensionXML,\n\t\t\t\t\t\tattrsList: [],\n\t\t\t\t\t});\n\t\t\t\t\tdraft.widgets = schema.widgets;\n\t\t\t\t\tdraft.initialWidgets = schema.widgets;\n\t\t\t\t\tdraft.items = schema.items;\n\t\t\t\t\tdraft.initialItems = schema.items;\n\t\t\t\t\tdraft.extensionMoves = [];\n\t\t\t\t\tdraft.attrsList = [];\n\t\t\t\t\tdraft.errorList = {};\n\t\t\t\t\tgenerateXpath(draft);\n\t\t\t\t});\n\t\t\t}\n\t\t\tif (\n\t\t\t\t(state.customFieldItems || state.removedCustomFields.length) &&\n\t\t\t\tstate.modelField?.name\n\t\t\t) {\n\t\t\t\tstartLoader();\n\t\t\t\tfetchCustomFields(state.modelField, state.model).then((res) => {\n\t\t\t\t\tconst { data = [] } = res;\n\t\t\t\t\tconst schema = generateCustomModelSchema(\n\t\t\t\t\t\tdata,\n\t\t\t\t\t\tundefined,\n\t\t\t\t\t\t\"\",\n\t\t\t\t\t\t\"customForm\"\n\t\t\t\t\t);\n\t\t\t\t\tupdate((draft) => {\n\t\t\t\t\t\tdraft.customFieldWidgets = schema.widgets;\n\t\t\t\t\t\tdraft.customFieldItems = schema.items;\n\t\t\t\t\t\tdraft.customFields = data;\n\t\t\t\t\t\tdraft.loader = false;\n\t\t\t\t\t\tdraft.removedCustomFields = [];\n\t\t\t\t\t\tdraft.errorList = {};\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\tcloseLoader();\n\t\t\t}\n\t\t}\n\t}, [update, state, closeLoader, startLoader]);\n\n\tconst isTabsPanelEmpty = React.useCallback(() => {\n\t\tconst propertyValues =\n\t\t\tObject.values(\n\t\t\t\t(modelType === MODEL_TYPE.BASE ? customFieldWidgets : widgets) || {}\n\t\t\t) || [];\n\t\tconst panelTab = propertyValues.find((v) => v.type === TYPE.tabs);\n\t\tif (panelTab && !panelTab?.items?.length) {\n\t\t\tconst dialog = {\n\t\t\t\tmessage: translate(\"Tabs should have atleast one panel\"),\n\t\t\t\ttype: \"alert\",\n\t\t\t};\n\t\t\tupdate((draft) => {\n\t\t\t\tdraft.loader = false;\n\t\t\t\tdraft.dialog = dialog;\n\t\t\t});\n\t\t\treturn false;\n\t\t} else {\n\t\t\treturn true;\n\t\t}\n\t}, [customFieldWidgets, widgets, update, modelType]);\n\n\tconst showAlert = (message) => {\n\t\tconst dialog = {\n\t\t\tmessage: translate(message),\n\t\t\ttype: \"alert\",\n\t\t};\n\t\tupdate((draft) => {\n\t\t\tdraft.loader = false;\n\t\t\tdraft.dialog = dialog;\n\t\t});\n\t};\n\n\tconst saveView = React.useCallback(async () => {\n\t\tif (!state.widgets) {\n\t\t\treturn;\n\t\t}\n\t\tif (!isTabsPanelEmpty()) return;\n\t\tstartLoader();\n\t\tif (state.modelType === MODEL_TYPE.CUSTOM) {\n\t\t\tconst { fields } = Utils.getCustomModelFields(\n\t\t\t\tstate.items,\n\t\t\t\tstate.widgets,\n\t\t\t\tnull,\n\t\t\t\ttrue\n\t\t\t);\n\t\t\tconst propertyValues = Object.values(state.widgets || {}) || [];\n\t\t\tconst uniqueValues = new Set(propertyValues.map((v) => v.name)) || [];\n\t\t\tif (uniqueValues.size < propertyValues.length) {\n\t\t\t\tconst dialog = {\n\t\t\t\t\tmessage: translate(\"Field name should be unique\"),\n\t\t\t\t\ttype: \"alert\",\n\t\t\t\t};\n\t\t\t\tupdate((draft) => {\n\t\t\t\t\tdraft.loader = false;\n\t\t\t\t\tdraft.dialog = dialog;\n\t\t\t\t});\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tconst formProperties = state.widgets[-1];\n\t\t\tif (!formProperties.name || !formProperties.title) {\n\t\t\t\tconst dialog = {\n\t\t\t\t\tmessage: \"Please enter form name and title\",\n\t\t\t\t\ttype: \"alert\",\n\t\t\t\t};\n\t\t\t\tupdate((draft) => {\n\t\t\t\t\tdraft.loader = false;\n\t\t\t\t\tdraft.dialog = dialog;\n\t\t\t\t});\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tlet customModel = {\n\t\t\t\t...state.customModel,\n\t\t\t\t...Utils.getFormProperties(formProperties),\n\t\t\t\tfields,\n\t\t\t\t...(state.customModel && { version: state.customModel.version }),\n\t\t\t};\n\t\t\tif (formProperties.isGenerateMenu === true) {\n\t\t\t\tcustomModel[\"menuBuilder\"] = {\n\t\t\t\t\t...(state.customModel || {}).menuBuilder,\n\t\t\t\t\ttitle: formProperties.menuBuilderTitle,\n\t\t\t\t\tparentMenu: formProperties.menuBuilderParent,\n\t\t\t\t\tversion: ((state.customModel || {}).menuBuilder || {}).$version,\n\t\t\t\t};\n\t\t\t}\n\t\t\tconst { isGenerateMenu } = state.customModel || {};\n\t\t\tif (formProperties.isGenerateMenu !== isGenerateMenu) {\n\t\t\t\tconst res = await generateMenuChange(customModel);\n\t\t\t\tconst { data = [] } = res;\n\t\t\t\tif (data[0] && data[0].reload) {\n\t\t\t\t\tconst modelResult = await fetchCustomModel(customModel.id);\n\t\t\t\t\tcustomModel = {\n\t\t\t\t\t\t...customModel,\n\t\t\t\t\t\tmenuBuilder: null,\n\t\t\t\t\t\tversion: modelResult.version,\n\t\t\t\t\t};\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (state.removedCustomFields.length) {\n\t\t\t\tawait customFieldService.removeAll(state.removedCustomFields);\n\t\t\t}\n\t\t\tsaveCustomModel(customModel).then((res) => {\n\t\t\t\tconst { data, status } = res || {};\n\t\t\t\tif (status === -1) {\n\t\t\t\t\tconst { message = \"\", title } = data || {};\n\t\t\t\t\tlet errorMessage = message;\n\t\t\t\t\tif (\n\t\t\t\t\t\ttitle &&\n\t\t\t\t\t\ttitle.includes(translate(\"Unique constraint violation\"))\n\t\t\t\t\t) {\n\t\t\t\t\t\terrorMessage = translate(\"Model name should be unique\");\n\t\t\t\t\t\tif (message.includes(\"com.axelor.meta.db.MetaJsonRecord\")) {\n\t\t\t\t\t\t\terrorMessage = translate(\"Field name should be unique\");\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tconst dialog = {\n\t\t\t\t\t\tmessage: errorMessage,\n\t\t\t\t\t\ttype: \"alert\",\n\t\t\t\t\t};\n\t\t\t\t\tupdate((draft) => {\n\t\t\t\t\t\tdraft.loader = false;\n\t\t\t\t\t\tdraft.dialog = dialog;\n\t\t\t\t\t});\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tconst record = data && data[0];\n\t\t\t\tconst { fields = [], ...rest } = record;\n\t\t\t\tif (rest.menuBuilder) {\n\t\t\t\t\trest.menuBuilder = {\n\t\t\t\t\t\t...customModel.menuBuilder,\n\t\t\t\t\t\t...rest.menuBuilder,\n\t\t\t\t\t};\n\t\t\t\t}\n\t\t\t\tfetchJSONFields(\n\t\t\t\t\tfields.map((f) => f.id),\n\t\t\t\t\tupdate,\n\t\t\t\t\trest\n\t\t\t\t);\n\t\t\t\tupdate((draft) => {\n\t\t\t\t\tdraft.customModel = record;\n\t\t\t\t\tdraft.model = record;\n\t\t\t\t\tdraft.loader = false;\n\t\t\t\t\tdraft.removedCustomFields = [];\n\t\t\t\t});\n\t\t\t});\n\t\t} else {\n\t\t\tif (state.widgets) {\n\t\t\t\tconst exemptAttributes = [\n\t\t\t\t\t\"viewId\",\n\t\t\t\t\t\"modelId\",\n\t\t\t\t\t\"version\",\n\t\t\t\t\t\"helpOverride\",\n\t\t\t\t\t\"menubar\",\n\t\t\t\t\t\"xml\",\n\t\t\t\t\t\"computed\",\n\t\t\t\t\t\"xmlId\",\n\t\t\t\t\t\"type\",\n\t\t\t\t\t\"cols\",\n\t\t\t\t\t\"colSpan\",\n\t\t\t\t\t\"serverType\",\n\t\t\t\t];\n\t\t\t\tif (!state.exView || Utils.isCreatedFromStudio(state.exView)) {\n\t\t\t\t\tconst formProperties = state.widgets[-1];\n\t\t\t\t\tif (!formProperties.name || !formProperties.title) {\n\t\t\t\t\t\tconst dialog = {\n\t\t\t\t\t\t\tmessage: \"Please enter form name and title\",\n\t\t\t\t\t\t\ttype: \"alert\",\n\t\t\t\t\t\t};\n\t\t\t\t\t\tupdate((draft) => {\n\t\t\t\t\t\t\tdraft.loader = false;\n\t\t\t\t\t\t\tdraft.dialog = dialog;\n\t\t\t\t\t\t});\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t\tconst viewSearch = await metaViewService.search({\n\t\t\t\t\t\tdata: { _domain: `self.name = '${formProperties.name}'` },\n\t\t\t\t\t});\n\t\t\t\t\tif (\n\t\t\t\t\t\tviewSearch &&\n\t\t\t\t\t\tviewSearch.total &&\n\t\t\t\t\t\tviewSearch.total > 0 &&\n\t\t\t\t\t\t!state.exView?.id\n\t\t\t\t\t) {\n\t\t\t\t\t\tconst dialog = {\n\t\t\t\t\t\t\tmessage: \"View name already exists\",\n\t\t\t\t\t\t\ttype: \"alert\",\n\t\t\t\t\t\t};\n\t\t\t\t\t\tupdate((draft) => {\n\t\t\t\t\t\t\tdraft.loader = false;\n\t\t\t\t\t\t\tdraft.dialog = dialog;\n\t\t\t\t\t\t});\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t\tconst patch = generateView(\n\t\t\t\t\t\tstate.widgets,\n\t\t\t\t\t\tstate.items,\n\t\t\t\t\t\tstate.modelType\n\t\t\t\t\t);\n\t\t\t\t\tconst model = state.model.fullName;\n\t\t\t\t\tconst form = {\n\t\t\t\t\t\telements: [\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tname: \"form\",\n\t\t\t\t\t\t\t\ttype: \"element\",\n\t\t\t\t\t\t\t\tattributes: {\n\t\t\t\t\t\t\t\t\tmodel,\n\t\t\t\t\t\t\t\t\t...Utils.getFormProperties(formProperties, [\n\t\t\t\t\t\t\t\t\t\t...exemptAttributes,\n\t\t\t\t\t\t\t\t\t\t\"extension\",\n\t\t\t\t\t\t\t\t\t\t\"id\",\n\t\t\t\t\t\t\t\t\t]),\n\t\t\t\t\t\t\t\t\tid:\n\t\t\t\t\t\t\t\t\t\tstate.exView && state.exView.xmlId\n\t\t\t\t\t\t\t\t\t\t\t? state.exView.xmlId\n\t\t\t\t\t\t\t\t\t\t\t: `studio-${formProperties.name}`,\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\telements: [...patch],\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t],\n\t\t\t\t\t};\n\t\t\t\t\tconst xml = Utils.processXML(\n\t\t\t\t\t\tconvert.json2xml(form, {\n\t\t\t\t\t\t\tcompact: false,\n\t\t\t\t\t\t\tfullTagEmptyElement: false,\n\t\t\t\t\t\t})\n\t\t\t\t\t);\n\t\t\t\t\tlet data = {\n\t\t\t\t\t\txml,\n\t\t\t\t\t\textension: formProperties.extension,\n\t\t\t\t\t\ttype: \"form\",\n\t\t\t\t\t\tname: formProperties.name,\n\t\t\t\t\t\ttitle: formProperties.title,\n\t\t\t\t\t\tmodel,\n\t\t\t\t\t\txmlId: `studio-${formProperties.name}`,\n\t\t\t\t\t};\n\t\t\t\t\tif (state.exView && state.exView.id) {\n\t\t\t\t\t\tdata[\"id\"] = state.exView.id;\n\t\t\t\t\t\tdata[\"version\"] = state.exView.version;\n\t\t\t\t\t\tdata[\"xmlId\"] = state.exView.xmlId || data.xmlId;\n\t\t\t\t\t}\n\t\t\t\t\tmetaViewService.save(data).then(async (res) => {\n\t\t\t\t\t\tif (res.status === -1) {\n\t\t\t\t\t\t\tconst error = res.data;\n\t\t\t\t\t\t\tconst dialog = {\n\t\t\t\t\t\t\t\ttitle: error.title,\n\t\t\t\t\t\t\t\tmessage: error.string || error.message,\n\t\t\t\t\t\t\t\ttype: \"alert\",\n\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\tupdate((draft) => {\n\t\t\t\t\t\t\t\tdraft.loader = false;\n\t\t\t\t\t\t\t\tdraft.dialog = dialog;\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t} else if (res.data && res.data[0]) {\n\t\t\t\t\t\t\tconst fetchResult = await metaViewService.fetch(res.data[0].id);\n\t\t\t\t\t\t\tif (fetchResult.data && fetchResult.data[0]) {\n\t\t\t\t\t\t\t\tconst record = fetchResult.data[0];\n\t\t\t\t\t\t\t\tupdate((draft) => {\n\t\t\t\t\t\t\t\t\tconst schema = Utils.generateXMLToViewSchema({\n\t\t\t\t\t\t\t\t\t\tview: record,\n\t\t\t\t\t\t\t\t\t\tfields: draft.metaFieldStore,\n\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t\tdraft.widgets = schema.widgets;\n\t\t\t\t\t\t\t\t\tdraft.initialWidgets = schema.widgets;\n\t\t\t\t\t\t\t\t\tdraft.items = schema.items;\n\t\t\t\t\t\t\t\t\tdraft.initialItems = schema.items;\n\t\t\t\t\t\t\t\t\tdraft.metaView = record;\n\t\t\t\t\t\t\t\t\tdraft.exView = record;\n\t\t\t\t\t\t\t\t\tdraft.selectedView = { ...record };\n\t\t\t\t\t\t\t\t\tdraft.loader = false;\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t} else {\n\t\t\t\t\tconst { view } = state.view;\n\t\t\t\t\tconst model = state.model.fullName;\n\t\t\t\t\tconst originalSchema = Utils.generateViewFromJson({\n\t\t\t\t\t\tview: state.originalXML,\n\t\t\t\t\t\tfields: state.metaFieldStore,\n\t\t\t\t\t});\n\t\t\t\t\tconst widgets = getWidgets(originalSchema);\n\t\t\t\t\tconst moves = optimizeExtension(state, widgets);\n\t\t\t\t\tconst { changedAttrsList, removedAttrsList } = getUpdatedAttrsList(\n\t\t\t\t\t\tstate,\n\t\t\t\t\t\twidgets\n\t\t\t\t\t);\n\t\t\t\t\tconst extension = getXML(moves, state);\n\t\t\t\t\tlet isAttrsChanged = false;\n\t\t\t\t\tlet attrsList = [];\n\t\t\t\t\tif (changedAttrsList.length) {\n\t\t\t\t\t\tisAttrsChanged = true;\n\t\t\t\t\t\tconst conditionalValues = Object.values(conditionProperties);\n\t\t\t\t\t\tconst list = changedAttrsList.map((attr) => {\n\t\t\t\t\t\t\tif (\n\t\t\t\t\t\t\t\t[...conditionalValues, ...otherNoQuoteProps].includes(attr.name)\n\t\t\t\t\t\t\t) {\n\t\t\t\t\t\t\t\treturn attr;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\treturn { ...attr, value: `\"${attr.value}\"` };\n\t\t\t\t\t\t});\n\t\t\t\t\t\tawait saveAttrsList(list);\n\t\t\t\t\t}\n\t\t\t\t\tif (removedAttrsList.length) {\n\t\t\t\t\t\tisAttrsChanged = true;\n\t\t\t\t\t\tawait deleteAttrsList(removedAttrsList);\n\t\t\t\t\t}\n\t\t\t\t\tif (isAttrsChanged) {\n\t\t\t\t\t\tattrsList = await fetchAttrsList({\n\t\t\t\t\t\t\tmodel: state.model.fullName,\n\t\t\t\t\t\t\tview: state.selectedView.name,\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t\tconst { changedTranslationList, deletedTranslationList } =\n\t\t\t\t\t\tgetChangedTranslationList(\n\t\t\t\t\t\t\tstate.translationList,\n\t\t\t\t\t\t\tstate.initialTranslationList,\n\t\t\t\t\t\t\tstate.removedTranslationList\n\t\t\t\t\t\t);\n\t\t\t\t\tlet translationList = [];\n\t\t\t\t\tlet isTranslationChanged = false;\n\t\t\t\t\tif (changedTranslationList.length) {\n\t\t\t\t\t\tisTranslationChanged = true;\n\t\t\t\t\t\tawait saveTranslationList(changedTranslationList);\n\t\t\t\t\t}\n\t\t\t\t\tif (deletedTranslationList.length) {\n\t\t\t\t\t\tisTranslationChanged = true;\n\t\t\t\t\t\tawait deleteTranslationList(deletedTranslationList);\n\t\t\t\t\t}\n\t\t\t\t\tif (isTranslationChanged) {\n\t\t\t\t\t\tconst translationNames = Object.values(state.widgets)\n\t\t\t\t\t\t\t.filter(\n\t\t\t\t\t\t\t\t(widget) => widget.title && widget.title.startsWith(\"studio:\")\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t.map((widget) => widget.title);\n\t\t\t\t\t\ttranslationList = await getTranslationList(translationNames);\n\t\t\t\t\t\tupdate((draft) => {\n\t\t\t\t\t\t\tdraft.translationList = translationList;\n\t\t\t\t\t\t\tdraft.initialTranslationList = translationList;\n\t\t\t\t\t\t\tdraft.removedTranslationList = [];\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t\tif (!extension.length && !state.extensionXML) {\n\t\t\t\t\t\tif (state.extensionView) {\n\t\t\t\t\t\t\tremoveView();\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tupdate((draft) => {\n\t\t\t\t\t\t\t\tdraft.loader = false;\n\t\t\t\t\t\t\t\tconst views = draft.view;\n\t\t\t\t\t\t\t\tif (isAttrsChanged) {\n\t\t\t\t\t\t\t\t\tconst schema = Utils.generateXMLToViewSchema({\n\t\t\t\t\t\t\t\t\t\tview: views.view,\n\t\t\t\t\t\t\t\t\t\tfields: draft.metaFieldStore,\n\t\t\t\t\t\t\t\t\t\textensionXML: views.extensionXML,\n\t\t\t\t\t\t\t\t\t\tattrsList,\n\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t\tdraft.widgets = schema.widgets;\n\t\t\t\t\t\t\t\t\tdraft.initialWidgets = schema.widgets;\n\t\t\t\t\t\t\t\t\tdraft.items = schema.items;\n\t\t\t\t\t\t\t\t\tdraft.initialItems = schema.items;\n\t\t\t\t\t\t\t\t\tdraft.extensionMoves = [];\n\t\t\t\t\t\t\t\t\tdraft.attrsList = attrsList;\n\t\t\t\t\t\t\t\t\tgenerateXpath(draft);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t\tconst getExistingExtension = (json) => {\n\t\t\t\t\t\tif (!json) {\n\t\t\t\t\t\t\treturn [];\n\t\t\t\t\t\t}\n\t\t\t\t\t\tconst { elements } = json;\n\t\t\t\t\t\tif (elements[0] && elements[0].elements) {\n\t\t\t\t\t\t\treturn elements[0].elements;\n\t\t\t\t\t\t}\n\t\t\t\t\t};\n\t\t\t\t\tconst form = {\n\t\t\t\t\t\telements: [\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\ttype: \"element\",\n\t\t\t\t\t\t\t\tname: state.widgets[-1].type,\n\t\t\t\t\t\t\t\tattributes: {\n\t\t\t\t\t\t\t\t\tmodel,\n\t\t\t\t\t\t\t\t\tid: `studio-${view.name}`,\n\t\t\t\t\t\t\t\t\ttitle: state.widgets[-1].title,\n\t\t\t\t\t\t\t\t\tname: view.name,\n\t\t\t\t\t\t\t\t\textension: \"true\",\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\telements: [\n\t\t\t\t\t\t\t\t\t...getExistingExtension(state.extensionXML),\n\t\t\t\t\t\t\t\t\t...extension,\n\t\t\t\t\t\t\t\t],\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t],\n\t\t\t\t\t};\n\t\t\t\t\tconst xml = Utils.processXML(\n\t\t\t\t\t\tconvert.json2xml(form, {\n\t\t\t\t\t\t\tcompact: false,\n\t\t\t\t\t\t\tfullTagEmptyElement: false,\n\t\t\t\t\t\t})\n\t\t\t\t\t);\n\t\t\t\t\tlet data = {\n\t\t\t\t\t\txml,\n\t\t\t\t\t\textension: true,\n\t\t\t\t\t\ttype: state.widgets[-1].type,\n\t\t\t\t\t};\n\t\t\t\t\tif (state.extensionView) {\n\t\t\t\t\t\tdata = {\n\t\t\t\t\t\t\t...data,\n\t\t\t\t\t\t\tid: state.extensionView.id,\n\t\t\t\t\t\t\tversion: state.extensionView.version,\n\t\t\t\t\t\t};\n\t\t\t\t\t} else {\n\t\t\t\t\t\tdata = {\n\t\t\t\t\t\t\t...data,\n\t\t\t\t\t\t\tmodel,\n\t\t\t\t\t\t\tname: view.name,\n\t\t\t\t\t\t\ttitle: view.title,\n\t\t\t\t\t\t\txmlId: `studio-${view.name}`,\n\t\t\t\t\t\t};\n\t\t\t\t\t}\n\t\t\t\t\tif (state.extensionView) {\n\t\t\t\t\t\tif (state.extensionView.xml === data.xml) {\n\t\t\t\t\t\t\tupdate((draft) => {\n\t\t\t\t\t\t\t\tdraft.loader = false;\n\t\t\t\t\t\t\t\tif (isAttrsChanged) {\n\t\t\t\t\t\t\t\t\tupdate((draft) => {\n\t\t\t\t\t\t\t\t\t\tdraft.loader = false;\n\t\t\t\t\t\t\t\t\t\tconst views = draft.view;\n\t\t\t\t\t\t\t\t\t\tconst schema = Utils.generateXMLToViewSchema({\n\t\t\t\t\t\t\t\t\t\t\tview: views.view,\n\t\t\t\t\t\t\t\t\t\t\tfields: draft.metaFieldStore,\n\t\t\t\t\t\t\t\t\t\t\textensionXML: views.extensionXML,\n\t\t\t\t\t\t\t\t\t\t\tattrsList,\n\t\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t\t\tdraft.widgets = schema.widgets;\n\t\t\t\t\t\t\t\t\t\tdraft.initialWidgets = schema.widgets;\n\t\t\t\t\t\t\t\t\t\tdraft.items = schema.items;\n\t\t\t\t\t\t\t\t\t\tdraft.initialItems = schema.items;\n\t\t\t\t\t\t\t\t\t\tif (isAttrsChanged) {\n\t\t\t\t\t\t\t\t\t\t\tdraft.attrsList = attrsList;\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\tgenerateXpath(draft);\n\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tmetaViewService.save(data).then(async (res) => {\n\t\t\t\t\t\tif (res.status === -1) {\n\t\t\t\t\t\t\tconst dialog = {\n\t\t\t\t\t\t\t\tmessage: res.data.string,\n\t\t\t\t\t\t\t\ttype: \"alert\",\n\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\tupdate((draft) => {\n\t\t\t\t\t\t\t\tdraft.loader = false;\n\t\t\t\t\t\t\t\tdraft.dialog = dialog;\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t} else if (res.data && res.data[0]) {\n\t\t\t\t\t\t\tconst record = res.data[0];\n\t\t\t\t\t\t\tconst { view } = state.view;\n\t\t\t\t\t\t\tconst views = await fetchViews(view);\n\t\t\t\t\t\t\tupdate((draft) => {\n\t\t\t\t\t\t\t\tconst schema = Utils.generateXMLToViewSchema({\n\t\t\t\t\t\t\t\t\tview: views.view,\n\t\t\t\t\t\t\t\t\tfields: draft.metaFieldStore,\n\t\t\t\t\t\t\t\t\textensionXML: views.extensionXML,\n\t\t\t\t\t\t\t\t\tattrsList,\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\tdraft.widgets = schema.widgets;\n\t\t\t\t\t\t\t\tdraft.initialWidgets = schema.widgets;\n\t\t\t\t\t\t\t\tdraft.items = schema.items;\n\t\t\t\t\t\t\t\tdraft.initialItems = schema.items;\n\t\t\t\t\t\t\t\tdraft.exView = res.data[0];\n\t\t\t\t\t\t\t\tdraft.extensionMoves = [];\n\t\t\t\t\t\t\t\tdraft.loader = false;\n\t\t\t\t\t\t\t\tif (isAttrsChanged) {\n\t\t\t\t\t\t\t\t\tdraft.attrsList = attrsList;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tdraft.extensionView = {\n\t\t\t\t\t\t\t\t\t...draft.extensionView,\n\t\t\t\t\t\t\t\t\t...record,\n\t\t\t\t\t\t\t\t\tversion:\n\t\t\t\t\t\t\t\t\t\tviews.extensionXML.id === record.id\n\t\t\t\t\t\t\t\t\t\t\t? views.extensionXML.version\n\t\t\t\t\t\t\t\t\t\t\t: record.version,\n\t\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\t\tgenerateXpath(draft);\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}, [state, update, startLoader, isTabsPanelEmpty, removeView]);\n\n\tconst handleClose = React.useCallback(() => {\n\t\tupdate((draft) => {\n\t\t\tdraft.dialog = null;\n\t\t});\n\t}, [update]);\n\n\tconst handleNew = React.useCallback(() => {\n\t\tstartLoader();\n\t\treset((draft) => {\n\t\t\tclearHistory(draft);\n\t\t});\n\t}, [reset, startLoader, clearHistory]);\n\n\tReact.useEffect(() => {\n\t\treset((draft) => {\n\t\t\tdraft.modelType = MODEL_TYPE.CUSTOM;\n\t\t});\n\t}, [reset]);\n\n\tconst saveCustomFieldView = React.useCallback(async () => {\n\t\tif (\n\t\t\t(state.customFieldItems || state.removedCustomFields.length) &&\n\t\t\tstate.modelField?.name\n\t\t) {\n\t\t\tif (!isTabsPanelEmpty()) return;\n\t\t\tconst customWidgets = Object.fromEntries(\n\t\t\t\tObject.entries(state.customFieldWidgets).filter(\n\t\t\t\t\t([, value]) =>\n\t\t\t\t\t\t(value.type === ItemTypes.CONTAINER && value.items?.length > 0) ||\n\t\t\t\t\t\tisPanelTab(value) || //allowing empty panel tab\n\t\t\t\t\t\tvalue.type !== ItemTypes.CONTAINER ||\n\t\t\t\t\t\ttypeof value.id === \"number\"\n\t\t\t\t)\n\t\t\t);\n\t\t\tconst propertyValues = Object.values(customWidgets || {}) || [];\n\t\t\tconst uniqueValues = new Set(propertyValues.map((v) => v.name)) || [];\n\t\t\tif (\n\t\t\t\tuniqueValues.size <\n\t\t\t\t(\n\t\t\t\t\t(propertyValues &&\n\t\t\t\t\t\tpropertyValues.filter((f) => f.type !== \"customForm\")) ||\n\t\t\t\t\t[]\n\t\t\t\t).length\n\t\t\t) {\n\t\t\t\tconst dialog = {\n\t\t\t\t\tmessage: translate(\"Field name should be unique\"),\n\t\t\t\t\ttype: \"alert\",\n\t\t\t\t};\n\t\t\t\tupdate((draft) => {\n\t\t\t\t\tdraft.loader = false;\n\t\t\t\t\tdraft.dialog = dialog;\n\t\t\t\t});\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tstartLoader();\n\t\t\tconst extraProps = {\n\t\t\t\tmodelField: state.modelField.name,\n\t\t\t\tmodel: state.model.fullName,\n\t\t\t};\n\t\t\tconst { fields } = Utils.getCustomModelFields(\n\t\t\t\tstate.customFieldItems,\n\t\t\t\tcustomWidgets,\n\t\t\t\textraProps,\n\t\t\t\ttrue\n\t\t\t);\n\t\t\tif (fields.length || state.removedCustomFields.length) {\n\t\t\t\tconst all = fields.map((field) => customFieldService.save(field));\n\t\t\t\tconst res = await Promise.all(all);\n\t\t\t\tconst failedRes = res && res.find((r) => r.status === -1);\n\t\t\t\tif (failedRes && failedRes.data) {\n\t\t\t\t\tconst { title, message } = failedRes.data || {};\n\t\t\t\t\tlet errorMessage = message;\n\t\t\t\t\tif (\n\t\t\t\t\t\ttitle &&\n\t\t\t\t\t\ttitle.includes(translate(\"Unique constraint violation\"))\n\t\t\t\t\t) {\n\t\t\t\t\t\terrorMessage = translate(\"Field name should be unique\");\n\t\t\t\t\t}\n\t\t\t\t\tconst dialog = {\n\t\t\t\t\t\tmessage: errorMessage,\n\t\t\t\t\t\ttype: \"alert\",\n\t\t\t\t\t};\n\t\t\t\t\tupdate((draft) => {\n\t\t\t\t\t\tdraft.loader = false;\n\t\t\t\t\t\tdraft.dialog = dialog;\n\t\t\t\t\t});\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tif (state.removedCustomFields.length) {\n\t\t\t\t\tawait customFieldService.removeAll(state.removedCustomFields);\n\t\t\t\t}\n\t\t\t\tfetchCustomFields(state.modelField, state.model).then((res) => {\n\t\t\t\t\tconst { data = [] } = res;\n\t\t\t\t\tconst schema = generateCustomModelSchema(\n\t\t\t\t\t\tdata,\n\t\t\t\t\t\tundefined,\n\t\t\t\t\t\t\"\",\n\t\t\t\t\t\t\"customForm\"\n\t\t\t\t\t);\n\t\t\t\t\tupdate((draft) => {\n\t\t\t\t\t\tdraft.customFieldWidgets = schema.widgets;\n\t\t\t\t\t\tdraft.customFieldItems = schema.items;\n\t\t\t\t\t\tdraft.customFields = data;\n\t\t\t\t\t\tdraft.loader = false;\n\t\t\t\t\t\tdraft.removedCustomFields = [];\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\tcloseLoader();\n\t\t\t}\n\t\t}\n\t}, [update, closeLoader, state, startLoader, isTabsPanelEmpty]);\n\n\tconst handleConfirmationClose = React.useCallback(() => {\n\t\tsetDeleteConfirmationDialog(false);\n\t}, []);\n\n\tconst deleteView = React.useCallback(() => {\n\t\tsetDeleteConfirmationDialog(true);\n\t}, []);\n\n\tconst handleRemoveConfirmation = React.useCallback(() => {\n\t\thandleConfirmationClose();\n\t\tremoveView();\n\t}, [removeView, handleConfirmationClose]);\n\n\tfunction renderDialog() {\n\t\tconst { dialog } = state;\n\t\treturn (\n\t\t\tdialog && (\n\t\t\t\t<Dialog\n\t\t\t\t\topen={Boolean(translate(dialog.message))}\n\t\t\t\t\tclasses={{\n\t\t\t\t\t\tpaper: classes.paper,\n\t\t\t\t\t}}\n\t\t\t\t>\n\t\t\t\t\t<DialogTitle>{translate(dialog.title || \"Alert\")}</DialogTitle>\n\t\t\t\t\t<DialogContent>\n\t\t\t\t\t\t<div\n\t\t\t\t\t\t\tdangerouslySetInnerHTML={{ __html: translate(dialog.message) }}\n\t\t\t\t\t\t></div>\n\t\t\t\t\t</DialogContent>\n\t\t\t\t\t<DialogActions>\n\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\tonClick={handleClose}\n\t\t\t\t\t\t\tclassName={classes.button}\n\t\t\t\t\t\t\tcolor=\"primary\"\n\t\t\t\t\t\t\tautoFocus\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\tOK\n\t\t\t\t\t\t</Button>\n\t\t\t\t\t</DialogActions>\n\t\t\t\t</Dialog>\n\t\t\t)\n\t\t);\n\t}\n\n\treturn (\n\t\t<React.Fragment>\n\t\t\t{renderDialog()}\n\t\t\t<Toolbar\n\t\t\t\tupdate={update}\n\t\t\t\tsaveView={saveView}\n\t\t\t\tsaveCustomFieldView={saveCustomFieldView}\n\t\t\t\tremoveView={deleteView}\n\t\t\t\tmodel={state.model}\n\t\t\t\textensionView={state.extensionView}\n\t\t\t\tmodelType={state.modelType}\n\t\t\t\tonNew={handleNew}\n\t\t\t\tmodelField={state.modelField}\n\t\t\t\tcustomModel={state.customModel}\n\t\t\t\tselectedView={state.selectedView}\n\t\t\t\tstartLoader={startLoader}\n\t\t\t\terrorList={state.errorList}\n\t\t\t\tentityType={state.entityType}\n\t\t\t\tmetaFieldStore={state.metaFieldStore}\n\t\t\t\tundo={undo}\n\t\t\t\tredo={redo}\n\t\t\t\trefresh={refresh}\n\t\t\t\tpastLength={state.past.length}\n\t\t\t\tfutureLength={state.future.length}\n\t\t\t\tclearHistory={clearHistory}\n\t\t\t\treset={reset}\n\t\t\t\tshowAlert={showAlert}\n\t\t\t\tonSelect={onSelect}\n\t\t\t/>\n\t\t\t<DeleteConfirmation\n\t\t\t\topen={deleteConfirmationDialog}\n\t\t\t\tonClose={handleConfirmationClose}\n\t\t\t\tonOk={handleRemoveConfirmation}\n\t\t\t\tmessage=\"Are you sure? Do you want to delete it?\"\n\t\t\t/>\n\t\t</React.Fragment>\n\t);\n}\n\nexport default React.memo(ToolbarContainer);\n","import React, { useState, useEffect, useCallback } from \"react\";\nimport AutoComplete, {\n\tcreateFilterOptions,\n} from \"@material-ui/lab/Autocomplete\";\nimport _ from \"lodash\";\nimport { TextField, Typography } from \"@material-ui/core\";\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport AxelorService from \"../services/axelor.rest\";\nimport { camleCaseString, getDefaultGridFormName, translate } from \"../utils\";\nimport { useDebounceEffect } from \"./../common.func\";\nimport SearchView from \"./SearchView\";\nconst filter = createFilterOptions();\nconst useStyles = makeStyles({\n\tautoComplete: {\n\t\tbackgroundColor: \"#293846\",\n\t\tmarginTop: 15,\n\t\t\".modern-dark &\": {\n\t\t\tbackgroundColor: \"#323232\",\n\t\t},\n\t},\n\tlabel: {\n\t\tcolor: \"#e7eaec !important\",\n\t\tfontSize: 12,\n\t},\n\tpopperAutoComplete: {\n\t\t\"& ul, .MuiAutocomplete-noOptions\": {\n\t\t\tbackgroundColor: \"rgb(41, 56, 70) !important\",\n\t\t\t\".modern-dark &\": {\n\t\t\t\tbackgroundColor: \"#1b1b1b !important\",\n\t\t\t},\n\t\t},\n\t\t\"& li, .MuiAutocomplete-noOptions\": {\n\t\t\tcolor: \"#e7eaec !important\",\n\t\t\tbackgroundColor: \"rgb(41, 56, 70) !important\",\n\t\t\t\".modern-dark &\": {\n\t\t\t\tbackgroundColor: \"#1b1b1b !important\",\n\t\t\t},\n\t\t},\n\t\t\"& li:hover, .MuiAutocomplete-noOptions\": {\n\t\t\tcolor: \"#e7eaec !important\",\n\t\t\tbackgroundColor: \"#2f4050 !important\",\n\t\t\t\".modern-dark &\": {\n\t\t\t\tbackgroundColor: \"#323232 !important\",\n\t\t\t},\n\t\t},\n\t},\n\tinput: {\n\t\tcolor: \"#e7eaec\",\n\t\tfontSize: 13,\n\t},\n\troot: {\n\t\tcolor: \"#e7eaec\",\n\t},\n\terror: {\n\t\tcolor: \"red\",\n\t\tmarginBottom: 5,\n\t\tfontSize: 13,\n\t},\n\toption: {\n\t\tfontSize: 13,\n\t},\n\tdisabled: {\n\t\tcolor: \"#a3a3a3 !important\",\n\t\tfontSize: 12,\n\t},\n});\n\nexport default function SelectComponent(_props) {\n\tconst {\n\t\tname,\n\t\tref,\n\t\ttitle,\n\t\tvalueField = \"id\",\n\t\ttype,\n\t\tmultiple = false,\n\t\tcommaSeparated,\n\t\tdisplayField = \"name\",\n\t\tlimit = 10,\n\t\tdata: preData = [],\n\t\tisDisabled,\n\t\tneedsTargetModel,\n\t\tcanAddNew = false,\n\t\tgetOptionLabel,\n\t\tshouldFetchInStart = false,\n\t} = _props.field;\n\tconst { props, error } = _props;\n\tconst { propertyList, setPropertyList, onChange, editWidgetType, modelType } =\n\t\tprops;\n\tlet value = propertyList[name] || \"\";\n\tif (commaSeparated && type === \"select\") {\n\t\tconst values = value ? value.split(\",\") : [];\n\t\tvalue = values.map((val) => {\n\t\t\treturn { [valueField]: val };\n\t\t});\n\t}\n\tconst [data, setData] = useState([...preData]);\n\tconst [searchText, setsearchText] = useState(\"\");\n\tconst isMounted = React.useRef(true);\n\tconst [moreDialog, setMoreDialog] = useState(false);\n\tconst [offset, setOffset] = useState(0);\n\tconst [total, setTotal] = useState(0);\n\tconst [initialFetch, setInitialFetch] = useState(false);\n\tconst { targetModel } = propertyList;\n\tconst classes = useStyles();\n\tconst disabled = isDisabled\n\t\t? isDisabled(propertyList, editWidgetType, modelType)\n\t\t: false;\n\n\tconst handleInputChange = useCallback(\n\t\t(e, value, reason) => {\n\t\t\tif (reason !== \"reset\") {\n\t\t\t\tif (type === \"objectSelection\" && typeof value === \"object\") {\n\t\t\t\t\tsetsearchText(value[displayField]);\n\t\t\t\t} else {\n\t\t\t\t\tsetsearchText(value);\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\t[type, displayField]\n\t);\n\n\tconst getSelectValue = useCallback(\n\t\t(value = []) => {\n\t\t\tif (commaSeparated) {\n\t\t\t\treturn value ? value.map((e) => e.name).join(\",\") : \"\";\n\t\t\t}\n\t\t\treturn ref ? value[valueField] : value;\n\t\t},\n\t\t[valueField, commaSeparated, ref]\n\t);\n\n\tconst fetchOptions = useCallback(\n\t\t(searchText = \"\", offset = 0) => {\n\t\t\tconst criteria = [];\n\t\t\tif (searchText) {\n\t\t\t\tcriteria.push({\n\t\t\t\t\tfieldName: \"name\",\n\t\t\t\t\toperator: \"like\",\n\t\t\t\t\tvalue: searchText,\n\t\t\t\t});\n\t\t\t}\n\t\t\tif (\n\t\t\t\t(name === \"gridView\" || name === \"formView\") &&\n\t\t\t\tneedsTargetModel.includes(props.type)\n\t\t\t) {\n\t\t\t\tif (!targetModel) return;\n\t\t\t}\n\t\t\tif (name === \"gridView\") {\n\t\t\t\tneedsTargetModel.includes(props.type) &&\n\t\t\t\t\tcriteria.push({\n\t\t\t\t\t\tfieldName: \"model\",\n\t\t\t\t\t\toperator: \"=\",\n\t\t\t\t\t\tvalue: targetModel,\n\t\t\t\t\t});\n\t\t\t\tcriteria.push({ fieldName: \"type\", operator: \"=\", value: \"grid\" });\n\t\t\t}\n\t\t\tif (name === \"formView\") {\n\t\t\t\tneedsTargetModel.includes(props.type) &&\n\t\t\t\t\tcriteria.push({\n\t\t\t\t\t\tfieldName: \"model\",\n\t\t\t\t\t\toperator: \"=\",\n\t\t\t\t\t\tvalue: targetModel,\n\t\t\t\t\t});\n\t\t\t\tcriteria.push({ fieldName: \"type\", operator: \"=\", value: \"form\" });\n\t\t\t}\n\t\t\tconst data = {\n\t\t\t\tcriteria,\n\t\t\t\toperator: \"and\",\n\t\t\t};\n\t\t\tconst fields = [\n\t\t\t\t\"name\",\n\t\t\t\t\"fullName\",\n\t\t\t\tvalueField,\n\t\t\t\tdisplayField,\n\t\t\t\t\"parent\",\n\t\t\t].filter((e) => e);\n\t\t\tif (shouldFetchInStart && initialFetch) {\n\t\t\t\t// setData(data);\n\t\t\t} else {\n\t\t\t\treturn new AxelorService({ model: ref })\n\t\t\t\t\t.search({ fields, data, limit, offset })\n\t\t\t\t\t.then(({ data, total } = {}) => {\n\t\t\t\t\t\tsetInitialFetch(true);\n\t\t\t\t\t\tif (data && data.length) {\n\t\t\t\t\t\t\tif (isMounted.current) {\n\t\t\t\t\t\t\t\t!moreDialog &&\n\t\t\t\t\t\t\t\t\ttotal > limit &&\n\t\t\t\t\t\t\t\t\tdata.push({\n\t\t\t\t\t\t\t\t\t\tname: translate(\"Show more...\"),\n\t\t\t\t\t\t\t\t\t\tid: \"studio_show_More_View\",\n\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\tsetTotal(total);\n\t\t\t\t\t\t\t\tconst uniqueData = _.uniqBy(data, displayField);\n\t\t\t\t\t\t\t\tsetData(uniqueData);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t}\n\t\t},\n\t\t[\n\t\t\tname,\n\t\t\tref,\n\t\t\ttargetModel,\n\t\t\tvalueField,\n\t\t\tdisplayField,\n\t\t\tlimit,\n\t\t\tneedsTargetModel,\n\t\t\tprops.type,\n\t\t\tmoreDialog,\n\t\t\tinitialFetch,\n\t\t\tshouldFetchInStart,\n\t\t]\n\t);\n\n\tconst optionDebounceHandler = React.useCallback(() => {\n\t\tref && fetchOptions(searchText);\n\t}, [fetchOptions, searchText, ref]);\n\n\tconst getValue = (value) => {\n\t\treturn typeof value === \"string\" && ref ? { [valueField]: value } : value;\n\t};\n\n\tconst getInputAsOption = React.useCallback(\n\t\t(value) => {\n\t\t\tif (value && typeof value === \"string\" && ref) {\n\t\t\t\tvalue = { [valueField]: value };\n\t\t\t}\n\t\t\treturn value;\n\t\t},\n\t\t[ref, valueField]\n\t);\n\n\tconst handleSearch = React.useCallback((value) => {\n\t\tsetsearchText(value);\n\t\tsetOffset(0);\n\t}, []);\n\n\tconst handleNext = React.useCallback(() => {\n\t\tconst newOffset = offset + limit;\n\t\tif (newOffset <= total) {\n\t\t\tsetOffset(newOffset);\n\t\t\tfetchOptions(searchText, newOffset);\n\t\t}\n\t}, [limit, total, offset, fetchOptions, searchText]);\n\n\tconst handlePrevious = React.useCallback(() => {\n\t\tlet newOffset = offset - limit;\n\t\tnewOffset = newOffset > 0 ? newOffset : 0;\n\t\tsetOffset(newOffset);\n\t\tfetchOptions(searchText, newOffset);\n\t}, [offset, limit, searchText, fetchOptions]);\n\n\tconst handleClose = React.useCallback(() => {\n\t\tsetMoreDialog(false);\n\t\tsetOffset(0);\n\t}, []);\n\n\tconst handleChange = React.useCallback(\n\t\t(e, _value) => {\n\t\t\tif (_value?.id === \"studio_show_More_View\") {\n\t\t\t\tsetMoreDialog(true);\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tif (multiple) {\n\t\t\t\thandleSearch(\"\");\n\t\t\t\tif (e.fromDialog) {\n\t\t\t\t\t_value = [...value, _value];\n\t\t\t\t} else {\n\t\t\t\t\tconst hasMoreView =\n\t\t\t\t\t\t_value.findIndex((v) => v?.id === \"studio_show_More_View\") !== -1;\n\t\t\t\t\tif (hasMoreView) {\n\t\t\t\t\t\tsetMoreDialog(true);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\t_value = _value\n\t\t\t\t\t.map((val) => {\n\t\t\t\t\t\tif (val?.id !== \"studio_show_More_View\") {\n\t\t\t\t\t\t\treturn getInputAsOption(val);\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn undefined;\n\t\t\t\t\t})\n\t\t\t\t\t.filter((e) => e);\n\t\t\t} else {\n\t\t\t\tif (_value && _value.inputValue && _value.inputValue.length && ref) {\n\t\t\t\t\t_value[valueField] = _value.inputValue;\n\t\t\t\t}\n\t\t\t}\n\t\t\tconst updatedValue = {\n\t\t\t\t...propertyList,\n\t\t\t\t[name]:\n\t\t\t\t\ttype === \"objectSelection\"\n\t\t\t\t\t\t? _value\n\t\t\t\t\t\t: _value && getSelectValue(_value),\n\t\t\t};\n\t\t\tlet payload = {};\n\t\t\tif (name === \"targetModel\") {\n\t\t\t\tconst { targetModel } = updatedValue || {};\n\t\t\t\tpayload = {\n\t\t\t\t\tgridView: _value ? getDefaultGridFormName(targetModel) : null,\n\t\t\t\t\tformView: _value ? getDefaultGridFormName(targetModel, true) : null,\n\t\t\t\t};\n\t\t\t}\n\t\t\tsetPropertyList({ ...(updatedValue || {}), ...payload });\n\t\t\tonChange(\n\t\t\t\t{ ...(updatedValue || {}), ...payload },\n\t\t\t\tname !== \"selection\" ? name : undefined\n\t\t\t);\n\t\t},\n\t\t[\n\t\t\tgetSelectValue,\n\t\t\tmultiple,\n\t\t\tname,\n\t\t\tonChange,\n\t\t\tsetPropertyList,\n\t\t\tpropertyList,\n\t\t\tvalue,\n\t\t\ttype,\n\t\t\tref,\n\t\t\tgetInputAsOption,\n\t\t\tvalueField,\n\t\t\thandleSearch,\n\t\t]\n\t);\n\n\tuseDebounceEffect(optionDebounceHandler, 500);\n\n\tuseEffect(() => {\n\t\tisMounted.current = true;\n\t\tfetchOptions();\n\t\treturn () => {\n\t\t\tisMounted.current = false;\n\t\t};\n\t}, [fetchOptions]);\n\n\tuseEffect(() => {\n\t\tif (!multiple) {\n\t\t\tif (typeof value === \"object\") {\n\t\t\t\tsetsearchText(value[displayField]);\n\t\t\t} else {\n\t\t\t\tsetsearchText(value);\n\t\t\t}\n\t\t}\n\t}, [multiple, value, displayField, type]);\n\treturn (\n\t\t<div style={{ display: \"flex\", flexDirection: \"column\", width: \"100%\" }}>\n\t\t\t<AutoComplete\n\t\t\t\tclasses={{\n\t\t\t\t\tinputFocused: disabled ? classes.disabled : classes.input,\n\t\t\t\t\tclearIndicator: classes.input,\n\t\t\t\t\tpopupIndicator: disabled ? classes.disabled : classes.input,\n\t\t\t\t\tpopper: classes.popperAutoComplete,\n\t\t\t\t\toption: classes.option,\n\t\t\t\t\tnoOptions: classes.option,\n\t\t\t\t}}\n\t\t\t\tclassName={classes.autoComplete}\n\t\t\t\tdisabled={disabled}\n\t\t\t\tmultiple={multiple}\n\t\t\t\toptions={data}\n\t\t\t\tforcePopupIcon={true}\n\t\t\t\tfreeSolo={type !== \"objectSelection\"}\n\t\t\t\tvalue={multiple ? value || [] : getValue(value)}\n\t\t\t\tinputValue={searchText || \"\"}\n\t\t\t\tsize=\"small\"\n\t\t\t\tonInputChange={handleInputChange}\n\t\t\t\t{...{\n\t\t\t\t\tfilterOptions: (options, params) => {\n\t\t\t\t\t\tconst filtered = filter(options, params);\n\t\t\t\t\t\t// Suggest the creation of a new value\n\t\t\t\t\t\tif (searchText !== \"\" && canAddNew) {\n\t\t\t\t\t\t\tfiltered.splice(0, 0, {\n\t\t\t\t\t\t\t\tinputValue: searchText,\n\t\t\t\t\t\t\t\tname: searchText,\n\t\t\t\t\t\t\t\ttitle: `Add \"${searchText}\"`,\n\t\t\t\t\t\t\t\ttype: \"canAddNew\",\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\t\t\t\t\t\tconst showMore = options.find(\n\t\t\t\t\t\t\t(o) => o.id === \"studio_show_More_View\"\n\t\t\t\t\t\t);\n\t\t\t\t\t\tif (\n\t\t\t\t\t\t\tshowMore &&\n\t\t\t\t\t\t\t![\"\", null, undefined].includes(params.inputValue)\n\t\t\t\t\t\t) {\n\t\t\t\t\t\t\tconst hasShowMore =\n\t\t\t\t\t\t\t\tfiltered.findIndex((o) => o.id === \"studio_show_More_View\") !==\n\t\t\t\t\t\t\t\t-1;\n\n\t\t\t\t\t\t\t!hasShowMore && filtered.push({ ...showMore });\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\treturn filtered;\n\t\t\t\t\t},\n\t\t\t\t}}\n\t\t\t\tonChange={handleChange}\n\t\t\t\trenderInput={(params) => (\n\t\t\t\t\t<TextField\n\t\t\t\t\t\t{...params}\n\t\t\t\t\t\tautoComplete=\"off\"\n\t\t\t\t\t\terror={Boolean(error)}\n\t\t\t\t\t\tvariant=\"outlined\"\n\t\t\t\t\t\tlabel={translate(camleCaseString(title || name))}\n\t\t\t\t\t\tInputLabelProps={{\n\t\t\t\t\t\t\tclassName: disabled ? classes.disabled : classes.label,\n\t\t\t\t\t\t}}\n\t\t\t\t\t/>\n\t\t\t\t)}\n\t\t\t\tgetOptionLabel={(option) => {\n\t\t\t\t\tif (getOptionLabel) {\n\t\t\t\t\t\treturn getOptionLabel(option, data);\n\t\t\t\t\t}\n\t\t\t\t\treturn option.type === \"canAddNew\"\n\t\t\t\t\t\t? option[\"title\"]\n\t\t\t\t\t\t: typeof option === \"string\"\n\t\t\t\t\t\t? option\n\t\t\t\t\t\t: option[displayField] || \"\";\n\t\t\t\t}}\n\t\t\t/>\n\t\t\t{error && <Typography className={classes.error}>{error}</Typography>}\n\t\t\t{moreDialog && (\n\t\t\t\t<SearchView\n\t\t\t\t\tsearchText={searchText}\n\t\t\t\t\tlist={data}\n\t\t\t\t\ttotal={total}\n\t\t\t\t\toffset={offset}\n\t\t\t\t\tdisplayField={displayField}\n\t\t\t\t\topen={moreDialog}\n\t\t\t\t\tonNext={handleNext}\n\t\t\t\t\tonPrevious={handlePrevious}\n\t\t\t\t\thandleClose={handleClose}\n\t\t\t\t\tsetSearchText={handleSearch}\n\t\t\t\t\ttitle={translate(camleCaseString(title || name))}\n\t\t\t\t\tonChange={(value) => handleChange({ fromDialog: true }, value)}\n\t\t\t\t/>\n\t\t\t)}\n\t\t</div>\n\t);\n}\n","import React from \"react\";\nimport { TextField, Typography } from \"@material-ui/core\";\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport { useStore } from \"../store/context\";\nconst useStyles = makeStyles({\n\tcontainer: {\n\t\tmarginBottom: 15,\n\t},\n\trow: {\n\t\tdisplay: \"flex\",\n\t},\n\tlanguageText: {\n\t\twidth: \"15%\",\n\t\tmarginTop: 8,\n\t\ttextTransform: \"capitalize\",\n\t\ttextAlign: \"center\",\n\t},\n});\n\nfunction TranslationGrid(props) {\n\tconst classes = useStyles();\n\tconst { state, update } = useStore();\n\tconst { keyValue, ...rest } = props;\n\tconst { translationList } = state;\n\tconst [translations, setTranslations] = React.useState([]);\n\n\tconst handleTranslationChange = React.useCallback(\n\t\t({ key, message, language }) => {\n\t\t\tsetTranslations((_translations) => {\n\t\t\t\tlet newList = [..._translations];\n\t\t\t\tconst translationIndex = newList.findIndex(\n\t\t\t\t\t(e) => e.key === key && e.language === language\n\t\t\t\t);\n\n\t\t\t\tif (translationIndex !== -1) {\n\t\t\t\t\tnewList[translationIndex] = { ...newList[translationIndex], message };\n\t\t\t\t} else {\n\t\t\t\t\tnewList.push({ key, message, language });\n\t\t\t\t}\n\t\t\t\treturn [...newList];\n\t\t\t});\n\t\t},\n\t\t[]\n\t);\n\n\tconst handleTranslationUpdate = React.useCallback(\n\t\t({ key, message, language }) => {\n\t\t\tupdate((draft) => {\n\t\t\t\tconst translationIndex = draft.translationList.findIndex(\n\t\t\t\t\t(e) => e.key === key && e.language === language\n\t\t\t\t);\n\n\t\t\t\tif (translationIndex !== -1) {\n\t\t\t\t\tdraft.translationList[translationIndex].message = message;\n\t\t\t\t} else {\n\t\t\t\t\tdraft.translationList.push({ key, message, language });\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\t\t[update]\n\t);\n\n\tReact.useEffect(() => {\n\t\tsetTranslations([...translationList]);\n\t}, [translationList]);\n\n\treturn (\n\t\t<div className={classes.container}>\n\t\t\t{state.languageList.map((lang, i) => (\n\t\t\t\t<div key={i} className={classes.row}>\n\t\t\t\t\t<Typography classes={{ root: classes.languageText }}>\n\t\t\t\t\t\t{lang.value}\n\t\t\t\t\t</Typography>\n\t\t\t\t\t<TextField\n\t\t\t\t\t\tvariant=\"outlined\"\n\t\t\t\t\t\t{...rest}\n\t\t\t\t\t\tvalue={\n\t\t\t\t\t\t\ttranslations.find(\n\t\t\t\t\t\t\t\t(e) => e.key === keyValue && e.language === lang.value\n\t\t\t\t\t\t\t)?.message || \"\"\n\t\t\t\t\t\t}\n\t\t\t\t\t\tonChange={(e) =>\n\t\t\t\t\t\t\thandleTranslationChange({\n\t\t\t\t\t\t\t\tkey: keyValue,\n\t\t\t\t\t\t\t\tmessage: e.target.value,\n\t\t\t\t\t\t\t\tlanguage: lang.value,\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t}\n\t\t\t\t\t\tonBlur={(e) =>\n\t\t\t\t\t\t\te.target.value &&\n\t\t\t\t\t\t\thandleTranslationUpdate({\n\t\t\t\t\t\t\t\tkey: keyValue,\n\t\t\t\t\t\t\t\tmessage: e.target.value,\n\t\t\t\t\t\t\t\tlanguage: lang.value,\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t}\n\t\t\t\t\t/>\n\t\t\t\t</div>\n\t\t\t))}\n\t\t</div>\n\t);\n}\n\nexport default TranslationGrid;\n","import React from \"react\";\nimport TextField from \"@material-ui/core/TextField\";\nimport AutoComplete from \"@material-ui/lab/Autocomplete\";\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport { camleCaseString, translate, getProperty } from \"../../utils\";\nimport { typeReplacer } from \"../../constants\";\n\nconst useStyles = makeStyles({\n\tselection: {\n\t\tcolor: \"#ffffff\",\n\t\tbackgroundColor: \"#293846\",\n\t\t\".modern-dark &\": {\n\t\t\tbackgroundColor: \"#323232\",\n\t\t},\n\t},\n\tautoComplete: {\n\t\twidth: \"100%\",\n\t\tmarginTop: 15,\n\t\tbackgroundColor: \"#293846\",\n\t\t\"& > div > label\": {\n\t\t\tcolor: \"#ffffff !important\",\n\t\t\tfontSize: 13,\n\t\t},\n\t\t\".modern-dark &\": {\n\t\t\tbackgroundColor: \"#323232\",\n\t\t},\n\t},\n\tautoCompleteInput: {\n\t\tcolor: \"#ffffff\",\n\t\tfontSize: 13,\n\t},\n\tautoCompleteOption: {\n\t\tfontSize: 13,\n\t\t\"& ul, .MuiAutocomplete-noOptions\": {\n\t\t\tbackgroundColor: \"rgb(41, 56, 70) !important\",\n\t\t\t\".modern-dark &\": {\n\t\t\t\tbackgroundColor: \"#1b1b1b !important\",\n\t\t\t},\n\t\t},\n\t\t\"& li, .MuiAutocomplete-noOptions\": {\n\t\t\tcolor: \"#ffffff !important\",\n\t\t\tbackgroundColor: \"rgb(41, 56, 70) !important\",\n\t\t\t\".modern-dark &\": {\n\t\t\t\tbackgroundColor: \"#1b1b1b !important\",\n\t\t\t},\n\t\t},\n\t\t\"& li:hover, .MuiAutocomplete-noOptions\": {\n\t\t\tcolor: \"#ffffff !important\",\n\t\t\tbackgroundColor: \"#2f4050 !important\",\n\t\t\t\".modern-dark &\": {\n\t\t\t\tbackgroundColor: \"#323232 !important\",\n\t\t\t},\n\t\t},\n\t},\n\n\tdisabled: {\n\t\tcolor: \"#a3a3a3 !important\",\n\t\tfontSize: 12,\n\t},\n});\n\nexport default function StaticSelection(_props) {\n\tconst { index } = _props;\n\tlet {\n\t\tname,\n\t\trequired,\n\t\tdata,\n\t\thelper,\n\t\ttitle,\n\t\tcolor,\n\t\tdisableClearable = false,\n\t\tparentField,\n\t\tparentPanel,\n\t\tgetOptionLabel,\n\t\t...rest\n\t} = _props.field;\n\tconst { props } = _props;\n\tconst {\n\t\tpropertyList,\n\t\tsetPropertyList,\n\t\ttype,\n\t\tonChange,\n\t\tmodelType,\n\t\tmetaFieldStore,\n\t\teditWidgetType,\n\t} = props || {};\n\tconst classes = useStyles();\n\n\tif (typeof data === \"object\" && !Array.isArray(data)) {\n\t\tdata = data[(typeReplacer[type] || type).toLowerCase()] || [];\n\t}\n\ttitle = translate(camleCaseString(title || name));\n\n\tconst ColorTag = ({ color }) => (\n\t\t<div style={{ width: 15, height: 15, backgroundColor: color }}></div>\n\t);\n\tlet value = propertyList[name] || \"\";\n\tif (\n\t\t(modelType === rest.modelType || props.editWidgetType === \"customField\") &&\n\t\tparentField\n\t) {\n\t\tconst field = propertyList[parentField]\n\t\t\t? JSON.parse(propertyList[parentField])\n\t\t\t: {};\n\t\tvalue = field[name] || \"\";\n\t}\n\tlet disabled = false;\n\tif (rest.isDisabled) {\n\t\tdisabled = rest.isDisabled({\n\t\t\tproperties: propertyList,\n\t\t\tmetaFieldStore,\n\t\t\teditWidgetType,\n\t\t\tmodelType,\n\t\t});\n\t}\n\treturn (\n\t\t<AutoComplete\n\t\t\toptions={data}\n\t\t\tclasses={{\n\t\t\t\troot: classes.selection,\n\t\t\t\tinputFocused: disabled ? classes.disabled : classes.autoCompleteInput,\n\t\t\t\tclearIndicator: classes.autoCompleteInput,\n\t\t\t\tpopupIndicator: disabled ? classes.disabled : classes.autoCompleteInput,\n\t\t\t\toption: classes.autoCompleteOption,\n\t\t\t\tgroupLabel: classes.autoCompleteOption,\n\t\t\t\tpopper: classes.autoCompleteOption,\n\t\t\t\tnoOptions: classes.autoCompleteOption,\n\t\t\t}}\n\t\t\tdisableClearable={disableClearable}\n\t\t\tsize=\"small\"\n\t\t\tclassName={classes.autoComplete}\n\t\t\tautoHighlight\n\t\t\tdisabled={disabled}\n\t\t\tonChange={(e, _value) => {\n\t\t\t\tconst value = {\n\t\t\t\t\t...propertyList,\n\t\t\t\t\t...getProperty(\n\t\t\t\t\t\tname,\n\t\t\t\t\t\t_value,\n\t\t\t\t\t\tparentField,\n\t\t\t\t\t\tpropertyList[parentField],\n\t\t\t\t\t\tmodelType === rest.modelType ||\n\t\t\t\t\t\t\tprops.editWidgetType === \"customField\"\n\t\t\t\t\t),\n\t\t\t\t};\n\t\t\t\tif (name === \"colSpan\") {\n\t\t\t\t\tvalue.colSpan = _value;\n\t\t\t\t}\n\t\t\t\tsetPropertyList(value);\n\t\t\t\tonChange(value, name);\n\t\t\t}}\n\t\t\tgetOptionLabel={(option) =>\n\t\t\t\tgetOptionLabel\n\t\t\t\t\t? getOptionLabel(option)\n\t\t\t\t\t: typeof option === \"object\"\n\t\t\t\t\t? option.text\n\t\t\t\t\t: option\n\t\t\t}\n\t\t\trenderOption={(option) =>\n\t\t\t\ttypeof option === \"object\" ? (\n\t\t\t\t\t<div key={index} value={option.value}>\n\t\t\t\t\t\t<i className={`fa ${option}`} style={{ marginRight: 4 }} />\n\t\t\t\t\t\t{translate(option.text)}\n\t\t\t\t\t</div>\n\t\t\t\t) : (\n\t\t\t\t\t<div key={index} value={option}>\n\t\t\t\t\t\t{color && <ColorTag color={option} />}\n\t\t\t\t\t\t<i className={`fa ${option}`} style={{ marginRight: 4 }} />\n\t\t\t\t\t\t<span>{translate(option)}</span>\n\t\t\t\t\t</div>\n\t\t\t\t)\n\t\t\t}\n\t\t\tvalue={value}\n\t\t\trenderInput={(params) => (\n\t\t\t\t<TextField\n\t\t\t\t\t{...params}\n\t\t\t\t\tlabel={translate(camleCaseString(title || name))}\n\t\t\t\t\tvariant=\"outlined\"\n\t\t\t\t\tclasses={{\n\t\t\t\t\t\troot: classes.selection,\n\t\t\t\t\t}}\n\t\t\t\t\tautoComplete=\"off\"\n\t\t\t\t\tinputProps={{\n\t\t\t\t\t\t...params.inputProps,\n\t\t\t\t\t\tautoComplete: \"new-password\", // disable autocomplete and autofill\n\t\t\t\t\t}}\n\t\t\t\t/>\n\t\t\t)}\n\t\t/>\n\t);\n}\n","import React, { useEffect, useState } from \"react\";\nimport classnames from \"classnames\";\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport { TextField, Chip } from \"@material-ui/core\";\nimport Autocomplete from \"@material-ui/lab/Autocomplete\";\n\nconst useStyles = makeStyles(() => ({\n\tselect: {\n\t\twidth: \"100%\",\n\t\tbackground: \"white\",\n\t},\n\tinput: {\n\t\tfontSize: 13,\n\t},\n}));\n\nexport default function StaticSelect({\n\tvalue,\n\tonChange,\n\toptions = [],\n\tselectClassName,\n\tclassName,\n\toptionLabel,\n\toptionValue,\n\tname,\n\ttitle,\n}) {\n\tconst classes = useStyles();\n\tconst [val, setVal] = useState(value[optionValue] || value || \"\");\n\n\tconst onSelectUpdate = (e, value) => {\n\t\tonChange(value, e);\n\t\tsetVal(value);\n\t};\n\n\tconst renderChip = (value) => {\n\t\tlet option = options.find((option) => option[optionValue] === value);\n\t\tif (!option) return <React.Fragment>{value}</React.Fragment>;\n\t\treturn (\n\t\t\t<Chip\n\t\t\t\tlabel={option[optionLabel]}\n\t\t\t\tsize=\"small\"\n\t\t\t\tstyle={{\n\t\t\t\t\tbackground: option && option.color,\n\t\t\t\t\tcolor: (option && option.border) || \"white\",\n\t\t\t\t}}\n\t\t\t/>\n\t\t);\n\t};\n\n\tuseEffect(() => {\n\t\tif (optionValue) {\n\t\t\tsetVal(value[optionValue]);\n\t\t} else {\n\t\t\tsetVal(value);\n\t\t}\n\t}, [optionValue, value]);\n\n\treturn (\n\t\t<Autocomplete\n\t\t\tclassName={classnames(classes.select, className)}\n\t\t\tvalue={val || \"\"}\n\t\t\tonChange={onSelectUpdate}\n\t\t\trenderValue={renderChip}\n\t\t\tclasses={{\n\t\t\t\tselect: selectClassName,\n\t\t\t\tinput: classes.input\n\t\t\t}}\n\t\t\toptions={options}\n\t\t\tgetOptionLabel={(option) =>\n\t\t\t\ttypeof option === \"object\" ? option[optionValue] : option\n\t\t\t}\n\t\t\tlabel={title}\n\t\t\trenderOption={(option) => {\n\t\t\t\treturn !optionValue && option ? (\n\t\t\t\t\t<div>\n\t\t\t\t\t\t{name === \"icon\" && (\n\t\t\t\t\t\t\t<i className={`fa ${option}`} style={{ marginRight: 4 }} />\n\t\t\t\t\t\t)}\n\t\t\t\t\t\t{option}\n\t\t\t\t\t</div>\n\t\t\t\t) : (\n\t\t\t\t\t<div>\n\t\t\t\t\t\t<Chip\n\t\t\t\t\t\t\tkey={option[optionValue]}\n\t\t\t\t\t\t\tlabel={option[optionLabel]}\n\t\t\t\t\t\t\tsize=\"small\"\n\t\t\t\t\t\t\tstyle={{\n\t\t\t\t\t\t\t\tbackground: option && option.color,\n\t\t\t\t\t\t\t\tcolor: (option && option.border) || \"white\",\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</div>\n\t\t\t\t);\n\t\t\t}}\n\t\t\trenderInput={(params) => (\n\t\t\t\t<TextField\n\t\t\t\t\t{...params}\n\t\t\t\t\tlabel={title}\n\t\t\t\t\tautoComplete=\"off\"\n\t\t\t\t/>\n\t\t\t)}\n\t\t/>\n\t);\n}\n\nStaticSelect.defaultProps = {\n\tvalue: {},\n\tonChange: () => {},\n};\n","import React, { useImperativeHandle, useRef } from \"react\";\nimport Chip from \"@material-ui/core/Chip\";\nimport IconButton from \"@material-ui/core/IconButton\";\nimport clsx from \"clsx\";\nimport { DragSource, DropTarget } from \"react-dnd\";\nimport { makeStyles } from \"@material-ui/core/styles\";\n\nimport TextField from \"@material-ui/core/TextField\";\nimport Select from \"./Select\";\nimport fontAwesomeList from \"../fa-icons\";\n\nconst ItemTypes = {\n\tCARD: \"card\",\n};\n\nexport const WKF_COLORS = [\n\t{ name: \"red\", title: \"Red\", color: \"#f44336\", border: \"#fff\" },\n\t{ name: \"pink\", title: \"Pink\", color: \"#e91e63\", border: \"#fff\" },\n\t{ name: \"purple\", title: \"Purple\", color: \"#9c27b0\", border: \"#fff\" },\n\t{\n\t\tname: \"deeppurple\",\n\t\ttitle: \"Deep Purple\",\n\t\tcolor: \"#673ab7\",\n\t\tborder: \"#fff\",\n\t},\n\t{ name: \"indigo\", title: \"Indigo\", color: \"#3f51b5\", border: \"#fff\" },\n\t{ name: \"blue\", title: \"Blue\", color: \"#2196f3\", border: \"#fff\" },\n\t{ name: \"lightblue\", title: \"Light Blue\", color: \"#03a9f4\", border: \"#fff\" },\n\t{ name: \"cyan\", title: \"Cyan\", color: \"#00bcd4\", border: \"#fff\" },\n\t{ name: \"teal\", title: \"Teal\", color: \"#009688\", border: \"#fff\" },\n\t{ name: \"green\", title: \"Green\", color: \"#4caf50\", border: \"#fff\" },\n\t{\n\t\tname: \"lightgreen\",\n\t\ttitle: \"Light Green\",\n\t\tcolor: \"#8bc34a\",\n\t\tborder: \"black\",\n\t},\n\t{ name: \"lime\", title: \"Lime\", color: \"#cddc39\", border: \"black\" },\n\t{ name: \"yellow\", title: \"Yellow\", color: \"#ffeb3b\", border: \"black\" },\n\t{ name: \"amber\", title: \"Amber\", color: \"#ffc107\", border: \"black\" },\n\t{ name: \"orange\", title: \"Orange\", color: \"#ff9800\", border: \"black\" },\n\t{\n\t\tname: \"deeporange\",\n\t\ttitle: \"Deep Orange\",\n\t\tcolor: \"#ff5722\",\n\t\tborder: \"#fff\",\n\t},\n\t{ name: \"brown\", title: \"Brown\", color: \"#795548\", border: \"#fff\" },\n\t{ name: \"grey\", title: \"Grey\", color: \"#9e9e9e\", border: \"black\" },\n\t{ name: \"bluegrey\", title: \"Blue Grey\", color: \"#607d8b\", border: \"#fff\" },\n\t{ name: \"black\", title: \"Black\", color: \"black\", border: \"#fff\" },\n\t{ name: \"white\", title: \"White\", color: \"whitesmoke\", border: \"black\" },\n];\n\nconst useStyles = makeStyles(() => ({\n\tcrudIcon: {\n\t\theight: \"1.5em\",\n\t\twidth: \"1.5em\",\n\t\tfontSize: 16,\n\t\tcursor: \"pointer\",\n\t\tcolor: \"#000\",\n\t\tdisplay: \"flex\",\n\t\talignItems: \"center\",\n\t\tjustifyContent: \"center\",\n\t},\n\ttextField: {\n\t\tfontSize: 13,\n\t},\n}));\n\nconst Content = React.forwardRef(\n\t(\n\t\t{\n\t\t\trow = {},\n\t\t\tindex,\n\t\t\tconnectDragSource,\n\t\t\tconnectDropTarget,\n\t\t\thandleRow,\n\t\t\tdeleteRow,\n\t\t\thandleChange,\n\t\t\tupdateSelection,\n\t\t\taddRow,\n\t\t\trowsCount,\n\t\t},\n\t\tref\n\t) => {\n\t\tconst elementRef = useRef(null);\n\t\tconnectDragSource(elementRef);\n\t\tconnectDropTarget(elementRef);\n\n\t\tuseImperativeHandle(ref, () => ({\n\t\t\tgetNode: () => elementRef.current,\n\t\t}));\n\n\t\tconst classes = useStyles();\n\t\treturn (\n\t\t\t<tr\n\t\t\t\tstyle={{ display: \"flex\", alignItems: \"center\" }}\n\t\t\t\tkey={row.id || index}\n\t\t\t\tref={elementRef}\n\t\t\t\tonKeyDown={(e) => {\n\t\t\t\t\tif (e.key === \"Enter\" && rowsCount - 1 === index) {\n\t\t\t\t\t\thandleRow(rowsCount-1)\n\t\t\t\t\t\taddRow();\n\t\t\t\t\t}\n\t\t\t\t}}\n\t\t\t>\n\t\t\t\t<td\n\t\t\t\t\tclassName=\"one-to-many-col one-to-many-col-border\"\n\t\t\t\t\tstyle={{ maxWidth: \"4%\", display: 'flex', justifyContent: \"center\" }}\n\t\t\t\t>\n\t\t\t\t\t<IconButton\n\t\t\t\t\t\tonClick={() => handleRow(row.id)}\n\t\t\t\t\t\taria-label=\"add\"\n\t\t\t\t\t\tsize=\"small\"\n\t\t\t\t\t\tclassName={classes.iconButton}\n\t\t\t\t\t\tdisabled={!updateSelection}\n\t\t\t\t\t>\n\t\t\t\t\t\t<i\n\t\t\t\t\t\t\tclassName={clsx(\"fa fa-pencil\", classes.crudIcon)}\n\t\t\t\t\t\t\tstyle={{\n\t\t\t\t\t\t\t\tcolor: updateSelection ? \"black\" : \"rgba(0, 0, 0, 0.26)\",\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</IconButton>\n\t\t\t\t</td>\n\t\t\t\t<td\n\t\t\t\t\tclassName=\"one-to-many-col one-to-many-col-border\"\n\t\t\t\t\tstyle={{\n\t\t\t\t\t\tmaxWidth: \"22%\",\n\t\t\t\t\t\toverflow: \"hidden\",\n\t\t\t\t\t\twhiteSpace: \"nowrap\",\n\t\t\t\t\t\ttextOverflow: \"ellipsis\",\n\t\t\t\t\t}}\n\t\t\t\t>\n\t\t\t\t\t{row.editable ? (\n\t\t\t\t\t\t<TextField\n\t\t\t\t\t\t\tvalue={row?.value || \"\"}\n\t\t\t\t\t\t\tname=\"value\"\n\t\t\t\t\t\t\tonChange={(e) => {\n\t\t\t\t\t\t\t\thandleChange(row.id, \"value\", e.target.value);\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\tstyle={{ width: \"100%\" }}\n\t\t\t\t\t\t\tInputProps={{\n\t\t\t\t\t\t\t\tclasses: { input: classes.textField },\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\tautoFocus={true}\n\t\t\t\t\t\t/>\n\t\t\t\t\t) : (\n\t\t\t\t\t\trow.value\n\t\t\t\t\t)}\n\t\t\t\t</td>\n\t\t\t\t<td\n\t\t\t\t\tclassName=\"one-to-many-col one-to-many-col-border\"\n\t\t\t\t\tstyle={{\n\t\t\t\t\t\tmaxWidth: \"22%\",\n\t\t\t\t\t\toverflow: \"hidden\",\n\t\t\t\t\t\twhiteSpace: \"nowrap\",\n\t\t\t\t\t\ttextOverflow: \"ellipsis\",\n\t\t\t\t\t}}\n\t\t\t\t>\n\t\t\t\t\t{row.editable ? (\n\t\t\t\t\t\t<TextField\n\t\t\t\t\t\t\tvalue={row?.title || \"\"}\n\t\t\t\t\t\t\tname=\"title\"\n\t\t\t\t\t\t\tonChange={(e) => {\n\t\t\t\t\t\t\t\thandleChange(row.id, \"title\", e.target.value);\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\tstyle={{ width: \"100%\" }}\n\t\t\t\t\t\t\tInputProps={{\n\t\t\t\t\t\t\t\tclasses: { input: classes.textField },\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t/>\n\t\t\t\t\t) : (\n\t\t\t\t\t\trow.title\n\t\t\t\t\t)}\n\t\t\t\t</td>\n\t\t\t\t<td\n\t\t\t\t\tclassName={\"one-to-many-col one-to-many-col-border\"}\n\t\t\t\t\tstyle={{ overflow: \"hidden\", maxWidth: \"22%\" }}\n\t\t\t\t>\n\t\t\t\t\t{row.editable ? (\n\t\t\t\t\t\t<Select\n\t\t\t\t\t\t\tname=\"color\"\n\t\t\t\t\t\t\tonChange={(value) => {\n\t\t\t\t\t\t\t\thandleChange(row.id, \"color\", value);\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\tvalue={row?.color || \"\"}\n\t\t\t\t\t\t\toptions={WKF_COLORS}\n\t\t\t\t\t\t\toptionLabel=\"title\"\n\t\t\t\t\t\t\toptionValue=\"name\"\n\t\t\t\t\t\t/>\n\t\t\t\t\t) : (\n\t\t\t\t\t\trow?.color && (\n\t\t\t\t\t\t\t<Chip\n\t\t\t\t\t\t\t\tlabel={row.color?.title}\n\t\t\t\t\t\t\t\tsize=\"small\"\n\t\t\t\t\t\t\t\tstyle={{\n\t\t\t\t\t\t\t\t\tbackground: row.color?.color,\n\t\t\t\t\t\t\t\t\tcolor: row.color?.border || \"white\",\n\t\t\t\t\t\t\t\t\tfontWeight: 800,\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t)\n\t\t\t\t\t)}\n\t\t\t\t</td>\n\t\t\t\t<td\n\t\t\t\t\tclassName=\"one-to-many-col one-to-many-col-border\"\n\t\t\t\t\tstyle={{\n\t\t\t\t\t\tmaxWidth: \"22%\",\n\t\t\t\t\t\toverflow: \"hidden\",\n\t\t\t\t\t\twhiteSpace: \"nowrap\",\n\t\t\t\t\t\ttextOverflow: \"ellipsis\",\n\t\t\t\t\t}}\n\t\t\t\t>\n\t\t\t\t\t{row.editable ? (\n\t\t\t\t\t\t<Select\n\t\t\t\t\t\t\tname=\"icon\"\n\t\t\t\t\t\t\tonChange={(value) => {\n\t\t\t\t\t\t\t\thandleChange(row.id, \"icon\", value);\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\tvalue={row?.icon || \"\"}\n\t\t\t\t\t\t\toptions={fontAwesomeList}\n\t\t\t\t\t\t/>\n\t\t\t\t\t) : (\n\t\t\t\t\t\trow.icon\n\t\t\t\t\t)}\n\t\t\t\t</td>\n\t\t\t\t<td\n\t\t\t\t\tclassName=\"one-to-many-col one-to-many-col-border\"\n\t\t\t\t\tstyle={{ maxWidth: \"4%\" }}\n\t\t\t\t>\n\t\t\t\t\t<IconButton\n\t\t\t\t\t\tonClick={() => deleteRow(row.id)}\n\t\t\t\t\t\taria-label=\"add\"\n\t\t\t\t\t\tsize=\"small\"\n\t\t\t\t\t\tclassName={classes.iconButton}\n\t\t\t\t\t\tdisabled={!updateSelection}\n\t\t\t\t\t>\n\t\t\t\t\t\t<i\n\t\t\t\t\t\t\tclassName={clsx(\"fa fa-trash-o\", classes.crudIcon)}\n\t\t\t\t\t\t\tstyle={{\n\t\t\t\t\t\t\t\tcolor: updateSelection ? \"black\" : \"rgba(0, 0, 0, 0.26)\",\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</IconButton>\n\t\t\t\t</td>\n\t\t\t\t<td\n\t\t\t\t\tclassName=\"one-to-many-col one-to-many-col-border\"\n\t\t\t\t\tstyle={{ maxWidth: \"4%\" }}\n\t\t\t\t>\n\t\t\t\t\t<IconButton\n\t\t\t\t\t\tonClick={() => handleRow(row.id)}\n\t\t\t\t\t\taria-label=\"add\"\n\t\t\t\t\t\tsize=\"small\"\n\t\t\t\t\t\tclassName={classes.iconButton}\n\t\t\t\t\t\tdisabled={!updateSelection}\n\t\t\t\t\t>\n\t\t\t\t\t\t<i\n\t\t\t\t\t\t\tclassName={clsx(\"fa fa-bars\", classes.crudIcon)}\n\t\t\t\t\t\t\tstyle={{\n\t\t\t\t\t\t\t\tcolor: updateSelection ? \"black\" : \"rgba(0, 0, 0, 0.26)\",\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</IconButton>\n\t\t\t\t</td>\n\t\t\t</tr>\n\t\t);\n\t}\n);\n\nexport default DropTarget(\n\tItemTypes.CARD,\n\t{\n\t\thover(props, monitor, component) {\n\t\t\tif (!component) {\n\t\t\t\treturn null;\n\t\t\t}\n\t\t\tconst node = component.getNode();\n\t\t\tif (!node) {\n\t\t\t\treturn null;\n\t\t\t}\n\t\t\tconst dragIndex = monitor.getItem().index;\n\t\t\tconst hoverIndex = props.index;\n\t\t\tif (dragIndex === hoverIndex) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tconst hoverBoundingRect = node.getBoundingClientRect();\n\t\t\tconst hoverMiddleY =\n\t\t\t\t(hoverBoundingRect.bottom - hoverBoundingRect.top) / 2;\n\t\t\tconst clientOffset = monitor.getClientOffset();\n\t\t\tconst hoverClientY = clientOffset.y - hoverBoundingRect.top;\n\n\t\t\tif (dragIndex < hoverIndex && hoverClientY < hoverMiddleY) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tif (dragIndex > hoverIndex && hoverClientY > hoverMiddleY) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tprops.moveCard(dragIndex, hoverIndex);\n\t\t\tmonitor.getItem().index = hoverIndex;\n\t\t},\n\t},\n\t(connect) => ({\n\t\tconnectDropTarget: connect.dropTarget(),\n\t})\n)(\n\tDragSource(\n\t\tItemTypes.CARD,\n\t\t{\n\t\t\tbeginDrag: (props) => ({\n\t\t\t\tid: props.id,\n\t\t\t\tindex: props.index,\n\t\t\t}),\n\t\t},\n\t\t(connect, monitor) => ({\n\t\t\tconnectDragSource: connect.dragSource(),\n\t\t\tisDragging: monitor.isDragging(),\n\t\t})\n\t)(Content)\n);\n","import React, { useState } from \"react\";\nimport Checkbox from \"@material-ui/core/Checkbox\";\nimport { makeStyles } from \"@material-ui/core\";\n\nimport {\n\tcamleCaseString,\n\ttranslate,\n\tgetProperty,\n\tgetPropertyValue,\n} from \"../../utils\";\nimport DialogConfirmation from \"../../Toolbar/DeleteConfirmation\";\n\nconst useStyles = makeStyles(() => ({\n\troot: {\n\t\tcolor: \"#0275d8 !important\",\n\t\t\"&$checked\": {\n\t\t\tcolor: \"#0275d8 !important\",\n\t\t},\n\t},\n}));\n\nexport default function CheckboxField(_props) {\n\tconst [openAlert, setAlertOpen] = useState(false);\n\tlet {\n\t\tname,\n\t\ttitle,\n\t\tparentField,\n\t\tdefaultValue,\n\t\tuncheckDialog,\n\t\talertMessage,\n\t\t...rest\n\t} = _props.field;\n\tconst { props, classNames, handleDialogOk } = _props;\n\tconst classes = useStyles();\n\tconst {\n\t\tpropertyList,\n\t\tsetPropertyList,\n\t\tonChange,\n\t\tmodelType,\n\t\teditWidgetType,\n\t\tmetaFieldStore,\n\t} = props;\n\tlet _value = getPropertyValue(\n\t\tpropertyList,\n\t\tname,\n\t\tparentField,\n\t\tdefaultValue,\n\t\t!(modelType !== rest.modelType) || editWidgetType === \"customField\"\n\t);\n\tlet fieldValue = Boolean(_value ? !(_value === \"false\") : _value);\n\tif (rest.getValue) {\n\t\tfieldValue = rest.getValue(propertyList);\n\t}\n\tlet disabled = false;\n\tif (rest.isDisabled) {\n\t\tdisabled = rest.isDisabled({\n\t\t\tproperties: propertyList,\n\t\t\tmetaFieldStore,\n\t\t\teditWidgetType,\n\t\t\tmodelType,\n\t\t});\n\t}\n\ttitle = translate(camleCaseString(title || name));\n\n\tconst handleOnChange = () => {\n\t\tif (uncheckDialog) {\n\t\t\tsetAlertOpen(false);\n\t\t}\n\t\tsetPropertyList({\n\t\t\t...propertyList,\n\t\t\t...(rest.change ? rest.change(!fieldValue, propertyList) : {}),\n\t\t\t...getProperty(\n\t\t\t\tname,\n\t\t\t\t!fieldValue,\n\t\t\t\tparentField,\n\t\t\t\tpropertyList[parentField],\n\t\t\t\t!(modelType !== rest.modelType) || editWidgetType === \"customField\"\n\t\t\t),\n\t\t});\n\t\tonChange(\n\t\t\t{\n\t\t\t\t...propertyList,\n\t\t\t\t...(rest.change ? rest.change(!fieldValue, propertyList) : {}),\n\t\t\t\t...getProperty(\n\t\t\t\t\tname,\n\t\t\t\t\t!fieldValue,\n\t\t\t\t\tparentField,\n\t\t\t\t\tpropertyList[parentField],\n\t\t\t\t\t!(modelType !== rest.modelType) || editWidgetType === \"customField\"\n\t\t\t\t),\n\t\t\t},\n\t\t\tname\n\t\t);\n\t\thandleDialogOk();\n\t};\n\n\treturn (\n\t\t<React.Fragment>\n\t\t\t<Checkbox\n\t\t\t\tclassName={classNames}\n\t\t\t\tchecked={fieldValue}\n\t\t\t\tdisabled={disabled}\n\t\t\t\tclasses={{\n\t\t\t\t\troot: classes.root,\n\t\t\t\t}}\n\t\t\t\tonChange={() => {\n\t\t\t\t\tif (\n\t\t\t\t\t\tuncheckDialog &&\n\t\t\t\t\t\tfieldValue &&\n\t\t\t\t\t\tpropertyList &&\n\t\t\t\t\t\tpropertyList.selectionText\n\t\t\t\t\t) {\n\t\t\t\t\t\tsetAlertOpen(true);\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t\thandleOnChange();\n\t\t\t\t}}\n\t\t\t\tvalue={propertyList[name]}\n\t\t\t/>\n\t\t\t{openAlert && (\n\t\t\t\t<DialogConfirmation\n\t\t\t\t\topen={openAlert}\n\t\t\t\t\tmessage={alertMessage}\n\t\t\t\t\tonClose={() => setAlertOpen(false)}\n\t\t\t\t\tonOk={handleOnChange}\n\t\t\t\t\ttitle=\"Confirm\"\n\t\t\t\t/>\n\t\t\t)}\n\t\t</React.Fragment>\n\t);\n}\n","import React, { useState, useEffect } from \"react\";\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport SelectComponent from \"../../components/SelectComponent\";\n\nimport { IconButton } from \"@material-ui/core\";\nimport clsx from \"clsx\";\nimport Button from \"@material-ui/core/Button\";\nimport Dialog from \"@material-ui/core/Dialog\";\nimport DialogTitle from \"@material-ui/core/DialogTitle\";\nimport DialogContent from \"@material-ui/core/DialogContent\";\nimport DialogActions from \"@material-ui/core/DialogActions\";\nimport DialogContentText from \"@material-ui/core/DialogContentText\";\nimport FormControlLabel from \"@material-ui/core/FormControlLabel\";\nimport _ from \"lodash\";\nimport CardContent from \"@material-ui/core/CardContent\";\nimport { useStore } from \"../../store/context\";\nimport { getSelectionText } from \"../../Toolbar/api\";\nimport { translate } from \"../../utils\";\nimport Content from \"./Content\";\nimport CheckboxField from \"./CheckboxField\";\nimport { MODEL_TYPE } from \"../../constants\";\n\nexport const WKF_COLORS = [\n\t{ name: \"red\", title: \"Red\", color: \"#f44336\", border: \"#fff\" },\n\t{ name: \"pink\", title: \"Pink\", color: \"#e91e63\", border: \"#fff\" },\n\t{ name: \"purple\", title: \"Purple\", color: \"#9c27b0\", border: \"#fff\" },\n\t{\n\t\tname: \"deeppurple\",\n\t\ttitle: \"Deep Purple\",\n\t\tcolor: \"#673ab7\",\n\t\tborder: \"#fff\",\n\t},\n\t{ name: \"indigo\", title: \"Indigo\", color: \"#3f51b5\", border: \"#fff\" },\n\t{ name: \"blue\", title: \"Blue\", color: \"#2196f3\", border: \"#fff\" },\n\t{ name: \"lightblue\", title: \"Light Blue\", color: \"#03a9f4\", border: \"#fff\" },\n\t{ name: \"cyan\", title: \"Cyan\", color: \"#00bcd4\", border: \"#fff\" },\n\t{ name: \"teal\", title: \"Teal\", color: \"#009688\", border: \"#fff\" },\n\t{ name: \"green\", title: \"Green\", color: \"#4caf50\", border: \"#fff\" },\n\t{\n\t\tname: \"lightgreen\",\n\t\ttitle: \"Light Green\",\n\t\tcolor: \"#8bc34a\",\n\t\tborder: \"black\",\n\t},\n\t{ name: \"lime\", title: \"Lime\", color: \"#cddc39\", border: \"black\" },\n\t{ name: \"yellow\", title: \"Yellow\", color: \"#ffeb3b\", border: \"black\" },\n\t{ name: \"amber\", title: \"Amber\", color: \"#ffc107\", border: \"black\" },\n\t{ name: \"orange\", title: \"Orange\", color: \"#ff9800\", border: \"black\" },\n\t{\n\t\tname: \"deeporange\",\n\t\ttitle: \"Deep Orange\",\n\t\tcolor: \"#ff5722\",\n\t\tborder: \"#fff\",\n\t},\n\t{ name: \"brown\", title: \"Brown\", color: \"#795548\", border: \"#fff\" },\n\t{ name: \"grey\", title: \"Grey\", color: \"#9e9e9e\", border: \"black\" },\n\t{ name: \"bluegrey\", title: \"Blue Grey\", color: \"#607d8b\", border: \"#fff\" },\n\t{ name: \"black\", title: \"Black\", color: \"black\", border: \"#fff\" },\n\t{ name: \"white\", title: \"White\", color: \"whitesmoke\", border: \"black\" },\n];\n\nconst useStyles = makeStyles(() => ({\n\tpaper: {\n\t\tminWidth: \"50%\",\n\t\twidth: \"50%\",\n\t\tmaxWidth: \"100%\",\n\t\tresize: \"auto\",\n\t},\n\talertPaper: {\n\t\tminWidth: 300,\n\t},\n\tcheckbox: {\n\t\tcolor: \"#0275d8 !important\",\n\t\t\"&$checked\": {\n\t\t\tcolor: \"#0275d8 !important\",\n\t\t},\n\t},\n\tbutton: {\n\t\ttextTransform: \"none\",\n\t\tbackgroundColor: \"#0275d8\",\n\t\tborderColor: \"#0275d8\",\n\t\tcolor: \"#fff\",\n\t\t\"&:hover\": {\n\t\t\tbackgroundColor: \"#0275d8\",\n\t\t\tborderColor: \"#0275d8\",\n\t\t\tcolor: \"#fff\",\n\t\t},\n\t},\n\tcrudIcon: {\n\t\theight: \"1.5em\",\n\t\twidth: \"1.5em\",\n\t\tfontSize: 16,\n\t\tcursor: \"pointer\",\n\t\tcolor: \"#fff\",\n\t\tdisplay: \"flex\",\n\t\talignItems: \"center\",\n\t\tjustifyContent: \"center\",\n\t},\n\tcontent: {\n\t\toverflow: \"auto\",\n\t\tpadding: \"0px 8px 16px 8px\",\n\t},\n\tdialogContent: {\n\t\tdisplay: \"flex\",\n\t\tflexDirection: \"column\",\n\t},\n\tok: {\n\t\tbackgroundColor: \"#0275d8\",\n\t\tborderColor: \"#0275d8\",\n\t\tcolor: \"#fff\",\n\t\t\"&:hover\": {\n\t\t\tbackgroundColor: \"#0275d8\",\n\t\t\tborderColor: \"#0275d8\",\n\t\t\tcolor: \"#fff\",\n\t\t},\n\t},\n\tbtn: {\n\t\ttextTransform: \"none\",\n\t},\n\tdialogActions: {\n\t\tpaddingBottom: 16,\n\t},\n\troot: {\n\t\tdisplay: \"flex\",\n\t\tjustifyContent: \"space-between\",\n\t\talignItems: \"flex-start\",\n\t},\n\ticonButton: {\n\t\tmarginTop: 25,\n\t\tpaddingLeft: 10,\n\t},\n\ticon: {\n\t\tcolor: \"white\",\n\t},\n\tlabel: {\n\t\tfontSize: 13,\n\t},\n}));\n\nexport default function SelectionWidget(_props) {\n\tconst { field, key, props, error } = _props;\n\tconst [rows, setRows] = useState([]);\n\tconst [openGrid, setOpenGrid] = useState(false);\n\tconst [openAlert, setAlertOpen] = useState(false);\n\tconst classes = useStyles();\n\tconst { propertyList, setPropertyList, onChange } = props;\n\tconst { state, update } = useStore();\n\tconst { editWidget } = state;\n\tconst { selection, selectionText, updateSelection, isSelectionField } =\n\t\tpropertyList;\n\n\tconst handleChange = (id, name, value) => {\n\t\tsetRows((rows) =>\n\t\t\trows.map((row) => (row.id === id ? { ...row, [name]: value } : row))\n\t\t);\n\t};\n\n\tconst updateWidget = (rows) => {\n\t\tlet selectionText = \"\";\n\t\tif (rows?.length <= 0) {\n\t\t\tselectionText = null;\n\t\t} else {\n\t\t\trows.forEach((row, i) => {\n\t\t\t\tif (row.title) {\n\t\t\t\t\tselectionText += `${i > 0 ? \"\\n\" : \"\"}${row.title}:${row.value}`;\n\t\t\t\t}\n\t\t\t\tif (row.color && row.color.name) {\n\t\t\t\t\tselectionText += \"\\ncolor:\" + row.color?.name;\n\t\t\t\t}\n\t\t\t\tif (row.icon) {\n\t\t\t\t\tselectionText += \"\\nicon:\" + row.icon;\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t\tsetPropertyList((propertyList) => ({\n\t\t\t...propertyList,\n\t\t\tselectionText,\n\t\t}));\n\t\tonChange(\n\t\t\t{\n\t\t\t\t...propertyList,\n\t\t\t\tselectionText,\n\t\t\t},\n\t\t\t\"selectionText\"\n\t\t);\n\t};\n\n\tconst addRow = () => {\n\t\tsetRows((rows) => {\n\t\t\treturn [\n\t\t\t\t...rows?.map((row) => {\n\t\t\t\t\treturn {\n\t\t\t\t\t\t...row,\n\t\t\t\t\t\teditable: false,\n\t\t\t\t\t};\n\t\t\t\t}),\n\t\t\t\t{\n\t\t\t\t\ttitle: \"\",\n\t\t\t\t\tvalue: \"\",\n\t\t\t\t\tcolor: null,\n\t\t\t\t\ticon: null,\n\t\t\t\t\tid: _.uniqueId(),\n\t\t\t\t\teditable: true,\n\t\t\t\t},\n\t\t\t];\n\t\t});\n\t};\n\n\tconst deleteRow = (id) => {\n\t\tsetRows((rows) => rows.filter((row) => row?.id !== id));\n\t};\n\n\tconst moveCard = React.useCallback(\n\t\t(dragIndex, hoverIndex) => {\n\t\t\tif (!updateSelection) return;\n\t\t\tif (dragIndex <= -1 || hoverIndex <= -1) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tconst cloneRows = [...(rows || [])];\n\t\t\tlet dragCard = cloneRows[dragIndex];\n\t\t\tcloneRows[dragIndex] = cloneRows[hoverIndex];\n\t\t\tcloneRows[hoverIndex] = dragCard;\n\t\t\tsetRows(cloneRows);\n\t\t},\n\t\t[rows, updateSelection]\n\t);\n\n\tconst handleRow = (id) => {\n\t\tsetRows((rows) =>\n\t\t\trows.map((row) =>\n\t\t\t\trow.id === id\n\t\t\t\t\t? { ...row, editable: !row.editable || false }\n\t\t\t\t\t: { ...row, editable: false }\n\t\t\t)\n\t\t);\n\t};\n\n\tconst saveRow = () => {\n\t\tsetRows((rows) =>\n\t\t\trows.map((row) => (row.editable ? { ...row, editable: false } : row))\n\t\t);\n\t};\n\n\tconst handleOk = () => {\n\t\tif (updateSelection && !rows.length) {\n\t\t\tsetAlertOpen(true);\n\t\t\treturn;\n\t\t}\n\t\tconst isError = rows.findIndex((r) => !r.title);\n\t\tif (isError > -1) {\n\t\t\tsetAlertOpen(true);\n\t\t\treturn;\n\t\t}\n\t\tupdateWidget(rows);\n\t\tsetOpenGrid(false);\n\t\tvalidateErrors();\n\t};\n\n\tconst handleDialogOk = () => {\n\t\tif (!selection && !updateSelection) {\n\t\t\tsetRows([]);\n\t\t}\n\t};\n\n\tconst createRows = React.useCallback((selectionText) => {\n\t\tconst selection = selectionText?.trim().split(\"\\n\");\n\t\tlet rows = [];\n\t\tfor (let i = 0; i < selection?.length; i++) {\n\t\t\tconst option = selection[i];\n\t\t\tconst optionKeyValue = option.split(\":\");\n\t\t\tconst title = optionKeyValue[0];\n\t\t\tconst titleLower = title?.toLowerCase();\n\t\t\tlet value = optionKeyValue[1];\n\t\t\tif (titleLower && titleLower !== \"color\" && titleLower !== \"icon\") {\n\t\t\t\trows.push({\n\t\t\t\t\tid: _.uniqueId(),\n\t\t\t\t\ttitle: title,\n\t\t\t\t\tvalue: value || title,\n\t\t\t\t});\n\t\t\t} else if (titleLower === \"color\" || titleLower === \"icon\") {\n\t\t\t\tlet row = rows.pop();\n\t\t\t\tvalue =\n\t\t\t\t\ttitle === \"color\" ? WKF_COLORS.find((f) => f.name === value) : value;\n\t\t\t\trow = { ...row, [title]: value };\n\t\t\t\trows.push(row);\n\t\t\t}\n\t\t}\n\t\tsetRows(rows);\n\t}, []);\n\n\tconst addOptions = async () => {\n\t\tsetOpenGrid(true);\n\t\tif (!updateSelection && selection) {\n\t\t\tconst res = await getSelectionText({ name: selection });\n\t\t\tcreateRows(res);\n\t\t} else if (selectionText) {\n\t\t\tcreateRows(selectionText);\n\t\t} else {\n\t\t\tsetRows([]);\n\t\t}\n\t};\n\n\tconst validateErrors = React.useCallback(() => {\n\t\tif (!selectionText && !selection && editWidget && isSelectionField) {\n\t\t\tupdate((draft) => {\n\t\t\t\tdraft.errorList[editWidget] = {\n\t\t\t\t\tselection: \"Selection or selection options are required\",\n\t\t\t\t};\n\t\t\t});\n\t\t} else {\n\t\t\tupdate((draft) => {\n\t\t\t\tdelete draft.errorList[editWidget];\n\t\t\t});\n\t\t}\n\t}, [selection, editWidget, selectionText, isSelectionField, update]);\n\n\tuseEffect(() => {\n\t\tvalidateErrors();\n\t}, [validateErrors]);\n\n\tuseEffect(() => {\n\t\tif (!selectionText) {\n\t\t\tsetRows([]);\n\t\t\treturn;\n\t\t}\n\t\tcreateRows(selectionText);\n\t}, [selectionText, createRows]);\n\n\treturn (\n\t\t<div className={classes.root}>\n\t\t\t<SelectComponent\n\t\t\t\tfield={field}\n\t\t\t\tkey={key}\n\t\t\t\tindex={key}\n\t\t\t\tprops={props}\n\t\t\t\terror={error}\n\t\t\t/>\n\t\t\t<IconButton\n\t\t\t\tonClick={addOptions}\n\t\t\t\taria-label=\"add\"\n\t\t\t\tsize=\"small\"\n\t\t\t\tclassName={classes.iconButton}\n\t\t\t>\n\t\t\t\t<i\n\t\t\t\t\tclassName={clsx(\n\t\t\t\t\t\tpropertyList[field.name] || selectionText\n\t\t\t\t\t\t\t? \"fa fa-pencil\"\n\t\t\t\t\t\t\t: \"fa fa-plus\",\n\t\t\t\t\t\tclasses.icon\n\t\t\t\t\t)}\n\t\t\t\t/>\n\t\t\t</IconButton>\n\t\t\t{openGrid && (\n\t\t\t\t<Dialog\n\t\t\t\t\topen={openGrid}\n\t\t\t\t\tonClose={(_, reason) => {\n\t\t\t\t\t\tif (reason !== \"backdropClick\") {\n\t\t\t\t\t\t\tsetOpenGrid(false);\n\t\t\t\t\t\t}\n\t\t\t\t\t}}\n\t\t\t\t\tclasses={{\n\t\t\t\t\t\tpaper: classes.paper,\n\t\t\t\t\t}}\n\t\t\t\t>\n\t\t\t\t\t<DialogTitle>{translate(\"Selection\")}</DialogTitle>\n\t\t\t\t\t<DialogContent className={classes.dialogContent}>\n\t\t\t\t\t\t<CardContent className={classes.content}>\n\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t<FormControlLabel\n\t\t\t\t\t\t\t\t\tclasses={{\n\t\t\t\t\t\t\t\t\t\tlabel: classes.label,\n\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\tcontrol={\n\t\t\t\t\t\t\t\t\t\t<CheckboxField\n\t\t\t\t\t\t\t\t\t\t\tfield={{\n\t\t\t\t\t\t\t\t\t\t\t\tname: \"updateSelection\",\n\t\t\t\t\t\t\t\t\t\t\t\tdependModelType: MODEL_TYPE.CUSTOM,\n\t\t\t\t\t\t\t\t\t\t\t\ttitle: \"New selection\",\n\t\t\t\t\t\t\t\t\t\t\t\tuncheckDialog: true,\n\t\t\t\t\t\t\t\t\t\t\t\talertMessage:\n\t\t\t\t\t\t\t\t\t\t\t\t\t\"All options and selection will be lost. Are you sure ?\",\n\t\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t\thandleDialogOk={handleDialogOk}\n\t\t\t\t\t\t\t\t\t\t\tprops={props}\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\tlabel={translate(\"New selection\")}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t<div className=\"one-to-many-header\">\n\t\t\t\t\t\t\t\t\t<span>{translate(\"Selection items\")}</span>\n\t\t\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\t\t\tonClick={addRow}\n\t\t\t\t\t\t\t\t\t\taria-label=\"add\"\n\t\t\t\t\t\t\t\t\t\tsize=\"small\"\n\t\t\t\t\t\t\t\t\t\tclassName={classes.btn}\n\t\t\t\t\t\t\t\t\t\tdisabled={!updateSelection}\n\t\t\t\t\t\t\t\t\t\tstartIcon={\n\t\t\t\t\t\t\t\t\t\t\t<i\n\t\t\t\t\t\t\t\t\t\t\t\tclassName={clsx(\"fa fa-plus\", classes.crudIcon)}\n\t\t\t\t\t\t\t\t\t\t\t\tstyle={{\n\t\t\t\t\t\t\t\t\t\t\t\t\tcolor: updateSelection\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t? \"black\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t: \"rgba(0, 0, 0, 0.26)\",\n\t\t\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t{translate(\"New\")}\n\t\t\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<table>\n\t\t\t\t\t\t\t\t\t<tbody\n\t\t\t\t\t\t\t\t\t\tclassName=\"one-to-many-row\"\n\t\t\t\t\t\t\t\t\t\tstyle={{ textAlign: \"left\" }}\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t<tr style={{ display: \"flex\", alignItems: \"center\" }}>\n\t\t\t\t\t\t\t\t\t\t\t{[\n\t\t\t\t\t\t\t\t\t\t\t\t\"\\u00A0\",\n\t\t\t\t\t\t\t\t\t\t\t\t\"Title\",\n\t\t\t\t\t\t\t\t\t\t\t\t\"Value\",\n\t\t\t\t\t\t\t\t\t\t\t\t\"Color\",\n\t\t\t\t\t\t\t\t\t\t\t\t\"Icon\",\n\t\t\t\t\t\t\t\t\t\t\t\t\"\\u00A0\",\n\t\t\t\t\t\t\t\t\t\t\t\t\"\\u00A0\",\n\t\t\t\t\t\t\t\t\t\t\t].map((item, i) => (\n\t\t\t\t\t\t\t\t\t\t\t\t<td\n\t\t\t\t\t\t\t\t\t\t\t\t\tclassName=\"one-to-many-col one-to-many-col-border\"\n\t\t\t\t\t\t\t\t\t\t\t\t\tkey={`td_${i}`}\n\t\t\t\t\t\t\t\t\t\t\t\t\tstyle={{\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tborderBottom: \"1px solid #ddd\",\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tmaxWidth: item === \"\\u00A0\" ? \"4%\" : \"22%\",\n\t\t\t\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t\t{item}\n\t\t\t\t\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t\t\t\t\t))}\n\t\t\t\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t\t\t\t{rows?.map((row, i) => (\n\t\t\t\t\t\t\t\t\t\t\t<Content\n\t\t\t\t\t\t\t\t\t\t\t\tkey={row.id}\n\t\t\t\t\t\t\t\t\t\t\t\tindex={i}\n\t\t\t\t\t\t\t\t\t\t\t\tid={row.id}\n\t\t\t\t\t\t\t\t\t\t\t\thandleRow={handleRow}\n\t\t\t\t\t\t\t\t\t\t\t\tdeleteRow={deleteRow}\n\t\t\t\t\t\t\t\t\t\t\t\tsaveRow={saveRow}\n\t\t\t\t\t\t\t\t\t\t\t\trow={row}\n\t\t\t\t\t\t\t\t\t\t\t\tmoveCard={moveCard}\n\t\t\t\t\t\t\t\t\t\t\t\thandleChange={handleChange}\n\t\t\t\t\t\t\t\t\t\t\t\tupdateSelection={updateSelection}\n\t\t\t\t\t\t\t\t\t\t\t\taddRow={addRow}\n\t\t\t\t\t\t\t\t\t\t\t\trowsCount={rows?.length}\n\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t))}\n\t\t\t\t\t\t\t\t\t</tbody>\n\t\t\t\t\t\t\t\t</table>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</CardContent>\n\t\t\t\t\t</DialogContent>\n\t\t\t\t\t<DialogActions className={classes.dialogActions}>\n\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\tonClick={() => {\n\t\t\t\t\t\t\t\tsetRows([]);\n\t\t\t\t\t\t\t\tsetOpenGrid(false);\n\t\t\t\t\t\t\t\tvalidateErrors();\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\tclassName={classes.btn}\n\t\t\t\t\t\t\tvariant=\"outlined\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{translate(\"Close\")}\n\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\tonClick={handleOk}\n\t\t\t\t\t\t\tautoFocus\n\t\t\t\t\t\t\tclassName={clsx(classes.btn, classes.ok)}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{translate(\"OK\")}\n\t\t\t\t\t\t</Button>\n\t\t\t\t\t</DialogActions>\n\t\t\t\t</Dialog>\n\t\t\t)}\n\t\t\t{openAlert && (\n\t\t\t\t<Dialog\n\t\t\t\t\topen={openAlert}\n\t\t\t\t\tonClose={() => setAlertOpen(false)}\n\t\t\t\t\taria-labelledby=\"alert-dialog-title\"\n\t\t\t\t\taria-describedby=\"alert-dialog-description\"\n\t\t\t\t\tclasses={{\n\t\t\t\t\t\tpaper: classes.alertPaper,\n\t\t\t\t\t}}\n\t\t\t\t>\n\t\t\t\t\t<DialogTitle id=\"alert-dialog-title\">\n\t\t\t\t\t\t{translate(\"Alert\")}\n\t\t\t\t\t</DialogTitle>\n\t\t\t\t\t<DialogContent>\n\t\t\t\t\t\t<DialogContentText id=\"alert-dialog-description\">\n\t\t\t\t\t\t\t{translate(\"Value is required\")}\n\t\t\t\t\t\t</DialogContentText>\n\t\t\t\t\t</DialogContent>\n\t\t\t\t\t<DialogActions>\n\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\tonClick={() => setAlertOpen(false)}\n\t\t\t\t\t\t\tcolor=\"primary\"\n\t\t\t\t\t\t\tclassName={classes.button}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{translate(\"OK\")}\n\t\t\t\t\t\t</Button>\n\t\t\t\t\t</DialogActions>\n\t\t\t\t</Dialog>\n\t\t\t)}\n\t\t</div>\n\t);\n}\n","import React, { useState } from \"react\";\nimport {\n\tTextField,\n\tGrid,\n\tTypography,\n\tFormControlLabel,\n\tSwitch,\n\tIconButton,\n} from \"@material-ui/core\";\nimport classNames from \"classnames\";\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport { options } from \"./list\";\nimport {\n\tcamleCaseString,\n\ttranslate,\n\tgetProperty,\n\tgetPropertyValue,\n\tgenerateFieldUniqueTitle,\n\tcapitalizeFirst,\n} from \"../utils\";\nimport SelectComponent from \"../components/SelectComponent\";\nimport { MODEL_TYPE, TYPE, ENTITY_TYPE } from \"../constants\";\nimport { useStore } from \"../store/context\";\nimport {\n\tFormView,\n\tGridView,\n\tJsonRelationalField,\n\tSelectableType,\n\tTargetJsonModel,\n\tTargetModel,\n} from \"./propertyFields\";\nimport TranslationGrid from \"../components/TranslationGrid\";\nimport TranslateIcon from \"@material-ui/icons/Translate\";\nimport CloseIcon from \"@material-ui/icons/Delete\";\nimport ClearIcon from \"@material-ui/icons/Close\";\nimport { getSelectionText } from \"../Toolbar/api\";\nimport StaticSelection from \"./widgets/StaticSelection\";\nimport SelectionWidget from \"./widgets/SelectionWidget\";\nimport DialogConfirmation from \"../Toolbar/DeleteConfirmation\";\n\nconst useStyles = makeStyles({\n\tinput: {\n\t\tbackgroundColor: \"#293846\",\n\t\tmarginTop: 15,\n\t\t\".modern-dark &\": {\n\t\t\tbackgroundColor: \"#323232\",\n\t\t},\n\t\t\"& .MuiInputBase-inputMultiline\": {\n\t\t\theight: \"auto !important\",\n\t\t},\n\t},\n\ttranslationInput: {\n\t\tpaddingTop: 10,\n\t\tpaddingBottom: 10,\n\t},\n\ttranslationInputView: {\n\t\tbackgroundColor: \"#293846\",\n\t\tmarginBottom: 5,\n\t\t\".modern-dark &\": {\n\t\t\tbackgroundColor: \"#323232\",\n\t\t},\n\t},\n\tlabel: {\n\t\tcolor: \"#f7f7f7\",\n\t\tfontSize: 12,\n\t\t\"&#outlined-basic-label\": {\n\t\t\tcolor: \"#f7f7f7\",\n\t\t},\n\t\t\"&.MuiInputLabel-shrink\": {\n\t\t\ttop: \"1px !important\",\n\t\t},\n\t},\n\toutlinedRoot: {\n\t\tcolor: \"#ffffff\",\n\t\t\"&:hover $notchedOutline\": {\n\t\t\tborderColor: \"#ffffff\",\n\t\t},\n\t\t\"&$focused $notchedOutline\": {\n\t\t\tborderColor: \"white\",\n\t\t\tborderWidth: 1,\n\t\t},\n\t},\n\tnotchedOutline: {},\n\tfocused: {\n\t\tcolor: \"#ffffff\",\n\t},\n\tswitchBase: {\n\t\t\"&$checked\": {\n\t\t\tcolor: \"#ffffff\",\n\t\t},\n\t\t\"&$checked + $track\": {\n\t\t\tbackgroundColor: \"#ffffff\",\n\t\t},\n\t},\n\tchecked: {},\n\ttrack: {},\n\tselection: {\n\t\tcolor: \"#ffffff\",\n\t\tbackgroundColor: \"#293846\",\n\t\t\".modern-dark &\": {\n\t\t\tbackgroundColor: \"#323232\",\n\t\t},\n\t},\n\ticonOutlined: {\n\t\tcolor: \"#ffffff\",\n\t},\n\tpanelTitle: {\n\t\tcolor: \"white\",\n\t\tfontWeight: \"600\",\n\t},\n\tpanelMargin: {\n\t\tmargin: \"25px 0px 0px 0px\",\n\t},\n\tdisableInput: {\n\t\tcolor: \"#a3a3a3 !important\",\n\t},\n\tunique: {\n\t\tcolor: \"#0275d8\",\n\t},\n\trequired: {\n\t\tcolor: \"red\",\n\t},\n\ttranslateButton: {\n\t\tcolor: \"#ffffff\",\n\t\tpadding: \"10px 12px\",\n\t\t\"& > span > svg\": {\n\t\t\tfontSize: \"1.1rem\",\n\t\t},\n\t},\n\tstaticSelectMenuItem: {\n\t\tcolor: \"#ffffff\",\n\t\tbackgroundColor: \"rgb(41, 56, 70) !important\",\n\t\t\"&:hover\": {\n\t\t\tbackgroundColor: \"#293846 !important\",\n\t\t},\n\t},\n\tautoComplete: {\n\t\twidth: \"100%\",\n\t\tmarginTop: 15,\n\t\tbackgroundColor: \"#293846\",\n\t\t\"& > div > label\": {\n\t\t\tcolor: \"#ffffff !important\",\n\t\t\tfontSize: 13,\n\t\t},\n\t\t\".modern-dark &\": {\n\t\t\tbackgroundColor: \"#323232\",\n\t\t},\n\t},\n\tautoCompleteInput: {\n\t\tcolor: \"#ffffff\",\n\t\tfontSize: 13,\n\t},\n\tautoCompleteOption: {\n\t\tfontSize: 13,\n\t\t\"& ul, .MuiAutocomplete-noOptions\": {\n\t\t\tbackgroundColor: \"rgb(41, 56, 70) !important\",\n\t\t\t\".modern-dark &\": {\n\t\t\t\tbackgroundColor: \"#1b1b1b !important\",\n\t\t\t},\n\t\t},\n\t\t\"& li, .MuiAutocomplete-noOptions\": {\n\t\t\tcolor: \"#ffffff !important\",\n\t\t\tbackgroundColor: \"rgb(41, 56, 70) !important\",\n\t\t\t\".modern-dark &\": {\n\t\t\t\tbackgroundColor: \"#1b1b1b !important\",\n\t\t\t},\n\t\t},\n\t\t\"& li:hover, .MuiAutocomplete-noOptions\": {\n\t\t\tcolor: \"#ffffff !important\",\n\t\t\tbackgroundColor: \"#2f4050 !important\",\n\t\t\t\".modern-dark &\": {\n\t\t\t\tbackgroundColor: \"#323232 !important\",\n\t\t\t},\n\t\t},\n\t},\n\ttextFieldInput: {\n\t\t// padding: \"10px 14px !important\",\n\t\tfontSize: 13,\n\t},\n\tbooleanInputLabel: {\n\t\tfontSize: 12,\n\t},\n\tdisabled: {\n\t\tcolor: \"#a3a3a3 !important\",\n\t\tfontSize: 12,\n\t},\n});\n\nconst PropertiesContext = React.createContext();\n\nfunction Label(text, field) {\n\tconst classes = useStyles();\n\treturn (\n\t\t<span>\n\t\t\t<span>{text}</span>\n\t\t\t{field.unique && <span className={classes.unique}> (unique) </span>}\n\t\t\t{field.required && <span className={classes.required}> * </span>}\n\t\t</span>\n\t);\n}\n\nconst isValueGenerated = (value) => {\n\treturn value.includes(\"studio:\");\n};\n\nconst hasPropertyToShow = (list, type) => {\n\treturn (\n\t\tlist.filter(\n\t\t\t(item) => !item.dependModelType || item.dependModelType === type\n\t\t).length > 0\n\t);\n};\n\nfunction StringInput(_props) {\n\tconst {\n\t\tindex,\n\t\tmultiline = false,\n\t\terror,\n\t\tparentPanel,\n\t\tonTranslationRemove,\n\t\tclearable = false,\n\t} = _props;\n\tconst classes = useStyles();\n\tconst [confirm, setConfirm] = React.useState(false);\n\tconst {\n\t\ttitle,\n\t\tname,\n\t\ttype,\n\t\trequired,\n\t\treadOnly,\n\t\tmax,\n\t\tmin,\n\t\tparentField,\n\t\ttranslationView,\n\t\t...rest\n\t} = _props.field;\n\tconst props = React.useContext(PropertiesContext);\n\tconst {\n\t\tpropertyList,\n\t\tsetPropertyList,\n\t\tonChange,\n\t\tmodelType,\n\t\tmetaFieldStore,\n\t\teditWidgetType,\n\t} = props;\n\tlet label = Label(translate(camleCaseString(title || name)), _props.field);\n\tlet placeholder = translate(camleCaseString(title || name));\n\tif (name === \"showIf\" || name === \"requiredIf\") {\n\t\tplaceholder = \"id == 1\";\n\t} else if (name === \"hideIf\") {\n\t\tplaceholder = \"id == null\";\n\t} else if (name === \"readOnlyIf\") {\n\t\tplaceholder = \"id != null\";\n\t}\n\tlet value = propertyList[name] || \"\";\n\tif (\n\t\t(modelType === rest.modelType || props.editWidgetType === \"customField\") &&\n\t\tparentField\n\t) {\n\t\tconst field = propertyList[parentField]\n\t\t\t? JSON.parse(propertyList[parentField])\n\t\t\t: {};\n\t\tvalue = field[name] || \"\";\n\t}\n\tif (rest.formatter) {\n\t\tvalue = rest.formatter(value, propertyList);\n\t}\n\tlet disabled = Boolean(readOnly);\n\tif (rest.isDisabled) {\n\t\tdisabled = rest.isDisabled({\n\t\t\tproperties: propertyList,\n\t\t\tmetaFieldStore,\n\t\t\teditWidgetType,\n\t\t\tmodelType,\n\t\t\tparentPanel,\n\t\t});\n\t}\n\n\tconst handleTranslationClick = React.useCallback(() => {\n\t\tif (isValueGenerated(value)) {\n\t\t\treturn;\n\t\t}\n\t\tconst newValue = generateFieldUniqueTitle({\n\t\t\tname,\n\t\t\tfieldName: propertyList[name] || type,\n\t\t});\n\t\tonChange(\n\t\t\t{\n\t\t\t\t...(propertyList || {}),\n\t\t\t\t...getProperty(\n\t\t\t\t\tname,\n\t\t\t\t\tnewValue,\n\t\t\t\t\tparentField,\n\t\t\t\t\tpropertyList[parentField],\n\t\t\t\t\t!(modelType === rest.modelType) || editWidgetType === \"customField\"\n\t\t\t\t),\n\t\t\t},\n\t\t\tname\n\t\t);\n\t}, [\n\t\tpropertyList,\n\t\tname,\n\t\ttype,\n\t\tvalue,\n\t\tonChange,\n\t\trest.modelType,\n\t\tmodelType,\n\t\tparentField,\n\t\teditWidgetType,\n\t]);\n\n\tconst handleTranslationRemove = React.useCallback(() => {\n\t\tsetConfirm(false);\n\t\tonChange(\n\t\t\t{\n\t\t\t\t...(propertyList || {}),\n\t\t\t\t...getProperty(\n\t\t\t\t\tname,\n\t\t\t\t\t\"\",\n\t\t\t\t\tparentField,\n\t\t\t\t\tpropertyList[parentField],\n\t\t\t\t\t!(modelType === rest.modelType)\n\t\t\t\t),\n\t\t\t},\n\t\t\tname\n\t\t);\n\t\tonTranslationRemove(value);\n\t}, [\n\t\tonTranslationRemove,\n\t\tvalue,\n\t\tname,\n\t\tparentField,\n\t\tmodelType,\n\t\tonChange,\n\t\tpropertyList,\n\t\trest.modelType,\n\t]);\n\n\tconst removeTranslation = React.useCallback(() => {\n\t\tsetConfirm(true);\n\t}, []);\n\n\tconst onClose = React.useCallback(() => {\n\t\tsetConfirm(false);\n\t}, []);\n\n\treturn (\n\t\t<React.Fragment>\n\t\t\t<TextField\n\t\t\t\terror={(required && !value) || Boolean(error)}\n\t\t\t\thelperText={error}\n\t\t\t\tInputLabelProps={{\n\t\t\t\t\tclassName: disabled ? classes.disabled : classes.label,\n\t\t\t\t}}\n\t\t\t\tsize=\"small\"\n\t\t\t\tInputProps={{\n\t\t\t\t\tclasses: {\n\t\t\t\t\t\troot: classes && disabled ? \"\" : classes.outlinedRoot,\n\t\t\t\t\t\tnotchedOutline: classes && classes.notchedOutline,\n\t\t\t\t\t\tfocused: classes && classes.focused,\n\t\t\t\t\t\tdisabled: classes && classes.disableInput,\n\t\t\t\t\t\tinput: classes && classes.textFieldInput,\n\t\t\t\t\t},\n\t\t\t\t\tendAdornment: translationView ? (\n\t\t\t\t\t\tisValueGenerated(value) ? (\n\t\t\t\t\t\t\t<IconButton\n\t\t\t\t\t\t\t\tclassName={classes.translateButton}\n\t\t\t\t\t\t\t\tonClick={removeTranslation}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<CloseIcon />\n\t\t\t\t\t\t\t</IconButton>\n\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\t<IconButton\n\t\t\t\t\t\t\t\tclassName={classes.translateButton}\n\t\t\t\t\t\t\t\tonClick={handleTranslationClick}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<TranslateIcon />\n\t\t\t\t\t\t\t</IconButton>\n\t\t\t\t\t\t)\n\t\t\t\t\t) : clearable ? (\n\t\t\t\t\t\t<IconButton\n\t\t\t\t\t\t\tclassName={classes.translateButton}\n\t\t\t\t\t\t\tonClick={() => {\n\t\t\t\t\t\t\t\tlet value = \"\";\n\t\t\t\t\t\t\t\tlet flag = true;\n\t\t\t\t\t\t\t\tif (\n\t\t\t\t\t\t\t\t\trest.modelType === MODEL_TYPE.BASE &&\n\t\t\t\t\t\t\t\t\tprops.editWidgetType !== \"customField\"\n\t\t\t\t\t\t\t\t) {\n\t\t\t\t\t\t\t\t\tflag =\n\t\t\t\t\t\t\t\t\t\tvalue === \"\"\n\t\t\t\t\t\t\t\t\t\t\t? propertyList[name] !== undefined\n\t\t\t\t\t\t\t\t\t\t\t\t? true\n\t\t\t\t\t\t\t\t\t\t\t\t: false\n\t\t\t\t\t\t\t\t\t\t\t: true;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tif (\n\t\t\t\t\t\t\t\t\trest.modelType === MODEL_TYPE.CUSTOM &&\n\t\t\t\t\t\t\t\t\tprops.editWidgetType === \"customField\"\n\t\t\t\t\t\t\t\t) {\n\t\t\t\t\t\t\t\t\t// set null value when value is negative for custom view & custom fields\n\t\t\t\t\t\t\t\t\tvalue = value || null;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tif (flag) {\n\t\t\t\t\t\t\t\t\tonChange(\n\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\t...(propertyList || {}),\n\t\t\t\t\t\t\t\t\t\t\t...getProperty(\n\t\t\t\t\t\t\t\t\t\t\t\tname,\n\t\t\t\t\t\t\t\t\t\t\t\tvalue,\n\t\t\t\t\t\t\t\t\t\t\t\tparentField,\n\t\t\t\t\t\t\t\t\t\t\t\tpropertyList[parentField],\n\t\t\t\t\t\t\t\t\t\t\t\t!(modelType === rest.modelType) ||\n\t\t\t\t\t\t\t\t\t\t\t\t\teditWidgetType === \"customField\"\n\t\t\t\t\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t\tname\n\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<ClearIcon />\n\t\t\t\t\t\t</IconButton>\n\t\t\t\t\t) : null,\n\t\t\t\t}}\n\t\t\t\tinputProps={{ min: min, max: max }}\n\t\t\t\tkey={index}\n\t\t\t\tclassName={classes && classes.input}\n\t\t\t\tid=\"outlined-basic\"\n\t\t\t\tmultiline={multiline}\n\t\t\t\ttype={type === \"integer\" ? \"number\" : type}\n\t\t\t\tlabel={label}\n\t\t\t\tplaceholder={placeholder}\n\t\t\t\tvariant=\"outlined\"\n\t\t\t\tdisabled={disabled || (translationView && isValueGenerated(value))}\n\t\t\t\tvalue={value}\n\t\t\t\tminRows={3}\n\t\t\t\tautoComplete=\"off\"\n\t\t\t\tonChange={(e) => {\n\t\t\t\t\tif (type === \"integer\" && isNaN(Number(e.target.value))) {\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t\tif (min && max) {\n\t\t\t\t\t\tconst value = Number(e.target.value);\n\t\t\t\t\t\tif (value < min || value > max) {\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tlet value = e.target.value;\n\t\t\t\t\tsetPropertyList({\n\t\t\t\t\t\t...(propertyList || {}),\n\t\t\t\t\t\t...getProperty(\n\t\t\t\t\t\t\tname,\n\t\t\t\t\t\t\tvalue,\n\t\t\t\t\t\t\tparentField,\n\t\t\t\t\t\t\tpropertyList[parentField],\n\t\t\t\t\t\t\t!(modelType !== rest.modelType) ||\n\t\t\t\t\t\t\t\teditWidgetType === \"customField\"\n\t\t\t\t\t\t),\n\t\t\t\t\t});\n\t\t\t\t}}\n\t\t\t\tonBlur={(e) => {\n\t\t\t\t\tif (type === \"integer\" && isNaN(Number(e.target.value))) {\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t\tif (min && max) {\n\t\t\t\t\t\tconst value = Number(e.target.value);\n\t\t\t\t\t\tif (value < min || value > max) {\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tlet value = e.target.value;\n\t\t\t\t\tlet flag = true;\n\t\t\t\t\tif (\n\t\t\t\t\t\trest.modelType === MODEL_TYPE.BASE &&\n\t\t\t\t\t\tprops.editWidgetType !== \"customField\"\n\t\t\t\t\t) {\n\t\t\t\t\t\tflag =\n\t\t\t\t\t\t\tvalue === \"\"\n\t\t\t\t\t\t\t\t? propertyList[name] !== undefined\n\t\t\t\t\t\t\t\t\t? true\n\t\t\t\t\t\t\t\t\t: false\n\t\t\t\t\t\t\t\t: true;\n\t\t\t\t\t}\n\t\t\t\t\tif (\n\t\t\t\t\t\trest.modelType === MODEL_TYPE.CUSTOM &&\n\t\t\t\t\t\tprops.editWidgetType === \"customField\"\n\t\t\t\t\t) {\n\t\t\t\t\t\t// set null value when value is negative for custom view & custom fields\n\t\t\t\t\t\tvalue = value || null;\n\t\t\t\t\t}\n\t\t\t\t\tif (flag) {\n\t\t\t\t\t\tonChange(\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t...(propertyList || {}),\n\t\t\t\t\t\t\t\t...getProperty(\n\t\t\t\t\t\t\t\t\tname,\n\t\t\t\t\t\t\t\t\tvalue && (name === \"name\" || value?.trim() === \"\")\n\t\t\t\t\t\t\t\t\t\t? value.trim()\n\t\t\t\t\t\t\t\t\t\t: value,\n\t\t\t\t\t\t\t\t\tparentField,\n\t\t\t\t\t\t\t\t\tpropertyList[parentField],\n\t\t\t\t\t\t\t\t\t!(modelType === rest.modelType) ||\n\t\t\t\t\t\t\t\t\t\teditWidgetType === \"customField\"\n\t\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\tname\n\t\t\t\t\t\t);\n\t\t\t\t\t}\n\t\t\t\t}}\n\t\t\t/>\n\t\t\t{translationView && isValueGenerated(value) && (\n\t\t\t\t<TranslationGrid\n\t\t\t\t\tInputProps={{\n\t\t\t\t\t\tclasses: {\n\t\t\t\t\t\t\troot: classes && classes.outlinedRoot,\n\t\t\t\t\t\t\tnotchedOutline: classes && classes.notchedOutline,\n\t\t\t\t\t\t\tfocused: classes && classes.focused,\n\t\t\t\t\t\t\tdisabled: classes && classes.disableInput,\n\t\t\t\t\t\t\tinput: classes && classes.translationInput,\n\t\t\t\t\t\t},\n\t\t\t\t\t}}\n\t\t\t\t\tInputLabelProps={{\n\t\t\t\t\t\tclassName: disabled ? classes.disabled : classes.label,\n\t\t\t\t\t}}\n\t\t\t\t\tclassName={classes && classes.translationInputView}\n\t\t\t\t\tkeyValue={value}\n\t\t\t\t/>\n\t\t\t)}\n\t\t\t{confirm && (\n\t\t\t\t<DialogConfirmation\n\t\t\t\t\topen={confirm}\n\t\t\t\t\tmessage=\"Are you sure, do you want to delete translations?\"\n\t\t\t\t\tonClose={onClose}\n\t\t\t\t\tonOk={handleTranslationRemove}\n\t\t\t\t/>\n\t\t\t)}\n\t\t</React.Fragment>\n\t);\n}\n\nfunction BooleanField(_props) {\n\tconst [openAlert, setAlertOpen] = useState(false);\n\tconst { index } = _props;\n\tlet { name, title, parentField, defaultValue, uncheckDialog, ...rest } =\n\t\t_props.field;\n\tconst props = React.useContext(PropertiesContext);\n\tconst {\n\t\tpropertyList,\n\t\tsetPropertyList,\n\t\tonChange,\n\t\tmodelType,\n\t\teditWidgetType,\n\t\tmetaFieldStore,\n\t} = props;\n\tlet _value = getPropertyValue(\n\t\tpropertyList,\n\t\tname,\n\t\tparentField,\n\t\tdefaultValue,\n\t\t!(modelType !== rest.modelType) || editWidgetType === \"customField\"\n\t);\n\tlet fieldValue = Boolean(_value ? !(_value === \"false\") : _value);\n\tconst classes = useStyles();\n\tif (rest.getValue) {\n\t\tfieldValue = rest.getValue(propertyList);\n\t}\n\tlet disabled = false;\n\tif (rest.isDisabled) {\n\t\tdisabled = rest.isDisabled({\n\t\t\tproperties: propertyList,\n\t\t\tmetaFieldStore,\n\t\t\teditWidgetType,\n\t\t\tmodelType,\n\t\t});\n\t}\n\ttitle = translate(camleCaseString(title || name));\n\n\tconst handleOnChange = () => {\n\t\tif (uncheckDialog) {\n\t\t\tsetAlertOpen(false);\n\t\t}\n\t\tsetPropertyList({\n\t\t\t...propertyList,\n\t\t\t...(rest.change ? rest.change(!fieldValue, propertyList) : {}),\n\t\t\t...getProperty(\n\t\t\t\tname,\n\t\t\t\t!fieldValue,\n\t\t\t\tparentField,\n\t\t\t\tpropertyList[parentField],\n\t\t\t\t!(modelType !== rest.modelType) || editWidgetType === \"customField\"\n\t\t\t),\n\t\t});\n\t\tonChange(\n\t\t\t{\n\t\t\t\t...propertyList,\n\t\t\t\t...(rest.change ? rest.change(!fieldValue, propertyList) : {}),\n\t\t\t\t...getProperty(\n\t\t\t\t\tname,\n\t\t\t\t\t!fieldValue,\n\t\t\t\t\tparentField,\n\t\t\t\t\tpropertyList[parentField],\n\t\t\t\t\t!(modelType !== rest.modelType) || editWidgetType === \"customField\"\n\t\t\t\t),\n\t\t\t},\n\t\t\tname\n\t\t);\n\t};\n\treturn (\n\t\t<React.Fragment>\n\t\t\t<FormControlLabel\n\t\t\t\tstyle={{ marginTop: 15 }}\n\t\t\t\tkey={index}\n\t\t\t\tclasses={{\n\t\t\t\t\tlabel: classes && classes.booleanInputLabel,\n\t\t\t\t\tdisabled: classes.disabled,\n\t\t\t\t}}\n\t\t\t\tcontrol={\n\t\t\t\t\t<Switch\n\t\t\t\t\t\tclasses={{\n\t\t\t\t\t\t\tswitchBase: classes && classes.switchBase,\n\t\t\t\t\t\t\ttrack: classes && classes.track,\n\t\t\t\t\t\t\tchecked: classes && classes.checked,\n\t\t\t\t\t\t}}\n\t\t\t\t\t\tchecked={fieldValue}\n\t\t\t\t\t\tdisabled={disabled}\n\t\t\t\t\t\tonChange={() => {\n\t\t\t\t\t\t\tif (\n\t\t\t\t\t\t\t\tuncheckDialog &&\n\t\t\t\t\t\t\t\tfieldValue &&\n\t\t\t\t\t\t\t\tpropertyList &&\n\t\t\t\t\t\t\t\tpropertyList.selectionText\n\t\t\t\t\t\t\t) {\n\t\t\t\t\t\t\t\tsetAlertOpen(true);\n\t\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\thandleOnChange();\n\t\t\t\t\t\t}}\n\t\t\t\t\t\tvalue={propertyList[name]}\n\t\t\t\t\t/>\n\t\t\t\t}\n\t\t\t\tlabel={translate(camleCaseString(title || name))}\n\t\t\t/>\n\t\t\t{openAlert && (\n\t\t\t\t<DialogConfirmation\n\t\t\t\t\topen={openAlert}\n\t\t\t\t\tmessage=\"Are you sure?\"\n\t\t\t\t\tonClose={() => setAlertOpen(false)}\n\t\t\t\t\tonOk={handleOnChange}\n\t\t\t\t\ttitle=\"Confirm\"\n\t\t\t\t/>\n\t\t\t)}\n\t\t</React.Fragment>\n\t);\n}\n\nfunction checkDepend(field, propertyList) {\n\tif (field.depends) {\n\t\tconst value = propertyList[field.depends];\n\t\tif (field.dependValue !== value) {\n\t\t\treturn false;\n\t\t}\n\t\treturn true;\n\t}\n\treturn;\n}\n\nfunction checkModel(field, modelType, editWidgetType, propertyList) {\n\tif (field.dependModelType && field.dependModelType !== modelType) {\n\t\tif (editWidgetType !== \"customField\") {\n\t\t\treturn false;\n\t\t}\n\t}\n\tif (editWidgetType === \"customField\" && field.showInCustomField === false) {\n\t\treturn false;\n\t}\n\tif (field.shouldRender && !field.shouldRender(propertyList)) {\n\t\treturn false;\n\t}\n\treturn true;\n}\n\nfunction RenderPropertyField() {\n\tconst props = React.useContext(PropertiesContext);\n\tconst {\n\t\telements,\n\t\tid,\n\t\tpropertyList,\n\t\tenableAppBuilder,\n\t\tmodelType,\n\t\teditWidgetType,\n\t\terrors,\n\t\tentityType,\n\t\tactualType,\n\t\tparentPanel,\n\t\tonTranslationRemove,\n\t} = props;\n\treturn (\n\t\t<>\n\t\t\t{elements.map((field, index) => {\n\t\t\t\tconst depend = checkDepend(field, propertyList);\n\t\t\t\tif (depend === false) {\n\t\t\t\t\treturn null;\n\t\t\t\t}\n\t\t\t\tif (!checkModel(field, modelType, editWidgetType, propertyList)) {\n\t\t\t\t\treturn null;\n\t\t\t\t}\n\t\t\t\tif (field.name === \"appBuilder\" && !enableAppBuilder) {\n\t\t\t\t\treturn null;\n\t\t\t\t}\n\t\t\t\tif (\n\t\t\t\t\t[actualType, entityType].includes(ENTITY_TYPE.META) &&\n\t\t\t\t\tfield.name === \"packageName\"\n\t\t\t\t) {\n\t\t\t\t\treturn null;\n\t\t\t\t}\n\t\t\t\tconst key = `${index}_${id}`;\n\t\t\t\tswitch (field.type) {\n\t\t\t\t\tcase \"string\":\n\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t<StringInput\n\t\t\t\t\t\t\t\tfield={field}\n\t\t\t\t\t\t\t\tkey={key}\n\t\t\t\t\t\t\t\tindex={key}\n\t\t\t\t\t\t\t\tmultiline={false}\n\t\t\t\t\t\t\t\terror={errors[field.name]}\n\t\t\t\t\t\t\t\tonTranslationRemove={onTranslationRemove}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t);\n\t\t\t\t\tcase \"integer\":\n\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t<StringInput\n\t\t\t\t\t\t\t\tfield={field}\n\t\t\t\t\t\t\t\tkey={key}\n\t\t\t\t\t\t\t\tindex={key}\n\t\t\t\t\t\t\t\tmultiline={false}\n\t\t\t\t\t\t\t\terror={errors[field.name]}\n\t\t\t\t\t\t\t\tparentPanel={parentPanel}\n\t\t\t\t\t\t\t\tclearable={true}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t);\n\t\t\t\t\tcase \"boolean\":\n\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t<BooleanField\n\t\t\t\t\t\t\t\tfield={field}\n\t\t\t\t\t\t\t\tkey={key}\n\t\t\t\t\t\t\t\tindex={key}\n\t\t\t\t\t\t\t\terror={errors[field.name]}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t);\n\t\t\t\t\tcase \"selection\":\n\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t<SelectionWidget\n\t\t\t\t\t\t\t\tfield={field}\n\t\t\t\t\t\t\t\tkey={key}\n\t\t\t\t\t\t\t\tindex={key}\n\t\t\t\t\t\t\t\tprops={props}\n\t\t\t\t\t\t\t\terror={errors[field.name]}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t);\n\t\t\t\t\tcase \"select\":\n\t\t\t\t\tcase \"objectSelection\":\n\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t<SelectComponent\n\t\t\t\t\t\t\t\tfield={field}\n\t\t\t\t\t\t\t\tkey={key}\n\t\t\t\t\t\t\t\tindex={key}\n\t\t\t\t\t\t\t\tprops={props}\n\t\t\t\t\t\t\t\terror={errors[field.name]}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t);\n\t\t\t\t\tcase \"staticSelect\":\n\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t<StaticSelection\n\t\t\t\t\t\t\t\tfield={field}\n\t\t\t\t\t\t\t\tkey={key}\n\t\t\t\t\t\t\t\tindex={key}\n\t\t\t\t\t\t\t\terror={errors[field.name]}\n\t\t\t\t\t\t\t\tparentPanel={parentPanel}\n\t\t\t\t\t\t\t\tprops={props}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t);\n\t\t\t\t\tcase \"text\":\n\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t<StringInput\n\t\t\t\t\t\t\t\tfield={field}\n\t\t\t\t\t\t\t\tkey={key}\n\t\t\t\t\t\t\t\tindex={key}\n\t\t\t\t\t\t\t\tmultiline={true}\n\t\t\t\t\t\t\t\terror={errors[field.name]}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t);\n\t\t\t\t\tdefault:\n\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t<StringInput\n\t\t\t\t\t\t\t\tfield={field}\n\t\t\t\t\t\t\t\tkey={key}\n\t\t\t\t\t\t\t\tindex={key}\n\t\t\t\t\t\t\t\terror={errors[field.name]}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t})}\n\t\t</>\n\t);\n}\n\nfunction PropertiesProvider({ children, ...value }) {\n\treturn (\n\t\t<PropertiesContext.Provider value={value}>\n\t\t\t{children}\n\t\t</PropertiesContext.Provider>\n\t);\n}\n\nexport default function Properties(props) {\n\tconst { state, onWidgetChange, onTranslationRemove } = useStore();\n\tconst {\n\t\twidgets,\n\t\teditWidget,\n\t\teditWidgetType,\n\t\tcustomFieldWidgets,\n\t\tmodelType,\n\t\tenableAppBuilder,\n\t\tmetaFieldStore = [],\n\t\terrorList = {},\n\t\tentityType,\n\t\tactualType,\n\t} = state;\n\tlet widget = null;\n\tif (editWidget) {\n\t\tif (editWidgetType === \"customField\" && customFieldWidgets) {\n\t\t\twidget = customFieldWidgets[editWidget];\n\t\t} else if (editWidgetType !== \"customField\" && widgets) {\n\t\t\twidget = widgets[editWidget];\n\t\t}\n\t}\n\tconst { serverType, isSelectionField } = widget || {};\n\tlet { type } = widget || {};\n\tlet selectedType =\n\t\tserverType === \"field\" ? type || \"string\" : serverType || type;\n\tselectedType = selectedType && selectedType.toLowerCase().replace(/_/g, \"-\");\n\tif (selectedType === \"datetime\") {\n\t\tconst field = metaFieldStore?.find((f) => f.name === widget.name);\n\t\tif (field && `${field.tz}` === \"true\") {\n\t\t\tselectedType = \"zoneddatetime\";\n\t\t}\n\t}\n\tconst [propertyList, setPropertyList] = useState({});\n\tlet property = options.find((option) => option.type === selectedType);\n\tif (selectedType === \"form\") {\n\t\tif (state.modelType === MODEL_TYPE.CUSTOM) {\n\t\t\tproperty = options.find((option) => option.type === \"modelForm\");\n\t\t}\n\t}\n\tif (isSelectionField) {\n\t\tselectedType = [\"string\", \"integer\"].includes(widget && widget.type)\n\t\t\t? widget.type\n\t\t\t: selectedType;\n\t\tif (property && property.value) {\n\t\t\tconst typeFieldIndex = property.value.overview.findIndex(\n\t\t\t\t(item) => item.name === \"type\"\n\t\t\t);\n\t\t\tproperty.value.overview.splice(typeFieldIndex, 1, SelectableType);\n\t\t\tconst { fieldOptions, widgetAttributes } =\n\t\t\t\t(property && property.value) || {};\n\t\t\tproperty = {\n\t\t\t\t...(property || {}),\n\t\t\t\tvalue: {\n\t\t\t\t\t...(property.value || {}),\n\t\t\t\t\tfieldOptions: (fieldOptions || []).filter(\n\t\t\t\t\t\t(f) => ![\"minSize\", \"maxSize\", \"regex\"].includes(f.name)\n\t\t\t\t\t),\n\t\t\t\t\twidgetAttributes: (widgetAttributes || []).filter(\n\t\t\t\t\t\t(f) => ![\"multiline\"].includes(f.name)\n\t\t\t\t\t),\n\t\t\t\t},\n\t\t\t};\n\t\t}\n\t}\n\tconst classes = useStyles();\n\tconst inputLabel = React.useRef(null);\n\tconst [labelWidth, setLabelWidth] = React.useState(0);\n\tReact.useEffect(() => {\n\t\tsetPropertyList({\n\t\t\t...(widget || {}),\n\t\t\ttype: selectedType,\n\t\t});\n\t\tsetLabelWidth(\n\t\t\tinputLabel && inputLabel.current && inputLabel.current.offsetWidth\n\t\t);\n\t}, [widget, selectedType]);\n\n\tasync function onChange(props, changedPropertyName) {\n\t\tconst newProperties = { ...props };\n\t\tif (changedPropertyName === JsonRelationalField.name) {\n\t\t\t// when isJsonRelationalField changes\n\t\t\tnewProperties[TargetJsonModel.name] = null;\n\t\t\tnewProperties[TargetModel.name] = null;\n\t\t\tnewProperties[GridView.name] = null;\n\t\t\tnewProperties[FormView.name] = null;\n\t\t}\n\t\tif (\n\t\t\tchangedPropertyName !== JsonRelationalField.name &&\n\t\t\tchangedPropertyName !== \"type\"\n\t\t) {\n\t\t\tnewProperties.type = widget.type;\n\t\t}\n\t\t/* selectionText implementation starts here */\n\t\tif (\n\t\t\tchangedPropertyName === \"updateSelection\" &&\n\t\t\t!newProperties.updateSelection\n\t\t) {\n\t\t\tnewProperties.selection = null;\n\t\t\tnewProperties.selectionText = null;\n\t\t}\n\t\tif (!newProperties.updateSelection) {\n\t\t\tnewProperties.selectionText = null;\n\t\t} else {\n\t\t\tconst obj = { name: newProperties.selection };\n\t\t\tconst text = await getSelectionText(obj);\n\t\t\tnewProperties.selectionText = newProperties.selectionText || text;\n\t\t}\n\t\tif (\n\t\t\tnewProperties.selection &&\n\t\t\tnewProperties.updateSelection &&\n\t\t\t!changedPropertyName\n\t\t) {\n\t\t\tconst obj = { name: newProperties.selection };\n\t\t\tconst text = await getSelectionText(obj);\n\t\t\tnewProperties.selectionText = newProperties.selectionText || text;\n\t\t}\n\t\tif(!newProperties.selection && !changedPropertyName){\n\t\t\tnewProperties.selectionText = \"\";\n\t\t}\n\t\tif (\n\t\t\tnewProperties.selection &&\n\t\t\ttypeof newProperties.selection === \"object\"\n\t\t) {\n\t\t\tnewProperties.selection = newProperties.selection.name;\n\t\t}\n\t\t/* selectionText implementation ends here */\n\t\tonWidgetChange(editWidget, { ...newProperties });\n\t}\n\n\ttype = selectedType;\n\tlet errors = {};\n\tif (editWidget && errorList) {\n\t\terrors = errorList[editWidget] || {};\n\t}\n\tconst parentPanel = Object.values(widgets || {}).find(\n\t\t(w) => w.items && w.items.indexOf(editWidget) !== -1\n\t);\n\tif (widget?.type === \"panel-tabs\" && editWidgetType === \"customField\") {\n\t\treturn null;\n\t}\n\tif (\n\t\tproperty?.dependModelType &&\n\t\t`${widget?.tab}` === \"true\" &&\n\t\tproperty?.dependModelType !== modelType\n\t) {\n\t\treturn null;\n\t}\n\treturn (\n\t\t<Grid style={{ padding: 20 }}>\n\t\t\t{type &&\n\t\t\t\tproperty &&\n\t\t\t\t!(\n\t\t\t\t\tstate.modelType === MODEL_TYPE.CUSTOM && property.type === TYPE.tabs\n\t\t\t\t) &&\n\t\t\t\tObject.keys(property.value).map((panel, i) => (\n\t\t\t\t\t<Grid key={i}>\n\t\t\t\t\t\t<Typography\n\t\t\t\t\t\t\tvariant=\"body1\"\n\t\t\t\t\t\t\tclassName={classNames(\n\t\t\t\t\t\t\t\tclasses.panelTitle,\n\t\t\t\t\t\t\t\ti !== 0 && classes.panelMargin\n\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{hasPropertyToShow(property.value[panel], modelType) &&\n\t\t\t\t\t\t\t\ttranslate(capitalizeFirst(panel))}\n\t\t\t\t\t\t</Typography>\n\t\t\t\t\t\t<Grid style={{ display: \"flex\", flexDirection: \"column\" }}>\n\t\t\t\t\t\t\t<PropertiesProvider\n\t\t\t\t\t\t\t\tkey={editWidget}\n\t\t\t\t\t\t\t\telements={property.value[panel]}\n\t\t\t\t\t\t\t\tpropertyList={propertyList}\n\t\t\t\t\t\t\t\tsetPropertyList={setPropertyList}\n\t\t\t\t\t\t\t\tlabelWidth={labelWidth}\n\t\t\t\t\t\t\t\tinputLabel={inputLabel}\n\t\t\t\t\t\t\t\ttype={type}\n\t\t\t\t\t\t\t\tonWidgetChange={onWidgetChange}\n\t\t\t\t\t\t\t\tid={editWidget}\n\t\t\t\t\t\t\t\tonChange={onChange}\n\t\t\t\t\t\t\t\tmodelType={modelType}\n\t\t\t\t\t\t\t\tenableAppBuilder={enableAppBuilder}\n\t\t\t\t\t\t\t\teditWidgetType={editWidgetType}\n\t\t\t\t\t\t\t\tmetaFieldStore={metaFieldStore}\n\t\t\t\t\t\t\t\terrors={errors}\n\t\t\t\t\t\t\t\tentityType={entityType}\n\t\t\t\t\t\t\t\tactualType={actualType}\n\t\t\t\t\t\t\t\tparentPanel={parentPanel}\n\t\t\t\t\t\t\t\tonTranslationRemove={onTranslationRemove}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<RenderPropertyField />\n\t\t\t\t\t\t\t</PropertiesProvider>\n\t\t\t\t\t\t</Grid>\n\t\t\t\t\t</Grid>\n\t\t\t\t))}\n\t\t</Grid>\n\t);\n}\n","import React from \"react\";\nimport Properties from \"../../Properties\";\n\nexport default React.memo(function PropertiesView() {\n\treturn (\n\t\t<div style={{ color: \"#fff\" }}>\n\t\t\t<Properties />\n\t\t</div>\n\t);\n});\n","import { Drawer } from \"@material-ui/core\";\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport React, { useState } from \"react\";\nimport { Resizable } from \"re-resizable\";\n\nimport { translate } from \"../../utils\";\nimport PropertiesView from \"./PropertiesView\";\n\nconst drawerWidth = 380;\nconst resizeStyle = {\n\tdisplay: \"flex\",\n\talignItems: \"center\",\n\tjustifyContent: \"center\",\n\tborderLeft: \"solid 1px #ddd\",\n\tbackground: \"#f0f0f0\",\n};\n\nconst useStyles = makeStyles({\n\tdrawerPaper: {\n\t\tbackground: \"#2f4050\",\n\t\twidth: \"100%\",\n\t\theight: \"100%\",\n\t\tposition: \"absolute\",\n\t\tborderLeft: \"1px solid #2f4050\",\n\t\toverflow: \"auto\",\n\t},\n\tpropertyToggle: {\n\t\tposition: \"absolute\",\n\t\tleft: \"-30px\",\n\t\ttop: \"calc(50% + 60px)\",\n\t\tbackground: \"#293846\",\n\t\tcolor: \"white\",\n\t\tpadding: \"5px 20px 7px 20px\",\n\t\ttransform: \"rotate(-90deg)\",\n\t\twhiteSpace: \"nowrap\",\n\t\tfontSize: \"13px\",\n\t\tborder: \"solid 1px #293846\",\n\t\tborderBottom: \"none\",\n\t\tborderRadius: \"5px 5px 0 0\",\n\t\ttransformOrigin: \"top left\",\n\t\tzIndex: \"10\",\n\t\tcursor: \"default\",\n\t\tuserSelect: \"none\",\n\t\tboxShadow: \"1px 2px 8px 0px rgb(1 1 1 / 75%) !important\",\n\t},\n\tcontainer: {\n\t\tposition: \"sticky\",\n\t\ttop: \"0px\",\n\t\theight: \"100vh\",\n\t},\n});\nexport default React.memo(function PropertiesPanel() {\n\tconst classes = useStyles();\n\tconst [drawerOpen, setDrawerOpen] = useState(true);\n\tconst [width, setWidth] = useState(drawerWidth);\n\tconst [height, setHeight] = useState(\"100%\");\n\n\tconst setCSSWidth = (width) => {\n\t\tsetDrawerOpen(width === \"0px\" ? false : true);\n\t};\n\n\tReact.useEffect(() => {\n\t\tconst checkWindowSize = () => {\n\t\t\tif (drawerOpen) {\n\t\t\t\tsetWidth((prev) =>\n\t\t\t\t\twindow.innerWidth - prev < drawerWidth\n\t\t\t\t\t\t? window.innerWidth - drawerWidth\n\t\t\t\t\t\t: prev < drawerWidth\n\t\t\t\t\t\t? window.innerWidth - prev\n\t\t\t\t\t\t: prev\n\t\t\t\t);\n\t\t\t}\n\t\t};\n\t\twindow.addEventListener(\"resize\", checkWindowSize);\n\n\t\treturn () => {\n\t\t\twindow.removeEventListener(\"resize\", checkWindowSize);\n\t\t};\n\t});\n\n\treturn (\n\t\t<div className={classes.container}>\n\t\t\t<Resizable\n\t\t\t\tstyle={resizeStyle}\n\t\t\t\tsize={{ width, height }}\n\t\t\t\tonResizeStop={(e, direction, ref, d) => {\n\t\t\t\t\tsetWidth((width) => width + d.width);\n\t\t\t\t\tsetHeight(height + d.height);\n\t\t\t\t\tsetCSSWidth(`${width + d.width}px`);\n\t\t\t\t}}\n\t\t\t\tmaxWidth={window.innerWidth - drawerWidth}\n\t\t\t\tminHeight={height}\n\t\t\t\tenable={{\n\t\t\t\t\tleft: true,\n\t\t\t\t}}\n\t\t\t>\n\t\t\t\t<Drawer\n\t\t\t\t\tvariant=\"persistent\"\n\t\t\t\t\tanchor=\"right\"\n\t\t\t\t\topen={drawerOpen}\n\t\t\t\t\tstyle={{\n\t\t\t\t\t\twidth: drawerWidth,\n\t\t\t\t\t}}\n\t\t\t\t\tclasses={{\n\t\t\t\t\t\tpaper: classes.drawerPaper,\n\t\t\t\t\t}}\n\t\t\t\t\ttransitionDuration={0}\n\t\t\t\t>\n\t\t\t\t\t<PropertiesView />\n\t\t\t\t</Drawer>\n\t\t\t\t<div\n\t\t\t\t\tclassName={classes.propertyToggle}\n\t\t\t\t\tonClick={() => {\n\t\t\t\t\t\tsetWidth((width) => (width === 0 ? drawerWidth : 0));\n\t\t\t\t\t\tsetCSSWidth(`${width === 0 ? drawerWidth : 0}px`);\n\t\t\t\t\t}}\n\t\t\t\t>\n\t\t\t\t\t{translate(\"Properties\")}\n\t\t\t\t</div>\n\t\t\t</Resizable>\n\t\t</div>\n\t);\n});\n","import React from \"react\";\nimport { Grid, Tooltip } from \"@material-ui/core\";\nimport { makeStyles } from \"@material-ui/core/styles\";\n\nimport { translate } from \"../utils\";\n\nconst useStyles = makeStyles({\n\tfieldImage: {\n\t\tdisplay: \"flex\",\n\t\tjustifyContent: \"center\",\n\t\talignItems: \"center\",\n\t\tpadding: 15,\n\t},\n\ticon: {\n\t\twidth: 25,\n\t\theight: 25,\n\t\tbackgroundRepeat: \"no-repeat\",\n\t\tbackgroundSize: \"contain\",\n\t\tbackgroundPosition: \"center\",\n\t\tposition: \"absolute\",\n\t},\n});\n\nconst getImageURL = (widget) => {\n\tconst type = widget.serverType || widget.type;\n\tif (type && type.indexOf(\"datetime\") !== -1) {\n\t\treturn \"datetime.png\";\n\t}\n\tif (type && type.indexOf(\"date\") !== -1) {\n\t\treturn \"date.png\";\n\t}\n\tif (type && type.indexOf(\"time\") !== -1) {\n\t\treturn \"time.png\";\n\t}\n\tif (type && type.indexOf(\"decimal\") !== -1) {\n\t\treturn \"decimal.png\";\n\t}\n\tif (widget.image) {\n\t\treturn widget.image;\n\t}\n\treturn `${type}.png`;\n};\n\nexport function FieldComponent(props) {\n\tconst classes = useStyles();\n\tconst { attrs, targetName } = props;\n\treturn (\n\t\t<div>\n\t\t\t<Tooltip\n\t\t\t\tarrow\n\t\t\t\ttitle={translate(attrs.title || attrs[targetName] || attrs[\"name\"])}\n\t\t\t\tplacement=\"right\"\n\t\t\t>\n\t\t\t\t<Grid className={classes.fieldImage}>\n\t\t\t\t\t<div\n\t\t\t\t\t\tclassName={classes.icon}\n\t\t\t\t\t\tstyle={{\n\t\t\t\t\t\t\tbackgroundImage: `url(./images/${getImageURL(attrs)})`,\n\t\t\t\t\t\t}}\n\t\t\t\t\t/>\n\t\t\t\t</Grid>\n\t\t\t</Tooltip>\n\t\t</div>\n\t);\n}\n\nexport default FieldComponent;\n","import React from \"react\";\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport classNames from \"classnames\";\n\nconst useStyles = makeStyles((theme) => ({\n\tfield: {\n\t\t[theme.breakpoints.down(\"sm\")]: {\n\t\t\twidth: \"100%\",\n\t\t},\n\t},\n}));\n\nexport default function Field(props) {\n\tconst classes = useStyles();\n\treturn (\n\t\t<div {...props} className={classNames(classes.field, props.className)} />\n\t);\n}\n","import React from \"react\";\nimport { Divider, Container, Grid, useMediaQuery } from \"@material-ui/core\";\nimport { makeStyles } from \"@material-ui/core/styles\";\n\nimport { fieldTypes, modelFields } from \"../../fields\";\nimport FieldComponent from \"../../components/FieldComponent\";\nimport Widget from \"../../components/Widget\";\nimport Field from \"./Field\";\nimport { useStore } from \"../../store/context\";\nimport { MODEL_TYPE, TYPE } from \"../../constants\";\n\nconst useStyles = makeStyles((theme) => ({\n\tcontainer: {\n\t\twidth: \"min-content\",\n\t\theight: \"fit-content\",\n\t\tbackgroundColor: \"#fafafa\",\n\t\tborder: \"1px solid lightgray\",\n\t\tpadding: \"0\",\n\t\tmargin: \"1rem 0\",\n\t\tborderRadius: 5,\n\t\tmarginTop: 14,\n\t\tboxShadow: \"1px 2px 8px 0px rgb(1 1 1 / 50%) !important\",\n\t},\n\tattributeItem: {\n\t\t\"&:hover\": {\n\t\t\tbackgroundColor: \"rgb(41 56 70 / 35%)\",\n\t\t},\n\t},\n\tdivider: {\n\t\tmargin: \"4px\",\n\t\tbackground: \"gray\",\n\t},\n\twidget: {\n\t\tborder: \"none !important\",\n\t\tboxShadow: \"none\",\n\t\tpadding: \"5px 0\",\n\t},\n}));\n\nexport default React.memo(function AddPanelView({ toolbarOffset }) {\n\tconst classes = useStyles();\n\tconst { state } = useStore();\n\tconst isResponsive = useMediaQuery(`(max-height: ${720 + toolbarOffset}px)`);\n\tconst fields = [...fieldTypes, ...modelFields].filter((e) => {\n\t\tif (e.name === \"Menu\" && state.modelType === MODEL_TYPE.CUSTOM) {\n\t\t\treturn false;\n\t\t}\n\t\treturn true;\n\t});\n\n\tconst showField = (field) => {\n\t\tif ([TYPE.menubar, TYPE.toolbar].includes(field.type) && state.widgets) {\n\t\t\tconst index = Object.values(state.widgets).findIndex(\n\t\t\t\t(w) => w.type === field.type\n\t\t\t);\n\t\t\treturn index === -1;\n\t\t}\n\t\treturn true;\n\t};\n\treturn (\n\t\t<Container className={classes.container}>\n\t\t\t{fields.map((fieldType, index) => (\n\t\t\t\t<React.Fragment key={index}>\n\t\t\t\t\t<Grid container style={{ width: isResponsive ? \"80px\" : \"40px\" }}>\n\t\t\t\t\t\t{fieldType.value &&\n\t\t\t\t\t\t\tfieldType.value.map((field, i) => {\n\t\t\t\t\t\t\t\tif (\n\t\t\t\t\t\t\t\t\tfield.editorType &&\n\t\t\t\t\t\t\t\t\t!field.editorType.includes(state.modelType)\n\t\t\t\t\t\t\t\t) {\n\t\t\t\t\t\t\t\t\treturn null;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tif (!showField(field)) {\n\t\t\t\t\t\t\t\t\treturn null;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t\t<Grid\n\t\t\t\t\t\t\t\t\t\titem\n\t\t\t\t\t\t\t\t\t\txs={isResponsive ? 6 : 12}\n\t\t\t\t\t\t\t\t\t\tclassName={classes.attributeItem}\n\t\t\t\t\t\t\t\t\t\tkey={i}\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t<Field key={i}>\n\t\t\t\t\t\t\t\t\t\t\t<Widget\n\t\t\t\t\t\t\t\t\t\t\t\tid={field.id}\n\t\t\t\t\t\t\t\t\t\t\t\tattrs={field}\n\t\t\t\t\t\t\t\t\t\t\t\tdesign={true}\n\t\t\t\t\t\t\t\t\t\t\t\tcomponent={FieldComponent}\n\t\t\t\t\t\t\t\t\t\t\t\tisCoreField={true}\n\t\t\t\t\t\t\t\t\t\t\t\tisPalleteField={true}\n\t\t\t\t\t\t\t\t\t\t\t\tclassName={classes.widget}\n\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t</Field>\n\t\t\t\t\t\t\t\t\t</Grid>\n\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t})}\n\t\t\t\t\t</Grid>\n\t\t\t\t\t{index < fields.length - 1 && <Divider className={classes.divider} />}\n\t\t\t\t</React.Fragment>\n\t\t\t))}\n\t\t</Container>\n\t);\n});\n","import React from \"react\";\nimport { Grid } from \"@material-ui/core\";\nimport {\n\tmakeStyles,\n\tcreateTheme,\n\tThemeProvider,\n} from \"@material-ui/core/styles\";\nimport { DndProvider } from \"react-dnd\";\nimport Backend from \"react-dnd-html5-backend\";\nimport MainPanel from \"./Panels/MainPanel\";\nimport Toolbar from \"./Toolbar/ToolbarContainer\";\nimport StudioProvider, { useStore } from \"./store/context\";\nimport PropertiesPanel from \"./Panels/PropertiesPanel/PropertiesPanelView\";\nimport AddPanelView from \"./Panels/AttributesPanel/AddPanelView\";\nimport {\n\tfetchLanguages,\n\tfetchUserPreferences,\n\tgetEnableAppBuilder,\n} from \"./Toolbar/api\";\n\nconst useStyles = makeStyles({\n\ttoolbarWrapper: {\n\t\tpaddingRight: \"1rem\",\n\t},\n\tpanelContainer: {\n\t\tdisplay: \"flex\",\n\t\tpadding: \"0 0 0 1rem\",\n\t},\n\tpropertiesPanel: {\n\t\t\".modern-dark &\": {\n\t\t\tbackgroundColor: \"#202124\",\n\t\t},\n\t},\n\tmainPanel: {\n\t\theight: \"100vh\",\n\t\toverflow: \"auto\",\n\t\t\".modern-dark &\": {\n\t\t\tbackgroundColor: \"#202124\",\n\t\t},\n\t},\n\tcontainer: { display: \"flex\" },\n});\n\nconst theme = createTheme({\n\ttypography: {\n\t\tfontFamily: '\"Open Sans\", \"Helvetica Neue\", Helvetica, Arial, sans-serif',\n\t},\n});\n\nfunction AppContent() {\n\tconst classes = useStyles();\n\tconst { update, state } = useStore();\n\tconst { past, future } = state;\n\tconst [toolbarHeight, setToolbarHeight] = React.useState();\n\tconst gridRef = React.useRef();\n\tconst mainContainerRef = React.useRef();\n\tconst toolbarSelector = `.${classes.toolbarWrapper}`;\n\n\tconst alertUser = (event) => {\n\t\tevent.preventDefault();\n\t\tevent.returnValue = \"Are you sure you want to close the tab?\";\n\t};\n\n\tReact.useEffect(() => {\n\t\tfetchLanguages().then((result) => {\n\t\t\tupdate((draft) => {\n\t\t\t\tdraft.languageList = [...result];\n\t\t\t});\n\t\t});\n\t\tfetchUserPreferences().then((result) => {\n\t\t\tif (result && result.theme) {\n\t\t\t\tdocument.body.className = result.theme;\n\t\t\t}\n\t\t});\n\n\t\tgetEnableAppBuilder().then((res) => {\n\t\t\tupdate((draft) => {\n\t\t\t\tdraft.enableAppBuilder = res;\n\t\t\t});\n\t\t});\n\t}, [update]);\n\n\tReact.useEffect(() => {\n\t\tconst grid = gridRef.current;\n\t\tgrid && grid.focus();\n\t}, []);\n\n\tReact.useEffect(() => {\n\t\tconst toolbar = document.querySelector(toolbarSelector);\n\n\t\tif (toolbar) {\n\t\t\tconst resizeObserver = new ResizeObserver(() => {\n\t\t\t\tsetToolbarHeight(toolbar.offsetHeight);\n\t\t\t});\n\n\t\t\tresizeObserver.observe(toolbar);\n\t\t\treturn () => resizeObserver.unobserve();\n\t\t}\n\t}, [toolbarSelector]);\n\n\tReact.useEffect(() => {\n\t\twindow.top && window.top.addEventListener(\"beforeunload\", alertUser);\n\t\treturn () => {\n\t\t\twindow.top && window.top.removeEventListener(\"beforeunload\", alertUser);\n\t\t};\n\t});\n\n\tReact.useEffect(() => {\n\t\tconst scope =\n\t\t\twindow.top &&\n\t\t\twindow.top.angular &&\n\t\t\twindow.top.angular\n\t\t\t\t.element(\n\t\t\t\t\twindow.top.document.querySelector(\n\t\t\t\t\t\t'[ng-repeat=\"tab in navTabs\"][class=\"ng-scope active\"] [ng-click=\"closeTab(tab)\"]'\n\t\t\t\t\t)\n\t\t\t\t)\n\t\t\t\t.scope();\n\t\tif (!scope) return;\n\t\tscope.tab.$viewScope.confirmDirty = function (callback, cancelCallback) {\n\t\t\ttry {\n\t\t\t\tconst isDirty = past?.length > 0 || future?.length > 0;\n\t\t\t\tif (!isDirty) {\n\t\t\t\t\treturn callback && callback();\n\t\t\t\t} else {\n\t\t\t\t\twindow.top.axelor.dialogs.confirm(\n\t\t\t\t\t\twindow.top._t(\n\t\t\t\t\t\t\t\"Current changes will be lost. Do you really want to proceed?\"\n\t\t\t\t\t\t),\n\t\t\t\t\t\t(confirmed) => {\n\t\t\t\t\t\t\tif (!confirmed) {\n\t\t\t\t\t\t\t\treturn cancelCallback && cancelCallback();\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\treturn callback && callback();\n\t\t\t\t\t\t}\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t} catch (error) {\n\t\t\t\tconsole.error(error);\n\t\t\t}\n\t\t};\n\t});\n\n\treturn (\n\t\t<Grid className={classes.container} ref={gridRef}>\n\t\t\t<Grid container>\n\t\t\t\t<Grid item xs={12} className={classes.toolbarWrapper}>\n\t\t\t\t\t<Toolbar />\n\t\t\t\t</Grid>\n\t\t\t\t<Grid item xs className={classes.panelContainer} ref={mainContainerRef}>\n\t\t\t\t\t<AddPanelView toolbarOffset={toolbarHeight} />\n\t\t\t\t\t<MainPanel\n\t\t\t\t\t\tclassName={classes.mainPanel}\n\t\t\t\t\t\ttoolbarOffset={toolbarHeight}\n\t\t\t\t\t/>\n\t\t\t\t</Grid>\n\t\t\t</Grid>\n\t\t\t<Grid>\n\t\t\t\t<PropertiesPanel />\n\t\t\t</Grid>\n\t\t</Grid>\n\t);\n}\n\nexport default function App() {\n\treturn (\n\t\t<StudioProvider>\n\t\t\t<DndProvider backend={Backend}>\n\t\t\t\t<ThemeProvider theme={theme}>\n\t\t\t\t\t<AppContent />\n\t\t\t\t</ThemeProvider>\n\t\t\t</DndProvider>\n\t\t</StudioProvider>\n\t);\n}\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport \"./index.css\";\nimport \"./theme.css\";\nimport App from \"./App\";\n\nReactDOM.render(<App />, document.getElementById(\"root\"));\n","import axios from \"axios\";\n\nconst headers = {\n\t\"X-Requested-With\": \"XMLHttpRequest\",\n\t\"Content-Type\": \"application/json\",\n\tAccept: \"application/json\",\n};\nlet lastCookieString;\nlet lastCookies = {};\n\nfunction readCookie(name) {\n\tlet cookieString = document.cookie || \"\";\n\tif (cookieString !== lastCookieString) {\n\t\tlastCookieString = cookieString;\n\t\tlastCookies = cookieString.split(\"; \").reduce((obj, value) => {\n\t\t\tlet parts = value.split(\"=\");\n\t\t\tobj[parts[0]] = parts[1];\n\t\t\treturn obj;\n\t\t}, {});\n\t}\n\treturn lastCookies[name];\n}\n\nclass service {\n\tconstructor(props) {\n\t\tthis.baseURL =\n\t\t\tprocess.env.NODE_ENV === \"production\" ? \"../../\" : \"/axelor-erp/\";\n\t}\n\n\trequest(url, method, data) {\n\t\tlet options = {};\n\t\tif (method !== \"get\") {\n\t\t\toptions[\"data\"] = data;\n\t\t}\n\t\treturn axios({\n\t\t\tmethod: method,\n\t\t\tbaseURL: this.baseURL,\n\t\t\theaders: {\n\t\t\t\t...headers,\n\t\t\t\t\"X-CSRF-Token\": readCookie(\"CSRF-TOKEN\"),\n\t\t\t},\n\t\t\turl,\n\t\t\t...options,\n\t\t});\n\t}\n\n\tinterceptor(url, method, data) {\n\t\treturn this.request(url, method, data)\n\t\t\t.then((result) => {\n\t\t\t\tif (result.status === 200) {\n\t\t\t\t\treturn result.data || { status: result.status };\n\t\t\t\t} else if (result.status === 401) {\n\t\t\t\t\tconst credential = localStorage.getItem(\"credential\");\n\t\t\t\t\tif (credential) {\n\t\t\t\t\t\tconst { username, password } = JSON.parse(credential);\n\t\t\t\t\t\treturn this.login(username, password).then((res) => {\n\t\t\t\t\t\t\tif (res.status === 200) {\n\t\t\t\t\t\t\t\treturn this.interceptor(url, method, data);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\treturn Promise.resolve(\"Error\");\n\t\t\t})\n\t\t\t.catch((e) => {\n\t\t\t\tif (e.response && e.response.status === 401) {\n\t\t\t\t\treturn this.relogin(url, method, data);\n\t\t\t\t}\n\t\t\t});\n\t}\n\n\trelogin(url, method, data) {\n\t\tconst credential = localStorage.getItem(\"credential\");\n\t\tif (credential) {\n\t\t\tconst { username, password } = JSON.parse(credential);\n\t\t\treturn this.login(username, password).then((res) => {\n\t\t\t\tif (res.status === 200) {\n\t\t\t\t\treturn this.interceptor(url, method, data);\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t}\n\n\tget(url) {\n\t\treturn this.interceptor(url, \"get\");\n\t}\n\n\tpost(url, data = {}) {\n\t\treturn this.interceptor(url, \"post\", data);\n\t}\n\n\tdelete(url, data) {\n\t\treturn this.interceptor(url, \"delete\", data);\n\t}\n\n\tlogin(username, password) {\n\t\tconst data = { username, password };\n\t\treturn this.interceptor(\"login.jsp\", \"post\", data).then((res) => {\n\t\t\tif (res.status === 200) {\n\t\t\t\tlocalStorage.setItem(\n\t\t\t\t\t\"credential\",\n\t\t\t\t\tJSON.stringify({ username, password })\n\t\t\t\t);\n\t\t\t}\n\t\t\treturn { status: res.status };\n\t\t});\n\t}\n\n\tlogout() {\n\t\treturn this.interceptor(\"logout\").then(() => {\n\t\t\tlocalStorage.removeItem(\"credential\");\n\t\t});\n\t}\n}\n\nexport default service;\n","import httpService from \"./http\";\n\nconst joinURL = (model, subURL) => {\n\treturn `ws/rest/${model}/${subURL}`;\n};\n\nconst services = new httpService();\n\nclass AxelorService {\n\tconstructor(props) {\n\t\tthis.model = props.model;\n\t}\n\n\tsearch({ fields, sortBy, data, limit, offset }) {\n\t\tconst _subURL = `search`;\n\t\tconst url = joinURL(this.model, _subURL);\n\t\treturn services.post(url, { fields, sortBy, data, limit, offset });\n\t}\n\n\tfetch(id, data) {\n\t\tconst _subURL = `${id}/fetch`;\n\t\tconst url = joinURL(this.model, _subURL);\n\t\treturn services.post(url, data);\n\t}\n\n\tview(data) {\n\t\tconst url = \"/ws/meta/view\";\n\t\treturn services.post(url, data);\n\t}\n\n\tsave(data) {\n\t\tconst url = joinURL(this.model, \"\");\n\t\treturn services.post(url, { data });\n\t}\n\n\tsaveAll(data) {\n\t\tconst url = joinURL(this.model, \"\");\n\t\treturn services.post(url, { records: data });\n\t}\n\n\tremoveAll(records) {\n\t\tconst url = joinURL(this.model, \"removeAll\");\n\t\treturn services.post(url, { records });\n\t}\n\n\tlogin(username, password) {\n\t\treturn services.login(username, password);\n\t}\n\n\tlogout() {\n\t\treturn services.logout();\n\t}\n\n\taction(data) {\n\t\tconst url = \"ws/action\";\n\t\treturn services.post(url, data);\n\t}\n\n\tinfo() {\n\t\tconst url = \"ws/app/info\";\n\t\treturn services.get(url);\n\t}\n}\n\nexport default AxelorService;\n","import React from \"react\";\nimport produce from \"immer\";\nimport _ from \"lodash\";\n\nimport {\n\tTYPE,\n\tIDS,\n\tPANEL_TYPE,\n\tMODEL_TYPE,\n\tENTITY_TYPE,\n\tPANEL_PROPS,\n} from \"../constants\";\nimport {\n\treorderGrid,\n\tcheckExclusive,\n\tarrangeGrid,\n\tcheckGridEmptyCells,\n\tsetErrorList,\n\tcaseConverter,\n} from \"../utils\";\nimport { original } from \"immer\";\nimport { generateExtension } from \"./computeXML\";\nimport { generateXpath } from \"./xpathGenerator\";\nimport { validateParentPanelItems, validateOnRemove } from \"./validation\";\nimport Utils, { isExtensionView } from \"./../utils\";\n\nconst StoreContext = React.createContext();\n\nfunction useMutableState(defaultValue) {\n\tconst [state, setState] = React.useState(defaultValue);\n\treturn [\n\t\tstate,\n\t\tReact.useCallback((updater) => setState(produce(updater)), [setState]),\n\t];\n}\n\nfunction StoreProvider({ children }) {\n\tconst [state, setState] = useMutableState({\n\t\tfuture: [],\n\t\tpast: [],\n\t\ttitle: \"\",\n\t\titems: [],\n\t\twidgets: null,\n\t\tdragWidget: null,\n\t\teditWidget: null,\n\t\thoverWidget: null,\n\t\tinitialWidgets: null,\n\t\tinitialItems: null,\n\t\ttabIndex: 0,\n\t\tmodelType: \"BASE\",\n\t\tcustomFields: [],\n\t\tcustomFieldItems: [],\n\t\tcustomFieldWidgets: null,\n\t\tmodelField: null,\n\t\thoverAttr: {},\n\t\tloader: false,\n\t\tremovedCustomFields: [],\n\t\terrorList: {},\n\t\tentityType: ENTITY_TYPE.META,\n\t\tactualType: null,\n\t\textensionMoves: [],\n\t\t// sidePanel: true,\n\t\tattrsList: [],\n\t\tremovedTranslationList: [],\n\t});\n\tconst { widgets } = state;\n\n\tfunction getAllChildrenIds(id, widgetType) {\n\t\tconst widgets =\n\t\t\twidgetType === \"customField\" ? state.customFieldWidgets : state.widgets;\n\t\tconst collectIds = (parent) => {\n\t\t\tconst { items = [] } = widgets[parent];\n\t\t\treturn items.reduce(\n\t\t\t\t(all, item) => all.concat(collectIds(item)),\n\t\t\t\t[parent]\n\t\t\t);\n\t\t};\n\t\treturn collectIds(id);\n\t}\n\n\tfunction onExtension(moveIds, state) {\n\t\tif (state.exView && !Utils.isCreatedFromStudio(state.exView)) {\n\t\t\tgenerateExtension(moveIds, state);\n\t\t}\n\t}\n\n\t// update widget properties\n\tfunction onWidgetChange(id, props, reset = false) {\n\t\tsetState((draft) => {\n\t\t\tgenerateHistory(draft);\n\t\t\tconst isCustomField = draft.editWidgetType === \"customField\";\n\t\t\tconst extendList = [];\n\t\t\tsetErrorList(props, draft, id, isCustomField);\n\t\t\tconst widgets =\n\t\t\t\tdraft.editWidgetType === \"customField\"\n\t\t\t\t\t? draft.customFieldWidgets\n\t\t\t\t\t: draft.widgets;\n\t\t\tif (reset) {\n\t\t\t\twidgets[id] = {};\n\t\t\t}\n\t\t\tconst widget =\n\t\t\t\tdraft.editWidgetType === \"customField\" && draft.customFieldWidgets\n\t\t\t\t\t? draft.customFieldWidgets[id]\n\t\t\t\t\t: draft.widgets && draft.widgets[id];\n\t\t\tif (widget) {\n\t\t\t\tObject.keys(props).forEach((key) => {\n\t\t\t\t\tlet value = props[key];\n\t\t\t\t\tif (/^[a-z]/i.test(widget[\"name\"])) {\n\t\t\t\t\t\twidget[\"name\"] = caseConverter(\n\t\t\t\t\t\t\twidget[\"name\"],\n\t\t\t\t\t\t\t!(props[\"type\"] === TYPE.form)\n\t\t\t\t\t\t);\n\t\t\t\t\t}\n\t\t\t\t\tlet doChange = true;\n\t\t\t\t\t// add change in move\n\t\t\t\t\tconst _value = widget[key] === undefined ? \"\" : widget[key];\n\t\t\t\t\tif (_value !== value) {\n\t\t\t\t\t\tconst xPath = id === -1 ? \"/\" : widgets[id].xPath;\n\t\t\t\t\t\tlet _value = [undefined, null].includes(value) ? \"\" : value;\n\n\t\t\t\t\t\tisExtensionView(state) &&\n\t\t\t\t\t\t\textendList.push({\n\t\t\t\t\t\t\t\tname: \"attribute\",\n\t\t\t\t\t\t\t\ttarget: xPath,\n\t\t\t\t\t\t\t\tattributes: {\n\t\t\t\t\t\t\t\t\tname: Utils.keyReplacer(key, MODEL_TYPE.BASE),\n\t\t\t\t\t\t\t\t\tvalue: Utils.valueConverter(_value, key),\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\tid,\n\t\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t\tif (key === \"colSpan\") {\n\t\t\t\t\t\tconst parentId = Object.keys(widgets).find(\n\t\t\t\t\t\t\t(x) => (widgets[x].items || []).indexOf(id) > -1\n\t\t\t\t\t\t);\n\t\t\t\t\t\tvalue = Math.min(\n\t\t\t\t\t\t\tNumber((widgets[parentId] && widgets[parentId].cols) || value),\n\t\t\t\t\t\t\tvalue\n\t\t\t\t\t\t);\n\t\t\t\t\t\tif (widgets && parentId && widgets[parentId].type === TYPE.panel) {\n\t\t\t\t\t\t\tconst { itemSpan } = JSON.parse(\n\t\t\t\t\t\t\t\t(widgets[parentId] || {}).widgetAttrs || \"{}\"\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\tvalue = itemSpan || value;\n\t\t\t\t\t\t}\n\t\t\t\t\t} else if (key === \"cols\" && value) {\n\t\t\t\t\t\tvalue = Math.min(12, Number(value));\n\t\t\t\t\t} else if (key === \"widgetAttrs\") {\n\t\t\t\t\t\tconst newValue = JSON.parse(value || \"{}\");\n\t\t\t\t\t\tconst items = widgets[id].items;\n\t\t\t\t\t\titems &&\n\t\t\t\t\t\t\titems.forEach((item) => {\n\t\t\t\t\t\t\t\tconst child = widgets[item];\n\t\t\t\t\t\t\t\tlet widgetAttrs = JSON.parse(child.widgetAttrs || \"{}\");\n\t\t\t\t\t\t\t\tif (!widgetAttrs[\"colSpan\"]) {\n\t\t\t\t\t\t\t\t\tchild.colSpan = newValue.itemSpan;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t\tif (doChange) {\n\t\t\t\t\t\twidget[key] = value;\n\t\t\t\t\t\tkey === \"layout\" &&\n\t\t\t\t\t\t\tvalue === PANEL_TYPE.stack &&\n\t\t\t\t\t\t\t(widget.cols = 12);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t\tif (\n\t\t\t\tdraft.editWidgetType !== \"customField\" &&\n\t\t\t\tdraft.modelType === MODEL_TYPE.BASE\n\t\t\t) {\n\t\t\t\tonExtension(extendList, draft);\n\t\t\t\tgenerateXpath(draft);\n\t\t\t}\n\t\t});\n\t}\n\n\t// remove widget\n\tfunction onRemove(panelId, index, id, widgetType) {\n\t\tconst extendList = [];\n\t\tconst isCustomField = widgetType === \"customField\";\n\t\tsetState((draft) => {\n\t\t\tgenerateHistory(draft);\n\t\t\tconst widgets =\n\t\t\t\twidgetType === \"customField\" ? draft.customFieldWidgets : draft.widgets;\n\t\t\tconst widgetItems =\n\t\t\t\twidgetType === \"customField\" ? \"customFieldItems\" : \"items\";\n\t\t\tconst widget = widgets[id];\n\n\t\t\tif (!isCustomField && draft.modelType === MODEL_TYPE.BASE) {\n\t\t\t\tconst index = draft.metaFieldStore.findIndex(\n\t\t\t\t\t(f) =>\n\t\t\t\t\t\t(f.typeName === widget.typeName || widget.type === \"field\") &&\n\t\t\t\t\t\tf.name === widget.name\n\t\t\t\t);\n\t\t\t\tif (index !== -1) {\n\t\t\t\t\tdraft.metaFields.unshift(draft.metaFieldStore[index]);\n\t\t\t\t}\n\t\t\t}\n\t\t\tconst isPanel = panelId && IDS.form !== panelId;\n\t\t\tindex = (isPanel ? widgets[panelId].items : draft[widgetItems]).findIndex(\n\t\t\t\t(x) => `${x}` === `${id}`\n\t\t\t);\n\t\t\tif (index > -1 && widgets[id]) {\n\t\t\t\tlet ids = getAllChildrenIds(id, widgetType);\n\t\t\t\tids.forEach((id) => {\n\t\t\t\t\tif (isCustomField || state.modelType === MODEL_TYPE.CUSTOM) {\n\t\t\t\t\t\tconst widget = widgets[id];\n\t\t\t\t\t\tif (\n\t\t\t\t\t\t\twidget.id &&\n\t\t\t\t\t\t\t(state.modelType === MODEL_TYPE.CUSTOM ? widget.version : true)\n\t\t\t\t\t\t) {\n\t\t\t\t\t\t\tdraft.removedCustomFields.push({\n\t\t\t\t\t\t\t\tid: widget.id,\n\t\t\t\t\t\t\t\tversion: widget.version,\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\tconst childrenIds = [...ids];\n\t\t\t\tif (isPanel) {\n\t\t\t\t\tif (\n\t\t\t\t\t\twidgets[panelId].layout === PANEL_TYPE.grid &&\n\t\t\t\t\t\t![TYPE.menubar, TYPE.toolbar].includes(widgets[panelId].type)\n\t\t\t\t\t) {\n\t\t\t\t\t\tconst arrangeItems = arrangeGrid(\n\t\t\t\t\t\t\tdraft,\n\t\t\t\t\t\t\t{ panelId, index, id },\n\t\t\t\t\t\t\twidgetType\n\t\t\t\t\t\t);\n\t\t\t\t\t\tids = ids.concat(arrangeItems.ids);\n\t\t\t\t\t\tisExtensionView(state) &&\n\t\t\t\t\t\t\textendList.push(...arrangeItems.extendList);\n\t\t\t\t\t} else {\n\t\t\t\t\t\twidgets[panelId].items.splice(index, 1);\n\t\t\t\t\t}\n\t\t\t\t\t// draft.widgets[panelId].items.splice(index, 1);\n\t\t\t\t} else {\n\t\t\t\t\tdraft[widgetItems].splice(index, 1);\n\t\t\t\t}\n\t\t\t\tif (widgets[id]) {\n\t\t\t\t\tisExtensionView(state) &&\n\t\t\t\t\t\textendList.push({ name: \"replace\", target: widgets[id].xPath });\n\t\t\t\t}\n\t\t\t\tids.forEach((id) => {\n\t\t\t\t\tif (widgets[id]) {\n\t\t\t\t\t\tif (!childrenIds.includes(id)) {\n\t\t\t\t\t\t\tisExtensionView(state) &&\n\t\t\t\t\t\t\t\textendList.push({ name: \"replace\", target: widgets[id].xPath });\n\t\t\t\t\t\t}\n\t\t\t\t\t\tdelete widgets[id];\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\tif (ids.indexOf(draft.editWidget) > -1) {\n\t\t\t\t\tdraft.editWidget = null;\n\t\t\t\t}\n\t\t\t}\n\t\t\tvalidateOnRemove(draft, id);\n\t\t\tif (!isCustomField && draft.modelType === MODEL_TYPE.BASE) {\n\t\t\t\tvalidateParentPanelItems(draft, panelId);\n\t\t\t\tonExtension(extendList, draft);\n\t\t\t\tgenerateXpath(draft);\n\t\t\t}\n\t\t});\n\t}\n\n\t// select widget, to open properties editor\n\tfunction onSelect(id = null, type = null) {\n\t\tsetState((draft) => {\n\t\t\tdraft.editWidget = id;\n\t\t\tdraft.tabIndex = 0;\n\t\t\tdraft.editWidgetType = type;\n\t\t});\n\t}\n\n\tfunction addTabPanel(attrs, id) {\n\t\tconst panelId = _.uniqueId();\n\t\tsetState((draft) => {\n\t\t\tconst widgets =\n\t\t\t\tdraft.modelType === MODEL_TYPE.BASE ? \"customFieldWidgets\" : \"widgets\";\n\t\t\tdraft[widgets][id] = {\n\t\t\t\t...attrs,\n\t\t\t\titems: [...(attrs.items || []), panelId],\n\t\t\t};\n\t\t\tdraft[widgets][panelId] = {\n\t\t\t\t...PANEL_PROPS,\n\t\t\t\tname: `panel${panelId}`,\n\t\t\t\ttitle: \"Tab\",\n\t\t\t\twidgetAttrs: JSON.stringify({ tab: \"true\" }),\n\t\t\t};\n\t\t\tdraft.editWidgetType =\n\t\t\t\tdraft.modelType === MODEL_TYPE.BASE ? \"customField\" : null;\n\t\t});\n\t\tconst _type = state.modelType === MODEL_TYPE.BASE ? \"customField\" : null;\n\t\tonWidgetChange(id, {\n\t\t\tcurrent: panelId,\n\t\t\t_type,\n\t\t});\n\t\tonSelect(panelId, _type);\n\t}\n\n\t// set current dragging widget\n\tfunction onDrag(id = null, { props, isDrop } = {}) {\n\t\tsetState((draft) => {\n\t\t\tconst _extendList = [];\n\t\t\tconst { attrs = {} } = props;\n\t\t\tconst _attrs = {\n\t\t\t\ttype: attrs.type,\n\t\t\t\ttitle: attrs.label,\n\t\t\t\tname: attrs.name,\n\t\t\t\trelationship: attrs.relationship,\n\t\t\t\tmappedBy: attrs.mappedBy,\n\t\t\t\t...attrs,\n\t\t\t};\n\t\t\tif (attrs && attrs.name === \"string\") {\n\t\t\t\t_attrs[\"visibleInGrid\"] = true;\n\t\t\t}\n\t\t\tif (attrs && attrs.name === \"selection\") {\n\t\t\t\t_attrs[\"updateSelection\"] = true;\n\t\t\t}\n\t\t\tconst {\n\t\t\t\tdragWidget,\n\t\t\t\thoverWidget,\n\t\t\t\teditWidget,\n\t\t\t\tdragWidgetProps,\n\t\t\t\twidgets,\n\t\t\t\tcustomFieldWidgets,\n\t\t\t} = draft;\n\t\t\tdraft.dragWidget = null;\n\t\t\tdraft.hoverWidget = null;\n\t\t\tconst extraAttr = { ...draft.hoverAttr };\n\t\t\tif (_attrs.widgetAttrs && extraAttr.widgetAttrs) {\n\t\t\t\tconst _eWidgetAttr = JSON.parse(extraAttr.widgetAttrs || \"{}\");\n\t\t\t\tconst _attrsWidgetAttr = JSON.parse(_attrs.widgetAttrs || \"{}\");\n\t\t\t\textraAttr.widgetAttrs = JSON.stringify({\n\t\t\t\t\t..._attrsWidgetAttr,\n\t\t\t\t\t..._eWidgetAttr,\n\t\t\t\t});\n\t\t\t}\n\t\t\tdraft.dragWidgetProps = Object.assign({}, props, {\n\t\t\t\tattrs: { ..._attrs, ...extraAttr },\n\t\t\t});\n\n\t\t\tif (editWidget && editWidget === dragWidget) {\n\t\t\t\tdraft.editWidget = null;\n\t\t\t}\n\t\t\tif (isDrop) {\n\t\t\t\tif (!hoverWidget || !dragWidgetProps) return;\n\t\t\t\tgenerateHistory(draft);\n\t\t\t\tconst index = draft.metaFields.findIndex(\n\t\t\t\t\t(f) =>\n\t\t\t\t\t\tf.typeName === dragWidgetProps.attrs.typeName &&\n\t\t\t\t\t\tf.name === dragWidgetProps.attrs.name\n\t\t\t\t);\n\t\t\t\tif (index !== -1) {\n\t\t\t\t\tdraft.metaFields.splice(index, 1);\n\t\t\t\t}\n\t\t\t\tdragWidgetProps.attrs = {\n\t\t\t\t\t...dragWidgetProps.attrs,\n\t\t\t\t\t...draft.hoverAttr,\n\t\t\t\t};\n\t\t\t\tconst { extendList, newId } = reorderGrid({\n\t\t\t\t\thoverWidget,\n\t\t\t\t\tdragWidgetProps,\n\t\t\t\t})(draft);\n\t\t\t\t_extendList.push(...extendList);\n\t\t\t\tlet hoverPanel;\n\t\t\t\tif (hoverWidget._type !== \"customField\") {\n\t\t\t\t\thoverPanel = draft.widgets[hoverWidget.panelId];\n\t\t\t\t}\n\t\t\t\tif (\n\t\t\t\t\thoverWidget.panelId &&\n\t\t\t\t\t![TYPE.menubar, TYPE.toolbar].includes(hoverPanel?.type)\n\t\t\t\t) {\n\t\t\t\t\tconst { extendList = [] } = checkGridEmptyCells(\n\t\t\t\t\t\tdraft,\n\t\t\t\t\t\thoverWidget.panelId,\n\t\t\t\t\t\thoverWidget._type\n\t\t\t\t\t);\n\t\t\t\t\t_extendList.push(...extendList);\n\t\t\t\t}\n\t\t\t\tif (\n\t\t\t\t\tdragWidgetProps.panelId &&\n\t\t\t\t\thoverWidget.panelId !== dragWidgetProps.panelId &&\n\t\t\t\t\t![TYPE.menubar, TYPE.toolbar].includes(hoverPanel?.type)\n\t\t\t\t) {\n\t\t\t\t\tconst { extendList = [] } = checkGridEmptyCells(\n\t\t\t\t\t\tdraft,\n\t\t\t\t\t\tdragWidgetProps.panelId,\n\t\t\t\t\t\thoverWidget._type\n\t\t\t\t\t);\n\t\t\t\t\t_extendList.push(...extendList);\n\t\t\t\t}\n\t\t\t\tif (\n\t\t\t\t\thoverWidget._type !== \"customField\" &&\n\t\t\t\t\tdraft.modelType === MODEL_TYPE.BASE\n\t\t\t\t) {\n\t\t\t\t\tvalidateParentPanelItems(draft, dragWidgetProps.panelId);\n\t\t\t\t\tvalidateParentPanelItems(draft, hoverWidget.panelId);\n\t\t\t\t\tonExtension(_extendList, draft);\n\t\t\t\t\tgenerateXpath(draft);\n\t\t\t\t}\n\t\t\t\tdraft.hoverAttr = {};\n\t\t\t\t/**\n\t\t\t\t * While adding panel tabs add default tab panel\n\t\t\t\t */\n\t\t\t\tif (\n\t\t\t\t\tdragWidgetProps?.attrs?.type === TYPE.tabs &&\n\t\t\t\t\t!dragWidgetProps?.attrs?.items?.length\n\t\t\t\t) {\n\t\t\t\t\tconst allWidgets =\n\t\t\t\t\t\tdraft.modelType === MODEL_TYPE.BASE ? customFieldWidgets : widgets;\n\t\t\t\t\tconst tabId = Object.keys(allWidgets || {})?.find(\n\t\t\t\t\t\t(key) => allWidgets[key]?.type === TYPE.tabs\n\t\t\t\t\t);\n\t\t\t\t\taddTabPanel(state.dragWidgetProps?.attrs, tabId);\n\t\t\t\t}\n\t\t\t\tif (newId) {\n\t\t\t\t\tonSelect(newId, hoverWidget?._type);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tdraft.dragWidget = id;\n\t\t\t}\n\t\t});\n\t}\n\n\tfunction onTranslationRemove(key) {\n\t\tsetState((draft) => {\n\t\t\tdraft.removedTranslationList.push(key);\n\t\t});\n\t}\n\n\tfunction onHover(hoverWidget) {\n\t\tsetState((draft) => {\n\t\t\tdraft.hoverWidget = hoverWidget;\n\t\t});\n\t}\n\n\t// move widget in form\n\tfunction onMove({ source, destination }, flag, _type) {\n\t\tconst resolver = (isMoved) => ({ isMoved });\n\n\t\tif (\n\t\t\t// avoid drop target of form itself\n\t\t\t!source ||\n\t\t\t!destination ||\n\t\t\t(destination.id === IDS.form && state.items.length > 1)\n\t\t) {\n\t\t\treturn resolver(false);\n\t\t}\n\n\t\t// on create widget case\n\t\tif (Object.values(IDS.createWidgets).indexOf(source.id) > -1) {\n\t\t\treturn resolver(true);\n\t\t}\n\n\t\tconst _widgets =\n\t\t\t_type === \"customField\" ? state.customFieldWidgets : widgets;\n\t\tif (\n\t\t\t// case for create new widget\n\t\t\t// special case for exclusive\n\t\t\t(!source.attrs.isNew && checkExclusive(_widgets, source, destination)) ||\n\t\t\t// avoid to drag panel on its one of children element\n\t\t\t([TYPE.panel, TYPE.tabs].includes(source.attrs.type) &&\n\t\t\t\tgetAllChildrenIds(source.id, _type).indexOf(\n\t\t\t\t\tdestination.id === IDS.dumpField\n\t\t\t\t\t\t? destination.panelId\n\t\t\t\t\t\t: destination.id\n\t\t\t\t) > -1)\n\t\t) {\n\t\t\treturn resolver(false);\n\t\t}\n\n\t\treturn resolver(true);\n\t}\n\n\tfunction setHoverAttr(attr) {\n\t\tsetState((draft) => {\n\t\t\tdraft.hoverAttr = attr;\n\t\t});\n\t}\n\n\tconst startLoader = React.useCallback(\n\t\tfunction startLoader() {\n\t\t\tsetState((draft) => {\n\t\t\t\tdraft.loader = true;\n\t\t\t});\n\t\t},\n\t\t[setState]\n\t);\n\n\tfunction undo() {\n\t\tsetState((draft) => {\n\t\t\tif (draft.past.length) {\n\t\t\t\tdraft.future.unshift({\n\t\t\t\t\twidgets: original(draft.widgets),\n\t\t\t\t\titems: original(draft.items),\n\t\t\t\t\textensionMoves: original(draft.extensionMoves),\n\t\t\t\t\tcustomFieldWidgets: original(draft.customFieldWidgets),\n\t\t\t\t\tcustomFields: original(draft.customFields),\n\t\t\t\t\tcustomFieldItems: original(draft.customFieldItems),\n\t\t\t\t\tmetaFields: original(draft.metaFields),\n\t\t\t\t\tremovedCustomFields: original(draft.removedCustomFields),\n\t\t\t\t\terrorList: original(draft.errorList),\n\t\t\t\t});\n\t\t\t\tsetPresent(draft.past[draft.past.length - 1], draft);\n\t\t\t\tdraft.past.splice(draft.past.length - 1, 1);\n\t\t\t}\n\t\t});\n\t}\n\n\tfunction redo() {\n\t\tsetState((draft) => {\n\t\t\tif (draft.future.length) {\n\t\t\t\tdraft.past.push({\n\t\t\t\t\twidgets: original(draft.widgets),\n\t\t\t\t\titems: original(draft.items),\n\t\t\t\t\textensionMoves: original(draft.extensionMoves),\n\t\t\t\t\tcustomFieldWidgets: original(draft.customFieldWidgets),\n\t\t\t\t\tcustomFieldItems: original(draft.customFieldItems),\n\t\t\t\t\tmetaFields: original(draft.metaFields),\n\t\t\t\t\tcustomFields: original(draft.customFields),\n\t\t\t\t\tremovedCustomFields: original(draft.removedCustomFields),\n\t\t\t\t\terrorList: original(draft.errorList),\n\t\t\t\t});\n\t\t\t\tsetPresent(draft.future[0], draft);\n\t\t\t\tdraft.future.splice(0, 1);\n\t\t\t}\n\t\t});\n\t}\n\n\tfunction setPresent(object, draft) {\n\t\tObject.keys(object).forEach((key) => {\n\t\t\tdraft[key] = original(object[key]);\n\t\t});\n\t}\n\n\tfunction generateHistory(draft) {\n\t\tdraft.past.push({\n\t\t\twidgets: original(draft.widgets),\n\t\t\titems: original(draft.items),\n\t\t\textensionMoves: original(draft.extensionMoves),\n\t\t\tcustomFieldWidgets: original(draft.customFieldWidgets),\n\t\t\tcustomFields: original(draft.customFields),\n\t\t\tcustomFieldItems: original(draft.customFieldItems),\n\t\t\tmetaFields: original(draft.metaFields),\n\t\t\tremovedCustomFields: original(draft.removedCustomFields),\n\t\t\terrorList: original(draft.errorList),\n\t\t});\n\t\tif (draft.future.length) {\n\t\t\tdraft.future = [];\n\t\t}\n\t}\n\n\tfunction clearHistory(draft) {\n\t\tdraft.future = [];\n\t\tdraft.past = [];\n\t}\n\n\tconst value = {\n\t\tonWidgetChange,\n\t\tonMove,\n\t\tonDrag,\n\t\tonRemove,\n\t\tonHover,\n\t\tonSelect,\n\t\tstate,\n\t\tupdate: setState,\n\t\tsetHoverAttr,\n\t\tstartLoader,\n\t\tundo,\n\t\tredo,\n\t\tclearHistory,\n\t\tonTranslationRemove,\n\t\taddTabPanel,\n\t};\n\treturn (\n\t\t<StoreContext.Provider value={value}>{children}</StoreContext.Provider>\n\t);\n}\n\nexport function useStore() {\n\treturn React.useContext(StoreContext);\n}\n\nexport function useStoreState() {\n\tconst { state } = React.useContext(StoreContext);\n\treturn state;\n}\n\nexport function useWidget(id) {\n\tconst { widgets } = useStore();\n\treturn widgets[id];\n}\n\nexport default StoreProvider;\n","import Utils from \"./../utils\";\nimport { TYPE } from \"./../constants\";\n\nconst getItemType = (type) => {\n\tconst types = [\"viewer\", \"editor\", \"hilite\"];\n\treturn types.includes(type) ? \"field\" : type;\n};\n\nexport function eGeneratePath(widgets, items = [], itemId, path = \"\") {\n\tif (itemId === -1) {\n\t\treturn \"\";\n\t}\n\tconst isFirstLevel = path === \"\";\n\tconst hasSameNameInParentItems = (items, itemId) => {\n\t\tconst widget = widgets[itemId];\n\t\tconst sameWidgets = items.filter(\n\t\t\t(item) =>\n\t\t\t\titem !== itemId &&\n\t\t\t\twidgets[item] &&\n\t\t\t\t[widgets[item].name, widgets[item].originalName].includes(widget.name)\n\t\t);\n\t\treturn sameWidgets.length > 0;\n\t};\n\n\tconst getSameItemIndex = (items, itemId) => {\n\t\tconst widget = widgets[itemId];\n\t\tconst sameWidgets = items.filter(\n\t\t\t(item) =>\n\t\t\t\twidgets[item] &&\n\t\t\t\t[widgets[item].name, widgets[item].originalName].includes(widget.name)\n\t\t);\n\t\treturn sameWidgets.indexOf(itemId) + 1;\n\t};\n\n\tconst getTypeWiseItemIndex = (items, type, itemId) => {\n\t\tconst sameWidgets = items.filter(\n\t\t\t(item) =>\n\t\t\t\twidgets[item] &&\n\t\t\t\tgetItemType(Utils.getWidgetType(widgets[item], \"field\")) === type\n\t\t);\n\t\treturn sameWidgets.indexOf(itemId) + 1;\n\t};\n\n\tconst isUniquePanel = () => {\n\t\tconst widget = widgets[itemId];\n\t\tif (!widget.name) {\n\t\t\treturn false;\n\t\t}\n\t\tconst widgetList = Object.values(widgets);\n\t\tconst sameWidgets = widgetList.filter((w) => w.name === widget.name);\n\t\treturn sameWidgets.length === 1;\n\t};\n\n\tconst canStopParentLink = () => {\n\t\tif (isFirstLevel) {\n\t\t\treturn false;\n\t\t}\n\t\tif (!isUniquePanel()) {\n\t\t\treturn false;\n\t\t}\n\t\treturn true;\n\t};\n\n\tlet findRoot = true;\n\tconst widgetList = Object.values(widgets);\n\tconst widgetIds = Object.keys(widgets);\n\twidgetList.forEach((widget, i) => {\n\t\tif (widget.items) {\n\t\t\tconst index = widget.items.findIndex((e) => e === itemId);\n\t\t\tif (index !== -1) {\n\t\t\t\tfindRoot = false;\n\t\t\t\tconst _widget = widgets[itemId];\n\t\t\t\tconst widgetType = getItemType(Utils.getWidgetType(_widget, \"field\"));\n\t\t\t\tif (_widget.name) {\n\t\t\t\t\tlet itemPath = `/${widgetType}[@name='${_widget.name}']`;\n\t\t\t\t\tif (hasSameNameInParentItems(widget.items, itemId)) {\n\t\t\t\t\t\tconst itemIndex = getSameItemIndex(widget.items, itemId);\n\t\t\t\t\t\tif (itemIndex > 0) {\n\t\t\t\t\t\t\titemPath = `${itemPath}[${itemIndex}]`;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tpath = `${itemPath}${path}`;\n\t\t\t\t} else {\n\t\t\t\t\tconst itemIndex = getTypeWiseItemIndex(\n\t\t\t\t\t\twidget.items,\n\t\t\t\t\t\twidgetType,\n\t\t\t\t\t\titemId\n\t\t\t\t\t);\n\t\t\t\t\tpath = `/${widgetType}[${itemIndex}]${path}`;\n\t\t\t\t}\n\t\t\t\tif (!canStopParentLink()) {\n\t\t\t\t\tpath = eGeneratePath(widgets, items, widgetIds[i], path);\n\t\t\t\t} else {\n\t\t\t\t\tpath = `/${path}`;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t});\n\tif (findRoot) {\n\t\tconst index = items.findIndex((e) => e === itemId);\n\t\tif (index !== -1) {\n\t\t\tconst _widget = widgets[itemId];\n\t\t\tif (_widget.name) {\n\t\t\t\tlet itemPath = `//${_widget.type}[@name='${_widget.name}']`;\n\t\t\t\tif ([TYPE.menubar, TYPE.toolbar, TYPE.divider].includes(_widget.type)) {\n\t\t\t\t\titemPath = `//${_widget.type}`;\n\t\t\t\t}\n\t\t\t\tif (hasSameNameInParentItems(items, itemId)) {\n\t\t\t\t\tconst itemIndex = getSameItemIndex(items, itemId);\n\t\t\t\t\tif (itemIndex > 0) {\n\t\t\t\t\t\titemPath = `${itemPath}[${itemIndex}]`;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tpath = `${itemPath}${path}`;\n\t\t\t} else {\n\t\t\t\tconst itemIndex = getTypeWiseItemIndex(items, _widget.type, itemId);\n\t\t\t\tpath = `//${_widget.type}[${itemIndex}]${path}`;\n\n\t\t\t\t// path = `/*[${index + 1}]${path}`;\n\t\t\t}\n\t\t}\n\t}\n\treturn path;\n}\n\n// generate xpath for all widgets\nexport function generateXpath(draft) {\n\tObject.keys(draft.widgets || {}).forEach((widgetId) => {\n\t\tconst path = eGeneratePath(draft.widgets, draft.items, widgetId);\n\t\tdraft.widgets[widgetId].xPath = path;\n\t});\n}\n","import _, { camelCase } from \"lodash\";\nimport {\n\tTYPE,\n\tFIELD_TYPE,\n\tPANEL_TYPE,\n\tIDS,\n\tMODEL_TYPE,\n\tDEFAULT_VALUE,\n\ttypeReplacer as TYPE_REPLACER,\n} from \"./constants\";\nimport { modelFields } from \"./fields\";\nimport convert from \"xml-js\";\nimport { validate } from \"./store/validation\";\nimport format from \"xml-beautifier\";\nimport { eGeneratePath } from \"./store/xpathGenerator\";\nimport { processMoves } from \"./store/computeXML\";\nimport dasherize from \"dasherize\";\n\nexport function camleCaseString(word) {\n\tlet string =\n\t\tword &&\n\t\tword.replace(/([A-Z])/g, \" $1\").replace(/^./, function (str) {\n\t\t\treturn str.toUpperCase();\n\t\t});\n\treturn string;\n}\n\nexport const caseConverter = (value, isCamelCase = true) => {\n\tif (!value) return;\n\tvalue = value.trim();\n\tlet convertedText;\n\tif (isCamelCase) {\n\t\tconvertedText = camelCase(value);\n\t} else {\n\t\tlet textToConvert = camelCase(value);\n\t\tconvertedText = textToConvert[0].toUpperCase() + textToConvert.slice(1);\n\t}\n\treturn convertedText;\n};\n\nexport const capitalizeFirst = (value) => {\n\tlet result = value.replace(/([A-Z])/g, \" $1\");\n\tlet finalResult =\n\t\tresult && result.charAt(0).toUpperCase() + result.slice(1).toLowerCase();\n\treturn finalResult;\n};\n\nexport function translate(str) {\n\tif (window && window.top && window.top._t && typeof str === \"string\") {\n\t\treturn window.top._t(str);\n\t}\n\treturn str;\n}\n\nconst getSpacer = ({ widget, id, ...other }) => ({\n\tcolSpan: widget.colSpan || 1,\n\tserverType: FIELD_TYPE.spacer,\n\ttype: TYPE.field,\n\tisDummy: true,\n\tname: `spacer${id}`,\n\ttitle: \"Spacer\",\n\t...other,\n});\n\nconst isDummyWidget = (state, id, isCustomField = false) => {\n\tconst widgets = isCustomField ? state.customFieldWidgets : state.widgets;\n\treturn id === true || (widgets[id] && widgets[id].isDummy);\n};\n\nexport const getGrid = (\n\tstate,\n\t{ cols = 12, items },\n\ttrackElement,\n\tisCustomField = false\n) => {\n\tconst widgets = isCustomField ? state.customFieldWidgets : state.widgets;\n\tconst grid = [];\n\tlet ind = 0;\n\tlet span = 0;\n\tlet row = [];\n\n\tlet fillRow = (start) => {\n\t\tfor (let i = start; i < cols; i++) {\n\t\t\trow.push({ index: i, item: true, colSpan: 1, indices: [i] });\n\t\t}\n\t};\n\n\titems.forEach((item) => {\n\t\tlet colSpan = Number(widgets[item].colSpan || 1);\n\t\tspan += colSpan;\n\t\t//next row\n\t\tif (span > cols) {\n\t\t\tfillRow(ind);\n\t\t\tind = 0;\n\t\t\tspan = colSpan;\n\t\t\tgrid.push(row);\n\t\t\trow = [];\n\t\t}\n\t\ttrackElement &&\n\t\t\ttrackElement(item, {\n\t\t\t\tcolumn: ind,\n\t\t\t\trow: grid.length,\n\t\t\t});\n\t\trow.push({\n\t\t\tindex: ind,\n\t\t\titem,\n\t\t\tcolSpan,\n\t\t\tindices: new Array(colSpan).fill(0).map((x, i) => ind + i),\n\t\t});\n\t\tind += colSpan;\n\t});\n\n\tfillRow(ind);\n\tgrid.push(row);\n\treturn grid;\n};\n\nexport const checkGridEmptyCells = (state, panelId, modelFieldType) => {\n\tconst extendList = [];\n\tconst isCustomField = modelFieldType === \"customField\";\n\tconst widgets = isCustomField ? state.customFieldWidgets : state.widgets;\n\n\tconst panel = widgets[panelId];\n\tif (panel.layout !== PANEL_TYPE.grid) return {};\n\tconst { cols = 12, items } = panel;\n\tconst grid = getGrid(\n\t\tstate,\n\t\t{\n\t\t\tcols,\n\t\t\titems,\n\t\t},\n\t\tnull,\n\t\tisCustomField\n\t);\n\tlet removeIds = [];\n\tlet emptyColumns = {};\n\tgrid.forEach((row) => {\n\t\trow.forEach((cell, i) => {\n\t\t\tif (isDummyWidget(state, cell.item, isCustomField)) {\n\t\t\t\tlet target = emptyColumns[cell.index] || [];\n\t\t\t\ttarget.push(cell);\n\t\t\t\temptyColumns[cell.index] = target;\n\t\t\t}\n\t\t});\n\t\tif (row.every((cell) => isDummyWidget(state, cell.item, isCustomField))) {\n\t\t\tremoveIds = removeIds.concat(row.map((x) => x.item));\n\t\t}\n\t});\n\n\t// Object.values(emptyColumns)\n\t// \t.filter((arr) => arr.length === grid.length)\n\t// \t.forEach((row) => {\n\t// \t\tremoveIds = removeIds.concat(row.map((x) => x.item));\n\t// \t\t// panel.cols = Number(panel.cols || 12) - 1;\n\t// \t});\n\n\tif (removeIds.length) {\n\t\tpanel.items = panel.items.filter((x) => removeIds.indexOf(x) === -1);\n\t\tremoveIds.forEach((x) => {\n\t\t\tif (widgets[x]) {\n\t\t\t\tisExtensionView(state) &&\n\t\t\t\t\textendList.push({ name: \"replace\", target: widgets[x].xPath, id: x });\n\t\t\t\twidgets[x] && delete widgets[x];\n\t\t\t}\n\t\t});\n\t}\n\treturn { extendList };\n};\n\nexport const arrangeGrid = (state, { id, index, panelId }, widgetType) => {\n\tconst extendList = [];\n\tconst isCustomField = widgetType === \"customField\";\n\tconst widgets = isCustomField ? state.customFieldWidgets : state.widgets;\n\tconst panel = widgets[panelId];\n\tconst removeWidget = widgets[id] || { colSpan: 1 };\n\tconst { cols = 12, items } = panel;\n\tconst isLastItemRemove = panel.items[panel.items.length - 1] === id;\n\tlet removeItem = { column: null, row: null };\n\tlet ids = [];\n\tlet columnCells = [];\n\tlet rowCells = [];\n\n\tconst grid = getGrid(\n\t\tstate,\n\t\t{ cols, items },\n\t\t(item, meta) => {\n\t\t\tif (item === id) {\n\t\t\t\tremoveItem = meta;\n\t\t\t}\n\t\t},\n\t\tisCustomField\n\t);\n\n\tgrid.forEach((gridRow, i) => {\n\t\tif (removeItem.row === i) {\n\t\t\tcolumnCells = gridRow.map((x) => x.item);\n\t\t}\n\t\tconst findCol = gridRow.find((x) => x.index === removeItem.column);\n\t\tif (findCol) {\n\t\t\trowCells.push(findCol.item);\n\t\t}\n\t});\n\n\tconst deleteItem = panel.items.splice(index, 1);\n\tconst isDummyItem = ($id) =>\n\t\t$id === id || isDummyWidget(state, $id, isCustomField);\n\n\tif (columnCells.every(isDummyItem)) {\n\t\tpanel.items = panel.items.filter((x) => !columnCells.includes(x));\n\t\tids = ids.concat(columnCells);\n\t}\n\n\tif (grid.length - 1 === rowCells.length && rowCells.every(isDummyItem)) {\n\t\tpanel.items = panel.items.filter((x) => !rowCells.includes(x));\n\t\t// panel.cols = Number(panel.cols) - removeWidget.colSpan;\n\n\t\tids = ids.concat(rowCells);\n\t}\n\n\tif (ids.length === 0 && !widgets[deleteItem].isDummy && !isLastItemRemove) {\n\t\tlet newId = _.uniqueId();\n\t\tlet otherProps = {};\n\t\tif (state.modelType === MODEL_TYPE.CUSTOM) {\n\t\t\totherProps = {\n\t\t\t\tmodel: removeWidget.model,\n\t\t\t\tmodelField: removeWidget.modelField,\n\t\t\t};\n\t\t}\n\t\twidgets[newId] = getSpacer({\n\t\t\twidget: {},\n\t\t\tid: newId,\n\t\t\tcolSpan: removeWidget.colSpan,\n\t\t\t...otherProps,\n\t\t});\n\t\tconst targetWidget = widgets[panel.items[index]];\n\t\tisExtensionView(state) &&\n\t\t\textendList.push({\n\t\t\t\tname: \"insert\",\n\t\t\t\tposition: \"before\",\n\t\t\t\telements: [widgets[newId]],\n\t\t\t\ttarget: targetWidget.xPath,\n\t\t\t});\n\t\tpanel.items.splice(index, 0, newId);\n\t}\n\treturn { ids: [...ids, id], extendList };\n};\n\nconst collectWidgets = ({ grid, items, widgetIndex, hoverCellRowIndex }) => {\n\tlet beforeWidgets = [];\n\tlet afterWidgets = [];\n\tlet flag = true;\n\tlet itemIndex = 0;\n\tif (grid.length) {\n\t\tgrid.forEach((cell, cellIndex) => {\n\t\t\tcell.colSpan = Number(cell.colSpan || 1);\n\t\t\t// once any valid id cell find, take its index as default value\n\t\t\tif (cell.id && flag && cellIndex < widgetIndex) {\n\t\t\t\titemIndex = items.indexOf(cell.id) + 1;\n\t\t\t}\n\t\t\t// consider hover row cells\n\t\t\tif (!cell.separator && cell.rowIndex <= hoverCellRowIndex) {\n\t\t\t\t// before hover widget\n\t\t\t\tif (cellIndex < widgetIndex) {\n\t\t\t\t\t// reset before row if you find valid cell with id\n\t\t\t\t\tif (cell.id) {\n\t\t\t\t\t\tbeforeWidgets = [];\n\t\t\t\t\t\titemIndex = items.indexOf(cell.id) + 1;\n\t\t\t\t\t} else if (items.length) {\n\t\t\t\t\t\tbeforeWidgets.push({\n\t\t\t\t\t\t\t...cell,\n\t\t\t\t\t\t\tcolSpan: cell.colSpan || 6,\n\t\t\t\t\t\t\tisSpacer: true,\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t\t// after hover widget\n\t\t\t\t} else if (flag && cellIndex > widgetIndex) {\n\t\t\t\t\tif (cell.id) {\n\t\t\t\t\t\titemIndex = items.indexOf(cell.id);\n\t\t\t\t\t\tflag = false;\n\t\t\t\t\t} else if (items.length) {\n\t\t\t\t\t\tafterWidgets.push({ ...cell, isSpacer: true });\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t\tif (items.length) {\n\t\t\t// find last item index\n\t\t\tconst lastItem = items[items.length - 1];\n\t\t\tconst lastItemIndex = grid.findIndex((x) => `${x.id}` === `${lastItem}`);\n\t\t\t// if drop at end of list then fill only one widget so empty after widgets\n\t\t\tif (widgetIndex > lastItemIndex && lastItemIndex !== -1) {\n\t\t\t\tafterWidgets = [];\n\t\t\t\titemIndex = items.length + 1;\n\t\t\t}\n\t\t}\n\t}\n\treturn { afterWidgets, beforeWidgets, itemIndex };\n};\n\nexport const setErrorList = (attrs, state, id, isCustomField) => {\n\tconst errors = validate(attrs, state.modelType, isCustomField);\n\tif (Object.keys(errors).length) {\n\t\tstate.errorList[id] = errors;\n\t} else if (state.errorList[id]) {\n\t\tdelete state.errorList[id];\n\t}\n};\n\nexport function isExtensionView(state) {\n\treturn state.exView && !isCreatedFromStudio(state.exView);\n}\n\n// reorder widgets based on dummy widgets\nexport const reorderGrid =\n\t({ hoverWidget, dragWidgetProps }) =>\n\t(state) => {\n\t\tconst extendList = [];\n\t\tconst isCustomField = hoverWidget._type === \"customField\";\n\t\tconst dragWidgetItems =\n\t\t\thoverWidget._type === \"customField\" && !dragWidgetProps.panelId\n\t\t\t\t? \"customFieldItems\"\n\t\t\t\t: \"items\";\n\t\tconst _items =\n\t\t\thoverWidget._type === \"customField\" && !hoverWidget.panelId\n\t\t\t\t? \"customFieldItems\"\n\t\t\t\t: \"items\";\n\t\tconst _widgets =\n\t\t\thoverWidget._type === \"customField\"\n\t\t\t\t? state.customFieldWidgets\n\t\t\t\t: state.widgets;\n\t\tconst destinationItems = (\n\t\t\t(hoverWidget.panelId ? _widgets[hoverWidget.panelId] : state)[_items] ||\n\t\t\t[]\n\t\t).slice();\n\t\tconst {\n\t\t\tcolSpan,\n\t\t\tgrid = [],\n\t\t\trow: hoverCellRowIndex,\n\t\t\trelatedColSpan,\n\t\t} = hoverWidget.meta;\n\t\t// remove isNew attribute\n\t\tif (dragWidgetProps.attrs && dragWidgetProps.attrs.isNew !== undefined) {\n\t\t\tdelete dragWidgetProps.attrs.isNew;\n\t\t}\n\t\t// clone colSpan of hover widget\n\t\tconst parentPanel = _widgets[hoverWidget.panelId];\n\t\tconst hoverType = parentPanel?.serverType;\n\t\tif (dragWidgetProps.attrs && !dragWidgetProps.attrs.colSpan) {\n\t\t\tif (\n\t\t\t\tcolSpan &&\n\t\t\t\tdragWidgetProps.attrs &&\n\t\t\t\t![TYPE.menu, TYPE.menuItem, TYPE.divider].includes(\n\t\t\t\t\tdragWidgetProps.attrs.type\n\t\t\t\t) &&\n\t\t\t\t![TYPE.toolbar, TYPE.menubar].includes(hoverType)\n\t\t\t) {\n\t\t\t\tconst existingColspan = dragWidgetProps.attrs.colSpan;\n\t\t\t\t// set itemSpan if exists\n\t\t\t\tif (hoverType === TYPE.panel && Number(parentPanel.itemSpan)) {\n\t\t\t\t\tdragWidgetProps.attrs.colSpan = Number(parentPanel.itemSpan);\n\t\t\t\t} else {\n\t\t\t\t\tdragWidgetProps.attrs.colSpan = relatedColSpan || colSpan;\n\t\t\t\t}\n\t\t\t\tif (isCustomField) {\n\t\t\t\t\t// set colSpan in widgetAttrs for custom field\n\t\t\t\t\tconst widgetAttrs = { colSpan: relatedColSpan || colSpan };\n\t\t\t\t\tdragWidgetProps.attrs.widgetAttrs = JSON.stringify(widgetAttrs);\n\t\t\t\t}\n\t\t\t\tif (`${dragWidgetProps.attrs.colSpan}` !== `${existingColspan}`) {\n\t\t\t\t\tif (state.modelType === MODEL_TYPE.CUSTOM) {\n\t\t\t\t\t\t// change widgetAttrs for colSpan\n\t\t\t\t\t\tconst widgetAttrs = JSON.parse(\n\t\t\t\t\t\t\tdragWidgetProps.attrs.widgetAttrs || \"{}\"\n\t\t\t\t\t\t);\n\t\t\t\t\t\twidgetAttrs.colSpan = relatedColSpan || colSpan;\n\t\t\t\t\t\tdragWidgetProps.attrs.widgetAttrs = JSON.stringify(widgetAttrs);\n\t\t\t\t\t}\n\t\t\t\t\tisExtensionView(state) &&\n\t\t\t\t\t\textendList.push({\n\t\t\t\t\t\t\tname: \"attribute\",\n\t\t\t\t\t\t\ttarget: dragWidgetProps.attrs.xPath,\n\t\t\t\t\t\t\tattributes: {\n\t\t\t\t\t\t\t\tname: \"colSpan\",\n\t\t\t\t\t\t\t\tvalue: dragWidgetProps.attrs.colSpan,\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\tif (state.modelType === MODEL_TYPE.CUSTOM) {\n\t\t\t\t\tconst widgetAttrs = JSON.parse(\n\t\t\t\t\t\tdragWidgetProps.attrs.widgetAttrs || \"{}\"\n\t\t\t\t\t);\n\t\t\t\t\twidgetAttrs.colSpan = 6;\n\t\t\t\t\tdragWidgetProps.attrs.widgetAttrs = JSON.stringify(widgetAttrs);\n\t\t\t\t}\n\t\t\t} else if (\n\t\t\t\tdragWidgetProps.attrs &&\n\t\t\t\tstate.modelType === MODEL_TYPE.CUSTOM\n\t\t\t) {\n\t\t\t\tconst widgetAttrs = JSON.parse(\n\t\t\t\t\tdragWidgetProps.attrs.widgetAttrs || \"{}\"\n\t\t\t\t);\n\t\t\t\twidgetAttrs.colSpan = relatedColSpan || colSpan;\n\t\t\t\tdragWidgetProps.attrs.colSpan = relatedColSpan || colSpan;\n\t\t\t\tdragWidgetProps.attrs.widgetAttrs = JSON.stringify(widgetAttrs);\n\t\t\t}\n\t\t}\n\t\tconst newIds = [];\n\t\tlet widgetIndex = Number(hoverWidget.index);\n\t\tlet {\n\t\t\tbeforeWidgets,\n\t\t\tafterWidgets,\n\t\t\titemIndex = 0,\n\t\t} = collectWidgets({\n\t\t\tgrid,\n\t\t\titems: destinationItems,\n\t\t\twidgetIndex,\n\t\t\thoverCellRowIndex,\n\t\t});\n\n\t\tlet isRemovedFromSameList = false;\n\t\t// if drag widget is existing one then remove it from its panel\n\t\tif (dragWidgetProps.id && _widgets[dragWidgetProps.id]) {\n\t\t\tconst sourcePanel = dragWidgetProps.panelId\n\t\t\t\t? _widgets[dragWidgetProps.panelId]\n\t\t\t\t: state;\n\t\t\tconst sourceItems = sourcePanel[dragWidgetItems];\n\t\t\tconst sourceItemIndex = sourceItems.indexOf(dragWidgetProps.id);\n\t\t\tif ([PANEL_TYPE.grid].includes(sourcePanel.layout)) {\n\t\t\t\tlet newId = _.uniqueId();\n\t\t\t\tconst isLastItem =\n\t\t\t\t\tsourceItems[sourceItems.length - 1] === dragWidgetProps.id;\n\t\t\t\tlet isLastItemInSamePanel = false;\n\t\t\t\tif (dragWidgetProps.panelId === hoverWidget.panelId) {\n\t\t\t\t\tif (dragWidgetProps.index < hoverWidget.index) {\n\t\t\t\t\t\tisLastItemInSamePanel = true;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tconst hoverParent = dragWidgetProps.panelId\n\t\t\t\t\t? _widgets[dragWidgetProps.panelId]\n\t\t\t\t\t: null;\n\t\t\t\tlet isPanelTab = false;\n\t\t\t\tif (\n\t\t\t\t\thoverParent &&\n\t\t\t\t\t[TYPE.tabs, TYPE.panelStack].includes(hoverParent.type)\n\t\t\t\t) {\n\t\t\t\t\tisPanelTab = true;\n\t\t\t\t}\n\t\t\t\tif (\n\t\t\t\t\t(isLastItem && !isLastItemInSamePanel) ||\n\t\t\t\t\tisPanelTab ||\n\t\t\t\t\t[TYPE.menubar, TYPE.toolbar].includes(hoverType)\n\t\t\t\t) {\n\t\t\t\t\tsourceItems.splice(sourceItemIndex, 1);\n\t\t\t\t} else {\n\t\t\t\t\tlet attrs = {\n\t\t\t\t\t\tcolSpan: _widgets[dragWidgetProps.id].colSpan || 1,\n\t\t\t\t\t\tserverType: FIELD_TYPE.spacer,\n\t\t\t\t\t\ttype: TYPE.field,\n\t\t\t\t\t\tisDummy: true,\n\t\t\t\t\t\tname: `spacer${newId}`,\n\t\t\t\t\t\ttitle: \"Spacer\",\n\t\t\t\t\t};\n\t\t\t\t\tif (state.modelType === MODEL_TYPE.CUSTOM) {\n\t\t\t\t\t\tattrs[\"model\"] = dragWidgetProps.attrs.model;\n\t\t\t\t\t\tattrs[\"modelField\"] = dragWidgetProps.attrs.modelField;\n\t\t\t\t\t\tattrs[\"widgetAttrs\"] = JSON.stringify({ colSpan: attrs.colSpan });\n\t\t\t\t\t}\n\t\t\t\t\tif (isCustomField) {\n\t\t\t\t\t\tattrs[\"widgetAttrs\"] = JSON.stringify({ colSpan: attrs.colSpan });\n\t\t\t\t\t}\n\t\t\t\t\t_widgets[newId] = Object.assign({}, attrs);\n\t\t\t\t\tisExtensionView(state) &&\n\t\t\t\t\t\textendList.push({\n\t\t\t\t\t\t\tname: \"insert\",\n\t\t\t\t\t\t\tposition: \"before\",\n\t\t\t\t\t\t\ttarget: dragWidgetProps.attrs.xPath,\n\t\t\t\t\t\t\telements: [attrs],\n\t\t\t\t\t\t\tid: newId,\n\t\t\t\t\t\t});\n\t\t\t\t\tsourceItems.splice(sourceItemIndex, 1, newId);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\t// if same panel, drag widget is before hover widget\n\t\t\t\tif (dragWidgetProps.panelId === hoverWidget.panelId) {\n\t\t\t\t\tif (dragWidgetProps.index < hoverWidget.index) {\n\t\t\t\t\t\tisRemovedFromSameList = true;\n\t\t\t\t\t\titemIndex--;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tsourceItems.splice(sourceItemIndex, 1);\n\t\t\t}\n\t\t}\n\n\t\t// remove dummy widget if spacer created automatically\n\t\tif (hoverWidget.attrs.isDummy) {\n\t\t\tlet isNew =\n\t\t\t\t!dragWidgetProps.id ||\n\t\t\t\tObject.values(IDS.createWidgets).indexOf(dragWidgetProps.id) > -1;\n\t\t\tlet newId = isNew ? _.uniqueId() : dragWidgetProps.id;\n\t\t\tlet attrs = Object.assign({}, dragWidgetProps.attrs || {});\n\t\t\tif (isNew && attrs.isCoreField !== false && attrs.name) {\n\t\t\t\tattrs.name = `${attrs.name}${newId}`;\n\t\t\t}\n\t\t\tsetErrorList(attrs, state, newId, isCustomField);\n\t\t\tif (isNew) {\n\t\t\t\t_widgets[newId] = Object.assign({}, attrs);\n\t\t\t\tisExtensionView(state) &&\n\t\t\t\t\textendList.push({\n\t\t\t\t\t\tname: \"insert\",\n\t\t\t\t\t\tposition: \"before\",\n\t\t\t\t\t\ttarget: hoverWidget.attrs.xPath,\n\t\t\t\t\t\telements: [attrs],\n\t\t\t\t\t\tid: newId,\n\t\t\t\t\t});\n\t\t\t} else {\n\t\t\t\tisExtensionView(state) &&\n\t\t\t\t\textendList.push({\n\t\t\t\t\t\tname: \"move\",\n\t\t\t\t\t\tsource: dragWidgetProps.attrs.xPath,\n\t\t\t\t\t\tposition: \"before\",\n\t\t\t\t\t\ttarget: hoverWidget.attrs.xPath,\n\t\t\t\t\t});\n\t\t\t\t_widgets[dragWidgetProps.id] = Object.assign(\n\t\t\t\t\t{ ..._widgets[dragWidgetProps.id] },\n\t\t\t\t\tattrs\n\t\t\t\t);\n\t\t\t}\n\t\t\t(hoverWidget.panelId ? _widgets[hoverWidget.panelId] : state)[\n\t\t\t\t_items\n\t\t\t].splice(\n\t\t\t\tdestinationItems.indexOf(hoverWidget.id) -\n\t\t\t\t\t(isRemovedFromSameList ? 1 : 0),\n\t\t\t\t1,\n\t\t\t\tnewId\n\t\t\t);\n\t\t\tisExtensionView(state) &&\n\t\t\t\textendList.push({ name: \"replace\", target: hoverWidget.attrs.xPath });\n\t\t\treturn { extendList, newId };\n\t\t}\n\n\t\t// cell placement is horizontal special case for Tabs widget\n\t\tif (hoverWidget.meta && hoverWidget.meta.horizontal) {\n\t\t\tlet index = Number(hoverWidget.index);\n\t\t\tif (\n\t\t\t\tdragWidgetProps.panelId === hoverWidget.panelId &&\n\t\t\t\tdragWidgetProps.index < hoverWidget.index\n\t\t\t) {\n\t\t\t\tindex = index - 2;\n\t\t\t}\n\t\t\t// calculate item position\n\t\t\titemIndex = Math.ceil(Number(index / 2));\n\t\t}\n\n\t\t// remove all dummy cells for flow layout\n\t\tconst destinationPanel = hoverWidget.panelId\n\t\t\t? _widgets[hoverWidget.panelId]\n\t\t\t: state;\n\t\tif ((destinationPanel.layout || PANEL_TYPE.flow) === PANEL_TYPE.flow) {\n\t\t\tbeforeWidgets = [];\n\t\t\tafterWidgets = [];\n\t\t}\n\t\t// fill all widgets in panel\n\t\tconst newWidgetIds = [];\n\t\tconst hoverWidgetParentItems =\n\t\t\t(hoverWidget.panelId ? _widgets[hoverWidget.panelId] : state)[_items] ||\n\t\t\t[];\n\t\tlet hoverWidgetId = hoverWidgetParentItems[itemIndex];\n\t\tlet hoverPath;\n\t\tlet actualHoverWidget = _widgets[hoverWidgetParentItems[itemIndex]];\n\t\tlet position = \"before\";\n\t\tif (!actualHoverWidget && hoverWidgetParentItems.length <= itemIndex) {\n\t\t\thoverWidgetId = hoverWidgetParentItems[hoverWidgetParentItems.length - 1];\n\t\t\tactualHoverWidget =\n\t\t\t\t_widgets[hoverWidgetParentItems[hoverWidgetParentItems.length - 1]];\n\t\t\tposition = \"after\";\n\t\t}\n\t\t// check for sidebar widget\n\t\tif (actualHoverWidget && `${actualHoverWidget.sidebar}` === \"true\") {\n\t\t\tdragWidgetProps.attrs.sidebar = \"true\";\n\t\t\tisExtensionView(state) &&\n\t\t\t\textendList.push({\n\t\t\t\t\tname: \"attribute\",\n\t\t\t\t\ttarget: dragWidgetProps.attrs.xPath,\n\t\t\t\t\tattributes: { name: \"sidebar\", value: \"true\" },\n\t\t\t\t});\n\t\t}\n\t\tif (actualHoverWidget) {\n\t\t\thoverPath =\n\t\t\t\tactualHoverWidget.xPath ||\n\t\t\t\teGeneratePath(_widgets, state[_items], hoverWidgetId);\n\t\t}\n\t\tconst shouldInsertInParent = (dragWidget, hoverWidget) => {\n\t\t\tconst hoverPathInfo = exploreTarget(hoverWidget.xPath);\n\t\t\tconst list = state.extensionMoves.filter((m) => {\n\t\t\t\tif (m.target) {\n\t\t\t\t\tconst targetInfo = exploreTarget(m.target);\n\t\t\t\t\tif (m.name === \"replace\") {\n\t\t\t\t\t\tif (hoverPathInfo.self) {\n\t\t\t\t\t\t\tif (targetInfo.parent.indexOf(hoverPathInfo.self) >= 0) {\n\t\t\t\t\t\t\t\treturn true;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t} else if (targetInfo.parent.indexOf(hoverPathInfo.parent) >= 0) {\n\t\t\t\t\t\t\treturn true;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\treturn false;\n\t\t\t});\n\t\t\tif (\n\t\t\t\t[TYPE.menu, FIELD_TYPE.button, TYPE.menuItem].includes(\n\t\t\t\t\tdragWidget.attrs.type\n\t\t\t\t) &&\n\t\t\t\t[TYPE.menubar, TYPE.toolbar, TYPE.menu].includes(hoverWidget.type)\n\t\t\t) {\n\t\t\t\t// hoverwidget should not have any child remove\n\t\t\t\tif (hoverWidget.items.length === 0 && !list.length) {\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn false;\n\t\t};\n\t\tconst list = [];\n\t\tbeforeWidgets\n\t\t\t.concat([dragWidgetProps])\n\t\t\t.concat(afterWidgets)\n\t\t\t.forEach((widget) => {\n\t\t\t\tlet attrs = Object.assign({}, widget.attrs || {});\n\t\t\t\tlet newId = widget.id;\n\t\t\t\tconst isCreateWidget = typeof newId === \"symbol\";\n\t\t\t\tconst isNew = !newId || isCreateWidget;\n\t\t\t\tlet shouldAdd = true;\n\t\t\t\t// new drag widgets\n\t\t\t\tif (\n\t\t\t\t\t[TYPE.menubar, TYPE.toolbar].includes(hoverType) &&\n\t\t\t\t\twidget.isSpacer\n\t\t\t\t) {\n\t\t\t\t\tshouldAdd = false;\n\t\t\t\t}\n\t\t\t\tif (shouldAdd) {\n\t\t\t\t\tif (isNew) {\n\t\t\t\t\t\tnewId = _.uniqueId();\n\t\t\t\t\t\tif (attrs.isCoreField !== false) {\n\t\t\t\t\t\t\tif (attrs && Object.keys(attrs).length) {\n\t\t\t\t\t\t\t\tsetErrorList(attrs, state, newId, isCustomField);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tif (attrs.name) {\n\t\t\t\t\t\t\t\tattrs.name = `${attrs.name}${newId}`;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\t// set new drag widget as edit widget\n\t\t\t\t\t\tif (isCreateWidget) {\n\t\t\t\t\t\t\tstate.editWidget = newId;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tif (widget.isSpacer)\n\t\t\t\t\t\tif (widget.isSpacer) {\n\t\t\t\t\t\t\t// if its spacer widgets\n\t\t\t\t\t\t\tconst _attrs = dragWidgetProps.attrs || {};\n\t\t\t\t\t\t\tattrs = getSpacer({\n\t\t\t\t\t\t\t\twidget,\n\t\t\t\t\t\t\t\tid: newId,\n\t\t\t\t\t\t\t\tmodel: _attrs.model,\n\t\t\t\t\t\t\t\tmodelField: _attrs.modelField,\n\t\t\t\t\t\t\t\twidgetAttrs: JSON.stringify({ colSpan: widget.colSpan || 6 }),\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\t\t\t\t\t// add new widget\n\t\t\t\t\tif (isNew) {\n\t\t\t\t\t\tif (isExtensionView(state) && !isCustomField) {\n\t\t\t\t\t\t\tif (actualHoverWidget) {\n\t\t\t\t\t\t\t\tisExtensionView(state) &&\n\t\t\t\t\t\t\t\t\tlist[position === \"after\" ? \"unshift\" : \"push\"]({\n\t\t\t\t\t\t\t\t\t\tname: \"insert\",\n\t\t\t\t\t\t\t\t\t\tposition,\n\t\t\t\t\t\t\t\t\t\ttarget: hoverPath,\n\t\t\t\t\t\t\t\t\t\telements: [attrs],\n\t\t\t\t\t\t\t\t\t\tid: newId,\n\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tconst widget = _widgets[hoverWidget.panelId];\n\t\t\t\t\t\t\t\tif (shouldInsertInParent(dragWidgetProps, widget)) {\n\t\t\t\t\t\t\t\t\tprocessMoves(state, attrs, newId, hoverWidget.panelId);\n\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\tlist[position === \"after\" ? \"unshift\" : \"push\"]({\n\t\t\t\t\t\t\t\t\t\tname: \"insert\",\n\t\t\t\t\t\t\t\t\t\tposition: \"inside\",\n\t\t\t\t\t\t\t\t\t\ttarget: widget.xPath,\n\t\t\t\t\t\t\t\t\t\telements: [attrs],\n\t\t\t\t\t\t\t\t\t\tid: newId,\n\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t// processMoves(state, attrs, newId, hoverWidget.panelId);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tnewWidgetIds.push(newId);\n\t\t\t\t\t\t_widgets[newId] = Object.assign({}, attrs);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tif (isExtensionView(state) && !isCustomField) {\n\t\t\t\t\t\t\tif (actualHoverWidget) {\n\t\t\t\t\t\t\t\tisExtensionView(state) &&\n\t\t\t\t\t\t\t\t\tlist[position === \"after\" ? \"unshift\" : \"push\"]({\n\t\t\t\t\t\t\t\t\t\tname: \"move\",\n\t\t\t\t\t\t\t\t\t\tsource: dragWidgetProps.attrs.xPath,\n\t\t\t\t\t\t\t\t\t\tposition,\n\t\t\t\t\t\t\t\t\t\ttarget: hoverPath,\n\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tconst widget = _widgets[hoverWidget.panelId];\n\t\t\t\t\t\t\t\tif (shouldInsertInParent(dragWidgetProps, widget)) {\n\t\t\t\t\t\t\t\t\tprocessMoves(\n\t\t\t\t\t\t\t\t\t\tstate,\n\t\t\t\t\t\t\t\t\t\tdragWidgetProps.attrs,\n\t\t\t\t\t\t\t\t\t\tdragWidgetProps.id,\n\t\t\t\t\t\t\t\t\t\thoverWidget.panelId\n\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\tisExtensionView(state) &&\n\t\t\t\t\t\t\t\t\t\tlist[position === \"after\" ? \"unshift\" : \"push\"]({\n\t\t\t\t\t\t\t\t\t\t\tname: \"move\",\n\t\t\t\t\t\t\t\t\t\t\tsource: dragWidgetProps.attrs.xPath,\n\t\t\t\t\t\t\t\t\t\t\tposition: \"inside\",\n\t\t\t\t\t\t\t\t\t\t\ttarget: widget.xPath,\n\t\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t// const tempList = processMoves(state, dragWidgetProps.attrs, dragWidgetProps.id, hoverWidget.panelId);\n\t\t\t\t\t\t\t\t// if(tempList.length) {\n\t\t\t\t\t\t\t\t// \tconst index = extendList.findIndex(l => l.name === 'attribute');\n\t\t\t\t\t\t\t\t// \tif(index !== -1) {\n\t\t\t\t\t\t\t\t// \t\textendList.splice(index, 1);\n\t\t\t\t\t\t\t\t// \t}\n\t\t\t\t\t\t\t\t// }\n\t\t\t\t\t\t\t\t// list.push(...tempList);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t_widgets[dragWidgetProps.id] = Object.assign(\n\t\t\t\t\t\t\t{ ..._widgets[dragWidgetProps.id] },\n\t\t\t\t\t\t\tattrs\n\t\t\t\t\t\t);\n\t\t\t\t\t}\n\t\t\t\t\tnewIds.push(newId);\n\t\t\t\t}\n\t\t\t});\n\t\textendList.push(...list);\n\t\t// put all new widgets into panel\n\t\t(\n\t\t\t(hoverWidget.panelId ? _widgets[hoverWidget.panelId] : state)[_items] ||\n\t\t\t[]\n\t\t).splice(itemIndex, 0, ...newIds);\n\t\treturn { extendList, newId: newIds && newIds[newIds.length - 1] };\n\t};\n\nconst getWidgetType = (widgetAttrs, defaultType) => {\n\tconst uiFields = [\"spacer\", \"label\", \"button\"];\n\tlet _type =\n\t\twidgetAttrs.isModelField ||\n\t\twidgetAttrs.isCoreField === false ||\n\t\twidgetAttrs.serverType === \"field\"\n\t\t\t? \"field\"\n\t\t\t: widgetAttrs.type\n\t\t\t? widgetAttrs.type.toLowerCase()\n\t\t\t: defaultType;\n\t_type = uiFields.includes(widgetAttrs.serverType)\n\t\t? widgetAttrs.serverType\n\t\t: _type;\n\treturn _type;\n};\n\n// check source or destination panel is exclusive or not\nexport const checkExclusive = (widgets, source, destination) => {\n\t// special case for exclusive\n\tif (widgets[source.id]) {\n\t\tif (widgets[source.panelId]) {\n\t\t\tlet sourcePanelAttrs = widgets[source.panelId];\n\t\t\tif (\n\t\t\t\tsourcePanelAttrs.exclusive &&\n\t\t\t\tdestination.panelId !== source.panelId\n\t\t\t) {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\t}\n\tif (widgets[destination.id]) {\n\t\tif (widgets[destination.panelId]) {\n\t\t\tlet destinationPanelAttrs = widgets[destination.panelId];\n\t\t\tif (\n\t\t\t\tdestinationPanelAttrs.exclusive &&\n\t\t\t\tsource.panelId !== destination.panelId\n\t\t\t) {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\t}\n\treturn false;\n};\n\nconst isSamePositionInOriginal = (elements, panel, widget, hoverItemIndex) => {\n\tconst field = widget.attrs || widget || {};\n\tlet flag = false;\n\t(elements || []).forEach((element) => {\n\t\tif (element.elements) {\n\t\t\tif (\n\t\t\t\telement.attributes &&\n\t\t\t\tpanel &&\n\t\t\t\telement.attributes.name === panel.name\n\t\t\t) {\n\t\t\t\tconst item = element.elements[hoverItemIndex];\n\t\t\t\tif (\n\t\t\t\t\titem &&\n\t\t\t\t\titem.attributes &&\n\t\t\t\t\tfield &&\n\t\t\t\t\titem.attributes.name === field.name\n\t\t\t\t) {\n\t\t\t\t\tflag = true;\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (!flag && element.elements && element.elements.length) {\n\t\t\t\tconst result = isSamePositionInOriginal(\n\t\t\t\t\telement.elements,\n\t\t\t\t\tpanel,\n\t\t\t\t\twidget,\n\t\t\t\t\thoverItemIndex\n\t\t\t\t);\n\t\t\t\tif (result === true) {\n\t\t\t\t\tflag = true;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t});\n\treturn flag;\n};\n\nconst getTarget = (fieldTarget, itemTarget) => {\n\treturn fieldTarget || itemTarget;\n};\n\nexport const isPanelTab = (field) => {\n\tconst { type, widgetAttrs } = field;\n\tif (type === TYPE.panel && widgetAttrs) {\n\t\tconst attrs = JSON.parse(widgetAttrs || \"{}\");\n\t\tif (attrs.tab === \"true\") {\n\t\t\treturn true;\n\t\t}\n\t}\n\treturn false;\n};\n\nconst getColSpan = (widget) => {\n\tconst attrs = JSON.parse(widget.widgetAttrs || \"{}\");\n\tconst defaultColspan = widget.type === TYPE.panel ? 12 : 6;\n\treturn attrs.colSpan || defaultColspan;\n};\n\nconst getCols = (widget) => {\n\tif ([TYPE.panel, TYPE.tabs].includes(widget.type)) {\n\t\treturn { cols: 12 };\n\t}\n\treturn {};\n};\n\nexport const getMenuBuilder = (menuBuilder) => {\n\tif (menuBuilder) {\n\t\treturn {\n\t\t\tmenuBuilderTitle: menuBuilder.title,\n\t\t\tmenuBuilderParent: menuBuilder.parentMenu,\n\t\t};\n\t}\n\treturn {};\n};\n\nexport const generateCustomModelSchema = (\n\tfields = [],\n\trecord,\n\ttypeLateral = \"\",\n\tformType = \"form\"\n) => {\n\tlet flag = false;\n\tconst _widgets = {};\n\tconst formItems = [];\n\tconst tabItems = [];\n\tlet _panelId;\n\tfields &&\n\t\tfields.length &&\n\t\tfields.forEach((f) => {\n\t\t\tconst _ID = _.uniqueId();\n\t\t\tconst isTab = isPanelTab(f);\n\t\t\tif ([TYPE.panel, TYPE.tabs].includes(f.type)) {\n\t\t\t\tflag = true;\n\t\t\t\t_panelId = _ID;\n\t\t\t\tf[\"items\"] = [];\n\t\t\t\tf[\"layout\"] = \"grid\";\n\t\t\t} else if (!flag) {\n\t\t\t\tconst _item = _widgets[_panelId];\n\t\t\t\tif (_item) {\n\t\t\t\t\t_item.items.push(_ID);\n\t\t\t\t\t_widgets[_panelId] = {\n\t\t\t\t\t\t..._widgets[_panelId],\n\t\t\t\t\t\titems: [..._item.items],\n\t\t\t\t\t};\n\t\t\t\t} else {\n\t\t\t\t\tflag = true;\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (flag) {\n\t\t\t\tflag = false;\n\t\t\t\tif (isTab) {\n\t\t\t\t\ttabItems.push(_ID);\n\t\t\t\t} else {\n\t\t\t\t\tformItems.push(_ID);\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (f.selectionText && f.selectionText.length) {\n\t\t\t\tf.updateSelection = true;\n\t\t\t}\n\t\t\t_widgets[_ID] = {\n\t\t\t\t...f,\n\t\t\t\tcolSpan: getColSpan(f),\n\t\t\t\t...getCols(f),\n\t\t\t\ttype: `${f.type}${typeLateral}`,\n\t\t\t};\n\t\t});\n\t// add tab panel if tabItems has length\n\tif (tabItems.length) {\n\t\tconst _ID = _.uniqueId();\n\t\tconst field = {\n\t\t\titems: [...tabItems],\n\t\t\ttype: TYPE.tabs,\n\t\t\ttitle: \"Tab Panel\",\n\t\t};\n\t\tformItems.push(_ID);\n\t\t_widgets[_ID] = { ...field };\n\t}\n\tconst form = formType === \"customForm\" ? IDS.customForm : IDS.form;\n\tconst schema = {\n\t\twidgets: {\n\t\t\t[form]: {\n\t\t\t\ttype: formType,\n\t\t\t\tcols: 12,\n\t\t\t\t...record,\n\t\t\t\t...getMenuBuilder(record ? record.menuBuilder : undefined),\n\t\t\t},\n\t\t\t[IDS.dumpField]: {\n\t\t\t\ttype: TYPE.dumpField,\n\t\t\t\tname: \"\",\n\t\t\t},\n\t\t\t..._widgets,\n\t\t},\n\t\titems: [...formItems],\n\t};\n\treturn schema;\n};\n\nfunction processXML(xmlString, indent) {\n\treturn format(xmlString);\n}\n\nconst replacer = (key, modelType) => {\n\tconst camelToDash = [\"formView\", \"gridView\", \"minSize\", \"maxSize\"];\n\tconst xField = [\"bind\"];\n\tif (modelType === MODEL_TYPE.BASE) {\n\t\tconst keyReplacer = {\n\t\t\ttargetModel: \"target\",\n\t\t\tminSize: \"min\",\n\t\t\tmaxSize: \"max\",\n\t\t};\n\t\tkey = keyReplacer[key] || key;\n\t\tif (camelToDash.includes(key)) {\n\t\t\tkey = camelToDashCase(key);\n\t\t}\n\t\tif (xField.includes(key)) {\n\t\t\tkey = `x-${camelToDashCase(key)}`;\n\t\t}\n\t}\n\treturn key;\n};\n\nconst editorKeyReplacer = (key, modelType) => {\n\tconst keyReplacer = {\n\t\ttargetModel: \"target\",\n\t\tminSize: \"min\",\n\t\tmaxSize: \"max\",\n\t};\n\tif (modelType === MODEL_TYPE.BASE) {\n\t\tconst _keyIndex = Object.values(keyReplacer).findIndex((v) => v === key);\n\t\tif (_keyIndex !== -1) {\n\t\t\tkey = Object.keys(keyReplacer)[_keyIndex];\n\t\t}\n\t}\n\treturn key;\n};\n\nfunction isDummyField(widget) {\n\tconst modelTypes = [];\n\tmodelFields.forEach((f) => {\n\t\tconst { value = [] } = f;\n\t\tconst types = value.map((v) => v.serverType);\n\t\tmodelTypes.push(...types);\n\t});\n\treturn widget.serverType === \"field\" && modelTypes.includes(widget.type);\n}\n\nfunction valueConverter(value, key) {\n\tconst ltKeys = [\"title\", \"text\"];\n\tif (value && ltKeys.includes(key)) {\n\t\tvalue = value.replace(/</g, \"&lt;\");\n\t}\n\treturn value;\n}\n\nconst getWidgetAttrs = (attrs, exempt = [], modelType) => {\n\tconst widgetAttrs = {};\n\tconst exemptedAttrs = [\n\t\t\"version\",\n\t\t\"type\",\n\t\t\"typeName\",\n\t\t\"label\",\n\t\t\"items\",\n\t\t\"serverType\",\n\t\t\"layout\",\n\t\t\"cols\",\n\t\t\"isCoreField\",\n\t\t\"isModelField\",\n\t\t\"relationship\",\n\t\t\"current\",\n\t\t\"autoTitle\",\n\t\t\"metaModel\",\n\t\t\"targetSearch\",\n\t\t\"editorType\",\n\t\t\"appBuilder\",\n\t\t...exempt,\n\t];\n\tif (attrs.serverType !== \"field\") {\n\t\texemptedAttrs.push(\"targetModel\", \"targetName\", \"target\");\n\t}\n\tObject.keys(attrs).forEach((key) => {\n\t\tif (!exemptedAttrs.includes(key) && attrs[key] !== \"\") {\n\t\t\tlet flag = true;\n\t\t\tif (modelType === MODEL_TYPE.BASE && isDefaultValue(key, attrs[key])) {\n\t\t\t\tflag = false;\n\t\t\t}\n\t\t\tif (flag) {\n\t\t\t\tif (key === \"dummyType\") {\n\t\t\t\t\twidgetAttrs[\"type\"] = attrs[key];\n\t\t\t\t} else {\n\t\t\t\t\twidgetAttrs[replacer(key, modelType)] = valueConverter(\n\t\t\t\t\t\tattrs[key],\n\t\t\t\t\t\tkey\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t});\n\t// check for dummy model field\n\tif (attrs.type === TYPE.panelInclude) {\n\t\tif (typeof attrs.view === \"object\") {\n\t\t\twidgetAttrs.view = attrs.view.name;\n\t\t}\n\t}\n\tif (attrs.isModelField || isDummyField(attrs)) {\n\t\twidgetAttrs[\"type\"] = attrs.type;\n\t}\n\tif (attrs.type === TYPE.panelRelated) {\n\t\twidgetAttrs[\"name\"] = attrs.field;\n\t}\n\tif (widgetAttrs.name) {\n\t\t// change array field index\n\t\tconst squareIndex = widgetAttrs.name.indexOf(\"[\");\n\t\tif (squareIndex !== -1) {\n\t\t\twidgetAttrs.name = widgetAttrs.name.substring(0, squareIndex);\n\t\t}\n\t}\n\treturn widgetAttrs;\n};\n\nconst getCustomWidget = (widget, exempt = []) => {\n\tconst _widget = {};\n\tconst exemptedAttrs = [\n\t\t\"image\",\n\t\t\"serverType\",\n\t\t\"isModelField\",\n\t\t\"isCoreField\",\n\t\t\"current\",\n\t\t...exempt,\n\t];\n\tObject.keys(widget).forEach((key) => {\n\t\tif (!exemptedAttrs.includes(key)) {\n\t\t\tif (key === \"type\" && [\"item\", \"field\"].includes(widget[key])) {\n\t\t\t\t_widget[key] = widget[\"serverType\"];\n\t\t\t} else {\n\t\t\t\t_widget[key] = widget[key] === \"\" ? null : widget[key];\n\t\t\t}\n\t\t}\n\t});\n\treturn _widget;\n};\n\nconst getCustomModelFields = (\n\titems = [],\n\twidgets,\n\tadditionalProps = {},\n\tcountSequence = false,\n\tsequence = 0\n) => {\n\tconst fields = [];\n\titems.forEach((item) => {\n\t\tif (widgets[item]) {\n\t\t\tlet _widget = { ...widgets[item] };\n\t\t\tconst exempt = [];\n\t\t\tif (![\"dump_field\", \"form\"].includes(_widget.type)) {\n\t\t\t\tif (_widget.type !== TYPE.tabs) {\n\t\t\t\t\tif (typeof _widget.id === \"symbol\") {\n\t\t\t\t\t\tdelete _widget.id;\n\t\t\t\t\t}\n\t\t\t\t\tif (_widget.showTitle !== \"false\") {\n\t\t\t\t\t\tdelete _widget.showTitle;\n\t\t\t\t\t}\n\t\t\t\t\tif (countSequence) {\n\t\t\t\t\t\t_widget.sequence = sequence;\n\t\t\t\t\t\tsequence++;\n\t\t\t\t\t}\n\t\t\t\t\tif (_widget.serverType === \"spacer\") {\n\t\t\t\t\t\texempt.push(\"title\");\n\t\t\t\t\t}\n\t\t\t\t\tfields.push({\n\t\t\t\t\t\t...getCustomWidget(_widget, exempt),\n\t\t\t\t\t\t...additionalProps,\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\tif (_widget.items && _widget.items.length) {\n\t\t\t\t\tconst modelFields = getCustomModelFields(\n\t\t\t\t\t\t_widget.items,\n\t\t\t\t\t\twidgets,\n\t\t\t\t\t\tadditionalProps,\n\t\t\t\t\t\tcountSequence,\n\t\t\t\t\t\tsequence\n\t\t\t\t\t);\n\t\t\t\t\tfields.push(...modelFields.fields);\n\t\t\t\t\tsequence = modelFields.sequence;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t});\n\treturn { fields, sequence };\n};\n\nconst isCreatedFromStudio = ({ xmlId = null, extension }) => {\n\tif (xmlId && !extension) {\n\t\tconst index = xmlId.indexOf(\"studio-\");\n\t\tif (index === 0) {\n\t\t\treturn true;\n\t\t}\n\t}\n\treturn false;\n};\n\nconst getFormProperties = (form, exempt = []) => {\n\tconst except = [\"type\", \"cols\", \"items\", ...exempt];\n\tconst properties = {};\n\tObject.keys(form).forEach((key) => {\n\t\tif (!except.includes(key)) {\n\t\t\tproperties[key] = form[key] === \"\" ? null : form[key];\n\t\t}\n\t});\n\treturn properties;\n};\n\n/**\n * Checks whether value is same as default value or not\n * for given property name.\n * Returns boolean true/false\n * @param {string} name\n * @param {string} value\n */\nconst isAttrHasDefaultValue = (name, value) => {\n\tconst defaultValue = DEFAULT_VALUE[name];\n\tif (defaultValue !== undefined && `${defaultValue}` === `${value}`) {\n\t\treturn true;\n\t}\n\treturn false;\n};\n\nexport const getProperty = (\n\tname,\n\tvalue,\n\tparentField,\n\tparentValue,\n\tshouldCheckParent = true\n) => {\n\tconst obj = { [name]: value };\n\tif (shouldCheckParent) {\n\t\tconst _value =\n\t\t\ttypeof parentValue === \"string\"\n\t\t\t\t? JSON.parse(parentValue)\n\t\t\t\t: parentValue || {};\n\t\tif (parentField && ![undefined, \"\", null].includes(value)) {\n\t\t\t// check for default value\n\t\t\tif (isAttrHasDefaultValue(name, value)) {\n\t\t\t\tdelete _value[name];\n\t\t\t\treturn { [parentField]: JSON.stringify({ ..._value }) };\n\t\t\t}\n\t\t\tconst _obj = { [name]: `${value}` };\n\t\t\treturn { [parentField]: JSON.stringify({ ..._value, ..._obj }) };\n\t\t} else if (parentField && (!value || value === \"\")) {\n\t\t\tdelete _value[name];\n\t\t\treturn { [parentField]: JSON.stringify({ ..._value }) };\n\t\t}\n\t}\n\tif (name === \"showTitle\" && value === true) {\n\t\treturn { showTitle: undefined };\n\t}\n\treturn obj;\n};\n\nexport const getPropertyValue = (\n\tlist,\n\tname,\n\tparentField,\n\tdefaultValue,\n\tshouldCheckParent = true\n) => {\n\tif (shouldCheckParent && parentField) {\n\t\tif (list[parentField]) {\n\t\t\tconst field = JSON.parse(list[parentField]);\n\t\t\treturn [undefined, null].includes(field[name])\n\t\t\t\t? defaultValue\n\t\t\t\t: field[name];\n\t\t}\n\t\treturn defaultValue || null;\n\t}\n\treturn [undefined, null].includes(list[name]) ? defaultValue : list[name];\n};\n\nconst getDefaultProperties = (modelType) => {\n\tswitch (modelType) {\n\t\tcase MODEL_TYPE.CUSTOM:\n\t\t\treturn { formWidth: \"large\" };\n\t\tcase MODEL_TYPE.BASE: {\n\t\t\treturn { width: \"large\" };\n\t\t}\n\t\tdefault:\n\t\t\treturn {};\n\t}\n};\n\nconst getPatchList = (xmlJson) => {\n\tif (xmlJson) {\n\t\tconst { elements = [] } = xmlJson;\n\t\tif (elements[0]) {\n\t\t\treturn elements[0].elements || [];\n\t\t}\n\t}\n\treturn [];\n};\n\nconst filterFormPatch = (patchList) => {\n\treturn patchList.filter((element) => element.attributes.target === \"/\");\n};\n\nconst getCurrentFormAttributes = (xml) => {\n\tconst { elements = [] } = xml;\n\treturn elements[0].attributes || {};\n};\n\nconst mergeFormAttributes = (patchList, formPatch) => {\n\tconst index = patchList.findIndex(\n\t\t(element) => element.attributes.target === \"/\"\n\t);\n\tconst targetIndex = index === -1 ? 0 : index;\n\tconst remove = index === -1 ? 0 : 1;\n\tif (Object.keys(formPatch).length) {\n\t\tpatchList.splice(targetIndex, remove, { ...formPatch });\n\t} else if (index !== -1) {\n\t\tpatchList.splice(index, 1);\n\t}\n\treturn patchList;\n};\n\nconst camelToDashCase = (string, caseString = \"-\") => {\n\treturn string.replace(/[A-Z]/g, (m) => caseString + m.toLowerCase());\n};\n\nconst dashToCamelCase = (string) => {\n\treturn string.replace(/-([a-z])/g, function (g) {\n\t\treturn g[1].toUpperCase();\n\t});\n};\n\nconst isDefaultValue = (field, value) => {\n\tconst fieldValue = DEFAULT_VALUE[field];\n\tif ([true, false].includes(fieldValue) && `${value}` === `${fieldValue}`) {\n\t\treturn true;\n\t}\n\treturn false;\n};\n\nconst getReferenceProperty = (widgetType) => {\n\tconst referenceProperty = {\n\t\t[TYPE.panelInclude]: \"view\",\n\t};\n\tconst refProp = referenceProperty[widgetType];\n\treturn refProp || \"name\";\n};\n\nconst checkTarget = (target, checkString, which) => {\n\t// 2 for parent check and 3 for itself/child element check\n\tconst targetSplit = target.split(\"/\");\n\tif (which) {\n\t\tif (targetSplit[which] === checkString) {\n\t\t\treturn true;\n\t\t}\n\t\treturn false;\n\t}\n\treturn target === checkString;\n};\n\nconst exploreTarget = (target, which = 3) => {\n\t// 2 for parent check and 3 for itself/child element check\n\tconst targetSplit = target.split(\"/\");\n\tconst length = targetSplit.length;\n\tlet parent = length > 3 ? targetSplit[length - 2] : targetSplit[length - 1];\n\tlet self = length > 3 ? targetSplit[length - 1] : undefined;\n\treturn { parent, self };\n};\n\nconst getViews = (list, viewName) => {\n\tlet view = list.find((v) => v.computed === true);\n\tlet originalXML = list.find(\n\t\t(v) => v.computed !== true && v.extension !== true\n\t);\n\tconst extensionXML = list.find(\n\t\t(v) => v.extension === true && v.xmlId === `studio-${viewName}`\n\t);\n\treturn {\n\t\tview: view || originalXML,\n\t\toriginalXML,\n\t\textensionXML,\n\t};\n};\n\nconst getElementTypes = (name, field, _type) => {\n\tlet serverType;\n\tlet type;\n\tif (field) {\n\t\tserverType = field.type.toLowerCase();\n\t\ttype = name;\n\t} else {\n\t\tserverType = name;\n\t\ttype = _type ? _type : name === \"field\" ? undefined : name; // if element is field then set default type string\n\t}\n\treturn {\n\t\tserverType: TYPE_REPLACER[serverType] || serverType,\n\t\ttype: TYPE_REPLACER[type] || type,\n\t};\n};\n\nconst getTitle = (attributes, field) => {\n\tif (attributes.title) {\n\t\treturn { title: attributes.title };\n\t}\n\tif (field?.label) {\n\t\treturn { autoTitle: field.label };\n\t}\n\tif (attributes.name) {\n\t\treturn { autoTitle: camelToDashCase(attributes.name, \" \") };\n\t}\n\treturn {};\n};\n\nconst generateViewFromJson = ({\n\tview,\n\tfields,\n\toriginal,\n\textensionXML,\n\tattrsList,\n}) => {\n\tconst { elements } = view;\n\n\tconst getElementName = (attributes, parent, itemList, elementType) => {\n\t\tconst nameObj = { name: attributes.name };\n\t\treturn nameObj;\n\t};\n\n\tconst getElementToWidget = (element, fields, parent, itemList) => {\n\t\tlet widget = {};\n\t\tlet field;\n\t\tif (element) {\n\t\t\tconst { type, ...attributes } = element.attributes || {};\n\t\t\tif (element.name.indexOf(\"panel\") === -1) {\n\t\t\t\tfield = fields.find((f) => f.name === attributes.name);\n\t\t\t}\n\t\t\tconst attrs = {};\n\t\t\tObject.keys(attributes).map((key) => {\n\t\t\t\tlet _key = key;\n\t\t\t\tif (key.indexOf(\"x-\") === 0) {\n\t\t\t\t\t_key = key.substring(2);\n\t\t\t\t}\n\t\t\t\tattrs[editorKeyReplacer(dashToCamelCase(_key), MODEL_TYPE.BASE)] =\n\t\t\t\t\tattributes[key];\n\t\t\t\treturn undefined;\n\t\t\t});\n\t\t\tconst targetModel = getTarget(\n\t\t\t\tfield?.target || field?.targetModel,\n\t\t\t\tattributes.target\n\t\t\t);\n\t\t\twidget = {\n\t\t\t\t...attrs,\n\t\t\t\tcolSpan: Number(attributes.colSpan || 6),\n\t\t\t\t...getElementName(attributes, parent, itemList, element.name),\n\t\t\t\t...getElementTypes(element.name, field, type),\n\t\t\t\t...getTitle(attributes, field),\n\t\t\t};\n\t\t\tif (targetModel) {\n\t\t\t\twidget.targetModel = targetModel;\n\t\t\t}\n\t\t\tif (\n\t\t\t\telement.name &&\n\t\t\t\t(element.name.indexOf(TYPE.panel) >= 0 ||\n\t\t\t\t\t[TYPE.menubar, TYPE.toolbar].includes(element.name))\n\t\t\t) {\n\t\t\t\twidget.colSpan = Number(attributes.colSpan || 12);\n\t\t\t\twidget.cols = 12;\n\t\t\t\twidget.layout = \"grid\";\n\t\t\t\twidget.serverType =\n\t\t\t\t\twidget.type === \"panel\" && widget.tab === true\n\t\t\t\t\t\t? TYPE.tabs\n\t\t\t\t\t\t: widget.serverType || widget.type;\n\t\t\t}\n\t\t\t// widget.type =\n\t\t}\n\t\treturn { widget, field };\n\t};\n\n\tconst getSpecialType = (element) => {\n\t\treturn element.name;\n\t};\n\tconst getXMLToViewItems = (elements = [], fields, parent) => {\n\t\tconst exclude = [\"panel-mail\"];\n\t\tlet _widgets = {};\n\t\tconst itemList = [];\n\t\tconst fieldList = [];\n\t\telements.forEach((element) => {\n\t\t\tif (element.attributes && `${element.attributes.json}` === \"true\") {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tif (!exclude.includes(element.name) && element.type !== \"cdata\") {\n\t\t\t\tconst _ID = _.uniqueId();\n\t\t\t\tconst { widget, field } = getElementToWidget(\n\t\t\t\t\telement,\n\t\t\t\t\tfields,\n\t\t\t\t\tparent,\n\t\t\t\t\titemList\n\t\t\t\t);\n\t\t\t\tif (field) {\n\t\t\t\t\tfieldList.push(field);\n\t\t\t\t}\n\t\t\t\titemList.push(_ID);\n\t\t\t\tif (element.name && element.name.indexOf(TYPE.panel) >= 0) {\n\t\t\t\t\twidget.items = [];\n\t\t\t\t}\n\t\t\t\tif (element.elements && element.name !== \"field\") {\n\t\t\t\t\tconst items = getXMLToViewItems(\n\t\t\t\t\t\telement.elements,\n\t\t\t\t\t\tfields,\n\t\t\t\t\t\telement.attributes\n\t\t\t\t\t);\n\t\t\t\t\t_widgets = { ..._widgets, ...items._widgets };\n\t\t\t\t\twidget.items = [...items.itemList];\n\t\t\t\t\tfieldList.push(...items.fieldList);\n\t\t\t\t}\n\t\t\t\tif (element.elements && element.name === \"field\") {\n\t\t\t\t\t// check for viewer\n\t\t\t\t\tconst type = getSpecialType(element.elements[0]);\n\t\t\t\t\tif (type) {\n\t\t\t\t\t\twidget.type = type;\n\t\t\t\t\t\twidget.elements = element.elements;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\t// override with meta attrs list\n\t\t\t\tif (widget.name) {\n\t\t\t\t\tconst list = (attrsList || []).filter(\n\t\t\t\t\t\t(attr) => attr.field === widget.name\n\t\t\t\t\t);\n\t\t\t\t\tlist.forEach((attr) => {\n\t\t\t\t\t\tif ([\"selection-in\"].includes(attr.name)) {\n\t\t\t\t\t\t\twidget[attr.name] = attr.value;\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\twidget[\n\t\t\t\t\t\t\t\teditorKeyReplacer(dashToCamelCase(attr.name), MODEL_TYPE.BASE)\n\t\t\t\t\t\t\t] = attr.value;\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\t_widgets[_ID] = { ...widget };\n\t\t\t}\n\t\t});\n\t\treturn { _widgets, itemList, fieldList };\n\t};\n\n\tconst { itemList, _widgets, fieldList } = getXMLToViewItems(elements, fields);\n\tconst form = _widgets[itemList[0]];\n\tconst items = form.items || [];\n\tdelete _widgets[itemList[0]];\n\t// const { items, ...rest } = view;\n\tconst schema = {\n\t\twidgets: {\n\t\t\t[IDS.form]: {\n\t\t\t\ttype: TYPE.form,\n\t\t\t\tcols: 12,\n\t\t\t\t...form,\n\t\t\t\titems: undefined,\n\t\t\t},\n\t\t\t[IDS.dumpField]: {\n\t\t\t\ttype: TYPE.dumpField,\n\t\t\t\tname: \"\",\n\t\t\t},\n\t\t\t..._widgets,\n\t\t},\n\t\titems,\n\t\tfieldList,\n\t};\n\treturn schema;\n};\n\nconst generateXMLToViewSchema = ({\n\tview,\n\tfields,\n\toriginal = false,\n\textensionXML,\n\tattrsList,\n}) => {\n\tconst { elements } = JSON.parse(\n\t\tconvert.xml2json(view.xml, {\n\t\t\tcompact: false,\n\t\t\tfullTagEmptyElement: false,\n\t\t})\n\t);\n\treturn generateViewFromJson({\n\t\tview: { elements },\n\t\tfields,\n\t\toriginal,\n\t\textensionXML,\n\t\tattrsList,\n\t});\n};\n\nconst getChangeList = (schema, extensionXml) => {\n\tconst list = [];\n\tconst { widgets } = schema;\n\tconst elems = getExtensionElements(extensionXml);\n\tconst widgetList = Object.values(widgets);\n\tconst widgetIds = Object.keys(widgets);\n\telems.forEach((json) => {\n\t\tconst { elements = [] } = json;\n\t\t// const object =\n\t\tconst moveElement = elements[0];\n\t\tif (moveElement && moveElement.attributes && moveElement.name === \"move\") {\n\t\t\tconst source = exploreTarget(moveElement.attributes.source);\n\t\t\tif (source.self) {\n\t\t\t\tconst index = source.self\n\t\t\t\t\t? widgetList.findIndex(\n\t\t\t\t\t\t\t(w) => `${w.type}[@name='${w.name}']` === source.self\n\t\t\t\t\t  )\n\t\t\t\t\t: widgetList.findIndex(\n\t\t\t\t\t\t\t(w) => `${w.type}[@name='${w.name}']` === source.parent\n\t\t\t\t\t  );\n\t\t\t\tif (widgetIds[index]) {\n\t\t\t\t\tlist.push(widgetIds[index]);\n\t\t\t\t}\n\t\t\t}\n\t\t\t// return {\n\t\t\t// \ttarget: attributes.target,\n\t\t\t// \tsource: moveElement.attributes.source,\n\t\t\t// \tposition: moveElement.attributes.position,\n\t\t\t// }\n\t\t}\n\t});\n\treturn list;\n};\n\nconst getExtensionElements = (xml) => {\n\tconst extensionJson = JSON.parse(\n\t\tconvert.xml2json(xml, {\n\t\t\tcompact: false,\n\t\t\tfullTagEmptyElement: false,\n\t\t})\n\t);\n\tconst elems = extensionJson.elements[0].elements;\n\treturn elems;\n};\n\nfunction randomString(length) {\n\tconst chars =\n\t\t\"0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ\";\n\tvar result = \"\";\n\tfor (var i = length; i > 0; --i)\n\t\tresult += chars[Math.floor(Math.random() * chars.length)];\n\treturn result;\n}\n\nexport const generateFieldUniqueTitle = ({ name, fieldName }) => {\n\tconst text = randomString(6);\n\treturn `studio:${text}:${fieldName}:${name}`;\n};\n\nexport function getDefaultGridFormName(str, isForm = false, isJson = false) {\n\tif (!str) return;\n\tif (isJson) {\n\t\treturn `custom-model-${str.name}-${isForm ? \"form\" : \"grid\"}`;\n\t}\n\tconst models = str.split(\".\");\n\tconst modelString = models[models.length - 1];\n\tif (!modelString) return;\n\tconst viewName = dasherize(modelString);\n\treturn `${viewName.toLowerCase()}-${isForm ? \"form\" : \"grid\"}`;\n}\n\nexport default {\n\tcamleCaseString,\n\ttranslate,\n\tprocessXML,\n\tgetWidgetAttrs,\n\tgetCustomModelFields,\n\tisCreatedFromStudio,\n\tgetFormProperties,\n\tgetDefaultProperties,\n\tgetPatchList,\n\tkeyReplacer: replacer,\n\tvalueConverter,\n\tfilterFormPatch,\n\tgetCurrentFormAttributes,\n\tmergeFormAttributes,\n\tcamelToDashCase,\n\tdashToCamelCase,\n\tisSamePositionInOriginal,\n\tgetWidgetType,\n\tisDefaultValue,\n\tgetReferenceProperty,\n\tcheckTarget,\n\texploreTarget,\n\tgetViews,\n\tgenerateXMLToViewSchema,\n\tgenerateViewFromJson,\n\tgetChangeList,\n\tgetDefaultGridFormName,\n\tisPanelTab,\n};\n","import React from \"react\";\nimport classNames from \"classnames\";\nimport { GRID_SIZE, PANEL_TYPE, TYPE } from \"../constants\";\nimport { useStore } from \"../store/context\";\n\nconst getColSpan = (col, parentItemSpan) => {\n\tconst widgetAttrs = col.widgetAttrs ? JSON.parse(col.widgetAttrs) : {};\n\tif (widgetAttrs.colSpan) {\n\t\treturn Number(widgetAttrs.colSpan);\n\t} else {\n\t\treturn parentItemSpan || col.colSpan || 6;\n\t}\n};\n\n// get Column cell CSS according to colSpan and Container size\nexport const getColumnCss = (columns, colSpan) => {\n\tconst [n, span] = [Number(columns), Number(colSpan)];\n\tif (n > GRID_SIZE.max) return \"\";\n\treturn `col-span col-${\n\t\tspan > n ? GRID_SIZE.max : Math.floor((GRID_SIZE.max * span) / n)\n\t}`;\n};\n\nconst DEFAULTS = {\n\tITEM_COLSPAN: 1,\n\tMAX_SIZE: 12,\n};\n\nconst getFullGrid = (\n\titems,\n\tsize = DEFAULTS.MAX_SIZE,\n\tisStackLayout,\n\tparentItemSpan\n) => {\n\tconst grid = [];\n\tconst isStack = size === 1 || isStackLayout;\n\tconst gridSize = isStack ? DEFAULTS.MAX_SIZE : size;\n\tlet row = [];\n\tlet span = 0;\n\n\tconst getItemColspan = (colSpan) => {\n\t\t// if(Number(parentItemSpan)) {\n\t\t// \treturn Number(parentItemSpan)\n\t\t// }\n\t\treturn Number(colSpan);\n\t};\n\n\tif (!items.length) {\n\t\tconst $cell = { id: 0, separator: true };\n\t\tconst dummy = {\n\t\t\tid: 0,\n\t\t\tdummy: true,\n\t\t\tdummyPanel: true,\n\t\t\tcolSpan: isStack ? 12 : 6,\n\t\t};\n\t\treturn [[$cell, dummy, $cell].concat(isStack ? [] : [dummy, $cell])];\n\t}\n\n\tconst addRow = ({ item, overflow = false } = {}) => {\n\t\tif (overflow) {\n\t\t\tconst fillColspan = gridSize - (span - getItemColspan(item.colSpan));\n\t\t\trow.push({\n\t\t\t\tid: 0,\n\t\t\t\tdummy: true,\n\t\t\t\tcolSpan: fillColspan,\n\t\t\t});\n\t\t}\n\t\tgrid.push(row);\n\t\trow = [];\n\t\tspan = 0;\n\t};\n\n\tconst addItem = (item) => row.push(item);\n\n\tfor (let i = 0; i < items.length; i++) {\n\t\tconst item = Object.assign(\n\t\t\titems[i],\n\t\t\tisStack\n\t\t\t\t? { colSpan: DEFAULTS.MAX_SIZE }\n\t\t\t\t: { colSpan: getItemColspan(getColSpan(items[i], parentItemSpan)) }\n\t\t);\n\t\tconst { colSpan: itemSpan = DEFAULTS.ITEM_COLSPAN } = item;\n\t\tconst isLastItem = i === items.length - 1;\n\t\tspan += getItemColspan(itemSpan);\n\t\tif (span > gridSize) {\n\t\t\taddRow({ item, overflow: true });\n\t\t\tspan = itemSpan;\n\t\t\taddItem(item);\n\t\t} else if (span === gridSize) {\n\t\t\trow.push(item);\n\t\t\taddRow({ item });\n\t\t} else {\n\t\t\trow.push(item);\n\t\t}\n\n\t\tif (isLastItem && row.length) {\n\t\t\tconst occupiedSpan = row.reduce(\n\t\t\t\t(total, { colSpan = DEFAULTS.ITEM_COLSPAN }) => total + colSpan,\n\t\t\t\t0\n\t\t\t);\n\t\t\tconst remainSpan = gridSize - occupiedSpan;\n\t\t\tif (remainSpan > 0) {\n\t\t\t\trow.push({\n\t\t\t\t\tid: 0,\n\t\t\t\t\tdummy: true,\n\t\t\t\t\tcolSpan: remainSpan,\n\t\t\t\t});\n\t\t\t}\n\t\t\tgrid.push(row);\n\t\t}\n\t}\n\n\tconst fullGrid = [];\n\tfor (let i = 0; i < grid.length; i++) {\n\t\tconst row = grid[i];\n\t\tconst draggable = ![TYPE.menubar, TYPE.toolbar].includes(row[0]?.type);\n\t\tconst upRow = [];\n\t\tconst midRow = [];\n\t\tconst addCell = ($row, options = { separator: true }) =>\n\t\t\t$row.push({\n\t\t\t\tid: 0,\n\t\t\t\tcolSpan: 1,\n\t\t\t\t...options,\n\t\t\t});\n\t\taddCell(upRow);\n\n\t\tdraggable &&\n\t\t\taddCell(midRow, {\n\t\t\t\trelatedColSpan: getColSpan(row[0], parentItemSpan),\n\t\t\t\tseparator: true,\n\t\t\t});\n\n\t\tfor (let j = 0; j < row.length; j++) {\n\t\t\tconst col = row[j];\n\t\t\tconst colSpan = getColSpan(col, parentItemSpan);\n\t\t\taddCell(upRow, { dummy: true, colSpan });\n\t\t\taddCell(midRow, col);\n\n\t\t\taddCell(upRow, { relatedColSpan: colSpan, separator: true });\n\t\t\tdraggable &&\n\t\t\t\taddCell(midRow, { relatedColSpan: colSpan, separator: true });\n\t\t}\n\n\t\tdraggable ? fullGrid.push(upRow) : fullGrid.push([]);\n\t\tfullGrid.push(midRow);\n\n\t\tif (i === grid.length - 1) {\n\t\t\tfullGrid.push(upRow);\n\t\t}\n\t}\n\treturn fullGrid;\n};\n\n// Grid Container embeds grid cell\nexport const GridContainer = ({ className, attrs, children, ...rest }) => (\n\t<div\n\t\tclassName={classNames(\n\t\t\tclassName,\n\t\t\tattrs.cols ? `grid-span grid-${attrs.cols}` : \"\"\n\t\t)}\n\t\t{...rest}\n\t>\n\t\t{children}\n\t</div>\n);\n\nexport function useGridWidget() {\n\tconst [WidgetComponent, setWidgetComponent] = React.useState(() => null);\n\n\tReact.useEffect(() => {\n\t\timport(\"./Widget\").then((module) =>\n\t\t\tsetWidgetComponent(() => module.default)\n\t\t);\n\t}, []);\n\n\treturn WidgetComponent;\n}\n\n/**\n * Grid Component handle layout of Container Components like panels\n */\nfunction Grid(props) {\n\tconst WidgetComponent = useGridWidget();\n\tconst {\n\t\tstate: { widgets: _widgets, customFieldWidgets },\n\t} = useStore();\n\tconst { className, items, attrs = {}, panelId, design } = props;\n\tlet widgets = props._type === \"customField\" ? customFieldWidgets : _widgets;\n\tconst widgetAttrs = JSON.parse(attrs.widgetAttrs || \"{}\");\n\tconst gridSize = Number(attrs.cols || 1);\n\tconst columns = gridSize * 2 + 1;\n\tconst isStackLayout = attrs.layout === PANEL_TYPE.stack;\n\tconst spacers = columns === 1 ? 0 : columns / 2 + 1;\n\tconst spacerWidth = design ? 1 : 0; //%\n\tconst cols = (columns - 1) / 2;\n\tconst colWidth = (100 - spacers * spacerWidth) / cols;\n\tconst itemSpan = widgetAttrs?.itemSpan;\n\tconst rows = React.useMemo(() => {\n\t\tlet cellIndice = 0;\n\t\tconst childs = items.map((x) =>\n\t\t\tObject.assign({}, widgets[x] || {}, { id: x })\n\t\t);\n\t\treturn getFullGrid(childs, gridSize, isStackLayout, itemSpan).map(\n\t\t\t(columns, rowIndex) => {\n\t\t\t\tlet span = 0;\n\t\t\t\treturn columns.map((c) => {\n\t\t\t\t\tlet columnIndex = span;\n\t\t\t\t\tspan += c.separator ? 0 : Number(c.colSpan || 1);\n\t\t\t\t\treturn { ...c, rowIndex, columnIndex, cellIndice: cellIndice++ };\n\t\t\t\t});\n\t\t\t}\n\t\t);\n\t}, [items, widgets, gridSize, isStackLayout, itemSpan]);\n\n\tconst gridRows = rows.reduce((arr, row) => arr.concat(row), []);\n\treturn (\n\t\t<GridContainer {...{ attrs, className }}>\n\t\t\t<table cellPadding=\"0\" cellSpacing=\"0\">\n\t\t\t\t{design && (\n\t\t\t\t\t<colgroup>\n\t\t\t\t\t\t{isStackLayout ? (\n\t\t\t\t\t\t\t<col width={\"100%\"} />\n\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\tnew Array(columns)\n\t\t\t\t\t\t\t\t.fill(0)\n\t\t\t\t\t\t\t\t.map((col, i) => (\n\t\t\t\t\t\t\t\t\t<col\n\t\t\t\t\t\t\t\t\t\tkey={i}\n\t\t\t\t\t\t\t\t\t\twidth={`${i % 2 === 1 ? colWidth : spacerWidth}%`}\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t))\n\t\t\t\t\t\t)}\n\t\t\t\t\t</colgroup>\n\t\t\t\t)}\n\t\t\t\t<tbody>\n\t\t\t\t\t{rows.map((cols, rowIndex) => (\n\t\t\t\t\t\t<tr\n\t\t\t\t\t\t\tclassName={rowIndex % 2 === 0 ? \"empty-row\" : \"fill-row\"}\n\t\t\t\t\t\t\tkey={rowIndex}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{cols.map(\n\t\t\t\t\t\t\t\t(\n\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\tid,\n\t\t\t\t\t\t\t\t\t\tcolSpan,\n\t\t\t\t\t\t\t\t\t\tcellIndice: indice,\n\t\t\t\t\t\t\t\t\t\tcolumnIndex,\n\t\t\t\t\t\t\t\t\t\tseparator,\n\t\t\t\t\t\t\t\t\t\trelatedColSpan,\n\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\ti\n\t\t\t\t\t\t\t\t) => {\n\t\t\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t\t\t<td\n\t\t\t\t\t\t\t\t\t\t\tclassName={separator ? \"separator\" : \"\"}\n\t\t\t\t\t\t\t\t\t\t\tkey={indice}\n\t\t\t\t\t\t\t\t\t\t\tcolSpan={colSpan > 1 ? colSpan * 2 - 1 : colSpan}\n\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t{WidgetComponent && (\n\t\t\t\t\t\t\t\t\t\t\t\t<WidgetComponent\n\t\t\t\t\t\t\t\t\t\t\t\t\tdesign={design}\n\t\t\t\t\t\t\t\t\t\t\t\t\tmeta={{\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tisSeparator: Boolean(separator),\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tcolSpan,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\trow: rowIndex,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tcol: i,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tcolIndex: columnIndex,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tgrid: gridRows,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\ttotal: columns,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\trelatedColSpan: relatedColSpan,\n\t\t\t\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t\t\t\tpanelId={panelId}\n\t\t\t\t\t\t\t\t\t\t\t\t\tkey={indice}\n\t\t\t\t\t\t\t\t\t\t\t\t\tid={id}\n\t\t\t\t\t\t\t\t\t\t\t\t\tindex={indice}\n\t\t\t\t\t\t\t\t\t\t\t\t\tpanelColumns={attrs.cols}\n\t\t\t\t\t\t\t\t\t\t\t\t\t_type={props._type}\n\t\t\t\t\t\t\t\t\t\t\t\t\terrorList={props.errorList}\n\t\t\t\t\t\t\t\t\t\t\t\t\tcanRemove={props.canRemove}\n\t\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t</tr>\n\t\t\t\t\t))}\n\t\t\t\t</tbody>\n\t\t\t</table>\n\t\t</GridContainer>\n\t);\n}\n\nexport default Grid;\n","import React from \"react\";\nimport classNames from \"classnames\";\nimport Grid from \"./Grid\";\nimport { TYPE } from \"../constants\";\nimport { translate } from \"../utils\";\n\n/**\n * Panel Component\n * Used As Container to group Field Component like form group\n */\nfunction PanelComponent({ id, attrs, design, isTab = false, ...rest }) {\n\tconst errors = rest.errorList[id] || {};\n\treturn (\n\t\t<React.Fragment>\n\t\t\t{(attrs.title ||\n\t\t\t\t[TYPE.toolbar, TYPE.menubar].includes(attrs.serverType)) && (\n\t\t\t\t<div\n\t\t\t\t\tclassName={classNames(\"panel-header\", {\n\t\t\t\t\t\tinline: isTab,\n\t\t\t\t\t})}\n\t\t\t\t>\n\t\t\t\t\t{translate(attrs.title || attrs.autoTitle)}\n\t\t\t\t\t{attrs.serverType === TYPE.toolbar && (\n\t\t\t\t\t\t<i className=\"fa fa-wrench\" title=\"toolbar\" />\n\t\t\t\t\t)}\n\t\t\t\t\t{attrs.serverType === TYPE.menubar && (\n\t\t\t\t\t\t<i className=\"fa fa-bars\" title=\"menubar\" />\n\t\t\t\t\t)}\n\t\t\t\t</div>\n\t\t\t)}\n\t\t\t{errors.items && !isTab && (\n\t\t\t\t<div className={classNames(\"panel-children-error\")}>{errors.items}</div>\n\t\t\t)}\n\t\t\t{!isTab && (\n\t\t\t\t<Grid\n\t\t\t\t\tdesign={design}\n\t\t\t\t\tclassName=\"panel-body\"\n\t\t\t\t\titems={attrs.items || []}\n\t\t\t\t\tattrs={attrs}\n\t\t\t\t\tpanelId={id}\n\t\t\t\t\t_type={rest._type}\n\t\t\t\t\terrorList={rest.errorList}\n\t\t\t\t\tcanRemove={rest.canRemove}\n\t\t\t\t/>\n\t\t\t)}\n\t\t</React.Fragment>\n\t);\n}\n\nexport default React.memo(PanelComponent);\n","import { getExtendJson2, getWidgetObject } from \"./extensionGenerator\";\nimport { MODEL_TYPE } from \"./../constants\";\nimport Utils from \"./../utils\";\n\nfunction setAttributeOnNewWidget(items, widget, widgetId, state) {\n\tconst widgets = state.widgets;\n\tlet inserted = false;\n\tconst getWidgetName = () => widgets[widgetId] && widgets[widgetId].name;\n\tfor (let i = 0; i < items.length; i++) {\n\t\tconst item = items[i];\n\t\tif (item.name === getWidgetName()) {\n\t\t\titem[widget.attributes.name] = widget.attributes.value;\n\t\t\tinserted = true;\n\t\t}\n\t\tif (inserted) {\n\t\t\tbreak;\n\t\t}\n\t\tif (item.items && item.items.length) {\n\t\t\tconst _inserted = setAttributeOnNewWidget(\n\t\t\t\titem.items,\n\t\t\t\twidget,\n\t\t\t\twidgetId,\n\t\t\t\tstate\n\t\t\t);\n\t\t\tif (_inserted) {\n\t\t\t\tinserted = _inserted;\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t}\n\treturn inserted;\n}\n\nexport function generateExtension(list, state) {\n\tconst cleatVirtualAction = () => {\n\t\tconst exemptedAttributes = [\n\t\t\t\"widgetAttrs\",\n\t\t\t\"items\",\n\t\t\t\"current\",\n\t\t\t\"elements\",\n\t\t\t\"tz\",\n\t\t\t\"targetModel\",\n\t\t\t\"_type\",\n\t\t];\n\t\t[...list].forEach((item, i) => {\n\t\t\tif (item.name === \"insert\") {\n\t\t\t\tconst id = item.id;\n\t\t\t\tconst removeIndex = list.findIndex(\n\t\t\t\t\t(item) => item.name === \"replace\" && item.id === id && !item.target\n\t\t\t\t);\n\t\t\t\tconst insertIndex = list.findIndex(\n\t\t\t\t\t(item) => item.id === id && item.name === \"insert\"\n\t\t\t\t);\n\t\t\t\tif (removeIndex !== -1) {\n\t\t\t\t\tlist.splice(removeIndex, 1);\n\t\t\t\t\tlist.splice(insertIndex, 1);\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (item.name === \"attribute\") {\n\t\t\t\tconst id = item.id;\n\t\t\t\t// set blank values for default value\n\t\t\t\tif (\n\t\t\t\t\titem.attributes &&\n\t\t\t\t\tUtils.isDefaultValue(item.attributes.name, item.attributes.value)\n\t\t\t\t) {\n\t\t\t\t\tconst attrIndex = list.findIndex(\n\t\t\t\t\t\t(e) =>\n\t\t\t\t\t\t\te.id === id &&\n\t\t\t\t\t\t\te.name === \"attribute\" &&\n\t\t\t\t\t\t\te.attributes.name === item.attributes.name\n\t\t\t\t\t);\n\t\t\t\t\tlist.splice(attrIndex, 1, {\n\t\t\t\t\t\t...list[attrIndex],\n\t\t\t\t\t\tattributes: {\n\t\t\t\t\t\t\t...list[attrIndex].attributes,\n\t\t\t\t\t\t\tvalue: item.attributes.value,\n\t\t\t\t\t\t},\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\tif (\n\t\t\t\t\titem.attributes &&\n\t\t\t\t\texemptedAttributes.includes(item.attributes.name)\n\t\t\t\t) {\n\t\t\t\t\tconst attrIndex = list.findIndex(\n\t\t\t\t\t\t(item) =>\n\t\t\t\t\t\t\titem.id === id &&\n\t\t\t\t\t\t\titem.name === \"attribute\" &&\n\t\t\t\t\t\t\texemptedAttributes.includes(item.attributes.name)\n\t\t\t\t\t);\n\t\t\t\t\tlist.splice(attrIndex, 1);\n\t\t\t\t} else {\n\t\t\t\t\tlet processed = false;\n\t\t\t\t\tconst getWidgetName = () =>\n\t\t\t\t\t\tstate.widgets[id] && state.widgets[id].name;\n\t\t\t\t\tfor (let k = 0; k < state.extensionMoves.length; k++) {\n\t\t\t\t\t\tconst move = state.extensionMoves[k];\n\t\t\t\t\t\tif (move.name === \"insert\") {\n\t\t\t\t\t\t\tconst { elements } = move;\n\t\t\t\t\t\t\tfor (let j = 0; j < elements.length; j++) {\n\t\t\t\t\t\t\t\tconst element = elements[j];\n\t\t\t\t\t\t\t\tif (element.name === getWidgetName()) {\n\t\t\t\t\t\t\t\t\tstate.extensionMoves[k].elements[j][item.attributes.name] =\n\t\t\t\t\t\t\t\t\t\titem.attributes.value;\n\t\t\t\t\t\t\t\t\tprocessed = true;\n\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tif (element.items && element.items.length) {\n\t\t\t\t\t\t\t\t\tlet inserted = setAttributeOnNewWidget(\n\t\t\t\t\t\t\t\t\t\telement.items,\n\t\t\t\t\t\t\t\t\t\titem,\n\t\t\t\t\t\t\t\t\t\tid,\n\t\t\t\t\t\t\t\t\t\tstate\n\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\tif (inserted) {\n\t\t\t\t\t\t\t\t\t\tprocessed = true;\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (processed) {\n\t\t\t\t\t\t\tconst attrIndex = list.findIndex(\n\t\t\t\t\t\t\t\t(item) => item.id === id && item.name === \"attribute\"\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\tlist.splice(attrIndex, 1);\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t};\n\tcleatVirtualAction();\n\tstate.extensionMoves.push(...list);\n}\n\nconst generateNestedView = (items) => {\n\tconst _items = items.map((item) => {\n\t\tlet _subItems = [];\n\t\tif (item.items) {\n\t\t\t_subItems = generateNestedView(item.items);\n\t\t}\n\t\treturn getWidgetObject(\n\t\t\t{ ...item, elements: _subItems },\n\t\t\t[],\n\t\t\tnull,\n\t\t\tMODEL_TYPE.BASE\n\t\t);\n\t});\n\n\treturn _items;\n};\n\nexport function getXML(extensionMoves, state) {\n\tconst patches = extensionMoves\n\t\t.map((move) => {\n\t\t\tlet fields;\n\t\t\tif (move.name === \"insert\") {\n\t\t\t\tfields = move.elements\n\t\t\t\t\t.map((field) => {\n\t\t\t\t\t\tif (field && field.items && field.items.length) {\n\t\t\t\t\t\t\tconst f = { ...field };\n\t\t\t\t\t\t\tf.elements = generateNestedView(field.items);\n\t\t\t\t\t\t\treturn f;\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn field;\n\t\t\t\t\t})\n\t\t\t\t\t.filter((e) => e);\n\t\t\t}\n\t\t\tif (!move.target) {\n\t\t\t\treturn undefined;\n\t\t\t}\n\t\t\treturn getExtendJson2({\n\t\t\t\ttarget: move.target,\n\t\t\t\tposition: move.position,\n\t\t\t\tsource: move.source,\n\t\t\t\ttype: move.name,\n\t\t\t\twidgetAttrs: fields,\n\t\t\t\t...move.attributes,\n\t\t\t});\n\t\t})\n\t\t.filter((e) => e);\n\treturn patches;\n}\n\nfunction insertOnNewPanel(items, widget, panelId, state) {\n\tconst widgets = state.widgets;\n\tlet inserted = false;\n\tconst getPanelName = () => widgets[panelId].name;\n\tfor (let i = 0; i < items.length; i++) {\n\t\tconst item = items[i];\n\t\tif (item.name === getPanelName()) {\n\t\t\tif (item.items) {\n\t\t\t\titem.items.push(widget);\n\t\t\t} else {\n\t\t\t\titem.items = [widget];\n\t\t\t}\n\t\t\tinserted = true;\n\t\t}\n\t\tif (inserted) {\n\t\t\tbreak;\n\t\t}\n\t\tif (item.items && item.items.length) {\n\t\t\tconst _inserted = insertOnNewPanel(item.items, widget, panelId, state);\n\t\t\tif (_inserted) {\n\t\t\t\tinserted = _inserted;\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t}\n\treturn inserted;\n}\n\nexport function processMoves(state, widget, id, panelId) {\n\tconst list = [];\n\tlet processed = false;\n\tconst widgets = state.widgets;\n\tconst getPanelName = () => widgets[panelId].name;\n\tfor (let i = 0; i < state.extensionMoves.length; i++) {\n\t\tconst move = state.extensionMoves[i];\n\t\tif (move.name === \"insert\") {\n\t\t\tconst { elements } = move;\n\t\t\tfor (let j = 0; j < elements.length; j++) {\n\t\t\t\tconst element = elements[j];\n\t\t\t\tif (\n\t\t\t\t\telement.name === getPanelName() &&\n\t\t\t\t\telement.items &&\n\t\t\t\t\telement.items.length === 0\n\t\t\t\t) {\n\t\t\t\t\tstate.extensionMoves[i].elements[j].items.push(widget);\n\t\t\t\t\tprocessed = true;\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t\tif (element.items && element.items.length) {\n\t\t\t\t\tlet inserted = insertOnNewPanel(\n\t\t\t\t\t\telement.items,\n\t\t\t\t\t\twidget,\n\t\t\t\t\t\tpanelId,\n\t\t\t\t\t\tstate\n\t\t\t\t\t);\n\t\t\t\t\tif (inserted) {\n\t\t\t\t\t\tprocessed = true;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tif (processed) {\n\t\t\tbreak;\n\t\t}\n\t}\n\tif (processed) {\n\t\tif (widget.xPath) {\n\t\t\tlist.push({ name: \"replace\", target: widget.xPath });\n\t\t}\n\t}\n\treturn list;\n}\n","import properties from \"./../Properties/list\";\nimport { MODEL_TYPE, TYPE } from \"./../constants\";\nimport { translate } from \"../utils\";\n\nexport function validate(field, modelType, isCustomField = false) {\n\tconst errors = {};\n\tlet selectedType =\n\t\tfield.serverType === \"field\" ? field.type : field.serverType || field.type;\n\tselectedType = selectedType && selectedType.toLowerCase().replace(/_/g, \"-\");\n\tlet property = properties.find((option) => option.type === selectedType);\n\tif (selectedType === \"form\") {\n\t\tif (modelType === MODEL_TYPE.CUSTOM) {\n\t\t\tproperty = properties.find((option) => option.type === \"modelForm\");\n\t\t}\n\t}\n\tif (\n\t\t!isCustomField &&\n\t\tmodelType === MODEL_TYPE.BASE &&\n\t\t[\n\t\t\tTYPE.panel,\n\t\t\tTYPE.panelStack,\n\t\t\tTYPE.tabs,\n\t\t\tTYPE.menu,\n\t\t\tTYPE.menubar,\n\t\t\tTYPE.toolbar,\n\t\t].includes(selectedType)\n\t) {\n\t\tif (field.items && field.items.length === 0) {\n\t\t\tconst message =\n\t\t\t\tselectedType === TYPE.menu\n\t\t\t\t\t? translate(\"Atleast one menu item required\")\n\t\t\t\t\t: translate(\"Atleast one children required\");\n\t\t\terrors[\"items\"] = message;\n\t\t}\n\t}\n\tif (!property) {\n\t\treturn errors;\n\t}\n\tconst propertyList = Object.keys(property.value).reduce((lst = [], key) => {\n\t\treturn [...lst, ...property.value[key]];\n\t}, []);\n\tpropertyList.forEach((property) => {\n\t\tconst addErrorMessage = () => {\n\t\t\terrors[property.name] = `${translate(\n\t\t\t\tproperty.title || property.name\n\t\t\t)} ${translate(\"required\")}`;\n\t\t};\n\t\tif (\n\t\t\t(property.requiredFor &&\n\t\t\t\tproperty.requiredFor.includes(selectedType) &&\n\t\t\t\t!field[property.name]) ||\n\t\t\t(property.required && !field[property.name])\n\t\t) {\n\t\t\taddErrorMessage();\n\t\t}\n\t\tif (\n\t\t\tproperty.requiredWhen &&\n\t\t\t(property.requiredNegation\n\t\t\t\t? !field[property.requiredWhen]\n\t\t\t\t: field[property.requiredWhen]) &&\n\t\t\t!field[property.name]\n\t\t) {\n\t\t\tif (field.isSelectionField) {\n\t\t\t\taddErrorMessage();\n\t\t\t} else if ([\"menuBuilderTitle\"].includes(property.name)) {\n\t\t\t\taddErrorMessage();\n\t\t\t} else if (\n\t\t\t\t[\"selectionText\"].includes(property.name) &&\n\t\t\t\tfield.updateSelection\n\t\t\t) {\n\t\t\t\taddErrorMessage();\n\t\t\t}\n\t\t}\n\t\tif (property.regex) {\n\t\t\tconst re = new RegExp(property.regex);\n\t\t\tif (!re.test(field[property.name]) && !errors[property.name]) {\n\t\t\t\terrors[property.name] = translate(property.regexErrorMessage);\n\t\t\t}\n\t\t}\n\t});\n\treturn errors;\n}\n\nexport function validateParentPanelItems(state, panelId) {\n\tconst panel = state.widgets[panelId];\n\tconst errors = state.errorList[panelId] || {};\n\tif (panel) {\n\t\tif (panel.items && panel.items.length > 0) {\n\t\t\tif (errors.items) {\n\t\t\t\tdelete errors.items;\n\t\t\t}\n\t\t} else {\n\t\t\terrors.items = translate(\"Atleast one children required\");\n\t\t}\n\t\tif (Object.keys(errors).length) {\n\t\t\tstate.errorList[panelId] = errors;\n\t\t} else {\n\t\t\tdelete state.errorList[panelId];\n\t\t}\n\t}\n}\n\nexport function validateOnRemove(state, id) {\n\tconst errors = state.errorList[id];\n\tif (errors) {\n\t\tdelete state.errorList[id];\n\t}\n}\n","import fontAwesomeList from \"./fa-icons\";\nimport {\n\tName,\n\tType,\n\tTitle,\n\tDefaultValue,\n\tAppBuilder,\n\tHelp,\n\tSequence,\n\tRoles,\n\tValueExpression,\n\tSelection,\n\tWidget,\n\tOnChange,\n\tMin,\n\tMax,\n\tJsonRelationalField,\n\tDomain,\n\tTargetJsonModel,\n\tTargetModel,\n\tGridView,\n\tFormView,\n\tRequired,\n\tColumnSequence,\n\tReadOnly,\n\tHidden,\n\tVisibleInGrid,\n\tShowIf,\n\tHideIf,\n\tIf,\n\tRequiredIf,\n\tReadOnlyIf,\n\tIncludeIf,\n\tValidIf,\n\tColSpan,\n\tShowTitle,\n\tOnNew,\n\tEditable,\n\tDummyType,\n\tCanSearch,\n\tAction,\n\tIfModule,\n\tHeight,\n\tField,\n\tCanMove,\n\tOrderBy,\n\tIncludeFrom,\n\tIncludeView,\n\tIsGenerateMenu,\n\tMenuBuilderParent,\n\tMenuBuilderTitle,\n\tModel,\n\tStrong,\n\tColor,\n\tBackground,\n\tItemSpan,\n\tCss,\n\tPrompt,\n\tSelectionIn,\n\tValueAdd,\n\tValueDel,\n\tActive,\n\tRefresh,\n\tValue,\n\tSidebar,\n} from \"./propertyFields\";\nimport {\n\tStringField,\n\tIntegerField,\n\tStaticSelectField,\n\tSelectField,\n\tBooleanField,\n} from \"./fieldTypes\";\nimport { MODEL_TYPE } from \"./../constants\";\n\n/** Options */\nconst stringOption = {\n\toverview: [\n\t\tName({ existsCheck: true }),\n\t\tType,\n\t\tTitle,\n\t\tDefaultValue,\n\t\tAppBuilder,\n\t\tHelp,\n\t\tSequence,\n\t],\n\tfieldOptions: [\n\t\tSelection,\n\t\tSelectionIn,\n\t\tWidget,\n\t\tOnChange,\n\t\tMin,\n\t\tMax,\n\t\tStringField({ name: \"regex\", dependModelType: MODEL_TYPE.CUSTOM }),\n\t\tValue,\n\t],\n\tuiOptions: [\n\t\tRequired,\n\t\tReadOnly,\n\t\tBooleanField({\n\t\t\tname: \"nameField\",\n\t\t\ttitle: \"Name column\",\n\t\t\tdependModelType: MODEL_TYPE.CUSTOM,\n\t\t}),\n\t\tHidden,\n\t\tVisibleInGrid,\n\t\tColumnSequence,\n\t\tCss,\n\t],\n\tconditions: [ShowIf, HideIf, RequiredIf, ReadOnlyIf, IncludeIf, ValidIf],\n\tvalueExpr: [ValueExpression],\n\troles: [Roles],\n\twidgetAttributes: [\n\t\tColSpan,\n\t\tShowTitle,\n\t\tBooleanField({\n\t\t\tname: \"multiline\",\n\t\t\tparentField: \"widgetAttrs\",\n\t\t\tmodelType: MODEL_TYPE.CUSTOM,\n\t\t\tdependModelType: MODEL_TYPE.CUSTOM,\n\t\t}),\n\t],\n};\n\nconst integerOption = {\n\toverview: [\n\t\tName({ existsCheck: true }),\n\t\tType,\n\t\tTitle,\n\t\tDefaultValue,\n\t\tAppBuilder,\n\t\tHelp,\n\t\tSequence,\n\t],\n\tfieldOptions: [\n\t\tSelection,\n\t\tSelectionIn,\n\t\tWidget,\n\t\tOnChange,\n\t\tMin,\n\t\tMax,\n\t\tValue,\n\t],\n\tuiOptions: [Required, ReadOnly, Hidden, VisibleInGrid, ColumnSequence, Css],\n\tconditions: [ShowIf, HideIf, RequiredIf, ReadOnlyIf, IncludeIf, ValidIf],\n\tvalueExpr: [ValueExpression],\n\troles: [Roles],\n\twidgetAttributes: [ColSpan, ShowTitle],\n};\n\nconst decimalOption = {\n\toverview: [\n\t\tName({ existsCheck: true }),\n\t\tType,\n\t\tTitle,\n\t\tDefaultValue,\n\t\tAppBuilder,\n\t\tHelp,\n\t\tSequence,\n\t],\n\tfieldOptions: [\n\t\tWidget,\n\t\tOnChange,\n\t\tMin,\n\t\tMax,\n\t\tIntegerField({\n\t\t\tname: \"precision\",\n\t\t\tdefault: 6,\n\t\t}),\n\t\tIntegerField({\n\t\t\tname: \"scale\",\n\t\t\tdefault: 2,\n\t\t}),\n\t\tValue,\n\t],\n\tuiOptions: [Required, ReadOnly, Hidden, VisibleInGrid, ColumnSequence, Css],\n\tconditions: [ShowIf, HideIf, RequiredIf, ReadOnlyIf, IncludeIf, ValidIf],\n\tvalueExpr: [ValueExpression],\n\troles: [Roles],\n\twidgetAttributes: [ColSpan, ShowTitle],\n};\n\nconst booleanOption = {\n\toverview: [\n\t\tName({ existsCheck: true }),\n\t\tType,\n\t\tTitle,\n\t\tDefaultValue,\n\t\tAppBuilder,\n\t\tHelp,\n\t\tSequence,\n\t],\n\tfieldOptions: [Widget, OnChange, Value],\n\tuiOptions: [Required, ReadOnly, Hidden, VisibleInGrid, ColumnSequence, Css],\n\tconditions: [ShowIf, HideIf, RequiredIf, ReadOnlyIf, IncludeIf, ValidIf],\n\tvalueExpr: [ValueExpression],\n\troles: [Roles],\n\twidgetAttributes: [ColSpan, ShowTitle],\n};\n\nconst datetimeOption = {\n\toverview: [\n\t\tName({ existsCheck: true }),\n\t\tType,\n\t\tTitle,\n\t\tDefaultValue,\n\t\tAppBuilder,\n\t\tHelp,\n\t\tSequence,\n\t],\n\tfieldOptions: [Widget, OnChange, Value],\n\tuiOptions: [Required, ReadOnly, Hidden, VisibleInGrid, ColumnSequence, Css],\n\tconditions: [ShowIf, HideIf, RequiredIf, ReadOnlyIf, IncludeIf, ValidIf],\n\tvalueExpr: [ValueExpression],\n\troles: [Roles],\n\twidgetAttributes: [ColSpan, ShowTitle],\n};\n\nconst panelOption = {\n\toverview: [Name({ existsCheck: true }), Type, Title, AppBuilder],\n\tuiOptions: [\n\t\tReadOnly,\n\t\tHidden,\n\t\tSidebar,\n\t\tBooleanField({\n\t\t\tname: \"canCollapse\",\n\t\t\tparentField: \"widgetAttrs\",\n\t\t\tmodelType: MODEL_TYPE.CUSTOM,\n\t\t\tdependModelType: MODEL_TYPE.CUSTOM,\n\t\t}),\n\t\tStringField({\n\t\t\tname: \"collapseIf\",\n\t\t\tparentField: \"widgetAttrs\",\n\t\t\tmodelType: MODEL_TYPE.CUSTOM,\n\t\t\tdependModelType: MODEL_TYPE.CUSTOM,\n\t\t}),\n\t\tColumnSequence,\n\t\tCss,\n\t\tActive,\n\t],\n\tconditions: [ShowIf, HideIf, ReadOnlyIf],\n\troles: [Roles],\n\twidgetAttributes: [ColSpan, ItemSpan, ShowTitle],\n};\n\nconst panelStackOption = {\n\toverview: [Name({ existsCheck: true }), Type, AppBuilder],\n\tuiOptions: [\n\t\tReadOnly,\n\t\tHidden,\n\t\tSidebar,\n\t\tBooleanField({\n\t\t\tname: \"canCollapse\",\n\t\t\tparentField: \"widgetAttrs\",\n\t\t\tmodelType: MODEL_TYPE.CUSTOM,\n\t\t\tdependModelType: MODEL_TYPE.CUSTOM,\n\t\t}),\n\t\tStringField({\n\t\t\tname: \"collapseIf\",\n\t\t\tparentField: \"widgetAttrs\",\n\t\t\tmodelType: MODEL_TYPE.CUSTOM,\n\t\t\tdependModelType: MODEL_TYPE.CUSTOM,\n\t\t}),\n\t\tColumnSequence,\n\t\tCss,\n\t],\n\tconditions: [ShowIf, HideIf, ReadOnlyIf],\n\troles: [Roles],\n\twidgetAttributes: [ColSpan],\n};\n\nconst panelTabOption = {\n\toverview: [Name({ existsCheck: true }), Type, Title, AppBuilder],\n\tuiOptions: [ReadOnly, Hidden, ColumnSequence, Css],\n\tconditions: [ShowIf, HideIf, ReadOnlyIf],\n\troles: [Roles],\n\twidgetAttributes: [ShowTitle],\n};\n\nconst buttonOption = {\n\toverview: [\n\t\tName({ existsCheck: true }),\n\t\tType,\n\t\tTitle,\n\t\tAppBuilder,\n\t\tHelp,\n\t\tSequence,\n\t\tPrompt,\n\t],\n\tfieldOptions: [\n\t\tWidget,\n\t\tSelectField({\n\t\t\tname: \"onClick\",\n\t\t\ttitle: \"On click\",\n\t\t\trequired: true,\n\t\t\tref: \"com.axelor.meta.db.MetaAction\",\n\t\t\trequiredFor: [\"button\"],\n\t\t\tdependModelType: MODEL_TYPE.CUSTOM,\n\t\t\tmultiple: true,\n\t\t\tcommaSeparated: true,\n\t\t\tcanAddNew: true,\n\t\t}),\n\t],\n\tuiOptions: [ReadOnly, Hidden, VisibleInGrid, ColumnSequence, Css],\n\tconditions: [ShowIf, HideIf, RequiredIf, ReadOnlyIf, IncludeIf, ValidIf],\n\troles: [Roles],\n\twidgetAttributes: [\n\t\tColSpan,\n\t\tShowTitle,\n\t\tStaticSelectField({\n\t\t\tname: \"icon\",\n\t\t\ttitle: \"Icon\",\n\t\t\tdata: fontAwesomeList,\n\t\t\thelper: \"https://fontawesome.com/cheatsheet\",\n\t\t\tparentField: \"widgetAttrs\",\n\t\t\tmodelType: MODEL_TYPE.CUSTOM,\n\t\t}),\n\t\t// StaticSelectField({\n\t\t// \tname: \"color\",\n\t\t// \tdata: [\n\t\t// \t\t\"btn-default\",\n\t\t// \t\t\"btn-warning\",\n\t\t// \t\t\"btn-info\",\n\t\t// \t\t\"btn-success\",\n\t\t// \t\t\"btn-primary\",\n\t\t// \t\t\"btn-danger\",\n\t\t// \t],\n\t\t// \ttitle: \"Color\",\n\t\t// }),\n\t],\n};\n\nconst seperatorOption = {\n\toverview: [\n\t\tName({ existsCheck: true }),\n\t\tType,\n\t\tTitle,\n\t\tDefaultValue,\n\t\tAppBuilder,\n\t\tHelp,\n\t\tSequence,\n\t],\n\tuiOptions: [Hidden, ColumnSequence, Css],\n\tconditions: [ShowIf, HideIf, RequiredIf, ReadOnlyIf, IncludeIf, ValidIf],\n\troles: [Roles],\n\twidgetAttributes: [ColSpan],\n};\n\nconst spacerOption = {\n\toverview: [Name({ existsCheck: true }), Type, AppBuilder],\n\tfieldOptions: [],\n\tuiOptions: [Hidden, ColumnSequence, Css],\n\tconditions: [ShowIf, HideIf, ValidIf],\n\troles: [Roles],\n\twidgetAttributes: [ColSpan],\n};\n\nconst labelOption = {\n\toverview: [Name({ existsCheck: true }), Type, Title, AppBuilder],\n\tfieldOptions: [Widget],\n\tuiOptions: [Required, Hidden, ColumnSequence, Css],\n\tconditions: [ShowIf, HideIf, RequiredIf, ReadOnlyIf, ValidIf],\n\tvalueExpr: [ValueExpression],\n\troles: [Roles],\n\twidgetAttributes: [ColSpan, ShowTitle],\n};\n\nconst viewerOption = {\n\toverview: [Name({ existsCheck: true }), Type, Title, AppBuilder],\n\tfieldOptions: [Widget],\n\tuiOptions: [Required, Hidden, ReadOnly, ColumnSequence, Css],\n\tconditions: [ShowIf, HideIf, RequiredIf, ReadOnlyIf, ValidIf],\n\tvalueExpr: [ValueExpression],\n\troles: [Roles],\n\twidgetAttributes: [ColSpan, ShowTitle],\n};\n\nconst manyToOneOption = {\n\toverview: [\n\t\tName({ existsCheck: true }),\n\t\tType,\n\t\tTitle,\n\t\tDefaultValue,\n\t\tAppBuilder,\n\t\tHelp,\n\t\tSequence,\n\t],\n\tfieldOptions: [\n\t\tWidget,\n\t\tOnChange,\n\t\tJsonRelationalField,\n\t\tDomain,\n\t\tTargetModel,\n\t\tGridView,\n\t\tFormView,\n\t\tValue,\n\t],\n\tuiOptions: [Required, ReadOnly, Hidden, VisibleInGrid, ColumnSequence, Css],\n\tconditions: [ShowIf, HideIf, RequiredIf, ReadOnlyIf, IncludeIf, ValidIf],\n\tvalueExpr: [ValueExpression],\n\troles: [Roles],\n\twidgetAttributes: [ColSpan, ShowTitle],\n};\n\nconst manyToManyAndOneToManyOption = {\n\toverview: [\n\t\tName({ existsCheck: true }),\n\t\tType,\n\t\tTitle,\n\t\tAppBuilder,\n\t\tHelp,\n\t\tSequence,\n\t],\n\tfieldOptions: [\n\t\tWidget,\n\t\tOnChange,\n\t\tJsonRelationalField,\n\t\tDomain,\n\t\tTargetModel,\n\t\tGridView,\n\t\tFormView,\n\t\tValueAdd,\n\t\tValueDel,\n\t\tValue,\n\t],\n\tuiOptions: [Required, ReadOnly, Hidden, VisibleInGrid, ColumnSequence, Css],\n\tconditions: [ShowIf, HideIf, RequiredIf, ReadOnlyIf, IncludeIf, ValidIf],\n\tvalueExpr: [ValueExpression],\n\troles: [Roles],\n\twidgetAttributes: [ColSpan, ShowTitle],\n};\n\nconst customRelationOption = {\n\toverview: [\n\t\tName({ existsCheck: true }),\n\t\tType,\n\t\tTitle,\n\t\tAppBuilder,\n\t\tHelp,\n\t\tSequence,\n\t],\n\tfieldOptions: [\n\t\tWidget,\n\t\tOnChange,\n\t\tJsonRelationalField,\n\t\tDomain,\n\t\tTargetJsonModel,\n\t\tValue,\n\t],\n\tuiOptions: [Required, ReadOnly, Hidden, VisibleInGrid, ColumnSequence, Css],\n\tconditions: [ShowIf, HideIf, RequiredIf, ReadOnlyIf, IncludeIf, ValidIf],\n\tvalueExpr: [ValueExpression],\n\troles: [Roles],\n\twidgetAttributes: [ColSpan, ShowTitle],\n};\n\nconst formOption = {\n\toverview: [\n\t\tName({ existsCheck: true }),\n\t\t{ ...Title, required: true },\n\t\tAppBuilder,\n\t\tStaticSelectField({\n\t\t\tname: \"formWidth\",\n\t\t\ttitle: \"Form width\",\n\t\t\tdata: [\"large\"],\n\t\t}),\n\t\tStringField({\n\t\t\tname: \"orderBy\",\n\t\t\ttitle: \"Order by\",\n\t\t}),\n\t\tIsGenerateMenu,\n\t\tMenuBuilderParent,\n\t\tMenuBuilderTitle,\n\t],\n\tactions: [\n\t\tSelectField({\n\t\t\ttitle: \"On new\",\n\t\t\tname: \"onNew\",\n\t\t\tref: \"com.axelor.meta.db.MetaAction\",\n\t\t\tdependModelType: MODEL_TYPE.CUSTOM,\n\t\t\tmultiple: true,\n\t\t\tcommaSeparated: true,\n\t\t\tcanAddNew: true,\n\t\t}),\n\t\tSelectField({\n\t\t\ttitle: \"On save\",\n\t\t\tname: \"onSave\",\n\t\t\tref: \"com.axelor.meta.db.MetaAction\",\n\t\t\tdependModelType: MODEL_TYPE.CUSTOM,\n\t\t\tmultiple: true,\n\t\t\tcommaSeparated: true,\n\t\t\tcanAddNew: true,\n\t\t}),\n\t],\n};\n\nconst commonOption = {\n\toverview: [Name(), Type, Title, AppBuilder],\n\tuiOptions: [Hidden, VisibleInGrid, ColumnSequence, Css],\n\tconditions: [ShowIf, HideIf, ReadOnlyIf, IncludeIf, ValidIf],\n\twidgetAttributes: [ColSpan, ShowTitle],\n};\n\nconst dummyOption = {\n\toverview: [Name(), DummyType],\n};\nconst viewOption = {\n\toverview: [\n\t\tName({ existsCheck: true }),\n\t\tType,\n\t\t{ ...Title, readOnly: true, translationView: false },\n\t],\n};\n\nconst gridOption = {\n\toverview: [Name({ existsCheck: true }), Type, Title, Model, Editable],\n};\n\nconst panelDashletOption = {\n\toverview: [\n\t\tName({ existsCheck: true }),\n\t\tType,\n\t\tAction,\n\t\tTitle,\n\t\tCanSearch,\n\t\tIfModule,\n\t],\n\tuiOptions: [ReadOnly, Hidden, Height, Css, Refresh],\n\tconditions: [ShowIf, HideIf, ReadOnlyIf],\n\twidgetAttributes: [ColSpan, ShowTitle],\n};\n\nconst menuItemOption = {\n\toverview: [Name({ existsCheck: true }), Type, Action],\n\t// conditions: [If, ShowIf, HideIf, ReadOnlyIf],\n\twidgetAttributes: [ShowTitle],\n};\n\nconst dividerOption = {\n\toverview: [Name({ existsCheck: true }), Type],\n\tconditions: [If, ShowIf, HideIf, IfModule],\n};\n\nconst menuOption = {\n\toverview: [Name({ existsCheck: true }), Type],\n\twidgetAttributes: [\n\t\tShowTitle,\n\t\t// StaticSelectField({\n\t\t// \tname: \"icon\",\n\t\t// \ttitle: \"Icon\",\n\t\t// \tdata: fontAwesomeList,\n\t\t// \thelper: \"https://fontawesome.com/cheatsheet\",\n\t\t// })\n\t],\n\tconditions: [If, IfModule, IncludeIf],\n};\n\nconst panelRelatedOption = {\n\toverview: [Name({ existsCheck: true }), Type, Title, Field, OnNew, OnChange],\n\tuiOptions: [FormView, GridView, Height, Editable, ReadOnly, Hidden, Css],\n\tconditions: [ShowIf, HideIf, ReadOnlyIf, ValidIf, CanMove, OrderBy],\n\twidgetAttributes: [ColSpan, ShowTitle],\n};\n\nconst panelIncludeOption = {\n\toverview: [Type, IncludeView, IncludeFrom, IfModule],\n\twidgetAttributes: [ShowTitle],\n};\n\nconst hiliteOption = {\n\toverview: [Name({ existsCheck: true }), If, Color, Background, Strong, Css],\n};\n\nexport const options = [\n\t{ type: \"form\", value: viewOption },\n\t{ type: \"grid\", value: gridOption },\n\t{ type: \"modelForm\", value: formOption },\n\t{ type: \"string\", value: stringOption },\n\t{ type: \"byte[]\", value: stringOption },\n\t{ type: \"integer\", value: integerOption },\n\t{ type: \"number\", value: integerOption },\n\t{ type: \"decimal\", value: decimalOption },\n\t{ type: \"bigdecimal\", value: decimalOption },\n\t{ type: \"boolean\", value: booleanOption },\n\t{ type: \"datetime\", value: datetimeOption },\n\t{ type: \"localdatetime\", value: datetimeOption },\n\t{ type: \"zoneddatetime\", value: datetimeOption },\n\t{ type: \"date\", value: datetimeOption },\n\t{ type: \"localdate\", value: datetimeOption },\n\t{ type: \"time\", value: datetimeOption },\n\t{ type: \"panel\", value: panelOption, dependModelType: MODEL_TYPE.BASE },\n\t{ type: \"panel-stack\", value: panelStackOption },\n\t{ type: \"panel-tab\", value: panelTabOption },\n\t{ type: \"button\", value: buttonOption },\n\t{ type: \"separator\", value: seperatorOption },\n\t{ type: \"spacer\", value: spacerOption },\n\t{ type: \"label\", value: labelOption },\n\t{ type: \"many-to-one\", value: manyToOneOption },\n\t{ type: \"many-to-many\", value: manyToManyAndOneToManyOption },\n\t{ type: \"one-to-many\", value: manyToManyAndOneToManyOption },\n\t{ type: \"json-many-to-one\", value: customRelationOption },\n\t{ type: \"json-many-to-many\", value: customRelationOption },\n\t{ type: \"json-one-to-many\", value: customRelationOption },\n\t{ type: \"include\", value: formOption },\n\t{ type: \"panel-tabs\", value: panelTabOption, showInCustomField: false },\n\t{ type: \"panel-dashlet\", value: panelDashletOption },\n\t{ type: \"panel-related\", value: panelRelatedOption },\n\t{ type: \"panel-include\", value: panelIncludeOption },\n\t{ type: \"text\", value: commonOption },\n\t{ type: \"long\", value: decimalOption },\n\t{ type: \"panel-dashlet\", value: commonOption },\n\t{ type: \"dashlet\", value: commonOption },\n\t{ type: \"static\", value: commonOption },\n\t{ type: \"one-to-one\", value: manyToOneOption },\n\t{ type: \"binary\", value: commonOption },\n\t{ type: \"field\", value: commonOption },\n\t{ type: \"dummy\", value: dummyOption },\n\t{ type: \"viewer\", value: viewerOption },\n\t{ type: \"editor\", value: labelOption },\n\t{ type: \"menu\", value: menuOption },\n\t{ type: \"item\", value: menuItemOption },\n\t{ type: \"divider\", value: dividerOption },\n\t{ type: \"hilite\", value: hiliteOption },\n];\n\nexport default options;\n","import React from \"react\";\nimport classNames from \"classnames\";\nimport Grid from \"./Grid\";\nimport { translate } from \"../utils\";\n\n/**\n * Menu Component\n * Used As Container to group Field Component like form group\n */\nfunction MenuComponent({ id, attrs, design, isTab = true, ...rest }) {\n\tconst errors = rest.errorList[id] || {};\n\tconst [openMenu, setOpenMenu] = React.useState(false);\n\n\tconst handleToggleMenu = React.useCallback((e) => {\n\t\te.stopPropagation();\n\t\tsetOpenMenu((m) => !m);\n\t}, []);\n\n\tconst arrow = openMenu ? \"down\" : \"up\";\n\treturn (\n\t\t<React.Fragment>\n\t\t\t<div\n\t\t\t\tclassName={classNames(\"menu-header\", {\n\t\t\t\t\tinline: isTab,\n\t\t\t\t})}\n\t\t\t>\n\t\t\t\t<div className=\"menu-toggle-button\" onClick={handleToggleMenu}>\n\t\t\t\t\t<i className={`fa fa-chevron-${arrow}`} />\n\t\t\t\t</div>\n\t\t\t\t<span>{translate(attrs.title || attrs.autoTitle)}</span>\n\t\t\t\t<div className=\"menu-toggle-button\" onClick={handleToggleMenu}>\n\t\t\t\t\t<i className={`fa fa-chevron-${arrow}`} />\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t{errors.items && !isTab && (\n\t\t\t\t<div className={classNames(\"panel-children-error\")}>{errors.items}</div>\n\t\t\t)}\n\t\t\t{openMenu && (\n\t\t\t\t<Grid\n\t\t\t\t\tdesign={design}\n\t\t\t\t\tclassName=\"panel-body\"\n\t\t\t\t\titems={attrs.items || []}\n\t\t\t\t\tattrs={attrs}\n\t\t\t\t\tpanelId={id}\n\t\t\t\t\t_type={rest._type}\n\t\t\t\t\terrorList={rest.errorList}\n\t\t\t\t\tcanRemove={rest.canRemove}\n\t\t\t\t/>\n\t\t\t)}\n\t\t</React.Fragment>\n\t);\n}\n\nexport default React.memo(MenuComponent);\n","import Field from \"./Field\";\nimport Panel from \"./Panel\";\nimport TabPanel from \"./TabPanel\";\nimport Form from \"./Form\";\nimport Menu from \"./Menu\";\n\n// common Registery contains all Form Components\nconst Registery = {\n\tfield: { component: Field, props: { className: \"field-container\" } },\n\tdump_field: {\n\t\tcomponent: Field,\n\t\tprops: { className: \"field-container dump\" },\n\t},\n\tpanel: { component: Panel, props: { className: \"panel\" } },\n\tmenubar: { component: Panel, props: { className: \"panel menubar\" } },\n\tmenu: { component: Menu, props: { className: \"panel menu\" } },\n\ttoolbar: { component: Panel, props: { className: \"panel toolbar\" } },\n\t\"panel-stack\": { component: Panel, props: { className: \"panel\" } },\n\t\"panel-include\": { component: Panel, props: { className: \"panel\" } },\n\tform: { component: Form, props: { className: \"form-layout\" } },\n\tcustomForm: { component: Form, props: { className: \"form-layout\" } },\n\t\"panel-tabs\": {\n\t\tcomponent: TabPanel,\n\t\tprops: { className: \"panel tabs-panel\" },\n\t},\n};\n\nexport default Registery;\n","import React from \"react\";\nimport Popover from \"@material-ui/core/Popover\";\nimport Typography from \"@material-ui/core/Typography\";\nimport Box from \"@material-ui/core/Box\";\nimport Button from \"@material-ui/core/Button\";\nimport { makeStyles } from \"@material-ui/core/styles\";\n\nimport { translate } from \"../utils\";\n\nconst useStyles = makeStyles(() => ({\n\ttext: {\n\t\ttextAlign: \"center\",\n\t\tfontSize: 14,\n\t},\n\tdialogContainer: {\n\t\tdisplay: \"flex\",\n\t\talignItems: \"center\",\n\t\tjustifyContent: \"center\",\n\t\tflexDirection: \"column\",\n\t},\n\tbutton: {\n\t\twidth: \"min-content\",\n\t\tfontWeight: 600,\n\t\tcolor: \"#fff\",\n\t\tborderRadius: 25,\n\t\tbackgroundColor: \"#0275d8\",\n\t\tpadding: 0,\n\t\toverflow: \"hidden\",\n\t\ttextOverflow: \"ellipsis\",\n\t\ttextTransform: \"capitalize\",\n\t\t\"&:hover\": {\n\t\t\tbackgroundColor: \"#0275d8\",\n\t\t},\n\t},\n\tpaper: {\n\t\tborderRadius: 5,\n\t\tpadding: 15,\n\t\tboxShadow: \"rgb(0 0 0 / 16%) 0px 3px 6px, rgb(0 0 0 / 23%) 0px 3px 6px\",\n\t},\n}));\n\nexport default function PopoverAlert({ anchorEl, handleClose, handleYes }) {\n\tconst classes = useStyles();\n\n\tconst open = Boolean(anchorEl);\n\tconst id = open ? \"simple-popover\" : undefined;\n\n\treturn (\n\t\t<Popover\n\t\t\tid={id}\n\t\t\topen={open}\n\t\t\tanchorEl={anchorEl}\n\t\t\tonClose={handleClose}\n\t\t\tclasses={{ paper: classes.paper }}\n\t\t\tanchorOrigin={{\n\t\t\t\tvertical: \"bottom\",\n\t\t\t\thorizontal: \"right\",\n\t\t\t}}\n\t\t\ttransformOrigin={{\n\t\t\t\tvertical: \"top\",\n\t\t\t\thorizontal: \"right\",\n\t\t\t}}\n\t\t>\n\t\t\t<Box className={classes.dialogContainer}>\n\t\t\t\t<Typography className={classes.text}>\n\t\t\t\t\t{translate(\"Sure want to delete?\")}\n\t\t\t\t</Typography>\n\t\t\t\t<Box>\n\t\t\t\t\t<Button\n\t\t\t\t\t\tsize=\"small\"\n\t\t\t\t\t\tclassName={classes.button}\n\t\t\t\t\t\tstyle={{\n\t\t\t\t\t\t\tmarginRight: 4,\n\t\t\t\t\t\t}}\n\t\t\t\t\t\tonClick={handleYes}\n\t\t\t\t\t>\n\t\t\t\t\t\t{translate(\"Yes\")}\n\t\t\t\t\t</Button>\n\t\t\t\t\t<Button size=\"small\" className={classes.button} onClick={handleClose}>\n\t\t\t\t\t\t{translate(\"No\")}\n\t\t\t\t\t</Button>\n\t\t\t\t</Box>\n\t\t\t</Box>\n\t\t</Popover>\n\t);\n}\n","import React from \"react\";\nimport classNames from \"classnames\";\nimport { compose } from \"recompose\";\nimport { DragSource, DropTarget } from \"react-dnd\";\n\nimport { useStore } from \"../store/context\";\nimport { TYPE as WIDGET_TYPE, IDS, MODEL_TYPE, FIELD_TYPE } from \"../constants\";\nimport Registry from \"./Registery\";\nimport { translate } from \"../utils\";\nimport PopoverAlert from \"./PopoverAlert\";\n\n// Unique Type for Widget\nconst TYPE = Symbol();\n\n// DragSource\nconst CardSource = {\n\t// evaluate widget is draggable or not\n\tcanDrag(props) {\n\t\tconst { state } = props;\n\t\tconst isCustomField = props._type === \"customField\";\n\t\t// temporary restrict real view movement\n\t\tif (\n\t\t\tstate.modelType === MODEL_TYPE.BASE &&\n\t\t\t!isCustomField &&\n\t\t\t!props.isPalleteField\n\t\t) {\n\t\t\treturn;\n\t\t}\n\t\treturn !(\n\t\t\tprops.id === IDS.dumpField ||\n\t\t\tprops.attrs.draggable === false ||\n\t\t\tprops.attrs.isDummy ||\n\t\t\tprops.attrs.type === WIDGET_TYPE.form\n\t\t);\n\t},\n\t// event, raise when start dragging widget\n\tbeginDrag(props) {\n\t\tconst _props = { ...props };\n\t\tconst isPanel = _props.attrs.serverType === \"panel\";\n\t\tconst isGrid = [\"one-to-many\", \"many-to-many\"].includes(\n\t\t\t_props.attrs.serverType\n\t\t);\n\t\tif (\n\t\t\tprops.state.modelType === MODEL_TYPE.CUSTOM ||\n\t\t\tprops._type === \"customField\"\n\t\t) {\n\t\t\t_props.attrs = {\n\t\t\t\t..._props.attrs,\n\t\t\t\tmodel: \"com.axelor.meta.db.MetaJsonRecord\",\n\t\t\t\tmodelField: \"attrs\",\n\t\t\t\twidgetAttrs: JSON.stringify({\n\t\t\t\t\tcolSpan:\n\t\t\t\t\t\tJSON.parse(_props.attrs.widgetAttrs || \"{}\").colSpan ||\n\t\t\t\t\t\t(isGrid ? 6 : undefined),\n\t\t\t\t\tshowTitle: isPanel ? \"false\" : true,\n\t\t\t\t}),\n\t\t\t};\n\t\t} else if (props.state.modelType === MODEL_TYPE.BASE) {\n\t\t\tif (_props.attrs.isModelField) {\n\t\t\t\t_props.attrs = {\n\t\t\t\t\t..._props.attrs,\n\t\t\t\t\t...(_props.attrs.serverType !== \"field\" && {\n\t\t\t\t\t\ttype: _props.attrs.serverType,\n\t\t\t\t\t}),\n\t\t\t\t\tserverType: \"field\",\n\t\t\t\t};\n\t\t\t}\n\t\t\t_props.attrs = {\n\t\t\t\t..._props.attrs,\n\t\t\t\twidgetAttrs: JSON.stringify({\n\t\t\t\t\tshowTitle: isPanel ? \"false\" : true,\n\t\t\t\t}),\n\t\t\t};\n\t\t}\n\t\tprops.onDrag(props.id, { props: _props });\n\t\treturn { ...props };\n\t},\n\t// event, raise when dragging widget is droped on target or somewhere else\n\t// reset tasks\n\tendDrag(props, monitor) {\n\t\t// check widget is dropped or not, if not reset back to its position for existing element\n\t\t// for new element, remove it from schema\n\t\tprops.onDrag(null, {\n\t\t\tisDrop: monitor.didDrop(),\n\t\t\tprops: {},\n\t\t\tnewProps: monitor.getItem(),\n\t\t});\n\t},\n\t// currently dragged element, special case for nested drag source\n\tisDragging(props, monitor) {\n\t\treturn props.id === monitor.getItem().id;\n\t},\n};\n\n// DropTarget\nconst CardTarget = {\n\t// event, raised when one widget is hover on another widget\n\n\thover(props, monitor) {\n\t\tlet {\n\t\t\tindex: dragIndex,\n\t\t\tpanelId: dragPanelId,\n\t\t\tid: dragId,\n\t\t\tattrs: dragAttrs,\n\t\t} = monitor.getItem();\n\t\tlet {\n\t\t\tindex: hoverIndex,\n\t\t\tpanelId: hoverPanelId,\n\t\t\tid: hoverId,\n\t\t\tattrs: hoverAttrs,\n\t\t\tstate,\n\t\t\tmeta,\n\t\t\tsetHoverAttr,\n\t\t} = props;\n\t\tconst panelSet = [\n\t\t\tWIDGET_TYPE.panel,\n\t\t\tWIDGET_TYPE.panelDashlet,\n\t\t\tWIDGET_TYPE.panelRelated,\n\t\t\tWIDGET_TYPE.panelInclude,\n\t\t];\n\t\tconst isCustomField = props._type === \"customField\";\n\t\tconst widgets =\n\t\t\tprops._type === \"customField\" ? state.customFieldWidgets : state.widgets;\n\t\tconst parentPanel = props.panelId ? widgets[props.panelId] : null;\n\t\t/**\n\t\t * Restrict form move\n\t\t */\n\t\tif (dragAttrs.type === \"customForm\") {\n\t\t\treturn;\n\t\t}\n\t\t/**\n\t\t * Don't allow tabs to move if in edit state\n\t\t * Don't allow tabs drop in first row or in between panels\n\t\t */\n\t\tif (!meta) return;\n\t\tif (dragAttrs.type === WIDGET_TYPE.tabs) {\n\t\t\tif (meta.row === 0 && !dragAttrs.isNew) return;\n\t\t\tif (meta.grid) {\n\t\t\t\tlet maxIndex = Math.max(...meta.grid.map((o) => o.rowIndex));\n\t\t\t\tif (meta.row < maxIndex) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\t//Don't allow panel after tabs\n\t\tif (dragAttrs.type === WIDGET_TYPE.panel) {\n\t\t\tconst { grid, row } = meta;\n\t\t\tconst gridTab = grid && grid.find((f) => f.type === WIDGET_TYPE.tabs);\n\t\t\tif (gridTab && gridTab.rowIndex < row) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t}\n\n\t\t// temporary restrict real view movement\n\t\tif (state.modelType === MODEL_TYPE.BASE && !isCustomField) {\n\t\t\treturn;\n\t\t}\n\t\tif ([WIDGET_TYPE.menubar, WIDGET_TYPE.toolbar].includes(dragAttrs.type)) {\n\t\t\tconst bar = Object.values(state.widgets || {}).find((w) =>\n\t\t\t\t[WIDGET_TYPE.menubar, WIDGET_TYPE.toolbar].includes(w.type)\n\t\t\t);\n\t\t\tconst rowCount = bar ? 2 : 0;\n\t\t\tif (hoverPanelId) return;\n\t\t\tif (!meta) return;\n\t\t\tif (meta.row > rowCount || meta.col !== 1) return;\n\t\t}\n\t\tif (\n\t\t\t(state.modelType === MODEL_TYPE.CUSTOM || isCustomField) &&\n\t\t\t[WIDGET_TYPE.menubar, WIDGET_TYPE.toolbar].includes(dragAttrs.serverType)\n\t\t) {\n\t\t\treturn;\n\t\t}\n\t\tif (\n\t\t\t![WIDGET_TYPE.menuItem, WIDGET_TYPE.menu, WIDGET_TYPE.divider].includes(\n\t\t\t\tdragAttrs.serverType\n\t\t\t) &&\n\t\t\tparentPanel &&\n\t\t\tparentPanel.type === WIDGET_TYPE.menu\n\t\t) {\n\t\t\treturn;\n\t\t}\n\t\tif (\n\t\t\t[WIDGET_TYPE.menuItem, WIDGET_TYPE.divider].includes(\n\t\t\t\tdragAttrs.serverType\n\t\t\t) &&\n\t\t\t(!parentPanel || parentPanel.type !== WIDGET_TYPE.menu)\n\t\t) {\n\t\t\treturn;\n\t\t}\n\t\tif (\n\t\t\t[WIDGET_TYPE.menu].includes(dragAttrs.serverType) &&\n\t\t\t(!parentPanel ||\n\t\t\t\t![WIDGET_TYPE.menu, WIDGET_TYPE.menubar].includes(parentPanel.type))\n\t\t) {\n\t\t\treturn;\n\t\t}\n\t\tif (\n\t\t\tparentPanel &&\n\t\t\tparentPanel.type === WIDGET_TYPE.menubar &&\n\t\t\tdragAttrs.type !== WIDGET_TYPE.menu\n\t\t) {\n\t\t\treturn;\n\t\t}\n\t\tif (\n\t\t\tparentPanel &&\n\t\t\tparentPanel.type === WIDGET_TYPE.toolbar &&\n\t\t\tdragAttrs.type !== FIELD_TYPE.button\n\t\t) {\n\t\t\treturn;\n\t\t}\n\t\tif (\n\t\t\t!parentPanel &&\n\t\t\t![\n\t\t\t\t...panelSet,\n\t\t\t\tWIDGET_TYPE.tabs,\n\t\t\t\tWIDGET_TYPE.panelStack,\n\t\t\t\tWIDGET_TYPE.menubar,\n\t\t\t\tWIDGET_TYPE.toolbar,\n\t\t\t].includes(dragAttrs.type)\n\t\t) {\n\t\t\treturn;\n\t\t}\n\t\t// when stacked is true do not allow to drop field except specified panel types.\n\t\tif (\n\t\t\tparentPanel &&\n\t\t\tparentPanel.type === WIDGET_TYPE.panelStack &&\n\t\t\t!panelSet.includes(dragAttrs.type)\n\t\t) {\n\t\t\treturn;\n\t\t}\n\t\tif (\n\t\t\tparentPanel &&\n\t\t\tparentPanel.type === WIDGET_TYPE.tabs &&\n\t\t\t!panelSet.includes(dragAttrs.type)\n\t\t) {\n\t\t\treturn;\n\t\t}\n\t\tif (\n\t\t\tstate.modelType === MODEL_TYPE.CUSTOM ||\n\t\t\tprops._type === \"customField\"\n\t\t) {\n\t\t\t// let hasPanel = false;\n\t\t\tif (\n\t\t\t\t[\n\t\t\t\t\tWIDGET_TYPE.panelDashlet,\n\t\t\t\t\tWIDGET_TYPE.panelInclude,\n\t\t\t\t\tWIDGET_TYPE.panelRelated,\n\t\t\t\t\tWIDGET_TYPE.panelStack,\n\t\t\t\t].includes(dragAttrs.type)\n\t\t\t) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\t// restrict nested panel drop in custom model\n\t\t\tconst widgets =\n\t\t\t\tprops._type === \"customField\"\n\t\t\t\t\t? state.customFieldWidgets\n\t\t\t\t\t: state.widgets;\n\t\t\tconst stateItems =\n\t\t\t\tprops._type === \"customField\" ? state.customFieldItems : state.items;\n\t\t\tconst hasTabPanel =\n\t\t\t\tObject.keys(widgets).findIndex(\n\t\t\t\t\t(widgetKey) => widgets[widgetKey].type === WIDGET_TYPE.tabs\n\t\t\t\t) !== -1;\n\t\t\tif (\n\t\t\t\thasTabPanel &&\n\t\t\t\tdragAttrs.type === WIDGET_TYPE.tabs &&\n\t\t\t\tdragAttrs.isNew\n\t\t\t) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tif (\n\t\t\t\t[WIDGET_TYPE.panel, WIDGET_TYPE.tabs].includes(dragAttrs.type) &&\n\t\t\t\tprops.panelId &&\n\t\t\t\t!stateItems.includes(props.panelId)\n\t\t\t) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\t// paneltab can drop inside panel tab\n\t\t\tif (\n\t\t\t\tparentPanel &&\n\t\t\t\tdragAttrs.type === WIDGET_TYPE.panel &&\n\t\t\t\tparentPanel.type !== WIDGET_TYPE.tabs\n\t\t\t) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tif (\n\t\t\t\tparentPanel &&\n\t\t\t\tdragAttrs.type === WIDGET_TYPE.tabs &&\n\t\t\t\tparentPanel.type === WIDGET_TYPE.panel\n\t\t\t) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tconst { hoverAttr } = state;\n\t\t\tconst { widgetAttrs = \"{}\" } = hoverAttr;\n\t\t\tconst _attrs = JSON.parse(widgetAttrs);\n\n\t\t\tif (\n\t\t\t\tparentPanel &&\n\t\t\t\tdragAttrs.type === WIDGET_TYPE.panel &&\n\t\t\t\tparentPanel.type === WIDGET_TYPE.tabs &&\n\t\t\t\t!_attrs.tab\n\t\t\t) {\n\t\t\t\tsetHoverAttr({\n\t\t\t\t\ttitle: dragAttrs.title || translate(\"Tab\"),\n\t\t\t\t\twidgetAttrs: JSON.stringify({ tab: \"true\" }),\n\t\t\t\t});\n\t\t\t} else if (\n\t\t\t\t!parentPanel &&\n\t\t\t\tdragAttrs.type === WIDGET_TYPE.panel &&\n\t\t\t\t_attrs.tab\n\t\t\t) {\n\t\t\t\tconst attrs = JSON.parse(dragAttrs.widgetAttrs || \"{}\");\n\t\t\t\tsetHoverAttr({\n\t\t\t\t\ttitle: dragAttrs.title,\n\t\t\t\t\twidgetAttrs: JSON.stringify({ ...attrs, tab: \"false\" }),\n\t\t\t\t});\n\t\t\t}\n\t\t} else {\n\t\t\tif (props.panelId) {\n\t\t\t\tconst parentPanel = widgets[props.panelId];\n\t\t\t\tif (\n\t\t\t\t\tparentPanel &&\n\t\t\t\t\t[WIDGET_TYPE.tabs, WIDGET_TYPE.panelStack].includes(dragAttrs.type)\n\t\t\t\t) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tif (\n\t\t\t\t\t[\n\t\t\t\t\t\tWIDGET_TYPE.panelDashlet,\n\t\t\t\t\t\tWIDGET_TYPE.panelRelated,\n\t\t\t\t\t\tWIDGET_TYPE.panelInclude,\n\t\t\t\t\t].includes(parentPanel.type)\n\t\t\t\t) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tif (dragAttrs.isCoreField === false && props._type === \"customField\") {\n\t\t\treturn;\n\t\t}\n\t\t// skip for same item drag n drop\n\t\t// skip for dragging widget in same panel\n\t\t// skip for other hover elements(monitor.isOver) specially for nested target\n\t\t// skip for dragging field directly on form\n\t\tif (\n\t\t\t(hoverIndex === dragIndex && dragPanelId === hoverPanelId) ||\n\t\t\t((hoverAttrs.type !== \"form\" && hoverAttrs.id) || []).indexOf(dragId) >\n\t\t\t\t-1 ||\n\t\t\t(dragAttrs.items || []).indexOf(hoverId) > -1 ||\n\t\t\t!monitor.isOver({ shallow: true }) ||\n\t\t\t(dragAttrs.type === WIDGET_TYPE.field &&\n\t\t\t\thoverAttrs.type === WIDGET_TYPE.form) ||\n\t\t\t(dragAttrs.type === WIDGET_TYPE.field && props.tabId !== undefined) ||\n\t\t\t(props.state.hoverWidget &&\n\t\t\t\tprops.state.hoverWidget.id === hoverId &&\n\t\t\t\tprops.state.hoverWidget.index === hoverIndex &&\n\t\t\t\tprops.state.hoverWidget.panelId === hoverPanelId)\n\t\t) {\n\t\t\treturn;\n\t\t}\n\n\t\t// Only for current dragging widget\n\t\tif (dragId === props.state.dragWidget) {\n\t\t\ttry {\n\t\t\t\tif (dragId && !dragAttrs.isNew && dragPanelId === hoverPanelId) {\n\t\t\t\t\tif (dragIndex + 1 === hoverIndex || dragIndex - 1 === hoverIndex) {\n\t\t\t\t\t\tprops.state.hoverWidget && props.onHover(null);\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tconst { isMoved } = props.onMove(\n\t\t\t\t\t{\n\t\t\t\t\t\tsource: {\n\t\t\t\t\t\t\tpanelId: dragPanelId,\n\t\t\t\t\t\t\tindex: dragIndex,\n\t\t\t\t\t\t\tid: dragId,\n\t\t\t\t\t\t\tattrs: dragAttrs,\n\t\t\t\t\t\t},\n\t\t\t\t\t\tdestination: {\n\t\t\t\t\t\t\tpanelId: hoverPanelId,\n\t\t\t\t\t\t\tindex: hoverIndex,\n\t\t\t\t\t\t\tid: hoverId,\n\t\t\t\t\t\t\tattrs: hoverAttrs,\n\t\t\t\t\t\t\t_type: props._type,\n\t\t\t\t\t\t},\n\t\t\t\t\t},\n\t\t\t\t\ttrue,\n\t\t\t\t\tprops._type\n\t\t\t\t);\n\t\t\t\tif (isMoved && props.onHover) {\n\t\t\t\t\tprops.onHover({\n\t\t\t\t\t\tmeta: props.meta || {},\n\t\t\t\t\t\tid: hoverId,\n\t\t\t\t\t\tindex: hoverIndex,\n\t\t\t\t\t\tpanelId: hoverPanelId,\n\t\t\t\t\t\tposition:\n\t\t\t\t\t\t\tprops.panelColumns &&\n\t\t\t\t\t\t\t(`${props.panelColumns}` === \"1\" ||\n\t\t\t\t\t\t\t\t`${props.panelColumns}` === `${dragAttrs.colSpan}`) &&\n\t\t\t\t\t\t\tprops.tabId === undefined\n\t\t\t\t\t\t\t\t? \"top\"\n\t\t\t\t\t\t\t\t: \"default\",\n\t\t\t\t\t\tattrs: hoverAttrs,\n\t\t\t\t\t\t_type: props._type,\n\t\t\t\t\t});\n\t\t\t\t} else {\n\t\t\t\t\tprops.state.hoverWidget && props.onHover(null);\n\t\t\t\t}\n\t\t\t} catch (e) {}\n\t\t}\n\n\t\tif (parentPanel && parentPanel.widgetAttrs) {\n\t\t\tlet parentWidgetAttrs = JSON.parse(parentPanel.widgetAttrs || \"{}\");\n\t\t\tlet dragAttrsWidgetAttrs = JSON.parse(dragAttrs.widgetAttrs || \"{}\");\n\t\t\tif (parentWidgetAttrs.itemSpan && !dragAttrsWidgetAttrs.colSpan) {\n\t\t\t\tlet hoverAttrs = {\n\t\t\t\t\tcolSpan: parentWidgetAttrs.itemSpan,\n\t\t\t\t};\n\t\t\t\t/**\n\t\t\t\t * Temporary fix for AOP issue\n\t\t\t\t * In AOP for grid relational fields, Parent panels itemSpan is not working\n\t\t\t\t * So adding default span from here\n\t\t\t\t */\n\t\t\t\tif ([\"one-to-many\", \"many-to-many\"].includes(dragAttrs.serverType)) {\n\t\t\t\t\tconst attrs = JSON.parse(dragAttrs.widgetAttrs || \"{}\");\n\t\t\t\t\thoverAttrs.widgetAttrs = JSON.stringify({\n\t\t\t\t\t\t...attrs,\n\t\t\t\t\t\tcolSpan: parentWidgetAttrs.itemSpan,\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\tsetHoverAttr(hoverAttrs);\n\t\t\t}\n\t\t}\n\t},\n};\n\nfunction Widget(props) {\n\tlet {\n\t\tid,\n\t\tisDragging,\n\t\tconnectDragSource,\n\t\tconnectDropTarget,\n\t\thighlighted,\n\t\thovered,\n\t\ttabId,\n\t\tclassName,\n\t\tcomponent: DefaultWidgetComponent,\n\t\tattrs = {},\n\t\tstate,\n\t\tupdate,\n\t\tonWidgetChange,\n\t\terrorList = {},\n\t\t...rest\n\t} = props;\n\tconst { dragWidget } = state;\n\tconst [anchorEl, setAnchorEl] = React.useState(null);\n\n\tconst _widgets =\n\t\trest._type === \"customField\" ? state.customFieldWidgets : state.widgets;\n\n\tconst handleWidgetRemove = (event) => {\n\t\tsetAnchorEl(event.currentTarget);\n\t};\n\n\tconst handleClose = () => {\n\t\tsetAnchorEl(null);\n\t};\n\n\tconst handleYes = () => {\n\t\tif (rest.onRemove) {\n\t\t\trest.onRemove(rest.panelId, rest.index, id, rest._type);\n\t\t\thandleClose();\n\t\t}\n\t};\n\t// special case for new element\n\t// hide/remove element from schema, if it drag outside form container(id=1)\n\tReact.useEffect(() => {\n\t\tupdate((draft) => {\n\t\t\tdraft.hoverWidget && (draft.hoverWidget.visible = hovered);\n\t\t});\n\t}, [update, hovered, id, dragWidget, attrs]);\n\n\tlet registryField = Registry[attrs.type] || Registry.field;\n\n\tif (rest.isTab && !Registry[attrs.type]) {\n\t\tregistryField = Registry[\"panel\"];\n\t}\n\n\tlet { component: WidgetComponent, props: componentProps = {} } =\n\t\tregistryField;\n\n\tif (DefaultWidgetComponent) {\n\t\tWidgetComponent = DefaultWidgetComponent;\n\t}\n\n\tlet isFormField = true;\n\tif (Object.values(IDS.createWidgets).indexOf(id) > -1) {\n\t\tisFormField = false;\n\t\tconnectDropTarget = (e) => e;\n\t}\n\tconst isEdit = isFormField && state.editWidget === id;\n\tconst isTabWidget = tabId !== undefined;\n\tconst isTabWidgetContent = isTabWidget ? !rest.isTab : false;\n\tconst showRemove =\n\t\tisFormField &&\n\t\tNumber(id) > 0 &&\n\t\t!isTabWidgetContent &&\n\t\trest.design &&\n\t\trest.canRemove !== false;\n\tif (\n\t\tisTabWidgetContent ||\n\t\t(id && id !== IDS.form && typeof id !== \"symbol\" && !attrs.isDummy)\n\t) {\n\t\tconnectDropTarget = (e) => e;\n\t}\n\tif (attrs.isExist === false || (!rest.design && IDS.dumpField)) return null;\n\treturn (\n\t\t<React.Fragment>\n\t\t\t{connectDragSource(\n\t\t\t\tconnectDropTarget(\n\t\t\t\t\t<div\n\t\t\t\t\t\t{...componentProps}\n\t\t\t\t\t\tclassName={classNames(\n\t\t\t\t\t\t\tclassName,\n\t\t\t\t\t\t\t\"widget\",\n\t\t\t\t\t\t\tcomponentProps.className,\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\"dummy-widget\": attrs.isDummy,\n\t\t\t\t\t\t\t\tedit: isEdit,\n\t\t\t\t\t\t\t\thighlighted: highlighted,\n\t\t\t\t\t\t\t\thovered: hovered,\n\t\t\t\t\t\t\t\tactive: isFormField && isDragging,\n\t\t\t\t\t\t\t\t\"form-field\": isFormField,\n\t\t\t\t\t\t\t\t\"panel-field\": attrs.type === \"panel\",\n\t\t\t\t\t\t\t\t\"non-title-panel\":\n\t\t\t\t\t\t\t\t\tattrs.type === \"panel\" && !rest.isTab && !attrs.title,\n\t\t\t\t\t\t\t\t// \"dummy-field\": attrs.serverType === \"field\",\n\t\t\t\t\t\t\t\t\"error-field\": Boolean(errorList[id]),\n\t\t\t\t\t\t\t\t\"pallete-field\": rest.isPalleteField,\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t)}\n\t\t\t\t\t\t_type={rest._type}\n\t\t\t\t\t\tonClick={(e) => {\n\t\t\t\t\t\t\tif (isFormField && rest.onSelect) {\n\t\t\t\t\t\t\t\te.stopPropagation();\n\t\t\t\t\t\t\t\tconst widget = _widgets && _widgets[id];\n\t\t\t\t\t\t\t\tif (widget.type !== \"panel-tabs\" && id !== IDS.dumpField) {\n\t\t\t\t\t\t\t\t\trest.onSelect(id, rest._type);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tif (isTabWidget) {\n\t\t\t\t\t\t\t\te.stopPropagation();\n\t\t\t\t\t\t\t\tif (id !== IDS.dumpField && _widgets[tabId]) {\n\t\t\t\t\t\t\t\t\tonWidgetChange(tabId, {\n\t\t\t\t\t\t\t\t\t\tcurrent: id,\n\t\t\t\t\t\t\t\t\t\t_type: rest._type,\n\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}}\n\t\t\t\t\t>\n\t\t\t\t\t\t{!isTabWidgetContent &&\n\t\t\t\t\t\t\tstate.hoverWidget &&\n\t\t\t\t\t\t\ttypeof id !== \"symbol\" &&\n\t\t\t\t\t\t\tNumber(id) >= 0 &&\n\t\t\t\t\t\t\tstate.hoverWidget.index === rest.index &&\n\t\t\t\t\t\t\tstate.hoverWidget.visible !== false &&\n\t\t\t\t\t\t\tstate.hoverWidget.panelId === rest.panelId && (\n\t\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\t\tclassName={classNames(\n\t\t\t\t\t\t\t\t\t\t\"hover-liner\",\n\t\t\t\t\t\t\t\t\t\t{ \"dummy-widget\": attrs.isDummy || id === 0 },\n\t\t\t\t\t\t\t\t\t\tstate.hoverWidget.position\n\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t{WidgetComponent && (\n\t\t\t\t\t\t\t<WidgetComponent\n\t\t\t\t\t\t\t\tid={id}\n\t\t\t\t\t\t\t\tisDragging={state.dragWidget === id}\n\t\t\t\t\t\t\t\tattrs={attrs}\n\t\t\t\t\t\t\t\t_type={rest._type}\n\t\t\t\t\t\t\t\terrorList={errorList}\n\t\t\t\t\t\t\t\tcanRemove={rest.canRemove}\n\t\t\t\t\t\t\t\tdraggable={attrs.type !== WIDGET_TYPE.menubar}\n\t\t\t\t\t\t\t\t{...rest}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t)}\n\t\t\t\t\t\t{showRemove && !state.dragWidget && (\n\t\t\t\t\t\t\t<span\n\t\t\t\t\t\t\t\tonClick={handleWidgetRemove}\n\t\t\t\t\t\t\t\tclassName=\"widget-remove\"\n\t\t\t\t\t\t\t\ttitle={translate(\"Remove Widget\")}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<i className=\"fa fa-remove\" />\n\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t)}\n\t\t\t\t\t\t{anchorEl && (\n\t\t\t\t\t\t\t<PopoverAlert\n\t\t\t\t\t\t\t\tanchorEl={anchorEl}\n\t\t\t\t\t\t\t\thandleClose={handleClose}\n\t\t\t\t\t\t\t\thandleYes={handleYes}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t)}\n\t\t\t\t\t</div>\n\t\t\t\t)\n\t\t\t)}\n\t\t</React.Fragment>\n\t);\n}\n\nconst SimpleWidget = (props) => (\n\t<Widget\n\t\t{...props}\n\t\tconnectDropTarget={(e) => e}\n\t\tconnectDragSource={(e) => e}\n\t/>\n);\n\nconst DraggableWidget = compose(\n\tDropTarget(TYPE, CardTarget, (connect, monitor) => ({\n\t\thighlighted: false,\n\t\thovered: monitor.isOver(),\n\t\tconnectDropTarget: connect.dropTarget(),\n\t})),\n\tDragSource(TYPE, CardSource, (connect, monitor) => ({\n\t\tconnectDragSource: connect.dragSource(),\n\t\tisDragging: monitor.isDragging(),\n\t}))\n)(Widget);\n\nexport const WidgetComponent = (props) => {\n\tconst store = useStore();\n\tconst { state } = store;\n\tconst _widgets =\n\t\tprops._type === \"customField\" ? state.customFieldWidgets : state.widgets;\n\tconst attrs =\n\t\t_widgets && _widgets[props.id] ? _widgets[props.id] : props.attrs || {};\n\tconst _props = { ...store, attrs };\n\tconst draggable = attrs.type !== WIDGET_TYPE.menubar;\n\n\tif (props.design || draggable)\n\t\treturn <DraggableWidget {..._props} {...props} />;\n\treturn <SimpleWidget {..._props} {...props} />;\n};\n\nexport default React.memo(WidgetComponent);\n","import React from \"react\";\nimport Grid from \"./Grid\";\nimport { PANEL_TYPE } from \"../constants\";\n\n/**\n * Form Component\n * Used As Main Container i.e. <form />\n */\nfunction FormComponent({ attrs = {}, items = [], design, widgets, ...rest }) {\n\t// render top level items as Widgets using Context FormConsumer\n\tconst rootPanel = React.useMemo(() => {\n\t\tconst sidebar = items.filter(\n\t\t\t(k) => widgets[k] && [\"true\", true].includes(widgets[k].sidebar)\n\t\t);\n\t\tconst mainItems = items.filter(\n\t\t\t(k) => widgets[k] && ![\"true\", true].includes(widgets[k].sidebar)\n\t\t);\n\t\tconst hasSidebar = sidebar.length > 0;\n\n\t\treturn hasSidebar\n\t\t\t? {\n\t\t\t\t\titems: [\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tlayout: PANEL_TYPE.grid,\n\t\t\t\t\t\t\titems: mainItems,\n\t\t\t\t\t\t\tcolSpan: 9,\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tlayout: PANEL_TYPE.grid,\n\t\t\t\t\t\t\titems: sidebar,\n\t\t\t\t\t\t\tcolSpan: 3,\n\t\t\t\t\t\t},\n\t\t\t\t\t],\n\t\t\t  }\n\t\t\t: {\n\t\t\t\t\titems: [\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tlayout: PANEL_TYPE.grid,\n\t\t\t\t\t\t\titems: mainItems,\n\t\t\t\t\t\t\tcolSpan: 12,\n\t\t\t\t\t\t},\n\t\t\t\t\t],\n\t\t\t  };\n\t}, [items, widgets]);\n\n\treturn (\n\t\t<div className=\"flex-container\">\n\t\t\t{rootPanel.items.map(({ items, colSpan, ...attrs }, i) => (\n\t\t\t\t<div className={`flex-item span-${colSpan}`} key={i}>\n\t\t\t\t\t<Grid\n\t\t\t\t\t\tkey={i}\n\t\t\t\t\t\tdesign={design}\n\t\t\t\t\t\tclassName=\"form-body\"\n\t\t\t\t\t\titems={items}\n\t\t\t\t\t\tattrs={attrs}\n\t\t\t\t\t\t_type={rest._type}\n\t\t\t\t\t\twidgets={widgets}\n\t\t\t\t\t\terrorList={rest.errorList}\n\t\t\t\t\t\tcanRemove={rest.canRemove}\n\t\t\t\t\t/>\n\t\t\t\t</div>\n\t\t\t))}\n\t\t</div>\n\t);\n}\n\nexport default FormComponent;\n","import React, { useState, useEffect } from \"react\";\nimport AxelorService from \"../services/axelor.rest\";\nimport { fetchCustomModel } from \"../Toolbar/api\";\nimport { translate, getDefaultGridFormName } from \"../utils\";\n\nconst metaViewService = new AxelorService({\n\tmodel: \"com.axelor.meta.db.MetaView\",\n});\nconst excludedUITypes = [\"panel\", \"label\", \"spacer\", \"button\"];\n\nconst showInGrid = (item) => {\n\treturn (\n\t\t!excludedUITypes.includes(item.type) && item.visibleInGrid && !item.hidden\n\t);\n};\n\nfunction RelationalFieldGridView({ attrs, id }) {\n\tconst {\n\t\tgridView,\n\t\ttargetModel: target,\n\t\ttitle,\n\t\tautoTitle,\n\t\taction,\n\t\ttargetJsonModel,\n\t} = attrs || {};\n\tconst [gridItems, setGridItems] = useState([]);\n\tconst [gridTitle, setGridTitle] = useState(null);\n\n\tuseEffect(() => {\n\t\tasync function getGrid() {\n\t\t\tlet viewName = gridView;\n\t\t\tif (action) {\n\t\t\t\tconst _context = {\n\t\t\t\t\t_id: null,\n\t\t\t\t};\n\t\t\t\tconst data = {\n\t\t\t\t\taction,\n\t\t\t\t\tmodel: \"com.axelor.meta.db.MetaAction\",\n\t\t\t\t\tdata: {\n\t\t\t\t\t\tcontext: _context,\n\t\t\t\t\t},\n\t\t\t\t};\n\n\t\t\t\tconst actionResult = await metaViewService.action(data);\n\t\t\t\tif (\n\t\t\t\t\tactionResult.data &&\n\t\t\t\t\tactionResult.data[0] &&\n\t\t\t\t\tactionResult.data[0].view &&\n\t\t\t\t\tactionResult.data[0].view.views\n\t\t\t\t) {\n\t\t\t\t\tconst view = actionResult.data[0].view.views.find(\n\t\t\t\t\t\t(v) => v.type === \"grid\"\n\t\t\t\t\t);\n\t\t\t\t\tif (view) {\n\t\t\t\t\t\tviewName = view.name;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (targetJsonModel) {\n\t\t\t\tlet model;\n\t\t\t\tif (!targetJsonModel.name && targetJsonModel.id) {\n\t\t\t\t\tmodel = await fetchCustomModel(targetJsonModel.id);\n\t\t\t\t}\n\t\t\t\tviewName = getDefaultGridFormName(\n\t\t\t\t\tmodel || targetJsonModel,\n\t\t\t\t\tfalse,\n\t\t\t\t\ttrue\n\t\t\t\t);\n\t\t\t}\n\t\t\tconst payload = {\n\t\t\t\tmodel: target,\n\t\t\t\tdata: {\n\t\t\t\t\ttype: \"grid\",\n\t\t\t\t\tname: viewName,\n\t\t\t\t},\n\t\t\t};\n\t\t\tif (viewName) {\n\t\t\t\tmetaViewService.view(payload).then((res) => {\n\t\t\t\t\tif (res.data && res.data.view) {\n\t\t\t\t\t\tconst { items = [], title } = res.data.view;\n\t\t\t\t\t\tsetGridTitle(title);\n\t\t\t\t\t\tif (targetJsonModel) {\n\t\t\t\t\t\t\tconst gridItems = [];\n\t\t\t\t\t\t\titems.forEach((item) => {\n\t\t\t\t\t\t\t\tconst { jsonFields = [] } = item;\n\t\t\t\t\t\t\t\tjsonFields.forEach((i) => {\n\t\t\t\t\t\t\t\t\tif (showInGrid(i)) {\n\t\t\t\t\t\t\t\t\t\tgridItems.push(i);\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\tsetGridItems(() => [...(gridItems || [])]);\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tconst { fields = [], jsonAttrs = [] } = res.data;\n\t\t\t\t\t\tlet displayFields = {};\n\t\t\t\t\t\tfields.forEach((field) => {\n\t\t\t\t\t\t\tdisplayFields[field.name] = field.title;\n\t\t\t\t\t\t});\n\t\t\t\t\t\tconst allFields = items.map((i) => {\n\t\t\t\t\t\t\treturn { ...i, title: displayFields[i.name] };\n\t\t\t\t\t\t});\n\n\t\t\t\t\t\tif (jsonAttrs && jsonAttrs.length > 0) {\n\t\t\t\t\t\t\tjsonAttrs.forEach((i) => {\n\t\t\t\t\t\t\t\tif (showInGrid(i)) {\n\t\t\t\t\t\t\t\t\tallFields.push(i);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\t\t\t\t\t\tsetGridItems(allFields);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\tsetGridItems([]);\n\t\t\t}\n\t\t}\n\t\tgetGrid();\n\t}, [gridView, target, targetJsonModel, id, action]);\n\n\treturn (\n\t\t<div>\n\t\t\t<div className=\"one-to-many-header\">\n\t\t\t\t<span>{translate(title || gridTitle || autoTitle)}</span>\n\t\t\t</div>\n\t\t\t<table>\n\t\t\t\t<tbody className=\"one-to-many-row\">\n\t\t\t\t\t{[...Array(3)].map((e, index) => (\n\t\t\t\t\t\t<tr style={{ display: \"flex\" }} key={`row_${index}`}>\n\t\t\t\t\t\t\t{gridItems.map((item, i) => (\n\t\t\t\t\t\t\t\t<td\n\t\t\t\t\t\t\t\t\tclassName=\"one-to-many-col one-to-many-col-border\"\n\t\t\t\t\t\t\t\t\tkey={`td_${i}`}\n\t\t\t\t\t\t\t\t\tstyle={{ borderBottom: index === 0 ? \"1px solid #ddd\" : \"\" }}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t{index === 0 && item\n\t\t\t\t\t\t\t\t\t\t? translate(item.title || item.autoTitle)\n\t\t\t\t\t\t\t\t\t\t: \"\"}\n\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t))}\n\t\t\t\t\t\t</tr>\n\t\t\t\t\t))}\n\t\t\t\t</tbody>\n\t\t\t</table>\n\t\t</div>\n\t);\n}\n\nexport default RelationalFieldGridView;\n","import React from \"react\";\nimport classNames from \"classnames\";\nimport { IDS, FIELD_TYPE, TYPE } from \"../constants\";\nimport RelationalFieldGridView from \"./RelationalFieldGridView\";\nimport { translate } from \"../utils\";\n\n// filter html(tags) compatible attributes\nconst filterInputProps = (props) => {\n\tconst allowed = [\n\t\t\"name\",\n\t\t\"title\",\n\t\t\"defaultValue\",\n\t\t\"placeholder\",\n\t\t\"readOnly\",\n\t\t\"checked\",\n\t\t\"disabled\",\n\t\t\"rows\",\n\t\t\"required\",\n\t];\n\t// return valid object with values\n\treturn allowed.reduce((obj, attr) => {\n\t\tif (props[attr] !== undefined) obj[attr] = props[attr];\n\t\tif (attr === \"required\") {\n\t\t\tobj[attr] = props[attr] === \"true\";\n\t\t}\n\t\treturn obj;\n\t}, {});\n};\n\n// Plain Textbox\nexport const TextInput = (props) => {\n\treturn (\n\t\t<input type=\"text\" autoComplete=\"off\" {...props} className=\"text-input\" />\n\t);\n};\n\n// Multiline Textbox i.e. Textarea\nexport const MultiTextInput = (props) => {\n\treturn <textarea rows={6} {...props} />;\n};\n\n// Blank Spacer to fill up space between two cells of Grid\nexport const Spacer = (props) => <div className=\"spacer\" />;\n\nexport const Separator = (props) => (\n\t<div className=\"spacer\">\n\t\t<hr className=\"separator-field\" />\n\t</div>\n);\n\nexport const Boolean = ({ inputProps, ...props }) => (\n\t<div className=\"boolean-wrapper\">\n\t\t<input {...inputProps} type=\"checkbox\" />\n\t\t<span className=\"boolean-text\" title={translate(props.title || props.name)}>\n\t\t\t{translate(props.title || props.name)}\n\t\t</span>\n\t</div>\n);\n\n// Button component\nexport const Button = ({ title, ...props }) => (\n\t<div className=\"button-container\">\n\t\t<button {...props} className=\"button-view\" title={translate(title)}>\n\t\t\t{translate(title)}\n\t\t</button>\n\t</div>\n);\n\nexport const MenuItem = ({ title, ...props }) => (\n\t<div className=\"menu-item-container\">{translate(title)}</div>\n);\n\nexport const Hilite = ({ color, background, strong }) => {\n\treturn (\n\t\t<div\n\t\t\tclassName={classNames(\n\t\t\t\t`hilite hilite hilite-background-${background} hilite-text-${color}`,\n\t\t\t\t{ \"hilite-strong\": strong }\n\t\t\t)}\n\t\t>\n\t\t\thilite\n\t\t</div>\n\t);\n};\n\n/**\n * Form \"Field\" Component\n * Used For User Inputs\n */\nfunction FieldComponent({ id, attrs }) {\n\t// check for dump field for empty panels\n\tif (id === IDS.dumpField) {\n\t\treturn <div className=\"dump-field\" />;\n\t}\n\n\tconst { name, title, serverType, multiline, type, autoTitle, widget } = attrs;\n\tconst inputProps = filterInputProps(attrs);\n\tlet _type =\n\t\tserverType && serverType !== \"field\" ? serverType.toLowerCase() : type;\n\tconst DefaultWidget = () => (\n\t\t<React.Fragment>\n\t\t\t{\n\t\t\t\t<label\n\t\t\t\t\tclassName=\"widget label\"\n\t\t\t\t\ttitle={translate(title || attrs.autoTitle || name)}\n\t\t\t\t>\n\t\t\t\t\t{translate(title || attrs.autoTitle || name)}\n\t\t\t\t</label>\n\t\t\t}\n\t\t\t{multiline ? (\n\t\t\t\t<MultiTextInput {...inputProps} />\n\t\t\t) : attrs.widget === \"Image\" ? (\n\t\t\t\t<img\n\t\t\t\t\talt={title || attrs.autoTitle || name}\n\t\t\t\t\tsrc=\"./images/not_found.png\"\n\t\t\t\t\tclassName=\"image-widget\"\n\t\t\t\t/>\n\t\t\t) : (\n\t\t\t\t<TextInput\n\t\t\t\t\ttype={serverType === FIELD_TYPE.number ? \"number\" : \"text\"}\n\t\t\t\t\t{...inputProps}\n\t\t\t\t/>\n\t\t\t)}\n\t\t</React.Fragment>\n\t);\n\n\tswitch (_type?.toLowerCase()) {\n\t\tcase FIELD_TYPE.boolean:\n\t\t\treturn (\n\t\t\t\t<Boolean\n\t\t\t\t\ttitle={title || autoTitle}\n\t\t\t\t\tname={name}\n\t\t\t\t\tinputProps={inputProps}\n\t\t\t\t/>\n\t\t\t);\n\t\tcase FIELD_TYPE.spacer:\n\t\t\treturn <Spacer />;\n\t\tcase FIELD_TYPE.hilite:\n\t\t\treturn <Hilite {...attrs} />;\n\t\tcase FIELD_TYPE.separator:\n\t\tcase TYPE.divider:\n\t\t\treturn <Separator />;\n\t\tcase TYPE.menuItem:\n\t\t\treturn <MenuItem title={title} />;\n\t\tcase FIELD_TYPE.button:\n\t\t\treturn <Button {...inputProps} title={title || name} />;\n\t\tcase \"selection\":\n\t\tcase \"label\": {\n\t\t\treturn <span dangerouslySetInnerHTML={{ __html: title }} />;\n\t\t}\n\t\tcase \"panel-dashlet\":\n\t\tcase \"panel-related\":\n\t\tcase \"one-to-many\":\n\t\tcase \"json-one-to-many\":\n\t\t\treturn <RelationalFieldGridView attrs={attrs} id={id} />;\n\t\tcase \"many-to-many\":\n\t\tcase \"json-many-to-many\":\n\t\t\treturn widget !== \"TagSelect\" ? (\n\t\t\t\t<RelationalFieldGridView attrs={attrs} id={id} />\n\t\t\t) : (\n\t\t\t\t<DefaultWidget />\n\t\t\t);\n\t\tdefault:\n\t\t\treturn <DefaultWidget />;\n\t}\n}\n\nexport default FieldComponent;\n","import { TYPE, IDS, ItemTypes } from \"./constants\";\n\nexport const fieldTypes = [\n\t{\n\t\tname: \"Common\",\n\t\tvalue: [\n\t\t\t{\n\t\t\t\tname: \"label\",\n\t\t\t\ttitle: \"Label\",\n\t\t\t\ttype: \"label\",\n\t\t\t\timage: \"label.png\",\n\t\t\t\tid: IDS.createWidgets.field,\n\t\t\t\tserverType: \"label\",\n\t\t\t\tcolSpan: 6,\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: \"button\",\n\t\t\t\ttype: \"button\",\n\t\t\t\ttitle: \"Button\",\n\t\t\t\timage: \"button.png\",\n\t\t\t\tid: IDS.createWidgets.field,\n\t\t\t\tserverType: \"button\",\n\t\t\t\tcolSpan: 6,\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: \"separator\",\n\t\t\t\ttype: \"separator\",\n\t\t\t\ttitle: \"Separator\",\n\t\t\t\timage: \"seperator.png\",\n\t\t\t\tid: IDS.createWidgets.field,\n\t\t\t\tserverType: \"separator\",\n\t\t\t\tcolSpan: 6,\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: \"spacer\",\n\t\t\t\ttype: \"spacer\",\n\t\t\t\ttitle: \"Spacer\",\n\t\t\t\tserverType: \"spacer\",\n\t\t\t\timage: \"line_spacing.png\",\n\t\t\t\tid: IDS.createWidgets.field,\n\t\t\t\tcolSpan: 6,\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: \"selection\",\n\t\t\t\ttitle: \"Selection\",\n\t\t\t\ttype: ItemTypes.ITEM,\n\t\t\t\timage: \"dropdown-arrow.png\",\n\t\t\t\tid: IDS.createWidgets.field,\n\t\t\t\tserverType: \"string\",\n\t\t\t\tisSelectionField: true,\n\t\t\t\tcolSpan: 6,\n\t\t\t},\n\t\t],\n\t},\n\t{\n\t\tname: \"Panels\",\n\t\tvalue: [\n\t\t\t{\n\t\t\t\tname: \"panel\",\n\t\t\t\ttype: ItemTypes.CONTAINER,\n\t\t\t\titems: [],\n\t\t\t\timage: \"panel.png\",\n\t\t\t\tid: IDS.createWidgets.panel,\n\t\t\t\tserverType: TYPE.panel,\n\t\t\t\tcols: 12,\n\t\t\t\tlayout: \"grid\",\n\t\t\t\tcolSpan: 12,\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: \"Tabs\",\n\t\t\t\ttype: TYPE.tabs,\n\t\t\t\timage: \"panel_tabs.png\",\n\t\t\t\ttab: true,\n\t\t\t\titems: [],\n\t\t\t\tid: IDS.createWidgets.tabs,\n\t\t\t\tserverType: TYPE.panel,\n\t\t\t\tisNew: true,\n\t\t\t\tcolSpan: 12,\n\t\t\t\ttitle: \"Tabs\",\n\t\t\t\tcurrent: null,\n\t\t\t\tlayout: \"grid\",\n\t\t\t},\n\t\t],\n\t},\n];\n\nexport const modelFields = [\n\t{\n\t\tname: \"Fields\",\n\t\tvalue: [\n\t\t\t{\n\t\t\t\tname: \"string\",\n\t\t\t\ttype: ItemTypes.ITEM,\n\t\t\t\ttitle: \"String\",\n\t\t\t\timage: \"string.png\",\n\t\t\t\tid: IDS.createWidgets.field,\n\t\t\t\tisModelField: true,\n\t\t\t\tserverType: \"string\",\n\t\t\t\tcolSpan: 6,\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: \"integer\",\n\t\t\t\ttype: ItemTypes.ITEM,\n\t\t\t\ttitle: \"Integer\",\n\t\t\t\timage: \"integer.png\",\n\t\t\t\tid: IDS.createWidgets.field,\n\t\t\t\tisModelField: true,\n\t\t\t\tserverType: \"integer\",\n\t\t\t\tcolSpan: 6,\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: \"decimal\",\n\t\t\t\ttype: ItemTypes.ITEM,\n\t\t\t\ttitle: \"Decimal\",\n\t\t\t\timage: \"decimal.png\",\n\t\t\t\tid: IDS.createWidgets.field,\n\t\t\t\tisModelField: true,\n\t\t\t\tserverType: \"decimal\",\n\t\t\t\tcolSpan: 6,\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: \"boolean\",\n\t\t\t\ttype: ItemTypes.ITEM,\n\t\t\t\ttitle: \"Boolean\",\n\t\t\t\timage: \"boolean.png\",\n\t\t\t\tid: IDS.createWidgets.field,\n\t\t\t\tisModelField: true,\n\t\t\t\tserverType: \"boolean\",\n\t\t\t\tcolSpan: 6,\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: \"datetime\",\n\t\t\t\ttype: ItemTypes.ITEM,\n\t\t\t\ttitle: \"Date time\",\n\t\t\t\timage: \"datetime.png\",\n\t\t\t\tid: IDS.createWidgets.field,\n\t\t\t\tisModelField: true,\n\t\t\t\tserverType: \"datetime\",\n\t\t\t\tcolSpan: 6,\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: \"date\",\n\t\t\t\ttype: ItemTypes.ITEM,\n\t\t\t\ttitle: \"Date\",\n\t\t\t\timage: \"date.png\",\n\t\t\t\tid: IDS.createWidgets.field,\n\t\t\t\tisModelField: true,\n\t\t\t\tserverType: \"date\",\n\t\t\t\tcolSpan: 6,\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: \"time\",\n\t\t\t\ttype: ItemTypes.ITEM,\n\t\t\t\ttitle: \"Time\",\n\t\t\t\timage: \"time.png\",\n\t\t\t\tid: IDS.createWidgets.field,\n\t\t\t\tisModelField: true,\n\t\t\t\tserverType: \"time\",\n\t\t\t\tcolSpan: 6,\n\t\t\t},\n\t\t],\n\t},\n\t{\n\t\tname: \"Relational fields\",\n\t\tvalue: [\n\t\t\t{\n\t\t\t\tname: \"manyToOne\",\n\t\t\t\ttype: ItemTypes.ITEM,\n\t\t\t\ttitle: \"Many to one\",\n\t\t\t\timage: \"many-to-one.png\",\n\t\t\t\tid: IDS.createWidgets.field,\n\t\t\t\tisModelField: true,\n\t\t\t\tserverType: \"many-to-one\",\n\t\t\t\tcolSpan: 6,\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: \"oneToMany\",\n\t\t\t\ttype: ItemTypes.ITEM,\n\t\t\t\ttitle: \"One to many\",\n\t\t\t\timage: \"one-to-many.png\",\n\t\t\t\tid: IDS.createWidgets.field,\n\t\t\t\tisModelField: true,\n\t\t\t\tserverType: \"one-to-many\",\n\t\t\t\tcolSpan: 6,\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: \"manyToMany\",\n\t\t\t\ttype: ItemTypes.ITEM,\n\t\t\t\ttitle: \"Many to many\",\n\t\t\t\timage: \"many-to-many.png\",\n\t\t\t\tid: IDS.createWidgets.field,\n\t\t\t\tisModelField: true,\n\t\t\t\tserverType: \"many-to-many\",\n\t\t\t\tcolSpan: 6,\n\t\t\t},\n\t\t],\n\t},\n];\n","import Utils from \"./../utils\";\nimport { MODEL_TYPE, TYPE } from \"./../constants\";\n\nconst exemptedAttrs = [\n\t\"items\",\n\t\"cols\",\n\t\"serverType\",\n\t\"version\",\n\t\"type\",\n\t\"widgetAttrs\",\n\t\"current\",\n\t\"selectionList\",\n\t\"autoTitle\",\n\t\"isModelField\",\n\t\"elements\",\n\t\"relationship\",\n\t\"isDummy\",\n\t\"metaModel\",\n\t\"targetSearch\",\n\t\"layout\",\n\t\"massUpdate\",\n\t\"xPath\",\n\t\"tz\",\n];\n\nexport function getExtensionAttribute(patchList, target, keyName) {\n\tlet extend;\n\tfor (let i = 0; i < patchList.length; i++) {\n\t\tconst { elements = [], attributes: patchAttributes } = patchList[i];\n\t\tconst element = elements[0];\n\t\tif (element.name === \"attribute\" && patchAttributes.target === target) {\n\t\t\tconst attributes = element.attributes || {};\n\t\t\tif (attributes.name === keyName) {\n\t\t\t\textend = { ...patchList[i] };\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t}\n\treturn extend;\n}\n\nfunction checkTarget(target, string, check) {\n\tconst splitTarget = Utils.exploreTarget(target);\n\tif (check) {\n\t\tconst newTarget = splitTarget[check];\n\t\tif (newTarget && newTarget === string) {\n\t\t\treturn true;\n\t\t}\n\t\treturn false;\n\t}\n\treturn target === string;\n}\n\nexport function isExtensionRemove(patchList, target, check) {\n\tlet flag = false;\n\tfor (let i = 0; i < patchList.length; i++) {\n\t\tconst { attributes, elements = [] } = patchList[i];\n\t\tconst element = elements[0];\n\t\tif (\n\t\t\telement.name === \"replace\" &&\n\t\t\tattributes &&\n\t\t\tcheckTarget(attributes.target, target, check)\n\t\t) {\n\t\t\tflag = true;\n\t\t\tbreak;\n\t\t}\n\t}\n\treturn flag;\n}\n\nexport function isExtensionMove(patchList, widget, parentWidget) {\n\tlet flag = false;\n\tfor (let i = 0; i < patchList.length; i++) {\n\t\tconst { elements = [] } = patchList[i];\n\t\tconst element = elements[0];\n\t\tlet sourceName = `/${Utils.getWidgetType(widget)}[@name='${widget.name}']`;\n\t\tif (parentWidget && parentWidget.name) {\n\t\t\tsourceName = `//${Utils.getWidgetType(parentWidget)}[@name='${\n\t\t\t\tparentWidget.name\n\t\t\t}']${sourceName}`;\n\t\t}\n\t\tif (\n\t\t\telement.name === \"move\" &&\n\t\t\telement.attributes &&\n\t\t\telement.attributes.source === sourceName\n\t\t) {\n\t\t\tflag = true;\n\t\t\tbreak;\n\t\t}\n\t}\n\treturn flag;\n}\n\nfunction getWidgetAttrsObject(widget, modelType = MODEL_TYPE.BASE) {\n\treturn getWidgetObject(widget, [], null, modelType);\n}\n\nexport function getExtendJson2({\n\ttarget,\n\ttype,\n\tposition,\n\tsource,\n\tname,\n\tvalue,\n\twidgetAttrs,\n\titemSource,\n\t...rest\n}) {\n\tconst attributes = { target };\n\tlet elements = [];\n\tif (widgetAttrs && ![\"replace\", \"attribute\", \"move\"].includes(type)) {\n\t\tif (Array.isArray(widgetAttrs)) {\n\t\t\telements = widgetAttrs\n\t\t\t\t.map((widget) => {\n\t\t\t\t\treturn getWidgetAttrsObject(widget);\n\t\t\t\t})\n\t\t\t\t.filter((e) => e);\n\t\t} else {\n\t\t\telements.push(getWidgetAttrsObject(widgetAttrs));\n\t\t}\n\t}\n\tif (elements.length || [\"replace\", \"attribute\", \"move\"].includes(type)) {\n\t\tconst object = {\n\t\t\tattributes,\n\t\t\ttype: \"element\",\n\t\t\tname: \"extend\",\n\t\t\telements: [\n\t\t\t\t{\n\t\t\t\t\ttype: \"element\",\n\t\t\t\t\tname: type,\n\t\t\t\t\tattributes: {\n\t\t\t\t\t\tposition,\n\t\t\t\t\t\tsource,\n\t\t\t\t\t\tname,\n\t\t\t\t\t\tvalue,\n\t\t\t\t\t},\n\t\t\t\t\telements,\n\t\t\t\t},\n\t\t\t],\n\t\t};\n\t\treturn JSON.parse(JSON.stringify(object));\n\t}\n\treturn;\n}\n\nexport function getWidgetObject(widget, other = [], view, modelType) {\n\tconst { id, image, elements = [], ...attributes } = widget;\n\tconst uiFields = [\n\t\t\"panel\",\n\t\t\"panel-related\",\n\t\t\"panel-dashlet\",\n\t\t\"panel-tabs\",\n\t\t\"panel-stack\",\n\t\t\"panel-include\",\n\t\t\"button\",\n\t\t\"label\",\n\t\t\"spacer\",\n\t\t\"separator\",\n\t\t\"menu\",\n\t\t\"item\",\n\t\t\"toolbar\",\n\t\t\"menubar\",\n\t\t\"divider\",\n\t];\n\tlet exempt = [...exemptedAttrs];\n\tlet field = uiFields.includes(attributes.type) ? attributes.type : \"field\";\n\tfield = uiFields.includes(attributes.serverType)\n\t\t? attributes.serverType\n\t\t: field;\n\tfield = widget.tab ? \"panel-tabs\" : field;\n\tif (attributes.type === TYPE.panelInclude) {\n\t\texempt = [...exempt, \"title\", \"colSpan\"];\n\t}\n\tif (field === TYPE.tabs) {\n\t\texempt = [...exempt, \"tab\", \"title\"];\n\t}\n\tif (field === \"spacer\") {\n\t\texempt = [...exempt, \"title\", \"isDummy\"];\n\t}\n\tif (field === TYPE.panelInclude) {\n\t\texempt = [...exempt, \"module\", \"name\"];\n\t}\n\tif ([TYPE.menu, TYPE.menuItem, TYPE.toolbar, TYPE.menubar].includes(field)) {\n\t\texempt = [...exempt, \"colSpan\"];\n\t}\n\tif ([TYPE.toolbar, TYPE.menubar].includes(field)) {\n\t\texempt = [...exempt, \"colSpan\", \"name\", \"title\"];\n\t}\n\tif ([TYPE.divider].includes(field)) {\n\t\texempt = [...exempt, \"colSpan\", \"title\"];\n\t}\n\tlet object = {};\n\tobject = {\n\t\tattributes: {\n\t\t\t...Utils.getWidgetAttrs(attributes, exempt, modelType),\n\t\t},\n\t\ttype: \"element\",\n\t\tname: field,\n\t\telements: [...other, ...elements],\n\t};\n\treturn object;\n}\n\nexport function generateView(widgets, items, modelType) {\n\tlet view = {};\n\tlet elements = [];\n\tif (items.length) {\n\t\titems.forEach((item) => {\n\t\t\tconst widget = widgets[item];\n\t\t\tlet subViews = [];\n\t\t\tif (widget) {\n\t\t\t\tif (widget.items && widget.items.length) {\n\t\t\t\t\tsubViews = generateView(widgets, widget.items, modelType);\n\t\t\t\t}\n\t\t\t\telements.push({\n\t\t\t\t\t...getWidgetObject(widget, subViews, view, modelType),\n\t\t\t\t});\n\t\t\t}\n\t\t});\n\t}\n\treturn elements;\n}\n","import React from \"react\";\nimport classNames from \"classnames\";\nimport Tooltip from \"@material-ui/core/Tooltip\";\nimport AddIcon from \"@material-ui/icons/Add\";\n\nimport { GridContainer, useGridWidget } from \"./Grid\";\nimport { translate } from \"../utils\";\n\nconst panelAttrs = { cols: 1 };\n\n/**\n * Panel Component\n * Used As Container to group Field Component like form group\n */\nfunction TabPanelComponent(props) {\n\tconst WidgetComponent = useGridWidget();\n\tconst { id, attrs, isDragging, isTab = false, addTabPanel, ...rest } = props;\n\tconst { title, items = [] } = attrs;\n\tlet { current } = attrs;\n\tconst tabs = [...items.slice()].reduce(\n\t\t(all, tab) => all.concat([tab, 0]),\n\t\t[0]\n\t);\n\t// reuse common tab attributes\n\tconst getTabAttributes = (id, index) => ({\n\t\tkey: !id ? `${id}${index}` : id,\n\t\tid,\n\t\tmeta: {\n\t\t\thorizontal: true,\n\t\t},\n\t\tindex,\n\t\tpanelId: props.id,\n\t\tpanelColumns: attrs.cols,\n\t\ttabId: props.id,\n\t});\n\tlet activeTabIndex = items.indexOf(current);\n\t// if active tab index not found, take first element as active one\n\tif (activeTabIndex === -1) {\n\t\tactiveTabIndex = 0;\n\t\tcurrent = items.length ? items[0] : 0;\n\t}\n\n\treturn (\n\t\t<React.Fragment>\n\t\t\t{title && (\n\t\t\t\t<div\n\t\t\t\t\tclassName={classNames(\"panel-header panel-tab-header\", {\n\t\t\t\t\t\tinline: isTab,\n\t\t\t\t\t})}\n\t\t\t\t>\n\t\t\t\t\t{title}\n\t\t\t\t</div>\n\t\t\t)}\n\t\t\t{!isTab && (\n\t\t\t\t<GridContainer className={\"panel-body\"} attrs={panelAttrs}>\n\t\t\t\t\t<div className={classNames(\"tabs\")}>\n\t\t\t\t\t\t{tabs.map(\n\t\t\t\t\t\t\t(tab, i) =>\n\t\t\t\t\t\t\t\tWidgetComponent && (\n\t\t\t\t\t\t\t\t\t<WidgetComponent\n\t\t\t\t\t\t\t\t\t\t{...rest}\n\t\t\t\t\t\t\t\t\t\t{...getTabAttributes(tab, i)}\n\t\t\t\t\t\t\t\t\t\tisTab={true}\n\t\t\t\t\t\t\t\t\t\tclassName={current === tab ? \"active-tab\" : \"\"}\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t)}\n\t\t\t\t\t\t<div style={{ display: \"flex\", alignItems: \"center\" }}>\n\t\t\t\t\t\t\t<Tooltip title={translate(\"Add tab\")} arrow>\n\t\t\t\t\t\t\t\t<AddIcon onClick={() => addTabPanel(attrs, id)} />\n\t\t\t\t\t\t\t</Tooltip>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t{items.length > 0 && WidgetComponent && (\n\t\t\t\t\t\t<WidgetComponent\n\t\t\t\t\t\t\t{...rest}\n\t\t\t\t\t\t\t{...getTabAttributes(current, activeTabIndex)}\n\t\t\t\t\t\t/>\n\t\t\t\t\t)}\n\t\t\t\t</GridContainer>\n\t\t\t)}\n\t\t</React.Fragment>\n\t);\n}\n\n//panel tabs-panel\nexport default TabPanelComponent;\n"],"sourceRoot":""}