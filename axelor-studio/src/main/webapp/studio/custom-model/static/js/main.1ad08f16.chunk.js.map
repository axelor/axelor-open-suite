{"version":3,"sources":["Properties/widgetList.js","Properties/propertyFields.js","Properties/properties.helper.js","components/TabPanel.js","constants.js","Toolbar/api.js","components/FieldComponent.js","Panels/Tabs/Field.js","Panels/Tabs/AddPanelView.js","common.func.js","components/SearchView.js","components/SelectComponent.js","components/TranslationGrid.js","Toolbar/DeleteConfirmation.js","Properties/index.js","Panels/Tabs/PropertiesView.js","Panels/SidePanel.js","Editor/index.js","Panels/MainPanel.js","Toolbar/Select.js","Toolbar/customModelSearch.js","Toolbar/ViewSelection.js","Toolbar/Toolbar.js","store/optimizeExtension.js","Toolbar/ToolbarContainer.js","App.js","index.js","services/http.js","services/axelor.rest.js","store/context.js","store/xpathGenerator.js","utils.js","components/Grid.js","Properties/fa-icons.js","Properties/list.js","Properties/fieldTypes.js","components/Panel.js","store/computeXML.js","store/validation.js","fields.js","store/extensionGenerator.js","components/Menu.js","components/Registery.js","components/Widget.js","components/Form.js","components/RelationalFieldGridView.js","components/Field.js"],"names":["selectWidget","data","boolean","integer","string","text","binary","date","datetime","time","button","decimal","Name","props","StringField","name","title","required","readOnly","regex","regexErrorMessage","unique","isDisabled","properties","editWidgetType","metaFieldStore","modelType","MODEL_TYPE","BASE","CUSTOM","id","type","requiredFor","Type","column","selection","formatter","value","tab","entityIndex","indexOf","substring","SelectableType","StaticSelectField","defaultOption","disableClearable","DummyType","DataTypes","Title","translationView","DefaultValue","dependModelType","AppBuilder","ObjectSelectionField","ref","Help","Sequence","IntegerField","Roles","multiple","ValueExpression","UpdateSelection","BooleanField","uncheckDialog","Selection","SelectField","valueField","requiredWhen","requiredNegation","property","updateSelection","SelectionText","depends","dependValue","Widget","widgetList","OnChange","canAddNew","commaSeparated","OnNew","Min","Max","Precision","Scale","JsonRelationalField","getValue","change","_type","serverType","length","Domain","Prompt","parentField","SelectionIn","showInCustomField","Value","ValueAdd","ValueDel","Refresh","Active","shouldRender","list","xPath","includes","TargetJsonModel","displayField","TargetModel","GridView","needsTargetModel","relationalFields","OneToMany","ManyToMany","ManyToOne","FormView","Required","defaultValue","ColumnSequence","ReadOnly","Hidden","VisibleInGrid","ShowIf","HideIf","If","RequiredIf","ReadOnlyIf","IncludeIf","ValidIf","Css","Editable","ColSpan","Array","fill","map","_","i","toString","getOptionLabel","option","parentPanel","TYPE","toolbar","menubar","ItemSpan","IsGenerateMenu","MenuBuilderTitle","MenuBuilderParent","shouldFetchInStart","limit","getMenuBuilderTitle","parent","find","item","parentText","filter","f","ShowTitle","CanSearch","IfModule","Height","Action","Field","CanMove","OrderBy","IncludeView","IncludeFrom","Sidebar","Translatable","Column","MassUpdate","HashKey","Transient","TZ","Encrypted","Password","Multiline","Large","Search","Formula","InitParam","Index","Default","Unique","Image","Ref","MappedBy","OrphanRemoval","Sequential","Cachable","Repository","LogUpdates","Lang","Table","Implements","Persistable","Extends","HashAll","Strategy","PackageName","EntitySelection","Model","Color","Background","Strong","panelAttrs","cols","TabPanelComponent","WidgetComponent","useGridWidget","attrs","isDragging","isTab","rest","items","current","tabs","slice","reduce","all","concat","getTabAttributes","index","key","meta","horizontal","panelId","panelColumns","tabId","activeTabIndex","Fragment","className","classNames","inline","panel","field","dumpField","form","panelStack","panelDashlet","panelRelated","panelInclude","menu","menuItem","divider","ItemTypes","CONTAINER","ROOTCONTAINER","ITEM","DUMMY","entityFieldTypes","long","manyToMany","oneToMany","manyToOne","oneToOne","FIELD_TYPE","number","spacer","separator","hilite","PANEL_TYPE","stack","flow","grid","custom","GRID_SIZE","max","IDS","createWidgets","Symbol","customForm","PANEL_PROPS","colSpan","image","layout","mappedBy","undefined","model","modelField","relationship","widgetAttrs","JSON","stringify","showTitle","itemSpan","OneToOne","typeReplacer","include","MANY_TO_MANY","MANY_TO_ONE","ONE_TO_ONE","ONE_TO_MANY","ENTITY","ENTITY_TYPE","META","DEFAULT_VALUE","readonly","hidden","sidebar","canCollapse","stacked","canMove","canSearch","multiline","conditionProperties","readonlyIf","requiredIf","hideIf","collapseIf","otherNoQuoteProps","metaJsonFieldService","AxelorService","metaModelService","entityModelService","appBpmService","appUserService","metaViewService","modelService","metaAttrsService","metaSelectService","selectionBuilderService","metaTranslationService","fetchCustomFields","_domain","fullName","search","sortBy","saveCustomModel","a","save","res","status","fields","getFields","$version","version","e","Promise","updatedField","response","updatedFields","fetchJSONFields","ids","update","record","criteria","push","fieldName","operator","then","schema","generateCustomModelSchema","draft","l","widgets","getMenuBuilder","menuBuilder","0","loader","removeCustomModel","removeAll","getEnableAppBuilder","payload","_domainContext","code","offset","bpmResult","isArray","enableAppBuilder","generateMenuChange","customModel","_context","_model","_id","action","context","fetchCustomModel","modelId","fetch","result","fetchEntityModel","fetchEntityFields","packageName","_data","Utils","getEntityModelFields","entityXml","fetchViews","view","viewCriteria","viewList","views","getViews","fetchModelFields","related","metaFields","modelData","fetchAttrsList","conditionPropertiesKeys","Object","keys","conditionPropertiesValues","values","startsWith","endsWith","replace","saveAttrsList","saveAll","deleteAttrsList","fetchLanguages","d","getTranslationList","keyList","saveTranslationList","deleteTranslationList","fetchUserPreferences","info","userInfo","userResponse","getSelectionText","metaSelect","selectionText","payloadData","actionResponse","_properties","useStyles","makeStyles","fieldsContainer","display","justifyContent","alignItems","background","borderRadius","fieldImage","padding","fieldLabel","fontWeight","icon","width","height","backgroundRepeat","backgroundSize","backgroundPosition","position","gridContainer","flexWrap","labelContainer","whiteSpace","overflow","textOverflow","getImageURL","widget","FieldComponent","classes","targetName","Tooltip","arrow","translate","placement","Grid","container","xs","style","backgroundImage","Typography","variant","camleCaseString","theme","breakpoints","down","fieldGroupTitle","color","React","memo","state","useStore","entityFields","fieldTypes","modelFields","fieldType","editorType","findIndex","w","showField","design","component","isCoreField","isPalleteField","useDebounceEffect","handler","interval","isMounted","useRef","useEffect","timer","setTimeout","clearTimeout","root","backgroundColor","palette","paper","maxHeight","input","marginRight","titleHeader","borderBottom","listItem","paddingTop","paddingBottom","closeText","textTransform","ResponsiveDialog","onChange","handleClose","total","useTheme","fullScreen","useMediaQuery","handleItemClick","useCallback","canNext","canPrev","getLabel","Dialog","maxWidth","fullWidth","open","onClose","aria-labelledby","DialogTitle","DialogContent","Input","searchText","setSearchText","target","IconButton","onClick","onPrevious","disabled","onNext","List","ListItem","role","dense","ListItemText","primary","DialogActions","Button","autoFocus","createFilterOptions","autoComplete","marginTop","label","fontSize","popperAutoComplete","error","marginBottom","SelectComponent","_props","preData","propertyList","setPropertyList","split","val","useState","setData","setsearchText","moreDialog","setMoreDialog","setOffset","setTotal","initialFetch","setInitialFetch","targetModel","handleInputChange","reason","getSelectValue","join","fetchOptions","uniqueData","uniqBy","optionDebounceHandler","getInputAsOption","handleSearch","handleNext","newOffset","handlePrevious","handleChange","_value","fromDialog","v","inputValue","updatedValue","gridView","getDefaultGridFormName","formView","inputFocused","clearIndicator","popupIndicator","popper","noOptions","options","forcePopupIcon","freeSolo","size","onInputChange","filterOptions","params","filtered","splice","showMore","o","renderInput","TextField","InputLabelProps","row","languageText","textAlign","TranslationGrid","keyValue","translationList","translations","setTranslations","handleTranslationChange","message","language","_translations","newList","translationIndex","handleTranslationUpdate","languageList","lang","onBlur","minWidth","DeleteConfirmation","onOk","aria-describedby","DialogContentText","translationInput","translationInputView","top","outlinedRoot","borderColor","borderWidth","notchedOutline","focused","switchBase","checked","track","iconOutlined","panelTitle","panelMargin","margin","disableInput","translateButton","staticSelectMenuItem","autoCompleteInput","autoCompleteOption","textFieldInput","booleanInputLabel","PropertiesContext","createContext","isValueGenerated","StringInput","onTranslationRemove","clearable","confirm","setConfirm","min","useContext","Label","placeholder","parse","Boolean","handleTranslationClick","newValue","generateFieldUniqueTitle","getProperty","handleTranslationRemove","removeTranslation","helperText","InputProps","endAdornment","flag","inputProps","minRows","isNaN","Number","trim","openAlert","setAlertOpen","getPropertyValue","fieldValue","handleOnChange","FormControlLabel","control","Switch","StaticSelection","helper","toLowerCase","ColorTag","groupLabel","autoHighlight","renderOption","RenderPropertyField","elements","errors","entityType","actualType","checkDepend","checkModel","PropertiesProvider","children","Provider","Properties","onWidgetChange","editWidget","customFieldWidgets","errorList","isSelectionField","selectedType","tz","typeFieldIndex","overview","fieldOptions","widgetAttributes","inputLabel","labelWidth","setLabelWidth","changedPropertyName","newProperties","obj","offsetWidth","hasPropertyToShow","capitalizeFirst","flexDirection","boxShadow","borderTop","minHeight","borderTopRightRadius","scrollbarWidth","borderBottomRightRadius","activeTab","ListAlt","PlaylistAdd","TabPanel","tabIndex","Paper","square","Tabs","event","TabIndicatorProps","Tab","uiContainer","loaderContainer","zIndex","border","bottom","left","right","emptyFormInfo","FormViewUI","store","formInfo","CircularProgress","onSelect","dragWidget","hoverWidget","onMove","onDrag","onHover","setHoverAttr","Form","customFieldItems","Editor","autoCompleteRoot","marginLeft","inputView","popperView","searchFilter","filterData","onSearch","loading","setLoading","setList","searchMore","setSearchMore","models","uniqueList","service","debounceHandler","handleTextChange","clearOnEscape","getOptionSelected","modelSearch","modelResult","modelIndex","m","modelTypes","startLoader","entityModel","clearHistory","reset","modelName","handleEntityModelSelect","initialItems","attrsList","initialTranslationList","removedTranslationList","originalModelFields","metaModelFields","typeName","generateEntityModelSchema","handleModelSelect","exView","initialWidgets","customFields","extensionXML","extensionView","originalXML","selectedView","extensionMoves","_fields","modelRecord","handleViewSelect","generateXMLToViewSchema","translationNames","originalViewData","convert","xml2json","xml","compact","fullTagEmptyElement","_viewSearch","fieldList","generateXpath","viewFilter","getEntityModel","modelFilter","metaFieldFilter","handleMetaFieldSelect","newId","uniqueId","handleTypeSelect","updater","handleViewFilterData","computed","extension","filterSelectedOptions","toolbarContainer","toolItemView","crudIcon","cursor","selectionContainer","flex","toolbarActions","disableBtn","ToolbarButton","saveView","saveCustomFieldView","removeView","onNew","isRemoveDisabled","xmlId","isNewDisabled","isSaveDisabled","onSidePanelToggle","Menu","Add","Save","undo","pastLength","Undo","redo","futureLength","Redo","hasIndex","path","isSameAsOriginal","originalWidgets","attributes","itemExplore","exploreTarget","widgetExplore","self","attributeName","dashToCamelCase","widgetValue","maskedValue","maskName","getUpdatedAttrsList","newAttrsList","removedAttrsList","moves","movesMap","Map","currentWidgets","forEach","widgetId","eGeneratePath","getWidgets","move","convertConditionName","newMove","assign","set","moveExplore","pathText","endIndex","getName","fieldIndex","attr","isOriginal","isCurrent","newAttrsIndex","changedAttrsList","optimizeExtension","processed","explore","p","_list","_item","lastItem","k","filterListForAttribute","canRemoveReplace","insertIndex","source","moveIndex","removeIndex","filterListForRemove","customFieldService","getChangedTranslationList","initialList","deletedTranslationList","changedTranslationList","initialItem","deleteConfirmationDialog","setDeleteConfirmationDialog","closeLoader","getDefaultProperties","clearView","dialog","getCustomModelFields","propertyValues","Set","formProperties","getFormProperties","isGenerateMenu","menuBuilderTitle","parentMenu","menuBuilderParent","reload","removedCustomFields","errorMessage","patch","generateView","processXML","json2xml","exemptAttributes","isCreatedFromStudio","viewSearch","fetchResult","metaView","originalSchema","generateViewFromJson","getXML","isAttrsChanged","conditionalValues","isTranslationChanged","getExistingExtension","json","handleNew","customWidgets","fromEntries","entries","extraProps","failedRes","r","handleConfirmationClose","deleteView","handleRemoveConfirmation","handleSidePanelToggle","sidePanel","dangerouslySetInnerHTML","__html","renderDialog","past","future","toolbarWrapper","panelContainer","mainPanel","createTheme","typography","fontFamily","AppContent","isResponsive","document","body","App","DndProvider","backend","Backend","ThemeProvider","ReactDOM","render","getElementById","lastCookieString","headers","Accept","lastCookies","readCookie","cookieString","cookie","parts","joinURL","subURL","services","this","baseURL","url","method","axios","request","credential","localStorage","getItem","username","password","login","interceptor","resolve","catch","relogin","setItem","removeItem","post","_subURL","records","logout","get","StoreContext","StoreProvider","setState","produce","useMutableState","hoverAttr","getAllChildrenIds","widgetType","collectIds","onExtension","moveIds","oldWidgets","oldItems","generateExtension","setPresent","object","original","generateHistory","isCustomField","extendList","setErrorList","test","caseConverter","isExtensionView","keyReplacer","valueConverter","parentId","x","Math","child","destination","resolver","isMoved","_widgets","isNew","checkExclusive","isDrop","_extendList","_attrs","dragWidgetProps","extraAttr","_eWidgetAttr","_attrsWidgetAttr","hoverPanel","reorderGrid","checkGridEmptyCells","validateParentPanelItems","onRemove","window","widgetItems","unshift","isPanel","childrenIds","arrangeItems","arrangeGrid","validateOnRemove","getItemType","itemId","isFirstLevel","hasSameNameInParentItems","originalName","getSameItemIndex","getTypeWiseItemIndex","getWidgetType","isUniquePanel","canStopParentLink","findRoot","widgetIds","_widget","itemPath","itemIndex","word","str","toUpperCase","isCamelCase","convertedText","camelCase","textToConvert","charAt","_t","getSpacer","other","isDummy","isDummyWidget","getGrid","trackElement","ind","span","fillRow","start","indices","modelFieldType","removeIds","emptyColumns","cell","every","removeWidget","isLastItemRemove","columnCells","rowCells","gridRow","findCol","deleteItem","isDummyItem","$id","otherProps","targetWidget","validate","dragWidgetItems","_items","destinationItems","hoverCellRowIndex","relatedColSpan","hoverType","existingColspan","newIds","widgetIndex","beforeWidgets","afterWidgets","cellIndex","rowIndex","isSpacer","lastItemIndex","collectWidgets","isRemovedFromSameList","sourcePanel","sourceItems","sourceItemIndex","isLastItem","isLastItemInSamePanel","hoverParent","isPanelTab","ceil","hoverPath","newWidgetIds","hoverWidgetParentItems","hoverWidgetId","actualHoverWidget","shouldInsertInParent","hoverPathInfo","targetInfo","isCreateWidget","shouldAdd","processMoves","exclusive","getColSpan","defaultColspan","getCols","_panelId","typeLateral","formType","formItems","tabItems","_ID","replacer","minSize","maxSize","camelToDashCase","editorKeyReplacer","_keyIndex","isDummyField","types","getCustomWidget","exempt","exemptedAttrs","isAttrHasDefaultValue","parentValue","shouldCheckParent","_obj","caseString","g","isDefaultValue","targetSplit","getElementToWidget","element","itemList","fieldTarget","itemTarget","_key","elementType","getElementName","TYPE_REPLACER","getElementTypes","autoTitle","getTitle","getSpecialType","getXMLToViewItems","exclude","getExtensionElements","chars","floor","random","randomString","isForm","isJson","modelString","viewName","dasherize","xmlString","indent","format","getWidgetAttrs","isModelField","squareIndex","additionalProps","countSequence","sequence","except","getEntityField","localdatetime","localdate","formWidth","getPatchList","xmlJson","filterFormPatch","patchList","getCurrentFormAttributes","mergeFormAttributes","formPatch","targetIndex","remove","isSamePositionInOriginal","hoverItemIndex","defaultType","getReferenceProperty","formData","getEntityItems","getEntityViewItems","checkTarget","checkString","which","getChangeList","extensionXml","elems","moveElement","col","parentItemSpan","DEFAULTS","GridContainer","setWidgetComponent","module","default","gridSize","columns","isStackLayout","spacerWidth","colWidth","rows","useMemo","cellIndice","isStack","getItemColspan","$cell","dummy","dummyPanel","addRow","fillColspan","addItem","occupiedSpan","remainSpan","fullGrid","draggable","upRow","midRow","addCell","$row","j","getFullGrid","c","columnIndex","gridRows","arr","cellPadding","cellSpacing","indice","isSeparator","colIndex","canRemove","fontAwesome","stringOption","existsCheck","uiOptions","conditions","valueExpr","roles","integerOption","decimalOption","booleanOption","datetimeOption","panelOption","panelStackOption","panelTabOption","buttonOption","fontAwesomeList","seperatorOption","spacerOption","labelOption","viewerOption","manyToOneOption","manyToManyAndOneToManyOption","customRelationOption","formOption","actions","commonOption","dummyOption","viewOption","gridOption","panelDashletOption","menuItemOption","dividerOption","menuOption","panelRelatedOption","panelIncludeOption","commonEntityOption","stringEntity","decimalEntity","integerEntity","dateEntity","timeEntity","datetimeEntity","longEntity","booleanEntity","binaryEntity","oneToManyEntity","manyToManyEntity","manyToOneEntity","oneToOneEntity","entityOption","hiliteOption","setAttributeOnNewWidget","inserted","_inserted","exemptedAttributes","attrIndex","cleatVirtualAction","generateNestedView","_subItems","getWidgetObject","getExtendJson2","insertOnNewPanel","lst","addErrorMessage","RegExp","entityTypes","getWidgetAttrsObject","itemSource","uiFields","subViews","openMenu","setOpenMenu","handleToggleMenu","stopPropagation","Registery","dump_field","Panel","CardSource","canDrag","WIDGET_TYPE","beginDrag","endDrag","monitor","didDrop","newProps","CardTarget","hover","dragIndex","dragPanelId","dragId","dragAttrs","hoverIndex","hoverPanelId","hoverId","hoverAttrs","panelSet","maxIndex","gridTab","rowCount","stateItems","widgetKey","isOver","shallow","parentWidgetAttrs","dragAttrsWidgetAttrs","connectDragSource","connectDropTarget","highlighted","hovered","DefaultWidgetComponent","visible","registryField","Registry","componentProps","isFormField","isEdit","isTabWidget","isTabWidgetContent","showRemove","isExist","edit","active","SimpleWidget","DraggableWidget","compose","DropTarget","connect","dropTarget","DragSource","dragSource","FormComponent","rootPanel","mainItems","excludedUITypes","showInGrid","visibleInGrid","RelationalFieldGridView","targetJsonModel","gridItems","setGridItems","gridTitle","setGridTitle","actionResult","jsonFields","jsonAttrs","displayFields","allFields","TextInput","MultiTextInput","Spacer","Separator","MenuItem","Hilite","strong","DefaultWidget","alt","src"],"mappings":"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EACVvhC,KAAMwhC,EACN7xB,MAAOkwB,EACPnI,eAAgBA,GAEjBh6B,QAASA,EACTH,IAAKqkC,EACLpwC,GAAIA,EACJ8L,MAAOskC,EACPjkC,aAAcjB,EAAMJ,KACpBrH,MAAO1E,EAAM0E,MACbsnB,UAAWhsB,EAAMgsB,UACjBwlB,UAAWxxC,EAAMwxC,yB,2CC+ffC,EArxBK,CACnB,WACA,kBACA,oBACA,kBACA,oBACA,YACA,SACA,kBACA,mBACA,gBACA,iBACA,YACA,eACA,yCACA,YACA,aACA,eACA,uBACA,uBACA,wBACA,qBACA,gBACA,gBACA,iBACA,cACA,WACA,aACA,gBACA,uBACA,uBACA,yBACA,yBACA,0BACA,uBACA,wBACA,qBACA,gBACA,gBACA,iBACA,cACA,YACA,gBACA,cACA,cACA,sBACA,iCACA,cACA,QACA,uBACA,gBACA,cACA,mBACA,SACA,cACA,UACA,eACA,iBACA,aACA,UACA,UACA,aACA,aACA,eACA,eACA,eACA,eACA,eACA,mBACA,kBACA,kBACA,qBACA,4BACA,SACA,UACA,aACA,oBACA,UACA,YACA,gBACA,kBACA,aACA,gBACA,mBACA,eACA,sBACA,aACA,eACA,WACA,eACA,iBACA,UACA,UACA,UACA,UACA,cACA,gBACA,aACA,eACA,SACA,SACA,cACA,gBACA,cACA,cACA,SACA,gBACA,SACA,gBACA,cACA,sBACA,sBACA,gBACA,qBACA,sBACA,YACA,kBACA,SACA,gBACA,gBACA,iBACA,yBACA,yBACA,0BACA,uBACA,cACA,qBACA,eACA,QACA,aACA,oBACA,iBACA,YACA,mBACA,eACA,eACA,aACA,iBACA,WACA,kBACA,WACA,kBACA,oBACA,kBACA,oBACA,yBACA,yBACA,0BACA,uBACA,kBACA,kBACA,mBACA,gBACA,WACA,YACA,YACA,cACA,oBACA,iBACA,eACA,aACA,WACA,WACA,WACA,oBACA,kBACA,SACA,UACA,eACA,aACA,cACA,YACA,SACA,UACA,aACA,aACA,eACA,gBACA,kBACA,cACA,gBACA,aACA,cACA,oBACA,YACA,UACA,eACA,sBACA,iBACA,qBACA,UACA,gBACA,UACA,UACA,WACA,SACA,aACA,eACA,cACA,cACA,UACA,cACA,YACA,eACA,aACA,gBACA,aACA,UACA,YACA,kBACA,cACA,cACA,qBACA,uBACA,aACA,YACA,UACA,UACA,aACA,WACA,gBACA,gBACA,YACA,cACA,gBACA,mBACA,qBACA,qBACA,YACA,YACA,UACA,SACA,UACA,cACA,iBACA,wBACA,0BACA,YACA,kBACA,mBACA,0BACA,SACA,eACA,gBACA,QACA,cACA,gBACA,uBACA,qBACA,mBACA,kBACA,SACA,UACA,YACA,iBACA,UACA,oBACA,kBACA,iBACA,kBACA,kBACA,kBACA,YACA,gBACA,kBACA,oBACA,uBACA,kBACA,eACA,iBACA,kBACA,iBACA,gBACA,aACA,UACA,YACA,UACA,uBACA,aACA,iBACA,UACA,oBACA,YACA,WACA,WACA,YACA,cACA,YACA,cACA,iBACA,mBACA,UACA,kBACA,eACA,kBACA,cACA,aACA,gBACA,oBACA,aACA,cACA,aACA,WACA,SACA,QACA,UACA,WACA,gBACA,gBACA,QACA,eACA,UACA,SACA,gBACA,YACA,gBACA,mBACA,YACA,YACA,WACA,WACA,aACA,WACA,YACA,iBACA,wBACA,0BACA,wBACA,mBACA,oBACA,cACA,UACA,WACA,cACA,iBACA,iBACA,mBACA,iBACA,iBACA,kBACA,eACA,kBACA,kBACA,oBACA,iBACA,qBACA,kBACA,iBACA,iBACA,qBACA,aACA,WACA,YACA,gBACA,WACA,aACA,eACA,aACA,UACA,gBACA,WACA,eACA,iBACA,iBACA,iBACA,mBACA,oBACA,iBACA,qBACA,WACA,WACA,cACA,cACA,aACA,eACA,SACA,WACA,UACA,WACA,YACA,cACA,UACA,iBACA,SACA,eACA,iBACA,uBACA,cACA,aACA,YACA,YACA,SACA,cACA,SACA,gBACA,SACA,cACA,YACA,YACA,mBACA,UACA,aACA,WACA,aACA,gBACA,cACA,eACA,eACA,eACA,gBACA,iBACA,gBACA,UACA,cACA,qBACA,YACA,WACA,UACA,cACA,aACA,aACA,oBACA,UACA,qBACA,qBACA,sBACA,mBACA,gBACA,WACA,YACA,kBACA,gBACA,oBACA,UACA,SACA,gBACA,WACA,aACA,eACA,UACA,iBACA,iBACA,mBACA,mBACA,YACA,cACA,YACA,YACA,YACA,WACA,aACA,eACA,gBACA,sBACA,WACA,kBACA,kBACA,oBACA,cACA,YACA,kBACA,UACA,WACA,YACA,kBACA,gBACA,mBACA,WACA,aACA,YACA,iBACA,kBACA,oBACA,mBACA,0BACA,cACA,YACA,WACA,mBACA,aACA,eACA,iBACA,iBACA,mBACA,eACA,eACA,WACA,WACA,kBACA,oBACA,SACA,YACA,YACA,mBACA,qBACA,aACA,WACA,kBACA,WACA,eACA,eACA,gBACA,oBACA,mBACA,eACA,iBACA,sBACA,WACA,UACA,iBACA,mBACA,UACA,UACA,iBACA,iBACA,mBACA,aACA,eACA,WACA,kBACA,kBACA,QACA,YACA,cACA,qBACA,uBACA,WACA,gBACA,iBACA,QACA,YACA,aACA,WACA,aACA,YACA,kBACA,mBACA,aACA,gBACA,YACA,YACA,aACA,YACA,WACA,eACA,gBACA,aACA,SACA,UACA,YACA,iBACA,kBACA,YACA,SACA,gBACA,SACA,WACA,WACA,SACA,YACA,UACA,cACA,YACA,YACA,kBACA,iBACA,YACA,UACA,YACA,YACA,WACA,eACA,sBACA,kBACA,oBACA,YACA,YACA,YACA,UACA,kBACA,kBACA,qBACA,mBACA,YACA,aACA,mBACA,cACA,YACA,aACA,iBACA,aACA,cACA,WACA,WACA,aACA,gBACA,aACA,cACA,oBACA,qBACA,iBACA,mBACA,UACA,oBACA,qBACA,qBACA,sBACA,cACA,eACA,eACA,sBACA,uBACA,aACA,gBACA,mBACA,aACA,WACA,aACA,YACA,cACA,oBACA,oBACA,UACA,eACA,qBACA,oBACA,iBACA,YACA,WACA,kBACA,mBACA,kBACA,iBACA,iBACA,mBACA,UACA,iBACA,mBACA,iBACA,mBACA,iBACA,wBACA,eACA,YACA,cACA,WACA,iBACA,iBACA,aACA,WACA,YACA,gBACA,SACA,UACA,WACA,UACA,cACA,gBACA,mBACA,cACA,iBACA,gBACA,QACA,cACA,aACA,eACA,iBACA,mBACA,mBACA,mBACA,mBACA,mBACA,uBACA,sBACA,sBACA,yBACA,gCACA,gBACA,iBACA,mBACA,iBACA,eACA,YACA,WACA,kBACA,oBACA,qBACA,uBACA,UACA,iBACA,iBACA,gBACA,eACA,kBACA,eACA,eACA,WACA,iBACA,qBACA,WACA,aACA,UACA,YACA,iBACA,YACA,WACA,SACA,SACA,YACA,mBACA,kBACA,QACA,YACA,aACA,oBACA,cACA,eACA,UACA,sBACA,gBACA,YACA,YACA,gBACA,cACA,YACA,SACA,SACA,UACA,iBACA,mBACA,aACA,YACA,eACA,iBACA,gBACA,WACA,WACA,aACA,WACA,kBACA,gBACA,aACA,YACA,mBACA,kBACA,WACA,kBACA,UACA,QACA,0BACA,iBACA,gBACA,eACA,aACA,YACA,WACA,YACA,cACA,gBACA,oBACA,UACA,iBACA,kBACA,oBACA,qBACA,qBACA,oBACA,aACA,SACA,eACA,gBACA,gBACA,aACA,YACA,UACA,iBACA,kBACA,yBACA,WACA,QACA,eACA,UACA,SACA,WACA,aACA,kBACA,qB,uDCjqBD,IAAMC,EAAe,CACpBrlB,SAAU,CACTtsB,aAAK,CAAE4xC,aAAa,IACpBvwC,KACAe,KACAE,IACAE,IACAG,IACAC,MAED2pB,aAAc,CACbnpB,KACAH,KACAU,KACAsB,KACAnB,KACAE,KACAI,IACAC,IACAnE,YAAY,CAAEC,KAAM,QAASoC,gBAAiBxB,IAAWE,SACzDkE,MAED0sC,UAAW,CACVvrC,KACAG,KACAvD,YAAa,CACZ/C,KAAM,YACNC,MAAO,cACPmC,gBAAiBxB,IAAWE,SAE7ByF,IACAC,KACAH,IACAW,KAED2qC,WAAY,CAAClrC,KAAQC,IAAQE,KAAYC,KAAYC,IAAWC,MAChE6qC,UAAW,CAAC/uC,MACZgvC,MAAO,CAAClvC,MACR0pB,iBAAkB,CACjBnlB,IACA0B,KACA7F,YAAa,CACZ/C,KAAM,YACN6E,YAAa,cACblE,UAAWC,IAAWE,OACtBsB,gBAAiBxB,IAAWE,WAKzBgxC,EAAgB,CACrB3lB,SAAU,CACTtsB,aAAK,CAAE4xC,aAAa,IACpBvwC,KACAe,KACAE,IACAE,IACAG,IACAC,MAED2pB,aAAc,CACbnpB,KACAH,KACAU,KACAsB,KACAnB,KACAE,KACAI,IACAC,IACAc,MAED0sC,UAAW,CAACvrC,KAAUG,KAAUC,IAAQC,KAAeH,IAAgBW,KACvE2qC,WAAY,CAAClrC,KAAQC,IAAQE,KAAYC,KAAYC,IAAWC,MAChE6qC,UAAW,CAAC/uC,MACZgvC,MAAO,CAAClvC,MACR0pB,iBAAkB,CAACnlB,IAAS0B,OAGvBmpC,EAAgB,CACrB5lB,SAAU,CACTtsB,aAAK,CAAE4xC,aAAa,IACpBvwC,KACAe,KACAE,IACAE,IACAG,IACAC,MAED2pB,aAAc,CACbzoB,KACAE,KACAI,IACAC,IACAxB,YAAa,CACZ1C,KAAM,YACNkvC,QAAS,IAEVxsC,YAAa,CACZ1C,KAAM,QACNkvC,QAAS,IAEVlqC,MAED0sC,UAAW,CAACvrC,KAAUG,KAAUC,IAAQC,KAAeH,IAAgBW,KACvE2qC,WAAY,CAAClrC,KAAQC,IAAQE,KAAYC,KAAYC,IAAWC,MAChE6qC,UAAW,CAAC/uC,MACZgvC,MAAO,CAAClvC,MACR0pB,iBAAkB,CAACnlB,IAAS0B,OAGvBopC,EAAgB,CACrB7lB,SAAU,CACTtsB,aAAK,CAAE4xC,aAAa,IACpBvwC,KACAe,KACAE,IACAE,IACAG,IACAC,MAED2pB,aAAc,CAACzoB,KAAQE,KAAUmB,MACjC0sC,UAAW,CAACvrC,KAAUG,KAAUC,IAAQC,KAAeH,IAAgBW,KACvE2qC,WAAY,CAAClrC,KAAQC,IAAQE,KAAYC,KAAYC,IAAWC,MAChE6qC,UAAW,CAAC/uC,MACZgvC,MAAO,CAAClvC,MACR0pB,iBAAkB,CAACnlB,IAAS0B,OAGvBqpC,EAAiB,CACtB9lB,SAAU,CACTtsB,aAAK,CAAE4xC,aAAa,IACpBvwC,KACAe,KACAE,IACAE,IACAG,IACAC,MAED2pB,aAAc,CAACzoB,KAAQE,KAAUmB,MACjC0sC,UAAW,CAACvrC,KAAUG,KAAUC,IAAQC,KAAeH,IAAgBW,KACvE2qC,WAAY,CAAClrC,KAAQC,IAAQE,KAAYC,KAAYC,IAAWC,MAChE6qC,UAAW,CAAC/uC,MACZgvC,MAAO,CAAClvC,MACR0pB,iBAAkB,CAACnlB,IAAS0B,OAGvBspC,EAAc,CACnB/lB,SAAU,CAACtsB,aAAK,CAAE4xC,aAAa,IAASvwC,KAAMe,KAAOI,KACrDqvC,UAAW,CACVprC,KACAC,IACA+C,KACAvG,YAAa,CACZ/C,KAAM,cACN6E,YAAa,cACblE,UAAWC,IAAWE,OACtBsB,gBAAiBxB,IAAWE,SAE7Bf,YAAY,CACXC,KAAM,aACN6E,YAAa,cACblE,UAAWC,IAAWE,OACtBsB,gBAAiBxB,IAAWE,SAE7BuF,IACAW,IACA5B,KAEDusC,WAAY,CAAClrC,KAAQC,IAAQG,MAC7BgrC,MAAO,CAAClvC,MACR0pB,iBAAkB,CAACtkB,IAAUa,OAGxBupC,EAAmB,CACxBhmB,SAAU,CAACtsB,aAAK,CAAE4xC,aAAa,IAASvwC,KAAMmB,KAC9CqvC,UAAW,CACVprC,KACAC,IACA+C,KACAvG,YAAa,CACZ/C,KAAM,cACN6E,YAAa,cACblE,UAAWC,IAAWE,OACtBsB,gBAAiBxB,IAAWE,SAE7Bf,YAAY,CACXC,KAAM,aACN6E,YAAa,cACblE,UAAWC,IAAWE,OACtBsB,gBAAiBxB,IAAWE,SAE7BuF,IACAW,KAED2qC,WAAY,CAAClrC,KAAQC,IAAQG,MAC7BgrC,MAAO,CAAClvC,MACR0pB,iBAAkB,CAACnlB,MAGdkrC,EAAiB,CACtBjmB,SAAU,CAACtsB,aAAK,CAAE4xC,aAAa,IAASvwC,KAAMe,KAAOI,KACrDqvC,UAAW,CAACprC,KAAUC,IAAQF,IAAgBW,KAC9C2qC,WAAY,CAAClrC,KAAQC,IAAQG,MAC7BgrC,MAAO,CAAClvC,MACR0pB,iBAAkB,CAACzjB,OAGdypC,EAAe,CACpBlmB,SAAU,CACTtsB,aAAK,CAAE4xC,aAAa,IACpBvwC,KACAe,KACAI,IACAG,IACAC,KACAmC,MAEDwnB,aAAc,CACbzoB,KACAT,YAAY,CACXlD,KAAM,UACNC,MAAO,WACPC,UAAU,EACVqC,IAAK,gCACLtB,YAAa,CAAC,UACdmB,gBAAiBxB,IAAWE,OAC5B8B,UAAU,EACVmB,gBAAgB,EAChBD,WAAW,KAGb4tC,UAAW,CAACprC,KAAUC,IAAQC,KAAeH,IAAgBW,KAC7D2qC,WAAY,CAAClrC,KAAQC,IAAQE,KAAYC,KAAYC,IAAWC,MAChE8qC,MAAO,CAAClvC,MACR0pB,iBAAkB,CACjBnlB,IACA0B,KACAhH,YAAkB,CACjB5B,KAAM,OACNC,MAAO,OACPf,KAAMozC,EACN5nB,OAAQ,qCACR7lB,YAAa,cACblE,UAAWC,IAAWE,WAiBnByxC,EAAkB,CACvBpmB,SAAU,CACTtsB,aAAK,CAAE4xC,aAAa,IACpBvwC,KACAe,KACAE,IACAE,IACAG,IACAC,MAEDivC,UAAW,CAACnrC,IAAQF,IAAgBW,KACpC2qC,WAAY,CAAClrC,KAAQC,IAAQE,KAAYC,KAAYC,IAAWC,MAChE8qC,MAAO,CAAClvC,MACR0pB,iBAAkB,CAACnlB,MAGdsrC,EAAe,CACpBrmB,SAAU,CAACtsB,aAAK,CAAE4xC,aAAa,IAASvwC,KAAMmB,KAC9C+pB,aAAc,GACdslB,UAAW,CAACnrC,IAAQF,IAAgBW,KACpC2qC,WAAY,CAAClrC,KAAQC,IAAQK,MAC7B8qC,MAAO,CAAClvC,MACR0pB,iBAAkB,CAACnlB,MAGdurC,EAAc,CACnBtmB,SAAU,CAACtsB,aAAK,CAAE4xC,aAAa,IAASvwC,KAAMe,KAAOI,KACrD+pB,aAAc,CAACzoB,MACf+tC,UAAW,CAACvrC,KAAUI,IAAQF,IAAgBW,KAC9C2qC,WAAY,CAAClrC,KAAQC,IAAQE,KAAYC,KAAYE,MACrD6qC,UAAW,CAAC/uC,MACZgvC,MAAO,CAAClvC,MACR0pB,iBAAkB,CAACnlB,IAAS0B,OAGvB8pC,EAAe,CACpBvmB,SAAU,CAACtsB,aAAK,CAAE4xC,aAAa,IAASvwC,KAAMe,KAAOI,KACrD+pB,aAAc,CAACzoB,MACf+tC,UAAW,CAACvrC,KAAUI,IAAQD,KAAUD,IAAgBW,KACxD2qC,WAAY,CAAClrC,KAAQC,IAAQE,KAAYC,KAAYE,MACrD6qC,UAAW,CAAC/uC,MACZgvC,MAAO,CAAClvC,MACR0pB,iBAAkB,CAACnlB,IAAS0B,OAGvB+pC,EAAkB,CACvBxmB,SAAU,CACTtsB,aAAK,CAAE4xC,aAAa,IACpBvwC,KACAe,KACAE,IACAE,IACAG,IACAC,MAED2pB,aAAc,CACbzoB,KACAE,KACAQ,IACAM,IACAgB,KACAC,IACAM,IACAlB,MAED0sC,UAAW,CAACvrC,KAAUG,KAAUC,IAAQC,KAAeH,IAAgBW,KACvE2qC,WAAY,CAAClrC,KAAQC,IAAQE,KAAYC,KAAYC,IAAWC,MAChE6qC,UAAW,CAAC/uC,MACZgvC,MAAO,CAAClvC,MACR0pB,iBAAkB,CAACnlB,IAAS0B,OAGvBgqC,EAA+B,CACpCzmB,SAAU,CACTtsB,aAAK,CAAE4xC,aAAa,IACpBvwC,KACAe,KACAI,IACAG,IACAC,MAED2pB,aAAc,CACbzoB,KACAE,KACAQ,IACAM,IACAgB,KACAC,IACAM,IACAjB,KACAC,KACAF,MAED0sC,UAAW,CAACvrC,KAAUG,KAAUC,IAAQC,KAAeH,IAAgBW,KACvE2qC,WAAY,CAAClrC,KAAQC,IAAQE,KAAYC,KAAYC,IAAWC,MAChE6qC,UAAW,CAAC/uC,MACZgvC,MAAO,CAAClvC,MACR0pB,iBAAkB,CAACnlB,IAAS0B,OAGvBiqC,EAAuB,CAC5B1mB,SAAU,CACTtsB,aAAK,CAAE4xC,aAAa,IACpBvwC,KACAe,KACAI,IACAG,IACAC,MAED2pB,aAAc,CACbzoB,KACAE,KACAQ,IACAM,IACAc,KACAT,MAED0sC,UAAW,CAACvrC,KAAUG,KAAUC,IAAQC,KAAeH,IAAgBW,KACvE2qC,WAAY,CAAClrC,KAAQC,IAAQE,KAAYC,KAAYC,IAAWC,MAChE6qC,UAAW,CAAC/uC,MACZgvC,MAAO,CAAClvC,MACR0pB,iBAAkB,CAACnlB,IAAS0B,OAGvBkqC,EAAa,CAClB3mB,SAAU,CACTtsB,aAAK,CAAE4xC,aAAa,IADX,2BAEJxvC,MAFI,IAEG/B,UAAU,IACtBmC,IACAT,YAAkB,CACjB5B,KAAM,YACNC,MAAO,aACPf,KAAM,CAAC,WAERa,YAAY,CACXC,KAAM,UACNC,MAAO,aAER+H,IACAE,IACAD,KAED8qC,QAAS,CACR7vC,YAAY,CACXjD,MAAO,SACPD,KAAM,QACNuC,IAAK,gCACLH,gBAAiBxB,IAAWE,OAC5B8B,UAAU,EACVmB,gBAAgB,EAChBD,WAAW,IAEZZ,YAAY,CACXjD,MAAO,UACPD,KAAM,SACNuC,IAAK,gCACLH,gBAAiBxB,IAAWE,OAC5B8B,UAAU,EACVmB,gBAAgB,EAChBD,WAAW,MAKRkvC,EAAe,CACpB7mB,SAAU,CAACtsB,eAAQqB,KAAMe,KAAOI,KAChCqvC,UAAW,CAACnrC,IAAQC,KAAeH,IAAgBW,KACnD2qC,WAAY,CAAClrC,KAAQC,IAAQG,KAAYC,IAAWC,MACpDslB,iBAAkB,CAACnlB,IAAS0B,OAGvBqqC,EAAc,CACnB9mB,SAAU,CAACtsB,eAAQkC,MAEdmxC,EAAa,CAClB/mB,SAAU,CACTtsB,aAAK,CAAE4xC,aAAa,IACpBvwC,KAFS,2BAGJe,MAHI,IAGG9B,UAAU,EAAM+B,iBAAiB,MAezCixC,EAAa,CAClBhnB,SAAU,CAACtsB,aAAK,CAAE4xC,aAAa,IAASvwC,KAAMe,KAAOuJ,IAAOvE,MAGvDmsC,EAAqB,CAC1BjnB,SAAU,CACTtsB,aAAK,CAAE4xC,aAAa,IACpBvwC,KACA8H,IACA/G,KACA4G,IACAC,KAED4oC,UAAW,CAACprC,KAAUC,IAAQwC,IAAQ/B,IAAK7B,MAC3CwsC,WAAY,CAAClrC,KAAQC,IAAQG,MAC7BwlB,iBAAkB,CAACnlB,IAAS0B,OAGvByqC,EAAiB,CACtBlnB,SAAU,CAACtsB,aAAK,CAAE4xC,aAAa,IAASvwC,KAAM8H,KAE9CqjB,iBAAkB,CAACzjB,OAGd0qC,EAAgB,CACrBnnB,SAAU,CAACtsB,aAAK,CAAE4xC,aAAa,IAASvwC,MACxCywC,WAAY,CAAChrC,IAAIF,KAAQC,IAAQoC,MAG5ByqC,EAAa,CAClBpnB,SAAU,CAACtsB,aAAK,CAAE4xC,aAAa,IAASvwC,MACxCmrB,iBAAkB,CACjBzjB,MAQD+oC,WAAY,CAAChrC,IAAImC,IAAUhC,MAGtB0sC,EAAqB,CAC1BrnB,SAAU,CAACtsB,aAAK,CAAE4xC,aAAa,IAASvwC,KAAMe,KAAOgH,IAAOjF,KAAOH,MACnE6tC,UAAW,CAACxrC,IAAUN,IAAUmD,IAAQ9B,IAAUX,KAAUC,IAAQS,KACpE2qC,WAAY,CAAClrC,KAAQC,IAAQG,KAAYE,KAASmC,IAASC,MAC3DkjB,iBAAkB,CAACnlB,IAAS0B,OAGvB6qC,EAAqB,CAC1BtnB,SAAU,CAACjrB,KAAMkI,IAAaC,IAAaP,KAC3CujB,iBAAkB,CAACzjB,OAGd8qC,EAAqB,CAC1B7zC,aAAK,CAAE4xC,aAAa,IACpBvwC,KACAe,KACAO,IACAgH,IACAY,IACAC,IACAlE,KACAG,KACAgE,KACA/D,IACAoD,KACAQ,IACAT,IACAD,IACAS,KAGKypC,EAAe,CACpBxnB,SAAS,GAAD,OACJunB,EADI,CAEP3wC,YAAa,CACZ/C,KAAM,aACNC,MAAO,gBAERsL,IACAtH,IACAC,IACA8F,IACAC,KACAxH,KACAsH,KACAR,KACAO,KACAD,OAII+pC,EAAgB,CACrBznB,SAAS,GAAD,OACJunB,EADI,CAEPnoC,IACAtH,IACAC,IACAC,KACAC,QAIIyvC,EAAgB,CACrB1nB,SAAS,GAAD,OAAMunB,EAAN,CAA0BnoC,IAAiBtH,IAAKC,OAGnD4vC,EAAa,CAClB3nB,SAAS,GAAD,OAAMunB,EAAN,CAA0BnoC,OAG7BwoC,EAAa,CAClB5nB,SAAS,GAAD,OAAMunB,EAAN,CAA0BnoC,OAG7ByoC,EAAiB,CACtB7nB,SAAS,GAAD,OAAMunB,EAAN,CAA0BnoC,IAAiB3B,QAG9CqqC,EAAa,CAClB9nB,SAAS,GAAD,OAAMunB,EAAN,CAA0BnoC,IAAiBtH,IAAKC,OAGnDgwC,EAAgB,CACrB/nB,SAAS,GAAD,OAAMunB,EAAN,CAA0BnoC,OAG7B4oC,EAAe,CACpBhoB,SAAS,GAAD,OAAMunB,EAAN,CAA0BnoC,IAAiBhB,IAAOV,OAGrDuqC,EAAkB,CACvBjoB,SAAS,GAAD,OAAMunB,EAAN,CAA0BlpC,KAAKC,IAAUtB,KAASuB,QAGrD2pC,EAAmB,CACxBloB,SAAS,GAAD,OAAMunB,EAAN,CAA0BlpC,KAAKC,IAAUtB,QAG5CmrC,EAAkB,CACvBnoB,SAAS,GAAD,OAAMunB,EAAN,CAA0BlpC,QAG7B+pC,EAAiB,CACtBpoB,SAAS,GAAD,OAAMunB,EAAN,CAA0BlpC,KAAKC,OAGlC+pC,EAAe,CACpBroB,SAAU,CACT7gB,KACAzL,aAAK,CAAE4xC,aAAa,IACpB9mC,KACAC,IACAC,KACAC,IACAI,KACAH,IACAI,IACAF,IACAD,KACAK,KACAD,MAIIqpC,EAAe,CACpBtoB,SAAU,CAACtsB,aAAK,CAAE4xC,aAAa,IAAS9qC,IAAI8E,IAAOC,IAAYC,KAAQ3E,MAG3Dyd,EAAU,CACtB,CAAEzjB,KAAM,OAAQM,MAAO4xC,GACvB,CAAElyC,KAAM,OAAQM,MAAO6xC,GACvB,CAAEnyC,KAAM,YAAaM,MAAOwxC,GAC5B,CAAE9xC,KAAM,aAAcM,MAAOkzC,GAC7B,CAAExzC,KAAM,SAAUM,MAAOkwC,GACzB,CAAExwC,KAAM,SAAUM,MAAOkwC,GACzB,CAAExwC,KAAM,UAAWM,MAAOwwC,GAC1B,CAAE9wC,KAAM,SAAUM,MAAOwwC,GACzB,CAAE9wC,KAAM,UAAWM,MAAOywC,GAC1B,CAAE/wC,KAAM,aAAcM,MAAOywC,GAC7B,CAAE/wC,KAAM,UAAWM,MAAO0wC,GAC1B,CAAEhxC,KAAM,WAAYM,MAAO2wC,GAC3B,CAAEjxC,KAAM,gBAAiBM,MAAO2wC,GAChC,CAAEjxC,KAAM,gBAAiBM,MAAO2wC,GAChC,CAAEjxC,KAAM,OAAQM,MAAO2wC,GACvB,CAAEjxC,KAAM,YAAaM,MAAO2wC,GAC5B,CAAEjxC,KAAM,OAAQM,MAAO2wC,GACvB,CAAEjxC,KAAM,QAASM,MAAO4wC,EAAa9vC,gBAAiBxB,IAAWC,MACjE,CAAEG,KAAM,cAAeM,MAAO6wC,GAC9B,CAAEnxC,KAAM,YAAaM,MAAO8wC,GAC5B,CAAEpxC,KAAM,SAAUM,MAAO+wC,GACzB,CAAErxC,KAAM,YAAaM,MAAOixC,GAC5B,CAAEvxC,KAAM,SAAUM,MAAOkxC,GACzB,CAAExxC,KAAM,QAASM,MAAOmxC,GACxB,CAAEzxC,KAAM,cAAeM,MAAOqxC,GAC9B,CAAE3xC,KAAM,eAAgBM,MAAOsxC,GAC/B,CAAE5xC,KAAM,cAAeM,MAAOsxC,GAC9B,CAAE5xC,KAAM,mBAAoBM,MAAOuxC,GACnC,CAAE7xC,KAAM,oBAAqBM,MAAOuxC,GACpC,CAAE7xC,KAAM,mBAAoBM,MAAOuxC,GACnC,CAAE7xC,KAAM,UAAWM,MAAOwxC,GAC1B,CAAE9xC,KAAM,aAAcM,MAAO8wC,EAAgBrtC,mBAAmB,GAChE,CAAE/D,KAAM,gBAAiBM,MAAO8xC,GAChC,CAAEpyC,KAAM,gBAAiBM,MAAOkyC,GAChC,CAAExyC,KAAM,gBAAiBM,MAAOmyC,GAChC,CAAEzyC,KAAM,OAAQM,MAAO0xC,GACvB,CAAEhyC,KAAM,OAAQM,MAAOywC,GACvB,CAAE/wC,KAAM,gBAAiBM,MAAO0xC,GAChC,CAAEhyC,KAAM,UAAWM,MAAO0xC,GAC1B,CAAEhyC,KAAM,SAAUM,MAAO0xC,GACzB,CAAEhyC,KAAM,aAAcM,MAAOqxC,GAC7B,CAAE3xC,KAAM,SAAUM,MAAO0xC,GACzB,CAAEhyC,KAAM,QAASM,MAAO0xC,GACxB,CAAEhyC,KAAM,QAASM,MAAO2xC,GACxB,CAAEjyC,KAAM,SAAUM,MAAOoxC,GACzB,CAAE1xC,KAAM,SAAUM,MAAOmxC,GACzB,CAAEzxC,KAAM,eAAgBM,MAAOqyC,GAC/B,CAAE3yC,KAAM,eAAgBM,MAAOqyC,GAC/B,CAAE3yC,KAAM,gBAAiBM,MAAOuyC,GAChC,CAAE7yC,KAAM,gBAAiBM,MAAOsyC,GAChC,CAAE5yC,KAAM,mBAAoBM,MAAOsyC,GACnC,CAAE5yC,KAAM,aAAcM,MAAOwyC,GAC7B,CAAE9yC,KAAM,kBAAmBM,MAAOwyC,GAClC,CAAE9yC,KAAM,aAAcM,MAAOyyC,GAC7B,CAAE/yC,KAAM,iBAAkBM,MAAO0yC,GACjC,CAAEhzC,KAAM,sBAAuBM,MAAO0yC,GACtC,CAAEhzC,KAAM,sBAAuBM,MAAO0yC,GACtC,CAAEhzC,KAAM,aAAcM,MAAO2yC,GAC7B,CAAEjzC,KAAM,gBAAiBM,MAAO4yC,GAChC,CAAElzC,KAAM,eAAgBM,MAAO6yC,GAC/B,CAAEnzC,KAAM,oBAAqBM,MAAOgzC,GACpC,CAAEtzC,KAAM,qBAAsBM,MAAO+yC,GACrC,CAAErzC,KAAM,oBAAqBM,MAAO8yC,GACpC,CAAEpzC,KAAM,mBAAoBM,MAAOizC,GACnC,CAAEvzC,KAAM,OAAQM,MAAOiyC,GACvB,CAAEvyC,KAAM,OAAQM,MAAO+xC,GACvB,CAAEryC,KAAM,UAAWM,MAAOgyC,GAC1B,CAAEtyC,KAAM,SAAUM,MAAOmzC,IAGXhwB,O,sPCvyBF1kB,EAAc,SAAC,GAAD,IAAMD,EAAN,wCAC1BkB,KAAM,UACHlB,IAGSwC,EAAuB,SAAC,GAAD,IAAMxC,EAAN,wCACnCkB,KAAM,mBACHlB,IAGS4C,EAAe,SAAC,GAAD,IAAM5C,EAAN,wCAC3BkB,KAAM,WACHlB,IAGSoD,EAAc,SAAC,GAAD,IAAMpD,EAAN,wCAC1BkB,KAAM,SACNmC,WAAY,QACTrD,IAGS8B,EAAoB,SAAC,GAAD,IAAM9B,EAAN,wCAChCkB,KAAM,gBACHlB,IAGSiD,EAAe,SAAC,GAAD,IAAMjD,EAAN,wCAC3BkB,KAAM,WACHlB,K,qICoBW0c,QAAMC,MAvCrB,YAAwE,IAA9C1b,EAA6C,EAA7CA,GAAIkL,EAAyC,EAAzCA,MAAOmR,EAAkC,EAAlCA,OAAkC,IAA1BjR,aAA0B,SAARC,EAAQ,iBAChE8e,EAAS9e,EAAK0f,UAAU/qB,IAAO,GACrC,OACC,kBAAC,IAAMsM,SAAP,MACGpB,EAAMhM,OACP,CAAC2H,IAAKC,QAASD,IAAKE,SAAStC,SAASyG,EAAMxH,cAC5C,yBACC6I,UAAWC,IAAW,eAAgB,CACrCC,OAAQrB,KAGRsP,YAAUxP,EAAMhM,OAASgM,EAAMu/B,WAC/Bv/B,EAAMxH,aAAemD,IAAKC,SAC1B,uBAAGyF,UAAU,eAAerN,MAAM,YAElCgM,EAAMxH,aAAemD,IAAKE,SAC1B,uBAAGwF,UAAU,aAAarN,MAAM,aAIlCirB,EAAO7e,QAAUF,GACjB,yBAAKmB,UAAWC,IAAW,yBAA0B2d,EAAO7e,QAE3DF,GACD,kBAAC,IAAD,CACCiR,OAAQA,EACR9P,UAAU,aACVjB,MAAOJ,EAAMI,OAAS,GACtBJ,MAAOA,EACPgB,QAASlM,EACTyD,MAAO4H,EAAK5H,MACZsnB,UAAW1f,EAAK0f,UAChBwlB,UAAWllC,EAAKklC,iB,8KCtCrB,SAASoD,EAAwBroC,EAAO8O,EAAQ+b,EAAUxa,GAIzD,IAHA,IAAMxH,EAAUwH,EAAMxH,QAClBy/B,GAAW,EAENptC,EAAI,EAAGA,EAAI8E,EAAM3H,OAAQ6C,IAAK,CACtC,IAAMiB,EAAO6D,EAAM9E,GAKnB,GAJIiB,EAAKxI,QAHkBkV,EAAQgiB,IAAahiB,EAAQgiB,GAAUl3B,QAIjEwI,EAAK2S,EAAO6a,WAAWh2B,MAAQmb,EAAO6a,WAAW10B,MACjDqzC,GAAW,GAERA,EACH,MAED,GAAInsC,EAAK6D,OAAS7D,EAAK6D,MAAM3H,OAAQ,CACpC,IAAMkwC,EAAYF,EACjBlsC,EAAK6D,MACL8O,EACA+b,EACAxa,GAED,GAAIk4B,EAAW,CACdD,EAAWC,EACX,QAIH,OAAOD,EAGD,SAAS7T,EAAkBx7B,EAAMoX,GAAQ,IAAD,GACnB,WAC1B,IAAMm4B,EAAqB,CAC1B,cACA,QACA,UACA,WACA,KACA,cACA,SAED,YAAIvvC,GAAM2xB,SAAQ,SAACzuB,EAAMjB,GACxB,GAAkB,WAAdiB,EAAKxI,KAAmB,CAC3B,IAAMe,EAAKyH,EAAKzH,GACVk4B,EAAc3zB,EAAK2X,WACxB,SAACzU,GAAD,MAAwB,YAAdA,EAAKxI,MAAsBwI,EAAKzH,KAAOA,IAAOyH,EAAK8X,UAExDwY,EAAcxzB,EAAK2X,WACxB,SAACzU,GAAD,OAAUA,EAAKzH,KAAOA,GAAoB,WAAdyH,EAAKxI,SAEb,IAAjBi5B,IACH3zB,EAAK2f,OAAOgU,EAAa,GACzB3zB,EAAK2f,OAAO6T,EAAa,IAGT,cAAdtwB,EAAKxI,MAAuB,WAC/B,IAAMe,EAAKyH,EAAKzH,GAEhB,GACCyH,EAAKwtB,YACLhf,IAAM4zB,eAAepiC,EAAKwtB,WAAWh2B,KAAMwI,EAAKwtB,WAAW10B,OAC1D,CACD,IAAMwzC,EAAYxvC,EAAK2X,WACtB,SAACjJ,GAAD,OACCA,EAAEjT,KAAOA,GACE,cAAXiT,EAAEhU,MACFgU,EAAEgiB,WAAWh2B,OAASwI,EAAKwtB,WAAWh2B,QAExCsF,EAAK2f,OAAO6vB,EAAW,EAAvB,2BACIxvC,EAAKwvC,IADT,IAEC9e,WAAW,2BACP1wB,EAAKwvC,GAAW9e,YADV,IAET10B,MAAOkH,EAAKwtB,WAAW10B,WAI1B,GACCkH,EAAKwtB,YACL6e,EAAmBrvC,SAASgD,EAAKwtB,WAAWh2B,MAC3C,CACD,IAAM80C,EAAYxvC,EAAK2X,WACtB,SAACzU,GAAD,OACCA,EAAKzH,KAAOA,GACE,cAAdyH,EAAKxI,MACL60C,EAAmBrvC,SAASgD,EAAKwtB,WAAWh2B,SAE9CsF,EAAK2f,OAAO6vB,EAAW,QAKvB,IAHA,IAAIzc,GAAY,EAGPM,EAAI,EAAGA,EAAIjc,EAAM2V,eAAe3tB,OAAQi0B,IAAK,CACrD,IAAMtB,EAAO3a,EAAM2V,eAAesG,GAClC,GAAkB,WAAdtB,EAAKr3B,KAER,IADA,IAAQirB,EAAaoM,EAAbpM,SACC0lB,EAAI,EAAGA,EAAI1lB,EAASvmB,OAAQisC,IAAK,CACzC,IAAM5F,EAAU9f,EAAS0lB,GACzB,GAAI5F,EAAQ/qC,QAPd0c,EAAMxH,QAAQnU,IAAO2b,EAAMxH,QAAQnU,GAAIf,MAOC,CACrC0c,EAAM2V,eAAesG,GAAG1N,SAAS0lB,GAAGnoC,EAAKwtB,WAAWh2B,MACnDwI,EAAKwtB,WAAW10B,MACjB+2B,GAAY,EACZ,MAED,GAAI0S,EAAQ1+B,OAAS0+B,EAAQ1+B,MAAM3H,OACnBgwC,EACd3J,EAAQ1+B,MACR7D,EACAzH,EACA2b,KAGA2b,GAAY,GAKhB,GAAIA,EAAW,CACd,IAAMyc,EAAYxvC,EAAK2X,WACtB,SAACzU,GAAD,OAAUA,EAAKzH,KAAOA,GAAoB,cAAdyH,EAAKxI,QAElCsF,EAAK2f,OAAO6vB,EAAW,GACvB,QAlE4B,MAyElCC,IACA,EAAAr4B,EAAM2V,gBAAe3d,KAArB,oBAA6BpP,IAoBvB,SAASg2B,EAAOjJ,EAAgB3V,GA6BtC,OA5BgB2V,EACdhrB,KAAI,SAACgwB,GACL,IAAIzjB,EAaJ,GAZkB,WAAdyjB,EAAKr3B,OACR4T,EAASyjB,EAAKpM,SACZ5jB,KAAI,SAACqG,GACL,GAAIA,GAASA,EAAMrB,OAASqB,EAAMrB,MAAM3H,OAAQ,CAC/C,IAAMiE,EAAC,eAAQ+E,GAEf,OADA/E,EAAEsiB,SA1BkB,SAArB+pB,EAAsB3oC,GAc3B,OAbeA,EAAMhF,KAAI,SAACmB,GACzB,IAAIysC,EAAY,GAIhB,OAHIzsC,EAAK6D,QACR4oC,EAAYD,EAAmBxsC,EAAK6D,QAE9B6oC,YAAgB,2BACjB1sC,GADgB,IACVyiB,SAAUgqB,IACrB,GACA,KACAr0C,IAAWC,SAgBMm0C,CAAmBtnC,EAAMrB,OAC/B1D,EAER,OAAO+E,KAEPhF,QAAO,SAACsL,GAAD,OAAOA,MAEZqjB,EAAK/W,OAGV,OAAO60B,YAAe,aACrB70B,OAAQ+W,EAAK/W,OACb3F,SAAU0c,EAAK1c,SACfoe,OAAQ1B,EAAK0B,OACb/3B,KAAMq2B,EAAKr3B,KACXwQ,YAAaoD,GACVyjB,EAAKrB,gBAGTttB,QAAO,SAACsL,GAAD,OAAOA,KAIjB,SAASohC,EAAiB/oC,EAAO8O,EAAQlO,EAASyP,GAIjD,IAHA,IAAMxH,EAAUwH,EAAMxH,QAClBy/B,GAAW,EAENptC,EAAI,EAAGA,EAAI8E,EAAM3H,OAAQ6C,IAAK,CACtC,IAAMiB,EAAO6D,EAAM9E,GASnB,GARIiB,EAAKxI,OAHiBkV,EAAQjI,GAASjN,OAItCwI,EAAK6D,MACR7D,EAAK6D,MAAMqI,KAAKyG,GAEhB3S,EAAK6D,MAAQ,CAAC8O,GAEfw5B,GAAW,GAERA,EACH,MAED,GAAInsC,EAAK6D,OAAS7D,EAAK6D,MAAM3H,OAAQ,CACpC,IAAMkwC,EAAYQ,EAAiB5sC,EAAK6D,MAAO8O,EAAQlO,EAASyP,GAChE,GAAIk4B,EAAW,CACdD,EAAWC,EACX,QAIH,OAAOD,EAGD,SAAS3L,EAAatsB,EAAOvB,EAAQpa,EAAIkM,GAK/C,IAJA,IAAM3H,EAAO,GACT+yB,GAAY,EACVnjB,EAAUwH,EAAMxH,QAEb3N,EAAI,EAAGA,EAAImV,EAAM2V,eAAe3tB,OAAQ6C,IAAK,CACrD,IAAM8vB,EAAO3a,EAAM2V,eAAe9qB,GAClC,GAAkB,WAAd8vB,EAAKr3B,KAER,IADA,IAAQirB,EAAaoM,EAAbpM,SACC0lB,EAAI,EAAGA,EAAI1lB,EAASvmB,OAAQisC,IAAK,CACzC,IAAM5F,EAAU9f,EAAS0lB,GACzB,GACC5F,EAAQ/qC,OARekV,EAAQjI,GAASjN,MASxC+qC,EAAQ1+B,OACiB,IAAzB0+B,EAAQ1+B,MAAM3H,OACb,CACDgY,EAAM2V,eAAe9qB,GAAG0jB,SAAS0lB,GAAGtkC,MAAMqI,KAAKyG,GAC/Ckd,GAAY,EACZ,MAED,GAAI0S,EAAQ1+B,OAAS0+B,EAAQ1+B,MAAM3H,OACnB0wC,EACdrK,EAAQ1+B,MACR8O,EACAlO,EACAyP,KAGA2b,GAAY,GAKhB,GAAIA,EACH,MAQF,OALIA,GACCld,EAAO5V,OACVD,EAAKoP,KAAK,CAAE1U,KAAM,UAAWsgB,OAAQnF,EAAO5V,QAGvCD,I,uKC1PD,SAASshC,EAASl5B,EAAO/M,GAAmC,IAAxBwgC,EAAuB,wDAC3DjW,EAAS,GACXc,EACkB,UAArBte,EAAMjJ,WAAyBiJ,EAAM1M,KAAO0M,EAAMjJ,YAAciJ,EAAM1M,KACvEgrB,EAAeA,GAAgBA,EAAarB,cAActS,QAAQ,KAAM,KACxE,IAAI/U,EAAW9C,IAAW+H,MAAK,SAACb,GAAD,OAAYA,EAAO1G,OAASgrB,KAQ3D,GAPqB,SAAjBA,IACCrrB,IAAcC,IAAWE,OAC5BwC,EAAW9C,IAAW+H,MAAK,SAACb,GAAD,MAA4B,cAAhBA,EAAO1G,QACpCL,IAAcC,IAAWwQ,SACnC9N,EAAW9C,IAAW+H,MAAK,SAACb,GAAD,MAA4B,eAAhBA,EAAO1G,WAI9CmgC,GACDxgC,IAAcC,IAAWC,MACzB,CACC+G,IAAK6F,MACL7F,IAAKiG,WACLjG,IAAK2E,KACL3E,IAAKqG,KACLrG,IAAKE,QACLF,IAAKC,SACJrC,SAASwmB,IAEPte,EAAMrB,OAAgC,IAAvBqB,EAAMrB,MAAM3H,OAAc,CAC5C,IAAMshB,EACLgG,IAAiBpkB,IAAKqG,KACnBwN,YAAU,kCACVA,YAAU,iCACdyP,EAAM,MAAYlF,EAGpB,IAAK1iB,EACJ,OAAO4nB,EAER,IAAMlJ,EAAejK,OAAOC,KAAK1U,EAAShC,OAAOmL,QAAO,WAAoB,IAAnB4oC,EAAkB,uDAAZ,GAAIvoC,EAAQ,uCAC1E,MAAM,GAAN,mBAAWuoC,GAAX,YAAmB/xC,EAAShC,MAAMwL,OAChC,IAwCH,OAvCAkV,EAAaiV,SAAQ,SAAC3zB,GACrB,IAAMgyC,EAAkB,WACvBpqB,EAAO5nB,EAAStD,MAAhB,UAA2Byb,YAC1BnY,EAASrD,OAASqD,EAAStD,MAD5B,YAEKyb,YAAU,gBAGdnY,EAASrC,aACTqC,EAASrC,YAAYuE,SAASwmB,KAC7Bte,EAAMpK,EAAStD,OAChBsD,EAASpD,WAAawN,EAAMpK,EAAStD,QAEtCs1C,IAGAhyC,EAASF,eACRE,EAASD,kBACNqK,EAAMpK,EAASF,cAChBsK,EAAMpK,EAASF,iBACjBsK,EAAMpK,EAAStD,QAEZ0N,EAAMqe,kBAEC,CAAC,oBAAoBvmB,SAASlC,EAAStD,OAGjD,CAAC,iBAAiBwF,SAASlC,EAAStD,OACpC0N,EAAMnK,kBALN+xC,IAUEhyC,EAASlD,SACD,IAAIm1C,OAAOjyC,EAASlD,OACvBkhC,KAAK5zB,EAAMpK,EAAStD,QAAWkrB,EAAO5nB,EAAStD,QACtDkrB,EAAO5nB,EAAStD,MAAQyb,YAAUnY,EAASjD,wBAIvC6qB,EAGD,SAAS6X,EAAyBrmB,EAAOzP,GAC/C,IAAMQ,EAAQiP,EAAMxH,QAAQjI,GACtBie,EAASxO,EAAMoP,UAAU7e,IAAY,GACvCQ,IACCA,EAAMpB,OAASoB,EAAMpB,MAAM3H,OAAS,EACnCwmB,EAAO7e,cACH6e,EAAO7e,MAGf6e,EAAO7e,MAAQoP,YAAU,iCAEtB1D,OAAOC,KAAKkT,GAAQxmB,OACvBgY,EAAMoP,UAAU7e,GAAWie,SAEpBxO,EAAMoP,UAAU7e,IAKnB,SAASu2B,EAAiB9mB,EAAO3b,GACxB2b,EAAMoP,UAAU/qB,WAEvB2b,EAAMoP,UAAU/qB,K,gCC3GzB,iHAOa8b,EAAa,CACzB,CACC7c,KAAM,SACNsB,MAAO,CACN,CACCtB,KAAM,QACNC,MAAO,QACPe,KAAM,QACNiP,MAAO,YACPlP,GAAI4O,IAAIC,cAAclC,MACtBjJ,WAAY,QACZuL,QAAS,GAEV,CACChQ,KAAM,SACNgB,KAAM,SACNf,MAAO,SACPgQ,MAAO,aACPlP,GAAI4O,IAAIC,cAAclC,MACtBjJ,WAAY,SACZuL,QAAS,GAEV,CACChQ,KAAM,YACNgB,KAAM,YACNf,MAAO,YACPgQ,MAAO,gBACPlP,GAAI4O,IAAIC,cAAclC,MACtBjJ,WAAY,YACZuL,QAAS,GAEV,CACChQ,KAAM,SACNgB,KAAM,SACNf,MAAO,SACPwE,WAAY,SACZwL,MAAO,mBACPlP,GAAI4O,IAAIC,cAAclC,MACtBsC,QAAS,GAEV,CACChQ,KAAM,YACNC,MAAO,YACPe,KAAMoN,IAAUG,KAChB0B,MAAO,cACPlP,GAAI4O,IAAIC,cAAclC,MACtBjJ,WAAY,SACZsnB,kBAAkB,EAClB/b,QAAS,KAIZ,CACChQ,KAAM,SACNsB,MAAO,CACN,CACCtB,KAAM,QACNgB,KAAMoN,IAAUC,UAChBhC,MAAO,GACP4D,MAAO,YACPlP,GAAI4O,IAAIC,cAAcnC,MACtBhJ,WAAYmD,IAAK6F,MACjB5B,KAAM,GACNqE,OAAQ,OACRF,QAAS,IAEV,CACChQ,KAAM,OACNgB,KAAM4G,IAAK2E,KACX0D,MAAO,iBACP1O,KAAK,EACL8K,MAAO,GACPtL,GAAI4O,IAAIC,cAAcrD,KACtB9H,WAAYmD,IAAK6F,MACjB00B,OAAO,EACPnyB,QAAS,GACT/P,MAAO,OACPqM,QAAS,KACT4D,OAAQ,WAMC4M,EAAc,CAC1B,CACC9c,KAAM,SACNsB,MAAO,CACN,CACCtB,KAAM,SACNgB,KAAMoN,IAAUG,KAChBtO,MAAO,SACPgQ,MAAO,aACPlP,GAAI4O,IAAIC,cAAclC,MACtBi/B,cAAc,EACdloC,WAAY,SACZuL,QAAS,GAEV,CACChQ,KAAM,UACNgB,KAAMoN,IAAUG,KAChBtO,MAAO,UACPgQ,MAAO,cACPlP,GAAI4O,IAAIC,cAAclC,MACtBi/B,cAAc,EACdloC,WAAY,UACZuL,QAAS,GAEV,CACChQ,KAAM,UACNgB,KAAMoN,IAAUG,KAChBtO,MAAO,UACPgQ,MAAO,cACPlP,GAAI4O,IAAIC,cAAclC,MACtBi/B,cAAc,EACdloC,WAAY,UACZuL,QAAS,GAEV,CACChQ,KAAM,UACNgB,KAAMoN,IAAUG,KAChBtO,MAAO,UACPgQ,MAAO,cACPlP,GAAI4O,IAAIC,cAAclC,MACtBi/B,cAAc,EACdloC,WAAY,UACZuL,QAAS,GAEV,CACChQ,KAAM,WACNgB,KAAMoN,IAAUG,KAChBtO,MAAO,YACPgQ,MAAO,eACPlP,GAAI4O,IAAIC,cAAclC,MACtBi/B,cAAc,EACdloC,WAAY,WACZuL,QAAS,GAEV,CACChQ,KAAM,OACNgB,KAAMoN,IAAUG,KAChBtO,MAAO,OACPgQ,MAAO,WACPlP,GAAI4O,IAAIC,cAAclC,MACtBi/B,cAAc,EACdloC,WAAY,OACZuL,QAAS,GAEV,CACChQ,KAAM,OACNgB,KAAMoN,IAAUG,KAChBtO,MAAO,OACPgQ,MAAO,WACPlP,GAAI4O,IAAIC,cAAclC,MACtBi/B,cAAc,EACdloC,WAAY,OACZuL,QAAS,KAIZ,CACChQ,KAAM,oBACNsB,MAAO,CACN,CACCtB,KAAM,YACNgB,KAAMoN,IAAUG,KAChBtO,MAAO,cACPgQ,MAAO,kBACPlP,GAAI4O,IAAIC,cAAclC,MACtBi/B,cAAc,EACdloC,WAAY,cACZuL,QAAS,GAEV,CACChQ,KAAM,YACNgB,KAAMoN,IAAUG,KAChBtO,MAAO,cACPgQ,MAAO,kBACPlP,GAAI4O,IAAIC,cAAclC,MACtBi/B,cAAc,EACdloC,WAAY,cACZuL,QAAS,GAEV,CACChQ,KAAM,aACNgB,KAAMoN,IAAUG,KAChBtO,MAAO,eACPgQ,MAAO,mBACPlP,GAAI4O,IAAIC,cAAclC,MACtBi/B,cAAc,EACdloC,WAAY,eACZuL,QAAS,MAMA4M,EAAe,CAC3B,CACC5c,KAAM,SACNsB,MAAO,CACN,CACCtB,KAAM,SACNgB,KAAMw0C,IAAYn2C,OAClB4Q,MAAO,aACPlP,GAAI4O,IAAIC,cAAclC,MACtBsC,QAAS,IAEV,CACChQ,KAAM,UACNgB,KAAMw0C,IAAYr2C,QAClB8Q,MAAO,cACPlP,GAAI4O,IAAIC,cAAclC,MACtBsC,QAAS,IAEV,CACChQ,KAAM,OACNgB,KAAMw0C,IAAY9mC,KAClBuB,MAAO,WACPlP,GAAI4O,IAAIC,cAAclC,MACtBsC,QAAS,IAEV,CACChQ,KAAM,UACNgB,KAAMw0C,IAAYp2C,QAClB6Q,MAAO,cACPlP,GAAI4O,IAAIC,cAAclC,MACtBsC,QAAS,IAEV,CACChQ,KAAM,UACNgB,KAAMw0C,IAAY51C,QAClBqQ,MAAO,cACPlP,GAAI4O,IAAIC,cAAclC,MACtBsC,QAAS,IAEV,CACChQ,KAAM,OACNgB,KAAMw0C,IAAYh2C,KAClByQ,MAAO,WACPlP,GAAI4O,IAAIC,cAAclC,MACtBsC,QAAS,IAEV,CACChQ,KAAM,OACNgB,KAAMw0C,IAAY91C,KAClBuQ,MAAO,WACPlP,GAAI4O,IAAIC,cAAclC,MACtBsC,QAAS,IAEV,CACChQ,KAAM,WACNgB,KAAMw0C,IAAY/1C,SAClBwQ,MAAO,eACPlP,GAAI4O,IAAIC,cAAclC,MACtBsC,QAAS,IAEV,CACChQ,KAAM,SACNgB,KAAMw0C,IAAYj2C,OAClB0Q,MAAO,aACPlP,GAAI4O,IAAIC,cAAclC,MACtBsC,QAAS,IAEV,CACChQ,KAAM,YACNgB,KAAMw0C,IAAY3mC,UAClBoB,MAAO,kBACPlP,GAAI4O,IAAIC,cAAclC,MACtBsC,QAAS,IAEV,CACChQ,KAAM,aACNgB,KAAMw0C,IAAY7mC,WAClBsB,MAAO,mBACPlP,GAAI4O,IAAIC,cAAclC,MACtBsC,QAAS,IAEV,CACChQ,KAAM,YACNgB,KAAMw0C,IAAY5mC,UAClBqB,MAAO,kBACPlP,GAAI4O,IAAIC,cAAclC,MACtBsC,QAAS,IAEV,CACChQ,KAAM,WACNgB,KAAMw0C,IAAY1mC,SAClBmB,MAAO,iBACPlP,GAAI4O,IAAIC,cAAclC,MACtBsC,QAAS,Q,4RCtSPq6B,EAAgB,CACrB,QACA,OACA,aACA,UACA,OACA,cACA,UACA,gBACA,YACA,eACA,WACA,eACA,UACA,YACA,eACA,SACA,aACA,QACA,MAuED,SAASoL,EAAqBt6B,GAAsC,IAA9Bxa,EAA6B,uDAAjBC,IAAWC,KAC5D,OAAOq0C,EAAgB/5B,EAAQ,GAAI,KAAMxa,GAGnC,SAASw0C,EAAT,GAUH,IATH70B,EASE,EATFA,OACAtf,EAQE,EARFA,KACA2Z,EAOE,EAPFA,SACAoe,EAME,EANFA,OACA/4B,EAKE,EALFA,KACAsB,EAIE,EAJFA,MACAkP,EAGE,EAHFA,YAIMwlB,GADJ,EAFF0f,WAEE,iBACiB,CAAEp1B,WACjB2K,EAAW,GAYf,GAXIza,IAAgB,CAAC,UAAW,YAAa,QAAQhL,SAASxE,KACzDmG,MAAM4O,QAAQvF,GACjBya,EAAWza,EACTnJ,KAAI,SAAC8T,GACL,OAAOs6B,EAAqBt6B,MAE5BzS,QAAO,SAACsL,GAAD,OAAOA,KAEhBiX,EAASvW,KAAK+gC,EAAqBjlC,KAGjCya,EAASvmB,QAAU,CAAC,UAAW,YAAa,QAAQc,SAASxE,GAAO,CACvE,IAAMggC,EAAS,CACdhL,aACAh1B,KAAM,UACNhB,KAAM,SACNirB,SAAU,CACT,CACCjqB,KAAM,UACNhB,KAAMgB,EACNg1B,WAAY,CACXrb,WACAoe,SACA/4B,OACAsB,SAED2pB,cAIH,OAAOxa,KAAKuY,MAAMvY,KAAKC,UAAUswB,KAK5B,SAASkU,EAAgB/5B,GAAsC,IAA9B+pB,EAA6B,uDAArB,GAAUvkC,EAAW,uCACpE,GAAoDwa,EAA5Cpa,GAA4Coa,EAAxClL,MAAwCkL,EAAjC8P,iBAAnB,MAA8B,GAA9B,EAAqC+K,EAArC,YAAoD7a,EAApD,GACMw6B,EAAW,CAChB,QACA,gBACA,gBACA,aACA,cACA,gBACA,SACA,QACA,SACA,YACA,OACA,OACA,UACA,UACA,WAEGvL,EAAM,UAAOC,GACb38B,EACH/M,IAAcC,IAAWwQ,OACtB4F,IAAMi2B,eAAejX,EAAWh1B,MAChC20C,EAASnwC,SAASwwB,EAAWh1B,MAC7Bg1B,EAAWh1B,KACX,QACJ0M,EAAQioC,EAASnwC,SAASwwB,EAAWvxB,YAClCuxB,EAAWvxB,WACXiJ,EACHA,EAAQyN,EAAO5Z,IAAM,aAAemM,EAChC/M,IAAcC,IAAWwQ,SAC5Bg5B,EAAS,CAAC,YAEPpU,EAAWh1B,OAAS4G,IAAKoG,eAC5Bo8B,EAAM,sBAAOA,GAAP,CAAe,QAAS,aAE3B18B,IAAU9F,IAAK2E,OAClB69B,EAAM,sBAAOA,GAAP,CAAe,MAAO,WAEf,WAAV18B,IACH08B,EAAM,sBAAOA,GAAP,CAAe,QAAS,aAE3B18B,IAAU9F,IAAKoG,eAClBo8B,EAAM,sBAAOA,GAAP,CAAe,SAAU,UAE5B,CAACxiC,IAAKqG,KAAMrG,IAAKsG,SAAUtG,IAAKC,QAASD,IAAKE,SAAStC,SAASkI,KACnE08B,EAAM,sBAAOA,GAAP,CAAe,aAElB,CAACxiC,IAAKC,QAASD,IAAKE,SAAStC,SAASkI,KACzC08B,EAAM,sBAAOA,GAAP,CAAe,UAAW,OAAQ,WAErC,CAACxiC,IAAKuG,SAAS3I,SAASkI,KAC3B08B,EAAM,sBAAOA,GAAP,CAAe,UAAW,WAWjC,MARS,CACRpU,WAAW,eACPhf,IAAM01B,eAAe1W,EAAYoU,EAAQzpC,IAE7CK,KAAM,UACNhB,KAAM0N,EACNud,SAAS,GAAD,mBAAMia,GAAN,YAAgBja,KAKnB,SAAS2P,EAAa1lB,EAAS7I,EAAO1L,GAC5C,IAAIyW,EAAO,GACP6T,EAAW,GAef,OAdI5e,EAAM3H,QACT2H,EAAM4qB,SAAQ,SAACzuB,GACd,IAAM2S,EAASjG,EAAQ1M,GACnBotC,EAAW,GACXz6B,IACCA,EAAO9O,OAAS8O,EAAO9O,MAAM3H,SAChCkxC,EAAWhb,EAAa1lB,EAASiG,EAAO9O,MAAO1L,IAEhDsqB,EAASvW,KAAT,eACIwgC,EAAgB/5B,EAAQy6B,EAAUx+B,EAAMzW,SAKxCsqB,I,sOC/KOzO,UAAMC,MA5CrB,YAAsE,IAA7C1b,EAA4C,EAA5CA,GAAIkL,EAAwC,EAAxCA,MAAOmR,EAAiC,EAAjCA,OAAiC,IAAzBjR,aAAyB,SAARC,EAAQ,iBAC9D8e,EAAS9e,EAAK0f,UAAU/qB,IAAO,GACrC,EAAgCyb,IAAM4F,UAAS,GAA/C,mBAAOyzB,EAAP,KAAiBC,EAAjB,KAEMC,EAAmBv5B,IAAM+C,aAAY,SAACvL,GAC3CA,EAAEgiC,kBACFF,GAAY,SAACjlB,GAAD,OAAQA,OAClB,IAEGrV,EAAQq6B,EAAW,OAAS,KAClC,OACC,kBAAC,IAAMxoC,SAAP,KACC,yBACCC,UAAWC,IAAW,cAAe,CACpCC,OAAQrB,KAGT,yBAAKmB,UAAU,qBAAqBkT,QAASu1B,GAC5C,uBAAGzoC,UAAS,wBAAmBkO,MAEhC,8BAAOC,YAAUxP,EAAMhM,OAASgM,EAAMu/B,YACtC,yBAAKl+B,UAAU,qBAAqBkT,QAASu1B,GAC5C,uBAAGzoC,UAAS,wBAAmBkO,OAGhC0P,EAAO7e,QAAUF,GACjB,yBAAKmB,UAAWC,IAAW,yBAA0B2d,EAAO7e,OAE5DwpC,GACA,kBAACl6B,EAAA,EAAD,CACCyB,OAAQA,EACR9P,UAAU,aACVjB,MAAOJ,EAAMI,OAAS,GACtBJ,MAAOA,EACPgB,QAASlM,EACTyD,MAAO4H,EAAK5H,MACZsnB,UAAW1f,EAAK0f,UAChBwlB,UAAWllC,EAAKklC,gBCnBN2E,EApBG,CACjBvoC,MAAO,CAAE2P,UAAWpU,IAAOnJ,MAAO,CAAEwN,UAAW,oBAC/C4oC,WAAY,CACX74B,UAAWpU,IACXnJ,MAAO,CAAEwN,UAAW,yBAErBG,MAAO,CAAE4P,UAAW84B,IAAOr2C,MAAO,CAAEwN,UAAW,UAC/CxF,QAAS,CAAEuV,UAAW84B,IAAOr2C,MAAO,CAAEwN,UAAW,kBACjDW,KAAM,CAAEoP,UAAW8X,EAAMr1B,MAAO,CAAEwN,UAAW,eAC7CzF,QAAS,CAAEwV,UAAW84B,IAAOr2C,MAAO,CAAEwN,UAAW,kBACjD,cAAe,CAAE+P,UAAW84B,IAAOr2C,MAAO,CAAEwN,UAAW,UACvD,gBAAiB,CAAE+P,UAAW84B,IAAOr2C,MAAO,CAAEwN,UAAW,UACzDM,KAAM,CAAEyP,UAAW+R,IAAMtvB,MAAO,CAAEwN,UAAW,gBAC7CwC,WAAY,CAAEuN,UAAW+R,IAAMtvB,MAAO,CAAEwN,UAAW,gBACnD,aAAc,CACb+P,UAAWoQ,IACX3tB,MAAO,CAAEwN,UAAW,sB,gOCZhB1F,EAAOiI,SAGPumC,EAAa,CAElBC,QAFkB,SAEVv2C,GACP,IAAQ4c,EAAU5c,EAAV4c,MACFykB,EAAgC,gBAAhBrhC,EAAM0E,MAE5B,GACCkY,EAAM/b,YAAcC,IAAWC,MAC9BsgC,GACArhC,EAAMyd,eAIR,QACCzd,EAAMiB,KAAO4O,IAAIhC,YACS,IAA1B7N,EAAMmM,MAAMqkC,WACZxwC,EAAMmM,MAAMk5B,SACZrlC,EAAMmM,MAAMjL,OAASs1C,IAAY1oC,OAInC2oC,UArBkB,SAqBRz2C,GACT,IAAMgiB,EAAM,eAAQhiB,GACdsjC,EAAsC,UAA5BthB,EAAO7V,MAAMxH,WAgC7B,OA9BC3E,EAAM4c,MAAM/b,YAAcC,IAAWE,QACrB,gBAAhBhB,EAAM0E,MAENsd,EAAO7V,MAAP,2BACI6V,EAAO7V,OADX,IAECoE,MAAO,oCACPC,WAAY,QACZE,YAAaC,KAAKC,UAAU,CAC3BV,QAASS,KAAKuY,MAAMlH,EAAO7V,MAAMuE,aAAe,MAAMR,QACtDW,WAAYyyB,MAGJtjC,EAAM4c,MAAM/b,YAAcC,IAAWC,OAC3CihB,EAAO7V,MAAM0gC,eAChB7qB,EAAO7V,MAAP,uCACI6V,EAAO7V,OACsB,UAA5B6V,EAAO7V,MAAMxH,YAA0B,CAC1CzD,KAAM8gB,EAAO7V,MAAMxH,aAHrB,IAKCA,WAAY,WAGdqd,EAAO7V,MAAP,2BACI6V,EAAO7V,OADX,IAECuE,YAAaC,KAAKC,UAAU,CAC3BC,WAAYyyB,OAIftjC,EAAMmvB,OAAOnvB,EAAMiB,GAAI,CAAEjB,MAAOgiB,IACzB,eAAKhiB,IAIb02C,QA3DkB,SA2DV12C,EAAO22C,GAGd32C,EAAMmvB,OAAO,KAAM,CAClBoT,OAAQoU,EAAQC,UAChB52C,MAAO,GACP62C,SAAUF,EAAQvX,aAIpBhzB,WArEkB,SAqEPpM,EAAO22C,GACjB,OAAO32C,EAAMiB,KAAO01C,EAAQvX,UAAUn+B,KAKlC61C,EAAa,CAGlBC,MAHkB,SAGZ/2C,EAAO22C,GACZ,MAKIA,EAAQvX,UAJJ4X,EADR,EACCjqC,MACSkqC,EAFV,EAEC9pC,QACI+pC,EAHL,EAGCj2C,GACOk2C,EAJR,EAIChrC,MAGOirC,EAOJp3C,EAPH+M,MACSsqC,EAMNr3C,EANHmN,QACImqC,EAKDt3C,EALHiB,GACOs2C,EAIJv3C,EAJHmM,MACAyQ,EAGG5c,EAHH4c,MACA3P,EAEGjN,EAFHiN,KACAoiB,EACGrvB,EADHqvB,aAEKmoB,EAAW,CAChBhB,IAAY7oC,MACZ6oC,IAAYxoC,aACZwoC,IAAYvoC,aACZuoC,IAAYtoC,cAEPmzB,EAAgC,gBAAhBrhC,EAAM0E,MACtB0Q,EACW,gBAAhBpV,EAAM0E,MAA0BkY,EAAMmP,mBAAqBnP,EAAMxH,QAC5DvN,EAAc7H,EAAMmN,QAAUiI,EAAQpV,EAAMmN,SAAW,KAM7D,GAAKF,EAAL,CACA,GAAIkqC,EAAUj2C,OAASs1C,IAAY/pC,KAAM,CACxC,GAAiB,IAAbQ,EAAKwY,MAAc0xB,EAAU9U,MAAO,OACxC,GAAIp1B,EAAKwC,KAAM,CACd,IAAIgoC,EAAW1V,KAAKnyB,IAAL,MAAAmyB,KAAI,YAAQ90B,EAAKwC,KAAKlI,KAAI,SAAC8d,GAAD,OAAOA,EAAEsiB,cAClD,GAAI16B,EAAKwY,IAAMgyB,EACd,QAMH,GAAIN,EAAUj2C,OAASs1C,IAAY7oC,MAAO,CACzC,IAAQ8B,EAAcxC,EAAdwC,KAAMgW,EAAQxY,EAARwY,IACRiyB,EAAUjoC,GAAQA,EAAKhH,MAAK,SAACI,GAAD,OAAOA,EAAE3H,OAASs1C,IAAY/pC,QAChE,GAAIirC,GAAWA,EAAQ/P,SAAWliB,EACjC,OAKF,GAAI7I,EAAM/b,YAAcC,IAAWC,MAASsgC,EAA5C,CAGA,GAAIzkB,EAAM/b,YAAcC,IAAWwQ,OAAQ,CAC1C,GAAI,CAACklC,IAAYxuC,QAASwuC,IAAYzuC,SAASrC,SAASyxC,EAAUj2C,MAAO,CACxE,IAGMy2C,EAHM1/B,OAAOG,OAAOwE,EAAMxH,SAAW,IAAI3M,MAAK,SAAC2U,GAAD,MACnD,CAACo5B,IAAYxuC,QAASwuC,IAAYzuC,SAASrC,SAAS0X,EAAElc,SAEhC,EAAI,EAC3B,GAAIm2C,EAAc,OAClB,IAAKpqC,EAAM,OACX,GAAIA,EAAKwY,IAAMkyB,GAAyB,IAAb1qC,EAAK6hC,IAAW,OAE5C,IACElyB,EAAM/b,YAAcC,IAAWE,QAAUqgC,IAC1C,CAACmV,IAAYxuC,QAASwuC,IAAYzuC,SAASrC,SAC1CyxC,EAAUxyC,YAGX,OAED,IACE,CAAC6xC,IAAYpoC,SAAUooC,IAAYroC,KAAMqoC,IAAYnoC,SAAS3I,SAC9DyxC,EAAUxyC,aAEXkD,GACAA,EAAY3G,OAASs1C,IAAYroC,KAEjC,OAED,GACC,CAACqoC,IAAYpoC,SAAUooC,IAAYnoC,SAAS3I,SAC3CyxC,EAAUxyC,eAETkD,GAAeA,EAAY3G,OAASs1C,IAAYroC,MAElD,OAED,GACC,CAACqoC,IAAYroC,MAAMzI,SAASyxC,EAAUxyC,eACpCkD,IACA,CAAC2uC,IAAYroC,KAAMqoC,IAAYxuC,SAAStC,SAASmC,EAAY3G,OAE/D,OAED,GACC2G,GACAA,EAAY3G,OAASs1C,IAAYxuC,SACjCmvC,EAAUj2C,OAASs1C,IAAYroC,KAE/B,OAED,GACCtG,GACAA,EAAY3G,OAASs1C,IAAYzuC,SACjCovC,EAAUj2C,OAAS+N,IAAWpP,OAE9B,OAED,IACEgI,IACA,UACG2vC,EADH,CAEAhB,IAAY/pC,KACZ+pC,IAAYzoC,WACZyoC,IAAYxuC,QACZwuC,IAAYzuC,UACXrC,SAASyxC,EAAUj2C,MAErB,OAGD,GACC2G,GACAA,EAAY3G,OAASs1C,IAAYzoC,aAChCypC,EAAS9xC,SAASyxC,EAAUj2C,MAE7B,OAED,GACC2G,GACAA,EAAY3G,OAASs1C,IAAY/pC,OAChC+qC,EAAS9xC,SAASyxC,EAAUj2C,MAE7B,OAED,GACC0b,EAAM/b,YAAcC,IAAWE,QACf,gBAAhBhB,EAAM0E,MACL,CAED,GACC,CACC8xC,IAAYxoC,aACZwoC,IAAYtoC,aACZsoC,IAAYvoC,aACZuoC,IAAYzoC,YACXrI,SAASyxC,EAAUj2C,MAErB,OAGD,IAAMkU,EACW,gBAAhBpV,EAAM0E,MACHkY,EAAMmP,mBACNnP,EAAMxH,QACJwiC,EACW,gBAAhB53C,EAAM0E,MAA0BkY,EAAM2S,iBAAmB3S,EAAMrQ,MAKhE,IADQ,IAFP0L,OAAOC,KAAK9C,GAAS+H,WACpB,SAAC06B,GAAD,OAAeziC,EAAQyiC,GAAW32C,OAASs1C,IAAY/pC,SAIxD0qC,EAAUj2C,OAASs1C,IAAY/pC,MAC/B0qC,EAAU9U,MAEV,OAED,GACC,CAACmU,IAAY7oC,MAAO6oC,IAAY/pC,MAAM/G,SAASyxC,EAAUj2C,OACzDlB,EAAMmN,UACLyqC,EAAWlyC,SAAS1F,EAAMmN,SAE3B,OAGD,GACCtF,GACAsvC,EAAUj2C,OAASs1C,IAAY7oC,OAC/B9F,EAAY3G,OAASs1C,IAAY/pC,KAEjC,OAED,GACC5E,GACAsvC,EAAUj2C,OAASs1C,IAAY/pC,MAC/B5E,EAAY3G,OAASs1C,IAAY7oC,MAEjC,OAED,IACA,EADsBiP,EAAd4jB,UACA9vB,mBAAR,MAAsB,KAAtB,EACM+xB,EAAS9xB,KAAKuY,MAAMxY,GAE1B,GACC7I,GACAsvC,EAAUj2C,OAASs1C,IAAY7oC,OAC/B9F,EAAY3G,OAASs1C,IAAY/pC,OAChCg2B,EAAOhhC,IAER4tB,EAAa,CACZlvB,MAAOg3C,EAAUh3C,OAASwb,YAAU,OACpCjL,YAAaC,KAAKC,UAAU,CAAEnP,IAAK,gBAE9B,IACLoG,GACDsvC,EAAUj2C,OAASs1C,IAAY7oC,OAC/B80B,EAAOhhC,IACN,CACD,IAAM0K,EAAQwE,KAAKuY,MAAMiuB,EAAUzmC,aAAe,MAClD2e,EAAa,CACZlvB,MAAOg3C,EAAUh3C,MACjBuQ,YAAaC,KAAKC,UAAL,2BAAoBzE,GAApB,IAA2B1K,IAAK,mBAI/C,GAAIzB,EAAMmN,QAAS,CAClB,IAAMtF,EAAcuN,EAAQpV,EAAMmN,SAClC,GACCtF,GACA,CAAC2uC,IAAY/pC,KAAM+pC,IAAYzoC,YAAYrI,SAASyxC,EAAUj2C,MAE9D,OAED,GACC,CACCs1C,IAAYxoC,aACZwoC,IAAYvoC,aACZuoC,IAAYtoC,cACXxI,SAASmC,EAAY3G,MAEvB,OAIH,IAA8B,IAA1Bi2C,EAAU35B,aAAyC,gBAAhBxd,EAAM0E,MAC5C,OAOF,KACE0yC,IAAeJ,GAAaC,IAAgBI,IACvB,SAApBE,EAAWr2C,MAAmBq2C,EAAWt2C,IAAO,IAAIU,QAAQu1C,IAC5D,IACDC,EAAU5qC,OAAS,IAAI5K,QAAQ21C,IAAY,IAC3CX,EAAQmB,OAAO,CAAEC,SAAS,KAC1BZ,EAAUj2C,OAASs1C,IAAY5oC,OAC/B2pC,EAAWr2C,OAASs1C,IAAY1oC,MAChCqpC,EAAUj2C,OAASs1C,IAAY5oC,YAAyB0C,IAAhBtQ,EAAMqN,OAC9CrN,EAAM4c,MAAMqS,aACZjvB,EAAM4c,MAAMqS,YAAYhuB,KAAOq2C,GAC/Bt3C,EAAM4c,MAAMqS,YAAYliB,QAAUqqC,GAClCp3C,EAAM4c,MAAMqS,YAAY9hB,UAAYkqC,GAZtC,CAkBA,GAAIH,IAAWl3C,EAAM4c,MAAMoS,WAC1B,IACC,GAAIkoB,IAAWC,EAAU9U,OAAS4U,IAAgBI,IAC7CL,EAAY,IAAMI,GAAcJ,EAAY,IAAMI,GAErD,YADAp3C,EAAM4c,MAAMqS,aAAejvB,EAAMovB,QAAQ,OAIvBpvB,EAAMkvB,OACzB,CACC+J,OAAQ,CACP9rB,QAAS8pC,EACTlqC,MAAOiqC,EACP/1C,GAAIi2C,EACJ/qC,MAAOgrC,GAERlV,YAAa,CACZ90B,QAASkqC,EACTtqC,MAAOqqC,EACPn2C,GAAIq2C,EACJnrC,MAAOorC,EACP7yC,MAAO1E,EAAM0E,SAGf,EACA1E,EAAM0E,OAjBCy9B,SAmBOniC,EAAMovB,QACpBpvB,EAAMovB,QAAQ,CACbniB,KAAMjN,EAAMiN,MAAQ,GACpBhM,GAAIq2C,EACJvqC,MAAOqqC,EACPjqC,QAASkqC,EACTx8B,UACC7a,EAAMoN,cACuB,MAA5B,UAAGpN,EAAMoN,eACT,UAAGpN,EAAMoN,gBAAT,UAA+B+pC,EAAUjnC,eAC1BI,IAAhBtQ,EAAMqN,MAEH,UADA,MAEJlB,MAAOorC,EACP7yC,MAAO1E,EAAM0E,QAGd1E,EAAM4c,MAAMqS,aAAejvB,EAAMovB,QAAQ,MAEzC,MAAOlb,IAGV,GAAIrM,GAAeA,EAAY6I,YAAa,CAC3C,IAAIsnC,EAAoBrnC,KAAKuY,MAAMrhB,EAAY6I,aAAe,MAC1DunC,EAAuBtnC,KAAKuY,MAAMiuB,EAAUzmC,aAAe,MAC3DsnC,EAAkBlnC,WAAamnC,EAAqB/nC,SACvDmf,EAAa,CACZnf,QAAS8nC,EAAkBlnC,iBAOhC,SAASjN,EAAO7D,GACf,IACCiB,EAeGjB,EAfHiB,GACAmL,EAcGpM,EAdHoM,WACA8rC,EAaGl4C,EAbHk4C,kBACAC,EAYGn4C,EAZHm4C,kBACAC,EAWGp4C,EAXHo4C,YACAC,EAUGr4C,EAVHq4C,QACAhrC,EASGrN,EATHqN,MACAG,EAQGxN,EARHwN,UACW8qC,EAORt4C,EAPHud,UACApR,EAMGnM,EANHmM,MACAyQ,EAKG5c,EALH4c,MACAnI,EAIGzU,EAJHyU,OACAoX,EAGG7rB,EAHH6rB,eAbD,EAgBI7rB,EAFHgsB,iBAdD,MAca,GAdb,EAeI1f,EAfJ,YAgBItM,EAhBJ,GAiBQgvB,EAAepS,EAAfoS,WACFoT,EACU,gBAAf91B,EAAK5H,MAA0BkY,EAAMmP,mBAAqBnP,EAAMxH,QAGjEsH,IAAMqB,WAAU,WACftJ,GAAO,SAACS,GACPA,EAAM+Z,cAAgB/Z,EAAM+Z,YAAYspB,QAAUF,QAEjD,CAAC5jC,EAAQ4jC,EAASp3C,EAAI+tB,EAAY7iB,IAErC,IAAIqsC,EAAgBC,EAAStsC,EAAMjL,OAASu3C,EAAS7qC,MAEjDtB,EAAKD,QAAUosC,EAAStsC,EAAMjL,QACjCs3C,EAAgBC,EAAQ,OAGzB,MACCD,EADgBvsC,EAAjB,EAAMsR,UAAN,IAAkCvd,MAAO04C,OAAzC,MAA0D,GAA1D,EAGIJ,IACHrsC,EAAkBqsC,GAGnB,IAAIK,GAAc,EACd1gC,OAAOG,OAAOvI,IAAIC,eAAenO,QAAQV,IAAO,IACnD03C,GAAc,EACdR,EAAoB,SAACjkC,GAAD,OAAOA,IAE5B,IAAM0kC,EAASD,GAAe/7B,EAAMkP,aAAe7qB,EAC7C43C,OAAwBvoC,IAAVjD,EACdyrC,IAAqBD,IAAevsC,EAAKD,MACzC0sC,EACLJ,GACA1uB,OAAOhpB,GAAM,IACZ63C,GACDxsC,EAAKgR,SACc,IAAnBhR,EAAKklC,UAON,OALCsH,GACC73C,GAAMA,IAAO4O,IAAI/B,MAAsB,kBAAP7M,IAAoBkL,EAAMk5B,WAE3D8S,EAAoB,SAACjkC,GAAD,OAAOA,KAEN,IAAlB/H,EAAM6sC,UAAuB1sC,EAAKgR,QAAUzN,IAAIhC,UAAmB,KAEtE,kBAAC,IAAMN,SAAP,KACE2qC,EACAC,EACC,yCACKO,EADL,CAEClrC,UAAWC,IACVD,EACA,SACAkrC,EAAelrC,UACf,CACC,eAAgBrB,EAAMk5B,QACtB4T,KAAML,EACNR,YAAaA,EACbC,QAASA,EACTa,OAAQP,GAAevsC,EACvB,aAAcusC,EACd,cAA8B,UAAfxsC,EAAMjL,KACrB,kBACgB,UAAfiL,EAAMjL,OAAqBoL,EAAKD,QAAUF,EAAMhM,MAEjD,cAAegpB,QAAQ6C,EAAU/qB,IACjC,gBAAiBqL,EAAKmR,iBAGxB/Y,MAAO4H,EAAK5H,MACZgc,QAAS,SAACxM,GACLykC,GAAersC,EAAKyiB,WACvB7a,EAAEgiC,kBACFj1C,IAAO4O,IAAIhC,WAAavB,EAAKyiB,SAAS9tB,EAAIqL,EAAK5H,QAE5Cm0C,IACH3kC,EAAEgiC,kBACEj1C,IAAO4O,IAAIhC,WAAau0B,EAAS/0B,IACpCwe,EAAexe,EAAO,CACrBb,QAASvL,EACTyD,MAAO4H,EAAK5H,aAMdo0C,GACDl8B,EAAMqS,aACQ,kBAAPhuB,GACPgpB,OAAOhpB,IAAO,GACd2b,EAAMqS,YAAYliB,QAAUT,EAAKS,QACH,IAA9B6P,EAAMqS,YAAYspB,SAClB37B,EAAMqS,YAAY9hB,UAAYb,EAAKa,SAClC,yBACCK,UAAWC,IACV,cACA,CAAE,eAAgBtB,EAAMk5B,SAAkB,IAAPpkC,GACnC2b,EAAMqS,YAAYpU,YAIrB5O,GACA,kBAACA,EAAD,eACChL,GAAIA,EACJmL,WAAYwQ,EAAMoS,aAAe/tB,EACjCkL,MAAOA,EACPzH,MAAO4H,EAAK5H,MACZsnB,UAAWA,EACXwlB,UAAWllC,EAAKklC,UAChBhB,UAAWrkC,EAAMjL,OAASs1C,IAAYxuC,SAClCsE,IAGLysC,IAAen8B,EAAMoS,YACrB,0BACCtO,QAAS,SAACxM,GACL5H,EAAK42B,WACRhvB,EAAEgiC,kBACF5pC,EAAK42B,SAAS52B,EAAKa,QAASb,EAAKS,MAAO9L,EAAIqL,EAAK5H,SAGnD8I,UAAU,gBACVrN,MAAOwb,YAAU,kBAEjB,uBAAGnO,UAAU,sBAUrB,IAAM2rC,EAAe,SAACn5C,GAAD,OACpB,kBAAC6D,EAAD,iBACK7D,EADL,CAECm4C,kBAAmB,SAACjkC,GAAD,OAAOA,GAC1BgkC,kBAAmB,SAAChkC,GAAD,OAAOA,OAItBklC,EAAkBC,YACvBC,YAAWxxC,EAAMgvC,GAAY,SAACyC,EAAS5C,GAAV,MAAuB,CACnDyB,aAAa,EACbC,QAAS1B,EAAQmB,SACjBK,kBAAmBoB,EAAQC,iBAE5BC,YAAW3xC,EAAMwuC,GAAY,SAACiD,EAAS5C,GAAV,MAAuB,CACnDuB,kBAAmBqB,EAAQG,aAC3BttC,WAAYuqC,EAAQvqC,iBAREitC,CAUtBx1C,GAEWoI,EAAkB,SAACjM,GAC/B,IAAM4uB,EAAQ/R,cACND,EAAUgS,EAAVhS,MACFwlB,EACW,gBAAhBpiC,EAAM0E,MAA0BkY,EAAMmP,mBAAqBnP,EAAMxH,QAC5DjJ,EACLi2B,GAAYA,EAASpiC,EAAMiB,IAAMmhC,EAASpiC,EAAMiB,IAAMjB,EAAMmM,OAAS,GAChE6V,EAAM,2BAAQ4M,GAAR,IAAeziB,UACrBqkC,EAAYrkC,EAAMjL,OAASs1C,IAAYxuC,QAE7C,OAAIhI,EAAMsd,QAAUkzB,EACZ,kBAAC4I,EAAD,iBAAqBp3B,EAAYhiB,IAClC,kBAAC,EAAD,iBAAkBgiB,EAAYhiB,KAGvB0c,cAAMC,KAAK1Q,I,wIC3hBX0tC,IA1Df,YAA6E,EAApDxtC,MAAqD,IAAD,IAAxCI,aAAwC,MAAhC,GAAgC,EAA5B+Q,EAA4B,EAA5BA,OAAQlI,EAAoB,EAApBA,QAAY9I,EAAQ,iBAEtEstC,EAAYl9B,IAAMizB,SAAQ,WAC/B,IAAM/9B,EAAUrF,EAAM3D,QACrB,SAACiwB,GAAD,OAAOzjB,EAAQyjB,IAAM,CAAC,QAAQ,GAAMnzB,SAAS0P,EAAQyjB,GAAGjnB,YAEnDioC,EAAYttC,EAAM3D,QACvB,SAACiwB,GAAD,OAAOzjB,EAAQyjB,KAAO,CAAC,QAAQ,GAAMnzB,SAAS0P,EAAQyjB,GAAGjnB,YAI1D,OAFmBA,EAAQhN,OAAS,EAGjC,CACA2H,MAAO,CACN,CACC6D,OAAQd,IAAWG,KACnBlD,MAAOstC,EACP3pC,QAAS,GAEV,CACCE,OAAQd,IAAWG,KACnBlD,MAAOqF,EACP1B,QAAS,KAIX,CACA3D,MAAO,CACN,CACC6D,OAAQd,IAAWG,KACnBlD,MAAOstC,EACP3pC,QAAS,QAIZ,CAAC3D,EAAO6I,IAEX,OACC,yBAAK5H,UAAU,kBACbosC,EAAUrtC,MAAMhF,KAAI,WAA+BE,GAA/B,IAAG8E,EAAH,EAAGA,MAAO2D,EAAV,EAAUA,QAAY/D,EAAtB,wBACpB,yBAAKqB,UAAS,yBAAoB0C,GAAWlD,IAAKvF,GACjD,kBAAC,IAAD,CACCuF,IAAKvF,EACL6V,OAAQA,EACR9P,UAAU,YACVjB,MAAOA,EACPJ,MAAOA,EACPzH,MAAO4H,EAAK5H,MACZ0Q,QAASA,EACT4W,UAAW1f,EAAK0f,UAChBwlB,UAAWllC,EAAKklC,mB,0JCrDhB1+B,EAAkB,IAAIL,IAAc,CACzClC,MAAO,gCAEFupC,EAAkB,CAAC,QAAS,QAAS,SAAU,UAE/CC,EAAa,SAACrxC,GACnB,OACEoxC,EAAgBp0C,SAASgD,EAAKxH,OAASwH,EAAKsxC,gBAAkBtxC,EAAKiJ,QAwIvDsoC,MApIf,YAAiD,IAAd9tC,EAAa,EAAbA,MAAOlL,EAAM,EAANA,GACzC,EAOIkL,GAAS,GANZgY,EADD,EACCA,SACa3D,EAFd,EAECuC,YACA5iB,EAHD,EAGCA,MACAurC,EAJD,EAICA,UACAl1B,EALD,EAKCA,OACA0jC,EAND,EAMCA,gBAED,EAAkC53B,mBAAS,IAA3C,mBAAO63B,EAAP,KAAkBC,EAAlB,KACA,EAAkC93B,mBAAS,MAA3C,mBAAO+3B,EAAP,KAAkBC,EAAlB,KA8FA,OA5FAv8B,qBAAU,WAAM,4CACf,sCAAArK,EAAA,yDACK64B,EAAWpoB,GACX3N,EAFL,uBAMQpX,EAAO,CACZoX,SACAjG,MAAO,gCACPnR,KAAM,CACLqX,QAPe,CAChBF,IAAK,QAJR,SAc6BzD,EAAgB0D,OAAOpX,GAdpD,QAcQm7C,EAdR,QAgBgBn7C,MACbm7C,EAAan7C,KAAK,IAClBm7C,EAAan7C,KAAK,GAAGkY,MACrBijC,EAAan7C,KAAK,GAAGkY,KAAKG,QAEpBH,EAAOijC,EAAan7C,KAAK,GAAGkY,KAAKG,MAAMhP,MAC5C,SAACub,GAAD,MAAkB,SAAXA,EAAE9iB,WAGTqrC,EAAWj1B,EAAKpX,MAzBpB,WA6BKg6C,EA7BL,oBA+BOA,EAAgBh6C,OAAQg6C,EAAgBj5C,GA/B/C,kCAgCiByV,YAAiBwjC,EAAgBj5C,IAhClD,QAgCGsP,EAhCH,eAkCEg8B,EAAWnoB,YACV7T,GAAS2pC,GACT,GACA,GArCH,QAwCOtkC,EAAU,CACfrF,MAAOiQ,EACPphB,KAAM,CACL8B,KAAM,OACNhB,KAAMqsC,IAGJA,EACHz5B,EAAgBwE,KAAK1B,GAASb,MAAK,SAACnB,GACnC,GAAIA,EAAIxU,MAAQwU,EAAIxU,KAAKkY,KAAM,CAC9B,MAA8B1D,EAAIxU,KAAKkY,KAAvC,IAAQ/K,aAAR,MAAgB,GAAhB,EAAoBpM,EAApB,EAAoBA,MAEpB,GADAm6C,EAAan6C,GACT+5C,EAAiB,CACpB,IAAMC,EAAY,GAUlB,OATA5tC,EAAM4qB,SAAQ,SAACzuB,GACd,MAA4BA,EAApB8xC,iBAAR,MAAqB,GAArB,GACWrjB,SAAQ,SAAC1vB,GACfsyC,EAAWtyC,IACd0yC,EAAUvlC,KAAKnN,cAIlB2yC,GAAa,8BAAWD,GAAa,OAGtC,MAAwCvmC,EAAIxU,KAA5C,IAAQ0U,cAAR,MAAiB,GAAjB,MAAqB2mC,iBAArB,MAAiC,GAAjC,EACIC,EAAgB,GACpB5mC,EAAOqjB,SAAQ,SAACvpB,GACf8sC,EAAc9sC,EAAM1N,MAAQ0N,EAAMzN,SAEnC,IAAMw6C,EAAYpuC,EAAMhF,KAAI,SAACE,GAC5B,OAAO,2BAAKA,GAAZ,IAAetH,MAAOu6C,EAAcjzC,EAAEvH,WAGnCu6C,GAAaA,EAAU71C,OAAS,GACnC61C,EAAUtjB,SAAQ,SAAC1vB,GACdsyC,EAAWtyC,IACdkzC,EAAU/lC,KAAKnN,MAIlB2yC,EAAaO,OAIfP,EAAa,IArFf,6CADe,uBAAC,WAAD,wBAyFf7U,KACE,CAACphB,EAAU3D,EAAQ05B,EAAiBj5C,EAAIuV,IAG1C,6BACC,yBAAKhJ,UAAU,sBACd,8BAAOmO,YAAUxb,GAASk6C,GAAa3O,KAExC,+BACC,2BAAOl+B,UAAU,mBACf,YAAInG,MAAM,IAAIE,KAAI,SAAC2M,EAAGnH,GAAJ,OAClB,wBAAIiP,MAAO,CAAElC,QAAS,QAAU9M,IAAG,cAASD,IAC1CotC,EAAU5yC,KAAI,SAACmB,EAAMjB,GAAP,OACd,wBACC+F,UAAU,yCACVR,IAAG,aAAQvF,GACXuU,MAAO,CAAE2C,aAAwB,IAAV5R,EAAc,iBAAmB,KAE7C,IAAVA,GAAerE,EACbiT,YAAUjT,EAAKvI,OAASuI,EAAKgjC,WAC7B,e,yCC3GCkP,EAAY,SAAC56C,GACzB,OACC,yCAAOkB,KAAK,OAAOsgB,aAAa,OAAUxhB,EAA1C,CAAiDwN,UAAU,iBAKhDqtC,EAAiB,SAAC76C,GAC9B,OAAO,4CAAU0vC,KAAM,GAAO1vC,KAIlB86C,EAAS,SAAC96C,GAAD,OAAW,yBAAKwN,UAAU,YAEnCutC,EAAY,SAAC/6C,GAAD,OACxB,yBAAKwN,UAAU,UACd,wBAAIA,UAAU,sBAIH2b,EAAU,SAAC,GAAD,IAAGW,EAAH,EAAGA,WAAe9pB,EAAlB,wBACtB,yBAAKwN,UAAU,mBACd,2CAAWsc,EAAX,CAAuB5oB,KAAK,cAC5B,0BAAMsM,UAAU,eAAerN,MAAOwb,YAAU3b,EAAMG,OAASH,EAAME,OACnEyb,YAAU3b,EAAMG,OAASH,EAAME,SAMtBmhB,EAAS,SAAC,GAAD,IAAGlhB,EAAH,EAAGA,MAAUH,EAAb,wBACrB,yBAAKwN,UAAU,oBACd,4CAAYxN,EAAZ,CAAmBwN,UAAU,cAAcrN,MAAOwb,YAAUxb,KAC1Dwb,YAAUxb,MAKD66C,EAAW,SAAC,GAAD,IAAG76C,EAAH,EAAGA,MAAH,wBACvB,yBAAKqN,UAAU,uBAAuBmO,YAAUxb,KAGpC86C,EAAS,SAAC,GAAmC,IAAjCx+B,EAAgC,EAAhCA,MAAOxC,EAAyB,EAAzBA,WAAYihC,EAAa,EAAbA,OAC3C,OACC,yBACC1tC,UAAWC,IAAW,mCAAD,OACewM,EADf,wBACyCwC,GAC7D,CAAE,gBAAiBy+B,KAHrB,WA6Fa5/B,IA9Ef,YAAwC,IAAdra,EAAa,EAAbA,GAAIkL,EAAS,EAATA,MAE7B,GAAIlL,IAAO4O,IAAIhC,UACd,OAAO,yBAAKL,UAAU,eAGvB,IAxFyBxN,EAwFjBE,EAAgEiM,EAAhEjM,KAAMC,EAA0DgM,EAA1DhM,MAAOwE,EAAmDwH,EAAnDxH,WAAYsN,EAAuC9F,EAAvC8F,UAAW/Q,EAA4BiL,EAA5BjL,KAAMwqC,EAAsBv/B,EAAtBu/B,UAAWrwB,EAAWlP,EAAXkP,OACvDyO,GAzFmB9pB,EAyFWmM,EAxFpB,CACf,OACA,QACA,eACA,cACA,WACA,UACA,WACA,OACA,YAGcQ,QAAO,SAACkgB,EAAKoL,GAK3B,YAJoB3nB,IAAhBtQ,EAAMi4B,KAAqBpL,EAAIoL,GAAQj4B,EAAMi4B,IACpC,aAATA,IACHpL,EAAIoL,GAAwB,SAAhBj4B,EAAMi4B,IAEZpL,IACL,KAuECnoB,EACHC,GAA6B,UAAfA,EAAyBA,EAAWkmB,cAAgB3pB,EAC7Di6C,EAAgB,kBACrB,kBAAC,IAAM5tC,SAAP,KAEE,2BACCC,UAAU,eACVrN,MAAOwb,YAAUxb,GAASgM,EAAMu/B,WAAaxrC,IAE5Cyb,YAAUxb,GAASgM,EAAMu/B,WAAaxrC,IAGxC+R,EACA,kBAAC,EAAmB6X,GACA,UAAjB3d,EAAMkP,OACT,yBACC+/B,IAAKj7C,GAASgM,EAAMu/B,WAAaxrC,EACjCm7C,IAAI,yBACJ7tC,UAAU,iBAGX,kBAAC,EAAD,eACCtM,KAAMyD,IAAesK,IAAWC,OAAS,SAAW,QAChD4a,MAMR,cAAQplB,QAAR,IAAQA,OAAR,EAAQA,EAAOmmB,eACd,KAAK5b,IAAW5P,QACf,OACC,kBAAC,EAAD,CACCc,MAAOA,GAASurC,EAChBxrC,KAAMA,EACN4pB,WAAYA,IAGf,KAAK7a,IAAWE,OACf,OAAO,kBAAC,EAAD,MACR,KAAKF,IAAWI,OACf,OAAO,kBAAC,EAAWlD,GACpB,KAAK8C,IAAWG,UAChB,KAAKtH,IAAKuG,QACT,OAAO,kBAAC,EAAD,MACR,KAAKvG,IAAKsG,SACT,OAAO,kBAAC,EAAD,CAAUjO,MAAOA,IACzB,KAAK8O,IAAWpP,OACf,OAAO,kBAAC,EAAD,iBAAYiqB,EAAZ,CAAwB3pB,MAAOA,GAASD,KAChD,IAAK,YACL,IAAK,QACJ,OAAO,0BAAMw8B,wBAAyB,CAAEC,OAAQx8B,KAEjD,IAAK,gBACL,IAAK,gBACL,IAAK,cACL,IAAK,mBACJ,OAAO,kBAAC,EAAD,CAAyBgM,MAAOA,EAAOlL,GAAIA,IACnD,IAAK,eACL,IAAK,oBACJ,MAAkB,cAAXoa,EACN,kBAAC,EAAD,CAAyBlP,MAAOA,EAAOlL,GAAIA,IAE3C,kBAACk6C,EAAD,MAEF,QACC,OAAO,kBAACA,EAAD,U","file":"static/js/main.1ad08f16.chunk.js","sourcesContent":["const selectWidget = [\n\t\"NavSelect\",\n\t\"CheckboxSelect\",\n\t\"RadioSelect\",\n\t\"MultiSelect\",\n\t\"ImageSelect\",\n];\nconst data = {\n\tboolean: [\n\t\t\"InlineCheckbox\",\n\t\t\"Toggle\",\n\t\t\"BooleanSelect\",\n\t\t\"BooleanRadio\",\n\t\t\"BooleanSwitch\",\n\t\t...selectWidget,\n\t],\n\tinteger: [\n\t\t\"RelativeTime\",\n\t\t\"Duration\",\n\t\t\"Progress\",\n\t\t\"SelectProgress\",\n\t\t...selectWidget,\n\t],\n\tstring: [\n\t\t\"Email\",\n\t\t\"Url\",\n\t\t\"Password\",\n\t\t\"Html\",\n\t\t\"CodeEditor\",\n\t\t\"ImageLine\",\n\t\t...selectWidget,\n\t],\n\ttext: [\"Html\", \"CodeEditor\", ...selectWidget],\n\t\"many-to-one\": [\"SuggestBox\", \"Image\", \"binary-link\"],\n\t\"json-many-to-one\": [\"SuggestBox\", \"Image\", \"binary-link\"],\n\t\"one-to-one\": [\"SuggestBox\", \"Image\"],\n\t\"json-one-to-one\": [\"SuggestBox\", \"Image\"],\n\t\"many-to-many\": [\"TagSelect\"],\n\t\"json-many-to-many\": [\"TagSelect\"],\n\tbinary: [\"Image\", \"BinaryLink\", ...selectWidget],\n\tdate: [...selectWidget],\n\tdatetime: [...selectWidget],\n\ttime: [...selectWidget],\n\tbutton: [\"Button\", \"InfoButton\", \"ToolButton\"],\n\tdecimal: [\n\t\t\"RelativeTime\",\n\t\t\"Duration\",\n\t\t\"Progress\",\n\t\t\"SelectProgress\",\n\t\t...selectWidget,\n\t],\n};\n\nexport default data;\n","import {\n\tStringField,\n\tObjectSelectionField,\n\tIntegerField,\n\tSelectField,\n\tStaticSelectField,\n\tBooleanField,\n} from \"./fieldTypes\";\nimport widgetList from \"./widgetList\";\nimport { MODEL_TYPE, DataTypes, relationalFields, TYPE } from \"../constants\";\nimport { getMenuBuilderTitle } from \"./properties.helper\";\n\n/** Overview Fields */\nexport const Name = ({ ...props } = {}) =>\n\tStringField({\n\t\tname: \"name\",\n\t\ttitle: \"Name\",\n\t\trequired: true,\n\t\treadOnly: true,\n\t\tregex: /^[a-z]/i,\n\t\tregexErrorMessage: \"First Letter of the name should always be alphabet\",\n\t\tunique: true,\n\t\tisDisabled: ({ properties, metaFieldStore, editWidgetType, modelType }) => {\n\t\t\tif (modelType === MODEL_TYPE.BASE && editWidgetType !== \"customField\") {\n\t\t\t\t// const name = properties['name'];\n\t\t\t\t// const index = metaFieldStore.findIndex(field => field.name === name);\n\t\t\t\t// return index !== -1 ? true : false;\n\t\t\t\treturn true;\n\t\t\t}\n\t\t\tif (\n\t\t\t\tmodelType === MODEL_TYPE.CUSTOM &&\n\t\t\t\tproperties &&\n\t\t\t\tproperties.id &&\n\t\t\t\tproperties.type === \"form\"\n\t\t\t) {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t\treturn false;\n\t\t},\n\t\trequiredFor: [\n\t\t\t\"button\",\n\t\t\t\"label\",\n\t\t\t\"panel\",\n\t\t\t\"string\",\n\t\t\t\"panel-dashlet\",\n\t\t\t\"separator\",\n\t\t\t\"panel-stack\",\n\t\t\t\"integer\",\n\t\t\t\"date\",\n\t\t\t\"time\",\n\t\t\t\"datetime\",\n\t\t\t\"decimal\",\n\t\t\t\"one-to-many\",\n\t\t\t\"many-to-many\",\n\t\t\t\"boolean\",\n\t\t\t\"label\",\n\t\t\t\"viewer\",\n\t\t\t\"editor\",\n\t\t\t\"one-to-one\",\n\t\t\t\"spacer\",\n\t\t\t\"long\",\n\t\t\t\"hilite\",\n\t\t],\n\t\t...props,\n\t});\n\nexport const Type = StringField({\n\tname: \"type\",\n\tcolumn: \"type_name\",\n\ttitle: \"Type\",\n\trequired: true,\n\tselection: \"json.field.type\",\n\treadOnly: \"true\",\n\tformatter: (value, properties) => {\n\t\tif (properties.tab) {\n\t\t\treturn \"panel-tabs\";\n\t\t}\n\t\tconst entityIndex = value.indexOf(\"entity\");\n\t\tif (entityIndex !== -1) {\n\t\t\treturn value.substring(0, entityIndex);\n\t\t}\n\t\treturn value;\n\t},\n});\n\nexport const SelectableType = StaticSelectField({\n\tname: \"type\",\n\ttitle: \"Type\",\n\tcolumn: \"type_name\",\n\trequired: true,\n\tdata: [\"string\", \"integer\"],\n\tdefaultOption: false,\n\tdisableClearable: true,\n\tisDisabled: ({ properties, metaFieldStore, editWidgetType, modelType }) => {\n\t\tif (modelType === MODEL_TYPE.BASE && editWidgetType !== \"customField\") {\n\t\t\treturn true;\n\t\t}\n\t},\n});\n\nexport const DummyType = StaticSelectField({\n\tname: \"dummyType\",\n\ttitle: \"Type\",\n\tdata: [...DataTypes],\n});\n\nexport const Title = StringField({\n\tname: \"title\",\n\ttitle: \"Title\",\n\ttranslationView: false,\n});\n\nexport const DefaultValue = StringField({\n\tname: \"defaultValue\",\n\tdependModelType: MODEL_TYPE.CUSTOM,\n\ttitle: \"Default value\",\n});\n\nexport const AppBuilder = ObjectSelectionField({\n\tname: \"appBuilder\",\n\ttitle: \"App name\",\n\tref: \"com.axelor.studio.db.AppBuilder\",\n\tdependModelType: MODEL_TYPE.CUSTOM,\n});\n\nexport const Help = StringField({\n\tname: \"help\",\n\ttitle: \"Help\",\n\tdependModelType: MODEL_TYPE.CUSTOM,\n});\n\nexport const Sequence = IntegerField({\n\tname: \"sequence\",\n\ttitle: \"Sequence\",\n\tdependModelType: MODEL_TYPE.CUSTOM,\n});\n\n/** Roles Fields */\nexport const Roles = ObjectSelectionField({\n\tname: \"roles\",\n\ttitle: \"Roles\",\n\tref: \"com.axelor.auth.db.Role\",\n\tmultiple: true,\n\tdependModelType: MODEL_TYPE.CUSTOM,\n});\n\n/** ValueExpr Fields */\nexport const ValueExpression = {\n\tname: \"valueExpr\",\n\ttitle: \"Value expr\",\n\ttype: \"text\",\n\tdependModelType: MODEL_TYPE.CUSTOM,\n};\n\n/** Field Options Fields */\nexport const UpdateSelection = BooleanField({\n\tname: \"updateSelection\",\n\tdependModelType: MODEL_TYPE.CUSTOM,\n\ttitle: \"New selection\",\n\tuncheckDialog: true,\n});\n\nexport const Selection = SelectField({\n\tname: \"selection\",\n\ttitle: \"Selection\",\n\tref: \"com.axelor.meta.db.MetaSelect\",\n\tvalueField: \"name\",\n\tdependModelType: MODEL_TYPE.CUSTOM,\n\trequiredWhen: UpdateSelection.name,\n\trequiredNegation: true,\n\tisDisabled: (property, editWidgetType, modelType) => {\n\t\treturn property.updateSelection;\n\t},\n});\n\nexport const SelectionText = StringField({\n\tname: \"selectionText\",\n\ttype: \"text\",\n\tdepends: \"updateSelection\",\n\tdependValue: true,\n\tdependModelType: MODEL_TYPE.CUSTOM,\n\trequiredWhen: UpdateSelection.name,\n\ttitle: \"Select options\",\n});\n\nexport const Widget = StaticSelectField({\n\tname: \"widget\",\n\tdata: widgetList,\n\ttitle: \"Widget\",\n\tdependModelType: MODEL_TYPE.CUSTOM,\n});\n\nexport const OnChange = SelectField({\n\tname: \"onChange\",\n\tref: \"com.axelor.meta.db.MetaAction\",\n\tdependModelType: MODEL_TYPE.CUSTOM,\n\ttitle: \"On change\",\n\tmultiple: true,\n\tcanAddNew: true,\n\tcommaSeparated: true,\n});\n\nexport const OnNew = SelectField({\n\ttitle: \"On new\",\n\tname: \"onNew\",\n\tref: \"com.axelor.meta.db.MetaAction\",\n\tdependModelType: MODEL_TYPE.CUSTOM,\n\tmultiple: true,\n\tcommaSeparated: true,\n\tcanAddNew: true,\n});\n\nexport const OnLoad = SelectField({\n\ttitle: \"On load\",\n\tname: \"onLoad\",\n\tref: \"com.axelor.meta.db.MetaAction\",\n\tmultiple: true,\n\tcommaSeparated: true,\n\tcanAddNew: true,\n});\n\nexport const OnSave = SelectField({\n\tname: \"onSave\",\n\tref: \"com.axelor.meta.db.MetaAction\",\n\tmultiple: true,\n\tcommaSeparated: true,\n\ttitle: \"On save\",\n\tcanAddNew: true,\n});\n\nexport const Min = IntegerField({\n\tname: \"minSize\",\n\ttitle: \"Min\",\n\tdependModelType: MODEL_TYPE.CUSTOM,\n});\n\nexport const Max = IntegerField({\n\tname: \"maxSize\",\n\ttitle: \"Max\",\n\tdependModelType: MODEL_TYPE.CUSTOM,\n});\n\nexport const EntityMax = IntegerField({\n\tname: \"max\",\n\ttitle: \"Max\",\n});\n\nexport const EntityMin = IntegerField({\n\tname: \"min\",\n\ttitle: \"Min\",\n});\n\nexport const Precision = IntegerField({\n\tname: \"precision\",\n\ttitle: \"Precision\",\n});\n\nexport const Scale = IntegerField({\n\tname: \"scale\",\n\ttitle: \"Scale\",\n});\n\nexport const JsonRelationalField = BooleanField({\n\tname: \"isJsonRelationalField\",\n\ttitle: \"Is json relational field\",\n\tdependModelType: MODEL_TYPE.CUSTOM,\n\tgetValue: (properties) => {\n\t\tconst type = properties[\"type\"];\n\t\tif (type) {\n\t\t\tconst hasJSONField = type.indexOf(\"json\") === 0;\n\t\t\tif (hasJSONField) {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\t\treturn false;\n\t},\n\tchange: (value, properties) => {\n\t\tconst type = properties[\"type\"];\n\t\tif (value === true) {\n\t\t\tconst has = type.indexOf(\"json\") === 0;\n\t\t\tif (!has) {\n\t\t\t\tconst _type = `json-${type}`;\n\t\t\t\treturn {\n\t\t\t\t\ttype: _type,\n\t\t\t\t\tserverType: _type,\n\t\t\t\t};\n\t\t\t}\n\t\t} else if (value === false) {\n\t\t\tconst has = type.indexOf(\"json\") === 0;\n\t\t\tif (has) {\n\t\t\t\tconst _type = type.substring(\"json-\".length);\n\t\t\t\treturn {\n\t\t\t\t\ttype: _type,\n\t\t\t\t\tserverType: _type,\n\t\t\t\t};\n\t\t\t}\n\t\t}\n\t\treturn {};\n\t},\n});\n\nexport const Domain = StringField({\n\tname: \"domain\",\n\ttitle: \"Domain\",\n});\n\nexport const Prompt = StringField({\n\tname: \"prompt\",\n\ttitle: \"Prompt\",\n\tparentField: \"widgetAttrs\",\n});\n\nexport const SelectionIn = StringField({\n\tname: \"selection-in\",\n\tdependModelType: MODEL_TYPE.BASE,\n\tshowInCustomField: false,\n\ttitle: \"Selection in\",\n});\n\nexport const Value = StringField({\n\tname: \"value\",\n\ttitle: \"Value\",\n\tdependModelType: MODEL_TYPE.BASE,\n\tshowInCustomField: false,\n});\n\nexport const ValueAdd = StringField({\n\tname: \"value:add\",\n\ttitle: \"Value:add\",\n\tdependModelType: MODEL_TYPE.BASE,\n\tshowInCustomField: false,\n});\n\nexport const ValueDel = StringField({\n\tname: \"value:del\",\n\ttitle: \"Value:del\",\n\tdependModelType: MODEL_TYPE.BASE,\n\tshowInCustomField: false,\n});\n\nexport const Refresh = BooleanField({\n\tname: \"refresh\",\n\ttitle: \"Refresh\",\n\tdependModelType: MODEL_TYPE.BASE,\n\tshowInCustomField: false,\n});\n\nexport const Active = BooleanField({\n\tname: \"active\",\n\ttitle: \"Active\",\n\tdependModelType: MODEL_TYPE.BASE,\n\tshowInCustomField: false,\n\tshouldRender: (list) => {\n\t\treturn list.xPath && list.xPath.includes(\"panel-tabs\");\n\t},\n});\n\nexport const TargetJsonModel = ObjectSelectionField({\n\tname: \"targetJsonModel\",\n\trequired: true,\n\tref: \"com.axelor.meta.db.MetaJsonModel\",\n\tdisplayField: \"title\",\n\tdependModelType: MODEL_TYPE.CUSTOM,\n\ttitle: \"Target json model\",\n});\n\nexport const TargetModel = SelectField({\n\tname: \"targetModel\",\n\ttitle: \"Target model\",\n\trequired: true,\n\tref: \"com.axelor.meta.db.MetaModel\",\n\tvalueField: \"fullName\",\n\tcanAddNew: false,\n\tisDisabled: (property, editWidgetType, modelType) => {\n\t\treturn (\n\t\t\teditWidgetType !== \"customField\" &&\n\t\t\tproperty.serverType !== \"field\" &&\n\t\t\tmodelType !== MODEL_TYPE.CUSTOM\n\t\t);\n\t},\n});\n\nexport const GridView = SelectField({\n\tname: \"gridView\",\n\ttitle: \"Grid view\",\n\tref: \"com.axelor.meta.db.MetaView\",\n\tvalueField: \"name\",\n\tdependModelType: MODEL_TYPE.CUSTOM,\n\tneedsTargetModel: [\n\t\trelationalFields.OneToMany,\n\t\trelationalFields.ManyToMany,\n\t\trelationalFields.ManyToOne,\n\t],\n});\n\nexport const FormView = SelectField({\n\tname: \"formView\",\n\ttitle: \"Form view\",\n\tref: \"com.axelor.meta.db.MetaView\",\n\tvalueField: \"name\",\n\tdependModelType: MODEL_TYPE.CUSTOM,\n\tneedsTargetModel: [\n\t\trelationalFields.OneToMany,\n\t\trelationalFields.ManyToMany,\n\t\trelationalFields.ManyToOne,\n\t],\n});\n\n/** Ui options fields */\nexport const Required = BooleanField({\n\tname: \"required\",\n\ttitle: \"Required\",\n\tdefaultValue: \"false\",\n\tisDisabled: ({ properties, metaFieldStore, editWidgetType, modelType }) => {\n\t\tif (modelType === MODEL_TYPE.BASE && editWidgetType !== \"customField\") {\n\t\t\tif (properties[\"requiredIf\"] && properties[\"requiredIf\"].length) {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\t\treturn false;\n\t},\n});\n\nexport const ColumnSequence = IntegerField({\n\tname: \"columnSequence\",\n\ttitle: \"Column sequence\",\n\tdependModelType: MODEL_TYPE.CUSTOM,\n});\n\nexport const ReadOnly = BooleanField({\n\tname: \"readonly\",\n\ttitle: \"Readonly\",\n\tisDisabled: ({ properties, metaFieldStore, editWidgetType, modelType }) => {\n\t\tif (modelType === MODEL_TYPE.BASE && editWidgetType !== \"customField\") {\n\t\t\tif (properties[\"readonlyIf\"] && properties[\"readonlyIf\"].length) {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\t\treturn false;\n\t},\n});\n\nexport const Hidden = BooleanField({\n\tname: \"hidden\",\n\ttitle: \"Hidden\",\n\tisDisabled: ({ properties }) => {\n\t\tif (properties[\"hideIf\"] && properties[\"hideIf\"].length) {\n\t\t\treturn true;\n\t\t}\n\t\treturn false;\n\t},\n});\n\nexport const VisibleInGrid = BooleanField({\n\tname: \"visibleInGrid\",\n\ttitle: \"Visible in grid\",\n\tdependModelType: MODEL_TYPE.CUSTOM,\n});\n\n/** Conditions Fields*/\nexport const ShowIf = StringField({\n\tname: \"showIf\",\n\ttitle: \"Show if\",\n\tdependModelType: MODEL_TYPE.CUSTOM,\n});\n\nexport const HideIf = StringField({\n\tname: \"hideIf\",\n\ttitle: \"Hide if\",\n\tisDisabled: ({ properties }) => {\n\t\tif (properties[\"hidden\"]) {\n\t\t\treturn true;\n\t\t}\n\t\treturn false;\n\t},\n});\n\nexport const If = StringField({\n\tname: \"if\",\n\ttitle: \"If\",\n\tdependModelType: MODEL_TYPE.CUSTOM,\n});\n\nexport const RequiredIf = StringField({\n\tname: \"requiredIf\",\n\ttitle: \"Required if\",\n\tisDisabled: ({ properties, metaFieldStore, editWidgetType, modelType }) => {\n\t\tif (modelType === MODEL_TYPE.BASE && editWidgetType !== \"customField\") {\n\t\t\tif (properties[\"required\"]) {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\t\treturn false;\n\t},\n});\n\nexport const ReadOnlyIf = StringField({\n\tname: \"readonlyIf\",\n\ttitle: \"Readonly if\",\n\tisDisabled: ({ properties, metaFieldStore, editWidgetType, modelType }) => {\n\t\tif (modelType === MODEL_TYPE.BASE && editWidgetType !== \"customField\") {\n\t\t\tif (properties[\"readonly\"]) {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\t\treturn false;\n\t},\n});\n\nexport const IncludeIf = StringField({\n\tname: \"includeIf\",\n\ttitle: \"Include if\",\n\tdependModelType: MODEL_TYPE.CUSTOM,\n});\n\nexport const ValidIf = StringField({\n\tname: \"validIf\",\n\ttitle: \"Valid if\",\n\tparentField: \"widgetAttrs\",\n\tmodelType: MODEL_TYPE.CUSTOM,\n\tdependModelType: MODEL_TYPE.CUSTOM,\n});\n\nexport const CanSave = StringField({\n\tname: \"canSave\",\n\tdependModelType: MODEL_TYPE.CUSTOM,\n\ttitle: \"Can save\",\n});\n\nexport const Css = StringField({\n\tname: \"css\",\n\ttitle: \"Css\",\n\tparentField: \"widgetAttrs\",\n\tmodelType: MODEL_TYPE.CUSTOM,\n\t// dependModelType: MODEL_TYPE.BASE,\n});\n\nexport const CanEdit = StringField({\n\tname: \"canEdit\",\n\ttitle: \"Can edit\",\n});\n\nexport const CanDelete = StringField({\n\tname: \"canDelete\",\n\ttitle: \"Can delete\",\n});\n\nexport const CanCopy = StringField({\n\tname: \"canCopy\",\n\ttitle: \"Can copy\",\n});\n\nexport const CanNew = StringField({\n\tname: \"canNew\",\n\ttitle: \"Can new\",\n});\n\nexport const CanAttach = StringField({\n\tname: \"canAttach\",\n\ttitle: \"Can attach\",\n});\n\nexport const FormWidth = StaticSelectField({\n\tname: \"width\",\n\tdata: [\"mini\", \"mid\", \"large\"],\n\ttitle: \"Width\",\n});\n\nexport const Editable = BooleanField({\n\tname: \"editable\",\n\ttitle: \"Editable\",\n\tdependModelType: MODEL_TYPE.CUSTOM,\n});\n\n/** Widget Fields*/\nexport const ColSpan = StaticSelectField({\n\tname: \"colSpan\",\n\ttitle: \"Colspan\",\n\tparentField: \"widgetAttrs\",\n\tdata: [\n\t\t\"\",\n\t\t...Array(12)\n\t\t\t.fill()\n\t\t\t.map((_, i) => (i + 1).toString()),\n\t],\n\tmodelType: MODEL_TYPE.CUSTOM,\n\tdependModelType: MODEL_TYPE.CUSTOM,\n\tgetOptionLabel: (option) => {\n\t\treturn option ? option.toString() : \"\";\n\t},\n\tisDisabled: ({ properties, parentPanel }) => {\n\t\tif (parentPanel) {\n\t\t\tif ([TYPE.toolbar, TYPE.menubar].includes(parentPanel.serverType)) {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\t\treturn false;\n\t},\n});\n\nexport const ItemSpan = StaticSelectField({\n\tname: \"itemSpan\",\n\ttitle: \"Itemspan\",\n\tparentField: \"widgetAttrs\",\n\tdata: [\n\t\t\"\",\n\t\t...Array(12)\n\t\t\t.fill()\n\t\t\t.map((_, i) => (i + 1).toString()),\n\t],\n\tmodelType: MODEL_TYPE.CUSTOM,\n\tdependModelType: MODEL_TYPE.CUSTOM,\n\tgetOptionLabel: (option) => {\n\t\treturn option ? option.toString() : \"\";\n\t},\n\tisDisabled: ({ properties, parentPanel }) => {\n\t\tif (\n\t\t\tparentPanel &&\n\t\t\t[TYPE.toolbar, TYPE.menubar].includes(parentPanel.serverType)\n\t\t) {\n\t\t\treturn true;\n\t\t}\n\t\treturn false;\n\t},\n});\n\nexport const IsGenerateMenu = BooleanField({\n\tname: \"isGenerateMenu\",\n\ttitle: \"Generate menu\",\n});\n\nexport const MenuBuilderTitle = StringField({\n\tname: \"menuBuilderTitle\",\n\ttitle: \"Menu title\",\n\tdepends: \"isGenerateMenu\",\n\tdependValue: true,\n\trequiredWhen: IsGenerateMenu.name,\n});\n\nexport const MenuBuilderParent = ObjectSelectionField({\n\tname: \"menuBuilderParent\",\n\tref: \"com.axelor.meta.db.MetaMenu\",\n\ttitle: \"Parent\",\n\tdepends: \"isGenerateMenu\",\n\tdependValue: true,\n\tvalueField: \"id\",\n\tdisplayField: \"title\",\n\tshouldFetchInStart: true,\n\tlimit: null,\n\tgetOptionLabel: (option, data) => {\n\t\treturn getMenuBuilderTitle(option, data);\n\t},\n});\n\nexport const ShowTitle = BooleanField({\n\tname: \"showTitle\",\n\tparentField: \"widgetAttrs\",\n\tdefaultValue: true,\n\tmodelType: MODEL_TYPE.CUSTOM,\n\tdependModelType: MODEL_TYPE.CUSTOM,\n\ttitle: \"Show title\",\n});\n\nexport const CanSearch = BooleanField({\n\tname: \"canSearch\",\n\tdependModelType: MODEL_TYPE.CUSTOM,\n\ttitle: \"Can search\",\n});\n\nexport const IfModule = StringField({\n\tname: \"if-module\",\n\ttitle: \"If-module\",\n\tdependModelType: MODEL_TYPE.CUSTOM,\n});\n\nexport const Height = StringField({\n\tname: \"height\",\n\tdependModelType: MODEL_TYPE.CUSTOM,\n});\n\nexport const Action = SelectField({\n\tname: \"action\",\n\ttitle: \"Action\",\n\tref: \"com.axelor.meta.db.MetaAction\",\n\trequiredFor: [\"panel-dashlet\", \"item\"],\n\tdependModelType: MODEL_TYPE.CUSTOM,\n\tmultiple: true,\n\tcommaSeparated: true,\n\tcanAddNew: true,\n});\n\nexport const Field = StringField({\n\tname: \"field\",\n\ttitle: \"Field\",\n\trequired: true,\n\trequiredFor: [\"panel-related\"],\n\tdependModelType: MODEL_TYPE.CUSTOM,\n});\n\nexport const CanMove = BooleanField({\n\tname: \"canMove\",\n\tdependModelType: MODEL_TYPE.CUSTOM,\n\ttitle: \"Can move\",\n});\n\nexport const OrderBy = StringField({\n\tname: \"orderBy\",\n\tdependModelType: MODEL_TYPE.CUSTOM,\n\ttitle: \"Order by\",\n});\n\nexport const IncludeView = SelectField({\n\tname: \"view\",\n\ttitle: \"View\",\n\tref: \"com.axelor.meta.db.MetaView\",\n\tvalueField: \"name\",\n\trequiredFor: [\"panel-include\"],\n\tdependModelType: MODEL_TYPE.CUSTOM,\n});\n\nexport const IncludeFrom = StringField({\n\tname: \"from\",\n\ttitle: \"From\",\n});\n\nexport const Sidebar = BooleanField({\n\tname: \"sidebar\",\n\ttitle: \"Sidebar\",\n\tparentField: \"widgetAttrs\",\n\tmodelType: MODEL_TYPE.CUSTOM,\n\tdependModelType: MODEL_TYPE.CUSTOM,\n\tshowInCustomField: false,\n});\n\nexport const Translatable = BooleanField({\n\tname: \"translatable\",\n\ttitle: \"Translatable\",\n});\n\nexport const Column = StringField({\n\tname: \"column\",\n\ttitle: \"Column\",\n});\n\nexport const MassUpdate = BooleanField({\n\tname: \"massUpdate\",\n\ttitle: \"Mass update\",\n});\n\nexport const HashKey = BooleanField({\n\tname: \"hashKey\",\n\ttitle: \"Hash key\",\n});\n\nexport const Transient = BooleanField({\n\tname: \"transient\",\n\ttitle: \"Transient\",\n});\n\nexport const TZ = BooleanField({\n\tname: \"tz\",\n\ttitle: \"Tz\",\n});\n\nexport const Encrypted = BooleanField({\n\tname: \"encrypted\",\n\ttitle: \"Encrypted\",\n});\n\nexport const Password = BooleanField({\n\tname: \"password\",\n\ttitle: \"Password\",\n});\n\nexport const Multiline = BooleanField({\n\tname: \"multiline\",\n\ttitle: \"Multiline\",\n\tdependModelType: MODEL_TYPE.CUSTOM,\n});\n\nexport const Large = BooleanField({\n\tname: \"large\",\n\ttitle: \"Large\",\n});\n\nexport const Search = StringField({\n\tname: \"search\",\n\ttitle: \"Search\",\n});\n\nexport const Formula = BooleanField({\n\tname: \"formula\",\n\ttitle: \"Formula\",\n});\n\nexport const InitParam = BooleanField({\n\tname: \"initParam\",\n\ttitle: \"Init param\",\n});\n\nexport const Index = StringField({\n\tname: \"index\",\n\ttitle: \"Index\",\n});\n\nexport const Default = StringField({\n\tname: \"default\",\n\ttitle: \"Default\",\n});\n\nexport const Unique = BooleanField({\n\tname: \"unique\",\n\ttitle: \"Unique\",\n});\n\nexport const Image = BooleanField({\n\tname: \"image\",\n\ttitle: \"Image\",\n});\n\nexport const Ref = StringField({\n\tname: \"ref\",\n\ttitle: \"Ref\",\n});\n\nexport const MappedBy = StringField({\n\tname: \"mappedBy\",\n\ttitle: \"Mapped by\",\n});\n\nexport const OrphanRemoval = BooleanField({\n\tname: \"orphanRemoval\",\n\ttitle: \"Orphan removal\",\n});\n\nexport const Sequential = BooleanField({\n\tname: \"sequential\",\n\ttitle: \"Sequential\",\n});\n\nexport const Cachable = BooleanField({\n\tname: \"cachable\",\n\ttitle: \"Cachable\",\n});\n\nexport const Repository = StaticSelectField({\n\tname: \"repository\",\n\ttitle: \"Repository\",\n\tdata: [\"none\", \"default\", \"abstract\"],\n});\n\nexport const LogUpdates = BooleanField({\n\tname: \"logUpdates\",\n\ttitle: \"Log updates\",\n});\n\nexport const Lang = StringField({\n\tname: \"lang\",\n\ttitle: \"Lang\",\n});\n\nexport const Table = StringField({\n\tname: \"table\",\n\ttitle: \"Table\",\n});\n\nexport const Implements = StringField({\n\tname: \"implements\",\n\ttitle: \"Implements\",\n});\n\nexport const Persistable = StringField({\n\tname: \"persistable\",\n\ttitle: \"Persistable\",\n});\n\nexport const Extends = StringField({\n\tname: \"extends\",\n\ttitle: \"Extends\",\n});\n\nexport const HashAll = BooleanField({\n\tname: \"hashAll\",\n\ttitle: \"Hash all\",\n});\n\nexport const Strategy = StaticSelectField({\n\tname: \"strategy\",\n\ttitle: \"Strategy\",\n\tdata: [\"SINGLE\", \"JOINED\", \"CLASS\"],\n});\n\nexport const Stacked = BooleanField({\n\tname: \"stacked\",\n\ttitle: \"Stacked\",\n\tdependModelType: MODEL_TYPE.BASE,\n});\n\nexport const PackageName = StringField({\n\tname: \"packageName\",\n\ttitle: \"Package name\",\n});\n\nexport const EntitySelection = StringField({\n\tname: \"selection\",\n\ttitle: \"Selection\",\n});\n\nexport const Model = SelectField({\n\tname: \"model\",\n\ttitle: \"Model\",\n\trequired: true,\n\tref: \"com.axelor.meta.db.MetaModel\",\n\tvalueField: \"fullName\",\n});\n\nexport const Color = StaticSelectField({\n\tname: \"color\",\n\ttitle: \"Color\",\n\tdata: [\"default\", \"primary\", \"warning\", \"success\", \"danger\", \"info\"],\n});\n\nexport const Background = StaticSelectField({\n\tname: \"background\",\n\ttitle: \"Background\",\n\tdata: [\"default\", \"primary\", \"warning\", \"success\", \"danger\", \"info\"],\n});\n\nexport const Strong = BooleanField({\n\tname: \"strong\",\n\ttitle: \"Strong\",\n\tdependModelType: MODEL_TYPE.BASE,\n});\n\nexport default {\n\tName,\n\tType,\n\tTitle,\n\tDefaultValue,\n\tAppBuilder,\n\tHelp,\n\tSequence,\n\tRoles,\n\tValueExpression,\n\tSelection,\n\tWidget,\n\tOnChange,\n\tMin,\n\tMax,\n\tJsonRelationalField,\n\tDomain,\n\tTargetJsonModel,\n\tTargetModel,\n\tGridView,\n\tFormView,\n\tRequired,\n\tColumnSequence,\n\tReadOnly,\n\tHidden,\n\tVisibleInGrid,\n\tShowIf,\n\tHideIf,\n\tRequiredIf,\n\tReadOnlyIf,\n\tIncludeIf,\n\tValidIf,\n\tColSpan,\n\tShowTitle,\n\tOnNew,\n\tOnLoad,\n\tOnSave,\n\tFormWidth,\n\tEditable,\n\tDummyType,\n\tIfModule,\n\tAction,\n\tHeight,\n\tCanSearch,\n\tField,\n\tCanMove,\n\tOrderBy,\n\tIncludeFrom,\n\tIncludeView,\n\tTranslatable,\n\tMassUpdate,\n\tEntityMax,\n\tEntityMin,\n\tPrecision,\n\tScale,\n\tTZ,\n\tEncrypted,\n\tPassword,\n\tMultiline,\n\tColumn,\n\tHashKey,\n\tTransient,\n\tLarge,\n\tSearch,\n\tFormula,\n\tInitParam,\n\tImage,\n\tRef,\n\tMappedBy,\n\tOrphanRemoval,\n\tCachable,\n\tRepository,\n\tSequential,\n\tImplements,\n\tPersistable,\n\tTable,\n\tLang,\n\tLogUpdates,\n\tHashAll,\n\tExtends,\n\tStrategy,\n\tIsGenerateMenu,\n\tMenuBuilderParent,\n\tMenuBuilderTitle,\n\tStacked,\n\tPackageName,\n\tEntitySelection,\n\tModel,\n\tColor,\n\tStrong,\n\tBackground,\n\tItemSpan,\n\tCss,\n};\n","export const getMenuBuilderTitle = (option, data) => {\n\tlet text = option.title || \"\";\n\tif (option.parent) {\n\t\tconst parent = data.find((item) => item.id === option.parent.id);\n\t\tif (parent) {\n\t\t\tconst parentText = getMenuBuilderTitle(\n\t\t\t\tparent,\n\t\t\t\t(data && data.filter((f) => f.id !== parent.id)) || []\n\t\t\t);\n\t\t\tif (parentText) {\n\t\t\t\ttext = `${parentText} > ${text}`;\n\t\t\t}\n\t\t}\n\t}\n\treturn text;\n};\n","import React from \"react\";\nimport classNames from \"classnames\";\nimport { GridContainer, useGridWidget } from \"./Grid\";\n\nconst panelAttrs = { cols: 1 };\n\n/**\n * Panel Component\n * Used As Container to group Field Component like form group\n */\nfunction TabPanelComponent(props) {\n\tconst WidgetComponent = useGridWidget();\n\tconst { id, attrs, isDragging, isTab = false, ...rest } = props;\n\tconst { title, items = [] } = attrs;\n\tlet { current } = attrs;\n\tconst tabs = [...items.slice()].reduce(\n\t\t(all, tab) => all.concat([tab, 0]),\n\t\t[0]\n\t);\n\t// reuse common tab attributes\n\tconst getTabAttributes = (id, index) => ({\n\t\tkey: !id ? `${id}${index}` : id,\n\t\tid,\n\t\tmeta: {\n\t\t\thorizontal: true,\n\t\t},\n\t\tindex,\n\t\tpanelId: props.id,\n\t\tpanelColumns: attrs.cols,\n\t\ttabId: props.id,\n\t});\n\tlet activeTabIndex = items.indexOf(current);\n\t// if active tab index not found, take first element as active one\n\tif (activeTabIndex === -1) {\n\t\tactiveTabIndex = 0;\n\t\tcurrent = items.length ? items[0] : 0;\n\t}\n\n\treturn (\n\t\t<React.Fragment>\n\t\t\t{title && (\n\t\t\t\t<div\n\t\t\t\t\tclassName={classNames(\"panel-header panel-tab-header\", {\n\t\t\t\t\t\tinline: isTab,\n\t\t\t\t\t})}\n\t\t\t\t>\n\t\t\t\t\t{title}\n\t\t\t\t</div>\n\t\t\t)}\n\t\t\t{!isTab && (\n\t\t\t\t<GridContainer className={\"panel-body\"} attrs={panelAttrs}>\n\t\t\t\t\t<div\n\t\t\t\t\t\tclassName={classNames(\"tabs\", { \"empty-tabs\": tabs.length === 1 })}\n\t\t\t\t\t>\n\t\t\t\t\t\t{tabs.map(\n\t\t\t\t\t\t\t(tab, i) =>\n\t\t\t\t\t\t\t\tWidgetComponent && (\n\t\t\t\t\t\t\t\t\t<WidgetComponent\n\t\t\t\t\t\t\t\t\t\t{...rest}\n\t\t\t\t\t\t\t\t\t\t{...getTabAttributes(tab, i)}\n\t\t\t\t\t\t\t\t\t\tisTab={true}\n\t\t\t\t\t\t\t\t\t\tclassName={current === tab ? \"active-tab\" : \"\"}\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t)}\n\t\t\t\t\t</div>\n\t\t\t\t\t{items.length > 0 && WidgetComponent && (\n\t\t\t\t\t\t<WidgetComponent\n\t\t\t\t\t\t\t{...rest}\n\t\t\t\t\t\t\t{...getTabAttributes(current, activeTabIndex)}\n\t\t\t\t\t\t/>\n\t\t\t\t\t)}\n\t\t\t\t</GridContainer>\n\t\t\t)}\n\t\t</React.Fragment>\n\t);\n}\n\n//panel tabs-panel\nexport default TabPanelComponent;\n","// TYPE define all elements\nexport const TYPE = {\n\tpanel: \"panel\",\n\ttabs: \"panel-tabs\",\n\tfield: \"field\",\n\tdumpField: \"dump_field\",\n\tform: \"form\",\n\tpanelStack: \"panel-stack\",\n\tpanelDashlet: \"panel-dashlet\",\n\tpanelRelated: \"panel-related\",\n\tpanelInclude: \"panel-include\",\n\tmenu: \"menu\",\n\tmenuItem: \"item\",\n\tdivider: \"divider\",\n\tmenubar: \"menubar\",\n\ttoolbar: \"toolbar\",\n};\n\nexport const ItemTypes = {\n\tCONTAINER: \"panel\",\n\tROOTCONTAINER: \"root-container\",\n\tITEM: \"item\",\n\tDUMMY: \"dummy\",\n};\n\nexport const entityFieldTypes = {\n\tstring: \"stringEntity\",\n\tboolean: \"booleanEntity\",\n\tinteger: \"integerEntity\",\n\tlong: \"longEntity\",\n\tdecimal: \"decimalEntity\",\n\tdate: \"dateEntity\",\n\ttime: \"timeEntity\",\n\tdatetime: \"datetimeEntity\",\n\tbinary: \"binaryEntity\",\n\tmanyToMany: \"many-to-manyEntity\",\n\toneToMany: \"one-to-manyEntity\",\n\tmanyToOne: \"many-to-oneEntity\",\n\toneToOne: \"one-to-oneEntity\",\n};\n\n// FIELD_TYPE define all field types(manage on server end)\nexport const FIELD_TYPE = {\n\tstring: \"string\",\n\tnumber: \"number\",\n\tbutton: \"button\",\n\tspacer: \"spacer\",\n\tboolean: \"boolean\",\n\tseparator: \"separator\",\n\thilite: \"hilite\",\n};\n\n// Panel Container Types\nexport const PANEL_TYPE = {\n\tstack: \"stack\",\n\tflow: \"flow\",\n\tgrid: \"grid\",\n\tcustom: \"custom\",\n};\n\n// define Grid Size constants\nexport const GRID_SIZE = {\n\tmax: 12,\n};\n\n// contains all unique ids for special widgets\nexport const IDS = {\n\tcreateWidgets: {\n\t\ttabs: Symbol(),\n\t\tpanel: Symbol(),\n\t\tfield: Symbol(),\n\t},\n\tform: -1,\n\tcustomForm: -2,\n\tdumpField: 0,\n};\n\nexport const PANEL_PROPS = {\n\tcolSpan: 12,\n\tcols: 12,\n\tid: IDS.createWidgets.panel,\n\timage: \"panel.png\",\n\titems: [],\n\tlayout: \"grid\",\n\tmappedBy: undefined,\n\tmodel: \"com.axelor.meta.db.MetaJsonRecord\",\n\tmodelField: \"attrs\",\n\trelationship: undefined,\n\ttitle: undefined,\n\ttype: ItemTypes.CONTAINER,\n\twidgetAttrs: JSON.stringify({\n\t\tshowTitle: false,\n\t\tcolSpan: 12,\n\t\titemSpan: 6,\n\t}),\n};\n\nexport const relationalFields = {\n\tOneToMany: \"one-to-many\",\n\tManyToMany: \"many-to-many\",\n\tManyToOne: \"many-to-one\",\n\tOneToOne: \"one-to-one\",\n};\n\nexport const typeReplacer = {\n\tinclude: TYPE.panelInclude,\n\tMANY_TO_MANY: \"many-to-many\",\n\tMANY_TO_ONE: \"many-to-one\",\n\tONE_TO_ONE: \"one-to-one\",\n\tONE_TO_MANY: \"one-to-many\",\n};\n\nexport const MODEL_TYPE = {\n\tBASE: \"BASE\",\n\tCUSTOM: \"CUSTOM\",\n\tENTITY: \"ENTITY\",\n};\n\nexport const ENTITY_TYPE = {\n\tMETA: \"META\",\n\tENTITY: \"ENTITY\",\n};\n\nexport const DEFAULT_VALUE = {\n\tshowTitle: true,\n\treadonly: false,\n\trequired: false,\n\thidden: false,\n\tsidebar: false,\n\tcanCollapse: false,\n\tstacked: false,\n\tcanMove: false,\n\tcanSearch: false,\n\tmultiline: false,\n};\n\nexport const DataTypes = [\n\t\"string\",\n\t\"integer\",\n\t\"decimal\",\n\t\"boolean\",\n\t\"datetime\",\n\t\"date\",\n\t\"time\",\n\t\"many-to-one\",\n\t\"one-to-many\",\n\t\"many-to-many\",\n];\n\nexport const conditionProperties = {\n\treadonlyIf: \"readonly\",\n\trequiredIf: \"required\",\n\thideIf: \"hidden\",\n\tcollapseIf: \"canCollapse\",\n};\n\nexport const otherNoQuoteProps = [\n\t\"value:add\",\n\t\"value:del\",\n\t\"refresh\",\n\t\"active\",\n];\n","import { conditionProperties } from \"../constants\";\nimport AxelorService from \"./../services/axelor.rest\";\nimport Utils, { generateCustomModelSchema, getMenuBuilder } from \"./../utils\";\n\nexport const metaJsonFieldService = new AxelorService({\n\tmodel: \"com.axelor.meta.db.MetaJsonField\",\n});\nexport const metaModelService = new AxelorService({\n\tmodel: \"com.axelor.meta.db.MetaJsonModel\",\n});\nexport const entityModelService = new AxelorService({\n\tmodel: \"com.axelor.studio.db.EntityModel\",\n});\nconst appBpmService = new AxelorService({\n\tmodel: \"com.axelor.apps.base.db.AppBpm\",\n});\nconst appUserService = new AxelorService({ model: \"com.axelor.auth.db.User\" });\n\nconst metaViewService = new AxelorService({\n\tmodel: \"com.axelor.meta.db.MetaView\",\n});\nexport const modelService = new AxelorService({\n\tmodel: \"com.axelor.meta.db.MetaModel\",\n});\n\nexport const metaAttrsService = new AxelorService({\n\tmodel: \"com.axelor.meta.db.MetaAttrs\",\n});\n\nexport const metaSelectService = new AxelorService({\n\tmodel: \"com.axelor.meta.db.MetaSelect\",\n});\n\nexport const selectionBuilderService = new AxelorService({\n\tmodel: \"com.axelor.studio.db.SelectionBuilder\",\n});\n\nexport const metaTranslationService = new AxelorService({\n\tmodel: \"com.axelor.meta.db.MetaTranslation\",\n});\n\nexport function fetchCustomFields(modelField, model) {\n\tconst _domain = `self.jsonModel = null and self.modelField='${modelField.name}' and self.model='${model.fullName}'`;\n\treturn metaJsonFieldService.search({\n\t\tdata: { _domain },\n\t\tsortBy: [\"sequence\"],\n\t});\n}\n\n/**\n * selection fields are needs to be save seperately to save selections\n */\nexport async function saveCustomModel(model) {\n\tif (!model) return;\n\tconst res = await metaModelService.save(model);\n\tconst { data, status } = res || {};\n\tif (status === -1) {\n\t\treturn res;\n\t}\n\tconst { fields } = (data && data[0]) || {};\n\tconst getFields = (all) => {\n\t\tconst fields = all\n\t\t\t.map((res) => {\n\t\t\t\tconst { data = [] } = res;\n\t\t\t\tif (data[0]) {\n\t\t\t\t\treturn { id: data[0].id, $version: data[0].version };\n\t\t\t\t}\n\t\t\t\treturn undefined;\n\t\t\t})\n\t\t\t.filter((e) => e);\n\t\treturn fields;\n\t};\n\tconst response = await Promise.all(\n\t\tmodel.fields.map((field) => {\n\t\t\tconst updatedField = fields && fields.find((f) => f.name === field.name);\n\t\t\treturn metaJsonFieldService.save({\n\t\t\t\t...field,\n\t\t\t\tid: updatedField.id,\n\t\t\t\tversion: updatedField.version,\n\t\t\t});\n\t\t})\n\t);\n\tconst updatedFields = getFields(response);\n\treturn {\n\t\tdata: [\n\t\t\t{\n\t\t\t\t...((data && data[0]) || {}),\n\t\t\t\tfields: updatedFields,\n\t\t\t},\n\t\t],\n\t};\n}\n\nexport function fetchJSONFields(ids, update, record = {}) {\n\tconst criteria = [];\n\tif (ids.length) {\n\t\tcriteria.push({ fieldName: \"id\", operator: \"in\", value: ids });\n\n\t\tconst data = {\n\t\t\tcriteria,\n\t\t};\n\t\tmetaJsonFieldService.search({ data, sortBy: [\"sequence\"] }).then((res) => {\n\t\t\tif (res.data) {\n\t\t\t\tconst list = res.data || [];\n\t\t\t\tconst schema = generateCustomModelSchema(list, record);\n\t\t\t\tupdate((draft) => {\n\t\t\t\t\tdraft.items = list.filter((l) => l.type === \"panel\").map((e) => e.id);\n\t\t\t\t\tdraft.widgets = {\n\t\t\t\t\t\t...schema.widgets,\n\t\t\t\t\t};\n\t\t\t\t\tdraft.items = schema.items;\n\t\t\t\t});\n\t\t\t}\n\t\t});\n\t} else {\n\t\tupdate((draft) => {\n\t\t\tdraft.widgets = {\n\t\t\t\t\"-1\": {\n\t\t\t\t\ttype: \"form\",\n\t\t\t\t\t...record,\n\t\t\t\t\t...getMenuBuilder(record ? record.menuBuilder : undefined),\n\t\t\t\t},\n\t\t\t\t0: { type: \"dump_field\", name: \"\" },\n\t\t\t};\n\t\t\tdraft.items = [];\n\t\t\tdraft.loader = false;\n\t\t});\n\t}\n}\n\nexport function removeCustomModel(model) {\n\treturn metaModelService.removeAll([model]);\n}\n\nexport async function getEnableAppBuilder() {\n\tconst payload = {\n\t\tdata: {\n\t\t\t_domain: \"self.app.code = :code\",\n\t\t\t_domainContext: { code: \"bpm\" },\n\t\t},\n\t\tfields: [\"enableAppBuilder\"],\n\t\tlimit: 1,\n\t\toffset: 0,\n\t};\n\tconst bpmResult = await appBpmService.search({ ...payload });\n\tif (Array.isArray(bpmResult && bpmResult.data) && bpmResult.data[0]) {\n\t\treturn bpmResult.data[0].enableAppBuilder;\n\t}\n\treturn false;\n}\n\nexport async function generateMenuChange(customModel) {\n\tconst _context = {\n\t\t_model: \"com.axelor.meta.db.MetaJsonModel\",\n\t\t_id: null,\n\t\t...customModel,\n\t};\n\tconst changeAction =\n\t\t\"action-studio-json-model-method-isgeneratemenu-onchange\";\n\tconst data = {\n\t\taction: changeAction,\n\t\tmodel: \"com.axelor.meta.db.MetaJsonModel\",\n\t\tdata: {\n\t\t\tcontext: _context,\n\t\t},\n\t};\n\treturn await metaModelService.action(data);\n}\n\nexport async function fetchCustomModel(modelId) {\n\tconst result = await metaModelService.fetch(modelId);\n\tconst { data = [] } = result;\n\treturn data[0];\n}\n\nexport async function fetchEntityModel(model) {\n\tconst result = await entityModelService.fetch(model.id);\n\tconst { data = [] } = result;\n\treturn data[0];\n}\n\nexport async function removeEntityModel(model) {\n\treturn entityModelService.removeAll([model]);\n}\n\nexport async function fetchEntityFields(model) {\n\tif (!model || (model && (!model.packageName || !model.name))) return [];\n\tconst _data = {\n\t\t_domain: `self.packageName = '${model.packageName}' and self.name = '${model.name}'`,\n\t};\n\tconst result = await entityModelService.search({ data: _data });\n\tconst { data = [] } = result;\n\tconst record = data[0];\n\n\tlet fields = [];\n\tif (record) {\n\t\tfields = Utils.getEntityModelFields(record.entityXml);\n\t}\n\treturn fields;\n}\n\nexport async function fetchViews(view) {\n\tconst viewCriteria = {\n\t\toperator: \"and\",\n\t\tcriteria: [{ fieldName: \"name\", operator: \"=\", value: `${view.name}` }],\n\t};\n\tconst viewList = await metaViewService.search({ data: viewCriteria });\n\tlet views;\n\tif (viewList.data) {\n\t\tviews = Utils.getViews(viewList.data, view.name);\n\t}\n\treturn views;\n}\n\nexport async function fetchModelFields(model) {\n\tif (!model || (model && (!model.packageName || !model.name))) return [];\n\tlet fields = [];\n\tconst _data = {\n\t\t_domain: `self.packageName = '${model.packageName}' and self.name = '${model.name}'`,\n\t};\n\tconst result = await modelService.search({ data: _data });\n\tif (result.data && result.data[0]) {\n\t\tconst record = result.data[0];\n\t\tconst data = {\n\t\t\tfields: [\"metaFields\"],\n\t\t\trelated: {\n\t\t\t\tmetaFields: [\n\t\t\t\t\t\"typeName\",\n\t\t\t\t\t\"label\",\n\t\t\t\t\t\"mappedBy\",\n\t\t\t\t\t\"relationship\",\n\t\t\t\t\t\"name\",\n\t\t\t\t\t\"packageName\",\n\t\t\t\t\t\"typeName\",\n\t\t\t\t],\n\t\t\t},\n\t\t};\n\t\tconst modelData = await modelService.fetch(record.id, data);\n\n\t\tif (modelData && modelData.data[0]) {\n\t\t\tfields = modelData.data[0].metaFields;\n\t\t\treturn fields;\n\t\t}\n\t}\n\treturn fields;\n}\n\nexport async function fetchAttrsList({ model, view }) {\n\tconst criteria = [\n\t\t{ fieldName: \"model\", operator: \"=\", value: model },\n\t\t{ fieldName: \"view\", operator: \"=\", value: view },\n\t];\n\tconst result = await metaAttrsService.search({\n\t\tdata: { criteria },\n\t\tlimit: null,\n\t});\n\tif (result.data && Array.isArray(result.data)) {\n\t\tconst conditionPropertiesKeys = Object.keys(conditionProperties);\n\t\tconst conditionPropertiesValues = Object.values(conditionProperties);\n\n\t\tconst data = [...result.data].map((item) => {\n\t\t\tif (conditionPropertiesValues.includes(item.name)) {\n\t\t\t\tif (item.value.startsWith('\"') && item.value.endsWith('\"')) {\n\t\t\t\t\titem.value = item.value.replace(`\"`, \"\");\n\t\t\t\t\titem.value = item.value.replace(`\"`, \"\");\n\t\t\t\t} else {\n\t\t\t\t\tif (![\"true\", \"false\"].includes(item.value)) {\n\t\t\t\t\t\titem.name =\n\t\t\t\t\t\t\tconditionPropertiesKeys[\n\t\t\t\t\t\t\t\tconditionPropertiesValues.indexOf(item.name)\n\t\t\t\t\t\t\t];\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\titem.value = item.value.replace(`\"`, \"\");\n\t\t\t\titem.value = item.value.replace(`\"`, \"\");\n\t\t\t}\n\t\t\treturn item;\n\t\t});\n\t\treturn data;\n\t}\n\treturn [];\n}\n\nexport async function saveAttrsList(list) {\n\tconst result = await metaAttrsService.saveAll([...list]);\n\tif (result.data && Array.isArray(result.data)) {\n\t\treturn result.data;\n\t}\n\treturn [];\n}\n\nexport async function deleteAttrsList(list) {\n\tconst result = await metaAttrsService.removeAll(list);\n\tif (result.data && Array.isArray(result.data)) {\n\t\treturn result.data;\n\t}\n\treturn [];\n}\n\nexport async function fetchLanguages() {\n\tconst criteria = [\n\t\t{ fieldName: \"name\", operator: \"=\", value: \"select.language\" },\n\t];\n\tconst result = await metaSelectService.search({\n\t\tdata: { criteria },\n\t\tfields: [\"items.value\", \"items.title\"],\n\t});\n\tif (result && result.data && Array.isArray(result.data)) {\n\t\treturn result.data.map((d) => {\n\t\t\treturn { title: d[\"items.title\"], value: d[\"items.value\"] };\n\t\t});\n\t}\n\treturn [];\n}\n\nexport async function getTranslationList(keyList) {\n\tconst criteria = [{ fieldName: \"key\", operator: \"in\", value: keyList }];\n\tconst result = await metaTranslationService.search({ data: { criteria } });\n\tif (result.data && Array.isArray(result.data)) {\n\t\treturn result.data;\n\t}\n\treturn [];\n}\n\nexport async function saveTranslationList(list) {\n\tconst result = await metaTranslationService.saveAll([...list]);\n\tif (result.data && Array.isArray(result.data)) {\n\t\treturn result.data;\n\t}\n\treturn [];\n}\n\nexport async function deleteTranslationList(list) {\n\tconst result = await metaTranslationService.removeAll(list);\n\tif (result.data && Array.isArray(result.data)) {\n\t\treturn result.data;\n\t}\n\treturn [];\n}\n\nexport async function fetchUserPreferences() {\n\tconst userInfo = await appUserService.info();\n\tif (userInfo && userInfo[\"user.id\"]) {\n\t\tconst userResponse = await appUserService.fetch(userInfo[\"user.id\"]);\n\t\tif (userResponse && userResponse.data && userResponse.data[0]) {\n\t\t\treturn userResponse.data[0];\n\t\t}\n\t}\n\treturn null;\n}\n\nexport async function getSelectionText(metaSelect) {\n\tlet selectionText = \"\";\n\tif (metaSelect) {\n\t\tconst context = {\n\t\t\tmetaSelect: {\n\t\t\t\t...metaSelect,\n\t\t\t},\n\t\t};\n\t\tconst payloadData = {\n\t\t\tdata: { context },\n\t\t\taction: \"action-selection-builder-method-fill-selection-text\",\n\t\t\tmodel: \"com.axelor.studio.db.SelectionBuilder\",\n\t\t};\n\t\tconst actionResponse = await selectionBuilderService.action(payloadData);\n\t\tconst { data = [] } = actionResponse;\n\t\tif (data[0]) {\n\t\t\tconst _properties = data[0].values || {};\n\t\t\tif (_properties.selectionText) {\n\t\t\t\tselectionText = _properties.selectionText;\n\t\t\t}\n\t\t}\n\t}\n\treturn selectionText;\n}\n","import React from \"react\";\nimport { Grid, Typography, Tooltip } from \"@material-ui/core\";\nimport { makeStyles } from \"@material-ui/core/styles\";\n\nimport { translate, camleCaseString } from \"../utils\";\n\nconst useStyles = makeStyles({\n\tfieldsContainer: {\n\t\tdisplay: \"flex\",\n\t\tjustifyContent: \"center\",\n\t\talignItems: \"center\",\n\t\tbackground: \"#e7eaec\",\n\t\tborderRadius: 5,\n\t},\n\tfieldImage: {\n\t\tdisplay: \"flex\",\n\t\tjustifyContent: \"center\",\n\t\talignItems: \"center\",\n\t\tpadding: 15,\n\t},\n\tfieldLabel: {\n\t\tfontWeight: \"600\",\n\t},\n\ticon: {\n\t\twidth: 20,\n\t\theight: 20,\n\t\tbackgroundRepeat: \"no-repeat\",\n\t\tbackgroundSize: \"contain\",\n\t\tbackgroundPosition: \"center\",\n\t\tposition: \"absolute\",\n\t},\n\tgridContainer: {\n\t\tdisplay: \"flex\",\n\t\talignItems: \"center\",\n    flexWrap: 'nowrap',\n\t},\n\tlabelContainer: {\n\t\twhiteSpace: \"nowrap\",\n\t\toverflow: \"hidden\",\n\t\ttextOverflow: \"ellipsis\",\n\t\tdisplay: \"flex\",\n\t\talignItems: \"center\",\n\t},\n});\n\nconst getImageURL = (widget) => {\n\tconst type = widget.serverType || widget.type;\n\tif (type && type.indexOf(\"datetime\") !== -1) {\n\t\treturn \"datetime.png\";\n\t}\n\tif (type && type.indexOf(\"date\") !== -1) {\n\t\treturn \"date.png\";\n\t}\n\tif (type && type.indexOf(\"time\") !== -1) {\n\t\treturn \"time.png\";\n\t}\n\tif (type && type.indexOf(\"decimal\") !== -1) {\n\t\treturn \"decimal.png\";\n\t}\n\tif (widget.image) {\n\t\treturn widget.image;\n\t}\n\treturn `${type}.png`;\n};\n\nexport function FieldComponent(props) {\n\tconst classes = useStyles();\n\tconst { attrs, targetName } = props;\n\treturn (\n\t\t<div className={classes.fieldsContainer}>\n\t\t\t<Tooltip\n\t\t\t\tarrow\n\t\t\t\ttitle={translate(attrs.title || attrs[targetName] || attrs[\"name\"])}\n\t\t\t\tplacement=\"top\"\n\t\t\t>\n\t\t\t\t<Grid container className={classes.gridContainer}>\n\t\t\t\t\t<Grid xs={4} item className={classes.fieldImage}>\n\t\t\t\t\t\t<div\n\t\t\t\t\t\t\tclassName={classes.icon}\n\t\t\t\t\t\t\tstyle={{\n\t\t\t\t\t\t\t\tbackgroundImage: `url(./images/${getImageURL(attrs)})`,\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</Grid>\n\t\t\t\t\t<Grid xs={8} item className={classes.labelContainer}>\n\t\t\t\t\t\t<Typography variant=\"caption\" className={classes.fieldLabel}>\n\t\t\t\t\t\t\t{translate(camleCaseString(attrs.title || attrs[targetName] || attrs[\"name\"]))}\n\t\t\t\t\t\t</Typography>\n\t\t\t\t\t</Grid>\n\t\t\t\t</Grid>\n\t\t\t</Tooltip>\n\t\t</div>\n\t);\n}\n\nexport default FieldComponent;\n","import React from 'react'\nimport { makeStyles } from '@material-ui/core/styles'\nimport classNames from 'classnames'\n\nconst useStyles = makeStyles((theme) => ({\n  field: {\n    width: 'calc(50% - 10px)',\n    padding: 5,\n    [theme.breakpoints.down('sm')]: {\n      width: '100%',\n    },\n  },\n}))\n\nexport default function Field(props) {\n  const classes = useStyles()\n  return (\n    <div {...props} className={classNames(classes.field, props.className)} />\n  )\n}\n","import React from \"react\";\nimport { Grid, Typography } from \"@material-ui/core\";\nimport { makeStyles } from \"@material-ui/core/styles\";\n\nimport { fieldTypes, modelFields, entityFields } from \"../../fields\";\nimport FieldComponent from \"../../components/FieldComponent\";\nimport Widget from \"./../../components/Widget\";\nimport Field from './Field';\nimport { useStore } from \"../../store/context\";\nimport { MODEL_TYPE, TYPE } from \"../../constants\";\nimport { translate } from \"../../utils\";\n\nconst useStyles = makeStyles({\n\tcontainer: {\n\t\tpadding: '0 10px',\n\t\tdisplay: \"flex\",\n\t\tflexWrap: \"wrap\",\n\t\talignItems: \"center\",\n\t\tjustifyContent: \"space-between\",\n\t},\n\tfieldGroupTitle: {\n\t\tpadding: \"25px 25px 0px 25px\",\n\t\tcolor: \"white\",\n\t},\n});\n\nexport default React.memo(function AddPanelView() {\n\tconst classes = useStyles();\n\tconst { state } = useStore();\n\tconst fields =\n\t\tstate.modelType === MODEL_TYPE.ENTITY\n\t\t\t? entityFields\n\t\t\t: [...fieldTypes, ...modelFields].filter((e) => {\n\t\t\t\t\tif (e.name === \"Menu\" && state.modelType === MODEL_TYPE.CUSTOM) {\n\t\t\t\t\t\treturn false;\n\t\t\t\t\t}\n\t\t\t\t\treturn true;\n\t\t\t  });\n\n\tconst showField = (field) => {\n\t\tif ([TYPE.menubar, TYPE.toolbar].includes(field.type) && state.widgets) {\n\t\t\tconst index = Object.values(state.widgets).findIndex(\n\t\t\t\t(w) => w.type === field.type\n\t\t\t);\n\t\t\treturn index === -1;\n\t\t}\n\t\treturn true;\n\t};\n\treturn (\n\t\t<>\n\t\t\t{fields.map((fieldType, index) => (\n\t\t\t\t<React.Fragment key={index}>\n\t\t\t\t\t<Typography variant=\"body1\" className={classes.fieldGroupTitle}>\n\t\t\t\t\t\t{translate(fieldType.name)}\n\t\t\t\t\t</Typography>\n\t\t\t\t\t<Grid className={classes.container}>\n\t\t\t\t\t\t{fieldType.value &&\n\t\t\t\t\t\t\tfieldType.value.map((field, i) => {\n\t\t\t\t\t\t\t\tif (\n\t\t\t\t\t\t\t\t\tfield.editorType &&\n\t\t\t\t\t\t\t\t\t!field.editorType.includes(state.modelType)\n\t\t\t\t\t\t\t\t) {\n\t\t\t\t\t\t\t\t\treturn null;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tif (!showField(field)) {\n\t\t\t\t\t\t\t\t\treturn null;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t\t<Field key={i}>\n\t\t\t\t\t\t\t\t\t\t<Widget\n\t\t\t\t\t\t\t\t\t\t\tid={field.id}\n\t\t\t\t\t\t\t\t\t\t\tattrs={field}\n\t\t\t\t\t\t\t\t\t\t\tdesign={true}\n\t\t\t\t\t\t\t\t\t\t\tcomponent={FieldComponent}\n\t\t\t\t\t\t\t\t\t\t\tisCoreField={true}\n\t\t\t\t\t\t\t\t\t\t\tisPalleteField={true}\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t</Field>\n\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t})}\n\t\t\t\t\t</Grid>\n\t\t\t\t</React.Fragment>\n\t\t\t))}\n\t\t\t{/* {state.metaFields && state.metaFields.length > 0 && (\n\t\t\t\t<Grid>\n\t\t\t\t\t<Typography variant=\"body1\" className={classes.fieldGroupTitle}>\n\t\t\t\t\t\tExisting Fields\n\t\t\t\t\t</Typography>\n\t\t\t\t\t<ExistingFieldsView />\n\t\t\t\t</Grid>\n\t\t\t)} */}\n\t\t</>\n\t);\n});\n","import React from \"react\";\n\nexport function useDebounceEffect(handler, interval) {\n\tconst isMounted = React.useRef(false);\n\tReact.useEffect(() => {\n\t\tif (isMounted.current) {\n\t\t\tconst timer = setTimeout(() => handler(), interval);\n\t\t\treturn () => clearTimeout(timer);\n\t\t}\n\t\tisMounted.current = true;\n\t}, [handler, interval]);\n}\n","import React from \"react\";\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport Button from \"@material-ui/core/Button\";\nimport Grid from \"@material-ui/core/Grid\";\nimport Input from \"@material-ui/core/Input\";\nimport ChevronLeft from \"@material-ui/icons/ChevronLeft\";\nimport ChevronRight from \"@material-ui/icons/ChevronRight\";\nimport Typography from \"@material-ui/core/Typography\";\nimport Dialog from \"@material-ui/core/Dialog\";\nimport DialogActions from \"@material-ui/core/DialogActions\";\nimport DialogContent from \"@material-ui/core/DialogContent\";\nimport DialogTitle from \"@material-ui/core/DialogTitle\";\nimport useMediaQuery from \"@material-ui/core/useMediaQuery\";\nimport List from \"@material-ui/core/List\";\nimport ListItem from \"@material-ui/core/ListItem\";\nimport ListItemText from \"@material-ui/core/ListItemText\";\nimport { useTheme } from \"@material-ui/core/styles\";\nimport IconButton from \"@material-ui/core/IconButton\";\n\nconst useStyles = makeStyles((theme) => ({\n\troot: {\n\t\twidth: \"100%\",\n\t\tbackgroundColor: theme.palette.background.paper,\n\t\tmaxHeight: 300,\n\t\toverflow: \"auto\",\n\t},\n\tinput: {\n\t\twidth: \"80%\",\n\t\tmarginRight: 10,\n\t},\n\ttitleHeader: {\n\t\tborderBottom: \"0.5px solid #ddd\",\n\t},\n\tlistItem: {\n\t\tborderBottom: \"1px solid #ddd\",\n\t\tpaddingTop: 10,\n\t\tpaddingBottom: 10,\n\t},\n\tcloseText: {\n\t\ttextTransform: \"capitalize\",\n\t},\n}));\n\nexport default function ResponsiveDialog(props) {\n\tconst {\n\t\tlist = [],\n\t\tonChange,\n\t\thandleClose,\n\t\toffset,\n\t\ttotal,\n\t\tdisplayField,\n\t\tgetOptionLabel,\n\t} = props;\n\tconst theme = useTheme();\n\tconst classes = useStyles();\n\tconst fullScreen = useMediaQuery(theme.breakpoints.down(\"sm\"));\n\n\tconst handleItemClick = React.useCallback(\n\t\t(item) => {\n\t\t\tonChange(item);\n\t\t\thandleClose();\n\t\t},\n\t\t[onChange, handleClose]\n\t);\n\n\tconst canNext = offset + list.length < total;\n\tconst canPrev = offset > 0;\n\n\tconst getLabel = (item) => {\n\t\treturn getOptionLabel ? getOptionLabel(item) : item[displayField || \"name\"];\n\t};\n\n\treturn (\n\t\t<div>\n\t\t\t<Dialog\n\t\t\t\tfullScreen={fullScreen}\n\t\t\t\tmaxWidth=\"sm\"\n\t\t\t\tfullWidth={true}\n\t\t\t\topen={props.open}\n\t\t\t\tonClose={props.handleClose}\n\t\t\t\taria-labelledby=\"responsive-dialog-title\"\n\t\t\t>\n\t\t\t\t<DialogTitle\n\t\t\t\t\tid=\"responsive-dialog-title\"\n\t\t\t\t\tclassName={classes.titleHeader}\n\t\t\t\t>{`Search ${props.title || \"item\"}`}</DialogTitle>\n\t\t\t\t<DialogContent>\n\t\t\t\t\t<Grid container>\n\t\t\t\t\t\t<Input\n\t\t\t\t\t\t\tclassName={classes.input}\n\t\t\t\t\t\t\tvalue={props.searchText}\n\t\t\t\t\t\t\tonChange={(e) => props.setSearchText(e.target.value)}\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t<IconButton onClick={props.onPrevious} disabled={!canPrev}>\n\t\t\t\t\t\t\t<ChevronLeft />\n\t\t\t\t\t\t</IconButton>\n\t\t\t\t\t\t<IconButton onClick={props.onNext} disabled={!canNext}>\n\t\t\t\t\t\t\t<ChevronRight />\n\t\t\t\t\t\t</IconButton>\n\t\t\t\t\t</Grid>\n\t\t\t\t\t<List className={classes.root}>\n\t\t\t\t\t\t{list.map((item, i) => (\n\t\t\t\t\t\t\t<ListItem\n\t\t\t\t\t\t\t\tclassName={classes.listItem}\n\t\t\t\t\t\t\t\tkey={i}\n\t\t\t\t\t\t\t\trole={undefined}\n\t\t\t\t\t\t\t\tdense\n\t\t\t\t\t\t\t\tbutton\n\t\t\t\t\t\t\t\tonClick={() => handleItemClick(item)}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<ListItemText id={i} primary={getLabel(item)} />\n\t\t\t\t\t\t\t</ListItem>\n\t\t\t\t\t\t))}\n\t\t\t\t\t</List>\n\t\t\t\t</DialogContent>\n\t\t\t\t<DialogActions>\n\t\t\t\t\t<Button autoFocus onClick={props.handleClose} color=\"primary\">\n\t\t\t\t\t\t<Typography className={classes.closeText}>Close</Typography>\n\t\t\t\t\t</Button>\n\t\t\t\t</DialogActions>\n\t\t\t</Dialog>\n\t\t</div>\n\t);\n}\n","import React, { useState, useEffect, useCallback } from \"react\";\nimport AutoComplete, {\n\tcreateFilterOptions,\n} from \"@material-ui/lab/Autocomplete\";\nimport _ from \"lodash\";\nimport { TextField, Typography } from \"@material-ui/core\";\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport AxelorService from \"../services/axelor.rest\";\nimport { camleCaseString, getDefaultGridFormName, translate } from \"../utils\";\nimport { useDebounceEffect } from \"./../common.func\";\nimport SearchView from \"./SearchView\";\nconst filter = createFilterOptions();\nconst useStyles = makeStyles({\n\tautoComplete: {\n\t\tbackgroundColor: \"#293846\",\n\t\tmarginTop: 15,\n\t\t\".modern-dark &\": {\n\t\t\tbackgroundColor: \"#323232\",\n\t\t},\n\t},\n\tlabel: {\n\t\tcolor: \"#e7eaec !important\",\n\t\tfontSize: 12,\n\t},\n\tpopperAutoComplete: {\n\t\t\"& ul, .MuiAutocomplete-noOptions\": {\n\t\t\tbackgroundColor: \"rgb(41, 56, 70) !important\",\n\t\t\t\".modern-dark &\": {\n\t\t\t\tbackgroundColor: \"#1b1b1b !important\",\n\t\t\t},\n\t\t},\n\t\t\"& li, .MuiAutocomplete-noOptions\": {\n\t\t\tcolor: \"#e7eaec !important\",\n\t\t\tbackgroundColor: \"rgb(41, 56, 70) !important\",\n\t\t\t\".modern-dark &\": {\n\t\t\t\tbackgroundColor: \"#1b1b1b !important\",\n\t\t\t},\n\t\t},\n\t\t\"& li:hover, .MuiAutocomplete-noOptions\": {\n\t\t\tcolor: \"#e7eaec !important\",\n\t\t\tbackgroundColor: \"#2f4050 !important\",\n\t\t\t\".modern-dark &\": {\n\t\t\t\tbackgroundColor: \"#323232 !important\",\n\t\t\t},\n\t\t},\n\t},\n\tinput: {\n\t\tcolor: \"#e7eaec\",\n\t\tfontSize: 13,\n\t},\n\troot: {\n\t\tcolor: \"#e7eaec\",\n\t},\n\terror: {\n\t\tcolor: \"red\",\n\t\tmarginBottom: 5,\n\t\tfontSize: 13,\n\t},\n\toption: {\n\t\tfontSize: 13,\n\t},\n\tdisabled: {\n\t\tcolor: \"#a3a3a3 !important\",\n\t\tfontSize: 12,\n\t},\n});\n\nexport default function SelectComponent(_props) {\n\tconst {\n\t\tname,\n\t\tref,\n\t\ttitle,\n\t\tvalueField = \"id\",\n\t\ttype,\n\t\tmultiple = false,\n\t\tcommaSeparated,\n\t\tdisplayField = \"name\",\n\t\tlimit = 10,\n\t\tdata: preData = [],\n\t\tisDisabled,\n\t\tneedsTargetModel,\n\t\tcanAddNew = false,\n\t\tgetOptionLabel,\n\t\tshouldFetchInStart = false,\n\t} = _props.field;\n\tconst { props, error } = _props;\n\tconst { propertyList, setPropertyList, onChange, editWidgetType, modelType } =\n\t\tprops;\n\tlet value = propertyList[name] || \"\";\n\tif (commaSeparated && type === \"select\") {\n\t\tconst values = value ? value.split(\",\") : [];\n\t\tvalue = values.map((val) => {\n\t\t\treturn { [valueField]: val };\n\t\t});\n\t}\n\tconst [data, setData] = useState([...preData]);\n\tconst [searchText, setsearchText] = useState(\"\");\n\tconst isMounted = React.useRef(true);\n\tconst [moreDialog, setMoreDialog] = useState(false);\n\tconst [offset, setOffset] = useState(0);\n\tconst [total, setTotal] = useState(0);\n\tconst [initialFetch, setInitialFetch] = useState(false);\n\tconst { targetModel } = propertyList;\n\tconst classes = useStyles();\n\tconst disabled = isDisabled\n\t\t? isDisabled(propertyList, editWidgetType, modelType)\n\t\t: false;\n\n\tconst handleInputChange = useCallback(\n\t\t(e, value, reason) => {\n\t\t\tif (reason !== \"reset\") {\n\t\t\t\tif (type === \"objectSelection\" && typeof value === \"object\") {\n\t\t\t\t\tsetsearchText(value[displayField]);\n\t\t\t\t} else {\n\t\t\t\t\tsetsearchText(value);\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\t[type, displayField]\n\t);\n\n\tconst getSelectValue = useCallback(\n\t\t(value = []) => {\n\t\t\tif (commaSeparated) {\n\t\t\t\treturn value ? value.map((e) => e.name).join(\",\") : \"\";\n\t\t\t}\n\t\t\treturn ref ? value[valueField] : value;\n\t\t},\n\t\t[valueField, commaSeparated, ref]\n\t);\n\n\tconst fetchOptions = useCallback(\n\t\t(searchText = \"\", offset = 0) => {\n\t\t\tconst criteria = [];\n\t\t\tif (searchText) {\n\t\t\t\tcriteria.push({\n\t\t\t\t\tfieldName: \"name\",\n\t\t\t\t\toperator: \"like\",\n\t\t\t\t\tvalue: searchText,\n\t\t\t\t});\n\t\t\t}\n\t\t\tif (\n\t\t\t\t(name === \"gridView\" || name === \"formView\") &&\n\t\t\t\tneedsTargetModel.includes(props.type)\n\t\t\t) {\n\t\t\t\tif (!targetModel) return;\n\t\t\t}\n\t\t\tif (name === \"gridView\") {\n\t\t\t\tneedsTargetModel.includes(props.type) &&\n\t\t\t\t\tcriteria.push({\n\t\t\t\t\t\tfieldName: \"model\",\n\t\t\t\t\t\toperator: \"=\",\n\t\t\t\t\t\tvalue: targetModel,\n\t\t\t\t\t});\n\t\t\t\tcriteria.push({ fieldName: \"type\", operator: \"=\", value: \"grid\" });\n\t\t\t}\n\t\t\tif (name === \"formView\") {\n\t\t\t\tneedsTargetModel.includes(props.type) &&\n\t\t\t\t\tcriteria.push({\n\t\t\t\t\t\tfieldName: \"model\",\n\t\t\t\t\t\toperator: \"=\",\n\t\t\t\t\t\tvalue: targetModel,\n\t\t\t\t\t});\n\t\t\t\tcriteria.push({ fieldName: \"type\", operator: \"=\", value: \"form\" });\n\t\t\t}\n\t\t\tconst data = {\n\t\t\t\tcriteria,\n\t\t\t\toperator: \"and\",\n\t\t\t};\n\t\t\tconst fields = [\n\t\t\t\t\"name\",\n\t\t\t\t\"fullName\",\n\t\t\t\tvalueField,\n\t\t\t\tdisplayField,\n\t\t\t\t\"parent\",\n\t\t\t].filter((e) => e);\n\t\t\tif (shouldFetchInStart && initialFetch) {\n\t\t\t\t// setData(data);\n\t\t\t} else {\n\t\t\t\treturn new AxelorService({ model: ref })\n\t\t\t\t\t.search({ fields, data, limit, offset })\n\t\t\t\t\t.then(({ data, total }) => {\n\t\t\t\t\t\tsetInitialFetch(true);\n\t\t\t\t\t\tif (data && data.length) {\n\t\t\t\t\t\t\tif (isMounted.current) {\n\t\t\t\t\t\t\t\t!moreDialog &&\n\t\t\t\t\t\t\t\t\ttotal > limit &&\n\t\t\t\t\t\t\t\t\tdata.push({\n\t\t\t\t\t\t\t\t\t\tname: translate(\"Show more...\"),\n\t\t\t\t\t\t\t\t\t\tid: \"studio_show_More_View\",\n\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\tsetTotal(total);\n\t\t\t\t\t\t\t\tconst uniqueData = _.uniqBy(data, displayField);\n\t\t\t\t\t\t\t\tsetData(uniqueData);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t}\n\t\t},\n\t\t[\n\t\t\tname,\n\t\t\tref,\n\t\t\ttargetModel,\n\t\t\tvalueField,\n\t\t\tdisplayField,\n\t\t\tlimit,\n\t\t\tneedsTargetModel,\n\t\t\tprops.type,\n\t\t\tmoreDialog,\n\t\t\tinitialFetch,\n\t\t\tshouldFetchInStart,\n\t\t]\n\t);\n\n\tconst optionDebounceHandler = React.useCallback(() => {\n\t\tref && fetchOptions(searchText);\n\t}, [fetchOptions, searchText, ref]);\n\n\tconst getValue = (value) => {\n\t\treturn typeof value === \"string\" && ref ? { [valueField]: value } : value;\n\t};\n\n\tconst getInputAsOption = React.useCallback(\n\t\t(value) => {\n\t\t\tif (value && typeof value === \"string\" && ref) {\n\t\t\t\tvalue = { [valueField]: value };\n\t\t\t}\n\t\t\treturn value;\n\t\t},\n\t\t[ref, valueField]\n\t);\n\n\tconst handleSearch = React.useCallback((value) => {\n\t\tsetsearchText(value);\n\t\tsetOffset(0);\n\t}, []);\n\n\tconst handleNext = React.useCallback(() => {\n\t\tconst newOffset = offset + limit;\n\t\tif (newOffset <= total) {\n\t\t\tsetOffset(newOffset);\n\t\t\tfetchOptions(searchText, newOffset);\n\t\t}\n\t}, [limit, total, offset, fetchOptions, searchText]);\n\n\tconst handlePrevious = React.useCallback(() => {\n\t\tlet newOffset = offset - limit;\n\t\tnewOffset = newOffset > 0 ? newOffset : 0;\n\t\tsetOffset(newOffset);\n\t\tfetchOptions(searchText, newOffset);\n\t}, [offset, limit, searchText, fetchOptions]);\n\n\tconst handleClose = React.useCallback(() => {\n\t\tsetMoreDialog(false);\n\t\tsetOffset(0);\n\t}, []);\n\n\tconst handleChange = React.useCallback(\n\t\t(e, _value) => {\n\t\t\tif (_value?.id === \"studio_show_More_View\") {\n\t\t\t\tsetMoreDialog(true);\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tif (multiple) {\n\t\t\t\thandleSearch(\"\");\n\t\t\t\tif (e.fromDialog) {\n\t\t\t\t\t_value = [...value, _value];\n\t\t\t\t} else {\n\t\t\t\t\tconst hasMoreView =\n\t\t\t\t\t\t_value.findIndex((v) => v?.id === \"studio_show_More_View\") !== -1;\n\t\t\t\t\tif (hasMoreView) {\n\t\t\t\t\t\tsetMoreDialog(true);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\t_value = _value\n\t\t\t\t\t.map((val) => {\n\t\t\t\t\t\tif (val?.id !== \"studio_show_More_View\") {\n\t\t\t\t\t\t\treturn getInputAsOption(val);\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn undefined;\n\t\t\t\t\t})\n\t\t\t\t\t.filter((e) => e);\n\t\t\t} else {\n\t\t\t\tif (_value && _value.inputValue && _value.inputValue.length && ref) {\n\t\t\t\t\t_value[valueField] = _value.inputValue;\n\t\t\t\t}\n\t\t\t}\n\t\t\tconst updatedValue = {\n\t\t\t\t...propertyList,\n\t\t\t\t[name]:\n\t\t\t\t\ttype === \"objectSelection\"\n\t\t\t\t\t\t? _value\n\t\t\t\t\t\t: _value && getSelectValue(_value),\n\t\t\t};\n\t\t\tlet payload = {};\n\t\t\tif (name === \"targetModel\") {\n\t\t\t\tconst { targetModel } = updatedValue || {};\n\t\t\t\tpayload = {\n\t\t\t\t\tgridView: _value ? getDefaultGridFormName(targetModel) : null,\n\t\t\t\t\tformView: _value ? getDefaultGridFormName(targetModel, true) : null,\n\t\t\t\t};\n\t\t\t}\n\t\t\tsetPropertyList({ ...(updatedValue || {}), ...payload });\n\t\t\tonChange(\n\t\t\t\t{ ...(updatedValue || {}), ...payload },\n\t\t\t\tname !== \"selection\" ? name : undefined\n\t\t\t);\n\t\t},\n\t\t[\n\t\t\tgetSelectValue,\n\t\t\tmultiple,\n\t\t\tname,\n\t\t\tonChange,\n\t\t\tsetPropertyList,\n\t\t\tpropertyList,\n\t\t\tvalue,\n\t\t\ttype,\n\t\t\tref,\n\t\t\tgetInputAsOption,\n\t\t\tvalueField,\n\t\t\thandleSearch,\n\t\t]\n\t);\n\n\tuseDebounceEffect(optionDebounceHandler, 500);\n\n\tuseEffect(() => {\n\t\tisMounted.current = true;\n\t\tfetchOptions();\n\t\treturn () => {\n\t\t\tisMounted.current = false;\n\t\t};\n\t}, [fetchOptions]);\n\n\tuseEffect(() => {\n\t\tif (!multiple) {\n\t\t\tif (typeof value === \"object\") {\n\t\t\t\tsetsearchText(value[displayField]);\n\t\t\t} else {\n\t\t\t\tsetsearchText(value);\n\t\t\t}\n\t\t}\n\t}, [multiple, value, displayField, type]);\n\treturn (\n\t\t<React.Fragment>\n\t\t\t<AutoComplete\n\t\t\t\tclasses={{\n\t\t\t\t\tinputFocused: disabled ? classes.disabled : classes.input,\n\t\t\t\t\tclearIndicator: classes.input,\n\t\t\t\t\tpopupIndicator: disabled ? classes.disabled : classes.input,\n\t\t\t\t\tpopper: classes.popperAutoComplete,\n\t\t\t\t\toption: classes.option,\n\t\t\t\t\tnoOptions: classes.option,\n\t\t\t\t}}\n\t\t\t\tclassName={classes.autoComplete}\n\t\t\t\tdisabled={disabled}\n\t\t\t\tmultiple={multiple}\n\t\t\t\toptions={data}\n\t\t\t\tforcePopupIcon={true}\n\t\t\t\tfreeSolo={type !== \"objectSelection\"}\n\t\t\t\tvalue={multiple ? value || [] : getValue(value)}\n\t\t\t\tinputValue={searchText || \"\"}\n\t\t\t\tsize=\"small\"\n\t\t\t\tonInputChange={handleInputChange}\n\t\t\t\t{...{\n\t\t\t\t\tfilterOptions: (options, params) => {\n\t\t\t\t\t\tconst filtered = filter(options, params);\n\t\t\t\t\t\t// Suggest the creation of a new value\n\t\t\t\t\t\tif (searchText !== \"\" && canAddNew) {\n\t\t\t\t\t\t\tfiltered.splice(0, 0, {\n\t\t\t\t\t\t\t\tinputValue: searchText,\n\t\t\t\t\t\t\t\tname: searchText,\n\t\t\t\t\t\t\t\ttitle: `Add \"${searchText}\"`,\n\t\t\t\t\t\t\t\ttype: \"canAddNew\",\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\t\t\t\t\t\tconst showMore = options.find(\n\t\t\t\t\t\t\t(o) => o.id === \"studio_show_More_View\"\n\t\t\t\t\t\t);\n\t\t\t\t\t\tif (\n\t\t\t\t\t\t\tshowMore &&\n\t\t\t\t\t\t\t![\"\", null, undefined].includes(params.inputValue)\n\t\t\t\t\t\t) {\n\t\t\t\t\t\t\tconst hasShowMore =\n\t\t\t\t\t\t\t\tfiltered.findIndex((o) => o.id === \"studio_show_More_View\") !==\n\t\t\t\t\t\t\t\t-1;\n\n\t\t\t\t\t\t\t!hasShowMore && filtered.push({ ...showMore });\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\treturn filtered;\n\t\t\t\t\t},\n\t\t\t\t}}\n\t\t\t\tonChange={handleChange}\n\t\t\t\trenderInput={(params) => (\n\t\t\t\t\t<TextField\n\t\t\t\t\t\t{...params}\n\t\t\t\t\t\tautoComplete=\"off\"\n\t\t\t\t\t\tvariant=\"outlined\"\n\t\t\t\t\t\tlabel={translate(camleCaseString(title || name))}\n\t\t\t\t\t\tInputLabelProps={{\n\t\t\t\t\t\t\tclassName: disabled ? classes.disabled : classes.label,\n\t\t\t\t\t\t}}\n\t\t\t\t\t/>\n\t\t\t\t)}\n\t\t\t\tgetOptionLabel={(option) => {\n\t\t\t\t\tif (getOptionLabel) {\n\t\t\t\t\t\treturn getOptionLabel(option, data);\n\t\t\t\t\t}\n\t\t\t\t\treturn option.type === \"canAddNew\"\n\t\t\t\t\t\t? option[\"title\"]\n\t\t\t\t\t\t: typeof option === \"string\"\n\t\t\t\t\t\t? option\n\t\t\t\t\t\t: option[displayField] || \"\";\n\t\t\t\t}}\n\t\t\t/>\n\t\t\t{error && <Typography className={classes.error}>{error}</Typography>}\n\t\t\t{moreDialog && (\n\t\t\t\t<SearchView\n\t\t\t\t\tsearchText={searchText}\n\t\t\t\t\tlist={data}\n\t\t\t\t\ttotal={total}\n\t\t\t\t\toffset={offset}\n\t\t\t\t\tdisplayField={displayField}\n\t\t\t\t\topen={moreDialog}\n\t\t\t\t\tonNext={handleNext}\n\t\t\t\t\tonPrevious={handlePrevious}\n\t\t\t\t\thandleClose={handleClose}\n\t\t\t\t\tsetSearchText={handleSearch}\n\t\t\t\t\ttitle={translate(camleCaseString(title || name))}\n\t\t\t\t\tonChange={(value) => handleChange({ fromDialog: true }, value)}\n\t\t\t\t/>\n\t\t\t)}\n\t\t</React.Fragment>\n\t);\n}\n","import React from \"react\";\nimport { TextField, Typography } from \"@material-ui/core\";\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport { useStore } from \"../store/context\";\nconst useStyles = makeStyles({\n\tcontainer: {\n\t\tmarginBottom: 15,\n\t},\n\trow: {\n\t\tdisplay: \"flex\",\n\t},\n\tlanguageText: {\n\t\twidth: \"15%\",\n\t\tmarginTop: 8,\n\t\ttextTransform: \"capitalize\",\n\t\ttextAlign: \"center\",\n\t},\n});\n\nfunction TranslationGrid(props) {\n\tconst classes = useStyles();\n\tconst { state, update } = useStore();\n\tconst { keyValue, ...rest } = props;\n\tconst { translationList } = state;\n\tconst [translations, setTranslations] = React.useState([]);\n\n\tconst handleTranslationChange = React.useCallback(\n\t\t({ key, message, language }) => {\n\t\t\tsetTranslations((_translations) => {\n\t\t\t\tlet newList = [..._translations];\n\t\t\t\tconst translationIndex = newList.findIndex(\n\t\t\t\t\t(e) => e.key === key && e.language === language\n\t\t\t\t);\n\n\t\t\t\tif (translationIndex !== -1) {\n\t\t\t\t\tnewList[translationIndex] = { ...newList[translationIndex], message };\n\t\t\t\t} else {\n\t\t\t\t\tnewList.push({ key, message, language });\n\t\t\t\t}\n\t\t\t\treturn [...newList];\n\t\t\t});\n\t\t},\n\t\t[]\n\t);\n\n\tconst handleTranslationUpdate = React.useCallback(\n\t\t({ key, message, language }) => {\n\t\t\tupdate((draft) => {\n\t\t\t\tconst translationIndex = draft.translationList.findIndex(\n\t\t\t\t\t(e) => e.key === key && e.language === language\n\t\t\t\t);\n\n\t\t\t\tif (translationIndex !== -1) {\n\t\t\t\t\tdraft.translationList[translationIndex].message = message;\n\t\t\t\t} else {\n\t\t\t\t\tdraft.translationList.push({ key, message, language });\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\t\t[update]\n\t);\n\n\tReact.useEffect(() => {\n\t\tsetTranslations([...translationList]);\n\t}, [translationList]);\n\n\treturn (\n\t\t<div className={classes.container}>\n\t\t\t{state.languageList.map((lang, i) => (\n\t\t\t\t<div key={i} className={classes.row}>\n\t\t\t\t\t<Typography classes={{ root: classes.languageText }}>\n\t\t\t\t\t\t{lang.value}\n\t\t\t\t\t</Typography>\n\t\t\t\t\t<TextField\n\t\t\t\t\t\tvariant=\"outlined\"\n\t\t\t\t\t\t{...rest}\n\t\t\t\t\t\tvalue={\n\t\t\t\t\t\t\ttranslations.find(\n\t\t\t\t\t\t\t\t(e) => e.key === keyValue && e.language === lang.value\n\t\t\t\t\t\t\t)?.message || \"\"\n\t\t\t\t\t\t}\n\t\t\t\t\t\tonChange={(e) =>\n\t\t\t\t\t\t\thandleTranslationChange({\n\t\t\t\t\t\t\t\tkey: keyValue,\n\t\t\t\t\t\t\t\tmessage: e.target.value,\n\t\t\t\t\t\t\t\tlanguage: lang.value,\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t}\n\t\t\t\t\t\tonBlur={(e) =>\n\t\t\t\t\t\t\te.target.value &&\n\t\t\t\t\t\t\thandleTranslationUpdate({\n\t\t\t\t\t\t\t\tkey: keyValue,\n\t\t\t\t\t\t\t\tmessage: e.target.value,\n\t\t\t\t\t\t\t\tlanguage: lang.value,\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t}\n\t\t\t\t\t/>\n\t\t\t\t</div>\n\t\t\t))}\n\t\t</div>\n\t);\n}\n\nexport default TranslationGrid;\n","import React from \"react\";\nimport Button from \"@material-ui/core/Button\";\nimport Dialog from \"@material-ui/core/Dialog\";\nimport DialogActions from \"@material-ui/core/DialogActions\";\nimport DialogContent from \"@material-ui/core/DialogContent\";\nimport DialogContentText from \"@material-ui/core/DialogContentText\";\nimport DialogTitle from \"@material-ui/core/DialogTitle\";\nimport { makeStyles } from \"@material-ui/core/styles\";\n\nimport { translate } from \"../utils\";\n\nconst useStyles = makeStyles({\n\tpaper: {\n\t\tminWidth: 300,\n\t},\n});\n\nexport default function DeleteConfirmation({\n\tonOk,\n\tonClose,\n\topen,\n\tmessage,\n\ttitle = \"Delete Confirmation\",\n}) {\n\tconst classes = useStyles();\n\treturn (\n\t\t<Dialog\n\t\t\topen={open}\n\t\t\tonClose={onClose}\n\t\t\taria-labelledby=\"alert-dialog-title\"\n\t\t\taria-describedby=\"alert-dialog-description\"\n\t\t\tclasses={{\n\t\t\t\tpaper: classes.paper,\n\t\t\t}}\n\t\t>\n\t\t\t<DialogTitle id=\"alert-dialog-title\">{translate(title)}</DialogTitle>\n\t\t\t<DialogContent>\n\t\t\t\t<DialogContentText id=\"alert-dialog-description\">\n\t\t\t\t\t{translate(message)}\n\t\t\t\t</DialogContentText>\n\t\t\t</DialogContent>\n\t\t\t<DialogActions>\n\t\t\t\t<Button onClick={onOk} color=\"primary\">\n\t\t\t\t\t{translate(\"Yes\")}\n\t\t\t\t</Button>\n\t\t\t\t<Button onClick={onClose} color=\"primary\" autoFocus>\n\t\t\t\t\t{translate(\"No\")}\n\t\t\t\t</Button>\n\t\t\t</DialogActions>\n\t\t</Dialog>\n\t);\n}\n","import React, { useState } from \"react\";\nimport {\n\tTextField,\n\tGrid,\n\tTypography,\n\tFormControlLabel,\n\tSwitch,\n\tIconButton,\n} from \"@material-ui/core\";\nimport AutoComplete from \"@material-ui/lab/Autocomplete\";\nimport classNames from \"classnames\";\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport { options } from \"./list\";\nimport {\n\tcamleCaseString,\n\ttranslate,\n\tgetProperty,\n\tgetPropertyValue,\n\tgenerateFieldUniqueTitle,\n\tcapitalizeFirst,\n} from \"../utils\";\nimport SelectComponent from \"../components/SelectComponent\";\nimport { MODEL_TYPE, TYPE, typeReplacer, ENTITY_TYPE } from \"../constants\";\nimport { useStore } from \"../store/context\";\nimport {\n\tFormView,\n\tGridView,\n\tJsonRelationalField,\n\tSelectableType,\n\tTargetJsonModel,\n\tTargetModel,\n} from \"./propertyFields\";\nimport TranslationGrid from \"../components/TranslationGrid\";\nimport TranslateIcon from \"@material-ui/icons/Translate\";\nimport CloseIcon from \"@material-ui/icons/Delete\";\nimport ClearIcon from \"@material-ui/icons/Close\";\nimport { getSelectionText } from \"../Toolbar/api\";\n\nimport DialogConfirmation from \"../Toolbar/DeleteConfirmation\";\n\nconst useStyles = makeStyles({\n\tinput: {\n\t\tbackgroundColor: \"#293846\",\n\t\tmarginTop: 15,\n\t\t\".modern-dark &\": {\n\t\t\tbackgroundColor: \"#323232\",\n\t\t},\n\t},\n\ttranslationInput: {\n\t\tpaddingTop: 10,\n\t\tpaddingBottom: 10,\n\t},\n\ttranslationInputView: {\n\t\tbackgroundColor: \"#293846\",\n\t\tmarginBottom: 5,\n\t\t\".modern-dark &\": {\n\t\t\tbackgroundColor: \"#323232\",\n\t\t},\n\t},\n\tlabel: {\n\t\tcolor: \"#f7f7f7\",\n\t\tfontSize: 12,\n\t\t\"&#outlined-basic-label\": {\n\t\t\tcolor: \"#f7f7f7\",\n\t\t},\n\t\t\"&.MuiInputLabel-shrink\": {\n\t\t\ttop: \"1px !important\",\n\t\t},\n\t},\n\toutlinedRoot: {\n\t\tcolor: \"#ffffff\",\n\t\t\"&:hover $notchedOutline\": {\n\t\t\tborderColor: \"#ffffff\",\n\t\t},\n\t\t\"&$focused $notchedOutline\": {\n\t\t\tborderColor: \"white\",\n\t\t\tborderWidth: 1,\n\t\t},\n\t},\n\tnotchedOutline: {},\n\tfocused: {\n\t\tcolor: \"#ffffff\",\n\t},\n\tswitchBase: {\n\t\t\"&$checked\": {\n\t\t\tcolor: \"#ffffff\",\n\t\t},\n\t\t\"&$checked + $track\": {\n\t\t\tbackgroundColor: \"#ffffff\",\n\t\t},\n\t},\n\tchecked: {},\n\ttrack: {},\n\tselection: {\n\t\tcolor: \"#ffffff\",\n\t\tbackgroundColor: \"#293846\",\n\t\t\".modern-dark &\": {\n\t\t\tbackgroundColor: \"#323232\",\n\t\t},\n\t},\n\ticonOutlined: {\n\t\tcolor: \"#ffffff\",\n\t},\n\tpanelTitle: {\n\t\tcolor: \"peachpuff\",\n\t\tfontWeight: \"600\",\n\t},\n\tpanelMargin: {\n\t\tmargin: \"25px 0px 0px 0px\",\n\t},\n\tdisableInput: {\n\t\tcolor: \"#a3a3a3 !important\",\n\t},\n\tunique: {\n\t\tcolor: \"#0275d8\",\n\t},\n\trequired: {\n\t\tcolor: \"red\",\n\t},\n\ttranslateButton: {\n\t\tcolor: \"#ffffff\",\n\t\tpadding: \"10px 12px\",\n\t\t\"& > span > svg\": {\n\t\t\tfontSize: \"1.1rem\",\n\t\t},\n\t},\n\tstaticSelectMenuItem: {\n\t\tcolor: \"#ffffff\",\n\t\tbackgroundColor: \"rgb(41, 56, 70) !important\",\n\t\t\"&:hover\": {\n\t\t\tbackgroundColor: \"#293846 !important\",\n\t\t},\n\t},\n\tautoComplete: {\n\t\twidth: \"100%\",\n\t\tmarginTop: 15,\n\t\tbackgroundColor: \"#293846\",\n\t\t\"& > div > label\": {\n\t\t\tcolor: \"#ffffff !important\",\n\t\t\tfontSize: 13,\n\t\t},\n\t\t\".modern-dark &\": {\n\t\t\tbackgroundColor: \"#323232\",\n\t\t},\n\t},\n\tautoCompleteInput: {\n\t\tcolor: \"#ffffff\",\n\t\tfontSize: 13,\n\t},\n\tautoCompleteOption: {\n\t\tfontSize: 13,\n\t\t\"& ul, .MuiAutocomplete-noOptions\": {\n\t\t\tbackgroundColor: \"rgb(41, 56, 70) !important\",\n\t\t\t\".modern-dark &\": {\n\t\t\t\tbackgroundColor: \"#1b1b1b !important\",\n\t\t\t},\n\t\t},\n\t\t\"& li, .MuiAutocomplete-noOptions\": {\n\t\t\tcolor: \"#ffffff !important\",\n\t\t\tbackgroundColor: \"rgb(41, 56, 70) !important\",\n\t\t\t\".modern-dark &\": {\n\t\t\t\tbackgroundColor: \"#1b1b1b !important\",\n\t\t\t},\n\t\t},\n\t\t\"& li:hover, .MuiAutocomplete-noOptions\": {\n\t\t\tcolor: \"#ffffff !important\",\n\t\t\tbackgroundColor: \"#2f4050 !important\",\n\t\t\t\".modern-dark &\": {\n\t\t\t\tbackgroundColor: \"#323232 !important\",\n\t\t\t},\n\t\t},\n\t},\n\ttextFieldInput: {\n\t\t// padding: \"10px 14px !important\",\n\t\tfontSize: 13,\n\t},\n\tbooleanInputLabel: {\n\t\tfontSize: 12,\n\t},\n\tdisabled: {\n\t\tcolor: \"#a3a3a3 !important\",\n\t\tfontSize: 12,\n\t},\n});\n\nconst PropertiesContext = React.createContext();\n\nfunction Label(text, field) {\n\tconst classes = useStyles();\n\treturn (\n\t\t<span>\n\t\t\t<span>{text}</span>\n\t\t\t{field.unique && <span className={classes.unique}> (unique) </span>}\n\t\t\t{field.required && <span className={classes.required}> * </span>}\n\t\t</span>\n\t);\n}\n\nconst isValueGenerated = (value) => {\n\treturn value.includes(\"studio:\");\n};\n\nconst hasPropertyToShow = (list, type) => {\n\treturn (\n\t\tlist.filter(\n\t\t\t(item) => !item.dependModelType || item.dependModelType === type\n\t\t).length > 0\n\t);\n};\n\nfunction StringInput(_props) {\n\tconst {\n\t\tindex,\n\t\tmultiline = false,\n\t\terror,\n\t\tparentPanel,\n\t\tonTranslationRemove,\n\t\tclearable = false,\n\t} = _props;\n\tconst classes = useStyles();\n\tconst [confirm, setConfirm] = React.useState(false);\n\tconst {\n\t\ttitle,\n\t\tname,\n\t\ttype,\n\t\trequired,\n\t\treadOnly,\n\t\tmax,\n\t\tmin,\n\t\tparentField,\n\t\ttranslationView,\n\t\t...rest\n\t} = _props.field;\n\tconst props = React.useContext(PropertiesContext);\n\tconst {\n\t\tpropertyList,\n\t\tsetPropertyList,\n\t\tonChange,\n\t\tmodelType,\n\t\tmetaFieldStore,\n\t\teditWidgetType,\n\t} = props;\n\tlet label = Label(translate(camleCaseString(title || name)), _props.field);\n\tlet placeholder = translate(camleCaseString(title || name));\n\tif (name === \"showIf\" || name === \"requiredIf\") {\n\t\tplaceholder = \"id == 1\";\n\t} else if (name === \"hideIf\") {\n\t\tplaceholder = \"id == null\";\n\t} else if (name === \"readOnlyIf\") {\n\t\tplaceholder = \"id != null\";\n\t}\n\tlet value = propertyList[name] || \"\";\n\tif (\n\t\t(modelType === rest.modelType || props.editWidgetType === \"customField\") &&\n\t\tparentField\n\t) {\n\t\tconst field = propertyList[parentField]\n\t\t\t? JSON.parse(propertyList[parentField])\n\t\t\t: {};\n\t\tvalue = field[name] || \"\";\n\t}\n\tif (rest.formatter) {\n\t\tvalue = rest.formatter(value, propertyList);\n\t}\n\tlet disabled = Boolean(readOnly);\n\tif (rest.isDisabled) {\n\t\tdisabled = rest.isDisabled({\n\t\t\tproperties: propertyList,\n\t\t\tmetaFieldStore,\n\t\t\teditWidgetType,\n\t\t\tmodelType,\n\t\t\tparentPanel,\n\t\t});\n\t}\n\n\tconst handleTranslationClick = React.useCallback(() => {\n\t\tif (isValueGenerated(value)) {\n\t\t\treturn;\n\t\t}\n\t\tconst newValue = generateFieldUniqueTitle({\n\t\t\tname,\n\t\t\tfieldName: propertyList[name] || type,\n\t\t});\n\t\tonChange(\n\t\t\t{\n\t\t\t\t...(propertyList || {}),\n\t\t\t\t...getProperty(\n\t\t\t\t\tname,\n\t\t\t\t\tnewValue,\n\t\t\t\t\tparentField,\n\t\t\t\t\tpropertyList[parentField],\n\t\t\t\t\t!(modelType === rest.modelType) || editWidgetType === \"customField\"\n\t\t\t\t),\n\t\t\t},\n\t\t\tname\n\t\t);\n\t}, [\n\t\tpropertyList,\n\t\tname,\n\t\ttype,\n\t\tvalue,\n\t\tonChange,\n\t\trest.modelType,\n\t\tmodelType,\n\t\tparentField,\n\t\teditWidgetType,\n\t]);\n\n\tconst handleTranslationRemove = React.useCallback(() => {\n\t\tsetConfirm(false);\n\t\tonChange(\n\t\t\t{\n\t\t\t\t...(propertyList || {}),\n\t\t\t\t...getProperty(\n\t\t\t\t\tname,\n\t\t\t\t\t\"\",\n\t\t\t\t\tparentField,\n\t\t\t\t\tpropertyList[parentField],\n\t\t\t\t\t!(modelType === rest.modelType)\n\t\t\t\t),\n\t\t\t},\n\t\t\tname\n\t\t);\n\t\tonTranslationRemove(value);\n\t}, [\n\t\tonTranslationRemove,\n\t\tvalue,\n\t\tname,\n\t\tparentField,\n\t\tmodelType,\n\t\tonChange,\n\t\tpropertyList,\n\t\trest.modelType,\n\t]);\n\n\tconst removeTranslation = React.useCallback(() => {\n\t\tsetConfirm(true);\n\t}, []);\n\n\tconst onClose = React.useCallback(() => {\n\t\tsetConfirm(false);\n\t}, []);\n\n\treturn (\n\t\t<React.Fragment>\n\t\t\t<TextField\n\t\t\t\terror={Boolean(error)}\n\t\t\t\thelperText={error}\n\t\t\t\tInputLabelProps={{\n\t\t\t\t\tclassName: disabled ? classes.disabled : classes.label,\n\t\t\t\t}}\n\t\t\t\tsize=\"small\"\n\t\t\t\tInputProps={{\n\t\t\t\t\tclasses: {\n\t\t\t\t\t\troot: classes && disabled ? \"\" : classes.outlinedRoot,\n\t\t\t\t\t\tnotchedOutline: classes && classes.notchedOutline,\n\t\t\t\t\t\tfocused: classes && classes.focused,\n\t\t\t\t\t\tdisabled: classes && classes.disableInput,\n\t\t\t\t\t\tinput: classes && classes.textFieldInput,\n\t\t\t\t\t},\n\t\t\t\t\tendAdornment: translationView ? (\n\t\t\t\t\t\tisValueGenerated(value) ? (\n\t\t\t\t\t\t\t<IconButton\n\t\t\t\t\t\t\t\tclassName={classes.translateButton}\n\t\t\t\t\t\t\t\tonClick={removeTranslation}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<CloseIcon />\n\t\t\t\t\t\t\t</IconButton>\n\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\t<IconButton\n\t\t\t\t\t\t\t\tclassName={classes.translateButton}\n\t\t\t\t\t\t\t\tonClick={handleTranslationClick}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<TranslateIcon />\n\t\t\t\t\t\t\t</IconButton>\n\t\t\t\t\t\t)\n\t\t\t\t\t) : clearable ? (\n\t\t\t\t\t\t<IconButton\n\t\t\t\t\t\t\tclassName={classes.translateButton}\n\t\t\t\t\t\t\tonClick={() => {\n\t\t\t\t\t\t\t\tlet value = \"\";\n\t\t\t\t\t\t\t\tlet flag = true;\n\t\t\t\t\t\t\t\tif (\n\t\t\t\t\t\t\t\t\trest.modelType === MODEL_TYPE.BASE &&\n\t\t\t\t\t\t\t\t\tprops.editWidgetType !== \"customField\"\n\t\t\t\t\t\t\t\t) {\n\t\t\t\t\t\t\t\t\tflag =\n\t\t\t\t\t\t\t\t\t\tvalue === \"\"\n\t\t\t\t\t\t\t\t\t\t\t? propertyList[name] !== undefined\n\t\t\t\t\t\t\t\t\t\t\t\t? true\n\t\t\t\t\t\t\t\t\t\t\t\t: false\n\t\t\t\t\t\t\t\t\t\t\t: true;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tif (\n\t\t\t\t\t\t\t\t\trest.modelType === MODEL_TYPE.CUSTOM &&\n\t\t\t\t\t\t\t\t\tprops.editWidgetType === \"customField\"\n\t\t\t\t\t\t\t\t) {\n\t\t\t\t\t\t\t\t\t// set null value when value is negative for custom view & custom fields\n\t\t\t\t\t\t\t\t\tvalue = value || null;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tif (flag) {\n\t\t\t\t\t\t\t\t\tonChange(\n\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\t...(propertyList || {}),\n\t\t\t\t\t\t\t\t\t\t\t...getProperty(\n\t\t\t\t\t\t\t\t\t\t\t\tname,\n\t\t\t\t\t\t\t\t\t\t\t\tvalue,\n\t\t\t\t\t\t\t\t\t\t\t\tparentField,\n\t\t\t\t\t\t\t\t\t\t\t\tpropertyList[parentField],\n\t\t\t\t\t\t\t\t\t\t\t\t!(modelType === rest.modelType) ||\n\t\t\t\t\t\t\t\t\t\t\t\t\teditWidgetType === \"customField\"\n\t\t\t\t\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t\tname\n\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<ClearIcon />\n\t\t\t\t\t\t</IconButton>\n\t\t\t\t\t) : null,\n\t\t\t\t}}\n\t\t\t\tinputProps={{ min: min, max: max }}\n\t\t\t\tkey={index}\n\t\t\t\tclassName={classes && classes.input}\n\t\t\t\tid=\"outlined-basic\"\n\t\t\t\tmultiline={multiline}\n\t\t\t\ttype={type === \"integer\" ? \"number\" : type}\n\t\t\t\tlabel={label}\n\t\t\t\tplaceholder={placeholder}\n\t\t\t\tvariant=\"outlined\"\n\t\t\t\tdisabled={disabled || (translationView && isValueGenerated(value))}\n\t\t\t\tvalue={value}\n\t\t\t\tminRows={3}\n\t\t\t\tautoComplete=\"off\"\n\t\t\t\tonChange={(e) => {\n\t\t\t\t\tif (type === \"integer\" && isNaN(Number(e.target.value))) {\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t\tif (min && max) {\n\t\t\t\t\t\tconst value = Number(e.target.value);\n\t\t\t\t\t\tif (value < min || value > max) {\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tlet value = e.target.value;\n\t\t\t\t\tsetPropertyList({\n\t\t\t\t\t\t...(propertyList || {}),\n\t\t\t\t\t\t...getProperty(\n\t\t\t\t\t\t\tname,\n\t\t\t\t\t\t\tvalue,\n\t\t\t\t\t\t\tparentField,\n\t\t\t\t\t\t\tpropertyList[parentField],\n\t\t\t\t\t\t\t!(modelType !== rest.modelType) ||\n\t\t\t\t\t\t\t\teditWidgetType === \"customField\"\n\t\t\t\t\t\t),\n\t\t\t\t\t});\n\t\t\t\t}}\n\t\t\t\tonBlur={(e) => {\n\t\t\t\t\tif (type === \"integer\" && isNaN(Number(e.target.value))) {\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t\tif (min && max) {\n\t\t\t\t\t\tconst value = Number(e.target.value);\n\t\t\t\t\t\tif (value < min || value > max) {\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tlet value = e.target.value;\n\t\t\t\t\tlet flag = true;\n\t\t\t\t\tif (\n\t\t\t\t\t\trest.modelType === MODEL_TYPE.BASE &&\n\t\t\t\t\t\tprops.editWidgetType !== \"customField\"\n\t\t\t\t\t) {\n\t\t\t\t\t\tflag =\n\t\t\t\t\t\t\tvalue === \"\"\n\t\t\t\t\t\t\t\t? propertyList[name] !== undefined\n\t\t\t\t\t\t\t\t\t? true\n\t\t\t\t\t\t\t\t\t: false\n\t\t\t\t\t\t\t\t: true;\n\t\t\t\t\t}\n\t\t\t\t\tif (\n\t\t\t\t\t\trest.modelType === MODEL_TYPE.CUSTOM &&\n\t\t\t\t\t\tprops.editWidgetType === \"customField\"\n\t\t\t\t\t) {\n\t\t\t\t\t\t// set null value when value is negative for custom view & custom fields\n\t\t\t\t\t\tvalue = value || null;\n\t\t\t\t\t}\n\t\t\t\t\tif (flag) {\n\t\t\t\t\t\tonChange(\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t...(propertyList || {}),\n\t\t\t\t\t\t\t\t...getProperty(\n\t\t\t\t\t\t\t\t\tname,\n\t\t\t\t\t\t\t\t\tvalue && name === \"name\" ? value.trim() : value,\n\t\t\t\t\t\t\t\t\tparentField,\n\t\t\t\t\t\t\t\t\tpropertyList[parentField],\n\t\t\t\t\t\t\t\t\t!(modelType === rest.modelType) ||\n\t\t\t\t\t\t\t\t\t\teditWidgetType === \"customField\"\n\t\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\tname\n\t\t\t\t\t\t);\n\t\t\t\t\t}\n\t\t\t\t}}\n\t\t\t/>\n\t\t\t{translationView && isValueGenerated(value) && (\n\t\t\t\t<TranslationGrid\n\t\t\t\t\tInputProps={{\n\t\t\t\t\t\tclasses: {\n\t\t\t\t\t\t\troot: classes && classes.outlinedRoot,\n\t\t\t\t\t\t\tnotchedOutline: classes && classes.notchedOutline,\n\t\t\t\t\t\t\tfocused: classes && classes.focused,\n\t\t\t\t\t\t\tdisabled: classes && classes.disableInput,\n\t\t\t\t\t\t\tinput: classes && classes.translationInput,\n\t\t\t\t\t\t},\n\t\t\t\t\t}}\n\t\t\t\t\tInputLabelProps={{\n\t\t\t\t\t\tclassName: disabled ? classes.disabled : classes.label,\n\t\t\t\t\t}}\n\t\t\t\t\tclassName={classes && classes.translationInputView}\n\t\t\t\t\tkeyValue={value}\n\t\t\t\t/>\n\t\t\t)}\n\t\t\t{confirm && (\n\t\t\t\t<DialogConfirmation\n\t\t\t\t\topen={confirm}\n\t\t\t\t\tmessage=\"Are you sure, do you want to delete translations?\"\n\t\t\t\t\tonClose={onClose}\n\t\t\t\t\tonOk={handleTranslationRemove}\n\t\t\t\t/>\n\t\t\t)}\n\t\t</React.Fragment>\n\t);\n}\n\nfunction BooleanField(_props) {\n\tconst [openAlert, setAlertOpen] = useState(false);\n\tconst { index } = _props;\n\tlet { name, title, parentField, defaultValue, uncheckDialog, ...rest } =\n\t\t_props.field;\n\tconst props = React.useContext(PropertiesContext);\n\tconst {\n\t\tpropertyList,\n\t\tsetPropertyList,\n\t\tonChange,\n\t\tmodelType,\n\t\teditWidgetType,\n\t\tmetaFieldStore,\n\t} = props;\n\tlet _value = getPropertyValue(\n\t\tpropertyList,\n\t\tname,\n\t\tparentField,\n\t\tdefaultValue,\n\t\t!(modelType !== rest.modelType) || editWidgetType === \"customField\"\n\t);\n\tlet fieldValue = Boolean(_value ? !(_value === \"false\") : _value);\n\tconst classes = useStyles();\n\tif (rest.getValue) {\n\t\tfieldValue = rest.getValue(propertyList);\n\t}\n\tlet disabled = false;\n\tif (rest.isDisabled) {\n\t\tdisabled = rest.isDisabled({\n\t\t\tproperties: propertyList,\n\t\t\tmetaFieldStore,\n\t\t\teditWidgetType,\n\t\t\tmodelType,\n\t\t});\n\t}\n\ttitle = translate(camleCaseString(title || name));\n\n\tconst handleOnChange = () => {\n\t\tif (uncheckDialog) {\n\t\t\tsetAlertOpen(false);\n\t\t}\n\t\tsetPropertyList({\n\t\t\t...propertyList,\n\t\t\t...(rest.change ? rest.change(!fieldValue, propertyList) : {}),\n\t\t\t...getProperty(\n\t\t\t\tname,\n\t\t\t\t!fieldValue,\n\t\t\t\tparentField,\n\t\t\t\tpropertyList[parentField],\n\t\t\t\t!(modelType !== rest.modelType) || editWidgetType === \"customField\"\n\t\t\t),\n\t\t});\n\t\tonChange(\n\t\t\t{\n\t\t\t\t...propertyList,\n\t\t\t\t...(rest.change ? rest.change(!fieldValue, propertyList) : {}),\n\t\t\t\t...getProperty(\n\t\t\t\t\tname,\n\t\t\t\t\t!fieldValue,\n\t\t\t\t\tparentField,\n\t\t\t\t\tpropertyList[parentField],\n\t\t\t\t\t!(modelType !== rest.modelType) || editWidgetType === \"customField\"\n\t\t\t\t),\n\t\t\t},\n\t\t\tname\n\t\t);\n\t};\n\treturn (\n\t\t<React.Fragment>\n\t\t\t<FormControlLabel\n\t\t\t\tstyle={{ marginTop: 15 }}\n\t\t\t\tkey={index}\n\t\t\t\tclasses={{\n\t\t\t\t\tlabel: classes && classes.booleanInputLabel,\n\t\t\t\t\tdisabled: classes.disabled,\n\t\t\t\t}}\n\t\t\t\tcontrol={\n\t\t\t\t\t<Switch\n\t\t\t\t\t\tclasses={{\n\t\t\t\t\t\t\tswitchBase: classes && classes.switchBase,\n\t\t\t\t\t\t\ttrack: classes && classes.track,\n\t\t\t\t\t\t\tchecked: classes && classes.checked,\n\t\t\t\t\t\t}}\n\t\t\t\t\t\tchecked={fieldValue}\n\t\t\t\t\t\tdisabled={disabled}\n\t\t\t\t\t\tonChange={() => {\n\t\t\t\t\t\t\tif (\n\t\t\t\t\t\t\t\tuncheckDialog &&\n\t\t\t\t\t\t\t\tfieldValue &&\n\t\t\t\t\t\t\t\tpropertyList &&\n\t\t\t\t\t\t\t\tpropertyList.selectionText\n\t\t\t\t\t\t\t) {\n\t\t\t\t\t\t\t\tsetAlertOpen(true);\n\t\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\thandleOnChange();\n\t\t\t\t\t\t}}\n\t\t\t\t\t\tvalue={propertyList[name]}\n\t\t\t\t\t/>\n\t\t\t\t}\n\t\t\t\tlabel={translate(camleCaseString(title || name))}\n\t\t\t/>\n\t\t\t{openAlert && (\n\t\t\t\t<DialogConfirmation\n\t\t\t\t\topen={openAlert}\n\t\t\t\t\tmessage=\"Are you sure?\"\n\t\t\t\t\tonClose={() => setAlertOpen(false)}\n\t\t\t\t\tonOk={handleOnChange}\n\t\t\t\t\ttitle=\"Confirm\"\n\t\t\t\t/>\n\t\t\t)}\n\t\t</React.Fragment>\n\t);\n}\n\nfunction StaticSelection(_props) {\n\tconst { index } = _props;\n\tlet {\n\t\tname,\n\t\trequired,\n\t\tdata,\n\t\thelper,\n\t\ttitle,\n\t\tcolor,\n\t\tdisableClearable = false,\n\t\tparentField,\n\t\tparentPanel,\n\t\tgetOptionLabel,\n\t\t...rest\n\t} = _props.field;\n\tconst props = React.useContext(PropertiesContext);\n\tconst {\n\t\tpropertyList,\n\t\tsetPropertyList,\n\t\ttype,\n\t\tonChange,\n\t\tmodelType,\n\t\tmetaFieldStore,\n\t\teditWidgetType,\n\t} = props;\n\tconst classes = useStyles();\n\n\tif (typeof data === \"object\" && !Array.isArray(data)) {\n\t\tdata = data[(typeReplacer[type] || type).toLowerCase()] || [];\n\t}\n\ttitle = translate(camleCaseString(title || name));\n\n\tconst ColorTag = ({ color }) => (\n\t\t<div style={{ width: 15, height: 15, backgroundColor: color }}></div>\n\t);\n\tlet value = propertyList[name] || \"\";\n\tif (\n\t\t(modelType === rest.modelType || props.editWidgetType === \"customField\") &&\n\t\tparentField\n\t) {\n\t\tconst field = propertyList[parentField]\n\t\t\t? JSON.parse(propertyList[parentField])\n\t\t\t: {};\n\t\tvalue = field[name] || \"\";\n\t}\n\tlet disabled = false;\n\tif (rest.isDisabled) {\n\t\tdisabled = rest.isDisabled({\n\t\t\tproperties: propertyList,\n\t\t\tmetaFieldStore,\n\t\t\teditWidgetType,\n\t\t\tmodelType,\n\t\t});\n\t}\n\treturn (\n\t\t<AutoComplete\n\t\t\toptions={data}\n\t\t\tclasses={{\n\t\t\t\troot: classes.selection,\n\t\t\t\tinputFocused: disabled ? classes.disabled : classes.autoCompleteInput,\n\t\t\t\tclearIndicator: classes.autoCompleteInput,\n\t\t\t\tpopupIndicator: disabled ? classes.disabled : classes.autoCompleteInput,\n\t\t\t\toption: classes.autoCompleteOption,\n\t\t\t\tgroupLabel: classes.autoCompleteOption,\n\t\t\t\tpopper: classes.autoCompleteOption,\n\t\t\t\tnoOptions: classes.autoCompleteOption,\n\t\t\t}}\n\t\t\tdisableClearable={disableClearable}\n\t\t\tsize=\"small\"\n\t\t\tclassName={classes.autoComplete}\n\t\t\tautoHighlight\n\t\t\tdisabled={disabled}\n\t\t\tonChange={(e, _value) => {\n\t\t\t\tconst value = {\n\t\t\t\t\t...propertyList,\n\t\t\t\t\t...getProperty(\n\t\t\t\t\t\tname,\n\t\t\t\t\t\t_value,\n\t\t\t\t\t\tparentField,\n\t\t\t\t\t\tpropertyList[parentField],\n\t\t\t\t\t\tmodelType === rest.modelType ||\n\t\t\t\t\t\t\tprops.editWidgetType === \"customField\"\n\t\t\t\t\t),\n\t\t\t\t};\n\t\t\t\tif(name === \"colSpan\"){\n\t\t\t\t\tvalue.colSpan = _value\n\t\t\t\t}\n\t\t\t\tsetPropertyList(value);\n\t\t\t\tonChange(value, name);\n\t\t\t}}\n\t\t\tgetOptionLabel={(option) =>\n\t\t\t\tgetOptionLabel\n\t\t\t\t\t? getOptionLabel(option)\n\t\t\t\t\t: typeof option === \"object\"\n\t\t\t\t\t? option.text\n\t\t\t\t\t: option\n\t\t\t}\n\t\t\trenderOption={(option) =>\n\t\t\t\ttypeof option === \"object\" ? (\n\t\t\t\t\t<div key={index} value={option.value}>\n\t\t\t\t\t\t<i className={`fa ${option}`} style={{ marginRight: 4 }} />\n\t\t\t\t\t\t{translate(option.text)}\n\t\t\t\t\t</div>\n\t\t\t\t) : (\n\t\t\t\t\t<div key={index} value={option}>\n\t\t\t\t\t\t{color && <ColorTag color={option} />}\n\t\t\t\t\t\t<i className={`fa ${option}`} style={{ marginRight: 4 }} />\n\t\t\t\t\t\t<span>{translate(option)}</span>\n\t\t\t\t\t</div>\n\t\t\t\t)\n\t\t\t}\n\t\t\tvalue={value}\n\t\t\trenderInput={(params) => (\n\t\t\t\t<TextField\n\t\t\t\t\t{...params}\n\t\t\t\t\tlabel={translate(camleCaseString(title || name))}\n\t\t\t\t\tvariant=\"outlined\"\n\t\t\t\t\tclasses={{\n\t\t\t\t\t\troot: classes.selection,\n\t\t\t\t\t}}\n\t\t\t\t\tautoComplete=\"off\"\n\t\t\t\t\tinputProps={{\n\t\t\t\t\t\t...params.inputProps,\n\t\t\t\t\t\tautoComplete: \"new-password\", // disable autocomplete and autofill\n\t\t\t\t\t}}\n\t\t\t\t/>\n\t\t\t)}\n\t\t/>\n\t);\n}\n\nfunction checkDepend(field, propertyList) {\n\tif (field.depends) {\n\t\tconst value = propertyList[field.depends];\n\t\tif (field.dependValue !== value) {\n\t\t\treturn false;\n\t\t}\n\t\treturn true;\n\t}\n\treturn;\n}\n\nfunction checkModel(field, modelType, editWidgetType, propertyList) {\n\tif (field.dependModelType && field.dependModelType !== modelType) {\n\t\tif (editWidgetType !== \"customField\") {\n\t\t\treturn false;\n\t\t}\n\t}\n\tif (editWidgetType === \"customField\" && field.showInCustomField === false) {\n\t\treturn false;\n\t}\n\tif (field.shouldRender && !field.shouldRender(propertyList)) {\n\t\treturn false;\n\t}\n\treturn true;\n}\n\nfunction RenderPropertyField() {\n\tconst props = React.useContext(PropertiesContext);\n\tconst {\n\t\telements,\n\t\tid,\n\t\tpropertyList,\n\t\tenableAppBuilder,\n\t\tmodelType,\n\t\teditWidgetType,\n\t\terrors,\n\t\tentityType,\n\t\tactualType,\n\t\tparentPanel,\n\t\tonTranslationRemove,\n\t} = props;\n\treturn (\n\t\t<>\n\t\t\t{elements.map((field, index) => {\n\t\t\t\tconst depend = checkDepend(field, propertyList);\n\t\t\t\tif (depend === false) {\n\t\t\t\t\treturn null;\n\t\t\t\t}\n\t\t\t\tif (!checkModel(field, modelType, editWidgetType, propertyList)) {\n\t\t\t\t\treturn null;\n\t\t\t\t}\n\t\t\t\tif (field.name === \"appBuilder\" && !enableAppBuilder) {\n\t\t\t\t\treturn null;\n\t\t\t\t}\n\t\t\t\tif (\n\t\t\t\t\t[actualType, entityType].includes(ENTITY_TYPE.META) &&\n\t\t\t\t\tfield.name === \"packageName\"\n\t\t\t\t) {\n\t\t\t\t\treturn null;\n\t\t\t\t}\n\t\t\t\tconst key = `${index}_${id}`;\n\t\t\t\tswitch (field.type) {\n\t\t\t\t\tcase \"string\":\n\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t<StringInput\n\t\t\t\t\t\t\t\tfield={field}\n\t\t\t\t\t\t\t\tkey={key}\n\t\t\t\t\t\t\t\tindex={key}\n\t\t\t\t\t\t\t\tmultiline={false}\n\t\t\t\t\t\t\t\terror={errors[field.name]}\n\t\t\t\t\t\t\t\tonTranslationRemove={onTranslationRemove}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t);\n\t\t\t\t\tcase \"integer\":\n\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t<StringInput\n\t\t\t\t\t\t\t\tfield={field}\n\t\t\t\t\t\t\t\tkey={key}\n\t\t\t\t\t\t\t\tindex={key}\n\t\t\t\t\t\t\t\tmultiline={false}\n\t\t\t\t\t\t\t\terror={errors[field.name]}\n\t\t\t\t\t\t\t\tparentPanel={parentPanel}\n\t\t\t\t\t\t\t\tclearable={true}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t);\n\t\t\t\t\tcase \"boolean\":\n\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t<BooleanField\n\t\t\t\t\t\t\t\tfield={field}\n\t\t\t\t\t\t\t\tkey={key}\n\t\t\t\t\t\t\t\tindex={key}\n\t\t\t\t\t\t\t\terror={errors[field.name]}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t);\n\t\t\t\t\tcase \"select\":\n\t\t\t\t\tcase \"objectSelection\":\n\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t<SelectComponent\n\t\t\t\t\t\t\t\tfield={field}\n\t\t\t\t\t\t\t\tkey={key}\n\t\t\t\t\t\t\t\tindex={key}\n\t\t\t\t\t\t\t\tprops={props}\n\t\t\t\t\t\t\t\terror={errors[field.name]}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t);\n\t\t\t\t\tcase \"staticSelect\":\n\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t<StaticSelection\n\t\t\t\t\t\t\t\tfield={field}\n\t\t\t\t\t\t\t\tkey={key}\n\t\t\t\t\t\t\t\tindex={key}\n\t\t\t\t\t\t\t\terror={errors[field.name]}\n\t\t\t\t\t\t\t\tparentPanel={parentPanel}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t);\n\t\t\t\t\tcase \"text\":\n\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t<StringInput\n\t\t\t\t\t\t\t\tfield={field}\n\t\t\t\t\t\t\t\tkey={key}\n\t\t\t\t\t\t\t\tindex={key}\n\t\t\t\t\t\t\t\tmultiline={true}\n\t\t\t\t\t\t\t\terror={errors[field.name]}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t);\n\t\t\t\t\tdefault:\n\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t<StringInput\n\t\t\t\t\t\t\t\tfield={field}\n\t\t\t\t\t\t\t\tkey={key}\n\t\t\t\t\t\t\t\tindex={key}\n\t\t\t\t\t\t\t\terror={errors[field.name]}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t})}\n\t\t</>\n\t);\n}\n\nfunction PropertiesProvider({ children, ...value }) {\n\treturn (\n\t\t<PropertiesContext.Provider value={value}>\n\t\t\t{children}\n\t\t</PropertiesContext.Provider>\n\t);\n}\n\nexport default function Properties(props) {\n\tconst { state, onWidgetChange, onTranslationRemove } = useStore();\n\tconst {\n\t\twidgets,\n\t\teditWidget,\n\t\teditWidgetType,\n\t\tcustomFieldWidgets,\n\t\tmodelType,\n\t\tenableAppBuilder,\n\t\tmetaFieldStore,\n\t\terrorList = {},\n\t\tentityType,\n\t\tactualType,\n\t} = state;\n\tlet widget = null;\n\tif (editWidget) {\n\t\tif (editWidgetType === \"customField\" && customFieldWidgets) {\n\t\t\twidget = customFieldWidgets[editWidget];\n\t\t} else if (editWidgetType !== \"customField\" && widgets) {\n\t\t\twidget = widgets[editWidget];\n\t\t}\n\t}\n\tconst { serverType, isSelectionField } = widget || {};\n\tlet { type } = widget || {};\n\tlet selectedType =\n\t\tserverType === \"field\" ? type || \"string\" : serverType || type;\n\tselectedType = selectedType && selectedType.toLowerCase().replace(/_/g, \"-\");\n\tif (selectedType === \"datetime\") {\n\t\tconst field = metaFieldStore.find((f) => f.name === widget.name);\n\t\tif (field && `${field.tz}` === \"true\") {\n\t\t\tselectedType = \"zoneddatetime\";\n\t\t}\n\t}\n\tconst [propertyList, setPropertyList] = useState({});\n\tlet property = options.find((option) => option.type === selectedType);\n\tif (selectedType === \"form\") {\n\t\tif (state.modelType === MODEL_TYPE.CUSTOM) {\n\t\t\tproperty = options.find((option) => option.type === \"modelForm\");\n\t\t} else if (state.modelType === MODEL_TYPE.ENTITY) {\n\t\t\tproperty = options.find((option) => option.type === \"entityForm\");\n\t\t}\n\t} else if (\n\t\tselectedType &&\n\t\tmodelType === MODEL_TYPE.ENTITY &&\n\t\t(selectedType || \"\").toLowerCase().indexOf(\"entity\") === -1\n\t) {\n\t\tselectedType = `${selectedType}entity`;\n\t\tproperty = options.find((option) => option.type === selectedType);\n\t}\n\tif (isSelectionField) {\n\t\tselectedType = [\"string\", \"integer\"].includes(widget && widget.type)\n\t\t\t? widget.type\n\t\t\t: selectedType;\n\t\tif (property && property.value) {\n\t\t\tconst typeFieldIndex = property.value.overview.findIndex(\n\t\t\t\t(item) => item.name === \"type\"\n\t\t\t);\n\t\t\tproperty.value.overview.splice(typeFieldIndex, 1, SelectableType);\n\t\t\tconst { fieldOptions, widgetAttributes } =\n\t\t\t\t(property && property.value) || {};\n\t\t\tproperty = {\n\t\t\t\t...(property || {}),\n\t\t\t\tvalue: {\n\t\t\t\t\t...(property.value || {}),\n\t\t\t\t\tfieldOptions: (fieldOptions || []).filter(\n\t\t\t\t\t\t(f) => ![\"minSize\", \"maxSize\", \"regex\"].includes(f.name)\n\t\t\t\t\t),\n\t\t\t\t\twidgetAttributes: (widgetAttributes || []).filter(\n\t\t\t\t\t\t(f) => ![\"multiline\"].includes(f.name)\n\t\t\t\t\t),\n\t\t\t\t},\n\t\t\t};\n\t\t}\n\t}\n\tconst classes = useStyles();\n\tconst inputLabel = React.useRef(null);\n\tconst [labelWidth, setLabelWidth] = React.useState(0);\n\tReact.useEffect(() => {\n\t\tsetPropertyList({\n\t\t\t...(widget || {}),\n\t\t\ttype: selectedType,\n\t\t});\n\t\tsetLabelWidth(\n\t\t\tinputLabel && inputLabel.current && inputLabel.current.offsetWidth\n\t\t);\n\t}, [widget, selectedType]);\n\n\tasync function onChange(props, changedPropertyName) {\n\t\tconst newProperties = { ...props };\n\t\tif (changedPropertyName === JsonRelationalField.name) {\n\t\t\t// when isJsonRelationalField changes\n\t\t\tnewProperties[TargetJsonModel.name] = null;\n\t\t\tnewProperties[TargetModel.name] = null;\n\t\t\tnewProperties[GridView.name] = null;\n\t\t\tnewProperties[FormView.name] = null;\n\t\t}\n\t\tif (\n\t\t\tchangedPropertyName !== JsonRelationalField.name &&\n\t\t\tchangedPropertyName !== \"type\"\n\t\t) {\n\t\t\tnewProperties.type = widget.type;\n\t\t}\n\t\t/* selectionText implementation starts here */\n\t\tif (\n\t\t\tchangedPropertyName === \"updateSelection\" &&\n\t\t\t!newProperties.updateSelection\n\t\t) {\n\t\t\tnewProperties.selection = null;\n\t\t}\n\t\tif (!newProperties.updateSelection) {\n\t\t\tnewProperties.selectionText = \"\";\n\t\t} else {\n\t\t\tconst obj = { name: newProperties.selection };\n\t\t\tconst text = await getSelectionText(obj);\n\t\t\tnewProperties.selectionText = newProperties.selectionText || text;\n\t\t}\n\t\tif (\n\t\t\tnewProperties.selection &&\n\t\t\tnewProperties.updateSelection &&\n\t\t\t!changedPropertyName\n\t\t) {\n\t\t\tconst obj = { name: newProperties.selection };\n\t\t\tconst text = await getSelectionText(obj);\n\t\t\tnewProperties.selectionText = newProperties.selectionText || text;\n\t\t}\n\t\tif (\n\t\t\tnewProperties.selection &&\n\t\t\ttypeof newProperties.selection === \"object\"\n\t\t) {\n\t\t\tnewProperties.selection = newProperties.selection.name;\n\t\t}\n\t\t/* selectionText implementation ends here */\n\t\tonWidgetChange(editWidget, { ...newProperties });\n\t}\n\n\ttype = selectedType;\n\tlet errors = {};\n\tif (editWidget && errorList) {\n\t\terrors = errorList[editWidget] || {};\n\t}\n\tconst parentPanel = Object.values(widgets || {}).find(\n\t\t(w) => w.items && w.items.indexOf(editWidget) !== -1\n\t);\n\tif (widget?.type === \"panel-tabs\" && editWidgetType === \"customField\") {\n\t\treturn null;\n\t}\n\tif (\n\t\tproperty?.dependModelType &&\n\t\t`${widget?.tab}` === \"true\" &&\n\t\tproperty?.dependModelType !== modelType\n\t) {\n\t\treturn null;\n\t}\n\treturn (\n\t\t<Grid style={{ padding: 20 }}>\n\t\t\t{type &&\n\t\t\t\tproperty &&\n\t\t\t\t!(\n\t\t\t\t\tstate.modelType === MODEL_TYPE.CUSTOM && property.type === TYPE.tabs\n\t\t\t\t) &&\n\t\t\t\tObject.keys(property.value).map((panel, i) => (\n\t\t\t\t\t<Grid key={i}>\n\t\t\t\t\t\t<Typography\n\t\t\t\t\t\t\tvariant=\"body1\"\n\t\t\t\t\t\t\tclassName={classNames(\n\t\t\t\t\t\t\t\tclasses.panelTitle,\n\t\t\t\t\t\t\t\ti !== 0 && classes.panelMargin\n\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{hasPropertyToShow(property.value[panel], modelType) &&\n\t\t\t\t\t\t\t\ttranslate(capitalizeFirst(panel))}\n\t\t\t\t\t\t</Typography>\n\t\t\t\t\t\t<Grid\n\t\t\t\t\t\t\tstyle={{ display: \"flex\", flexDirection: \"column\", width: \"90%\" }}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<PropertiesProvider\n\t\t\t\t\t\t\t\tkey={editWidget}\n\t\t\t\t\t\t\t\telements={property.value[panel]}\n\t\t\t\t\t\t\t\tpropertyList={propertyList}\n\t\t\t\t\t\t\t\tsetPropertyList={setPropertyList}\n\t\t\t\t\t\t\t\tlabelWidth={labelWidth}\n\t\t\t\t\t\t\t\tinputLabel={inputLabel}\n\t\t\t\t\t\t\t\ttype={type}\n\t\t\t\t\t\t\t\tonWidgetChange={onWidgetChange}\n\t\t\t\t\t\t\t\tid={editWidget}\n\t\t\t\t\t\t\t\tonChange={onChange}\n\t\t\t\t\t\t\t\tmodelType={modelType}\n\t\t\t\t\t\t\t\tenableAppBuilder={enableAppBuilder}\n\t\t\t\t\t\t\t\teditWidgetType={editWidgetType}\n\t\t\t\t\t\t\t\tmetaFieldStore={metaFieldStore}\n\t\t\t\t\t\t\t\terrors={errors}\n\t\t\t\t\t\t\t\tentityType={entityType}\n\t\t\t\t\t\t\t\tactualType={actualType}\n\t\t\t\t\t\t\t\tparentPanel={parentPanel}\n\t\t\t\t\t\t\t\tonTranslationRemove={onTranslationRemove}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<RenderPropertyField />\n\t\t\t\t\t\t\t</PropertiesProvider>\n\t\t\t\t\t\t</Grid>\n\t\t\t\t\t</Grid>\n\t\t\t\t))}\n\t\t</Grid>\n\t);\n}\n","import React from \"react\";\nimport Properties from \"../../Properties\";\n\nexport default React.memo(function PropertiesView() {\n\treturn (\n\t\t<div style={{ color: \"#fff\" }}>\n\t\t\t<Properties />\n\t\t</div>\n\t);\n});\n","import React from \"react\";\nimport { Tabs, Tab, Paper, Grid } from \"@material-ui/core\";\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport { ListAlt, PlaylistAdd } from \"@material-ui/icons\";\nimport classNames from \"classnames\";\n\nimport AddPanelView from \"./Tabs/AddPanelView\";\nimport PropertiesView from \"./Tabs/PropertiesView\";\nimport { useStore } from \"../store/context\";\nimport { translate } from \"../utils\";\n\nconst useStyles = makeStyles({\n\troot: {\n\t\tboxShadow: \"1px 2px 8px 0px rgb(1 1 1 / 75%) !important\",\n\t\tbackgroundColor: \"#2f4050\",\n\t\t\".modern-dark &\": {\n\t\t\tbackgroundColor: \"#1b1b1b\",\n\t\t},\n\t\theight: '100%',\n\t\twidth: '100%',\n    borderTop: '1px solid #2f4050',\n\t},\n\ttab: {\n\t\tminHeight: \"fit-content\",\n\t\tminWidth: \"fit-content\",\n\t\ttextTransform: \"none\",\n\t\tcolor: \"#fff\",\n\t\tfontWeight: \"600\",\n\t\tbackgroundColor: \"#293846\",\n\t\t\".modern-dark &\": {\n\t\t\tcolor: \"#fff\",\n\t\t\tbackgroundColor: \"#1b1b1b\",\n\t\t},\n\t\t\"&>span\": {\n\t\t\tflexDirection: \"row\",\n\t\t\t\"& > svg\": {\n\t\t\t\tmarginBottom: \"0px !important\",\n\t\t\t\tmarginRight: 5,\n\t\t\t},\n\t\t},\n\t},\n\ttabs: {\n\t\tbackgroundColor: \"#293846\",\n\t\tminHeight: \"42px !important\",\n\t\tborderTopRightRadius: 5,\n\t\t\".modern-dark &\": {\n\t\t\tbackgroundColor: \"#1b1b1b\",\n\t\t},\n\t},\n\tcontainer: {\n\t\tbackgroundColor: \"#2f4050\",\n\t\theight: `calc(100% - 42px)`,\n\t\toverflow: \"auto\",\n\t\tscrollbarWidth: \"thin\",\n\t\tborderBottomRightRadius: 5,\n\t\t\".modern-dark &\": {\n\t\t\tbackgroundColor: \"#1b1b1b\",\n\t\t},\n\t},\n\tactiveTab: {\n\t\tbackgroundColor: \"#2f4050\",\n\t\tborderBottom: \"2px solid #fff\",\n\t\t\".modern-dark &\": {\n\t\t\tbackgroundColor: \"#323232\",\n\t\t},\n\t},\n});\n\nconst tabs = [\n\t{ label: \"Properties\", icon: <ListAlt />, view: <PropertiesView /> },\n\t{ label: \"Fields\", icon: <PlaylistAdd />, view: <AddPanelView /> },\n];\n\nconst TabPanel = React.memo(function TabPanel(props) {\n\tconst { children } = props;\n\tconst classes = useStyles();\n\n\treturn (\n\t\t<Grid className={classes.container}>\n\t\t\t<Grid style={{ color: \"#000\", height: \"100%\" }}>{children}</Grid>\n\t\t</Grid>\n\t);\n});\n\nexport default React.memo(function SidePanel() {\n\tconst classes = useStyles();\n\tconst { state, update } = useStore();\n\tconst { tabIndex, editWidget } = state;\n\n\tconst onTabChange = (event, newValue) => {\n\t\tif (newValue === 0 && !editWidget) {\n\t\t\treturn;\n\t\t}\n\t\tupdate((draft) => {\n\t\t\tdraft.tabIndex = newValue;\n\t\t});\n\t};\n\n\treturn (\n\t\t<Paper square className={classes.root}>\n\t\t\t<Tabs\n\t\t\t\tvalue={tabIndex}\n\t\t\t\tonChange={onTabChange}\n\t\t\t\tvariant=\"fullWidth\"\n\t\t\t\tclassName={classes.tabs}\n\t\t\t\tTabIndicatorProps={{\n\t\t\t\t\tstyle: {\n\t\t\t\t\t\tdisplay: \"none\",\n\t\t\t\t\t},\n\t\t\t\t}}\n\t\t\t>\n\t\t\t\t{tabs.map((tab, i) => (\n\t\t\t\t\t<Tab\n\t\t\t\t\t\tkey={i}\n\t\t\t\t\t\tclassName={classNames(classes.tab, {\n\t\t\t\t\t\t\t[classes.activeTab]: tabIndex === i,\n\t\t\t\t\t\t})}\n\t\t\t\t\t\ticon={tab.icon}\n\t\t\t\t\t\tlabel={translate(tab.label)}\n\t\t\t\t\t\tstyle={{\n\t\t\t\t\t\t\tcolor: i === 1 && !editWidget ? \"#a6a6a6\" : \"#fff\",\n\t\t\t\t\t\t}}\n\t\t\t\t\t/>\n\t\t\t\t))}\n\t\t\t</Tabs>\n\t\t\t{tabs.map(\n\t\t\t\t(tab, i) => tabIndex === i && <TabPanel key={i}>{tab.view}</TabPanel>\n\t\t\t)}\n\t\t</Paper>\n\t);\n});\n","import React from \"react\";\nimport CircularProgress from \"@material-ui/core/CircularProgress\";\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport classNames from \"classnames\";\n\nimport { Widget, Form } from \"../components\";\nimport { IDS, MODEL_TYPE } from \"../constants\";\nimport { useStore } from \"../store/context\";\n\nconst useStyles = makeStyles({\n\tuiContainer: {\n\t\tdisplay: \"flex\",\n\t\tflexDirection: \"column\",\n\t},\n\tcontainer: {\n\t\tdisplay: \"flex\",\n\t\tflexDirection: \"column\",\n\t\theight: \"fit-content\",\n\t\tposition: \"relative\",\n\t},\n\tloaderContainer: {\n\t\tdisplay: \"flex\",\n\t\tflexDirection: \"column\",\n\t\tjustifyContent: \"center\",\n\t\theight: \"100%\",\n\t\tposition: \"absolute\",\n\t\tzIndex: 1000,\n\t\tborder: \"0px\",\n\t\tbackgroundColor: \"rgba(0,0,0,0.05)\",\n\t\tbottom: 0,\n\t\ttop: 0,\n\t\tleft: 0,\n\t\tright: 0,\n\t\talignItems: \"center\",\n\t},\n\temptyFormInfo: {\n\t\tminHeight: \"24vh !important\",\n\t},\n});\n// Render Main Form UI View\nfunction FormViewUI({ design }) {\n\tconst store = useStore();\n\tconst classes = useStyles();\n\tconst {\n\t\twidgets,\n\t\tcustomFieldWidgets,\n\t\tloader,\n\t\terrorList,\n\t\tmodelField,\n\t\tmodelType,\n\t} = store.state;\n\tconst formInfo = (store.state.widgets || [])[-1];\n\treturn (\n\t\t<div className={classNames(classes.uiContainer)}>\n\t\t\t<div\n\t\t\t\tid=\"form-view\"\n\t\t\t\tclassName={classNames(classes.container, {\n\t\t\t\t\t[classes.emptyFormInfo]: !formInfo && !customFieldWidgets,\n\t\t\t\t})}\n\t\t\t>\n\t\t\t\t{loader && (\n\t\t\t\t\t<div className={classNames(classes.loaderContainer)}>\n\t\t\t\t\t\t<CircularProgress />\n\t\t\t\t\t</div>\n\t\t\t\t)}\n\t\t\t\t{widgets && (\n\t\t\t\t\t<Widget\n\t\t\t\t\t\tindex={0}\n\t\t\t\t\t\tid={IDS.form}\n\t\t\t\t\t\tattrs={store.state.widgets[IDS.form]}\n\t\t\t\t\t\tonSelect={store.onSelect}\n\t\t\t\t\t\t{...{\n\t\t\t\t\t\t\titems: store.state.items,\n\t\t\t\t\t\t\tdragWidget: store.state.dragWidget,\n\t\t\t\t\t\t\thoverWidget: store.state.hoverWidget,\n\t\t\t\t\t\t\teditWidget: store.state.editWidget,\n\t\t\t\t\t\t\twidgets: store.state.widgets,\n\t\t\t\t\t\t\tonSelect: store.onSelect,\n\t\t\t\t\t\t\tonMove: store.onMove,\n\t\t\t\t\t\t\tonDrag: store.onDrag,\n\t\t\t\t\t\t\tonHover: store.onHover,\n\t\t\t\t\t\t\tonWidgetChange: store.onWidgetChange,\n\t\t\t\t\t\t\tsetHoverAttr: store.setHoverAttr,\n\t\t\t\t\t\t\tcanRemove: modelType === MODEL_TYPE.BASE ? false : true,\n\t\t\t\t\t\t\terrorList,\n\t\t\t\t\t\t}}\n\t\t\t\t\t\tdesign={design}\n\t\t\t\t\t\tcomponent={Form}\n\t\t\t\t\t/>\n\t\t\t\t)}\n\t\t\t\t{customFieldWidgets && (\n\t\t\t\t\t<div className=\"custom-field-pallett-view\">\n\t\t\t\t\t\t<div className=\"custom-field-view-header\">\n\t\t\t\t\t\t\t{modelField?.name || \"attrs\"}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<Widget\n\t\t\t\t\t\t\t_type=\"customField\"\n\t\t\t\t\t\t\tindex={0}\n\t\t\t\t\t\t\tid={IDS.customForm}\n\t\t\t\t\t\t\tattrs={store.state.customFieldWidgets[IDS.customForm]}\n\t\t\t\t\t\t\tonSelect={store.onSelect}\n\t\t\t\t\t\t\t{...{\n\t\t\t\t\t\t\t\titems: store.state.customFieldItems,\n\t\t\t\t\t\t\t\tdragWidget: store.state.dragWidget,\n\t\t\t\t\t\t\t\thoverWidget: store.state.hoverWidget,\n\t\t\t\t\t\t\t\teditWidget: store.state.editWidget,\n\t\t\t\t\t\t\t\twidgets: store.state.customFieldWidgets,\n\t\t\t\t\t\t\t\tonSelect: store.onSelect,\n\t\t\t\t\t\t\t\tonMove: store.onMove,\n\t\t\t\t\t\t\t\tonDrag: store.onDrag,\n\t\t\t\t\t\t\t\tonHover: store.onHover,\n\t\t\t\t\t\t\t\tonWidgetChange: store.onWidgetChange,\n\t\t\t\t\t\t\t\tsetHoverAttr: store.setHoverAttr,\n\t\t\t\t\t\t\t\terrorList,\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\tdesign={design}\n\t\t\t\t\t\t\tcomponent={Form}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</div>\n\t\t\t\t)}\n\t\t\t</div>\n\t\t</div>\n\t);\n}\n\nexport default FormViewUI;\n","import React from \"react\";\nimport classNames from \"classnames\";\nimport Editor from \"./../Editor\";\n\nexport default React.memo(function MainPanel() {\n\tconst [design] = React.useState(true);\n\treturn (\n\t\t<div\n\t\t\tclassName={classNames(\"form-layout-container\", {\n\t\t\t\t\"form-layout-design\": design,\n\t\t\t})}\n\t\t\tstyle={{\n\t\t\t\tdisplay: \"flex\",\n\t\t\t\twidth: \"100%\",\n\t\t\t\theight: \"100%\",\n\t\t\t\tjustifyContent: \"center\",\n\t\t\t\toverflow: \"auto\",\n\t\t\t\tposition: \"relative\",\n\t\t\t}}\n\t\t>\n\t\t\t<Editor design={design} />\n\t\t</div>\n\t);\n});\n","import React, { useState, useEffect } from \"react\";\nimport { TextField } from \"@material-ui/core\";\nimport AutoComplete from \"@material-ui/lab/Autocomplete\";\nimport _ from \"lodash\";\nimport { makeStyles } from \"@material-ui/core/styles\";\n\nimport AxelorService from \"./../services/axelor.rest\";\nimport { useDebounceEffect } from \"./../common.func\";\nimport SearchView from \"../components/SearchView\";\nimport { translate } from \"../utils\";\nconst useStyles = makeStyles({\n\tautoComplete: {\n\t\t\"& > div > label\": {\n\t\t\tcolor: \"#e7eaec !important\",\n\t\t\tfontSize: 12,\n\t\t},\n\t},\n\tautoCompleteRoot: {\n\t\twidth: 200,\n\t\tmarginLeft: 10,\n\t\tcolor: \"#e7eaec\",\n\t},\n\tinputView: {\n\t\tcolor: \"#fff\",\n\t\tfontSize: 13,\n\t\t\"& > *\": {\n\t\t\tcolor: \"#fff\",\n\t\t},\n\t},\n\tpopperView: {\n\t\t\"& ul, .MuiAutocomplete-noOptions\": {\n\t\t\tbackgroundColor: \"rgb(41, 56, 70) !important\",\n\t\t\t\".modern-dark &\": {\n\t\t\t\tbackgroundColor: \"#1b1b1b !important\",\n\t\t\t},\n\t\t},\n\t\t\"& li, .MuiAutocomplete-noOptions\": {\n\t\t\tcolor: \"#e7eaec !important\",\n\t\t\tbackgroundColor: \"rgb(41, 56, 70) !important\",\n\t\t\t\".modern-dark &\": {\n\t\t\t\tbackgroundColor: \"#1b1b1b !important\",\n\t\t\t},\n\t\t},\n\t\t\"& li:hover, .MuiAutocomplete-noOptions\": {\n\t\t\tcolor: \"#e7eaec !important\",\n\t\t\tbackgroundColor: \"#2f4050 !important\",\n\t\t\t\".modern-dark &\": {\n\t\t\t\tbackgroundColor: \"#323232 !important\",\n\t\t\t},\n\t\t},\n\t},\n\toption: {\n\t\tfontSize: 13,\n\t},\n});\n\nfunction Select({\n\tvalue,\n\tlabel,\n\tmodel,\n\tsearchFilter,\n\tonChange,\n\toptions,\n\tfilterData,\n\tlimit = 10,\n\tonSearch,\n\tmodelType,\n\t...props\n}) {\n\tconst classes = useStyles();\n\tconst [searchText, setSearchText] = useState(\"\");\n\tconst [loading, setLoading] = useState(false);\n\tconst [list, setList] = useState([...(options ? options : [])]);\n\tconst [searchMore, setSearchMore] = useState(false);\n\tconst [offset, setOffset] = useState(0);\n\tconst [total, setTotal] = useState(0);\n\n\tconst search = React.useCallback(\n\t\tasync (searchText = \"\") => {\n\t\t\tif (onSearch) {\n\t\t\t\tsetLoading(true);\n\t\t\t\tconst { models, total } = await onSearch({\n\t\t\t\t\tlimit,\n\t\t\t\t\tsearchText,\n\t\t\t\t\tsearchFilter,\n\t\t\t\t\tfilterData,\n\t\t\t\t\tmodelType,\n\t\t\t\t\toffset,\n\t\t\t\t});\n\t\t\t\t!searchMore &&\n\t\t\t\t\ttotal > limit &&\n\t\t\t\t\tmodels.push({\n\t\t\t\t\t\tname: translate(\"Show more...\"),\n\t\t\t\t\t\tid: \"studio_show_More_View\",\n\t\t\t\t\t});\n\t\t\t\tconst uniqueList = _.uniqBy(models, \"name\");\n\t\t\t\tsetList(uniqueList);\n\t\t\t\tsetLoading(false);\n\t\t\t\tsetTotal(total);\n\t\t\t} else {\n\t\t\t\tconst service = new AxelorService({ model });\n\t\t\t\tsetLoading(true);\n\t\t\t\tconst _data = searchFilter(searchText) || {};\n\t\t\t\tconst criteria = [];\n\t\t\t\tif (searchText) {\n\t\t\t\t\tcriteria.push({\n\t\t\t\t\t\tfieldName: \"name\",\n\t\t\t\t\t\toperator: \"like\",\n\t\t\t\t\t\tvalue: searchText,\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\tconst data = {\n\t\t\t\t\t...(_data._domain && { _domain: _data._domain }),\n\t\t\t\t\t...(_data._domainContext && { _domainContext: _data._domainContext }),\n\t\t\t\t\tcriteria: [...criteria, ...(_data.criteria || [])],\n\t\t\t\t\toperator: \"and\",\n\t\t\t\t};\n\t\t\t\tconst fields = _data.fields || [];\n\t\t\t\tservice\n\t\t\t\t\t.search({ fields, data, limit, offset: offset })\n\t\t\t\t\t.then((response = {}) => {\n\t\t\t\t\t\tconst { data = [], total } = response;\n\t\t\t\t\t\tsetLoading(false);\n\t\t\t\t\t\tconst list = filterData ? filterData([...data]) : [...data];\n\t\t\t\t\t\t!searchMore &&\n\t\t\t\t\t\t\ttotal > limit &&\n\t\t\t\t\t\t\tlist.push({\n\t\t\t\t\t\t\t\tname: translate(\"Show more...\"),\n\t\t\t\t\t\t\t\tid: \"studio_show_More_View\",\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\tsetTotal(total);\n\t\t\t\t\t\tconst uniqueList = _.uniqBy(list, \"name\");\n\t\t\t\t\t\tsetList(uniqueList);\n\t\t\t\t\t});\n\t\t\t}\n\t\t},\n\t\t[\n\t\t\tsearchFilter,\n\t\t\tmodel,\n\t\t\tfilterData,\n\t\t\tsearchMore,\n\t\t\tlimit,\n\t\t\tonSearch,\n\t\t\tmodelType,\n\t\t\toffset,\n\t\t]\n\t);\n\n\tconst handleNext = React.useCallback(() => {\n\t\tconst newOffset = offset + limit;\n\t\tif (newOffset <= total) {\n\t\t\tsetOffset(newOffset);\n\t\t}\n\t}, [limit, total, offset]);\n\n\tconst handlePrevious = React.useCallback(() => {\n\t\tsetOffset((offset) => {\n\t\t\tconst newOffset = offset - limit;\n\t\t\treturn newOffset > 0 ? newOffset : 0;\n\t\t});\n\t}, [limit]);\n\n\tconst debounceHandler = React.useCallback(() => {\n\t\t!options && search(searchText);\n\t}, [searchText, search, options]);\n\n\tconst handleChange = React.useCallback(\n\t\t(e, value) => {\n\t\t\tif (value?.id === \"studio_show_More_View\") {\n\t\t\t\tsetSearchMore(true);\n\t\t\t} else {\n\t\t\t\tonChange(value);\n\t\t\t}\n\t\t},\n\t\t[onChange]\n\t);\n\n\tconst handleTextChange = React.useCallback((value) => {\n\t\tsetSearchText(value);\n\t\tsetOffset(0);\n\t}, []);\n\n\tconst handleClose = React.useCallback(() => {\n\t\tsetSearchMore(false);\n\t\tsetOffset(0);\n\t}, []);\n\n\tuseDebounceEffect(debounceHandler, 500);\n\n\tuseEffect(() => {\n\t\t!options && search();\n\t}, [search, options, model]);\n\n\tuseEffect(() => {\n\t\tif (!value) {\n\t\t\tsetSearchText(\"\");\n\t\t}\n\t}, [value]);\n\treturn (\n\t\t<React.Fragment>\n\t\t\t<AutoComplete\n\t\t\t\tclearOnEscape\n\t\t\t\tautoComplete\n\t\t\t\tclasses={{\n\t\t\t\t\troot: classes.autoCompleteRoot,\n\t\t\t\t\tinputFocused: classes.input,\n\t\t\t\t\tclearIndicator: classes.input,\n\t\t\t\t\tpopupIndicator: classes.input,\n\t\t\t\t\tinput: classes.inputView,\n\t\t\t\t\tendAdornment: classes.inputView,\n\t\t\t\t\tpopper: classes.popperView,\n\t\t\t\t\toption: classes.option,\n\t\t\t\t\tnoOptions: classes.option,\n\t\t\t\t}}\n\t\t\t\tsize=\"small\"\n\t\t\t\tclassName={classes.autoComplete}\n\t\t\t\tonInputChange={(e, value) => setSearchText(value)}\n\t\t\t\trenderInput={(params) => {\n\t\t\t\t\tparams.inputProps.value = searchText;\n\t\t\t\t\treturn (\n\t\t\t\t\t\t<TextField {...params} placeholder={translate(label)} fullWidth />\n\t\t\t\t\t);\n\t\t\t\t}}\n\t\t\t\toptions={[...list]}\n\t\t\t\tloading={loading}\n\t\t\t\tgetOptionLabel={(option) =>\n\t\t\t\t\ttypeof option === \"string\"\n\t\t\t\t\t\t? option\n\t\t\t\t\t\t: props.getOptionLabel\n\t\t\t\t\t\t? props.getOptionLabel(option)\n\t\t\t\t\t\t: option.name\n\t\t\t\t}\n\t\t\t\tonChange={handleChange}\n\t\t\t\tfilterOptions={(options) => options}\n\t\t\t\tvalue={value || null}\n\t\t\t\tgetOptionSelected={(option, value) => option.name === value.name}\n\t\t\t\t{...props}\n\t\t\t/>\n\t\t\t<SearchView\n\t\t\t\tsearchText={searchText}\n\t\t\t\tlist={list}\n\t\t\t\tmodel={model}\n\t\t\t\ttotal={total}\n\t\t\t\toffset={offset}\n\t\t\t\topen={searchMore}\n\t\t\t\tonNext={handleNext}\n\t\t\t\tonPrevious={handlePrevious}\n\t\t\t\thandleClose={handleClose}\n\t\t\t\tsetSearchText={handleTextChange}\n\t\t\t\tonChange={onChange}\n\t\t\t\ttitle={translate(label)}\n\t\t\t\tgetOptionLabel={props.getOptionLabel}\n\t\t\t/>\n\t\t</React.Fragment>\n\t);\n}\n\nexport default React.memo(Select);\n","import { modelService, metaModelService } from \"./api\";\nimport { ENTITY_TYPE, MODEL_TYPE } from \"../constants\";\n\nexport async function modelSearch({\n\tsearchFilter,\n\tlimit,\n\tsearchText,\n\tmodelType,\n\toffset,\n}) {\n\tconst _data = searchFilter(searchText) || {};\n\tconst criteria = [];\n\tif (searchText) {\n\t\tcriteria.push({\n\t\t\tfieldName: \"name\",\n\t\t\toperator: \"like\",\n\t\t\tvalue: searchText,\n\t\t});\n\t}\n\tconst data = {\n\t\t...(_data._domain && { _domain: _data._domain }),\n\t\t...(_data._domainContext && { _domainContext: _data._domainContext }),\n\t\tcriteria: [...criteria, ...(_data.criteria || [])],\n\t\toperator: \"and\",\n\t};\n\tconst fields = _data.fields || [];\n\tconst service =\n\t\tmodelType === MODEL_TYPE.CUSTOM ? metaModelService : modelService;\n\tconst modelResult = await service.search({ fields, data, limit, offset });\n\tconst models = [];\n\tif (modelResult && modelResult.data && Array.isArray(modelResult.data)) {\n\t\tconst list = modelResult.data\n\t\t\t.map((record) => {\n\t\t\t\tconst modelIndex = models.findIndex(\n\t\t\t\t\t(m) => m.name === record.name && m.packageName === record.packageName\n\t\t\t\t);\n\t\t\t\tif (modelIndex === -1 || modelType === MODEL_TYPE.BASE) {\n\t\t\t\t\tif (modelType === MODEL_TYPE.BASE && modelIndex !== -1) {\n\t\t\t\t\t\tmodels.splice(modelIndex, 1);\n\t\t\t\t\t}\n\t\t\t\t\treturn { ...record, entityType: ENTITY_TYPE.META };\n\t\t\t\t} else {\n\t\t\t\t\tmodels.splice(modelIndex, 1, {\n\t\t\t\t\t\t...models[modelIndex],\n\t\t\t\t\t\tactualType: ENTITY_TYPE.META,\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\treturn undefined;\n\t\t\t})\n\t\t\t.filter((e) => e);\n\t\tmodels.push(...list);\n\t}\n\treturn { models, total: modelResult && modelResult.total };\n}\n","import React from \"react\";\n\nimport AxelorService from \"./../services/axelor.rest\";\nimport Utils, { generateCustomModelSchema, translate } from \"./../utils\";\nimport Select from \"./Select\";\nimport {\n\trelationalFields,\n\tMODEL_TYPE,\n\tENTITY_TYPE,\n\tPANEL_PROPS,\n} from \"./../constants\";\nimport {\n\tfetchCustomFields,\n\tgetEnableAppBuilder,\n\tfetchEntityModel,\n\tfetchEntityFields,\n\tfetchModelFields,\n\tfetchViews,\n\tfetchAttrsList,\n\tgetTranslationList,\n\tmetaJsonFieldService,\n} from \"./api\";\nimport { modelSearch } from \"./customModelSearch\";\nimport { generateXpath } from \"./../store/xpathGenerator\";\nimport convert from \"xml-js\";\nimport _ from \"lodash\";\n\nconst metaViewService = new AxelorService({\n\tmodel: \"com.axelor.meta.db.MetaView\",\n});\n\nconst modelTypes = [\n\t{ name: translate(\"View\"), value: MODEL_TYPE.BASE },\n\t{ name: translate(\"Custom\"), value: MODEL_TYPE.CUSTOM },\n];\n\nfunction ViewSelection({\n\tmodel,\n\tupdate,\n\tmodelType,\n\tmodelField,\n\tstartLoader,\n\tentityModel,\n\tentityType,\n\tmetaFieldStore,\n\tclearHistory,\n\treset,\n\t...props\n}) {\n\tconst modelName = `com.axelor.meta.db.${\n\t\tmodelType !== MODEL_TYPE.CUSTOM ? \"MetaModel\" : \"MetaJsonModel\"\n\t}`;\n\n\tconst fetchJSONFields = React.useCallback(\n\t\t(ids, record) => {\n\t\t\tconst criteria = [];\n\t\t\tif (ids.length) {\n\t\t\t\tcriteria.push({ fieldName: \"id\", operator: \"in\", value: ids });\n\t\t\t\tconst data = {\n\t\t\t\t\tcriteria,\n\t\t\t\t};\n\t\t\t\tmetaJsonFieldService\n\t\t\t\t\t.search({ data, sortBy: [\"sequence\"] })\n\t\t\t\t\t.then((res) => {\n\t\t\t\t\t\tif (res.data) {\n\t\t\t\t\t\t\tconst list = res.data || [];\n\t\t\t\t\t\t\tconst schema = generateCustomModelSchema(list, record);\n\t\t\t\t\t\t\tupdate((draft) => {\n\t\t\t\t\t\t\t\tdraft.widgets = {\n\t\t\t\t\t\t\t\t\t...schema.widgets,\n\t\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\t\tdraft.items = schema.items;\n\t\t\t\t\t\t\t\tdraft.loader = false;\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tupdate((draft) => {\n\t\t\t\t\t\t\t\tdraft.loader = false;\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t} else {\n\t\t\t\tconst schema = generateCustomModelSchema([], record);\n\t\t\t\tupdate((draft) => {\n\t\t\t\t\tdraft.widgets = {\n\t\t\t\t\t\t...schema.widgets,\n\t\t\t\t\t};\n\t\t\t\t\tdraft.items = schema.items;\n\t\t\t\t\tdraft.loader = false;\n\t\t\t\t\tdraft.model = record;\n\t\t\t\t\tdraft.customModel = record;\n\t\t\t\t\tdraft.editWidget = -1;\n\t\t\t\t\tdraft.editWidgetType = null;\n\t\t\t\t});\n\t\t\t}\n\t\t},\n\t\t[update]\n\t);\n\n\tconst handleEntityModelSelect = React.useCallback(\n\t\tasync (model) => {\n\t\t\tstartLoader();\n\t\t\tif (!model) {\n\t\t\t\tupdate((draft) => {\n\t\t\t\t\tclearHistory(draft);\n\t\t\t\t\tdraft.items = [];\n\t\t\t\t\tdraft.widgets = null;\n\t\t\t\t\tdraft.initialItems = null;\n\t\t\t\t\tdraft.entityModel = null;\n\t\t\t\t\tdraft.loader = false;\n\t\t\t\t\tdraft.model = null;\n\t\t\t\t\tdraft.errorList = {};\n\t\t\t\t\tdraft.attrsList = [];\n\t\t\t\t\tdraft.translationList = [];\n\t\t\t\t\tdraft.initialTranslationList = [];\n\t\t\t\t\tdraft.removedTranslationList = [];\n\t\t\t\t});\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tconst originalModelFields = await fetchModelFields(model);\n\t\t\tconst metaModelFields = originalModelFields.map((f) => {\n\t\t\t\treturn JSON.parse(\n\t\t\t\t\tJSON.stringify({\n\t\t\t\t\t\t...f,\n\t\t\t\t\t\ttype:\n\t\t\t\t\t\t\trelationalFields[f.relationship] ||\n\t\t\t\t\t\t\t(f.typeName || \"\").toLowerCase(),\n\t\t\t\t\t\t...(f.relationship && {\n\t\t\t\t\t\t\ttargetModel: `${f.packageName}.${f.typeName}`,\n\t\t\t\t\t\t}),\n\t\t\t\t\t\tpackageName: undefined,\n\t\t\t\t\t})\n\t\t\t\t);\n\t\t\t});\n\t\t\tfetchEntityModel(model).then((res) => {\n\t\t\t\tconst schema = Utils.generateEntityModelSchema(res.entityXml, res);\n\t\t\t\tconst fields = Utils.getEntityModelFields(res.entityXml);\n\t\t\t\tupdate((draft) => {\n\t\t\t\t\tclearHistory(draft);\n\t\t\t\t\tdraft.model = model;\n\t\t\t\t\tdraft.entityType = model.entityType;\n\t\t\t\t\tdraft.actualType = model.actualType;\n\t\t\t\t\tdraft.entityModel = model;\n\t\t\t\t\tdraft.errorList = {};\n\t\t\t\t\tdraft.attrsList = [];\n\t\t\t\t\tdraft.translationList = [];\n\t\t\t\t\tdraft.initialTranslationList = [];\n\t\t\t\t\tdraft.removedTranslationList = [];\n\t\t\t\t\tif (modelType === MODEL_TYPE.ENTITY) {\n\t\t\t\t\t\tdraft.widgets = schema.widgets;\n\t\t\t\t\t\tdraft.items = schema.items;\n\t\t\t\t\t\tdraft.metaFieldStore = [...metaModelFields];\n\t\t\t\t\t\tdraft.metaFields = metaModelFields.filter(\n\t\t\t\t\t\t\t(f) => fields.findIndex((field) => field.name === f.name) === -1\n\t\t\t\t\t\t);\n\t\t\t\t\t}\n\t\t\t\t\tif (modelType === MODEL_TYPE.BASE) {\n\t\t\t\t\t\tdraft.metaFieldStore = [...fields, ...metaModelFields];\n\t\t\t\t\t\tdraft.metaFields = [...fields, ...metaModelFields];\n\t\t\t\t\t}\n\t\t\t\t\tdraft.loader = false;\n\t\t\t\t});\n\t\t\t});\n\t\t},\n\t\t[update, startLoader, modelType, clearHistory]\n\t);\n\n\tconst handleModelSelect = React.useCallback(\n\t\tasync (model) => {\n\t\t\tconst metaModelService = new AxelorService({ model: modelName });\n\t\t\tif (!model) {\n\t\t\t\tif (modelType === MODEL_TYPE.CUSTOM) {\n\t\t\t\t\treset();\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tupdate((draft) => {\n\t\t\t\t\tclearHistory(draft);\n\t\t\t\t\tdraft.model = null;\n\t\t\t\t\tdraft.customModel = null;\n\t\t\t\t\tdraft.items = [];\n\t\t\t\t\tdraft.exView = null;\n\t\t\t\t\tdraft.view = null;\n\t\t\t\t\tdraft.widgets = null;\n\t\t\t\t\tdraft.initialItems = null;\n\t\t\t\t\tdraft.initialWidgets = null;\n\t\t\t\t\tdraft.customFieldWidgets = null;\n\t\t\t\t\tdraft.customFieldItems = null;\n\t\t\t\t\tdraft.customFields = [];\n\t\t\t\t\tdraft.modelField = null;\n\t\t\t\t\tdraft.extensionXML = null;\n\t\t\t\t\tdraft.extensionView = null;\n\t\t\t\t\tdraft.originalXML = null;\n\t\t\t\t\tdraft.selectedView = null;\n\t\t\t\t\tdraft.metaFields = [];\n\t\t\t\t\tdraft.metaFieldStore = [];\n\t\t\t\t\tdraft.extensionMoves = [];\n\t\t\t\t\tdraft.errorList = {};\n\t\t\t\t\tdraft.attrsList = [];\n\t\t\t\t\tdraft.translationList = [];\n\t\t\t\t\tdraft.initialTranslationList = [];\n\t\t\t\t\tdraft.removedTranslationList = [];\n\t\t\t\t});\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tlet data = {\n\t\t\t\tfields: [\"metaFields\", \"packageName\", \"name\", \"fullName\"],\n\t\t\t\trelated: {\n\t\t\t\t\tmetaFields: [\n\t\t\t\t\t\t\"typeName\",\n\t\t\t\t\t\t\"label\",\n\t\t\t\t\t\t\"mappedBy\",\n\t\t\t\t\t\t\"relationship\",\n\t\t\t\t\t\t\"name\",\n\t\t\t\t\t\t\"packageName\",\n\t\t\t\t\t],\n\t\t\t\t},\n\t\t\t};\n\t\t\tif (modelType === MODEL_TYPE.CUSTOM) {\n\t\t\t\tupdate((draft) => {\n\t\t\t\t\tdraft.loader = true;\n\t\t\t\t});\n\t\t\t\tdata = {\n\t\t\t\t\trelated: {\n\t\t\t\t\t\tmenuBuilder: [\"title\", \"parentMenu\"],\n\t\t\t\t\t},\n\t\t\t\t};\n\t\t\t}\n\t\t\tconst entityFields = await fetchEntityFields(model);\n\t\t\tif (model.entityType === ENTITY_TYPE.ENTITY) {\n\t\t\t\thandleEntityModelSelect(model);\n\t\t\t} else {\n\t\t\t\tmetaModelService.fetch(model.id, data).then((res) => {\n\t\t\t\t\tif (res.data) {\n\t\t\t\t\t\tconst record = res.data[0];\n\t\t\t\t\t\tconst { fields = [], ...rest } = record;\n\t\t\t\t\t\tupdate((draft) => {\n\t\t\t\t\t\t\tclearHistory(draft);\n\t\t\t\t\t\t\tdraft.model = model;\n\t\t\t\t\t\t\tdraft.entityType = model.entityType;\n\t\t\t\t\t\t\tdraft.widgets = null;\n\t\t\t\t\t\t\tdraft.initialWidgets = null;\n\t\t\t\t\t\t\tdraft.items = [];\n\t\t\t\t\t\t\tdraft.initialItems = null;\n\t\t\t\t\t\t\tdraft.view = null;\n\t\t\t\t\t\t\tdraft.exView = null;\n\t\t\t\t\t\t\tdraft.modelField = null;\n\t\t\t\t\t\t\tdraft.customFields = [];\n\t\t\t\t\t\t\tdraft.customFieldWidgets = null;\n\t\t\t\t\t\t\tdraft.originalXML = null;\n\t\t\t\t\t\t\tdraft.extensionXML = null;\n\t\t\t\t\t\t\tdraft.extensionView = null;\n\t\t\t\t\t\t\tdraft.entityFields = entityFields;\n\t\t\t\t\t\t\tdraft.extensionMoves = [];\n\t\t\t\t\t\t\tdraft.errorList = {};\n\t\t\t\t\t\t\tdraft.attrsList = [];\n\t\t\t\t\t\t\tdraft.translationList = [];\n\t\t\t\t\t\t\tdraft.initialTranslationList = [];\n\t\t\t\t\t\t\tdraft.removedTranslationList = [];\n\t\t\t\t\t\t\tdraft.selectedView = null;\n\t\t\t\t\t\t\tdraft.editWidget = -1;\n\t\t\t\t\t\t\tdraft.editWidgetType = null;\n\t\t\t\t\t\t\tdraft.tabIndex = 0;\n\t\t\t\t\t\t\tconst _fields = (record.metaFields || []).map((f) => {\n\t\t\t\t\t\t\t\treturn JSON.parse(\n\t\t\t\t\t\t\t\t\tJSON.stringify({\n\t\t\t\t\t\t\t\t\t\t...f,\n\t\t\t\t\t\t\t\t\t\ttype:\n\t\t\t\t\t\t\t\t\t\t\trelationalFields[f.relationship] ||\n\t\t\t\t\t\t\t\t\t\t\t(f.typeName || \"\").toLowerCase(),\n\t\t\t\t\t\t\t\t\t\t...(f.relationship && {\n\t\t\t\t\t\t\t\t\t\t\ttargetModel: `${f.packageName}.${f.typeName}`,\n\t\t\t\t\t\t\t\t\t\t}),\n\t\t\t\t\t\t\t\t\t\tpackageName: undefined,\n\t\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\tif (modelType === MODEL_TYPE.BASE) {\n\t\t\t\t\t\t\t\tdraft.metaFieldStore = [..._fields, ...entityFields];\n\t\t\t\t\t\t\t\tdraft.metaFields = [..._fields, ...entityFields];\n\t\t\t\t\t\t\t} else if (modelType === MODEL_TYPE.ENTITY) {\n\t\t\t\t\t\t\t\tconst modelRecord = {\n\t\t\t\t\t\t\t\t\tname: record.name,\n\t\t\t\t\t\t\t\t\tpackageName: record.packageName,\n\t\t\t\t\t\t\t\t\tmodel: `${record.packageName}.${record.name}`,\n\t\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\t\tconst schema = generateCustomModelSchema([], modelRecord);\n\t\t\t\t\t\t\t\tdraft.widgets = {\n\t\t\t\t\t\t\t\t\t...schema.widgets,\n\t\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\t\tdraft.items = schema.items;\n\t\t\t\t\t\t\t\tdraft.loader = false;\n\t\t\t\t\t\t\t\tdraft.entityModel = null;\n\t\t\t\t\t\t\t\tif (model.entityType === ENTITY_TYPE.META) {\n\t\t\t\t\t\t\t\t\tdraft.metaFieldStore = [..._fields];\n\t\t\t\t\t\t\t\t\tdraft.metaFields = [..._fields];\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tfetchJSONFields(\n\t\t\t\t\t\t\t\t\tfields.map((f) => f.id),\n\t\t\t\t\t\t\t\t\trest\n\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\tdraft.customModel = record;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t},\n\t\t[\n\t\t\tupdate,\n\t\t\tmodelName,\n\t\t\tmodelType,\n\t\t\tfetchJSONFields,\n\t\t\thandleEntityModelSelect,\n\t\t\tclearHistory,\n\t\t\treset,\n\t\t]\n\t);\n\n\tconst handleViewSelect = React.useCallback(\n\t\tasync (view) => {\n\t\t\tstartLoader();\n\t\t\tif (!view) {\n\t\t\t\tupdate((draft) => {\n\t\t\t\t\tclearHistory(draft);\n\t\t\t\t\tdraft.items = [];\n\t\t\t\t\tdraft.exView = null;\n\t\t\t\t\tdraft.view = null;\n\t\t\t\t\tdraft.widgets = null;\n\t\t\t\t\tdraft.initialItems = null;\n\t\t\t\t\tdraft.initialWidgets = null;\n\t\t\t\t\tdraft.customFieldWidgets = null;\n\t\t\t\t\tdraft.customFieldItems = null;\n\t\t\t\t\tdraft.customFields = [];\n\t\t\t\t\tdraft.modelField = null;\n\t\t\t\t\tdraft.extensionXML = null;\n\t\t\t\t\tdraft.extensionView = null;\n\t\t\t\t\tdraft.originalXML = null;\n\t\t\t\t\tdraft.loader = false;\n\t\t\t\t\tdraft.metaFields = draft.metaFieldStore;\n\t\t\t\t\tdraft.selectedView = null;\n\t\t\t\t\tdraft.extensionMoves = [];\n\t\t\t\t\tdraft.errorList = {};\n\t\t\t\t\tdraft.attrsList = [];\n\t\t\t\t\tdraft.translationList = [];\n\t\t\t\t\tdraft.initialTranslationList = [];\n\t\t\t\t\tdraft.removedTranslationList = [];\n\t\t\t\t});\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tconst views = await fetchViews(view);\n\t\t\tconst attrsList = await fetchAttrsList({\n\t\t\t\tmodel: model.name,\n\t\t\t\tview: view.name,\n\t\t\t});\n\t\t\tconst schema = Utils.generateXMLToViewSchema({\n\t\t\t\tview: views.view,\n\t\t\t\tfields: metaFieldStore,\n\t\t\t\textensionXML: views.extensionXML,\n\t\t\t\tattrsList,\n\t\t\t});\n\t\t\tconst translationNames = Object.values(schema.widgets)\n\t\t\t\t.filter((widget) => widget.title && widget.title.startsWith(\"studio:\"))\n\t\t\t\t.map((widget) => widget.title);\n\t\t\tconst translationList = await getTranslationList(translationNames);\n\t\t\tconst originalViewData = {\n\t\t\t\toperator: \"and\",\n\t\t\t\tcriteria: [\n\t\t\t\t\t{\n\t\t\t\t\t\toperator: \"or\",\n\t\t\t\t\t\tcriteria: [\n\t\t\t\t\t\t\t{ fieldName: \"computed\", operator: \"=\", value: false },\n\t\t\t\t\t\t\t{ fieldName: \"computed\", operator: \"isNull\" },\n\t\t\t\t\t\t],\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\toperator: \"or\",\n\t\t\t\t\t\tcriteria: [\n\t\t\t\t\t\t\t{ fieldName: \"extension\", operator: \"=\", value: false },\n\t\t\t\t\t\t\t{ fieldName: \"extension\", operator: \"isNull\" },\n\t\t\t\t\t\t],\n\t\t\t\t\t},\n\t\t\t\t\t{ fieldName: \"name\", operator: \"=\", value: `${view.name}` },\n\t\t\t\t],\n\t\t\t};\n\t\t\tmetaViewService.search({ data: originalViewData }).then((res) => {\n\t\t\t\tconst { data = [] } = res;\n\t\t\t\tif (data[0]) {\n\t\t\t\t\tupdate((draft) => {\n\t\t\t\t\t\tdraft.originalXML = JSON.parse(\n\t\t\t\t\t\t\tconvert.xml2json(data[0].xml, {\n\t\t\t\t\t\t\t\tcompact: false,\n\t\t\t\t\t\t\t\tfullTagEmptyElement: false,\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t);\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t});\n\t\t\t// fetch studio extension view\n\t\t\tconst _viewSearch = {\n\t\t\t\t_domain: `self.xmlId = 'studio-${view.name}' and self.extension = true`,\n\t\t\t};\n\t\t\tconst res = await metaViewService.search({ data: _viewSearch });\n\t\t\tconst { data: resData = [] } = res;\n\t\t\tconst record = resData[0];\n\t\t\tif (record) {\n\t\t\t\tupdate((draft) => {\n\t\t\t\t\tdraft.extensionView = record;\n\t\t\t\t\tdraft.extensionXML = JSON.parse(\n\t\t\t\t\t\tconvert.xml2json(record.xml, {\n\t\t\t\t\t\t\tcompact: false,\n\t\t\t\t\t\t\tfullTagEmptyElement: false,\n\t\t\t\t\t\t})\n\t\t\t\t\t);\n\t\t\t\t});\n\t\t\t}\n\t\t\tupdate((draft) => {\n\t\t\t\tclearHistory(draft);\n\t\t\t\tdraft.attrsList = attrsList;\n\t\t\t\tdraft.translationList = translationList;\n\t\t\t\tdraft.initialTranslationList = translationList;\n\t\t\t\tdraft.removedTranslationList = [];\n\t\t\t\tif (schema) {\n\t\t\t\t\tdraft.widgets = schema.widgets;\n\t\t\t\t\tdraft.initialWidgets = schema.widgets;\n\t\t\t\t\tdraft.items = schema.items;\n\t\t\t\t\tdraft.initialItems = schema.items;\n\t\t\t\t\tdraft.metaFields = [...draft.metaFieldStore].filter(\n\t\t\t\t\t\t(field) =>\n\t\t\t\t\t\t\tschema.fieldList.findIndex((f) => f.name === field.name) === -1\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t\tdraft.selectedView = view;\n\t\t\t\tif (views.view) {\n\t\t\t\t\tdraft.view = { fields: draft.metaFields, view: views.view };\n\t\t\t\t\tdraft.exView = views.view;\n\t\t\t\t}\n\t\t\t\tdraft.customFields = [];\n\t\t\t\tdraft.customFieldWidgets = null;\n\t\t\t\tdraft.customFieldItems = null;\n\t\t\t\tdraft.modelField = null;\n\t\t\t\tdraft.loader = false;\n\t\t\t\tdraft.extensionMoves = [];\n\t\t\t\tdraft.errorList = {};\n\t\t\t\tgenerateXpath(draft);\n\t\t\t});\n\t\t},\n\t\t[update, startLoader, metaFieldStore, clearHistory, model]\n\t);\n\n\tconst viewFilter = React.useCallback(() => {\n\t\tlet _domain = `self.type='form'`;\n\t\tlet _model = `${model ? model.fullName : \"\"}`;\n\t\tif (entityType === ENTITY_TYPE.ENTITY) {\n\t\t\t_model = `${entityModel ? Utils.getEntityModel(entityModel) : \"\"}`;\n\t\t}\n\t\t// if(model) {\n\t\t_domain = `${_domain} and self.model='${_model}' and (self.computed = true OR self.name NOT IN (select meta.name from MetaView meta where meta.computed = true))`;\n\t\t// }\n\t\treturn {\n\t\t\t_domain,\n\t\t\tfields: [\n\t\t\t\t\"name\",\n\t\t\t\t\"model\",\n\t\t\t\t\"title\",\n\t\t\t\t\"type\",\n\t\t\t\t\"extension\",\n\t\t\t\t\"xmlId\",\n\t\t\t\t\"computed\",\n\t\t\t\t\"xml\",\n\t\t\t],\n\t\t};\n\t}, [model, entityModel, entityType]);\n\n\tconst modelFilter = React.useCallback(() => {\n\t\treturn {\n\t\t\tfields: [\"name\", \"fullName\", \"packageName\"],\n\t\t};\n\t}, []);\n\n\tconst metaFieldFilter = React.useCallback(() => {\n\t\tconst _domain = `self.json = true and self.metaModel.id='${\n\t\t\tmodel ? model.id : -1\n\t\t}'`;\n\t\treturn {\n\t\t\t_domain,\n\t\t\tfields: [\"name\"],\n\t\t};\n\t}, [model]);\n\n\tconst handleMetaFieldSelect = React.useCallback(\n\t\t(field) => {\n\t\t\tif (field) {\n\t\t\t\tfetchCustomFields(field, model).then((res) => {\n\t\t\t\t\tconst { data = [] } = res;\n\t\t\t\t\tconst schema = generateCustomModelSchema(\n\t\t\t\t\t\tdata,\n\t\t\t\t\t\tundefined,\n\t\t\t\t\t\t\"\",\n\t\t\t\t\t\t\"customForm\"\n\t\t\t\t\t);\n\t\t\t\t\tupdate((draft) => {\n\t\t\t\t\t\tconst newId = _.uniqueId();\n\t\t\t\t\t\tdraft.customFieldWidgets =\n\t\t\t\t\t\t\tObject.keys(schema.widgets)?.length > 2\n\t\t\t\t\t\t\t\t? schema.widgets\n\t\t\t\t\t\t\t\t: {\n\t\t\t\t\t\t\t\t\t\t...schema.widgets,\n\t\t\t\t\t\t\t\t\t\t[newId]: {\n\t\t\t\t\t\t\t\t\t\t\tname: `panel${newId}`,\n\t\t\t\t\t\t\t\t\t\t\t...PANEL_PROPS,\n\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t  };\n\t\t\t\t\t\tdraft.customFieldItems =\n\t\t\t\t\t\t\tschema.items?.length > 0 ? schema.items : [`${newId}`];\n\t\t\t\t\t\tdraft.customFields = data;\n\t\t\t\t\t\tdraft.modelField = field;\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\tupdate((draft) => {\n\t\t\t\t\tdraft.customFieldWidgets = null;\n\t\t\t\t\tdraft.customFieldItems = null;\n\t\t\t\t\tdraft.customFields = [];\n\t\t\t\t\tdraft.modelField = field;\n\t\t\t\t});\n\t\t\t}\n\t\t},\n\t\t[model, update]\n\t);\n\n\tconst handleTypeSelect = React.useCallback(\n\t\t(type) => {\n\t\t\tconst { value } = type;\n\t\t\tif ([MODEL_TYPE.CUSTOM, MODEL_TYPE.BASE].includes(value)) {\n\t\t\t\tgetEnableAppBuilder().then((res) => {\n\t\t\t\t\tupdate((draft) => {\n\t\t\t\t\t\tdraft.enableAppBuilder = res;\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t\t}\n\t\t\tconst updater = (draft) => {\n\t\t\t\tdraft.modelType = type ? type.value : null;\n\t\t\t\tdraft.entityType = null;\n\t\t\t\tdraft.initialWidgets = null;\n\t\t\t\tdraft.initialItems = null;\n\t\t\t\tdraft.modelField = null;\n\t\t\t\tdraft.customFields = [];\n\t\t\t\tdraft.customFieldWidgets = null;\n\t\t\t\tdraft.entityModel = null;\n\t\t\t\tdraft.metaFieldStore = [];\n\t\t\t\tdraft.extensionMoves = [];\n\t\t\t\tdraft.removedTranslationList = [];\n\t\t\t};\n\t\t\tif (value === MODEL_TYPE.CUSTOM) {\n\t\t\t\treset(updater);\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tupdate((draft) => {\n\t\t\t\tclearHistory(draft);\n\t\t\t\tupdater(draft);\n\t\t\t\tdraft.model = null;\n\t\t\t\tdraft.customModel = null;\n\t\t\t\tdraft.widgets = null;\n\t\t\t\tdraft.items = [];\n\t\t\t\tdraft.view = null;\n\t\t\t\tdraft.exView = null;\n\t\t\t\tdraft.metaFields = [];\n\t\t\t\tdraft.metaFields = [];\n\t\t\t\tdraft.selectedView = null;\n\t\t\t\tdraft.errorList = {};\n\t\t\t\tdraft.attrsList = [];\n\t\t\t\tdraft.translationList = [];\n\t\t\t\tdraft.initialTranslationList = [];\n\t\t\t});\n\t\t},\n\t\t[update, reset, clearHistory]\n\t);\n\n\tconst handleViewFilterData = React.useCallback((list) => {\n\t\tconst newList = list.filter((view) => {\n\t\t\tif (!view.computed) {\n\t\t\t\tconst index = list.findIndex((e) => e.name === view.name && e.computed);\n\t\t\t\tif (index !== -1) {\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (view.extension === true) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\treturn true;\n\t\t});\n\t\treturn newList;\n\t}, []);\n\n\tconst getOptionLabel = (option) => {\n\t\tif (option.extension === true) {\n\t\t\treturn `${option.name} (Extension)`;\n\t\t}\n\t\tif (option.computed === true) {\n\t\t\treturn `${option.name} (Computed)`;\n\t\t}\n\t\treturn option.name;\n\t};\n\treturn (\n\t\t<>\n\t\t\t<Select\n\t\t\t\toptions={modelTypes}\n\t\t\t\tvalue={modelTypes.find((e) => e.value === modelType)}\n\t\t\t\tfilterSelectedOptions={true}\n\t\t\t\tlabel=\"Type\"\n\t\t\t\tonChange={handleTypeSelect}\n\t\t\t\tdisableClearable\n\t\t\t/>\n\t\t\t<Select\n\t\t\t\tonChange={handleModelSelect}\n\t\t\t\tlabel=\"Model\"\n\t\t\t\tmodel={modelName}\n\t\t\t\tsearchFilter={modelFilter}\n\t\t\t\tvalue={model}\n\t\t\t\tonSearch={modelSearch}\n\t\t\t\tmodelType={modelType}\n\t\t\t/>\n\t\t\t{modelType === MODEL_TYPE.BASE && (\n\t\t\t\t<React.Fragment>\n\t\t\t\t\t<Select\n\t\t\t\t\t\tonChange={handleViewSelect}\n\t\t\t\t\t\tlabel=\"View\"\n\t\t\t\t\t\tmodel=\"com.axelor.meta.db.MetaView\"\n\t\t\t\t\t\tsearchFilter={viewFilter}\n\t\t\t\t\t\tgetOptionLabel={getOptionLabel}\n\t\t\t\t\t\tvalue={props.selectedView}\n\t\t\t\t\t\tfilterData={handleViewFilterData}\n\t\t\t\t\t/>\n\t\t\t\t\t<Select\n\t\t\t\t\t\tlabel=\"Custom fields\"\n\t\t\t\t\t\tmodel=\"com.axelor.meta.db.MetaField\"\n\t\t\t\t\t\tsearchFilter={metaFieldFilter}\n\t\t\t\t\t\tonChange={handleMetaFieldSelect}\n\t\t\t\t\t\tvalue={modelField}\n\t\t\t\t\t/>\n\t\t\t\t</React.Fragment>\n\t\t\t)}\n\t\t</>\n\t);\n}\n\nexport default React.memo(ViewSelection);\n","import React from \"react\";\nimport { IconButton } from \"@material-ui/core\";\nimport { Add, Save, Delete, Undo, Redo, Menu } from \"@material-ui/icons\";\nimport { makeStyles } from \"@material-ui/core/styles\";\n\nimport ViewSelection from \"./ViewSelection\";\nimport { MODEL_TYPE } from \"./../constants\";\n\nconst useStyles = makeStyles({\n\ttoolbarContainer: {\n\t\tdisplay: 'flex',\n\t\tflexWrap: 'wrap',\n\t\twidth: \"100%\",\n\t\theight: \"inherit\",\n\t\tbackgroundColor: \"rgb(41, 56, 70)\",\n\t\tpadding: '0.5rem 0.75rem',\n\t\t\".modern-dark &\": {\n\t\t\tbackgroundColor: \"#323232\",\n\t\t},\n\t},\n\ttoolItemView: {\n\t\tcolor: \"#fff\",\n\t\tpadding: \"5px 10px\",\n\t},\n\tcrudIcon: {\n\t\theight: \"1em\",\n\t\twidth: \"1em\",\n\t\tfontSize: 18,\n\t\tcursor: \"pointer\",\n\t},\n\tselectionContainer: {\n\t\tflex: 1,\n\t\tdisplay: \"flex\",\n\t\talignItems: \"center\",\n\t\tflexWrap: 'wrap',\n\t},\n\ttoolbarActions: {\n\t\tdisplay: \"flex\",\n\t\talignItems: \"center\",\n\t},\n\tdisableBtn: {\n\t\tcolor: '#555 !important',\n\t}\n});\n\nfunction isStudioView(view) {\n\tif (view && view.xmlId && view.xmlId.indexOf(\"studio-\") === 0) {\n\t\treturn true;\n\t}\n\treturn false;\n}\n\nfunction ToolbarButton(props) {\n\tconst classes = useStyles();\n  return (\n    <IconButton\n      className={classes.toolItemView}\n      classes={{ disabled: classes.disableBtn }}\n\t\t\t{...props}\n    />\n  )\n}\n\nfunction Toolbar({\n\tupdate,\n\tsaveView,\n\tmodelType,\n\tsaveCustomFieldView,\n\tremoveView,\n\tmodel,\n\tonNew,\n\treset,\n\t...props\n}) {\n\tconst classes = useStyles();\n\tconst save = React.useCallback(() => {\n\t\tsaveView();\n\t\tif (modelType === MODEL_TYPE.BASE) {\n\t\t\tsaveCustomFieldView();\n\t\t}\n\t}, [saveView, saveCustomFieldView, modelType]);\n\tconst isRemoveDisabled = !(\n\t\tprops.extensionView ||\n\t\tisStudioView(props.selectedView) ||\n\t\t(modelType === MODEL_TYPE.CUSTOM && Boolean(props.customModel)) ||\n\t\t(modelType === MODEL_TYPE.ENTITY &&\n\t\t\tBoolean(props.entityModel) &&\n\t\t\tBoolean(props.entityModel.id))\n\t);\n\tconst isNewDisabled =\n\t\tmodelType === MODEL_TYPE.BASE && !model && !props.entityModel;\n\tconst isSaveDisabled = Object.keys(props.errorList).length > 0;\n\n\treturn (\n\t\t<div className={classes.toolbarContainer}>\n\t\t\t<div className={classes.toolbarActions}>\n\t\t\t\t<ToolbarButton\n\t\t\t\t\tclassName={classes.toolItemView}\n\t\t\t\t\tonClick={props.onSidePanelToggle}\n\t\t\t\t>\n\t\t\t\t\t<Menu className={classes.crudIcon} />\n\t\t\t\t</ToolbarButton>\n\t\t\t\t{modelType !== MODEL_TYPE.BASE && (\n\t\t\t\t\t<ToolbarButton\n\t\t\t\t\t\tclassName={classes.toolItemView}\n\t\t\t\t\t\tonClick={onNew}\n\t\t\t\t\t\tdisabled={isNewDisabled}\n\t\t\t\t\t>\n\t\t\t\t\t\t<Add className={classes.crudIcon} />\n\t\t\t\t\t</ToolbarButton>\n\t\t\t\t)}\n\t\t\t\t<ToolbarButton\n\t\t\t\t\tclassName={classes.toolItemView}\n\t\t\t\t\tonClick={save}\n\t\t\t\t\tdisabled={isSaveDisabled}\n\t\t\t\t>\n\t\t\t\t\t<Save className={classes.crudIcon} />\n\t\t\t\t</ToolbarButton>\n\t\t\t\t<ToolbarButton\n\t\t\t\t\tclassName={classes.toolItemView}\n\t\t\t\t\tonClick={removeView}\n\t\t\t\t\tdisabled={isRemoveDisabled}\n\t\t\t\t>\n\t\t\t\t\t<Delete className={classes.crudIcon} />\n\t\t\t\t</ToolbarButton>\n\t\t\t</div>\n\t\t\t<div className={classes.selectionContainer}>\n\t\t\t\t<ViewSelection\n\t\t\t\t\tmodel={model}\n\t\t\t\t\tupdate={update}\n\t\t\t\t\tmodelType={modelType}\n\t\t\t\t\treset={reset}\n\t\t\t\t\t{...props}\n\t\t\t\t/>\n\t\t\t</div>\n\t\t\t<div className={classes.toolbarActions}>\n\t\t\t\t<ToolbarButton\n\t\t\t\t\tclassName={classes.toolItemView}\n\t\t\t\t\tonClick={() => props.undo()}\n\t\t\t\t\tdisabled={props.pastLength <= 0}\n\t\t\t\t>\n\t\t\t\t\t<Undo className={classes.crudIcon} />\n\t\t\t\t</ToolbarButton>\n\t\t\t\t<ToolbarButton\n\t\t\t\t\tonClick={() => props.redo()}\n\t\t\t\t\tdisabled={props.futureLength <= 0}\n\t\t\t\t>\n\t\t\t\t\t<Redo className={classes.crudIcon} />\n\t\t\t\t</ToolbarButton>\n\t\t\t</div>\n\t\t</div>\n\t);\n}\n\nexport default React.memo(Toolbar);\n","import Utils from \"../utils\";\nimport { DEFAULT_VALUE, conditionProperties } from \"../constants\";\nimport { eGeneratePath } from \"./../store/xpathGenerator\";\n\nfunction hasIndex(path) {\n\treturn path.split(\"[\").length - 1 > 1;\n}\n\nfunction convertConditionName(name) {\n\tconst propertyName = conditionProperties[name];\n\treturn propertyName;\n}\n\nconst getWidgets = ({ widgets, items }) => {\n\tObject.keys(widgets).forEach((widgetId) => {\n\t\tconst path = eGeneratePath(widgets, items, widgetId);\n\t\twidgets[widgetId].xPath = path;\n\t});\n\treturn widgets;\n};\n\nfunction getName({ self, parent }) {\n\tlet name = \"\";\n\tconst pathText = self || parent;\n\tif (pathText) {\n\t\tconst finder = \"@name='\";\n\t\tconst index = pathText.indexOf(finder) + finder.length;\n\t\tconst endIndex = pathText.indexOf(\"']\");\n\t\tname = pathText.substring(index, endIndex);\n\t}\n\treturn name;\n}\n\nconst isSameAsOriginal = (item, originalWidgets) => {\n\tif (item) {\n\t\tconst { attributes } = item;\n\t\tconst itemExplore = Utils.exploreTarget(item.target);\n\t\tconst widget = Object.values(originalWidgets).find((widget) => {\n\t\t\tconst widgetExplore = Utils.exploreTarget(widget.xPath);\n\t\t\tif (widgetExplore.self || itemExplore.self) {\n\t\t\t\treturn widgetExplore.self === itemExplore.self;\n\t\t\t} else if (widgetExplore.parent || itemExplore.parent) {\n\t\t\t\treturn widgetExplore.parent === itemExplore.parent;\n\t\t\t}\n\t\t\treturn false;\n\t\t});\n\t\tconst attributeName = Utils.dashToCamelCase(attributes.name);\n\t\tif (widget) {\n\t\t\tlet widgetValue = widget[attributeName];\n\t\t\tlet maskedValue = widget[attributes.maskName];\n\t\t\tif (maskedValue === undefined) {\n\t\t\t\tmaskedValue = \"\";\n\t\t\t}\n\t\t\tif (widgetValue === undefined) {\n\t\t\t\twidgetValue = false;\n\t\t\t}\n\t\t\tif (attributes.maskName !== attributes.name) {\n\t\t\t\tif (`${maskedValue}` === `${attributes.value}`) {\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t} else if (`${widgetValue}` === `${attributes.value}`) {\n\t\t\t\treturn true;\n\t\t\t} else if (\n\t\t\t\t[\"\", undefined, null].includes(widget[attributeName]) &&\n\t\t\t\t[\"\", undefined, null].includes(attributes.value)\n\t\t\t) {\n\t\t\t\treturn true;\n\t\t\t} else if (\n\t\t\t\tattributes.maskName !== attributes.name &&\n\t\t\t\t[\"\", undefined, null].includes(widget[attributes.maskName]) &&\n\t\t\t\t[\"\", undefined, null].includes(attributes.value)\n\t\t\t) {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\t}\n\treturn false;\n};\n\nexport function getUpdatedAttrsList(state, originalWidgets) {\n\tconst newAttrsList = [];\n\tconst removedAttrsList = [];\n\tconst { attrsList = [] } = state;\n\tconst moves = state.extensionMoves.filter((m) => m.name === \"attribute\");\n\tconst view = state.selectedView;\n\tconst model = state.model;\n\tconst movesMap = new Map();\n\tconst currentSchema = Utils.generateXMLToViewSchema({\n\t\tview: state.view.view,\n\t\tfields: state.metaFieldStore,\n\t\tattrsList: state.attrsList,\n\t});\n\tconst currentWidgets = getWidgets(currentSchema);\n\n\tmoves.forEach((move) => {\n\t\tconst convertedName = convertConditionName(move.attributes.name);\n\t\tconst name = convertedName || move.attributes.name;\n\t\tconst value = move.attributes.value;\n\t\tconst newMove = Object.assign(\n\t\t\t{},\n\t\t\t{\n\t\t\t\t...move,\n\t\t\t\tattributes: {\n\t\t\t\t\t...move.attributes,\n\t\t\t\t\tname,\n\t\t\t\t\tvalue,\n\t\t\t\t\tmaskName: move.attributes.name,\n\t\t\t\t},\n\t\t\t}\n\t\t);\n\t\tmovesMap.set(name, newMove);\n\t});\n\tmovesMap.forEach((value) => {\n\t\tconst move = value;\n\t\tconst moveExplore = Utils.exploreTarget(move.target);\n\t\tconst { attributes } = move;\n\t\tconst fieldName = getName(moveExplore);\n\t\tconst fieldIndex = attrsList.findIndex(\n\t\t\t(attr) =>\n\t\t\t\tfieldName.includes(attr.field) &&\n\t\t\t\t(attr.name === attributes.name ||\n\t\t\t\t\tconditionProperties[attr.name] === attributes.name)\n\t\t);\n\t\tconst field = attrsList[fieldIndex];\n\t\tconst isOriginal = isSameAsOriginal(move, originalWidgets);\n\t\tconst isCurrent = isSameAsOriginal(move, currentWidgets);\n\t\tconst newAttrsIndex = newAttrsList.findIndex(\n\t\t\t(attr) =>\n\t\t\t\tmoveExplore.self &&\n\t\t\t\tmoveExplore.self.includes(attr.field) &&\n\t\t\t\tattr.name === attributes.name\n\t\t);\n\t\tlet defaultValue = DEFAULT_VALUE[attributes.name];\n\t\tif (isOriginal || isCurrent) {\n\t\t\tif (newAttrsIndex !== -1) {\n\t\t\t\tnewAttrsList.splice(newAttrsIndex, 1);\n\t\t\t} else if (field && field.id) {\n\t\t\t\tremovedAttrsList.push({ id: field.id, version: field.version });\n\t\t\t}\n\t\t} else {\n\t\t\tif (field) {\n\t\t\t\tif ([null, undefined].includes(attributes.value)) {\n\t\t\t\t\tif (defaultValue) {\n\t\t\t\t\t\tif (defaultValue === attributes.value) {\n\t\t\t\t\t\t\tremovedAttrsList.push({ id: field.id, version: field.version });\n\t\t\t\t\t\t}\n\t\t\t\t\t} else {\n\t\t\t\t\t\tremovedAttrsList.push({ id: field.id, version: field.version });\n\t\t\t\t\t}\n\t\t\t\t} else if (field.value !== attributes.value) {\n\t\t\t\t\tif (defaultValue) {\n\t\t\t\t\t\tif (defaultValue === attributes.value) {\n\t\t\t\t\t\t\tremovedAttrsList.push({ id: field.id, version: field.version });\n\t\t\t\t\t\t}\n\t\t\t\t\t} else {\n\t\t\t\t\t\tif (newAttrsIndex === -1) {\n\t\t\t\t\t\t\tnewAttrsList.push({\n\t\t\t\t\t\t\t\t...field,\n\t\t\t\t\t\t\t\tname: attributes.name,\n\t\t\t\t\t\t\t\tvalue: attributes.value,\n\t\t\t\t\t\t\t\tmaskName: attributes.maskName,\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tnewAttrsList[newAttrsIndex].value = attributes.value;\n\t\t\t\t\t\t\tnewAttrsList[newAttrsIndex].maskName = attributes.maskName;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tif (fieldName) {\n\t\t\t\t\t// const hasInAttrsList = attrsList.find(attr => )\n\t\t\t\t\t// if(defaultValue !== attributes.value) {\n\t\t\t\t\tif (newAttrsIndex === -1) {\n\t\t\t\t\t\tnewAttrsList.push({\n\t\t\t\t\t\t\tview: view.name,\n\t\t\t\t\t\t\tmodel: model.fullName,\n\t\t\t\t\t\t\tname: attributes.name,\n\t\t\t\t\t\t\tmaskName: attributes.maskName,\n\t\t\t\t\t\t\tvalue: attributes.value,\n\t\t\t\t\t\t\tfield: fieldName,\n\t\t\t\t\t\t});\n\t\t\t\t\t} else {\n\t\t\t\t\t\tnewAttrsList[newAttrsIndex].value = attributes.value;\n\t\t\t\t\t\tnewAttrsList[newAttrsIndex].maskName = attributes.maskName;\n\t\t\t\t\t}\n\t\t\t\t\t// } else if(newAttrsIndex !== -1) {\n\t\t\t\t\t// \tnewAttrsList.splice(newAttrsIndex, 1);\n\t\t\t\t\t// }\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t});\n\treturn { changedAttrsList: newAttrsList, removedAttrsList };\n}\n\nexport function optimizeExtension(state, originalWidgets) {\n\tconst processed = [];\n\tconst moves = state.extensionMoves.filter((m) => m.name !== \"attribute\");\n\tlet list = [...moves];\n\tconst filterListForAttribute = (move) => {\n\t\tif (\n\t\t\tprocessed.findIndex(\n\t\t\t\t(p) => p.target === move.target && p.name === move.attributes.name\n\t\t\t) === -1\n\t\t) {\n\t\t\tconst _list = list\n\t\t\t\t.map((_item, i) => {\n\t\t\t\t\tif (\n\t\t\t\t\t\t_item.target === move.target &&\n\t\t\t\t\t\t_item.attributes &&\n\t\t\t\t\t\tmove.attributes.name === _item.attributes.name\n\t\t\t\t\t) {\n\t\t\t\t\t\treturn i;\n\t\t\t\t\t}\n\t\t\t\t\treturn undefined;\n\t\t\t\t})\n\t\t\t\t.filter((e) => e !== undefined);\n\t\t\tconst lastItem = _list[_list.length - 1];\n\t\t\tprocessed.push({ target: move.target, name: move.attributes.name });\n\t\t\tlist = list.filter((item, k) => {\n\t\t\t\tif (item.target === move.target) {\n\t\t\t\t\tif (\n\t\t\t\t\t\tmove.attributes &&\n\t\t\t\t\t\titem.attributes &&\n\t\t\t\t\t\tmove.attributes.name === item.attributes.name\n\t\t\t\t\t) {\n\t\t\t\t\t\treturn lastItem === k ? true : false;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\treturn true;\n\t\t\t});\n\t\t}\n\t};\n\n\tconst filterListForRemove = (move) => {\n\t\tlet canRemoveReplace = false;\n\t\tconst explore = Utils.exploreTarget(move.target);\n\t\t// check for insert nodes\n\t\tconst insertIndex = list.findIndex((item) => {\n\t\t\tif (item.name === \"insert\") {\n\t\t\t\treturn item.elements && item.elements[0] && explore.self\n\t\t\t\t\t? explore.self.includes(`'${item.elements[0].name}'`)\n\t\t\t\t\t: explore.parent && explore.parent.includes(item.elements[0].name);\n\t\t\t}\n\t\t\treturn false;\n\t\t});\n\t\tconst depends = list.filter((item) => {\n\t\t\tif (item.target) {\n\t\t\t\tconst itemExplore = Utils.exploreTarget(item.target);\n\t\t\t\treturn (\n\t\t\t\t\t[\"insert\", \"move\"].includes(item.name) &&\n\t\t\t\t\titemExplore.self &&\n\t\t\t\t\titemExplore.self.includes(explore.self)\n\t\t\t\t);\n\t\t\t}\n\t\t\treturn false;\n\t\t});\n\t\tif (insertIndex !== -1 && !depends.length) {\n\t\t\tcanRemoveReplace = true;\n\t\t\tlist.splice(insertIndex, 1);\n\t\t\t// check for move\n\t\t\t[...list].forEach((item) => {\n\t\t\t\tif (\n\t\t\t\t\titem.name === \"move\" &&\n\t\t\t\t\titem.source &&\n\t\t\t\t\titem.source === move.target\n\t\t\t\t) {\n\t\t\t\t\tconst moveIndex = list.findIndex(\n\t\t\t\t\t\t(_item) =>\n\t\t\t\t\t\t\t_item.name === \"move\" &&\n\t\t\t\t\t\t\t_item.source &&\n\t\t\t\t\t\t\t_item.source === move.target\n\t\t\t\t\t);\n\t\t\t\t\tif (moveIndex !== -1) {\n\t\t\t\t\t\tlist.splice(moveIndex, 1);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t\t// remove attribute changes\n\t\tlist = list.filter((item) => {\n\t\t\tif (item.name === \"attribute\" && item.target === move.target) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\treturn true;\n\t\t});\n\t\tif (canRemoveReplace) {\n\t\t\tconst removeIndex = list.findIndex(\n\t\t\t\t(item) => item.name === \"replace\" && item.target === move.target\n\t\t\t);\n\t\t\tif (removeIndex !== -1) {\n\t\t\t\tlist.splice(removeIndex, 1);\n\t\t\t}\n\t\t}\n\t};\n\n\tmoves.forEach((move, i) => {\n\t\tif (move.target) {\n\t\t\tconst explore = Utils.exploreTarget(move.target);\n\t\t\tlet flag = true;\n\t\t\tif (explore.self && hasIndex(explore.self)) {\n\t\t\t\tflag = false;\n\t\t\t}\n\t\t\tif (explore.parent && hasIndex(explore.parent)) {\n\t\t\t\tflag = false;\n\t\t\t}\n\t\t\tif (move.name === \"attribute\" && flag) {\n\t\t\t\tfilterListForAttribute(move);\n\t\t\t}\n\t\t\tif (move.name === \"replace\" && flag) {\n\t\t\t\tif (\n\t\t\t\t\t!(\n\t\t\t\t\t\t(explore?.self && explore.self.includes(\"panel\")) ||\n\t\t\t\t\t\t(!explore?.self && explore?.parent.includes(\"panel\"))\n\t\t\t\t\t)\n\t\t\t\t) {\n\t\t\t\t\tfilterListForRemove(move);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t});\n\treturn list;\n}\n","import React from \"react\";\nimport convert from \"xml-js\";\nimport {\n\tDialog,\n\tDialogTitle,\n\tDialogContent,\n\tDialogActions,\n\tButton,\n} from \"@material-ui/core\";\nimport _ from \"lodash\";\n\nimport Toolbar from \"./Toolbar\";\nimport { useStore } from \"../store/context\";\nimport { generateView } from \"../store/extensionGenerator\";\nimport AxelorService from \"./../services/axelor.rest\";\nimport Utils, { generateCustomModelSchema, translate } from \"../utils\";\nimport {\n\tMODEL_TYPE,\n\tENTITY_TYPE,\n\tconditionProperties,\n\totherNoQuoteProps,\n\tItemTypes,\n\tPANEL_PROPS,\n} from \"../constants\";\nimport {\n\tsaveCustomModel,\n\tfetchJSONFields,\n\tremoveCustomModel,\n\tgenerateMenuChange,\n\tfetchCustomModel,\n\tfetchCustomFields,\n\tfetchViews,\n\tsaveAttrsList,\n\tfetchAttrsList,\n\tsaveTranslationList,\n\tgetTranslationList,\n\tdeleteAttrsList,\n\tdeleteTranslationList,\n} from \"./api\";\nimport DeleteConfirmation from \"./DeleteConfirmation\";\nimport { getXML } from \"./../store/computeXML\";\nimport { generateXpath, eGeneratePath } from \"./../store/xpathGenerator\";\nimport {\n\toptimizeExtension,\n\tgetUpdatedAttrsList,\n} from \"../store/optimizeExtension\";\n\nconst metaViewService = new AxelorService({\n\tmodel: \"com.axelor.meta.db.MetaView\",\n});\nconst customFieldService = new AxelorService({\n\tmodel: \"com.axelor.meta.db.MetaJsonField\",\n});\nconst entityModelService = new AxelorService({\n\tmodel: \"com.axelor.newstudio.db.EntityModel\",\n});\n\nconst getWidgets = ({ widgets, items }) => {\n\tObject.keys(widgets).forEach((widgetId) => {\n\t\tconst path = eGeneratePath(widgets, items, widgetId);\n\t\twidgets[widgetId].xPath = path;\n\t});\n\treturn widgets;\n};\n\nconst getChangedTranslationList = (\n\tlist,\n\tinitialList,\n\tremovedTranslationList\n) => {\n\tconst deletedTranslationList = [];\n\tconst changedTranslationList = list.filter((item) => {\n\t\tif (removedTranslationList.indexOf(item.key) !== -1) {\n\t\t\titem.id &&\n\t\t\t\tdeletedTranslationList.push({ id: item.id, version: item.version });\n\t\t\treturn false;\n\t\t}\n\t\tif (item.id) {\n\t\t\tconst initialItem = initialList.find(\n\t\t\t\t(i) => i.language === item.language && i.key === item.key\n\t\t\t);\n\t\t\tif (initialItem && initialItem.message !== item.message) {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t\treturn false;\n\t\t}\n\t\treturn true;\n\t});\n\treturn { changedTranslationList, deletedTranslationList };\n};\n\nfunction ToolbarContainer(props) {\n\tconst { state, update, startLoader, undo, redo, clearHistory } = useStore();\n\tconst [deleteConfirmationDialog, setDeleteConfirmationDialog] =\n\t\tReact.useState(false);\n\n\tconst closeLoader = React.useCallback(() => {\n\t\tupdate((draft) => {\n\t\t\tdraft.loader = false;\n\t\t});\n\t}, [update]);\n\n\tconst reset = React.useCallback(\n\t\t(updater) => {\n\t\t\tupdate((draft) => {\n\t\t\t\tupdater && updater(draft);\n\t\t\t\tdraft.errorList = {};\n\t\t\t\tdraft.customModel = null;\n\t\t\t\tdraft.exView = null;\n\t\t\t\tdraft.view = null;\n\t\t\t\tdraft.extensionXML = null;\n\t\t\t\tdraft.extensionView = null;\n\t\t\t\tdraft.loader = false;\n\t\t\t\tdraft.metaFields = draft.metaFieldStore || [];\n\t\t\t\tdraft.selectedView = null;\n\t\t\t\tdraft.translationList = [];\n\t\t\t\tdraft.initialTranslationList = [];\n\t\t\t\tdraft.attrsList = [];\n\t\t\t\tdraft.model = null;\n\t\t\t\tconst newId = _.uniqueId();\n\t\t\t\tdraft.widgets = {\n\t\t\t\t\t\"-1\": {\n\t\t\t\t\t\ttype: \"form\",\n\t\t\t\t\t\tcols: 12,\n\t\t\t\t\t\textension: false,\n\t\t\t\t\t\t...Utils.getDefaultProperties(\n\t\t\t\t\t\t\tdraft.modelType,\n\t\t\t\t\t\t\tdraft.entityType,\n\t\t\t\t\t\t\tdraft.entityModel\n\t\t\t\t\t\t),\n\t\t\t\t\t},\n\t\t\t\t\t0: { type: \"dump_field\", name: \"\" },\n\t\t\t\t\t[newId]: {\n\t\t\t\t\t\tname: `panel${newId}`,\n\t\t\t\t\t\t...PANEL_PROPS,\n\t\t\t\t\t},\n\t\t\t\t};\n\t\t\t\tdraft.items = [`${newId}`];\n\t\t\t\tdraft.editWidget = -1;\n\t\t\t\tdraft.editWidgetType = null;\n\t\t\t\tdraft.tabIndex = 0;\n\t\t\t});\n\t\t},\n\t\t[update]\n\t);\n\n\tconst removeView = React.useCallback(\n\t\tfunction removeView() {\n\t\t\tstartLoader();\n\t\t\tconst clearView = (dialog) => {\n\t\t\t\tupdate((draft) => {\n\t\t\t\t\tclearHistory(draft);\n\t\t\t\t\tdraft.customModel = null;\n\t\t\t\t\tdraft.dialog = dialog;\n\t\t\t\t\tdraft.widgets = null;\n\t\t\t\t\tdraft.initialItems = null;\n\t\t\t\t\tdraft.initialWidgets = null;\n\t\t\t\t\tdraft.items = [];\n\t\t\t\t\tdraft.view = null;\n\t\t\t\t\tdraft.metaFields = [];\n\t\t\t\t\tdraft.selectedView = null;\n\t\t\t\t\tdraft.originalXML = null;\n\t\t\t\t\tdraft.extensionXML = null;\n\t\t\t\t\tdraft.selectedView = null;\n\t\t\t\t\tdraft.loader = false;\n\t\t\t\t\tdraft.extensionView = null;\n\t\t\t\t\tdraft.errorList = {};\n\t\t\t\t\tif (draft.modelType === MODEL_TYPE.CUSTOM) {\n\t\t\t\t\t\treset();\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t};\n\t\t\tif (state.modelType === MODEL_TYPE.CUSTOM) {\n\t\t\t\tif (state.model || state.customModel) {\n\t\t\t\t\tremoveCustomModel(state.model || state.customModel).then((res) => {\n\t\t\t\t\t\tconst { data, status } = res || {};\n\t\t\t\t\t\tif (status === -1) {\n\t\t\t\t\t\t\tconst { message = \"\" } = data || {};\n\t\t\t\t\t\t\tconst dialog = {\n\t\t\t\t\t\t\t\tmessage,\n\t\t\t\t\t\t\t\ttype: \"alert\",\n\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\tupdate((draft) => {\n\t\t\t\t\t\t\t\tdraft.loader = false;\n\t\t\t\t\t\t\t\tdraft.dialog = dialog;\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tclearView(null);\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tlet record;\n\t\t\t\tif (state.extensionView) {\n\t\t\t\t\trecord = {\n\t\t\t\t\t\tid: state.extensionView.id,\n\t\t\t\t\t\tversion: state.extensionView.version,\n\t\t\t\t\t};\n\t\t\t\t} else if (\n\t\t\t\t\tstate.selectedView &&\n\t\t\t\t\tstate.selectedView.xmlId &&\n\t\t\t\t\tstate.selectedView.xmlId.indexOf(\"studio-\") === 0\n\t\t\t\t) {\n\t\t\t\t\trecord = {\n\t\t\t\t\t\tid: state.selectedView.id,\n\t\t\t\t\t\tversion: state.selectedView.version,\n\t\t\t\t\t};\n\t\t\t\t}\n\t\t\t\tif (record) {\n\t\t\t\t\tmetaViewService.removeAll([record]).then((e) => {\n\t\t\t\t\t\tclearView(null);\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\t[update, state, startLoader, clearHistory, reset]\n\t);\n\tconst saveView = React.useCallback(async () => {\n\t\tif (!state.widgets) {\n\t\t\treturn;\n\t\t}\n\t\tstartLoader();\n\t\tif (state.modelType === MODEL_TYPE.CUSTOM) {\n\t\t\tconst { fields } = Utils.getCustomModelFields(\n\t\t\t\tstate.items,\n\t\t\t\tstate.widgets,\n\t\t\t\tnull,\n\t\t\t\ttrue\n\t\t\t);\n\t\t\tconst propertyValues = Object.values(state.widgets || {}) || [];\n\t\t\tconst uniqueValues = new Set(propertyValues.map((v) => v.name)) || [];\n\t\t\tif (uniqueValues.size < propertyValues.length) {\n\t\t\t\tconst dialog = {\n\t\t\t\t\tmessage: translate(\"Field name should be unique\"),\n\t\t\t\t\ttype: \"alert\",\n\t\t\t\t};\n\t\t\t\tupdate((draft) => {\n\t\t\t\t\tdraft.loader = false;\n\t\t\t\t\tdraft.dialog = dialog;\n\t\t\t\t});\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tconst formProperties = state.widgets[-1];\n\t\t\tif (!formProperties.name || !formProperties.title) {\n\t\t\t\tconst dialog = {\n\t\t\t\t\tmessage: \"Please enter form name and title\",\n\t\t\t\t\ttype: \"alert\",\n\t\t\t\t};\n\t\t\t\tupdate((draft) => {\n\t\t\t\t\tdraft.loader = false;\n\t\t\t\t\tdraft.dialog = dialog;\n\t\t\t\t});\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tlet customModel = {\n\t\t\t\t...state.customModel,\n\t\t\t\t...Utils.getFormProperties(formProperties),\n\t\t\t\tfields,\n\t\t\t\t...(state.customModel && { version: state.customModel.version }),\n\t\t\t};\n\t\t\tif (formProperties.isGenerateMenu === true) {\n\t\t\t\tcustomModel[\"menuBuilder\"] = {\n\t\t\t\t\t...(state.customModel || {}).menuBuilder,\n\t\t\t\t\ttitle: formProperties.menuBuilderTitle,\n\t\t\t\t\tparentMenu: formProperties.menuBuilderParent,\n\t\t\t\t\tversion: ((state.customModel || {}).menuBuilder || {}).$version,\n\t\t\t\t};\n\t\t\t}\n\t\t\tconst { isGenerateMenu } = state.customModel || {};\n\t\t\tif (formProperties.isGenerateMenu !== isGenerateMenu) {\n\t\t\t\tconst res = await generateMenuChange(customModel);\n\t\t\t\tconst { data = [] } = res;\n\t\t\t\tif (data[0] && data[0].reload) {\n\t\t\t\t\tconst modelResult = await fetchCustomModel(customModel.id);\n\t\t\t\t\tcustomModel = {\n\t\t\t\t\t\t...customModel,\n\t\t\t\t\t\tmenuBuilder: null,\n\t\t\t\t\t\tversion: modelResult.version,\n\t\t\t\t\t};\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (state.removedCustomFields.length) {\n\t\t\t\tawait customFieldService.removeAll(state.removedCustomFields);\n\t\t\t}\n\t\t\tsaveCustomModel(customModel).then((res) => {\n\t\t\t\tconst { data, status } = res || {};\n\t\t\t\tif (status === -1) {\n\t\t\t\t\tconst { message = \"\", title } = data || {};\n\t\t\t\t\tlet errorMessage = message;\n\t\t\t\t\tif (\n\t\t\t\t\t\ttitle &&\n\t\t\t\t\t\ttitle.includes(translate(\"Unique constraint violation\"))\n\t\t\t\t\t) {\n\t\t\t\t\t\terrorMessage = translate(\"Model name should be unique\");\n\t\t\t\t\t\tif (message.includes(\"com.axelor.meta.db.MetaJsonRecord\")) {\n\t\t\t\t\t\t\terrorMessage = translate(\"Field name should be unique\");\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tconst dialog = {\n\t\t\t\t\t\tmessage: errorMessage,\n\t\t\t\t\t\ttype: \"alert\",\n\t\t\t\t\t};\n\t\t\t\t\tupdate((draft) => {\n\t\t\t\t\t\tdraft.loader = false;\n\t\t\t\t\t\tdraft.dialog = dialog;\n\t\t\t\t\t});\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tconst record = data && data[0];\n\t\t\t\tconst { fields = [], ...rest } = record;\n\t\t\t\tif (rest.menuBuilder) {\n\t\t\t\t\trest.menuBuilder = {\n\t\t\t\t\t\t...customModel.menuBuilder,\n\t\t\t\t\t\t...rest.menuBuilder,\n\t\t\t\t\t};\n\t\t\t\t}\n\t\t\t\tfetchJSONFields(\n\t\t\t\t\tfields.map((f) => f.id),\n\t\t\t\t\tupdate,\n\t\t\t\t\trest\n\t\t\t\t);\n\t\t\t\tupdate((draft) => {\n\t\t\t\t\tdraft.customModel = record;\n\t\t\t\t\tdraft.model = record;\n\t\t\t\t\tdraft.loader = false;\n\t\t\t\t\tdraft.removedCustomFields = [];\n\t\t\t\t});\n\t\t\t});\n\t\t} else if (state.modelType === MODEL_TYPE.ENTITY) {\n\t\t\tconst formProperties = state.widgets[-1];\n\t\t\tif (!formProperties.name) {\n\t\t\t\tconst dialog = {\n\t\t\t\t\tmessage: \"Please enter entity name\",\n\t\t\t\t\ttype: \"alert\",\n\t\t\t\t};\n\t\t\t\tupdate((draft) => {\n\t\t\t\t\tdraft.loader = false;\n\t\t\t\t\tdraft.dialog = dialog;\n\t\t\t\t});\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tconst patch = generateView(state.widgets, state.items, state.modelType);\n\t\t\tconst properties = {\n\t\t\t\t...formProperties,\n\t\t\t\tmodel: `${formProperties.packageName}.${formProperties.name}`,\n\t\t\t};\n\t\t\tconst form = {\n\t\t\t\telements: [\n\t\t\t\t\t{\n\t\t\t\t\t\tname: \"entity\",\n\t\t\t\t\t\ttype: \"element\",\n\t\t\t\t\t\tattributes: {\n\t\t\t\t\t\t\t...Utils.getFormProperties(properties, [\n\t\t\t\t\t\t\t\t\"extension\",\n\t\t\t\t\t\t\t\t\"metaFields\",\n\t\t\t\t\t\t\t\t\"id\",\n\t\t\t\t\t\t\t\t\"$attachments\",\n\t\t\t\t\t\t\t\t\"packageName\",\n\t\t\t\t\t\t\t\t\"model\",\n\t\t\t\t\t\t\t]),\n\t\t\t\t\t\t},\n\t\t\t\t\t\telements: [...patch],\n\t\t\t\t\t},\n\t\t\t\t],\n\t\t\t};\n\t\t\tconst xml = Utils.processXML(\n\t\t\t\tconvert.json2xml(form, {\n\t\t\t\t\tcompact: false,\n\t\t\t\t\tfullTagEmptyElement: false,\n\t\t\t\t})\n\t\t\t);\n\t\t\tconst data = {\n\t\t\t\t...(state.entityModel ? state.entityModel : {}),\n\t\t\t\tentityXml: xml,\n\t\t\t\tname: formProperties.name,\n\t\t\t\tpackageName: formProperties.packageName,\n\t\t\t};\n\t\t\tentityModelService.save(data).then((res) => {\n\t\t\t\tconst record = res.data[0];\n\t\t\t\tif (res.status === -1) {\n\t\t\t\t\tconst dialog = {\n\t\t\t\t\t\tmessage: res.data.string,\n\t\t\t\t\t\ttype: \"alert\",\n\t\t\t\t\t};\n\t\t\t\t\tupdate((draft) => {\n\t\t\t\t\t\tdraft.loader = false;\n\t\t\t\t\t\tdraft.dialog = dialog;\n\t\t\t\t\t});\n\t\t\t\t} else if (record) {\n\t\t\t\t\tupdate((draft) => {\n\t\t\t\t\t\tdraft.entityModel = record;\n\t\t\t\t\t\tdraft.loader = false;\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t});\n\t\t} else {\n\t\t\tif (state.widgets) {\n\t\t\t\tconst exemptAttributes = [\n\t\t\t\t\t\"viewId\",\n\t\t\t\t\t\"modelId\",\n\t\t\t\t\t\"version\",\n\t\t\t\t\t\"helpOverride\",\n\t\t\t\t\t\"menubar\",\n\t\t\t\t\t\"xml\",\n\t\t\t\t\t\"computed\",\n\t\t\t\t\t\"xmlId\",\n\t\t\t\t\t\"type\",\n\t\t\t\t\t\"cols\",\n\t\t\t\t\t\"colSpan\",\n\t\t\t\t\t\"serverType\",\n\t\t\t\t];\n\t\t\t\tif (!state.exView || Utils.isCreatedFromStudio(state.exView)) {\n\t\t\t\t\tconst formProperties = state.widgets[-1];\n\t\t\t\t\tif (!formProperties.name || !formProperties.title) {\n\t\t\t\t\t\tconst dialog = {\n\t\t\t\t\t\t\tmessage: \"Please enter form name and title\",\n\t\t\t\t\t\t\ttype: \"alert\",\n\t\t\t\t\t\t};\n\t\t\t\t\t\tupdate((draft) => {\n\t\t\t\t\t\t\tdraft.loader = false;\n\t\t\t\t\t\t\tdraft.dialog = dialog;\n\t\t\t\t\t\t});\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t\tconst viewSearch = await metaViewService.search({\n\t\t\t\t\t\tdata: { _domain: `self.name = '${formProperties.name}'` },\n\t\t\t\t\t});\n\t\t\t\t\tif (\n\t\t\t\t\t\tviewSearch &&\n\t\t\t\t\t\tviewSearch.total &&\n\t\t\t\t\t\tviewSearch.total > 0 &&\n\t\t\t\t\t\t!state.exView?.id\n\t\t\t\t\t) {\n\t\t\t\t\t\tconst dialog = {\n\t\t\t\t\t\t\tmessage: \"View name already exists\",\n\t\t\t\t\t\t\ttype: \"alert\",\n\t\t\t\t\t\t};\n\t\t\t\t\t\tupdate((draft) => {\n\t\t\t\t\t\t\tdraft.loader = false;\n\t\t\t\t\t\t\tdraft.dialog = dialog;\n\t\t\t\t\t\t});\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t\tconst patch = generateView(\n\t\t\t\t\t\tstate.widgets,\n\t\t\t\t\t\tstate.items,\n\t\t\t\t\t\tstate.modelType\n\t\t\t\t\t);\n\t\t\t\t\tconst model =\n\t\t\t\t\t\tstate.entityType === ENTITY_TYPE.ENTITY\n\t\t\t\t\t\t\t? Utils.getEntityModel(state.entityModel)\n\t\t\t\t\t\t\t: state.model.fullName;\n\t\t\t\t\tconst form = {\n\t\t\t\t\t\telements: [\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tname: \"form\",\n\t\t\t\t\t\t\t\ttype: \"element\",\n\t\t\t\t\t\t\t\tattributes: {\n\t\t\t\t\t\t\t\t\tmodel,\n\t\t\t\t\t\t\t\t\t...Utils.getFormProperties(formProperties, [\n\t\t\t\t\t\t\t\t\t\t...exemptAttributes,\n\t\t\t\t\t\t\t\t\t\t\"extension\",\n\t\t\t\t\t\t\t\t\t\t\"id\",\n\t\t\t\t\t\t\t\t\t]),\n\t\t\t\t\t\t\t\t\tid:\n\t\t\t\t\t\t\t\t\t\tstate.exView && state.exView.xmlId\n\t\t\t\t\t\t\t\t\t\t\t? state.exView.xmlId\n\t\t\t\t\t\t\t\t\t\t\t: `studio-${formProperties.name}`,\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\telements: [...patch],\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t],\n\t\t\t\t\t};\n\t\t\t\t\tconst xml = Utils.processXML(\n\t\t\t\t\t\tconvert.json2xml(form, {\n\t\t\t\t\t\t\tcompact: false,\n\t\t\t\t\t\t\tfullTagEmptyElement: false,\n\t\t\t\t\t\t})\n\t\t\t\t\t);\n\t\t\t\t\tlet data = {\n\t\t\t\t\t\txml,\n\t\t\t\t\t\textension: formProperties.extension,\n\t\t\t\t\t\ttype: \"form\",\n\t\t\t\t\t\tname: formProperties.name,\n\t\t\t\t\t\ttitle: formProperties.title,\n\t\t\t\t\t\tmodel,\n\t\t\t\t\t\txmlId: `studio-${formProperties.name}`,\n\t\t\t\t\t};\n\t\t\t\t\tif (state.exView && state.exView.id) {\n\t\t\t\t\t\tdata[\"id\"] = state.exView.id;\n\t\t\t\t\t\tdata[\"version\"] = state.exView.version;\n\t\t\t\t\t\tdata[\"xmlId\"] = state.exView.xmlId || data.xmlId;\n\t\t\t\t\t}\n\t\t\t\t\tmetaViewService.save(data).then(async (res) => {\n\t\t\t\t\t\tif (res.status === -1) {\n\t\t\t\t\t\t\tconst error = res.data;\n\t\t\t\t\t\t\tconst dialog = {\n\t\t\t\t\t\t\t\ttitle: error.title,\n\t\t\t\t\t\t\t\tmessage: error.string || error.message,\n\t\t\t\t\t\t\t\ttype: \"alert\",\n\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\tupdate((draft) => {\n\t\t\t\t\t\t\t\tdraft.loader = false;\n\t\t\t\t\t\t\t\tdraft.dialog = dialog;\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t} else if (res.data && res.data[0]) {\n\t\t\t\t\t\t\tconst fetchResult = await metaViewService.fetch(res.data[0].id);\n\t\t\t\t\t\t\tif (fetchResult.data && fetchResult.data[0]) {\n\t\t\t\t\t\t\t\tconst record = fetchResult.data[0];\n\t\t\t\t\t\t\t\tupdate((draft) => {\n\t\t\t\t\t\t\t\t\tconst schema = Utils.generateXMLToViewSchema({\n\t\t\t\t\t\t\t\t\t\tview: record,\n\t\t\t\t\t\t\t\t\t\tfields: draft.metaFieldStore,\n\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t\tdraft.widgets = schema.widgets;\n\t\t\t\t\t\t\t\t\tdraft.initialWidgets = schema.widgets;\n\t\t\t\t\t\t\t\t\tdraft.items = schema.items;\n\t\t\t\t\t\t\t\t\tdraft.initialItems = schema.items;\n\t\t\t\t\t\t\t\t\tdraft.metaView = record;\n\t\t\t\t\t\t\t\t\tdraft.exView = record;\n\t\t\t\t\t\t\t\t\tdraft.selectedView = { ...record };\n\t\t\t\t\t\t\t\t\tdraft.loader = false;\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t} else {\n\t\t\t\t\tconst { view } = state.view;\n\t\t\t\t\tconst model =\n\t\t\t\t\t\tstate.entityType === ENTITY_TYPE.ENTITY\n\t\t\t\t\t\t\t? Utils.getEntityModel(state.entityModel)\n\t\t\t\t\t\t\t: state.model.fullName;\n\t\t\t\t\tconst originalSchema = Utils.generateViewFromJson({\n\t\t\t\t\t\tview: state.originalXML,\n\t\t\t\t\t\tfields: state.metaFieldStore,\n\t\t\t\t\t});\n\t\t\t\t\tconst widgets = getWidgets(originalSchema);\n\t\t\t\t\tconst moves = optimizeExtension(state, widgets);\n\t\t\t\t\tconst { changedAttrsList, removedAttrsList } = getUpdatedAttrsList(\n\t\t\t\t\t\tstate,\n\t\t\t\t\t\twidgets\n\t\t\t\t\t);\n\t\t\t\t\tconst extension = getXML(moves, state);\n\t\t\t\t\tlet isAttrsChanged = false;\n\t\t\t\t\tlet attrsList = [];\n\t\t\t\t\tif (changedAttrsList.length) {\n\t\t\t\t\t\tisAttrsChanged = true;\n\t\t\t\t\t\tconst conditionalValues = Object.values(conditionProperties);\n\t\t\t\t\t\tconst list = changedAttrsList.map((attr) => {\n\t\t\t\t\t\t\tif (\n\t\t\t\t\t\t\t\t[...conditionalValues, ...otherNoQuoteProps].includes(attr.name)\n\t\t\t\t\t\t\t) {\n\t\t\t\t\t\t\t\treturn attr;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\treturn { ...attr, value: `\"${attr.value}\"` };\n\t\t\t\t\t\t});\n\t\t\t\t\t\tawait saveAttrsList(list);\n\t\t\t\t\t}\n\t\t\t\t\tif (removedAttrsList.length) {\n\t\t\t\t\t\tisAttrsChanged = true;\n\t\t\t\t\t\tawait deleteAttrsList(removedAttrsList);\n\t\t\t\t\t}\n\t\t\t\t\tif (isAttrsChanged) {\n\t\t\t\t\t\tattrsList = await fetchAttrsList({\n\t\t\t\t\t\t\tmodel: state.model.fullName,\n\t\t\t\t\t\t\tview: state.selectedView.name,\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t\tconst { changedTranslationList, deletedTranslationList } =\n\t\t\t\t\t\tgetChangedTranslationList(\n\t\t\t\t\t\t\tstate.translationList,\n\t\t\t\t\t\t\tstate.initialTranslationList,\n\t\t\t\t\t\t\tstate.removedTranslationList\n\t\t\t\t\t\t);\n\t\t\t\t\tlet translationList = [];\n\t\t\t\t\tlet isTranslationChanged = false;\n\t\t\t\t\tif (changedTranslationList.length) {\n\t\t\t\t\t\tisTranslationChanged = true;\n\t\t\t\t\t\tawait saveTranslationList(changedTranslationList);\n\t\t\t\t\t}\n\t\t\t\t\tif (deletedTranslationList.length) {\n\t\t\t\t\t\tisTranslationChanged = true;\n\t\t\t\t\t\tawait deleteTranslationList(deletedTranslationList);\n\t\t\t\t\t}\n\t\t\t\t\tif (isTranslationChanged) {\n\t\t\t\t\t\tconst translationNames = Object.values(state.widgets)\n\t\t\t\t\t\t\t.filter(\n\t\t\t\t\t\t\t\t(widget) => widget.title && widget.title.startsWith(\"studio:\")\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t.map((widget) => widget.title);\n\t\t\t\t\t\ttranslationList = await getTranslationList(translationNames);\n\t\t\t\t\t\tupdate((draft) => {\n\t\t\t\t\t\t\tdraft.translationList = translationList;\n\t\t\t\t\t\t\tdraft.initialTranslationList = translationList;\n\t\t\t\t\t\t\tdraft.removedTranslationList = [];\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t\tif (!extension.length && !state.extensionXML) {\n\t\t\t\t\t\tif (state.extensionView) {\n\t\t\t\t\t\t\tremoveView();\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tupdate((draft) => {\n\t\t\t\t\t\t\t\tdraft.loader = false;\n\t\t\t\t\t\t\t\tconst views = draft.view;\n\t\t\t\t\t\t\t\tif (isAttrsChanged) {\n\t\t\t\t\t\t\t\t\tconst schema = Utils.generateXMLToViewSchema({\n\t\t\t\t\t\t\t\t\t\tview: views.view,\n\t\t\t\t\t\t\t\t\t\tfields: draft.metaFieldStore,\n\t\t\t\t\t\t\t\t\t\textensionXML: views.extensionXML,\n\t\t\t\t\t\t\t\t\t\tattrsList,\n\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t\tdraft.widgets = schema.widgets;\n\t\t\t\t\t\t\t\t\tdraft.initialWidgets = schema.widgets;\n\t\t\t\t\t\t\t\t\tdraft.items = schema.items;\n\t\t\t\t\t\t\t\t\tdraft.initialItems = schema.items;\n\t\t\t\t\t\t\t\t\tdraft.extensionMoves = [];\n\t\t\t\t\t\t\t\t\tdraft.attrsList = attrsList;\n\t\t\t\t\t\t\t\t\tgenerateXpath(draft);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t\tconst getExistingExtension = (json) => {\n\t\t\t\t\t\tif (!json) {\n\t\t\t\t\t\t\treturn [];\n\t\t\t\t\t\t}\n\t\t\t\t\t\tconst { elements } = json;\n\t\t\t\t\t\tif (elements[0] && elements[0].elements) {\n\t\t\t\t\t\t\treturn elements[0].elements;\n\t\t\t\t\t\t}\n\t\t\t\t\t};\n\t\t\t\t\tconst form = {\n\t\t\t\t\t\telements: [\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\ttype: \"element\",\n\t\t\t\t\t\t\t\tname: state.widgets[-1].type,\n\t\t\t\t\t\t\t\tattributes: {\n\t\t\t\t\t\t\t\t\tmodel,\n\t\t\t\t\t\t\t\t\tid: `studio-${view.name}`,\n\t\t\t\t\t\t\t\t\ttitle: state.widgets[-1].title,\n\t\t\t\t\t\t\t\t\tname: view.name,\n\t\t\t\t\t\t\t\t\textension: \"true\",\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\telements: [\n\t\t\t\t\t\t\t\t\t...getExistingExtension(state.extensionXML),\n\t\t\t\t\t\t\t\t\t...extension,\n\t\t\t\t\t\t\t\t],\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t],\n\t\t\t\t\t};\n\t\t\t\t\tconst xml = Utils.processXML(\n\t\t\t\t\t\tconvert.json2xml(form, {\n\t\t\t\t\t\t\tcompact: false,\n\t\t\t\t\t\t\tfullTagEmptyElement: false,\n\t\t\t\t\t\t})\n\t\t\t\t\t);\n\t\t\t\t\tlet data = {\n\t\t\t\t\t\txml,\n\t\t\t\t\t\textension: true,\n\t\t\t\t\t\ttype: state.widgets[-1].type,\n\t\t\t\t\t};\n\t\t\t\t\tif (state.extensionView) {\n\t\t\t\t\t\tdata = {\n\t\t\t\t\t\t\t...data,\n\t\t\t\t\t\t\tid: state.extensionView.id,\n\t\t\t\t\t\t\tversion: state.extensionView.version,\n\t\t\t\t\t\t};\n\t\t\t\t\t} else {\n\t\t\t\t\t\tdata = {\n\t\t\t\t\t\t\t...data,\n\t\t\t\t\t\t\tmodel,\n\t\t\t\t\t\t\tname: view.name,\n\t\t\t\t\t\t\ttitle: view.title,\n\t\t\t\t\t\t\txmlId: `studio-${view.name}`,\n\t\t\t\t\t\t};\n\t\t\t\t\t}\n\t\t\t\t\tif (state.extensionView) {\n\t\t\t\t\t\tif (state.extensionView.xml === data.xml) {\n\t\t\t\t\t\t\tupdate((draft) => {\n\t\t\t\t\t\t\t\tdraft.loader = false;\n\t\t\t\t\t\t\t\tif (isAttrsChanged) {\n\t\t\t\t\t\t\t\t\tupdate((draft) => {\n\t\t\t\t\t\t\t\t\t\tdraft.loader = false;\n\t\t\t\t\t\t\t\t\t\tconst views = draft.view;\n\t\t\t\t\t\t\t\t\t\tconst schema = Utils.generateXMLToViewSchema({\n\t\t\t\t\t\t\t\t\t\t\tview: views.view,\n\t\t\t\t\t\t\t\t\t\t\tfields: draft.metaFieldStore,\n\t\t\t\t\t\t\t\t\t\t\textensionXML: views.extensionXML,\n\t\t\t\t\t\t\t\t\t\t\tattrsList,\n\t\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t\t\tdraft.widgets = schema.widgets;\n\t\t\t\t\t\t\t\t\t\tdraft.initialWidgets = schema.widgets;\n\t\t\t\t\t\t\t\t\t\tdraft.items = schema.items;\n\t\t\t\t\t\t\t\t\t\tdraft.initialItems = schema.items;\n\t\t\t\t\t\t\t\t\t\tif (isAttrsChanged) {\n\t\t\t\t\t\t\t\t\t\t\tdraft.attrsList = attrsList;\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\tgenerateXpath(draft);\n\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tmetaViewService.save(data).then(async (res) => {\n\t\t\t\t\t\tif (res.status === -1) {\n\t\t\t\t\t\t\tconst dialog = {\n\t\t\t\t\t\t\t\tmessage: res.data.string,\n\t\t\t\t\t\t\t\ttype: \"alert\",\n\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\tupdate((draft) => {\n\t\t\t\t\t\t\t\tdraft.loader = false;\n\t\t\t\t\t\t\t\tdraft.dialog = dialog;\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t} else if (res.data && res.data[0]) {\n\t\t\t\t\t\t\tconst record = res.data[0];\n\t\t\t\t\t\t\tconst { view } = state.view;\n\t\t\t\t\t\t\tconst views = await fetchViews(view);\n\t\t\t\t\t\t\tupdate((draft) => {\n\t\t\t\t\t\t\t\tif (draft.entityType === ENTITY_TYPE.ENTITY) {\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tconst schema = Utils.generateXMLToViewSchema({\n\t\t\t\t\t\t\t\t\tview: views.view,\n\t\t\t\t\t\t\t\t\tfields: draft.metaFieldStore,\n\t\t\t\t\t\t\t\t\textensionXML: views.extensionXML,\n\t\t\t\t\t\t\t\t\tattrsList,\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\tdraft.widgets = schema.widgets;\n\t\t\t\t\t\t\t\tdraft.initialWidgets = schema.widgets;\n\t\t\t\t\t\t\t\tdraft.items = schema.items;\n\t\t\t\t\t\t\t\tdraft.initialItems = schema.items;\n\t\t\t\t\t\t\t\tdraft.exView = res.data[0];\n\t\t\t\t\t\t\t\tdraft.extensionMoves = [];\n\t\t\t\t\t\t\t\tdraft.loader = false;\n\t\t\t\t\t\t\t\tif (isAttrsChanged) {\n\t\t\t\t\t\t\t\t\tdraft.attrsList = attrsList;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tdraft.extensionView = {\n\t\t\t\t\t\t\t\t\t...draft.extensionView,\n\t\t\t\t\t\t\t\t\t...record,\n\t\t\t\t\t\t\t\t\tversion:\n\t\t\t\t\t\t\t\t\t\tviews.extensionXML.id === record.id\n\t\t\t\t\t\t\t\t\t\t\t? views.extensionXML.version\n\t\t\t\t\t\t\t\t\t\t\t: record.version,\n\t\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\t\tgenerateXpath(draft);\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}, [state, update, startLoader, removeView]);\n\n\tconst handleClose = React.useCallback(() => {\n\t\tupdate((draft) => {\n\t\t\tdraft.dialog = null;\n\t\t});\n\t}, [update]);\n\n\tconst handleNew = React.useCallback(() => {\n\t\tstartLoader();\n\t\treset((draft) => {\n\t\t\tclearHistory(draft);\n\t\t});\n\t}, [reset, startLoader, clearHistory]);\n\n\tReact.useEffect(() => {\n\t\treset((draft) => {\n\t\t\tdraft.modelType = MODEL_TYPE.CUSTOM;\n\t\t});\n\t}, [reset]);\n\n\tconst saveCustomFieldView = React.useCallback(async () => {\n\t\tif (\n\t\t\t(state.customFieldItems || state.removedCustomFields.length) &&\n\t\t\tstate.modelField?.name\n\t\t) {\n\t\t\tconst customWidgets = Object.fromEntries(\n\t\t\t\tObject.entries(state.customFieldWidgets).filter(\n\t\t\t\t\t([, value]) =>\n\t\t\t\t\t\t(value.type === ItemTypes.CONTAINER && value.items?.length > 0) ||\n\t\t\t\t\t\tvalue.type !== ItemTypes.CONTAINER ||\n\t\t\t\t\t\ttypeof value.id === \"number\"\n\t\t\t\t)\n\t\t\t);\n\t\t\tconst propertyValues = Object.values(customWidgets || {}) || [];\n\t\t\tconst uniqueValues = new Set(propertyValues.map((v) => v.name)) || [];\n\t\t\tif (\n\t\t\t\tuniqueValues.size <\n\t\t\t\t(\n\t\t\t\t\t(propertyValues &&\n\t\t\t\t\t\tpropertyValues.filter((f) => f.type !== \"customForm\")) ||\n\t\t\t\t\t[]\n\t\t\t\t).length\n\t\t\t) {\n\t\t\t\tconst dialog = {\n\t\t\t\t\tmessage: translate(\"Field name should be unique\"),\n\t\t\t\t\ttype: \"alert\",\n\t\t\t\t};\n\t\t\t\tupdate((draft) => {\n\t\t\t\t\tdraft.loader = false;\n\t\t\t\t\tdraft.dialog = dialog;\n\t\t\t\t});\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tstartLoader();\n\t\t\tconst extraProps = {\n\t\t\t\tmodelField: state.modelField.name,\n\t\t\t\tmodel: state.model.fullName,\n\t\t\t};\n\t\t\tconst { fields } = Utils.getCustomModelFields(\n\t\t\t\tstate.customFieldItems,\n\t\t\t\tcustomWidgets,\n\t\t\t\textraProps,\n\t\t\t\ttrue\n\t\t\t);\n\t\t\tif (fields.length || state.removedCustomFields.length) {\n\t\t\t\tconst all = fields.map((field) => customFieldService.save(field));\n\t\t\t\tconst res = await Promise.all(all);\n\t\t\t\tconst failedRes = res && res.find((r) => r.status === -1);\n\t\t\t\tif (failedRes && failedRes.data) {\n\t\t\t\t\tconst { title, message } = failedRes.data || {};\n\t\t\t\t\tlet errorMessage = message;\n\t\t\t\t\tif (\n\t\t\t\t\t\ttitle &&\n\t\t\t\t\t\ttitle.includes(translate(\"Unique constraint violation\"))\n\t\t\t\t\t) {\n\t\t\t\t\t\terrorMessage = translate(\"Field name should be unique\");\n\t\t\t\t\t}\n\t\t\t\t\tconst dialog = {\n\t\t\t\t\t\tmessage: errorMessage,\n\t\t\t\t\t\ttype: \"alert\",\n\t\t\t\t\t};\n\t\t\t\t\tupdate((draft) => {\n\t\t\t\t\t\tdraft.loader = false;\n\t\t\t\t\t\tdraft.dialog = dialog;\n\t\t\t\t\t});\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tif (state.removedCustomFields.length) {\n\t\t\t\t\tawait customFieldService.removeAll(state.removedCustomFields);\n\t\t\t\t}\n\t\t\t\tfetchCustomFields(state.modelField, state.model).then((res) => {\n\t\t\t\t\tconst { data = [] } = res;\n\t\t\t\t\tconst schema = generateCustomModelSchema(\n\t\t\t\t\t\tdata,\n\t\t\t\t\t\tundefined,\n\t\t\t\t\t\t\"\",\n\t\t\t\t\t\t\"customForm\"\n\t\t\t\t\t);\n\t\t\t\t\tupdate((draft) => {\n\t\t\t\t\t\tdraft.customFieldWidgets = schema.widgets;\n\t\t\t\t\t\tdraft.customFieldItems = schema.items;\n\t\t\t\t\t\tdraft.customFields = data;\n\t\t\t\t\t\tdraft.loader = false;\n\t\t\t\t\t\tdraft.removedCustomFields = [];\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\tcloseLoader();\n\t\t\t}\n\t\t}\n\t}, [update, closeLoader, state, startLoader]);\n\n\tconst handleConfirmationClose = React.useCallback(() => {\n\t\tsetDeleteConfirmationDialog(false);\n\t}, []);\n\n\tconst deleteView = React.useCallback(() => {\n\t\tsetDeleteConfirmationDialog(true);\n\t}, []);\n\n\tconst handleRemoveConfirmation = React.useCallback(() => {\n\t\thandleConfirmationClose();\n\t\tremoveView();\n\t}, [removeView, handleConfirmationClose]);\n\n\tconst handleSidePanelToggle = React.useCallback(() => {\n\t\tupdate((draft) => {\n\t\t\tdraft.sidePanel = !draft.sidePanel;\n\t\t});\n\t}, [update]);\n\n\tfunction renderDialog() {\n\t\tconst { dialog } = state;\n\t\treturn (\n\t\t\tdialog && (\n\t\t\t\t<Dialog open={Boolean(translate(dialog.message))}>\n\t\t\t\t\t<DialogTitle>{translate(dialog.title || \"Alert\")}</DialogTitle>\n\t\t\t\t\t<DialogContent>\n\t\t\t\t\t\t<div\n\t\t\t\t\t\t\tdangerouslySetInnerHTML={{ __html: translate(dialog.message) }}\n\t\t\t\t\t\t></div>\n\t\t\t\t\t</DialogContent>\n\t\t\t\t\t<DialogActions>\n\t\t\t\t\t\t<Button onClick={handleClose} color=\"primary\" autoFocus>\n\t\t\t\t\t\t\tOK\n\t\t\t\t\t\t</Button>\n\t\t\t\t\t</DialogActions>\n\t\t\t\t</Dialog>\n\t\t\t)\n\t\t);\n\t}\n\n\treturn (\n\t\t<React.Fragment>\n\t\t\t{renderDialog()}\n\t\t\t<Toolbar\n\t\t\t\tupdate={update}\n\t\t\t\tsaveView={saveView}\n\t\t\t\tsaveCustomFieldView={saveCustomFieldView}\n\t\t\t\tremoveView={deleteView}\n\t\t\t\tmodel={state.model}\n\t\t\t\textensionView={state.extensionView}\n\t\t\t\tmodelType={state.modelType}\n\t\t\t\tonNew={handleNew}\n\t\t\t\tmodelField={state.modelField}\n\t\t\t\tcustomModel={state.customModel}\n\t\t\t\tselectedView={state.selectedView}\n\t\t\t\tstartLoader={startLoader}\n\t\t\t\tentityModel={state.entityModel}\n\t\t\t\terrorList={state.errorList}\n\t\t\t\tentityType={state.entityType}\n\t\t\t\tmetaFieldStore={state.metaFieldStore}\n\t\t\t\tundo={undo}\n\t\t\t\tredo={redo}\n\t\t\t\tpastLength={state.past.length}\n\t\t\t\tfutureLength={state.future.length}\n\t\t\t\tclearHistory={clearHistory}\n\t\t\t\tonSidePanelToggle={handleSidePanelToggle}\n\t\t\t\treset={reset}\n\t\t\t/>\n\t\t\t<DeleteConfirmation\n\t\t\t\topen={deleteConfirmationDialog}\n\t\t\t\tonClose={handleConfirmationClose}\n\t\t\t\tonOk={handleRemoveConfirmation}\n\t\t\t\tmessage=\"Are you sure? Do you want to delete it?\"\n\t\t\t/>\n\t\t</React.Fragment>\n\t);\n}\n\nexport default React.memo(ToolbarContainer);\n","import React from \"react\";\nimport { Grid, useMediaQuery, useTheme } from \"@material-ui/core\";\nimport {\n\tmakeStyles,\n\tcreateTheme,\n\tThemeProvider,\n} from \"@material-ui/core/styles\";\nimport { DndProvider } from \"react-dnd\";\nimport Backend from \"react-dnd-html5-backend\";\n\nimport SidePanel from \"./Panels/SidePanel\";\nimport MainPanel from \"./Panels/MainPanel\";\nimport Toolbar from \"./Toolbar/ToolbarContainer\";\nimport StudioProvider, { useStore } from \"./store/context\";\nimport {\n\tfetchLanguages,\n\tfetchUserPreferences,\n\tgetEnableAppBuilder,\n} from \"./Toolbar/api\";\n\nconst useStyles = makeStyles({\n\tcontainer: {\n\t\tdisplay: \"flex\",\n\t\theight: \"100%\",\n\t\tflexDirection: \"column\",\n\t\tflexWrap: \"nowrap\",\n\t},\n\ttoolbarWrapper: {\n\t\tflex: 0,\n\t\tdisplay: \"flex\",\n\t\tflexWrap: \"wrap\",\n\t},\n\tpanelContainer: {\n\t\tdisplay: \"flex\",\n\t\tflex: 1,\n\t\toverflow: \"hidden\",\n\t},\n\tsidePanel: {\n\t\theight: \"100%\",\n\t\t\".modern-dark &\": {\n\t\t\tbackgroundColor: \"#202124\",\n\t\t},\n\t},\n\tmainPanel: {\n\t\theight: \"100%\",\n\t\toverflow: \"auto\",\n\t\t\".modern-dark &\": {\n\t\t\tbackgroundColor: \"#202124\",\n\t\t},\n\t},\n});\n\nconst theme = createTheme({\n\ttypography: {\n\t\tfontFamily: '\"Open Sans\", \"Helvetica Neue\", Helvetica, Arial, sans-serif',\n\t},\n});\n\nfunction AppContent() {\n\tconst classes = useStyles();\n\tconst theme = useTheme();\n\tconst { state, update } = useStore();\n\tconst { sidePanel = true } = state;\n\tconst isResponsive = useMediaQuery(theme.breakpoints.down(\"sm\"));\n\n\tReact.useEffect(() => {\n\t\tfetchLanguages().then((result) => {\n\t\t\tupdate((draft) => {\n\t\t\t\tdraft.languageList = [...result];\n\t\t\t});\n\t\t});\n\t\tfetchUserPreferences().then((result) => {\n\t\t\tif (result && result.theme) {\n\t\t\t\tdocument.body.className = result.theme;\n\t\t\t}\n\t\t});\n\n\t\tgetEnableAppBuilder().then((res) => {\n\t\t\tupdate((draft) => {\n\t\t\t\tdraft.enableAppBuilder = res;\n\t\t\t});\n\t\t});\n\t}, [update]);\n\n\tReact.useEffect(() => {\n\t\tupdate((draft) => {\n\t\t\tdraft.sidePanel = !isResponsive;\n\t\t});\n\t}, [isResponsive, update]);\n\n\treturn (\n\t\t<Grid container className={classes.container}>\n\t\t\t<Grid item xs={12} className={classes.toolbarWrapper}>\n\t\t\t\t<Toolbar />\n\t\t\t</Grid>\n\t\t\t<Grid container className={classes.panelContainer}>\n\t\t\t\t{sidePanel && (\n\t\t\t\t\t<Grid item xs={isResponsive ? 4 : 3} className={classes.sidePanel}>\n\t\t\t\t\t\t<SidePanel />\n\t\t\t\t\t</Grid>\n\t\t\t\t)}\n\t\t\t\t<Grid\n\t\t\t\t\titem\n\t\t\t\t\txs={sidePanel ? (isResponsive ? 8 : 9) : 12}\n\t\t\t\t\tclassName={classes.mainPanel}\n\t\t\t\t>\n\t\t\t\t\t<MainPanel />\n\t\t\t\t</Grid>\n\t\t\t</Grid>\n\t\t</Grid>\n\t);\n}\n\nexport default function App() {\n\treturn (\n\t\t<StudioProvider>\n\t\t\t<DndProvider backend={Backend}>\n\t\t\t\t<ThemeProvider theme={theme}>\n\t\t\t\t\t<AppContent />\n\t\t\t\t</ThemeProvider>\n\t\t\t</DndProvider>\n\t\t</StudioProvider>\n\t);\n}\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport \"./index.css\";\nimport \"./theme.css\";\nimport App from \"./App\";\n\nReactDOM.render(<App />, document.getElementById(\"root\"));\n","import axios from \"axios\";\n\nconst headers = {\n\t\"X-Requested-With\": \"XMLHttpRequest\",\n\t\"Content-Type\": \"application/json\",\n\tAccept: \"application/json\",\n};\nlet lastCookieString;\nlet lastCookies = {};\n\nfunction readCookie(name) {\n\tlet cookieString = document.cookie || \"\";\n\tif (cookieString !== lastCookieString) {\n\t\tlastCookieString = cookieString;\n\t\tlastCookies = cookieString.split(\"; \").reduce((obj, value) => {\n\t\t\tlet parts = value.split(\"=\");\n\t\t\tobj[parts[0]] = parts[1];\n\t\t\treturn obj;\n\t\t}, {});\n\t}\n\treturn lastCookies[name];\n}\n\nclass service {\n\tconstructor(props) {\n\t\tthis.baseURL =\n\t\t\tprocess.env.NODE_ENV === \"production\" ? \"../../\" : \"/axelor-erp/\";\n\t}\n\n\trequest(url, method, data) {\n\t\tlet options = {};\n\t\tif (method !== \"get\") {\n\t\t\toptions[\"data\"] = data;\n\t\t}\n\t\treturn axios({\n\t\t\tmethod: method,\n\t\t\tbaseURL: this.baseURL,\n\t\t\theaders: {\n\t\t\t\t...headers,\n\t\t\t\t\"X-CSRF-Token\": readCookie(\"CSRF-TOKEN\"),\n\t\t\t},\n\t\t\turl,\n\t\t\t...options,\n\t\t});\n\t}\n\n\tinterceptor(url, method, data) {\n\t\treturn this.request(url, method, data)\n\t\t\t.then((result) => {\n\t\t\t\tif (result.status === 200) {\n\t\t\t\t\treturn result.data || { status: result.status };\n\t\t\t\t} else if (result.status === 401) {\n\t\t\t\t\tconst credential = localStorage.getItem(\"credential\");\n\t\t\t\t\tif (credential) {\n\t\t\t\t\t\tconst { username, password } = JSON.parse(credential);\n\t\t\t\t\t\treturn this.login(username, password).then((res) => {\n\t\t\t\t\t\t\tif (res.status === 200) {\n\t\t\t\t\t\t\t\treturn this.interceptor(url, method, data);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\treturn Promise.resolve(\"Error\");\n\t\t\t})\n\t\t\t.catch((e) => {\n\t\t\t\tif (e.response && e.response.status === 401) {\n\t\t\t\t\treturn this.relogin(url, method, data);\n\t\t\t\t}\n\t\t\t});\n\t}\n\n\trelogin(url, method, data) {\n\t\tconst credential = localStorage.getItem(\"credential\");\n\t\tif (credential) {\n\t\t\tconst { username, password } = JSON.parse(credential);\n\t\t\treturn this.login(username, password).then((res) => {\n\t\t\t\tif (res.status === 200) {\n\t\t\t\t\treturn this.interceptor(url, method, data);\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t}\n\n\tget(url) {\n\t\treturn this.interceptor(url, \"get\");\n\t}\n\n\tpost(url, data = {}) {\n\t\treturn this.interceptor(url, \"post\", data);\n\t}\n\n\tdelete(url, data) {\n\t\treturn this.interceptor(url, \"delete\", data);\n\t}\n\n\tlogin(username, password) {\n\t\tconst data = { username, password };\n\t\treturn this.interceptor(\"login.jsp\", \"post\", data).then((res) => {\n\t\t\tif (res.status === 200) {\n\t\t\t\tlocalStorage.setItem(\n\t\t\t\t\t\"credential\",\n\t\t\t\t\tJSON.stringify({ username, password })\n\t\t\t\t);\n\t\t\t}\n\t\t\treturn { status: res.status };\n\t\t});\n\t}\n\n\tlogout() {\n\t\treturn this.interceptor(\"logout\").then(() => {\n\t\t\tlocalStorage.removeItem(\"credential\");\n\t\t});\n\t}\n}\n\nexport default service;\n","import httpService from \"./http\";\n\nconst joinURL = (model, subURL) => {\n\treturn `ws/rest/${model}/${subURL}`;\n};\n\nconst services = new httpService();\n\nclass AxelorService {\n\tconstructor(props) {\n\t\tthis.model = props.model;\n\t}\n\n\tsearch({ fields, sortBy, data, limit, offset }) {\n\t\tconst _subURL = `search`;\n\t\tconst url = joinURL(this.model, _subURL);\n\t\treturn services.post(url, { fields, sortBy, data, limit, offset });\n\t}\n\n\tfetch(id, data) {\n\t\tconst _subURL = `${id}/fetch`;\n\t\tconst url = joinURL(this.model, _subURL);\n\t\treturn services.post(url, data);\n\t}\n\n\tview(data) {\n\t\tconst url = \"/ws/meta/view\";\n\t\treturn services.post(url, data);\n\t}\n\n\tsave(data) {\n\t\tconst url = joinURL(this.model, \"\");\n\t\treturn services.post(url, { data });\n\t}\n\n\tsaveAll(data) {\n\t\tconst url = joinURL(this.model, \"\");\n\t\treturn services.post(url, { records: data });\n\t}\n\n\tremoveAll(records) {\n\t\tconst url = joinURL(this.model, \"removeAll\");\n\t\treturn services.post(url, { records });\n\t}\n\n\tlogin(username, password) {\n\t\treturn services.login(username, password);\n\t}\n\n\tlogout() {\n\t\treturn services.logout();\n\t}\n\n\taction(data) {\n\t\tconst url = \"ws/action\";\n\t\treturn services.post(url, data);\n\t}\n\n\tinfo() {\n\t\tconst url = \"ws/app/info\";\n\t\treturn services.get(url);\n\t}\n}\n\nexport default AxelorService;\n","import React from \"react\";\nimport produce from \"immer\";\nimport { TYPE, IDS, PANEL_TYPE, MODEL_TYPE, ENTITY_TYPE } from \"../constants\";\nimport {\n\treorderGrid,\n\tcheckExclusive,\n\tarrangeGrid,\n\tcheckGridEmptyCells,\n\tsetErrorList,\n\tcaseConverter,\n} from \"../utils\";\nimport { original } from \"immer\";\nimport { generateExtension } from \"./computeXML\";\nimport { generateXpath } from \"./xpathGenerator\";\nimport { validateParentPanelItems, validateOnRemove } from \"./validation\";\nimport Utils, { isExtensionView, translate } from \"./../utils\";\n\nconst StoreContext = React.createContext();\n\nfunction useMutableState(defaultValue) {\n\tconst [state, setState] = React.useState(defaultValue);\n\treturn [\n\t\tstate,\n\t\tReact.useCallback((updater) => setState(produce(updater)), [setState]),\n\t];\n}\n\nfunction StoreProvider({ children }) {\n\tconst [state, setState] = useMutableState({\n\t\tfuture: [],\n\t\tpast: [],\n\t\ttitle: \"\",\n\t\titems: [],\n\t\twidgets: null,\n\t\tdragWidget: null,\n\t\teditWidget: null,\n\t\thoverWidget: null,\n\t\tinitialWidgets: null,\n\t\tinitialItems: null,\n\t\ttabIndex: 0,\n\t\tmodelType: \"BASE\",\n\t\tcustomFields: [],\n\t\tcustomFieldItems: [],\n\t\tcustomFieldWidgets: null,\n\t\tmodelField: null,\n\t\tentityModel: null,\n\t\thoverAttr: {},\n\t\tloader: false,\n\t\tremovedCustomFields: [],\n\t\terrorList: {},\n\t\tentityType: ENTITY_TYPE.META,\n\t\tentityFields: [],\n\t\tactualType: null,\n\t\textensionMoves: [],\n\t\tsidePanel: true,\n\t\tattrsList: [],\n\t\tremovedTranslationList: [],\n\t});\n\tconst { widgets } = state;\n\n\tfunction getAllChildrenIds(id, widgetType) {\n\t\tconst widgets =\n\t\t\twidgetType === \"customField\" ? state.customFieldWidgets : state.widgets;\n\t\tconst collectIds = (parent) => {\n\t\t\tconst { items = [] } = widgets[parent];\n\t\t\treturn items.reduce(\n\t\t\t\t(all, item) => all.concat(collectIds(item)),\n\t\t\t\t[parent]\n\t\t\t);\n\t\t};\n\t\treturn collectIds(id);\n\t}\n\n\tfunction onExtension(moveIds, state, oldWidgets, oldItems) {\n\t\tif (state.exView && !Utils.isCreatedFromStudio(state.exView)) {\n\t\t\tgenerateExtension(moveIds, state);\n\t\t}\n\t}\n\n\t// update widget properties\n\tfunction onWidgetChange(id, props, reset = false) {\n\t\tsetState((draft) => {\n\t\t\tgenerateHistory(draft);\n\t\t\tconst isCustomField = draft.editWidgetType === \"customField\";\n\t\t\tconst extendList = [];\n\t\t\tsetErrorList(props, draft, id, isCustomField);\n\t\t\tconst widgets =\n\t\t\t\tdraft.editWidgetType === \"customField\"\n\t\t\t\t\t? draft.customFieldWidgets\n\t\t\t\t\t: draft.widgets;\n\t\t\tif (reset) {\n\t\t\t\twidgets[id] = {};\n\t\t\t}\n\t\t\tconst widget =\n\t\t\t\tdraft.editWidgetType === \"customField\" && draft.customFieldWidgets\n\t\t\t\t\t? draft.customFieldWidgets[id]\n\t\t\t\t\t: draft.widgets[id];\n\t\t\tif (widget) {\n\t\t\t\tObject.keys(props).forEach((key) => {\n\t\t\t\t\tlet value = props[key];\n\t\t\t\t\tif (/^[a-z]/i.test(widget[\"name\"])) {\n\t\t\t\t\t\twidget[\"name\"] = caseConverter(\n\t\t\t\t\t\t\twidget[\"name\"],\n\t\t\t\t\t\t\t!(props[\"type\"] === TYPE.form)\n\t\t\t\t\t\t);\n\t\t\t\t\t}\n\t\t\t\t\tlet doChange = true;\n\t\t\t\t\t// add change in move\n\t\t\t\t\tconst _value = widget[key] === undefined ? \"\" : widget[key];\n\t\t\t\t\tif (_value !== value) {\n\t\t\t\t\t\tconst xPath = id === -1 ? \"/\" : widgets[id].xPath;\n\t\t\t\t\t\tlet _value = [undefined, null].includes(value) ? \"\" : value;\n\n\t\t\t\t\t\tisExtensionView(state) &&\n\t\t\t\t\t\t\textendList.push({\n\t\t\t\t\t\t\t\tname: \"attribute\",\n\t\t\t\t\t\t\t\ttarget: xPath,\n\t\t\t\t\t\t\t\tattributes: {\n\t\t\t\t\t\t\t\t\tname: Utils.keyReplacer(key, MODEL_TYPE.BASE),\n\t\t\t\t\t\t\t\t\tvalue: Utils.valueConverter(_value, key),\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\tid,\n\t\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t\tif (key === \"colSpan\") {\n\t\t\t\t\t\tconst parentId = Object.keys(widgets).find(\n\t\t\t\t\t\t\t(x) => (widgets[x].items || []).indexOf(id) > -1\n\t\t\t\t\t\t);\n\t\t\t\t\t\tvalue = Math.min(\n\t\t\t\t\t\t\tNumber((widgets[parentId] && widgets[parentId].cols) || value),\n\t\t\t\t\t\t\tvalue\n\t\t\t\t\t\t);\n\t\t\t\t\t\tif (widgets && parentId && widgets[parentId].type === TYPE.panel) {\n\t\t\t\t\t\t\tconst { itemSpan } = JSON.parse(\n\t\t\t\t\t\t\t\t(widgets[parentId] || {}).widgetAttrs || \"{}\"\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\tvalue = itemSpan || value;\n\t\t\t\t\t\t}\n\t\t\t\t\t} else if (key === \"cols\" && value) {\n\t\t\t\t\t\tvalue = Math.min(12, Number(value));\n\t\t\t\t\t} else if (key === \"widgetAttrs\") {\n\t\t\t\t\t\tconst newValue = JSON.parse(value || \"{}\");\n\t\t\t\t\t\tconst items = widgets[id].items;\n\t\t\t\t\t\titems &&\n\t\t\t\t\t\t\titems.forEach((item) => {\n\t\t\t\t\t\t\t\tconst child = widgets[item];\n\t\t\t\t\t\t\t\tlet widgetAtts = JSON.parse(child.widgetAttrs || \"{}\");\n\t\t\t\t\t\t\t\tif (!widgetAtts[\"colSpan\"]) {\n\t\t\t\t\t\t\t\t\tchild.colSpan = newValue.itemSpan;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t\tif (doChange) {\n\t\t\t\t\t\twidget[key] = value;\n\t\t\t\t\t\tkey === \"layout\" &&\n\t\t\t\t\t\t\tvalue === PANEL_TYPE.stack &&\n\t\t\t\t\t\t\t(widget.cols = 12);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t\tif (\n\t\t\t\tdraft.editWidgetType !== \"customField\" &&\n\t\t\t\tdraft.modelType === MODEL_TYPE.BASE\n\t\t\t) {\n\t\t\t\tonExtension(extendList, draft, draft.widgets, draft.items);\n\t\t\t\tgenerateXpath(draft);\n\t\t\t}\n\t\t});\n\t}\n\n\t// remove widget\n\tfunction onRemove(panelId, index, id, widgetType) {\n\t\tconst extendList = [];\n\t\tconst isCustomField = widgetType === \"customField\";\n\t\tlet result = window.confirm(translate(\"Sure want to delete?\"));\n\t\tif (!result) return;\n\t\tsetState((draft) => {\n\t\t\tgenerateHistory(draft);\n\t\t\tconst widgets =\n\t\t\t\twidgetType === \"customField\" ? draft.customFieldWidgets : draft.widgets;\n\t\t\tconst widgetItems =\n\t\t\t\twidgetType === \"customField\" ? \"customFieldItems\" : \"items\";\n\t\t\tlet oldItems = [...draft.items];\n\t\t\tlet oldWidgets = original(draft.widgets);\n\t\t\tconst widget = widgets[id];\n\n\t\t\tif (!isCustomField && draft.modelType === MODEL_TYPE.BASE) {\n\t\t\t\tconst index = draft.metaFieldStore.findIndex(\n\t\t\t\t\t(f) =>\n\t\t\t\t\t\t(f.typeName === widget.typeName || widget.type === \"field\") &&\n\t\t\t\t\t\tf.name === widget.name\n\t\t\t\t);\n\t\t\t\tif (index !== -1) {\n\t\t\t\t\tdraft.metaFields.unshift(draft.metaFieldStore[index]);\n\t\t\t\t}\n\t\t\t}\n\t\t\tconst isPanel = panelId && IDS.form !== panelId;\n\t\t\tindex = (isPanel ? widgets[panelId].items : draft[widgetItems]).findIndex(\n\t\t\t\t(x) => `${x}` === `${id}`\n\t\t\t);\n\t\t\tif (index > -1 && widgets[id]) {\n\t\t\t\tlet ids = getAllChildrenIds(id, widgetType);\n\t\t\t\tids.forEach((id) => {\n\t\t\t\t\tif (isCustomField || state.modelType === MODEL_TYPE.CUSTOM) {\n\t\t\t\t\t\tconst widget = widgets[id];\n\t\t\t\t\t\tif (\n\t\t\t\t\t\t\twidget.id &&\n\t\t\t\t\t\t\t(state.modelType === MODEL_TYPE.CUSTOM ? widget.version : true)\n\t\t\t\t\t\t) {\n\t\t\t\t\t\t\tdraft.removedCustomFields.push({\n\t\t\t\t\t\t\t\tid: widget.id,\n\t\t\t\t\t\t\t\tversion: widget.version,\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\tconst childrenIds = [...ids];\n\t\t\t\tif (isPanel) {\n\t\t\t\t\tif (\n\t\t\t\t\t\twidgets[panelId].layout === PANEL_TYPE.grid &&\n\t\t\t\t\t\t![TYPE.menubar, TYPE.toolbar].includes(widgets[panelId].type)\n\t\t\t\t\t) {\n\t\t\t\t\t\tconst arrangeItems = arrangeGrid(\n\t\t\t\t\t\t\tdraft,\n\t\t\t\t\t\t\t{ panelId, index, id },\n\t\t\t\t\t\t\twidgetType\n\t\t\t\t\t\t);\n\t\t\t\t\t\tids = ids.concat(arrangeItems.ids);\n\t\t\t\t\t\tisExtensionView(state) &&\n\t\t\t\t\t\t\textendList.push(...arrangeItems.extendList);\n\t\t\t\t\t} else {\n\t\t\t\t\t\twidgets[panelId].items.splice(index, 1);\n\t\t\t\t\t}\n\t\t\t\t\t// draft.widgets[panelId].items.splice(index, 1);\n\t\t\t\t} else {\n\t\t\t\t\tdraft[widgetItems].splice(index, 1);\n\t\t\t\t}\n\t\t\t\tif (widgets[id]) {\n\t\t\t\t\tisExtensionView(state) &&\n\t\t\t\t\t\textendList.push({ name: \"replace\", target: widgets[id].xPath });\n\t\t\t\t}\n\t\t\t\tids.forEach((id) => {\n\t\t\t\t\tif (widgets[id]) {\n\t\t\t\t\t\tif (!childrenIds.includes(id)) {\n\t\t\t\t\t\t\tisExtensionView(state) &&\n\t\t\t\t\t\t\t\textendList.push({ name: \"replace\", target: widgets[id].xPath });\n\t\t\t\t\t\t}\n\t\t\t\t\t\tdelete widgets[id];\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\tif (ids.indexOf(draft.editWidget) > -1) {\n\t\t\t\t\tdraft.editWidget = null;\n\t\t\t\t}\n\t\t\t}\n\t\t\tvalidateOnRemove(draft, id);\n\t\t\tif (!isCustomField && draft.modelType === MODEL_TYPE.BASE) {\n\t\t\t\tvalidateParentPanelItems(draft, panelId);\n\t\t\t\tonExtension(extendList, draft, oldWidgets, oldItems);\n\t\t\t\tgenerateXpath(draft);\n\t\t\t}\n\t\t});\n\t}\n\n\t// select widget, to open properties editor\n\tfunction onSelect(id = null, type = null) {\n\t\tsetState((draft) => {\n\t\t\tdraft.editWidget = id;\n\t\t\tdraft.tabIndex = 0;\n\t\t\tdraft.editWidgetType = type;\n\t\t});\n\t}\n\n\t// set current dragging widget\n\tfunction onDrag(id = null, { props, isDrop } = {}) {\n\t\tsetState((draft) => {\n\t\t\tconst _extendList = [];\n\t\t\tconst { attrs = {} } = props;\n\t\t\tconst _attrs = {\n\t\t\t\ttype: attrs.type,\n\t\t\t\ttitle: attrs.label,\n\t\t\t\tname: attrs.name,\n\t\t\t\trelationship: attrs.relationship,\n\t\t\t\tmappedBy: attrs.mappedBy,\n\t\t\t\t...attrs,\n\t\t\t};\n\t\t\tif (attrs && attrs.name === \"string\") {\n\t\t\t\t_attrs[\"visibleInGrid\"] = true;\n\t\t\t}\n\t\t\tif (attrs && attrs.name === \"selection\") {\n\t\t\t\t_attrs[\"updateSelection\"] = true;\n\t\t\t}\n\t\t\tconst { dragWidget, hoverWidget, editWidget, dragWidgetProps } = draft;\n\t\t\tdraft.dragWidget = null;\n\t\t\tdraft.hoverWidget = null;\n\t\t\tconst extraAttr = { ...draft.hoverAttr };\n\t\t\tif (_attrs.widgetAttrs && extraAttr.widgetAttrs) {\n\t\t\t\tconst _eWidgetAttr = JSON.parse(extraAttr.widgetAttrs || \"{}\");\n\t\t\t\tconst _attrsWidgetAttr = JSON.parse(_attrs.widgetAttrs || \"{}\");\n\t\t\t\textraAttr.widgetAttrs = JSON.stringify({\n\t\t\t\t\t..._attrsWidgetAttr,\n\t\t\t\t\t..._eWidgetAttr,\n\t\t\t\t});\n\t\t\t}\n\t\t\tdraft.dragWidgetProps = Object.assign({}, props, {\n\t\t\t\tattrs: { ..._attrs, ...extraAttr },\n\t\t\t});\n\n\t\t\tif (editWidget && editWidget === dragWidget) {\n\t\t\t\tdraft.editWidget = null;\n\t\t\t}\n\t\t\tif (isDrop) {\n\t\t\t\tif (!hoverWidget || !dragWidgetProps) return;\n\t\t\t\tgenerateHistory(draft);\n\t\t\t\tconst index = draft.metaFields.findIndex(\n\t\t\t\t\t(f) =>\n\t\t\t\t\t\tf.typeName === dragWidgetProps.attrs.typeName &&\n\t\t\t\t\t\tf.name === dragWidgetProps.attrs.name\n\t\t\t\t);\n\t\t\t\tif (index !== -1) {\n\t\t\t\t\tdraft.metaFields.splice(index, 1);\n\t\t\t\t}\n\t\t\t\tdragWidgetProps.attrs = {\n\t\t\t\t\t...dragWidgetProps.attrs,\n\t\t\t\t\t...draft.hoverAttr,\n\t\t\t\t};\n\t\t\t\tlet oldItems = [...draft.items];\n\t\t\t\tlet oldWidgets =\n\t\t\t\t\thoverWidget._type === \"customField\"\n\t\t\t\t\t\t? { ...draft.customFieldWidgets }\n\t\t\t\t\t\t: original(draft.widgets);\n\n\t\t\t\tconst { extendList } = reorderGrid({ hoverWidget, dragWidgetProps })(\n\t\t\t\t\tdraft\n\t\t\t\t);\n\t\t\t\t_extendList.push(...extendList);\n\t\t\t\tlet hoverPanel;\n\t\t\t\tif (hoverWidget._type !== \"customField\") {\n\t\t\t\t\thoverPanel = draft.widgets[hoverWidget.panelId];\n\t\t\t\t}\n\t\t\t\tif (\n\t\t\t\t\thoverWidget.panelId &&\n\t\t\t\t\t![TYPE.menubar, TYPE.toolbar].includes(hoverPanel?.type)\n\t\t\t\t) {\n\t\t\t\t\tconst { extendList = [] } = checkGridEmptyCells(\n\t\t\t\t\t\tdraft,\n\t\t\t\t\t\thoverWidget.panelId,\n\t\t\t\t\t\thoverWidget._type\n\t\t\t\t\t);\n\t\t\t\t\t_extendList.push(...extendList);\n\t\t\t\t}\n\t\t\t\tif (\n\t\t\t\t\tdragWidgetProps.panelId &&\n\t\t\t\t\thoverWidget.panelId !== dragWidgetProps.panelId &&\n\t\t\t\t\t![TYPE.menubar, TYPE.toolbar].includes(hoverPanel?.type)\n\t\t\t\t) {\n\t\t\t\t\tconst { extendList = [] } = checkGridEmptyCells(\n\t\t\t\t\t\tdraft,\n\t\t\t\t\t\tdragWidgetProps.panelId,\n\t\t\t\t\t\thoverWidget._type\n\t\t\t\t\t);\n\t\t\t\t\t_extendList.push(...extendList);\n\t\t\t\t}\n\t\t\t\tif (\n\t\t\t\t\thoverWidget._type !== \"customField\" &&\n\t\t\t\t\tdraft.modelType === MODEL_TYPE.BASE\n\t\t\t\t) {\n\t\t\t\t\tvalidateParentPanelItems(draft, dragWidgetProps.panelId);\n\t\t\t\t\tvalidateParentPanelItems(draft, hoverWidget.panelId);\n\t\t\t\t\tonExtension(_extendList, draft, oldWidgets, oldItems);\n\t\t\t\t\tgenerateXpath(draft);\n\t\t\t\t}\n\t\t\t\tdraft.hoverAttr = {};\n\t\t\t} else {\n\t\t\t\tdraft.dragWidget = id;\n\t\t\t}\n\t\t});\n\t}\n\n\tfunction onTranslationRemove(key) {\n\t\tsetState((draft) => {\n\t\t\tdraft.removedTranslationList.push(key);\n\t\t});\n\t}\n\n\tfunction onHover(hoverWidget) {\n\t\tsetState((draft) => {\n\t\t\tdraft.hoverWidget = hoverWidget;\n\t\t});\n\t}\n\n\t// move widget in form\n\tfunction onMove({ source, destination }, flag, _type) {\n\t\tconst resolver = (isMoved) => ({ isMoved });\n\n\t\tif (\n\t\t\t// avoid drop target of form itself\n\t\t\t!source ||\n\t\t\t!destination ||\n\t\t\t(destination.id === IDS.form && state.items.length > 1)\n\t\t) {\n\t\t\treturn resolver(false);\n\t\t}\n\n\t\t// on create widget case\n\t\tif (Object.values(IDS.createWidgets).indexOf(source.id) > -1) {\n\t\t\treturn resolver(true);\n\t\t}\n\n\t\tconst _widgets =\n\t\t\t_type === \"customField\" ? state.customFieldWidgets : widgets;\n\t\tif (\n\t\t\t// case for create new widget\n\t\t\t// special case for exclusive\n\t\t\t(!source.attrs.isNew && checkExclusive(_widgets, source, destination)) ||\n\t\t\t// avoid to drag panel on its one of children element\n\t\t\t([TYPE.panel, TYPE.tabs].includes(source.attrs.type) &&\n\t\t\t\tgetAllChildrenIds(source.id, _type).indexOf(\n\t\t\t\t\tdestination.id === IDS.dumpField\n\t\t\t\t\t\t? destination.panelId\n\t\t\t\t\t\t: destination.id\n\t\t\t\t) > -1)\n\t\t) {\n\t\t\treturn resolver(false);\n\t\t}\n\n\t\treturn resolver(true);\n\t}\n\n\tfunction setHoverAttr(attr) {\n\t\tsetState((draft) => {\n\t\t\tdraft.hoverAttr = attr;\n\t\t});\n\t}\n\n\tconst startLoader = React.useCallback(\n\t\tfunction startLoader() {\n\t\t\tsetState((draft) => {\n\t\t\t\tdraft.loader = true;\n\t\t\t});\n\t\t},\n\t\t[setState]\n\t);\n\n\tfunction undo() {\n\t\tsetState((draft) => {\n\t\t\tif (draft.past.length) {\n\t\t\t\tdraft.future.unshift({\n\t\t\t\t\twidgets: original(draft.widgets),\n\t\t\t\t\titems: original(draft.items),\n\t\t\t\t\textensionMoves: original(draft.extensionMoves),\n\t\t\t\t\tcustomFieldWidgets: original(draft.customFieldWidgets),\n\t\t\t\t\tcustomFields: original(draft.customFields),\n\t\t\t\t\tcustomFieldItems: original(draft.customFieldItems),\n\t\t\t\t\tmetaFields: original(draft.metaFields),\n\t\t\t\t\tremovedCustomFields: original(draft.removedCustomFields),\n\t\t\t\t\terrorList: original(draft.errorList),\n\t\t\t\t});\n\t\t\t\tsetPresent(draft.past[draft.past.length - 1], draft);\n\t\t\t\tdraft.past.splice(draft.past.length - 1, 1);\n\t\t\t}\n\t\t});\n\t}\n\n\tfunction redo() {\n\t\tsetState((draft) => {\n\t\t\tif (draft.future.length) {\n\t\t\t\tdraft.past.push({\n\t\t\t\t\twidgets: original(draft.widgets),\n\t\t\t\t\titems: original(draft.items),\n\t\t\t\t\textensionMoves: original(draft.extensionMoves),\n\t\t\t\t\tcustomFieldWidgets: original(draft.customFieldWidgets),\n\t\t\t\t\tcustomFieldItems: original(draft.customFieldItems),\n\t\t\t\t\tmetaFields: original(draft.metaFields),\n\t\t\t\t\tcustomFields: original(draft.customFields),\n\t\t\t\t\tremovedCustomFields: original(draft.removedCustomFields),\n\t\t\t\t\terrorList: original(draft.errorList),\n\t\t\t\t});\n\t\t\t\tsetPresent(draft.future[0], draft);\n\t\t\t\tdraft.future.splice(0, 1);\n\t\t\t}\n\t\t});\n\t}\n\n\tfunction setPresent(object, draft) {\n\t\tObject.keys(object).forEach((key) => {\n\t\t\tdraft[key] = original(object[key]);\n\t\t});\n\t}\n\n\tfunction generateHistory(draft) {\n\t\tdraft.past.push({\n\t\t\twidgets: original(draft.widgets),\n\t\t\titems: original(draft.items),\n\t\t\textensionMoves: original(draft.extensionMoves),\n\t\t\tcustomFieldWidgets: original(draft.customFieldWidgets),\n\t\t\tcustomFields: original(draft.customFields),\n\t\t\tcustomFieldItems: original(draft.customFieldItems),\n\t\t\tmetaFields: original(draft.metaFields),\n\t\t\tremovedCustomFields: original(draft.removedCustomFields),\n\t\t\terrorList: original(draft.errorList),\n\t\t});\n\t\tif (draft.future.length) {\n\t\t\tdraft.future = [];\n\t\t}\n\t}\n\n\tfunction clearHistory(draft) {\n\t\tdraft.future = [];\n\t\tdraft.past = [];\n\t}\n\n\tconst value = {\n\t\tonWidgetChange,\n\t\tonMove,\n\t\tonDrag,\n\t\tonRemove,\n\t\tonHover,\n\t\tonSelect,\n\t\tstate,\n\t\tupdate: setState,\n\t\tsetHoverAttr,\n\t\tstartLoader,\n\t\tundo,\n\t\tredo,\n\t\tclearHistory,\n\t\tonTranslationRemove,\n\t};\n\treturn (\n\t\t<StoreContext.Provider value={value}>{children}</StoreContext.Provider>\n\t);\n}\n\nexport function useStore() {\n\treturn React.useContext(StoreContext);\n}\n\nexport function useStoreState() {\n\tconst { state } = React.useContext(StoreContext);\n\treturn state;\n}\n\nexport function useWidget(id) {\n\tconst { widgets } = useStore();\n\treturn widgets[id];\n}\n\nexport default StoreProvider;\n","import Utils from \"./../utils\";\nimport { TYPE } from \"./../constants\";\n\nconst getItemType = (type) => {\n\tconst types = [\"viewer\", \"editor\", \"hilite\"];\n\treturn types.includes(type) ? \"field\" : type;\n};\n\nexport function eGeneratePath(widgets, items = [], itemId, path = \"\") {\n\tif (itemId === -1) {\n\t\treturn \"\";\n\t}\n\tconst isFirstLevel = path === \"\";\n\tconst hasSameNameInParentItems = (items, itemId) => {\n\t\tconst widget = widgets[itemId];\n\t\tconst sameWidgets = items.filter(\n\t\t\t(item) =>\n\t\t\t\titem !== itemId &&\n\t\t\t\twidgets[item] &&\n\t\t\t\t[widgets[item].name, widgets[item].originalName].includes(widget.name)\n\t\t);\n\t\treturn sameWidgets.length > 0;\n\t};\n\n\tconst getSameItemIndex = (items, itemId) => {\n\t\tconst widget = widgets[itemId];\n\t\tconst sameWidgets = items.filter(\n\t\t\t(item) =>\n\t\t\t\twidgets[item] &&\n\t\t\t\t[widgets[item].name, widgets[item].originalName].includes(widget.name)\n\t\t);\n\t\treturn sameWidgets.indexOf(itemId) + 1;\n\t};\n\n\tconst getTypeWiseItemIndex = (items, type, itemId) => {\n\t\tconst sameWidgets = items.filter(\n\t\t\t(item) =>\n\t\t\t\twidgets[item] &&\n\t\t\t\tgetItemType(Utils.getWidgetType(widgets[item], \"field\")) === type\n\t\t);\n\t\treturn sameWidgets.indexOf(itemId) + 1;\n\t};\n\n\tconst isUniquePanel = () => {\n\t\tconst widget = widgets[itemId];\n\t\tif (!widget.name) {\n\t\t\treturn false;\n\t\t}\n\t\tconst widgetList = Object.values(widgets);\n\t\tconst sameWidgets = widgetList.filter((w) => w.name === widget.name);\n\t\treturn sameWidgets.length === 1;\n\t};\n\n\tconst canStopParentLink = () => {\n\t\tif (isFirstLevel) {\n\t\t\treturn false;\n\t\t}\n\t\tif (!isUniquePanel()) {\n\t\t\treturn false;\n\t\t}\n\t\treturn true;\n\t};\n\n\tlet findRoot = true;\n\tconst widgetList = Object.values(widgets);\n\tconst widgetIds = Object.keys(widgets);\n\twidgetList.forEach((widget, i) => {\n\t\tif (widget.items) {\n\t\t\tconst index = widget.items.findIndex((e) => e === itemId);\n\t\t\tif (index !== -1) {\n\t\t\t\tfindRoot = false;\n\t\t\t\tconst _widget = widgets[itemId];\n\t\t\t\tconst widgetType = getItemType(Utils.getWidgetType(_widget, \"field\"));\n\t\t\t\tif (_widget.name) {\n\t\t\t\t\tlet itemPath = `/${widgetType}[@name='${_widget.name}']`;\n\t\t\t\t\tif (hasSameNameInParentItems(widget.items, itemId)) {\n\t\t\t\t\t\tconst itemIndex = getSameItemIndex(widget.items, itemId);\n\t\t\t\t\t\tif (itemIndex > 0) {\n\t\t\t\t\t\t\titemPath = `${itemPath}[${itemIndex}]`;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tpath = `${itemPath}${path}`;\n\t\t\t\t} else {\n\t\t\t\t\tconst itemIndex = getTypeWiseItemIndex(\n\t\t\t\t\t\twidget.items,\n\t\t\t\t\t\twidgetType,\n\t\t\t\t\t\titemId\n\t\t\t\t\t);\n\t\t\t\t\tpath = `/${widgetType}[${itemIndex}]${path}`;\n\t\t\t\t}\n\t\t\t\tif (!canStopParentLink()) {\n\t\t\t\t\tpath = eGeneratePath(widgets, items, widgetIds[i], path);\n\t\t\t\t} else {\n\t\t\t\t\tpath = `/${path}`;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t});\n\tif (findRoot) {\n\t\tconst index = items.findIndex((e) => e === itemId);\n\t\tif (index !== -1) {\n\t\t\tconst _widget = widgets[itemId];\n\t\t\tif (_widget.name) {\n\t\t\t\tlet itemPath = `//${_widget.type}[@name='${_widget.name}']`;\n\t\t\t\tif ([TYPE.menubar, TYPE.toolbar, TYPE.divider].includes(_widget.type)) {\n\t\t\t\t\titemPath = `//${_widget.type}`;\n\t\t\t\t}\n\t\t\t\tif (hasSameNameInParentItems(items, itemId)) {\n\t\t\t\t\tconst itemIndex = getSameItemIndex(items, itemId);\n\t\t\t\t\tif (itemIndex > 0) {\n\t\t\t\t\t\titemPath = `${itemPath}[${itemIndex}]`;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tpath = `${itemPath}${path}`;\n\t\t\t} else {\n\t\t\t\tconst itemIndex = getTypeWiseItemIndex(items, _widget.type, itemId);\n\t\t\t\tpath = `//${_widget.type}[${itemIndex}]${path}`;\n\n\t\t\t\t// path = `/*[${index + 1}]${path}`;\n\t\t\t}\n\t\t}\n\t}\n\treturn path;\n}\n\n// generate xpath for all widgets\nexport function generateXpath(draft) {\n\tObject.keys(draft.widgets).forEach((widgetId) => {\n\t\tconst path = eGeneratePath(draft.widgets, draft.items, widgetId);\n\t\tdraft.widgets[widgetId].xPath = path;\n\t});\n}\n","import _, { camelCase } from \"lodash\";\nimport {\n\tTYPE,\n\tFIELD_TYPE,\n\tPANEL_TYPE,\n\tIDS,\n\tMODEL_TYPE,\n\tDEFAULT_VALUE,\n\tENTITY_TYPE,\n\ttypeReplacer as TYPE_REPLACER,\n} from \"./constants\";\nimport { modelFields } from \"./fields\";\nimport convert from \"xml-js\";\nimport { validate } from \"./store/validation\";\nimport format from \"xml-beautifier\";\nimport { eGeneratePath } from \"./store/xpathGenerator\";\nimport { processMoves } from \"./store/computeXML\";\nimport dasherize from \"dasherize\";\n\nexport function camleCaseString(word) {\n\tlet string =\n\t\tword &&\n\t\tword.replace(/([A-Z])/g, \" $1\").replace(/^./, function (str) {\n\t\t\treturn str.toUpperCase();\n\t\t});\n\treturn string;\n}\n\nexport const caseConverter = (value, isCamelCase = true) => {\n\tif (!value) return;\n\tvalue = value.trim();\n\tlet convertedText;\n\tif (isCamelCase) {\n\t\tconvertedText = camelCase(value);\n\t} else {\n\t\tlet textToConvert = camelCase(value);\n\t\tconvertedText = textToConvert[0].toUpperCase() + textToConvert.slice(1);\n\t}\n\treturn convertedText;\n};\n\nexport const capitalizeFirst = (value) => {\n\tlet result = value.replace(/([A-Z])/g, \" $1\");\n\tlet finalResult =\n\t\tresult && result.charAt(0).toUpperCase() + result.slice(1).toLowerCase();\n\treturn finalResult;\n};\n\nexport function translate(str) {\n\tif (window && window.top && window.top._t && typeof str === \"string\") {\n\t\treturn window.top._t(str);\n\t}\n\treturn str;\n}\n\nconst getSpacer = ({ widget, id, ...other }) => ({\n\tcolSpan: widget.colSpan || 1,\n\tserverType: FIELD_TYPE.spacer,\n\ttype: TYPE.field,\n\tisDummy: true,\n\tname: `spacer${id}`,\n\ttitle: \"Spacer\",\n\t...other,\n});\n\nconst isDummyWidget = (state, id, isCustomField = false) => {\n\tconst widgets = isCustomField ? state.customFieldWidgets : state.widgets;\n\treturn id === true || (widgets[id] && widgets[id].isDummy);\n};\n\nexport const getGrid = (\n\tstate,\n\t{ cols = 12, items },\n\ttrackElement,\n\tisCustomField = false\n) => {\n\tconst widgets = isCustomField ? state.customFieldWidgets : state.widgets;\n\tconst grid = [];\n\tlet ind = 0;\n\tlet span = 0;\n\tlet row = [];\n\n\tlet fillRow = (start) => {\n\t\tfor (let i = start; i < cols; i++) {\n\t\t\trow.push({ index: i, item: true, colSpan: 1, indices: [i] });\n\t\t}\n\t};\n\n\titems.forEach((item) => {\n\t\tlet colSpan = Number(widgets[item].colSpan || 1);\n\t\tspan += colSpan;\n\t\t//next row\n\t\tif (span > cols) {\n\t\t\tfillRow(ind);\n\t\t\tind = 0;\n\t\t\tspan = colSpan;\n\t\t\tgrid.push(row);\n\t\t\trow = [];\n\t\t}\n\t\ttrackElement &&\n\t\t\ttrackElement(item, {\n\t\t\t\tcolumn: ind,\n\t\t\t\trow: grid.length,\n\t\t\t});\n\t\trow.push({\n\t\t\tindex: ind,\n\t\t\titem,\n\t\t\tcolSpan,\n\t\t\tindices: new Array(colSpan).fill(0).map((x, i) => ind + i),\n\t\t});\n\t\tind += colSpan;\n\t});\n\n\tfillRow(ind);\n\tgrid.push(row);\n\treturn grid;\n};\n\nexport const checkGridEmptyCells = (state, panelId, modelFieldType) => {\n\tconst extendList = [];\n\tconst isCustomField = modelFieldType === \"customField\";\n\tconst widgets = isCustomField ? state.customFieldWidgets : state.widgets;\n\n\tconst panel = widgets[panelId];\n\tif (panel.layout !== PANEL_TYPE.grid) return {};\n\tconst { cols = 12, items } = panel;\n\tconst grid = getGrid(\n\t\tstate,\n\t\t{\n\t\t\tcols,\n\t\t\titems,\n\t\t},\n\t\tnull,\n\t\tisCustomField\n\t);\n\tlet removeIds = [];\n\tlet emptyColumns = {};\n\tgrid.forEach((row) => {\n\t\trow.forEach((cell, i) => {\n\t\t\tif (isDummyWidget(state, cell.item, isCustomField)) {\n\t\t\t\tlet target = emptyColumns[cell.index] || [];\n\t\t\t\ttarget.push(cell);\n\t\t\t\temptyColumns[cell.index] = target;\n\t\t\t}\n\t\t});\n\t\tif (row.every((cell) => isDummyWidget(state, cell.item, isCustomField))) {\n\t\t\tremoveIds = removeIds.concat(row.map((x) => x.item));\n\t\t}\n\t});\n\n\t// Object.values(emptyColumns)\n\t// \t.filter((arr) => arr.length === grid.length)\n\t// \t.forEach((row) => {\n\t// \t\tremoveIds = removeIds.concat(row.map((x) => x.item));\n\t// \t\t// panel.cols = Number(panel.cols || 12) - 1;\n\t// \t});\n\n\tif (removeIds.length) {\n\t\tpanel.items = panel.items.filter((x) => removeIds.indexOf(x) === -1);\n\t\tremoveIds.forEach((x) => {\n\t\t\tif (widgets[x]) {\n\t\t\t\tisExtensionView(state) &&\n\t\t\t\t\textendList.push({ name: \"replace\", target: widgets[x].xPath, id: x });\n\t\t\t\twidgets[x] && delete widgets[x];\n\t\t\t}\n\t\t});\n\t}\n\treturn { extendList };\n};\n\nexport const arrangeGrid = (state, { id, index, panelId }, widgetType) => {\n\tconst extendList = [];\n\tconst isCustomField = widgetType === \"customField\";\n\tconst widgets = isCustomField ? state.customFieldWidgets : state.widgets;\n\tconst panel = widgets[panelId];\n\tconst removeWidget = widgets[id] || { colSpan: 1 };\n\tconst { cols = 12, items } = panel;\n\tconst isLastItemRemove = panel.items[panel.items.length - 1] === id;\n\tlet removeItem = { column: null, row: null };\n\tlet ids = [];\n\tlet columnCells = [];\n\tlet rowCells = [];\n\n\tconst grid = getGrid(\n\t\tstate,\n\t\t{ cols, items },\n\t\t(item, meta) => {\n\t\t\tif (item === id) {\n\t\t\t\tremoveItem = meta;\n\t\t\t}\n\t\t},\n\t\tisCustomField\n\t);\n\n\tgrid.forEach((gridRow, i) => {\n\t\tif (removeItem.row === i) {\n\t\t\tcolumnCells = gridRow.map((x) => x.item);\n\t\t}\n\t\tconst findCol = gridRow.find((x) => x.index === removeItem.column);\n\t\tif (findCol) {\n\t\t\trowCells.push(findCol.item);\n\t\t}\n\t});\n\n\tconst deleteItem = panel.items.splice(index, 1);\n\tconst isDummyItem = ($id) =>\n\t\t$id === id || isDummyWidget(state, $id, isCustomField);\n\n\tif (columnCells.every(isDummyItem)) {\n\t\tpanel.items = panel.items.filter((x) => !columnCells.includes(x));\n\t\tids = ids.concat(columnCells);\n\t}\n\n\tif (grid.length - 1 === rowCells.length && rowCells.every(isDummyItem)) {\n\t\tpanel.items = panel.items.filter((x) => !rowCells.includes(x));\n\t\t// panel.cols = Number(panel.cols) - removeWidget.colSpan;\n\n\t\tids = ids.concat(rowCells);\n\t}\n\n\tif (ids.length === 0 && !widgets[deleteItem].isDummy && !isLastItemRemove) {\n\t\tlet newId = _.uniqueId();\n\t\tlet otherProps = {};\n\t\tif (state.modelType === MODEL_TYPE.CUSTOM) {\n\t\t\totherProps = {\n\t\t\t\tmodel: removeWidget.model,\n\t\t\t\tmodelField: removeWidget.modelField,\n\t\t\t};\n\t\t}\n\t\twidgets[newId] = getSpacer({\n\t\t\twidget: {},\n\t\t\tid: newId,\n\t\t\tcolSpan: removeWidget.colSpan,\n\t\t\t...otherProps,\n\t\t});\n\t\tconst targetWidget = widgets[panel.items[index]];\n\t\tisExtensionView(state) &&\n\t\t\textendList.push({\n\t\t\t\tname: \"insert\",\n\t\t\t\tposition: \"before\",\n\t\t\t\telements: [widgets[newId]],\n\t\t\t\ttarget: targetWidget.xPath,\n\t\t\t});\n\t\tpanel.items.splice(index, 0, newId);\n\t}\n\treturn { ids: [...ids, id], extendList };\n};\n\nconst collectWidgets = ({ grid, items, widgetIndex, hoverCellRowIndex }) => {\n\tlet beforeWidgets = [];\n\tlet afterWidgets = [];\n\tlet flag = true;\n\tlet itemIndex = 0;\n\tif (grid.length) {\n\t\tgrid.forEach((cell, cellIndex) => {\n\t\t\tcell.colSpan = Number(cell.colSpan || 1);\n\t\t\t// once any valid id cell find, take its index as default value\n\t\t\tif (cell.id && flag && cellIndex < widgetIndex) {\n\t\t\t\titemIndex = items.indexOf(cell.id) + 1;\n\t\t\t}\n\t\t\t// consider hover row cells\n\t\t\tif (!cell.separator && cell.rowIndex <= hoverCellRowIndex) {\n\t\t\t\t// before hover widget\n\t\t\t\tif (cellIndex < widgetIndex) {\n\t\t\t\t\t// reset before row if you find valid cell with id\n\t\t\t\t\tif (cell.id) {\n\t\t\t\t\t\tbeforeWidgets = [];\n\t\t\t\t\t\titemIndex = items.indexOf(cell.id) + 1;\n\t\t\t\t\t} else if (items.length) {\n\t\t\t\t\t\tbeforeWidgets.push({\n\t\t\t\t\t\t\t...cell,\n\t\t\t\t\t\t\tcolSpan: cell.colSpan || 6,\n\t\t\t\t\t\t\tisSpacer: true,\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t\t// after hover widget\n\t\t\t\t} else if (flag && cellIndex > widgetIndex) {\n\t\t\t\t\tif (cell.id) {\n\t\t\t\t\t\titemIndex = items.indexOf(cell.id);\n\t\t\t\t\t\tflag = false;\n\t\t\t\t\t} else if (items.length) {\n\t\t\t\t\t\tafterWidgets.push({ ...cell, isSpacer: true });\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t\tif (items.length) {\n\t\t\t// find last item index\n\t\t\tconst lastItem = items[items.length - 1];\n\t\t\tconst lastItemIndex = grid.findIndex((x) => `${x.id}` === `${lastItem}`);\n\t\t\t// if drop at end of list then fill only one widget so empty after widgets\n\t\t\tif (widgetIndex > lastItemIndex && lastItemIndex !== -1) {\n\t\t\t\tafterWidgets = [];\n\t\t\t\titemIndex = items.length + 1;\n\t\t\t}\n\t\t}\n\t}\n\treturn { afterWidgets, beforeWidgets, itemIndex };\n};\n\nexport const setErrorList = (attrs, state, id, isCustomField) => {\n\tconst errors = validate(attrs, state.modelType, isCustomField);\n\tif (Object.keys(errors).length) {\n\t\tstate.errorList[id] = errors;\n\t} else if (state.errorList[id]) {\n\t\tdelete state.errorList[id];\n\t}\n};\n\nexport function isExtensionView(state) {\n\treturn state.exView && !isCreatedFromStudio(state.exView);\n}\n\n// reorder widgets based on dummy widgets\nexport const reorderGrid =\n\t({ hoverWidget, dragWidgetProps }) =>\n\t(state) => {\n\t\tconst extendList = [];\n\t\tconst isCustomField = hoverWidget._type === \"customField\";\n\t\tconst dragWidgetItems =\n\t\t\thoverWidget._type === \"customField\" && !dragWidgetProps.panelId\n\t\t\t\t? \"customFieldItems\"\n\t\t\t\t: \"items\";\n\t\tconst _items =\n\t\t\thoverWidget._type === \"customField\" && !hoverWidget.panelId\n\t\t\t\t? \"customFieldItems\"\n\t\t\t\t: \"items\";\n\t\tconst _widgets =\n\t\t\thoverWidget._type === \"customField\"\n\t\t\t\t? state.customFieldWidgets\n\t\t\t\t: state.widgets;\n\t\tconst destinationItems = (\n\t\t\t(hoverWidget.panelId ? _widgets[hoverWidget.panelId] : state)[_items] ||\n\t\t\t[]\n\t\t).slice();\n\t\tconst {\n\t\t\tcolSpan,\n\t\t\tgrid = [],\n\t\t\trow: hoverCellRowIndex,\n\t\t\trelatedColSpan,\n\t\t} = hoverWidget.meta;\n\t\t// remove isNew attribute\n\t\tif (dragWidgetProps.attrs && dragWidgetProps.attrs.isNew !== undefined) {\n\t\t\tdelete dragWidgetProps.attrs.isNew;\n\t\t}\n\t\t// clone colSpan of hover widget\n\t\tconst parentPanel = _widgets[hoverWidget.panelId];\n\t\tconst hoverType = parentPanel?.serverType;\n\t\tif (dragWidgetProps.attrs && !dragWidgetProps.attrs.colSpan) {\n\t\t\tif (\n\t\t\t\tcolSpan &&\n\t\t\t\tdragWidgetProps.attrs &&\n\t\t\t\t![TYPE.menu, TYPE.menuItem, TYPE.divider].includes(\n\t\t\t\t\tdragWidgetProps.attrs.type\n\t\t\t\t) &&\n\t\t\t\t![TYPE.toolbar, TYPE.menubar].includes(hoverType)\n\t\t\t) {\n\t\t\t\tconst existingColspan = dragWidgetProps.attrs.colSpan;\n\t\t\t\t// set itemSpan if exists\n\t\t\t\tif (hoverType === TYPE.panel && Number(parentPanel.itemSpan)) {\n\t\t\t\t\tdragWidgetProps.attrs.colSpan = Number(parentPanel.itemSpan);\n\t\t\t\t} else {\n\t\t\t\t\tdragWidgetProps.attrs.colSpan = relatedColSpan || colSpan;\n\t\t\t\t}\n\t\t\t\tif (isCustomField) {\n\t\t\t\t\t// set colSpan in widgetAttrs for custom field\n\t\t\t\t\tconst widgetAttrs = { colSpan: relatedColSpan || colSpan };\n\t\t\t\t\tdragWidgetProps.attrs.widgetAttrs = JSON.stringify(widgetAttrs);\n\t\t\t\t}\n\t\t\t\tif (`${dragWidgetProps.attrs.colSpan}` !== `${existingColspan}`) {\n\t\t\t\t\tif (state.modelType === MODEL_TYPE.CUSTOM) {\n\t\t\t\t\t\t// change widgetAttrs for colSpan\n\t\t\t\t\t\tconst widgetAttrs = JSON.parse(\n\t\t\t\t\t\t\tdragWidgetProps.attrs.widgetAttrs || \"{}\"\n\t\t\t\t\t\t);\n\t\t\t\t\t\twidgetAttrs.colSpan = relatedColSpan || colSpan;\n\t\t\t\t\t\tdragWidgetProps.attrs.widgetAttrs = JSON.stringify(widgetAttrs);\n\t\t\t\t\t}\n\t\t\t\t\tisExtensionView(state) &&\n\t\t\t\t\t\textendList.push({\n\t\t\t\t\t\t\tname: \"attribute\",\n\t\t\t\t\t\t\ttarget: dragWidgetProps.attrs.xPath,\n\t\t\t\t\t\t\tattributes: {\n\t\t\t\t\t\t\t\tname: \"colSpan\",\n\t\t\t\t\t\t\t\tvalue: dragWidgetProps.attrs.colSpan,\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\tif (state.modelType === MODEL_TYPE.CUSTOM) {\n\t\t\t\t\tconst widgetAttrs = JSON.parse(\n\t\t\t\t\t\tdragWidgetProps.attrs.widgetAttrs || \"{}\"\n\t\t\t\t\t);\n\t\t\t\t\twidgetAttrs.colSpan = 6;\n\t\t\t\t\tdragWidgetProps.attrs.widgetAttrs = JSON.stringify(widgetAttrs);\n\t\t\t\t}\n\t\t\t} else if (\n\t\t\t\tdragWidgetProps.attrs &&\n\t\t\t\tstate.modelType === MODEL_TYPE.CUSTOM\n\t\t\t) {\n\t\t\t\tconst widgetAttrs = JSON.parse(\n\t\t\t\t\tdragWidgetProps.attrs.widgetAttrs || \"{}\"\n\t\t\t\t);\n\t\t\t\twidgetAttrs.colSpan = relatedColSpan || colSpan;\n\t\t\t\tdragWidgetProps.attrs.colSpan = relatedColSpan || colSpan;\n\t\t\t\tdragWidgetProps.attrs.widgetAttrs = JSON.stringify(widgetAttrs);\n\t\t\t}\n\t\t}\n\t\tconst newIds = [];\n\t\tlet widgetIndex = Number(hoverWidget.index);\n\t\tlet {\n\t\t\tbeforeWidgets,\n\t\t\tafterWidgets,\n\t\t\titemIndex = 0,\n\t\t} = collectWidgets({\n\t\t\tgrid,\n\t\t\titems: destinationItems,\n\t\t\twidgetIndex,\n\t\t\thoverCellRowIndex,\n\t\t});\n\n\t\tlet isRemovedFromSameList = false;\n\t\t// if drag widget is existing one then remove it from its panel\n\t\tif (dragWidgetProps.id && _widgets[dragWidgetProps.id]) {\n\t\t\tconst sourcePanel = dragWidgetProps.panelId\n\t\t\t\t? _widgets[dragWidgetProps.panelId]\n\t\t\t\t: state;\n\t\t\tconst sourceItems = sourcePanel[dragWidgetItems];\n\t\t\tconst sourceItemIndex = sourceItems.indexOf(dragWidgetProps.id);\n\t\t\tif ([PANEL_TYPE.grid].includes(sourcePanel.layout)) {\n\t\t\t\tlet newId = _.uniqueId();\n\t\t\t\tconst isLastItem =\n\t\t\t\t\tsourceItems[sourceItems.length - 1] === dragWidgetProps.id;\n\t\t\t\tlet isLastItemInSamePanel = false;\n\t\t\t\tif (dragWidgetProps.panelId === hoverWidget.panelId) {\n\t\t\t\t\tif (dragWidgetProps.index < hoverWidget.index) {\n\t\t\t\t\t\tisLastItemInSamePanel = true;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tconst hoverParent = dragWidgetProps.panelId\n\t\t\t\t\t? _widgets[dragWidgetProps.panelId]\n\t\t\t\t\t: null;\n\t\t\t\tlet isPanelTab = false;\n\t\t\t\tif (\n\t\t\t\t\thoverParent &&\n\t\t\t\t\t[TYPE.tabs, TYPE.panelStack].includes(hoverParent.type)\n\t\t\t\t) {\n\t\t\t\t\tisPanelTab = true;\n\t\t\t\t}\n\t\t\t\tif (\n\t\t\t\t\t(isLastItem && !isLastItemInSamePanel) ||\n\t\t\t\t\tisPanelTab ||\n\t\t\t\t\t[TYPE.menubar, TYPE.toolbar].includes(hoverType)\n\t\t\t\t) {\n\t\t\t\t\tsourceItems.splice(sourceItemIndex, 1);\n\t\t\t\t} else {\n\t\t\t\t\tlet attrs = {\n\t\t\t\t\t\tcolSpan: _widgets[dragWidgetProps.id].colSpan || 1,\n\t\t\t\t\t\tserverType: FIELD_TYPE.spacer,\n\t\t\t\t\t\ttype: TYPE.field,\n\t\t\t\t\t\tisDummy: true,\n\t\t\t\t\t\tname: `spacer${newId}`,\n\t\t\t\t\t\ttitle: \"Spacer\",\n\t\t\t\t\t};\n\t\t\t\t\tif (state.modelType === MODEL_TYPE.CUSTOM) {\n\t\t\t\t\t\tattrs[\"model\"] = dragWidgetProps.attrs.model;\n\t\t\t\t\t\tattrs[\"modelField\"] = dragWidgetProps.attrs.modelField;\n\t\t\t\t\t\tattrs[\"widgetAttrs\"] = JSON.stringify({ colSpan: attrs.colSpan });\n\t\t\t\t\t}\n\t\t\t\t\tif (isCustomField) {\n\t\t\t\t\t\tattrs[\"widgetAttrs\"] = JSON.stringify({ colSpan: attrs.colSpan });\n\t\t\t\t\t}\n\t\t\t\t\t_widgets[newId] = Object.assign({}, attrs);\n\t\t\t\t\tisExtensionView(state) &&\n\t\t\t\t\t\textendList.push({\n\t\t\t\t\t\t\tname: \"insert\",\n\t\t\t\t\t\t\tposition: \"before\",\n\t\t\t\t\t\t\ttarget: dragWidgetProps.attrs.xPath,\n\t\t\t\t\t\t\telements: [attrs],\n\t\t\t\t\t\t\tid: newId,\n\t\t\t\t\t\t});\n\t\t\t\t\tsourceItems.splice(sourceItemIndex, 1, newId);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\t// if same panel, drag widget is before hover widget\n\t\t\t\tif (dragWidgetProps.panelId === hoverWidget.panelId) {\n\t\t\t\t\tif (dragWidgetProps.index < hoverWidget.index) {\n\t\t\t\t\t\tisRemovedFromSameList = true;\n\t\t\t\t\t\titemIndex--;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tsourceItems.splice(sourceItemIndex, 1);\n\t\t\t}\n\t\t}\n\n\t\t// remove dummy widget if spacer created automatically\n\t\tif (hoverWidget.attrs.isDummy) {\n\t\t\tlet isNew =\n\t\t\t\t!dragWidgetProps.id ||\n\t\t\t\tObject.values(IDS.createWidgets).indexOf(dragWidgetProps.id) > -1;\n\t\t\tlet newId = isNew ? _.uniqueId() : dragWidgetProps.id;\n\t\t\tlet attrs = Object.assign({}, dragWidgetProps.attrs || {});\n\t\t\tif (isNew && attrs.isCoreField !== false && attrs.name) {\n\t\t\t\tattrs.name = `${attrs.name}${newId}`;\n\t\t\t}\n\t\t\tsetErrorList(attrs, state, newId, isCustomField);\n\t\t\tif (isNew) {\n\t\t\t\t_widgets[newId] = Object.assign({}, attrs);\n\t\t\t\tisExtensionView(state) &&\n\t\t\t\t\textendList.push({\n\t\t\t\t\t\tname: \"insert\",\n\t\t\t\t\t\tposition: \"before\",\n\t\t\t\t\t\ttarget: hoverWidget.attrs.xPath,\n\t\t\t\t\t\telements: [attrs],\n\t\t\t\t\t\tid: newId,\n\t\t\t\t\t});\n\t\t\t} else {\n\t\t\t\tisExtensionView(state) &&\n\t\t\t\t\textendList.push({\n\t\t\t\t\t\tname: \"move\",\n\t\t\t\t\t\tsource: dragWidgetProps.attrs.xPath,\n\t\t\t\t\t\tposition: \"before\",\n\t\t\t\t\t\ttarget: hoverWidget.attrs.xPath,\n\t\t\t\t\t});\n\t\t\t\t_widgets[dragWidgetProps.id] = Object.assign(\n\t\t\t\t\t{ ..._widgets[dragWidgetProps.id] },\n\t\t\t\t\tattrs\n\t\t\t\t);\n\t\t\t}\n\t\t\t(hoverWidget.panelId ? _widgets[hoverWidget.panelId] : state)[\n\t\t\t\t_items\n\t\t\t].splice(\n\t\t\t\tdestinationItems.indexOf(hoverWidget.id) -\n\t\t\t\t\t(isRemovedFromSameList ? 1 : 0),\n\t\t\t\t1,\n\t\t\t\tnewId\n\t\t\t);\n\t\t\tisExtensionView(state) &&\n\t\t\t\textendList.push({ name: \"replace\", target: hoverWidget.attrs.xPath });\n\t\t\treturn { extendList };\n\t\t}\n\n\t\t// cell placement is horizontal special case for Tabs widget\n\t\tif (hoverWidget.meta && hoverWidget.meta.horizontal) {\n\t\t\tlet index = Number(hoverWidget.index);\n\t\t\tif (\n\t\t\t\tdragWidgetProps.panelId === hoverWidget.panelId &&\n\t\t\t\tdragWidgetProps.index < hoverWidget.index\n\t\t\t) {\n\t\t\t\tindex = index - 2;\n\t\t\t}\n\t\t\t// calculate item position\n\t\t\titemIndex = Math.ceil(Number(index / 2));\n\t\t}\n\n\t\t// remove all dummy cells for flow layout\n\t\tconst destinationPanel = hoverWidget.panelId\n\t\t\t? _widgets[hoverWidget.panelId]\n\t\t\t: state;\n\t\tif ((destinationPanel.layout || PANEL_TYPE.flow) === PANEL_TYPE.flow) {\n\t\t\tbeforeWidgets = [];\n\t\t\tafterWidgets = [];\n\t\t}\n\t\t// fill all widgets in panel\n\t\tconst newWidgetIds = [];\n\t\tconst hoverWidgetParentItems =\n\t\t\t(hoverWidget.panelId ? _widgets[hoverWidget.panelId] : state)[_items] ||\n\t\t\t[];\n\t\tlet hoverWidgetId = hoverWidgetParentItems[itemIndex];\n\t\tlet hoverPath;\n\t\tlet actualHoverWidget = _widgets[hoverWidgetParentItems[itemIndex]];\n\t\tlet position = \"before\";\n\t\tif (!actualHoverWidget && hoverWidgetParentItems.length <= itemIndex) {\n\t\t\thoverWidgetId = hoverWidgetParentItems[hoverWidgetParentItems.length - 1];\n\t\t\tactualHoverWidget =\n\t\t\t\t_widgets[hoverWidgetParentItems[hoverWidgetParentItems.length - 1]];\n\t\t\tposition = \"after\";\n\t\t}\n\t\t// check for sidebar widget\n\t\tif (actualHoverWidget && `${actualHoverWidget.sidebar}` === \"true\") {\n\t\t\tdragWidgetProps.attrs.sidebar = \"true\";\n\t\t\tisExtensionView(state) &&\n\t\t\t\textendList.push({\n\t\t\t\t\tname: \"attribute\",\n\t\t\t\t\ttarget: dragWidgetProps.attrs.xPath,\n\t\t\t\t\tattributes: { name: \"sidebar\", value: \"true\" },\n\t\t\t\t});\n\t\t}\n\t\tif (actualHoverWidget) {\n\t\t\thoverPath =\n\t\t\t\tactualHoverWidget.xPath ||\n\t\t\t\teGeneratePath(_widgets, state[_items], hoverWidgetId);\n\t\t}\n\t\tconst shouldInsertInParent = (dragWidget, hoverWidget) => {\n\t\t\tconst hoverPathInfo = exploreTarget(hoverWidget.xPath);\n\t\t\tconst list = state.extensionMoves.filter((m) => {\n\t\t\t\tif (m.target) {\n\t\t\t\t\tconst targetInfo = exploreTarget(m.target);\n\t\t\t\t\tif (m.name === \"replace\") {\n\t\t\t\t\t\tif (hoverPathInfo.self) {\n\t\t\t\t\t\t\tif (targetInfo.parent.indexOf(hoverPathInfo.self) >= 0) {\n\t\t\t\t\t\t\t\treturn true;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t} else if (targetInfo.parent.indexOf(hoverPathInfo.parent) >= 0) {\n\t\t\t\t\t\t\treturn true;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\treturn false;\n\t\t\t});\n\t\t\tif (\n\t\t\t\t[TYPE.menu, FIELD_TYPE.button, TYPE.menuItem].includes(\n\t\t\t\t\tdragWidget.attrs.type\n\t\t\t\t) &&\n\t\t\t\t[TYPE.menubar, TYPE.toolbar, TYPE.menu].includes(hoverWidget.type)\n\t\t\t) {\n\t\t\t\t// hoverwidget should not have any child remove\n\t\t\t\tif (hoverWidget.items.length === 0 && !list.length) {\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn false;\n\t\t};\n\t\tconst list = [];\n\t\tbeforeWidgets\n\t\t\t.concat([dragWidgetProps])\n\t\t\t.concat(afterWidgets)\n\t\t\t.forEach((widget) => {\n\t\t\t\tlet attrs = Object.assign({}, widget.attrs || {});\n\t\t\t\tlet newId = widget.id;\n\t\t\t\tconst isCreateWidget = typeof newId === \"symbol\";\n\t\t\t\tconst isNew = !newId || isCreateWidget;\n\t\t\t\tlet shouldAdd = true;\n\t\t\t\t// new drag widgets\n\t\t\t\tif (\n\t\t\t\t\t[TYPE.menubar, TYPE.toolbar].includes(hoverType) &&\n\t\t\t\t\twidget.isSpacer\n\t\t\t\t) {\n\t\t\t\t\tshouldAdd = false;\n\t\t\t\t}\n\t\t\t\tif (shouldAdd) {\n\t\t\t\t\tif (isNew) {\n\t\t\t\t\t\tnewId = _.uniqueId();\n\t\t\t\t\t\tif (attrs.isCoreField !== false) {\n\t\t\t\t\t\t\tif (attrs && Object.keys(attrs).length) {\n\t\t\t\t\t\t\t\tsetErrorList(attrs, state, newId, isCustomField);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tif (attrs.name) {\n\t\t\t\t\t\t\t\tattrs.name = `${attrs.name}${newId}`;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\t// set new drag widget as edit widget\n\t\t\t\t\t\tif (isCreateWidget) {\n\t\t\t\t\t\t\tstate.editWidget = newId;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tif (widget.isSpacer)\n\t\t\t\t\t\tif (widget.isSpacer) {\n\t\t\t\t\t\t\t// if its spacer widgets\n\t\t\t\t\t\t\tconst _attrs = dragWidgetProps.attrs || {};\n\t\t\t\t\t\t\tattrs = getSpacer({\n\t\t\t\t\t\t\t\twidget,\n\t\t\t\t\t\t\t\tid: newId,\n\t\t\t\t\t\t\t\tmodel: _attrs.model,\n\t\t\t\t\t\t\t\tmodelField: _attrs.modelField,\n\t\t\t\t\t\t\t\twidgetAttrs: JSON.stringify({ colSpan: widget.colSpan || 6 }),\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\t\t\t\t\t// add new widget\n\t\t\t\t\tif (isNew) {\n\t\t\t\t\t\tif (isExtensionView(state) && !isCustomField) {\n\t\t\t\t\t\t\tif (actualHoverWidget) {\n\t\t\t\t\t\t\t\tisExtensionView(state) &&\n\t\t\t\t\t\t\t\t\tlist[position === \"after\" ? \"unshift\" : \"push\"]({\n\t\t\t\t\t\t\t\t\t\tname: \"insert\",\n\t\t\t\t\t\t\t\t\t\tposition,\n\t\t\t\t\t\t\t\t\t\ttarget: hoverPath,\n\t\t\t\t\t\t\t\t\t\telements: [attrs],\n\t\t\t\t\t\t\t\t\t\tid: newId,\n\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tconst widget = _widgets[hoverWidget.panelId];\n\t\t\t\t\t\t\t\tif (shouldInsertInParent(dragWidgetProps, widget)) {\n\t\t\t\t\t\t\t\t\tprocessMoves(state, attrs, newId, hoverWidget.panelId);\n\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\tlist[position === \"after\" ? \"unshift\" : \"push\"]({\n\t\t\t\t\t\t\t\t\t\tname: \"insert\",\n\t\t\t\t\t\t\t\t\t\tposition: \"inside\",\n\t\t\t\t\t\t\t\t\t\ttarget: widget.xPath,\n\t\t\t\t\t\t\t\t\t\telements: [attrs],\n\t\t\t\t\t\t\t\t\t\tid: newId,\n\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t// processMoves(state, attrs, newId, hoverWidget.panelId);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tnewWidgetIds.push(newId);\n\t\t\t\t\t\t_widgets[newId] = Object.assign({}, attrs);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tif (isExtensionView(state) && !isCustomField) {\n\t\t\t\t\t\t\tif (actualHoverWidget) {\n\t\t\t\t\t\t\t\tisExtensionView(state) &&\n\t\t\t\t\t\t\t\t\tlist[position === \"after\" ? \"unshift\" : \"push\"]({\n\t\t\t\t\t\t\t\t\t\tname: \"move\",\n\t\t\t\t\t\t\t\t\t\tsource: dragWidgetProps.attrs.xPath,\n\t\t\t\t\t\t\t\t\t\tposition,\n\t\t\t\t\t\t\t\t\t\ttarget: hoverPath,\n\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tconst widget = _widgets[hoverWidget.panelId];\n\t\t\t\t\t\t\t\tif (shouldInsertInParent(dragWidgetProps, widget)) {\n\t\t\t\t\t\t\t\t\tprocessMoves(\n\t\t\t\t\t\t\t\t\t\tstate,\n\t\t\t\t\t\t\t\t\t\tdragWidgetProps.attrs,\n\t\t\t\t\t\t\t\t\t\tdragWidgetProps.id,\n\t\t\t\t\t\t\t\t\t\thoverWidget.panelId\n\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\tisExtensionView(state) &&\n\t\t\t\t\t\t\t\t\t\tlist[position === \"after\" ? \"unshift\" : \"push\"]({\n\t\t\t\t\t\t\t\t\t\t\tname: \"move\",\n\t\t\t\t\t\t\t\t\t\t\tsource: dragWidgetProps.attrs.xPath,\n\t\t\t\t\t\t\t\t\t\t\tposition: \"inside\",\n\t\t\t\t\t\t\t\t\t\t\ttarget: widget.xPath,\n\t\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t// const tempList = processMoves(state, dragWidgetProps.attrs, dragWidgetProps.id, hoverWidget.panelId);\n\t\t\t\t\t\t\t\t// if(tempList.length) {\n\t\t\t\t\t\t\t\t// \tconst index = extendList.findIndex(l => l.name === 'attribute');\n\t\t\t\t\t\t\t\t// \tif(index !== -1) {\n\t\t\t\t\t\t\t\t// \t\textendList.splice(index, 1);\n\t\t\t\t\t\t\t\t// \t}\n\t\t\t\t\t\t\t\t// }\n\t\t\t\t\t\t\t\t// list.push(...tempList);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t_widgets[dragWidgetProps.id] = Object.assign(\n\t\t\t\t\t\t\t{ ..._widgets[dragWidgetProps.id] },\n\t\t\t\t\t\t\tattrs\n\t\t\t\t\t\t);\n\t\t\t\t\t}\n\t\t\t\t\tnewIds.push(newId);\n\t\t\t\t}\n\t\t\t});\n\t\textendList.push(...list);\n\t\t// put all new widgets into panel\n\t\t(\n\t\t\t(hoverWidget.panelId ? _widgets[hoverWidget.panelId] : state)[_items] ||\n\t\t\t[]\n\t\t).splice(itemIndex, 0, ...newIds);\n\t\treturn { extendList };\n\t};\n\nconst getWidgetType = (widgetAttrs, defaultType) => {\n\tconst uiFields = [\"spacer\", \"label\", \"button\"];\n\tlet _type =\n\t\twidgetAttrs.isModelField ||\n\t\twidgetAttrs.isCoreField === false ||\n\t\twidgetAttrs.serverType === \"field\"\n\t\t\t? \"field\"\n\t\t\t: widgetAttrs.type\n\t\t\t? widgetAttrs.type.toLowerCase()\n\t\t\t: defaultType;\n\t_type = uiFields.includes(widgetAttrs.serverType)\n\t\t? widgetAttrs.serverType\n\t\t: _type;\n\treturn _type;\n};\n\n// check source or destination panel is exclusive or not\nexport const checkExclusive = (widgets, source, destination) => {\n\t// special case for exclusive\n\tif (widgets[source.id]) {\n\t\tif (widgets[source.panelId]) {\n\t\t\tlet sourcePanelAttrs = widgets[source.panelId];\n\t\t\tif (\n\t\t\t\tsourcePanelAttrs.exclusive &&\n\t\t\t\tdestination.panelId !== source.panelId\n\t\t\t) {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\t}\n\tif (widgets[destination.id]) {\n\t\tif (widgets[destination.panelId]) {\n\t\t\tlet destinationPanelAttrs = widgets[destination.panelId];\n\t\t\tif (\n\t\t\t\tdestinationPanelAttrs.exclusive &&\n\t\t\t\tsource.panelId !== destination.panelId\n\t\t\t) {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\t}\n\treturn false;\n};\n\nconst isSamePositionInOriginal = (elements, panel, widget, hoverItemIndex) => {\n\tconst field = widget.attrs || widget || {};\n\tlet flag = false;\n\t(elements || []).forEach((element) => {\n\t\tif (element.elements) {\n\t\t\tif (\n\t\t\t\telement.attributes &&\n\t\t\t\tpanel &&\n\t\t\t\telement.attributes.name === panel.name\n\t\t\t) {\n\t\t\t\tconst item = element.elements[hoverItemIndex];\n\t\t\t\tif (\n\t\t\t\t\titem &&\n\t\t\t\t\titem.attributes &&\n\t\t\t\t\tfield &&\n\t\t\t\t\titem.attributes.name === field.name\n\t\t\t\t) {\n\t\t\t\t\tflag = true;\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (!flag && element.elements && element.elements.length) {\n\t\t\t\tconst result = isSamePositionInOriginal(\n\t\t\t\t\telement.elements,\n\t\t\t\t\tpanel,\n\t\t\t\t\twidget,\n\t\t\t\t\thoverItemIndex\n\t\t\t\t);\n\t\t\t\tif (result === true) {\n\t\t\t\t\tflag = true;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t});\n\treturn flag;\n};\n\nconst getTarget = (fieldTarget, itemTarget) => {\n\treturn fieldTarget || itemTarget;\n};\n\nconst isPanelTab = (field) => {\n\tconst { type, widgetAttrs } = field;\n\tif (type === TYPE.panel && widgetAttrs) {\n\t\tconst attrs = JSON.parse(widgetAttrs || \"{}\");\n\t\tif (attrs.tab === \"true\") {\n\t\t\treturn true;\n\t\t}\n\t}\n\treturn false;\n};\n\nconst getColSpan = (widget) => {\n\tconst attrs = JSON.parse(widget.widgetAttrs || \"{}\");\n\tconst defaultColspan = widget.type === TYPE.panel ? 12 : 6;\n\treturn attrs.colSpan || defaultColspan;\n};\n\nconst getCols = (widget) => {\n\tif ([TYPE.panel, TYPE.tabs].includes(widget.type)) {\n\t\treturn { cols: 12 };\n\t}\n\treturn {};\n};\n\nexport const getMenuBuilder = (menuBuilder) => {\n\tif (menuBuilder) {\n\t\treturn {\n\t\t\tmenuBuilderTitle: menuBuilder.title,\n\t\t\tmenuBuilderParent: menuBuilder.parentMenu,\n\t\t};\n\t}\n\treturn {};\n};\n\nexport const generateCustomModelSchema = (\n\tfields = [],\n\trecord,\n\ttypeLateral = \"\",\n\tformType = \"form\"\n) => {\n\tlet flag = false;\n\tconst _widgets = {};\n\tconst formItems = [];\n\tconst tabItems = [];\n\tlet _panelId;\n\tfields &&\n\t\tfields.length &&\n\t\tfields.forEach((f) => {\n\t\t\tconst _ID = _.uniqueId();\n\t\t\tconst isTab = isPanelTab(f);\n\t\t\tif ([TYPE.panel, TYPE.tabs].includes(f.type)) {\n\t\t\t\tflag = true;\n\t\t\t\t_panelId = _ID;\n\t\t\t\tf[\"items\"] = [];\n\t\t\t\tf[\"layout\"] = \"grid\";\n\t\t\t} else if (!flag) {\n\t\t\t\tconst _item = _widgets[_panelId];\n\t\t\t\tif (_item) {\n\t\t\t\t\t_item.items.push(_ID);\n\t\t\t\t\t_widgets[_panelId] = {\n\t\t\t\t\t\t..._widgets[_panelId],\n\t\t\t\t\t\titems: [..._item.items],\n\t\t\t\t\t};\n\t\t\t\t} else {\n\t\t\t\t\tflag = true;\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (flag) {\n\t\t\t\tflag = false;\n\t\t\t\tif (isTab) {\n\t\t\t\t\ttabItems.push(_ID);\n\t\t\t\t} else {\n\t\t\t\t\tformItems.push(_ID);\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (f.selectionText && f.selectionText.length) {\n\t\t\t\tf.updateSelection = true;\n\t\t\t}\n\t\t\t_widgets[_ID] = {\n\t\t\t\t...f,\n\t\t\t\tcolSpan: getColSpan(f),\n\t\t\t\t...getCols(f),\n\t\t\t\ttype: `${f.type}${typeLateral}`,\n\t\t\t};\n\t\t});\n\t// add tab panel if tabItems has length\n\tif (tabItems.length) {\n\t\tconst _ID = _.uniqueId();\n\t\tconst field = {\n\t\t\titems: [...tabItems],\n\t\t\ttype: TYPE.tabs,\n\t\t\ttitle: \"Tab Panel\",\n\t\t};\n\t\tformItems.push(_ID);\n\t\t_widgets[_ID] = { ...field };\n\t}\n\tconst form = formType === \"customForm\" ? IDS.customForm : IDS.form;\n\tconst schema = {\n\t\twidgets: {\n\t\t\t[form]: {\n\t\t\t\ttype: formType,\n\t\t\t\tcols: 12,\n\t\t\t\t...record,\n\t\t\t\t...getMenuBuilder(record ? record.menuBuilder : undefined),\n\t\t\t},\n\t\t\t[IDS.dumpField]: {\n\t\t\t\ttype: TYPE.dumpField,\n\t\t\t\tname: \"\",\n\t\t\t},\n\t\t\t..._widgets,\n\t\t},\n\t\titems: [...formItems],\n\t};\n\treturn schema;\n};\n\nfunction processXML(xmlString, indent) {\n\treturn format(xmlString);\n}\n\nconst replacer = (key, modelType) => {\n\tconst camelToDash = [\"formView\", \"gridView\", \"minSize\", \"maxSize\"];\n\tconst xField = [\"bind\"];\n\tif (modelType === MODEL_TYPE.BASE) {\n\t\tconst keyReplacer = {\n\t\t\ttargetModel: \"target\",\n\t\t\tminSize: \"min\",\n\t\t\tmaxSize: \"max\",\n\t\t};\n\t\tkey = keyReplacer[key] || key;\n\t\tif (camelToDash.includes(key)) {\n\t\t\tkey = camelToDashCase(key);\n\t\t}\n\t\tif (xField.includes(key)) {\n\t\t\tkey = `x-${camelToDashCase(key)}`;\n\t\t}\n\t}\n\treturn key;\n};\n\nconst editorKeyReplacer = (key, modelType) => {\n\tconst keyReplacer = {\n\t\ttargetModel: \"target\",\n\t\tminSize: \"min\",\n\t\tmaxSize: \"max\",\n\t};\n\tif (modelType === MODEL_TYPE.BASE) {\n\t\tconst _keyIndex = Object.values(keyReplacer).findIndex((v) => v === key);\n\t\tif (_keyIndex !== -1) {\n\t\t\tkey = Object.keys(keyReplacer)[_keyIndex];\n\t\t}\n\t}\n\treturn key;\n};\n\nfunction isDummyField(widget) {\n\tconst modelTypes = [];\n\tmodelFields.forEach((f) => {\n\t\tconst { value = [] } = f;\n\t\tconst types = value.map((v) => v.serverType);\n\t\tmodelTypes.push(...types);\n\t});\n\treturn widget.serverType === \"field\" && modelTypes.includes(widget.type);\n}\n\nfunction valueConverter(value, key) {\n\tconst ltKeys = [\"title\", \"text\"];\n\tif (value && ltKeys.includes(key)) {\n\t\tvalue = value.replace(/</g, \"&lt;\");\n\t}\n\treturn value;\n}\n\nconst getWidgetAttrs = (attrs, exempt = [], modelType) => {\n\tconst widgetAttrs = {};\n\tconst exemptedAttrs = [\n\t\t\"version\",\n\t\t\"type\",\n\t\t\"typeName\",\n\t\t\"label\",\n\t\t\"items\",\n\t\t\"serverType\",\n\t\t\"layout\",\n\t\t\"cols\",\n\t\t\"isCoreField\",\n\t\t\"isModelField\",\n\t\t\"relationship\",\n\t\t\"current\",\n\t\t\"autoTitle\",\n\t\t\"metaModel\",\n\t\t\"targetSearch\",\n\t\t\"editorType\",\n\t\t\"appBuilder\",\n\t\t...exempt,\n\t];\n\tif (attrs.serverType !== \"field\") {\n\t\texemptedAttrs.push(\"targetModel\", \"targetName\", \"target\");\n\t}\n\tObject.keys(attrs).forEach((key) => {\n\t\tif (!exemptedAttrs.includes(key) && attrs[key] !== \"\") {\n\t\t\tlet flag = true;\n\t\t\tif (modelType === MODEL_TYPE.ENTITY && !attrs[key]) {\n\t\t\t\tflag = false;\n\t\t\t}\n\t\t\tif (modelType === MODEL_TYPE.BASE && isDefaultValue(key, attrs[key])) {\n\t\t\t\tflag = false;\n\t\t\t}\n\t\t\tif (flag) {\n\t\t\t\tif (key === \"dummyType\") {\n\t\t\t\t\twidgetAttrs[\"type\"] = attrs[key];\n\t\t\t\t} else {\n\t\t\t\t\twidgetAttrs[replacer(key, modelType)] = valueConverter(\n\t\t\t\t\t\tattrs[key],\n\t\t\t\t\t\tkey\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t});\n\t// check for dummy model field\n\tif (attrs.type === TYPE.panelInclude) {\n\t\tif (typeof attrs.view === \"object\") {\n\t\t\twidgetAttrs.view = attrs.view.name;\n\t\t}\n\t}\n\tif (attrs.isModelField || isDummyField(attrs)) {\n\t\twidgetAttrs[\"type\"] = attrs.type;\n\t}\n\tif (attrs.type === TYPE.panelRelated) {\n\t\twidgetAttrs[\"name\"] = attrs.field;\n\t}\n\tif (widgetAttrs.name) {\n\t\t// change array field index\n\t\tconst squareIndex = widgetAttrs.name.indexOf(\"[\");\n\t\tif (squareIndex !== -1) {\n\t\t\twidgetAttrs.name = widgetAttrs.name.substring(0, squareIndex);\n\t\t}\n\t}\n\treturn widgetAttrs;\n};\n\nconst getCustomWidget = (widget, exempt = []) => {\n\tconst _widget = {};\n\tconst exemptedAttrs = [\n\t\t\"image\",\n\t\t\"serverType\",\n\t\t\"isModelField\",\n\t\t\"isCoreField\",\n\t\t\"current\",\n\t\t...exempt,\n\t];\n\tObject.keys(widget).forEach((key) => {\n\t\tif (!exemptedAttrs.includes(key)) {\n\t\t\tif (key === \"type\" && [\"item\", \"field\"].includes(widget[key])) {\n\t\t\t\t_widget[key] = widget[\"serverType\"];\n\t\t\t} else {\n\t\t\t\t_widget[key] = widget[key] === \"\" ? null : widget[key];\n\t\t\t}\n\t\t}\n\t});\n\treturn _widget;\n};\n\nconst getCustomModelFields = (\n\titems = [],\n\twidgets,\n\tadditionalProps = {},\n\tcountSequence = false,\n\tsequence = 0\n) => {\n\tconst fields = [];\n\titems.forEach((item) => {\n\t\tif (widgets[item]) {\n\t\t\tlet _widget = { ...widgets[item] };\n\t\t\tconst exempt = [];\n\t\t\tif (![\"dump_field\", \"form\"].includes(_widget.type)) {\n\t\t\t\tif (_widget.type !== TYPE.tabs) {\n\t\t\t\t\tif (typeof _widget.id === \"symbol\") {\n\t\t\t\t\t\tdelete _widget.id;\n\t\t\t\t\t}\n\t\t\t\t\tif (_widget.showTitle !== false) {\n\t\t\t\t\t\tdelete _widget.showTitle;\n\t\t\t\t\t}\n\t\t\t\t\tif (countSequence) {\n\t\t\t\t\t\t_widget.sequence = sequence;\n\t\t\t\t\t\tsequence++;\n\t\t\t\t\t}\n\t\t\t\t\tif (_widget.serverType === \"spacer\") {\n\t\t\t\t\t\texempt.push(\"title\");\n\t\t\t\t\t}\n\t\t\t\t\tfields.push({\n\t\t\t\t\t\t...getCustomWidget(_widget, exempt),\n\t\t\t\t\t\t...additionalProps,\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\tif (_widget.items && _widget.items.length) {\n\t\t\t\t\tconst modelFields = getCustomModelFields(\n\t\t\t\t\t\t_widget.items,\n\t\t\t\t\t\twidgets,\n\t\t\t\t\t\tadditionalProps,\n\t\t\t\t\t\tcountSequence,\n\t\t\t\t\t\tsequence\n\t\t\t\t\t);\n\t\t\t\t\tfields.push(...modelFields.fields);\n\t\t\t\t\tsequence = modelFields.sequence;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t});\n\treturn { fields, sequence };\n};\n\nconst isCreatedFromStudio = ({ xmlId = null, extension }) => {\n\tif (xmlId && !extension) {\n\t\tconst index = xmlId.indexOf(\"studio-\");\n\t\tif (index === 0) {\n\t\t\treturn true;\n\t\t}\n\t}\n\treturn false;\n};\n\nconst getFormProperties = (form, exempt = []) => {\n\tconst except = [\"type\", \"cols\", \"items\", ...exempt];\n\tconst properties = {};\n\tObject.keys(form).forEach((key) => {\n\t\tif (!except.includes(key) && form[key] !== \"\") {\n\t\t\tproperties[key] = form[key];\n\t\t}\n\t});\n\treturn properties;\n};\n\nconst getEntityField = (type) => {\n\tconst realType = { localdatetime: \"datetime\", localdate: \"date\" };\n\tconst index = type.indexOf(\"Entity\");\n\tlet _type = index === -1 ? type : type.substring(0, index);\n\t_type = realType[_type] || _type;\n\treturn _type;\n};\n\n/**\n * Checks whether value is same as default value or not\n * for given property name.\n * Returns boolean true/false\n * @param {string} name\n * @param {string} value\n */\nconst isAttrHasDefaultValue = (name, value) => {\n\tconst defaultValue = DEFAULT_VALUE[name];\n\tif (defaultValue !== undefined && `${defaultValue}` === `${value}`) {\n\t\treturn true;\n\t}\n\treturn false;\n};\n\nexport const getProperty = (\n\tname,\n\tvalue,\n\tparentField,\n\tparentValue,\n\tshouldCheckParent = true\n) => {\n\tconst obj = { [name]: value };\n\tif (shouldCheckParent) {\n\t\tconst _value =\n\t\t\ttypeof parentValue === \"string\"\n\t\t\t\t? JSON.parse(parentValue)\n\t\t\t\t: parentValue || {};\n\t\tif (parentField && ![undefined, \"\", null].includes(value)) {\n\t\t\t// check for default value\n\t\t\tif (isAttrHasDefaultValue(name, value)) {\n\t\t\t\tdelete _value[name];\n\t\t\t\treturn { [parentField]: JSON.stringify({ ..._value }) };\n\t\t\t}\n\t\t\tconst _obj = { [name]: `${value}` };\n\t\t\treturn { [parentField]: JSON.stringify({ ..._value, ..._obj }) };\n\t\t} else if (parentField && (!value || value === \"\")) {\n\t\t\tdelete _value[name];\n\t\t\treturn { [parentField]: JSON.stringify({ ..._value }) };\n\t\t}\n\t}\n\tif (name === \"showTitle\" && value === true) {\n\t\treturn { showTitle: undefined };\n\t}\n\treturn obj;\n};\n\nexport const getPropertyValue = (\n\tlist,\n\tname,\n\tparentField,\n\tdefaultValue,\n\tshouldCheckParent = true\n) => {\n\tif (shouldCheckParent && parentField) {\n\t\tif (list[parentField]) {\n\t\t\tconst field = JSON.parse(list[parentField]);\n\t\t\treturn [undefined, null].includes(field[name])\n\t\t\t\t? defaultValue\n\t\t\t\t: field[name];\n\t\t}\n\t\treturn defaultValue || null;\n\t}\n\treturn [undefined, null].includes(list[name]) ? defaultValue : list[name];\n};\n\nconst getDefaultProperties = (modelType, entityType, entityModel) => {\n\tswitch (modelType) {\n\t\tcase MODEL_TYPE.CUSTOM:\n\t\t\treturn { formWidth: \"large\" };\n\t\tcase MODEL_TYPE.BASE: {\n\t\t\tconst props = { width: \"large\" };\n\t\t\tif (entityType === ENTITY_TYPE.ENTITY) {\n\t\t\t\tprops[\"model\"] = `${entityModel.packageName}.${entityModel.name}`;\n\t\t\t}\n\t\t\treturn props;\n\t\t}\n\t\tdefault:\n\t\t\treturn {};\n\t}\n};\n\nconst getEntityModel = (entityModel) => {\n\treturn `${entityModel.packageName}.${entityModel.name}`;\n};\n\nconst getPatchList = (xmlJson) => {\n\tif (xmlJson) {\n\t\tconst { elements = [] } = xmlJson;\n\t\tif (elements[0]) {\n\t\t\treturn elements[0].elements || [];\n\t\t}\n\t}\n\treturn [];\n};\n\nconst filterFormPatch = (patchList) => {\n\treturn patchList.filter((element) => element.attributes.target === \"/\");\n};\n\nconst getCurrentFormAttributes = (xml) => {\n\tconst { elements = [] } = xml;\n\treturn elements[0].attributes || {};\n};\n\nconst mergeFormAttributes = (patchList, formPatch) => {\n\tconst index = patchList.findIndex(\n\t\t(element) => element.attributes.target === \"/\"\n\t);\n\tconst targetIndex = index === -1 ? 0 : index;\n\tconst remove = index === -1 ? 0 : 1;\n\tif (Object.keys(formPatch).length) {\n\t\tpatchList.splice(targetIndex, remove, { ...formPatch });\n\t} else if (index !== -1) {\n\t\tpatchList.splice(index, 1);\n\t}\n\treturn patchList;\n};\n\nconst camelToDashCase = (string, caseString = \"-\") => {\n\treturn string.replace(/[A-Z]/g, (m) => caseString + m.toLowerCase());\n};\n\nconst dashToCamelCase = (string) => {\n\treturn string.replace(/-([a-z])/g, function (g) {\n\t\treturn g[1].toUpperCase();\n\t});\n};\n\nconst isDefaultValue = (field, value) => {\n\tconst fieldValue = DEFAULT_VALUE[field];\n\tif ([true, false].includes(fieldValue) && `${value}` === `${fieldValue}`) {\n\t\treturn true;\n\t}\n\treturn false;\n};\n\nconst getReferenceProperty = (widgetType) => {\n\tconst referenceProperty = {\n\t\t[TYPE.panelInclude]: \"view\",\n\t};\n\tconst refProp = referenceProperty[widgetType];\n\treturn refProp || \"name\";\n};\n\nconst getEntityItems = (items) => {\n\tconst widgets = [];\n\tconst itemList = [];\n\titems.forEach((f) => {\n\t\tconst _ID = _.uniqueId();\n\t\twidgets[_ID] = { ...f.attributes, type: `${f.name}Entity` };\n\t\titemList.push(_ID);\n\t});\n\treturn { widgets, itemList };\n};\n\nconst generateEntityModelSchema = (xml, record) => {\n\tconst jsonData = JSON.parse(\n\t\tconvert.xml2json(xml, {\n\t\t\tcompact: false,\n\t\t\tfullTagEmptyElement: false,\n\t\t})\n\t);\n\tconst { elements = [], ...formData } = jsonData.elements[0];\n\tconst { itemList, widgets } = getEntityItems(elements);\n\tconst schema = {\n\t\twidgets: {\n\t\t\t[IDS.form]: {\n\t\t\t\ttype: TYPE.form,\n\t\t\t\tcols: 12,\n\t\t\t\t...formData.attributes,\n\t\t\t\tpackageName: record.packageName,\n\t\t\t},\n\t\t\t[IDS.dumpField]: {\n\t\t\t\ttype: TYPE.dumpField,\n\t\t\t\tname: \"\",\n\t\t\t},\n\t\t\t...widgets,\n\t\t},\n\t\titems: [...itemList],\n\t};\n\treturn schema;\n};\n\nconst getEntityModelFields = (xml) => {\n\tconst jsonData = JSON.parse(\n\t\tconvert.xml2json(xml, {\n\t\t\tcompact: false,\n\t\t\tfullTagEmptyElement: false,\n\t\t})\n\t);\n\tconst { elements = [] } = jsonData.elements[0];\n\tconst fields = elements.map((element) => {\n\t\treturn {\n\t\t\ttype: element.name,\n\t\t\tname: element.attributes.name,\n\t\t\ttz: element.attributes.tz,\n\t\t};\n\t});\n\treturn fields;\n};\n\nconst getEntityViewItems = (items) => {\n\tlet fields = [];\n\titems.forEach((item) => {\n\t\tif (item.type === \"field\") {\n\t\t\tfields.push(item.name);\n\t\t}\n\t\tif (item.items) {\n\t\t\tconst _fields = getEntityViewItems(item.items);\n\t\t\tfields.push(..._fields);\n\t\t}\n\t});\n\treturn fields;\n};\n\nconst checkTarget = (target, checkString, which) => {\n\t// 2 for parent check and 3 for itself/child element check\n\tconst targetSplit = target.split(\"/\");\n\tif (which) {\n\t\tif (targetSplit[which] === checkString) {\n\t\t\treturn true;\n\t\t}\n\t\treturn false;\n\t}\n\treturn target === checkString;\n};\n\nconst exploreTarget = (target, which = 3) => {\n\t// 2 for parent check and 3 for itself/child element check\n\tconst targetSplit = target.split(\"/\");\n\tconst length = targetSplit.length;\n\tlet parent = length > 3 ? targetSplit[length - 2] : targetSplit[length - 1];\n\tlet self = length > 3 ? targetSplit[length - 1] : undefined;\n\treturn { parent, self };\n};\n\nconst getViews = (list, viewName) => {\n\tlet view = list.find((v) => v.computed === true);\n\tlet originalXML = list.find(\n\t\t(v) => v.computed !== true && v.extension !== true\n\t);\n\tconst extensionXML = list.find(\n\t\t(v) => v.extension === true && v.xmlId === `studio-${viewName}`\n\t);\n\treturn {\n\t\tview: view || originalXML,\n\t\toriginalXML,\n\t\textensionXML,\n\t};\n};\n\nconst getElementTypes = (name, field, _type) => {\n\tlet serverType;\n\tlet type;\n\tif (field) {\n\t\tserverType = field.type.toLowerCase();\n\t\ttype = name;\n\t} else {\n\t\tserverType = name;\n\t\ttype = _type ? _type : name === \"field\" ? undefined : name; // if element is field then set default type string\n\t}\n\treturn {\n\t\tserverType: TYPE_REPLACER[serverType] || serverType,\n\t\ttype: TYPE_REPLACER[type] || type,\n\t};\n};\n\nconst getTitle = (attributes, field) => {\n\tif (attributes.title) {\n\t\treturn { title: attributes.title };\n\t}\n\tif (field?.label) {\n\t\treturn { autoTitle: field.label };\n\t}\n\tif (attributes.name) {\n\t\treturn { autoTitle: camelToDashCase(attributes.name, \" \") };\n\t}\n\treturn {};\n};\n\nconst generateViewFromJson = ({\n\tview,\n\tfields,\n\toriginal,\n\textensionXML,\n\tattrsList,\n}) => {\n\tconst { elements } = view;\n\n\tconst getElementName = (attributes, parent, itemList, elementType) => {\n\t\tconst nameObj = { name: attributes.name };\n\t\treturn nameObj;\n\t};\n\n\tconst getElementToWidget = (element, fields, parent, itemList) => {\n\t\tlet widget = {};\n\t\tlet field;\n\t\tif (element) {\n\t\t\tconst { type, ...attributes } = element.attributes || {};\n\t\t\tif (element.name.indexOf(\"panel\") === -1) {\n\t\t\t\tfield = fields.find((f) => f.name === attributes.name);\n\t\t\t}\n\t\t\tconst attrs = {};\n\t\t\tObject.keys(attributes).map((key) => {\n\t\t\t\tlet _key = key;\n\t\t\t\tif (key.indexOf(\"x-\") === 0) {\n\t\t\t\t\t_key = key.substring(2);\n\t\t\t\t}\n\t\t\t\tattrs[editorKeyReplacer(dashToCamelCase(_key), MODEL_TYPE.BASE)] =\n\t\t\t\t\tattributes[key];\n\t\t\t\treturn undefined;\n\t\t\t});\n\t\t\tconst targetModel = getTarget(\n\t\t\t\tfield?.target || field?.targetModel,\n\t\t\t\tattributes.target\n\t\t\t);\n\t\t\twidget = {\n\t\t\t\t...attrs,\n\t\t\t\tcolSpan: Number(attributes.colSpan || 6),\n\t\t\t\t...getElementName(attributes, parent, itemList, element.name),\n\t\t\t\t...getElementTypes(element.name, field, type),\n\t\t\t\t...getTitle(attributes, field),\n\t\t\t};\n\t\t\tif (targetModel) {\n\t\t\t\twidget.targetModel = targetModel;\n\t\t\t}\n\t\t\tif (\n\t\t\t\telement.name &&\n\t\t\t\t(element.name.indexOf(TYPE.panel) >= 0 ||\n\t\t\t\t\t[TYPE.menubar, TYPE.toolbar].includes(element.name))\n\t\t\t) {\n\t\t\t\twidget.colSpan = Number(attributes.colSpan || 12);\n\t\t\t\twidget.cols = 12;\n\t\t\t\twidget.layout = \"grid\";\n\t\t\t\twidget.serverType =\n\t\t\t\t\twidget.type === \"panel\" && widget.tab === true\n\t\t\t\t\t\t? TYPE.tabs\n\t\t\t\t\t\t: widget.serverType || widget.type;\n\t\t\t}\n\t\t\t// widget.type =\n\t\t}\n\t\treturn { widget, field };\n\t};\n\n\tconst getSpecialType = (element) => {\n\t\treturn element.name;\n\t};\n\tconst getXMLToViewItems = (elements = [], fields, parent) => {\n\t\tconst exclude = [\"panel-mail\"];\n\t\tlet _widgets = {};\n\t\tconst itemList = [];\n\t\tconst fieldList = [];\n\t\telements.forEach((element) => {\n\t\t\tif (element.attributes && `${element.attributes.json}` === \"true\") {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tif (!exclude.includes(element.name) && element.type !== \"cdata\") {\n\t\t\t\tconst _ID = _.uniqueId();\n\t\t\t\tconst { widget, field } = getElementToWidget(\n\t\t\t\t\telement,\n\t\t\t\t\tfields,\n\t\t\t\t\tparent,\n\t\t\t\t\titemList\n\t\t\t\t);\n\t\t\t\tif (field) {\n\t\t\t\t\tfieldList.push(field);\n\t\t\t\t}\n\t\t\t\titemList.push(_ID);\n\t\t\t\tif (element.name && element.name.indexOf(TYPE.panel) >= 0) {\n\t\t\t\t\twidget.items = [];\n\t\t\t\t}\n\t\t\t\tif (element.elements && element.name !== \"field\") {\n\t\t\t\t\tconst items = getXMLToViewItems(\n\t\t\t\t\t\telement.elements,\n\t\t\t\t\t\tfields,\n\t\t\t\t\t\telement.attributes\n\t\t\t\t\t);\n\t\t\t\t\t_widgets = { ..._widgets, ...items._widgets };\n\t\t\t\t\twidget.items = [...items.itemList];\n\t\t\t\t\tfieldList.push(...items.fieldList);\n\t\t\t\t}\n\t\t\t\tif (element.elements && element.name === \"field\") {\n\t\t\t\t\t// check for viewer\n\t\t\t\t\tconst type = getSpecialType(element.elements[0]);\n\t\t\t\t\tif (type) {\n\t\t\t\t\t\twidget.type = type;\n\t\t\t\t\t\twidget.elements = element.elements;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\t// override with meta attrs list\n\t\t\t\tif (widget.name) {\n\t\t\t\t\tconst list = (attrsList || []).filter(\n\t\t\t\t\t\t(attr) => attr.field === widget.name\n\t\t\t\t\t);\n\t\t\t\t\tlist.forEach((attr) => {\n\t\t\t\t\t\tif ([\"selection-in\"].includes(attr.name)) {\n\t\t\t\t\t\t\twidget[attr.name] = attr.value;\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\twidget[\n\t\t\t\t\t\t\t\teditorKeyReplacer(dashToCamelCase(attr.name), MODEL_TYPE.BASE)\n\t\t\t\t\t\t\t] = attr.value;\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\t_widgets[_ID] = { ...widget };\n\t\t\t}\n\t\t});\n\t\treturn { _widgets, itemList, fieldList };\n\t};\n\n\tconst { itemList, _widgets, fieldList } = getXMLToViewItems(elements, fields);\n\tconst form = _widgets[itemList[0]];\n\tconst items = form.items || [];\n\tdelete _widgets[itemList[0]];\n\t// const { items, ...rest } = view;\n\tconst schema = {\n\t\twidgets: {\n\t\t\t[IDS.form]: {\n\t\t\t\ttype: TYPE.form,\n\t\t\t\tcols: 12,\n\t\t\t\t...form,\n\t\t\t\titems: undefined,\n\t\t\t},\n\t\t\t[IDS.dumpField]: {\n\t\t\t\ttype: TYPE.dumpField,\n\t\t\t\tname: \"\",\n\t\t\t},\n\t\t\t..._widgets,\n\t\t},\n\t\titems,\n\t\tfieldList,\n\t};\n\treturn schema;\n};\n\nconst generateXMLToViewSchema = ({\n\tview,\n\tfields,\n\toriginal = false,\n\textensionXML,\n\tattrsList,\n}) => {\n\tconst { elements } = JSON.parse(\n\t\tconvert.xml2json(view.xml, {\n\t\t\tcompact: false,\n\t\t\tfullTagEmptyElement: false,\n\t\t})\n\t);\n\treturn generateViewFromJson({\n\t\tview: { elements },\n\t\tfields,\n\t\toriginal,\n\t\textensionXML,\n\t\tattrsList,\n\t});\n};\n\nconst getChangeList = (schema, extensionXml) => {\n\tconst list = [];\n\tconst { widgets } = schema;\n\tconst elems = getExtensionElements(extensionXml);\n\tconst widgetList = Object.values(widgets);\n\tconst widgetIds = Object.keys(widgets);\n\telems.forEach((json) => {\n\t\tconst { elements = [] } = json;\n\t\t// const object =\n\t\tconst moveElement = elements[0];\n\t\tif (moveElement && moveElement.attributes && moveElement.name === \"move\") {\n\t\t\tconst source = exploreTarget(moveElement.attributes.source);\n\t\t\tif (source.self) {\n\t\t\t\tconst index = source.self\n\t\t\t\t\t? widgetList.findIndex(\n\t\t\t\t\t\t\t(w) => `${w.type}[@name='${w.name}']` === source.self\n\t\t\t\t\t  )\n\t\t\t\t\t: widgetList.findIndex(\n\t\t\t\t\t\t\t(w) => `${w.type}[@name='${w.name}']` === source.parent\n\t\t\t\t\t  );\n\t\t\t\tif (widgetIds[index]) {\n\t\t\t\t\tlist.push(widgetIds[index]);\n\t\t\t\t}\n\t\t\t}\n\t\t\t// return {\n\t\t\t// \ttarget: attributes.target,\n\t\t\t// \tsource: moveElement.attributes.source,\n\t\t\t// \tposition: moveElement.attributes.position,\n\t\t\t// }\n\t\t}\n\t});\n\treturn list;\n};\n\nconst getExtensionElements = (xml) => {\n\tconst extensionJson = JSON.parse(\n\t\tconvert.xml2json(xml, {\n\t\t\tcompact: false,\n\t\t\tfullTagEmptyElement: false,\n\t\t})\n\t);\n\tconst elems = extensionJson.elements[0].elements;\n\treturn elems;\n};\n\nfunction randomString(length) {\n\tconst chars =\n\t\t\"0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ\";\n\tvar result = \"\";\n\tfor (var i = length; i > 0; --i)\n\t\tresult += chars[Math.floor(Math.random() * chars.length)];\n\treturn result;\n}\n\nexport const generateFieldUniqueTitle = ({ name, fieldName }) => {\n\tconst text = randomString(6);\n\treturn `studio:${text}:${fieldName}:${name}`;\n};\n\nexport function getDefaultGridFormName(str, isForm = false, isJson = false) {\n\tif (!str) return;\n\tif (isJson) {\n\t\treturn `custom-model-${str.name}-${isForm ? \"form\" : \"grid\"}`;\n\t}\n\tconst models = str.split(\".\");\n\tconst modelString = models[models.length - 1];\n\tif (!modelString) return;\n\tconst viewName = dasherize(modelString);\n\treturn `${viewName.toLowerCase()}-${isForm ? \"form\" : \"grid\"}`;\n}\n\nexport default {\n\tcamleCaseString,\n\ttranslate,\n\tprocessXML,\n\tgetWidgetAttrs,\n\tgetCustomModelFields,\n\tisCreatedFromStudio,\n\tgetFormProperties,\n\tgetEntityField,\n\tgetDefaultProperties,\n\tgetPatchList,\n\tkeyReplacer: replacer,\n\tvalueConverter,\n\tfilterFormPatch,\n\tgetCurrentFormAttributes,\n\tmergeFormAttributes,\n\tcamelToDashCase,\n\tdashToCamelCase,\n\tisSamePositionInOriginal,\n\tgetWidgetType,\n\tisDefaultValue,\n\tgetReferenceProperty,\n\tgenerateEntityModelSchema,\n\tgetEntityModelFields,\n\tgetEntityModel,\n\tgetEntityViewItems,\n\tcheckTarget,\n\texploreTarget,\n\tgetViews,\n\tgenerateXMLToViewSchema,\n\tgenerateViewFromJson,\n\tgetChangeList,\n\tgetDefaultGridFormName,\n};\n","import React from \"react\";\nimport classNames from \"classnames\";\nimport { GRID_SIZE, PANEL_TYPE, TYPE } from \"../constants\";\nimport { useStore } from \"../store/context\";\n\nconst getColSpan = (col, parentItemSpan) => {\n\tconst widgetAttrs = col.widgetAttrs ? JSON.parse(col.widgetAttrs) : {};\n\tif (widgetAttrs.colSpan) {\n\t\treturn Number(widgetAttrs.colSpan);\n\t} else {\n\t\treturn parentItemSpan || col.colSpan || 6;\n\t}\n};\n\n// get Column cell CSS according to colSpan and Container size\nexport const getColumnCss = (columns, colSpan) => {\n\tconst [n, span] = [Number(columns), Number(colSpan)];\n\tif (n > GRID_SIZE.max) return \"\";\n\treturn `col-span col-${\n\t\tspan > n ? GRID_SIZE.max : Math.floor((GRID_SIZE.max * span) / n)\n\t}`;\n};\n\nconst DEFAULTS = {\n\tITEM_COLSPAN: 1,\n\tMAX_SIZE: 12,\n};\n\nconst getFullGrid = (\n\titems,\n\tsize = DEFAULTS.MAX_SIZE,\n\tisStackLayout,\n\tparentItemSpan\n) => {\n\tconst grid = [];\n\tconst isStack = size === 1 || isStackLayout;\n\tconst gridSize = isStack ? DEFAULTS.MAX_SIZE : size;\n\tlet row = [];\n\tlet span = 0;\n\n\tconst getItemColspan = (colSpan) => {\n\t\t// if(Number(parentItemSpan)) {\n\t\t// \treturn Number(parentItemSpan)\n\t\t// }\n\t\treturn Number(colSpan);\n\t};\n\n\tif (!items.length) {\n\t\tconst $cell = { id: 0, separator: true };\n\t\tconst dummy = {\n\t\t\tid: 0,\n\t\t\tdummy: true,\n\t\t\tdummyPanel: true,\n\t\t\tcolSpan: isStack ? 12 : 6,\n\t\t};\n\t\treturn [[$cell, dummy, $cell].concat(isStack ? [] : [dummy, $cell])];\n\t}\n\n\tconst addRow = ({ item, overflow = false } = {}) => {\n\t\tif (overflow) {\n\t\t\tconst fillColspan = gridSize - (span - getItemColspan(item.colSpan));\n\t\t\trow.push({\n\t\t\t\tid: 0,\n\t\t\t\tdummy: true,\n\t\t\t\tcolSpan: fillColspan,\n\t\t\t});\n\t\t}\n\t\tgrid.push(row);\n\t\trow = [];\n\t\tspan = 0;\n\t};\n\n\tconst addItem = (item) => row.push(item);\n\n\tfor (let i = 0; i < items.length; i++) {\n\t\tconst item = Object.assign(\n\t\t\titems[i],\n\t\t\tisStack\n\t\t\t\t? { colSpan: DEFAULTS.MAX_SIZE }\n\t\t\t\t: { colSpan: getItemColspan(getColSpan(items[i], parentItemSpan)) }\n\t\t);\n\t\tconst { colSpan: itemSpan = DEFAULTS.ITEM_COLSPAN } = item;\n\t\tconst isLastItem = i === items.length - 1;\n\t\tspan += getItemColspan(itemSpan);\n\t\tif (span > gridSize) {\n\t\t\taddRow({ item, overflow: true });\n\t\t\tspan = itemSpan;\n\t\t\taddItem(item);\n\t\t} else if (span === gridSize) {\n\t\t\trow.push(item);\n\t\t\taddRow({ item });\n\t\t} else {\n\t\t\trow.push(item);\n\t\t}\n\n\t\tif (isLastItem && row.length) {\n\t\t\tconst occupiedSpan = row.reduce(\n\t\t\t\t(total, { colSpan = DEFAULTS.ITEM_COLSPAN }) => total + colSpan,\n\t\t\t\t0\n\t\t\t);\n\t\t\tconst remainSpan = gridSize - occupiedSpan;\n\t\t\tif (remainSpan > 0) {\n\t\t\t\trow.push({\n\t\t\t\t\tid: 0,\n\t\t\t\t\tdummy: true,\n\t\t\t\t\tcolSpan: remainSpan,\n\t\t\t\t});\n\t\t\t}\n\t\t\tgrid.push(row);\n\t\t}\n\t}\n\n\tconst fullGrid = [];\n\tfor (let i = 0; i < grid.length; i++) {\n\t\tconst row = grid[i];\n\t\tconst draggable = ![TYPE.menubar, TYPE.toolbar].includes(row[0]?.type);\n\t\tconst upRow = [];\n\t\tconst midRow = [];\n\t\tconst addCell = ($row, options = { separator: true }) =>\n\t\t\t$row.push({\n\t\t\t\tid: 0,\n\t\t\t\tcolSpan: 1,\n\t\t\t\t...options,\n\t\t\t});\n\t\taddCell(upRow);\n\n\t\tdraggable &&\n\t\t\taddCell(midRow, {\n\t\t\t\trelatedColSpan: getColSpan(row[0], parentItemSpan),\n\t\t\t\tseparator: true,\n\t\t\t});\n\n\t\tfor (let j = 0; j < row.length; j++) {\n\t\t\tconst col = row[j];\n\t\t\tconst colSpan = getColSpan(col, parentItemSpan);\n\t\t\taddCell(upRow, { dummy: true, colSpan });\n\t\t\taddCell(midRow, col);\n\n\t\t\taddCell(upRow, { relatedColSpan: colSpan, separator: true });\n\t\t\tdraggable &&\n\t\t\t\taddCell(midRow, { relatedColSpan: colSpan, separator: true });\n\t\t}\n\n\t\tdraggable ? fullGrid.push(upRow) : fullGrid.push([]);\n\t\tfullGrid.push(midRow);\n\n\t\tif (i === grid.length - 1) {\n\t\t\tfullGrid.push(upRow);\n\t\t}\n\t}\n\treturn fullGrid;\n};\n\n// Grid Container embeds grid cell\nexport const GridContainer = ({ className, attrs, children, ...rest }) => (\n\t<div\n\t\tclassName={classNames(\n\t\t\tclassName,\n\t\t\tattrs.cols ? `grid-span grid-${attrs.cols}` : \"\"\n\t\t)}\n\t\t{...rest}\n\t>\n\t\t{children}\n\t</div>\n);\n\nexport function useGridWidget() {\n\tconst [WidgetComponent, setWidgetComponent] = React.useState(() => null);\n\n\tReact.useEffect(() => {\n\t\timport(\"./Widget\").then((module) =>\n\t\t\tsetWidgetComponent(() => module.default)\n\t\t);\n\t}, []);\n\n\treturn WidgetComponent;\n}\n\n/**\n * Grid Component handle layout of Container Components like panels\n */\nfunction Grid(props) {\n\tconst WidgetComponent = useGridWidget();\n\tconst {\n\t\tstate: { widgets: _widgets, customFieldWidgets },\n\t} = useStore();\n\tconst { className, items, attrs = {}, panelId, design } = props;\n\tlet widgets = props._type === \"customField\" ? customFieldWidgets : _widgets;\n\tconst widgetAttrs = JSON.parse(attrs.widgetAttrs || \"{}\");\n\tconst gridSize = Number(attrs.cols || 1);\n\tconst columns = gridSize * 2 + 1;\n\tconst isStackLayout = attrs.layout === PANEL_TYPE.stack;\n\tconst spacers = columns === 1 ? 0 : columns / 2 + 1;\n\tconst spacerWidth = design ? 1 : 0; //%\n\tconst cols = (columns - 1) / 2;\n\tconst colWidth = (100 - spacers * spacerWidth) / cols;\n\tconst itemSpan = widgetAttrs?.itemSpan;\n\tconst rows = React.useMemo(() => {\n\t\tlet cellIndice = 0;\n\t\tconst childs = items.map((x) =>\n\t\t\tObject.assign({}, widgets[x] || {}, { id: x })\n\t\t);\n\t\treturn getFullGrid(childs, gridSize, isStackLayout, itemSpan).map(\n\t\t\t(columns, rowIndex) => {\n\t\t\t\tlet span = 0;\n\t\t\t\treturn columns.map((c) => {\n\t\t\t\t\tlet columnIndex = span;\n\t\t\t\t\tspan += c.separator ? 0 : Number(c.colSpan || 1);\n\t\t\t\t\treturn { ...c, rowIndex, columnIndex, cellIndice: cellIndice++ };\n\t\t\t\t});\n\t\t\t}\n\t\t);\n\t}, [items, widgets, gridSize, isStackLayout, itemSpan]);\n\n\tconst gridRows = rows.reduce((arr, row) => arr.concat(row), []);\n\treturn (\n\t\t<GridContainer {...{ attrs, className }}>\n\t\t\t<table cellPadding=\"0\" cellSpacing=\"0\">\n\t\t\t\t{design && (\n\t\t\t\t\t<colgroup>\n\t\t\t\t\t\t{isStackLayout ? (\n\t\t\t\t\t\t\t<col width={\"100%\"} />\n\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\tnew Array(columns)\n\t\t\t\t\t\t\t\t.fill(0)\n\t\t\t\t\t\t\t\t.map((col, i) => (\n\t\t\t\t\t\t\t\t\t<col\n\t\t\t\t\t\t\t\t\t\tkey={i}\n\t\t\t\t\t\t\t\t\t\twidth={`${i % 2 === 1 ? colWidth : spacerWidth}%`}\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t))\n\t\t\t\t\t\t)}\n\t\t\t\t\t</colgroup>\n\t\t\t\t)}\n\t\t\t\t<tbody>\n\t\t\t\t\t{rows.map((cols, rowIndex) => (\n\t\t\t\t\t\t<tr\n\t\t\t\t\t\t\tclassName={rowIndex % 2 === 0 ? \"empty-row\" : \"fill-row\"}\n\t\t\t\t\t\t\tkey={rowIndex}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{cols.map(\n\t\t\t\t\t\t\t\t(\n\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\tid,\n\t\t\t\t\t\t\t\t\t\tcolSpan,\n\t\t\t\t\t\t\t\t\t\tcellIndice: indice,\n\t\t\t\t\t\t\t\t\t\tcolumnIndex,\n\t\t\t\t\t\t\t\t\t\tseparator,\n\t\t\t\t\t\t\t\t\t\trelatedColSpan,\n\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\ti\n\t\t\t\t\t\t\t\t) => {\n\t\t\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t\t\t<td\n\t\t\t\t\t\t\t\t\t\t\tclassName={separator ? \"separator\" : \"\"}\n\t\t\t\t\t\t\t\t\t\t\tkey={indice}\n\t\t\t\t\t\t\t\t\t\t\tcolSpan={colSpan > 1 ? colSpan * 2 - 1 : colSpan}\n\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t{WidgetComponent && (\n\t\t\t\t\t\t\t\t\t\t\t\t<WidgetComponent\n\t\t\t\t\t\t\t\t\t\t\t\t\tdesign={design}\n\t\t\t\t\t\t\t\t\t\t\t\t\tmeta={{\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tisSeparator: Boolean(separator),\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tcolSpan,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\trow: rowIndex,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tcol: i,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tcolIndex: columnIndex,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tgrid: gridRows,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\ttotal: columns,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\trelatedColSpan: relatedColSpan,\n\t\t\t\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t\t\t\tpanelId={panelId}\n\t\t\t\t\t\t\t\t\t\t\t\t\tkey={indice}\n\t\t\t\t\t\t\t\t\t\t\t\t\tid={id}\n\t\t\t\t\t\t\t\t\t\t\t\t\tindex={indice}\n\t\t\t\t\t\t\t\t\t\t\t\t\tpanelColumns={attrs.cols}\n\t\t\t\t\t\t\t\t\t\t\t\t\t_type={props._type}\n\t\t\t\t\t\t\t\t\t\t\t\t\terrorList={props.errorList}\n\t\t\t\t\t\t\t\t\t\t\t\t\tcanRemove={props.canRemove}\n\t\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t</tr>\n\t\t\t\t\t))}\n\t\t\t\t</tbody>\n\t\t\t</table>\n\t\t</GridContainer>\n\t);\n}\n\nexport default Grid;\n","const fontAwesome = [\n\t\"fa-500px\",\n\t\"fa-address-book\",\n\t\"fa-address-book-o\",\n\t\"fa-address-card\",\n\t\"fa-address-card-o\",\n\t\"fa-adjust\",\n\t\"fa-adn\",\n\t\"fa-align-center\",\n\t\"fa-align-justify\",\n\t\"fa-align-left\",\n\t\"fa-align-right\",\n\t\"fa-amazon\",\n\t\"fa-ambulance\",\n\t\"fa-american-sign-language-interpreting\",\n\t\"fa-anchor\",\n\t\"fa-android\",\n\t\"fa-angellist\",\n\t\"fa-angle-double-down\",\n\t\"fa-angle-double-left\",\n\t\"fa-angle-double-right\",\n\t\"fa-angle-double-up\",\n\t\"fa-angle-down\",\n\t\"fa-angle-left\",\n\t\"fa-angle-right\",\n\t\"fa-angle-up\",\n\t\"fa-apple\",\n\t\"fa-archive\",\n\t\"fa-area-chart\",\n\t\"fa-arrow-circle-down\",\n\t\"fa-arrow-circle-left\",\n\t\"fa-arrow-circle-o-down\",\n\t\"fa-arrow-circle-o-left\",\n\t\"fa-arrow-circle-o-right\",\n\t\"fa-arrow-circle-o-up\",\n\t\"fa-arrow-circle-right\",\n\t\"fa-arrow-circle-up\",\n\t\"fa-arrow-down\",\n\t\"fa-arrow-left\",\n\t\"fa-arrow-right\",\n\t\"fa-arrow-up\",\n\t\"fa-arrows\",\n\t\"fa-arrows-alt\",\n\t\"fa-arrows-h\",\n\t\"fa-arrows-v\",\n\t\"fa-asl-interpreting\",\n\t\"fa-assistive-listening-systems\",\n\t\"fa-asterisk\",\n\t\"fa-at\",\n\t\"fa-audio-description\",\n\t\"fa-automobile\",\n\t\"fa-backward\",\n\t\"fa-balance-scale\",\n\t\"fa-ban\",\n\t\"fa-bandcamp\",\n\t\"fa-bank\",\n\t\"fa-bar-chart\",\n\t\"fa-bar-chart-o\",\n\t\"fa-barcode\",\n\t\"fa-bars\",\n\t\"fa-bath\",\n\t\"fa-bathtub\",\n\t\"fa-battery\",\n\t\"fa-battery-0\",\n\t\"fa-battery-1\",\n\t\"fa-battery-2\",\n\t\"fa-battery-3\",\n\t\"fa-battery-4\",\n\t\"fa-battery-empty\",\n\t\"fa-battery-full\",\n\t\"fa-battery-half\",\n\t\"fa-battery-quarter\",\n\t\"fa-battery-three-quarters\",\n\t\"fa-bed\",\n\t\"fa-beer\",\n\t\"fa-behance\",\n\t\"fa-behance-square\",\n\t\"fa-bell\",\n\t\"fa-bell-o\",\n\t\"fa-bell-slash\",\n\t\"fa-bell-slash-o\",\n\t\"fa-bicycle\",\n\t\"fa-binoculars\",\n\t\"fa-birthday-cake\",\n\t\"fa-bitbucket\",\n\t\"fa-bitbucket-square\",\n\t\"fa-bitcoin\",\n\t\"fa-black-tie\",\n\t\"fa-blind\",\n\t\"fa-bluetooth\",\n\t\"fa-bluetooth-b\",\n\t\"fa-bold\",\n\t\"fa-bolt\",\n\t\"fa-bomb\",\n\t\"fa-book\",\n\t\"fa-bookmark\",\n\t\"fa-bookmark-o\",\n\t\"fa-braille\",\n\t\"fa-briefcase\",\n\t\"fa-btc\",\n\t\"fa-bug\",\n\t\"fa-building\",\n\t\"fa-building-o\",\n\t\"fa-bullhorn\",\n\t\"fa-bullseye\",\n\t\"fa-bus\",\n\t\"fa-buysellads\",\n\t\"fa-cab\",\n\t\"fa-calculator\",\n\t\"fa-calendar\",\n\t\"fa-calendar-check-o\",\n\t\"fa-calendar-minus-o\",\n\t\"fa-calendar-o\",\n\t\"fa-calendar-plus-o\",\n\t\"fa-calendar-times-o\",\n\t\"fa-camera\",\n\t\"fa-camera-retro\",\n\t\"fa-car\",\n\t\"fa-caret-down\",\n\t\"fa-caret-left\",\n\t\"fa-caret-right\",\n\t\"fa-caret-square-o-down\",\n\t\"fa-caret-square-o-left\",\n\t\"fa-caret-square-o-right\",\n\t\"fa-caret-square-o-up\",\n\t\"fa-caret-up\",\n\t\"fa-cart-arrow-down\",\n\t\"fa-cart-plus\",\n\t\"fa-cc\",\n\t\"fa-cc-amex\",\n\t\"fa-cc-diners-club\",\n\t\"fa-cc-discover\",\n\t\"fa-cc-jcb\",\n\t\"fa-cc-mastercard\",\n\t\"fa-cc-paypal\",\n\t\"fa-cc-stripe\",\n\t\"fa-cc-visa\",\n\t\"fa-certificate\",\n\t\"fa-chain\",\n\t\"fa-chain-broken\",\n\t\"fa-check\",\n\t\"fa-check-circle\",\n\t\"fa-check-circle-o\",\n\t\"fa-check-square\",\n\t\"fa-check-square-o\",\n\t\"fa-chevron-circle-down\",\n\t\"fa-chevron-circle-left\",\n\t\"fa-chevron-circle-right\",\n\t\"fa-chevron-circle-up\",\n\t\"fa-chevron-down\",\n\t\"fa-chevron-left\",\n\t\"fa-chevron-right\",\n\t\"fa-chevron-up\",\n\t\"fa-child\",\n\t\"fa-chrome\",\n\t\"fa-circle\",\n\t\"fa-circle-o\",\n\t\"fa-circle-o-notch\",\n\t\"fa-circle-thin\",\n\t\"fa-clipboard\",\n\t\"fa-clock-o\",\n\t\"fa-clone\",\n\t\"fa-close\",\n\t\"fa-cloud\",\n\t\"fa-cloud-download\",\n\t\"fa-cloud-upload\",\n\t\"fa-cny\",\n\t\"fa-code\",\n\t\"fa-code-fork\",\n\t\"fa-codepen\",\n\t\"fa-codiepie\",\n\t\"fa-coffee\",\n\t\"fa-cog\",\n\t\"fa-cogs\",\n\t\"fa-columns\",\n\t\"fa-comment\",\n\t\"fa-comment-o\",\n\t\"fa-commenting\",\n\t\"fa-commenting-o\",\n\t\"fa-comments\",\n\t\"fa-comments-o\",\n\t\"fa-compass\",\n\t\"fa-compress\",\n\t\"fa-connectdevelop\",\n\t\"fa-contao\",\n\t\"fa-copy\",\n\t\"fa-copyright\",\n\t\"fa-creative-commons\",\n\t\"fa-credit-card\",\n\t\"fa-credit-card-alt\",\n\t\"fa-crop\",\n\t\"fa-crosshairs\",\n\t\"fa-css3\",\n\t\"fa-cube\",\n\t\"fa-cubes\",\n\t\"fa-cut\",\n\t\"fa-cutlery\",\n\t\"fa-dashboard\",\n\t\"fa-dashcube\",\n\t\"fa-database\",\n\t\"fa-deaf\",\n\t\"fa-deafness\",\n\t\"fa-dedent\",\n\t\"fa-delicious\",\n\t\"fa-desktop\",\n\t\"fa-deviantart\",\n\t\"fa-diamond\",\n\t\"fa-digg\",\n\t\"fa-dollar\",\n\t\"fa-dot-circle-o\",\n\t\"fa-download\",\n\t\"fa-dribbble\",\n\t\"fa-drivers-license\",\n\t\"fa-drivers-license-o\",\n\t\"fa-dropbox\",\n\t\"fa-drupal\",\n\t\"fa-edge\",\n\t\"fa-edit\",\n\t\"fa-eercast\",\n\t\"fa-eject\",\n\t\"fa-ellipsis-h\",\n\t\"fa-ellipsis-v\",\n\t\"fa-empire\",\n\t\"fa-envelope\",\n\t\"fa-envelope-o\",\n\t\"fa-envelope-open\",\n\t\"fa-envelope-open-o\",\n\t\"fa-envelope-square\",\n\t\"fa-envira\",\n\t\"fa-eraser\",\n\t\"fa-etsy\",\n\t\"fa-eur\",\n\t\"fa-euro\",\n\t\"fa-exchange\",\n\t\"fa-exclamation\",\n\t\"fa-exclamation-circle\",\n\t\"fa-exclamation-triangle\",\n\t\"fa-expand\",\n\t\"fa-expeditedssl\",\n\t\"fa-external-link\",\n\t\"fa-external-link-square\",\n\t\"fa-eye\",\n\t\"fa-eye-slash\",\n\t\"fa-eyedropper\",\n\t\"fa-fa\",\n\t\"fa-facebook\",\n\t\"fa-facebook-f\",\n\t\"fa-facebook-official\",\n\t\"fa-facebook-square\",\n\t\"fa-fast-backward\",\n\t\"fa-fast-forward\",\n\t\"fa-fax\",\n\t\"fa-feed\",\n\t\"fa-female\",\n\t\"fa-fighter-jet\",\n\t\"fa-file\",\n\t\"fa-file-archive-o\",\n\t\"fa-file-audio-o\",\n\t\"fa-file-code-o\",\n\t\"fa-file-excel-o\",\n\t\"fa-file-image-o\",\n\t\"fa-file-movie-o\",\n\t\"fa-file-o\",\n\t\"fa-file-pdf-o\",\n\t\"fa-file-photo-o\",\n\t\"fa-file-picture-o\",\n\t\"fa-file-powerpoint-o\",\n\t\"fa-file-sound-o\",\n\t\"fa-file-text\",\n\t\"fa-file-text-o\",\n\t\"fa-file-video-o\",\n\t\"fa-file-word-o\",\n\t\"fa-file-zip-o\",\n\t\"fa-files-o\",\n\t\"fa-film\",\n\t\"fa-filter\",\n\t\"fa-fire\",\n\t\"fa-fire-extinguisher\",\n\t\"fa-firefox\",\n\t\"fa-first-order\",\n\t\"fa-flag\",\n\t\"fa-flag-checkered\",\n\t\"fa-flag-o\",\n\t\"fa-flash\",\n\t\"fa-flask\",\n\t\"fa-flickr\",\n\t\"fa-floppy-o\",\n\t\"fa-folder\",\n\t\"fa-folder-o\",\n\t\"fa-folder-open\",\n\t\"fa-folder-open-o\",\n\t\"fa-font\",\n\t\"fa-font-awesome\",\n\t\"fa-fonticons\",\n\t\"fa-fort-awesome\",\n\t\"fa-forumbee\",\n\t\"fa-forward\",\n\t\"fa-foursquare\",\n\t\"fa-free-code-camp\",\n\t\"fa-frown-o\",\n\t\"fa-futbol-o\",\n\t\"fa-gamepad\",\n\t\"fa-gavel\",\n\t\"fa-gbp\",\n\t\"fa-ge\",\n\t\"fa-gear\",\n\t\"fa-gears\",\n\t\"fa-genderless\",\n\t\"fa-get-pocket\",\n\t\"fa-gg\",\n\t\"fa-gg-circle\",\n\t\"fa-gift\",\n\t\"fa-git\",\n\t\"fa-git-square\",\n\t\"fa-github\",\n\t\"fa-github-alt\",\n\t\"fa-github-square\",\n\t\"fa-gitlab\",\n\t\"fa-gittip\",\n\t\"fa-glass\",\n\t\"fa-glide\",\n\t\"fa-glide-g\",\n\t\"fa-globe\",\n\t\"fa-google\",\n\t\"fa-google-plus\",\n\t\"fa-google-plus-circle\",\n\t\"fa-google-plus-official\",\n\t\"fa-google-plus-square\",\n\t\"fa-google-wallet\",\n\t\"fa-graduation-cap\",\n\t\"fa-gratipay\",\n\t\"fa-grav\",\n\t\"fa-group\",\n\t\"fa-h-square\",\n\t\"fa-hacker-news\",\n\t\"fa-hand-grab-o\",\n\t\"fa-hand-lizard-o\",\n\t\"fa-hand-o-down\",\n\t\"fa-hand-o-left\",\n\t\"fa-hand-o-right\",\n\t\"fa-hand-o-up\",\n\t\"fa-hand-paper-o\",\n\t\"fa-hand-peace-o\",\n\t\"fa-hand-pointer-o\",\n\t\"fa-hand-rock-o\",\n\t\"fa-hand-scissors-o\",\n\t\"fa-hand-spock-o\",\n\t\"fa-hand-stop-o\",\n\t\"fa-handshake-o\",\n\t\"fa-hard-of-hearing\",\n\t\"fa-hashtag\",\n\t\"fa-hdd-o\",\n\t\"fa-header\",\n\t\"fa-headphones\",\n\t\"fa-heart\",\n\t\"fa-heart-o\",\n\t\"fa-heartbeat\",\n\t\"fa-history\",\n\t\"fa-home\",\n\t\"fa-hospital-o\",\n\t\"fa-hotel\",\n\t\"fa-hourglass\",\n\t\"fa-hourglass-1\",\n\t\"fa-hourglass-2\",\n\t\"fa-hourglass-3\",\n\t\"fa-hourglass-end\",\n\t\"fa-hourglass-half\",\n\t\"fa-hourglass-o\",\n\t\"fa-hourglass-start\",\n\t\"fa-houzz\",\n\t\"fa-html5\",\n\t\"fa-i-cursor\",\n\t\"fa-id-badge\",\n\t\"fa-id-card\",\n\t\"fa-id-card-o\",\n\t\"fa-ils\",\n\t\"fa-image\",\n\t\"fa-imdb\",\n\t\"fa-inbox\",\n\t\"fa-indent\",\n\t\"fa-industry\",\n\t\"fa-info\",\n\t\"fa-info-circle\",\n\t\"fa-inr\",\n\t\"fa-instagram\",\n\t\"fa-institution\",\n\t\"fa-internet-explorer\",\n\t\"fa-intersex\",\n\t\"fa-ioxhost\",\n\t\"fa-italic\",\n\t\"fa-joomla\",\n\t\"fa-jpy\",\n\t\"fa-jsfiddle\",\n\t\"fa-key\",\n\t\"fa-keyboard-o\",\n\t\"fa-krw\",\n\t\"fa-language\",\n\t\"fa-laptop\",\n\t\"fa-lastfm\",\n\t\"fa-lastfm-square\",\n\t\"fa-leaf\",\n\t\"fa-leanpub\",\n\t\"fa-legal\",\n\t\"fa-lemon-o\",\n\t\"fa-level-down\",\n\t\"fa-level-up\",\n\t\"fa-life-bouy\",\n\t\"fa-life-buoy\",\n\t\"fa-life-ring\",\n\t\"fa-life-saver\",\n\t\"fa-lightbulb-o\",\n\t\"fa-line-chart\",\n\t\"fa-link\",\n\t\"fa-linkedin\",\n\t\"fa-linkedin-square\",\n\t\"fa-linode\",\n\t\"fa-linux\",\n\t\"fa-list\",\n\t\"fa-list-alt\",\n\t\"fa-list-ol\",\n\t\"fa-list-ul\",\n\t\"fa-location-arrow\",\n\t\"fa-lock\",\n\t\"fa-long-arrow-down\",\n\t\"fa-long-arrow-left\",\n\t\"fa-long-arrow-right\",\n\t\"fa-long-arrow-up\",\n\t\"fa-low-vision\",\n\t\"fa-magic\",\n\t\"fa-magnet\",\n\t\"fa-mail-forward\",\n\t\"fa-mail-reply\",\n\t\"fa-mail-reply-all\",\n\t\"fa-male\",\n\t\"fa-map\",\n\t\"fa-map-marker\",\n\t\"fa-map-o\",\n\t\"fa-map-pin\",\n\t\"fa-map-signs\",\n\t\"fa-mars\",\n\t\"fa-mars-double\",\n\t\"fa-mars-stroke\",\n\t\"fa-mars-stroke-h\",\n\t\"fa-mars-stroke-v\",\n\t\"fa-maxcdn\",\n\t\"fa-meanpath\",\n\t\"fa-medium\",\n\t\"fa-medkit\",\n\t\"fa-meetup\",\n\t\"fa-meh-o\",\n\t\"fa-mercury\",\n\t\"fa-microchip\",\n\t\"fa-microphone\",\n\t\"fa-microphone-slash\",\n\t\"fa-minus\",\n\t\"fa-minus-circle\",\n\t\"fa-minus-square\",\n\t\"fa-minus-square-o\",\n\t\"fa-mixcloud\",\n\t\"fa-mobile\",\n\t\"fa-mobile-phone\",\n\t\"fa-modx\",\n\t\"fa-money\",\n\t\"fa-moon-o\",\n\t\"fa-mortar-board\",\n\t\"fa-motorcycle\",\n\t\"fa-mouse-pointer\",\n\t\"fa-music\",\n\t\"fa-navicon\",\n\t\"fa-neuter\",\n\t\"fa-newspaper-o\",\n\t\"fa-object-group\",\n\t\"fa-object-ungroup\",\n\t\"fa-odnoklassniki\",\n\t\"fa-odnoklassniki-square\",\n\t\"fa-opencart\",\n\t\"fa-openid\",\n\t\"fa-opera\",\n\t\"fa-optin-monster\",\n\t\"fa-outdent\",\n\t\"fa-pagelines\",\n\t\"fa-paint-brush\",\n\t\"fa-paper-plane\",\n\t\"fa-paper-plane-o\",\n\t\"fa-paperclip\",\n\t\"fa-paragraph\",\n\t\"fa-paste\",\n\t\"fa-pause\",\n\t\"fa-pause-circle\",\n\t\"fa-pause-circle-o\",\n\t\"fa-paw\",\n\t\"fa-paypal\",\n\t\"fa-pencil\",\n\t\"fa-pencil-square\",\n\t\"fa-pencil-square-o\",\n\t\"fa-percent\",\n\t\"fa-phone\",\n\t\"fa-phone-square\",\n\t\"fa-photo\",\n\t\"fa-picture-o\",\n\t\"fa-pie-chart\",\n\t\"fa-pied-piper\",\n\t\"fa-pied-piper-alt\",\n\t\"fa-pied-piper-pp\",\n\t\"fa-pinterest\",\n\t\"fa-pinterest-p\",\n\t\"fa-pinterest-square\",\n\t\"fa-plane\",\n\t\"fa-play\",\n\t\"fa-play-circle\",\n\t\"fa-play-circle-o\",\n\t\"fa-plug\",\n\t\"fa-plus\",\n\t\"fa-plus-circle\",\n\t\"fa-plus-square\",\n\t\"fa-plus-square-o\",\n\t\"fa-podcast\",\n\t\"fa-power-off\",\n\t\"fa-print\",\n\t\"fa-product-hunt\",\n\t\"fa-puzzle-piece\",\n\t\"fa-qq\",\n\t\"fa-qrcode\",\n\t\"fa-question\",\n\t\"fa-question-circle\",\n\t\"fa-question-circle-o\",\n\t\"fa-quora\",\n\t\"fa-quote-left\",\n\t\"fa-quote-right\",\n\t\"fa-ra\",\n\t\"fa-random\",\n\t\"fa-ravelry\",\n\t\"fa-rebel\",\n\t\"fa-recycle\",\n\t\"fa-reddit\",\n\t\"fa-reddit-alien\",\n\t\"fa-reddit-square\",\n\t\"fa-refresh\",\n\t\"fa-registered\",\n\t\"fa-remove\",\n\t\"fa-renren\",\n\t\"fa-reorder\",\n\t\"fa-repeat\",\n\t\"fa-reply\",\n\t\"fa-reply-all\",\n\t\"fa-resistance\",\n\t\"fa-retweet\",\n\t\"fa-rmb\",\n\t\"fa-road\",\n\t\"fa-rocket\",\n\t\"fa-rotate-left\",\n\t\"fa-rotate-right\",\n\t\"fa-rouble\",\n\t\"fa-rss\",\n\t\"fa-rss-square\",\n\t\"fa-rub\",\n\t\"fa-ruble\",\n\t\"fa-rupee\",\n\t\"fa-s15\",\n\t\"fa-safari\",\n\t\"fa-save\",\n\t\"fa-scissors\",\n\t\"fa-scribd\",\n\t\"fa-search\",\n\t\"fa-search-minus\",\n\t\"fa-search-plus\",\n\t\"fa-sellsy\",\n\t\"fa-send\",\n\t\"fa-send-o\",\n\t\"fa-server\",\n\t\"fa-share\",\n\t\"fa-share-alt\",\n\t\"fa-share-alt-square\",\n\t\"fa-share-square\",\n\t\"fa-share-square-o\",\n\t\"fa-shekel\",\n\t\"fa-sheqel\",\n\t\"fa-shield\",\n\t\"fa-ship\",\n\t\"fa-shirtsinbulk\",\n\t\"fa-shopping-bag\",\n\t\"fa-shopping-basket\",\n\t\"fa-shopping-cart\",\n\t\"fa-shower\",\n\t\"fa-sign-in\",\n\t\"fa-sign-language\",\n\t\"fa-sign-out\",\n\t\"fa-signal\",\n\t\"fa-signing\",\n\t\"fa-simplybuilt\",\n\t\"fa-sitemap\",\n\t\"fa-skyatlas\",\n\t\"fa-skype\",\n\t\"fa-slack\",\n\t\"fa-sliders\",\n\t\"fa-slideshare\",\n\t\"fa-smile-o\",\n\t\"fa-snapchat\",\n\t\"fa-snapchat-ghost\",\n\t\"fa-snapchat-square\",\n\t\"fa-snowflake-o\",\n\t\"fa-soccer-ball-o\",\n\t\"fa-sort\",\n\t\"fa-sort-alpha-asc\",\n\t\"fa-sort-alpha-desc\",\n\t\"fa-sort-amount-asc\",\n\t\"fa-sort-amount-desc\",\n\t\"fa-sort-asc\",\n\t\"fa-sort-desc\",\n\t\"fa-sort-down\",\n\t\"fa-sort-numeric-asc\",\n\t\"fa-sort-numeric-desc\",\n\t\"fa-sort-up\",\n\t\"fa-soundcloud\",\n\t\"fa-space-shuttle\",\n\t\"fa-spinner\",\n\t\"fa-spoon\",\n\t\"fa-spotify\",\n\t\"fa-square\",\n\t\"fa-square-o\",\n\t\"fa-stack-exchange\",\n\t\"fa-stack-overflow\",\n\t\"fa-star\",\n\t\"fa-star-half\",\n\t\"fa-star-half-empty\",\n\t\"fa-star-half-full\",\n\t\"fa-star-half-o\",\n\t\"fa-star-o\",\n\t\"fa-steam\",\n\t\"fa-steam-square\",\n\t\"fa-step-backward\",\n\t\"fa-step-forward\",\n\t\"fa-stethoscope\",\n\t\"fa-sticky-note\",\n\t\"fa-sticky-note-o\",\n\t\"fa-stop\",\n\t\"fa-stop-circle\",\n\t\"fa-stop-circle-o\",\n\t\"fa-street-view\",\n\t\"fa-strikethrough\",\n\t\"fa-stumbleupon\",\n\t\"fa-stumbleupon-circle\",\n\t\"fa-subscript\",\n\t\"fa-subway\",\n\t\"fa-suitcase\",\n\t\"fa-sun-o\",\n\t\"fa-superpowers\",\n\t\"fa-superscript\",\n\t\"fa-support\",\n\t\"fa-table\",\n\t\"fa-tablet\",\n\t\"fa-tachometer\",\n\t\"fa-tag\",\n\t\"fa-tags\",\n\t\"fa-tasks\",\n\t\"fa-taxi\",\n\t\"fa-telegram\",\n\t\"fa-television\",\n\t\"fa-tencent-weibo\",\n\t\"fa-terminal\",\n\t\"fa-text-height\",\n\t\"fa-text-width\",\n\t\"fa-th\",\n\t\"fa-th-large\",\n\t\"fa-th-list\",\n\t\"fa-themeisle\",\n\t\"fa-thermometer\",\n\t\"fa-thermometer-0\",\n\t\"fa-thermometer-1\",\n\t\"fa-thermometer-2\",\n\t\"fa-thermometer-3\",\n\t\"fa-thermometer-4\",\n\t\"fa-thermometer-empty\",\n\t\"fa-thermometer-full\",\n\t\"fa-thermometer-half\",\n\t\"fa-thermometer-quarter\",\n\t\"fa-thermometer-three-quarters\",\n\t\"fa-thumb-tack\",\n\t\"fa-thumbs-down\",\n\t\"fa-thumbs-o-down\",\n\t\"fa-thumbs-o-up\",\n\t\"fa-thumbs-up\",\n\t\"fa-ticket\",\n\t\"fa-times\",\n\t\"fa-times-circle\",\n\t\"fa-times-circle-o\",\n\t\"fa-times-rectangle\",\n\t\"fa-times-rectangle-o\",\n\t\"fa-tint\",\n\t\"fa-toggle-down\",\n\t\"fa-toggle-left\",\n\t\"fa-toggle-off\",\n\t\"fa-toggle-on\",\n\t\"fa-toggle-right\",\n\t\"fa-toggle-up\",\n\t\"fa-trademark\",\n\t\"fa-train\",\n\t\"fa-transgender\",\n\t\"fa-transgender-alt\",\n\t\"fa-trash\",\n\t\"fa-trash-o\",\n\t\"fa-tree\",\n\t\"fa-trello\",\n\t\"fa-tripadvisor\",\n\t\"fa-trophy\",\n\t\"fa-truck\",\n\t\"fa-try\",\n\t\"fa-tty\",\n\t\"fa-tumblr\",\n\t\"fa-tumblr-square\",\n\t\"fa-turkish-lira\",\n\t\"fa-tv\",\n\t\"fa-twitch\",\n\t\"fa-twitter\",\n\t\"fa-twitter-square\",\n\t\"fa-umbrella\",\n\t\"fa-underline\",\n\t\"fa-undo\",\n\t\"fa-universal-access\",\n\t\"fa-university\",\n\t\"fa-unlink\",\n\t\"fa-unlock\",\n\t\"fa-unlock-alt\",\n\t\"fa-unsorted\",\n\t\"fa-upload\",\n\t\"fa-usb\",\n\t\"fa-usd\",\n\t\"fa-user\",\n\t\"fa-user-circle\",\n\t\"fa-user-circle-o\",\n\t\"fa-user-md\",\n\t\"fa-user-o\",\n\t\"fa-user-plus\",\n\t\"fa-user-secret\",\n\t\"fa-user-times\",\n\t\"fa-users\",\n\t\"fa-vcard\",\n\t\"fa-vcard-o\",\n\t\"fa-venus\",\n\t\"fa-venus-double\",\n\t\"fa-venus-mars\",\n\t\"fa-viacoin\",\n\t\"fa-viadeo\",\n\t\"fa-viadeo-square\",\n\t\"fa-video-camera\",\n\t\"fa-vimeo\",\n\t\"fa-vimeo-square\",\n\t\"fa-vine\",\n\t\"fa-vk\",\n\t\"fa-volume-control-phone\",\n\t\"fa-volume-down\",\n\t\"fa-volume-off\",\n\t\"fa-volume-up\",\n\t\"fa-warning\",\n\t\"fa-wechat\",\n\t\"fa-weibo\",\n\t\"fa-weixin\",\n\t\"fa-whatsapp\",\n\t\"fa-wheelchair\",\n\t\"fa-wheelchair-alt\",\n\t\"fa-wifi\",\n\t\"fa-wikipedia-w\",\n\t\"fa-window-close\",\n\t\"fa-window-close-o\",\n\t\"fa-window-maximize\",\n\t\"fa-window-minimize\",\n\t\"fa-window-restore\",\n\t\"fa-windows\",\n\t\"fa-won\",\n\t\"fa-wordpress\",\n\t\"fa-wpbeginner\",\n\t\"fa-wpexplorer\",\n\t\"fa-wpforms\",\n\t\"fa-wrench\",\n\t\"fa-xing\",\n\t\"fa-xing-square\",\n\t\"fa-y-combinator\",\n\t\"fa-y-combinator-square\",\n\t\"fa-yahoo\",\n\t\"fa-yc\",\n\t\"fa-yc-square\",\n\t\"fa-yelp\",\n\t\"fa-yen\",\n\t\"fa-yoast\",\n\t\"fa-youtube\",\n\t\"fa-youtube-play\",\n\t\"fa-youtube-square\",\n];\n\nexport default fontAwesome;\n","import fontAwesomeList from \"./fa-icons\";\nimport {\n\tName,\n\tType,\n\tTitle,\n\tDefaultValue,\n\tAppBuilder,\n\tHelp,\n\tSequence,\n\tRoles,\n\tValueExpression,\n\tSelection,\n\tWidget,\n\tOnChange,\n\tMin,\n\tMax,\n\tJsonRelationalField,\n\tDomain,\n\tTargetJsonModel,\n\tTargetModel,\n\tGridView,\n\tFormView,\n\tRequired,\n\tColumnSequence,\n\tReadOnly,\n\tHidden,\n\tVisibleInGrid,\n\tShowIf,\n\tHideIf,\n\tIf,\n\tRequiredIf,\n\tReadOnlyIf,\n\tIncludeIf,\n\tValidIf,\n\tColSpan,\n\tShowTitle,\n\tOnNew,\n\tEditable,\n\tDummyType,\n\tCanSearch,\n\tAction,\n\tIfModule,\n\tHeight,\n\tField,\n\tCanMove,\n\tOrderBy,\n\tIncludeFrom,\n\tIncludeView,\n\tTransient,\n\tMassUpdate,\n\tColumn,\n\tFormula,\n\tIndex,\n\tDefault,\n\tUnique,\n\tInitParam,\n\tHashKey,\n\tLarge,\n\tMultiline,\n\tTranslatable,\n\tPassword,\n\tEncrypted,\n\tSearch,\n\tPrecision,\n\tScale,\n\tTZ,\n\tImage,\n\tOrphanRemoval,\n\tRef,\n\tMappedBy,\n\tCachable,\n\tSequential,\n\tRepository,\n\tLogUpdates,\n\tLang,\n\tImplements,\n\tTable,\n\tPersistable,\n\tStrategy,\n\tHashAll,\n\tExtends,\n\tIsGenerateMenu,\n\tMenuBuilderParent,\n\tMenuBuilderTitle,\n\tPackageName,\n\tEntitySelection,\n\tModel,\n\tStrong,\n\tColor,\n\tBackground,\n\tItemSpan,\n\tCss,\n\tPrompt,\n\tSelectionIn,\n\tValueAdd,\n\tValueDel,\n\tActive,\n\tRefresh,\n\tValue,\n\tSidebar,\n\tSelectionText,\n\tUpdateSelection,\n} from \"./propertyFields\";\nimport {\n\tStringField,\n\tIntegerField,\n\tStaticSelectField,\n\tSelectField,\n\tBooleanField,\n} from \"./fieldTypes\";\nimport { MODEL_TYPE } from \"./../constants\";\n\n/** Options */\nconst stringOption = {\n\toverview: [\n\t\tName({ existsCheck: true }),\n\t\tType,\n\t\tTitle,\n\t\tDefaultValue,\n\t\tAppBuilder,\n\t\tHelp,\n\t\tSequence,\n\t],\n\tfieldOptions: [\n\t\tSelection,\n\t\tUpdateSelection,\n\t\tSelectionText,\n\t\tSelectionIn,\n\t\tWidget,\n\t\tOnChange,\n\t\tMin,\n\t\tMax,\n\t\tStringField({ name: \"regex\", dependModelType: MODEL_TYPE.CUSTOM }),\n\t\tValue,\n\t],\n\tuiOptions: [\n\t\tRequired,\n\t\tReadOnly,\n\t\tBooleanField({\n\t\t\tname: \"nameField\",\n\t\t\ttitle: \"Name column\",\n\t\t\tdependModelType: MODEL_TYPE.CUSTOM,\n\t\t}),\n\t\tHidden,\n\t\tVisibleInGrid,\n\t\tColumnSequence,\n\t\tCss,\n\t],\n\tconditions: [ShowIf, HideIf, RequiredIf, ReadOnlyIf, IncludeIf, ValidIf],\n\tvalueExpr: [ValueExpression],\n\troles: [Roles],\n\twidgetAttributes: [\n\t\tColSpan,\n\t\tShowTitle,\n\t\tBooleanField({\n\t\t\tname: \"multiline\",\n\t\t\tparentField: \"widgetAttrs\",\n\t\t\tmodelType: MODEL_TYPE.CUSTOM,\n\t\t\tdependModelType: MODEL_TYPE.CUSTOM,\n\t\t}),\n\t],\n};\n\nconst integerOption = {\n\toverview: [\n\t\tName({ existsCheck: true }),\n\t\tType,\n\t\tTitle,\n\t\tDefaultValue,\n\t\tAppBuilder,\n\t\tHelp,\n\t\tSequence,\n\t],\n\tfieldOptions: [\n\t\tSelection,\n\t\tUpdateSelection,\n\t\tSelectionText,\n\t\tSelectionIn,\n\t\tWidget,\n\t\tOnChange,\n\t\tMin,\n\t\tMax,\n\t\tValue,\n\t],\n\tuiOptions: [Required, ReadOnly, Hidden, VisibleInGrid, ColumnSequence, Css],\n\tconditions: [ShowIf, HideIf, RequiredIf, ReadOnlyIf, IncludeIf, ValidIf],\n\tvalueExpr: [ValueExpression],\n\troles: [Roles],\n\twidgetAttributes: [ColSpan, ShowTitle],\n};\n\nconst decimalOption = {\n\toverview: [\n\t\tName({ existsCheck: true }),\n\t\tType,\n\t\tTitle,\n\t\tDefaultValue,\n\t\tAppBuilder,\n\t\tHelp,\n\t\tSequence,\n\t],\n\tfieldOptions: [\n\t\tWidget,\n\t\tOnChange,\n\t\tMin,\n\t\tMax,\n\t\tIntegerField({\n\t\t\tname: \"precision\",\n\t\t\tdefault: 6,\n\t\t}),\n\t\tIntegerField({\n\t\t\tname: \"scale\",\n\t\t\tdefault: 2,\n\t\t}),\n\t\tValue,\n\t],\n\tuiOptions: [Required, ReadOnly, Hidden, VisibleInGrid, ColumnSequence, Css],\n\tconditions: [ShowIf, HideIf, RequiredIf, ReadOnlyIf, IncludeIf, ValidIf],\n\tvalueExpr: [ValueExpression],\n\troles: [Roles],\n\twidgetAttributes: [ColSpan, ShowTitle],\n};\n\nconst booleanOption = {\n\toverview: [\n\t\tName({ existsCheck: true }),\n\t\tType,\n\t\tTitle,\n\t\tDefaultValue,\n\t\tAppBuilder,\n\t\tHelp,\n\t\tSequence,\n\t],\n\tfieldOptions: [Widget, OnChange, Value],\n\tuiOptions: [Required, ReadOnly, Hidden, VisibleInGrid, ColumnSequence, Css],\n\tconditions: [ShowIf, HideIf, RequiredIf, ReadOnlyIf, IncludeIf, ValidIf],\n\tvalueExpr: [ValueExpression],\n\troles: [Roles],\n\twidgetAttributes: [ColSpan, ShowTitle],\n};\n\nconst datetimeOption = {\n\toverview: [\n\t\tName({ existsCheck: true }),\n\t\tType,\n\t\tTitle,\n\t\tDefaultValue,\n\t\tAppBuilder,\n\t\tHelp,\n\t\tSequence,\n\t],\n\tfieldOptions: [Widget, OnChange, Value],\n\tuiOptions: [Required, ReadOnly, Hidden, VisibleInGrid, ColumnSequence, Css],\n\tconditions: [ShowIf, HideIf, RequiredIf, ReadOnlyIf, IncludeIf, ValidIf],\n\tvalueExpr: [ValueExpression],\n\troles: [Roles],\n\twidgetAttributes: [ColSpan, ShowTitle],\n};\n\nconst panelOption = {\n\toverview: [Name({ existsCheck: true }), Type, Title, AppBuilder],\n\tuiOptions: [\n\t\tReadOnly,\n\t\tHidden,\n\t\tSidebar,\n\t\tBooleanField({\n\t\t\tname: \"canCollapse\",\n\t\t\tparentField: \"widgetAttrs\",\n\t\t\tmodelType: MODEL_TYPE.CUSTOM,\n\t\t\tdependModelType: MODEL_TYPE.CUSTOM,\n\t\t}),\n\t\tStringField({\n\t\t\tname: \"collapseIf\",\n\t\t\tparentField: \"widgetAttrs\",\n\t\t\tmodelType: MODEL_TYPE.CUSTOM,\n\t\t\tdependModelType: MODEL_TYPE.CUSTOM,\n\t\t}),\n\t\tColumnSequence,\n\t\tCss,\n\t\tActive,\n\t],\n\tconditions: [ShowIf, HideIf, ReadOnlyIf],\n\troles: [Roles],\n\twidgetAttributes: [ItemSpan, ShowTitle],\n};\n\nconst panelStackOption = {\n\toverview: [Name({ existsCheck: true }), Type, AppBuilder],\n\tuiOptions: [\n\t\tReadOnly,\n\t\tHidden,\n\t\tSidebar,\n\t\tBooleanField({\n\t\t\tname: \"canCollapse\",\n\t\t\tparentField: \"widgetAttrs\",\n\t\t\tmodelType: MODEL_TYPE.CUSTOM,\n\t\t\tdependModelType: MODEL_TYPE.CUSTOM,\n\t\t}),\n\t\tStringField({\n\t\t\tname: \"collapseIf\",\n\t\t\tparentField: \"widgetAttrs\",\n\t\t\tmodelType: MODEL_TYPE.CUSTOM,\n\t\t\tdependModelType: MODEL_TYPE.CUSTOM,\n\t\t}),\n\t\tColumnSequence,\n\t\tCss,\n\t],\n\tconditions: [ShowIf, HideIf, ReadOnlyIf],\n\troles: [Roles],\n\twidgetAttributes: [ColSpan],\n};\n\nconst panelTabOption = {\n\toverview: [Name({ existsCheck: true }), Type, Title, AppBuilder],\n\tuiOptions: [ReadOnly, Hidden, ColumnSequence, Css],\n\tconditions: [ShowIf, HideIf, ReadOnlyIf],\n\troles: [Roles],\n\twidgetAttributes: [ShowTitle],\n};\n\nconst buttonOption = {\n\toverview: [\n\t\tName({ existsCheck: true }),\n\t\tType,\n\t\tTitle,\n\t\tAppBuilder,\n\t\tHelp,\n\t\tSequence,\n\t\tPrompt,\n\t],\n\tfieldOptions: [\n\t\tWidget,\n\t\tSelectField({\n\t\t\tname: \"onClick\",\n\t\t\ttitle: \"On click\",\n\t\t\trequired: true,\n\t\t\tref: \"com.axelor.meta.db.MetaAction\",\n\t\t\trequiredFor: [\"button\"],\n\t\t\tdependModelType: MODEL_TYPE.CUSTOM,\n\t\t\tmultiple: true,\n\t\t\tcommaSeparated: true,\n\t\t\tcanAddNew: true,\n\t\t}),\n\t],\n\tuiOptions: [ReadOnly, Hidden, VisibleInGrid, ColumnSequence, Css],\n\tconditions: [ShowIf, HideIf, RequiredIf, ReadOnlyIf, IncludeIf, ValidIf],\n\troles: [Roles],\n\twidgetAttributes: [\n\t\tColSpan,\n\t\tShowTitle,\n\t\tStaticSelectField({\n\t\t\tname: \"icon\",\n\t\t\ttitle: \"Icon\",\n\t\t\tdata: fontAwesomeList,\n\t\t\thelper: \"https://fontawesome.com/cheatsheet\",\n\t\t\tparentField: \"widgetAttrs\",\n\t\t\tmodelType: MODEL_TYPE.CUSTOM,\n\t\t}),\n\t\t// StaticSelectField({\n\t\t// \tname: \"color\",\n\t\t// \tdata: [\n\t\t// \t\t\"btn-default\",\n\t\t// \t\t\"btn-warning\",\n\t\t// \t\t\"btn-info\",\n\t\t// \t\t\"btn-success\",\n\t\t// \t\t\"btn-primary\",\n\t\t// \t\t\"btn-danger\",\n\t\t// \t],\n\t\t// \ttitle: \"Color\",\n\t\t// }),\n\t],\n};\n\nconst seperatorOption = {\n\toverview: [\n\t\tName({ existsCheck: true }),\n\t\tType,\n\t\tTitle,\n\t\tDefaultValue,\n\t\tAppBuilder,\n\t\tHelp,\n\t\tSequence,\n\t],\n\tuiOptions: [Hidden, ColumnSequence, Css],\n\tconditions: [ShowIf, HideIf, RequiredIf, ReadOnlyIf, IncludeIf, ValidIf],\n\troles: [Roles],\n\twidgetAttributes: [ColSpan],\n};\n\nconst spacerOption = {\n\toverview: [Name({ existsCheck: true }), Type, AppBuilder],\n\tfieldOptions: [],\n\tuiOptions: [Hidden, ColumnSequence, Css],\n\tconditions: [ShowIf, HideIf, ValidIf],\n\troles: [Roles],\n\twidgetAttributes: [ColSpan],\n};\n\nconst labelOption = {\n\toverview: [Name({ existsCheck: true }), Type, Title, AppBuilder],\n\tfieldOptions: [Widget],\n\tuiOptions: [Required, Hidden, ColumnSequence, Css],\n\tconditions: [ShowIf, HideIf, RequiredIf, ReadOnlyIf, ValidIf],\n\tvalueExpr: [ValueExpression],\n\troles: [Roles],\n\twidgetAttributes: [ColSpan, ShowTitle],\n};\n\nconst viewerOption = {\n\toverview: [Name({ existsCheck: true }), Type, Title, AppBuilder],\n\tfieldOptions: [Widget],\n\tuiOptions: [Required, Hidden, ReadOnly, ColumnSequence, Css],\n\tconditions: [ShowIf, HideIf, RequiredIf, ReadOnlyIf, ValidIf],\n\tvalueExpr: [ValueExpression],\n\troles: [Roles],\n\twidgetAttributes: [ColSpan, ShowTitle],\n};\n\nconst manyToOneOption = {\n\toverview: [\n\t\tName({ existsCheck: true }),\n\t\tType,\n\t\tTitle,\n\t\tDefaultValue,\n\t\tAppBuilder,\n\t\tHelp,\n\t\tSequence,\n\t],\n\tfieldOptions: [\n\t\tWidget,\n\t\tOnChange,\n\t\tJsonRelationalField,\n\t\tDomain,\n\t\tTargetModel,\n\t\tGridView,\n\t\tFormView,\n\t\tValue,\n\t],\n\tuiOptions: [Required, ReadOnly, Hidden, VisibleInGrid, ColumnSequence, Css],\n\tconditions: [ShowIf, HideIf, RequiredIf, ReadOnlyIf, IncludeIf, ValidIf],\n\tvalueExpr: [ValueExpression],\n\troles: [Roles],\n\twidgetAttributes: [ColSpan, ShowTitle],\n};\n\nconst manyToManyAndOneToManyOption = {\n\toverview: [\n\t\tName({ existsCheck: true }),\n\t\tType,\n\t\tTitle,\n\t\tAppBuilder,\n\t\tHelp,\n\t\tSequence,\n\t],\n\tfieldOptions: [\n\t\tWidget,\n\t\tOnChange,\n\t\tJsonRelationalField,\n\t\tDomain,\n\t\tTargetModel,\n\t\tGridView,\n\t\tFormView,\n\t\tValueAdd,\n\t\tValueDel,\n\t\tValue,\n\t],\n\tuiOptions: [Required, ReadOnly, Hidden, VisibleInGrid, ColumnSequence, Css],\n\tconditions: [ShowIf, HideIf, RequiredIf, ReadOnlyIf, IncludeIf, ValidIf],\n\tvalueExpr: [ValueExpression],\n\troles: [Roles],\n\twidgetAttributes: [ColSpan, ShowTitle],\n};\n\nconst customRelationOption = {\n\toverview: [\n\t\tName({ existsCheck: true }),\n\t\tType,\n\t\tTitle,\n\t\tAppBuilder,\n\t\tHelp,\n\t\tSequence,\n\t],\n\tfieldOptions: [\n\t\tWidget,\n\t\tOnChange,\n\t\tJsonRelationalField,\n\t\tDomain,\n\t\tTargetJsonModel,\n\t\tValue,\n\t],\n\tuiOptions: [Required, ReadOnly, Hidden, VisibleInGrid, ColumnSequence, Css],\n\tconditions: [ShowIf, HideIf, RequiredIf, ReadOnlyIf, IncludeIf, ValidIf],\n\tvalueExpr: [ValueExpression],\n\troles: [Roles],\n\twidgetAttributes: [ColSpan, ShowTitle],\n};\n\nconst formOption = {\n\toverview: [\n\t\tName({ existsCheck: true }),\n\t\t{ ...Title, required: true },\n\t\tAppBuilder,\n\t\tStaticSelectField({\n\t\t\tname: \"formWidth\",\n\t\t\ttitle: \"Form width\",\n\t\t\tdata: [\"large\"],\n\t\t}),\n\t\tStringField({\n\t\t\tname: \"orderBy\",\n\t\t\ttitle: \"Order by\",\n\t\t}),\n\t\tIsGenerateMenu,\n\t\tMenuBuilderParent,\n\t\tMenuBuilderTitle,\n\t],\n\tactions: [\n\t\tSelectField({\n\t\t\ttitle: \"On new\",\n\t\t\tname: \"onNew\",\n\t\t\tref: \"com.axelor.meta.db.MetaAction\",\n\t\t\tdependModelType: MODEL_TYPE.CUSTOM,\n\t\t\tmultiple: true,\n\t\t\tcommaSeparated: true,\n\t\t\tcanAddNew: true,\n\t\t}),\n\t\tSelectField({\n\t\t\ttitle: \"On save\",\n\t\t\tname: \"onSave\",\n\t\t\tref: \"com.axelor.meta.db.MetaAction\",\n\t\t\tdependModelType: MODEL_TYPE.CUSTOM,\n\t\t\tmultiple: true,\n\t\t\tcommaSeparated: true,\n\t\t\tcanAddNew: true,\n\t\t}),\n\t],\n};\n\nconst commonOption = {\n\toverview: [Name(), Type, Title, AppBuilder],\n\tuiOptions: [Hidden, VisibleInGrid, ColumnSequence, Css],\n\tconditions: [ShowIf, HideIf, ReadOnlyIf, IncludeIf, ValidIf],\n\twidgetAttributes: [ColSpan, ShowTitle],\n};\n\nconst dummyOption = {\n\toverview: [Name(), DummyType],\n};\nconst viewOption = {\n\toverview: [\n\t\tName({ existsCheck: true }),\n\t\tType,\n\t\t{ ...Title, readOnly: true, translationView: false },\n\t\t// Editable,\n\t\t// OnNew,\n\t\t// OnSave,\n\t\t// OnLoad,\n\t\t// CanAttach,\n\t\t// CanCopy,\n\t\t// CanDelete,\n\t\t// CanEdit,\n\t\t// CanNew,\n\t\t// CanSave,\n\t\t// FormWidth,\n\t],\n};\n\nconst gridOption = {\n\toverview: [Name({ existsCheck: true }), Type, Title, Model, Editable],\n};\n\nconst panelDashletOption = {\n\toverview: [\n\t\tName({ existsCheck: true }),\n\t\tType,\n\t\tAction,\n\t\tTitle,\n\t\tCanSearch,\n\t\tIfModule,\n\t],\n\tuiOptions: [ReadOnly, Hidden, Height, Css, Refresh],\n\tconditions: [ShowIf, HideIf, ReadOnlyIf],\n\twidgetAttributes: [ColSpan, ShowTitle],\n};\n\nconst menuItemOption = {\n\toverview: [Name({ existsCheck: true }), Type, Action],\n\t// conditions: [If, ShowIf, HideIf, ReadOnlyIf],\n\twidgetAttributes: [ShowTitle],\n};\n\nconst dividerOption = {\n\toverview: [Name({ existsCheck: true }), Type],\n\tconditions: [If, ShowIf, HideIf, IfModule],\n};\n\nconst menuOption = {\n\toverview: [Name({ existsCheck: true }), Type],\n\twidgetAttributes: [\n\t\tShowTitle,\n\t\t// StaticSelectField({\n\t\t// \tname: \"icon\",\n\t\t// \ttitle: \"Icon\",\n\t\t// \tdata: fontAwesomeList,\n\t\t// \thelper: \"https://fontawesome.com/cheatsheet\",\n\t\t// })\n\t],\n\tconditions: [If, IfModule, IncludeIf],\n};\n\nconst panelRelatedOption = {\n\toverview: [Name({ existsCheck: true }), Type, Title, Field, OnNew, OnChange],\n\tuiOptions: [FormView, GridView, Height, Editable, ReadOnly, Hidden, Css],\n\tconditions: [ShowIf, HideIf, ReadOnlyIf, ValidIf, CanMove, OrderBy],\n\twidgetAttributes: [ColSpan, ShowTitle],\n};\n\nconst panelIncludeOption = {\n\toverview: [Type, IncludeView, IncludeFrom, IfModule],\n\twidgetAttributes: [ShowTitle],\n};\n\nconst commonEntityOption = [\n\tName({ existsCheck: true }),\n\tType,\n\tTitle,\n\tHelp,\n\tColumn,\n\tIndex,\n\tDefault,\n\tRequired,\n\tReadOnly,\n\tUnique,\n\tHidden,\n\tTransient,\n\tInitParam,\n\tHashKey,\n\tMassUpdate,\n\tFormula,\n];\n\nconst stringEntity = {\n\toverview: [\n\t\t...commonEntityOption,\n\t\tBooleanField({\n\t\t\tname: \"namecolumn\",\n\t\t\ttitle: \"Name column\",\n\t\t}),\n\t\tEntitySelection,\n\t\tMin,\n\t\tMax,\n\t\tLarge,\n\t\tSearch,\n\t\tSequence,\n\t\tMultiline,\n\t\tTranslatable,\n\t\tPassword,\n\t\tEncrypted,\n\t],\n};\n\nconst decimalEntity = {\n\toverview: [\n\t\t...commonEntityOption,\n\t\tEntitySelection,\n\t\tMin,\n\t\tMax,\n\t\tPrecision,\n\t\tScale,\n\t],\n};\n\nconst integerEntity = {\n\toverview: [...commonEntityOption, EntitySelection, Min, Max],\n};\n\nconst dateEntity = {\n\toverview: [...commonEntityOption, EntitySelection],\n};\n\nconst timeEntity = {\n\toverview: [...commonEntityOption, EntitySelection],\n};\n\nconst datetimeEntity = {\n\toverview: [...commonEntityOption, EntitySelection, TZ],\n};\n\nconst longEntity = {\n\toverview: [...commonEntityOption, EntitySelection, Min, Max],\n};\n\nconst booleanEntity = {\n\toverview: [...commonEntityOption, EntitySelection],\n};\n\nconst binaryEntity = {\n\toverview: [...commonEntityOption, EntitySelection, Image, Encrypted],\n};\n\nconst oneToManyEntity = {\n\toverview: [...commonEntityOption, Ref, MappedBy, OrderBy, OrphanRemoval],\n};\n\nconst manyToManyEntity = {\n\toverview: [...commonEntityOption, Ref, MappedBy, OrderBy],\n};\n\nconst manyToOneEntity = {\n\toverview: [...commonEntityOption, Ref],\n};\n\nconst oneToOneEntity = {\n\toverview: [...commonEntityOption, Ref, MappedBy],\n};\n\nconst entityOption = {\n\toverview: [\n\t\tPackageName,\n\t\tName({ existsCheck: true }),\n\t\tSequential,\n\t\tCachable,\n\t\tRepository,\n\t\tLogUpdates,\n\t\tPersistable,\n\t\tLang,\n\t\tExtends,\n\t\tImplements,\n\t\tTable,\n\t\tStrategy,\n\t\tHashAll,\n\t],\n};\n\nconst hiliteOption = {\n\toverview: [Name({ existsCheck: true }), If, Color, Background, Strong, Css],\n};\n\nexport const options = [\n\t{ type: \"form\", value: viewOption },\n\t{ type: \"grid\", value: gridOption },\n\t{ type: \"modelForm\", value: formOption },\n\t{ type: \"entityForm\", value: entityOption },\n\t{ type: \"string\", value: stringOption },\n\t{ type: \"byte[]\", value: stringOption },\n\t{ type: \"integer\", value: integerOption },\n\t{ type: \"number\", value: integerOption },\n\t{ type: \"decimal\", value: decimalOption },\n\t{ type: \"bigdecimal\", value: decimalOption },\n\t{ type: \"boolean\", value: booleanOption },\n\t{ type: \"datetime\", value: datetimeOption },\n\t{ type: \"localdatetime\", value: datetimeOption },\n\t{ type: \"zoneddatetime\", value: datetimeOption },\n\t{ type: \"date\", value: datetimeOption },\n\t{ type: \"localdate\", value: datetimeOption },\n\t{ type: \"time\", value: datetimeOption },\n\t{ type: \"panel\", value: panelOption, dependModelType: MODEL_TYPE.BASE },\n\t{ type: \"panel-stack\", value: panelStackOption },\n\t{ type: \"panel-tab\", value: panelTabOption },\n\t{ type: \"button\", value: buttonOption },\n\t{ type: \"separator\", value: seperatorOption },\n\t{ type: \"spacer\", value: spacerOption },\n\t{ type: \"label\", value: labelOption },\n\t{ type: \"many-to-one\", value: manyToOneOption },\n\t{ type: \"many-to-many\", value: manyToManyAndOneToManyOption },\n\t{ type: \"one-to-many\", value: manyToManyAndOneToManyOption },\n\t{ type: \"json-many-to-one\", value: customRelationOption },\n\t{ type: \"json-many-to-many\", value: customRelationOption },\n\t{ type: \"json-one-to-many\", value: customRelationOption },\n\t{ type: \"include\", value: formOption },\n\t{ type: \"panel-tabs\", value: panelTabOption, showInCustomField: false },\n\t{ type: \"panel-dashlet\", value: panelDashletOption },\n\t{ type: \"panel-related\", value: panelRelatedOption },\n\t{ type: \"panel-include\", value: panelIncludeOption },\n\t{ type: \"text\", value: commonOption },\n\t{ type: \"long\", value: decimalOption },\n\t{ type: \"panel-dashlet\", value: commonOption },\n\t{ type: \"dashlet\", value: commonOption },\n\t{ type: \"static\", value: commonOption },\n\t{ type: \"one-to-one\", value: manyToOneOption },\n\t{ type: \"binary\", value: commonOption },\n\t{ type: \"field\", value: commonOption },\n\t{ type: \"dummy\", value: dummyOption },\n\t{ type: \"viewer\", value: viewerOption },\n\t{ type: \"editor\", value: labelOption },\n\t{ type: \"byte[]entity\", value: stringEntity },\n\t{ type: \"stringentity\", value: stringEntity },\n\t{ type: \"integerentity\", value: integerEntity },\n\t{ type: \"decimalentity\", value: decimalEntity },\n\t{ type: \"bigdecimalentity\", value: decimalEntity },\n\t{ type: \"dateentity\", value: dateEntity },\n\t{ type: \"localdateentity\", value: dateEntity },\n\t{ type: \"timeentity\", value: timeEntity },\n\t{ type: \"datetimeentity\", value: datetimeEntity },\n\t{ type: \"localdatetimeentity\", value: datetimeEntity },\n\t{ type: \"zoneddatetimeentity\", value: datetimeEntity },\n\t{ type: \"longentity\", value: longEntity },\n\t{ type: \"booleanentity\", value: booleanEntity },\n\t{ type: \"binaryentity\", value: binaryEntity },\n\t{ type: \"many-to-oneentity\", value: manyToOneEntity },\n\t{ type: \"many-to-manyentity\", value: manyToManyEntity },\n\t{ type: \"one-to-manyentity\", value: oneToManyEntity },\n\t{ type: \"one-to-oneentity\", value: oneToOneEntity },\n\t{ type: \"menu\", value: menuOption },\n\t{ type: \"item\", value: menuItemOption },\n\t{ type: \"divider\", value: dividerOption },\n\t{ type: \"hilite\", value: hiliteOption },\n];\n\nexport default options;\n","/** Set field types */\nexport const StringField = ({ ...props }) => ({\n\ttype: \"string\",\n\t...props,\n});\n\nexport const ObjectSelectionField = ({ ...props }) => ({\n\ttype: \"objectSelection\",\n\t...props,\n});\n\nexport const IntegerField = ({ ...props }) => ({\n\ttype: \"integer\",\n\t...props,\n});\n\nexport const SelectField = ({ ...props }) => ({\n\ttype: \"select\",\n\tvalueField: \"name\",\n\t...props,\n});\n\nexport const StaticSelectField = ({ ...props }) => ({\n\ttype: \"staticSelect\",\n\t...props,\n});\n\nexport const BooleanField = ({ ...props }) => ({\n\ttype: \"boolean\",\n\t...props,\n});\n\nexport default {\n\tStringField,\n\tObjectSelectionField,\n\tIntegerField,\n\tSelectField,\n\tStaticSelectField,\n\tBooleanField,\n};\n","import React from \"react\";\nimport classNames from \"classnames\";\nimport Grid from \"./Grid\";\nimport { TYPE } from \"../constants\";\nimport { translate } from \"../utils\";\n\n/**\n * Panel Component\n * Used As Container to group Field Component like form group\n */\nfunction PanelComponent({ id, attrs, design, isTab = false, ...rest }) {\n\tconst errors = rest.errorList[id] || {};\n\treturn (\n\t\t<React.Fragment>\n\t\t\t{(attrs.title ||\n\t\t\t\t[TYPE.toolbar, TYPE.menubar].includes(attrs.serverType)) && (\n\t\t\t\t<div\n\t\t\t\t\tclassName={classNames(\"panel-header\", {\n\t\t\t\t\t\tinline: isTab,\n\t\t\t\t\t})}\n\t\t\t\t>\n\t\t\t\t\t{translate(attrs.title || attrs.autoTitle)}\n\t\t\t\t\t{attrs.serverType === TYPE.toolbar && (\n\t\t\t\t\t\t<i className=\"fa fa-wrench\" title=\"toolbar\" />\n\t\t\t\t\t)}\n\t\t\t\t\t{attrs.serverType === TYPE.menubar && (\n\t\t\t\t\t\t<i className=\"fa fa-bars\" title=\"menubar\" />\n\t\t\t\t\t)}\n\t\t\t\t</div>\n\t\t\t)}\n\t\t\t{errors.items && !isTab && (\n\t\t\t\t<div className={classNames(\"panel-children-error\")}>{errors.items}</div>\n\t\t\t)}\n\t\t\t{!isTab && (\n\t\t\t\t<Grid\n\t\t\t\t\tdesign={design}\n\t\t\t\t\tclassName=\"panel-body\"\n\t\t\t\t\titems={attrs.items || []}\n\t\t\t\t\tattrs={attrs}\n\t\t\t\t\tpanelId={id}\n\t\t\t\t\t_type={rest._type}\n\t\t\t\t\terrorList={rest.errorList}\n\t\t\t\t\tcanRemove={rest.canRemove}\n\t\t\t\t/>\n\t\t\t)}\n\t\t</React.Fragment>\n\t);\n}\n\nexport default React.memo(PanelComponent);\n","import { getExtendJson2, getWidgetObject } from \"./extensionGenerator\";\nimport { MODEL_TYPE } from \"./../constants\";\nimport Utils from \"./../utils\";\n\nfunction setAttributeOnNewWidget(items, widget, widgetId, state) {\n\tconst widgets = state.widgets;\n\tlet inserted = false;\n\tconst getWidgetName = () => widgets[widgetId] && widgets[widgetId].name;\n\tfor (let i = 0; i < items.length; i++) {\n\t\tconst item = items[i];\n\t\tif (item.name === getWidgetName()) {\n\t\t\titem[widget.attributes.name] = widget.attributes.value;\n\t\t\tinserted = true;\n\t\t}\n\t\tif (inserted) {\n\t\t\tbreak;\n\t\t}\n\t\tif (item.items && item.items.length) {\n\t\t\tconst _inserted = setAttributeOnNewWidget(\n\t\t\t\titem.items,\n\t\t\t\twidget,\n\t\t\t\twidgetId,\n\t\t\t\tstate\n\t\t\t);\n\t\t\tif (_inserted) {\n\t\t\t\tinserted = _inserted;\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t}\n\treturn inserted;\n}\n\nexport function generateExtension(list, state) {\n\tconst cleatVirtualAction = () => {\n\t\tconst exemptedAttributes = [\n\t\t\t\"widgetAttrs\",\n\t\t\t\"items\",\n\t\t\t\"current\",\n\t\t\t\"elements\",\n\t\t\t\"tz\",\n\t\t\t\"targetModel\",\n\t\t\t\"_type\",\n\t\t];\n\t\t[...list].forEach((item, i) => {\n\t\t\tif (item.name === \"insert\") {\n\t\t\t\tconst id = item.id;\n\t\t\t\tconst removeIndex = list.findIndex(\n\t\t\t\t\t(item) => item.name === \"replace\" && item.id === id && !item.target\n\t\t\t\t);\n\t\t\t\tconst insertIndex = list.findIndex(\n\t\t\t\t\t(item) => item.id === id && item.name === \"insert\"\n\t\t\t\t);\n\t\t\t\tif (removeIndex !== -1) {\n\t\t\t\t\tlist.splice(removeIndex, 1);\n\t\t\t\t\tlist.splice(insertIndex, 1);\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (item.name === \"attribute\") {\n\t\t\t\tconst id = item.id;\n\t\t\t\t// set blank values for default value\n\t\t\t\tif (\n\t\t\t\t\titem.attributes &&\n\t\t\t\t\tUtils.isDefaultValue(item.attributes.name, item.attributes.value)\n\t\t\t\t) {\n\t\t\t\t\tconst attrIndex = list.findIndex(\n\t\t\t\t\t\t(e) =>\n\t\t\t\t\t\t\te.id === id &&\n\t\t\t\t\t\t\te.name === \"attribute\" &&\n\t\t\t\t\t\t\te.attributes.name === item.attributes.name\n\t\t\t\t\t);\n\t\t\t\t\tlist.splice(attrIndex, 1, {\n\t\t\t\t\t\t...list[attrIndex],\n\t\t\t\t\t\tattributes: {\n\t\t\t\t\t\t\t...list[attrIndex].attributes,\n\t\t\t\t\t\t\tvalue: item.attributes.value,\n\t\t\t\t\t\t},\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\tif (\n\t\t\t\t\titem.attributes &&\n\t\t\t\t\texemptedAttributes.includes(item.attributes.name)\n\t\t\t\t) {\n\t\t\t\t\tconst attrIndex = list.findIndex(\n\t\t\t\t\t\t(item) =>\n\t\t\t\t\t\t\titem.id === id &&\n\t\t\t\t\t\t\titem.name === \"attribute\" &&\n\t\t\t\t\t\t\texemptedAttributes.includes(item.attributes.name)\n\t\t\t\t\t);\n\t\t\t\t\tlist.splice(attrIndex, 1);\n\t\t\t\t} else {\n\t\t\t\t\tlet processed = false;\n\t\t\t\t\tconst getWidgetName = () =>\n\t\t\t\t\t\tstate.widgets[id] && state.widgets[id].name;\n\t\t\t\t\tfor (let k = 0; k < state.extensionMoves.length; k++) {\n\t\t\t\t\t\tconst move = state.extensionMoves[k];\n\t\t\t\t\t\tif (move.name === \"insert\") {\n\t\t\t\t\t\t\tconst { elements } = move;\n\t\t\t\t\t\t\tfor (let j = 0; j < elements.length; j++) {\n\t\t\t\t\t\t\t\tconst element = elements[j];\n\t\t\t\t\t\t\t\tif (element.name === getWidgetName()) {\n\t\t\t\t\t\t\t\t\tstate.extensionMoves[k].elements[j][item.attributes.name] =\n\t\t\t\t\t\t\t\t\t\titem.attributes.value;\n\t\t\t\t\t\t\t\t\tprocessed = true;\n\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tif (element.items && element.items.length) {\n\t\t\t\t\t\t\t\t\tlet inserted = setAttributeOnNewWidget(\n\t\t\t\t\t\t\t\t\t\telement.items,\n\t\t\t\t\t\t\t\t\t\titem,\n\t\t\t\t\t\t\t\t\t\tid,\n\t\t\t\t\t\t\t\t\t\tstate\n\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\tif (inserted) {\n\t\t\t\t\t\t\t\t\t\tprocessed = true;\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (processed) {\n\t\t\t\t\t\t\tconst attrIndex = list.findIndex(\n\t\t\t\t\t\t\t\t(item) => item.id === id && item.name === \"attribute\"\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\tlist.splice(attrIndex, 1);\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t};\n\tcleatVirtualAction();\n\tstate.extensionMoves.push(...list);\n}\n\nconst generateNestedView = (items) => {\n\tconst _items = items.map((item) => {\n\t\tlet _subItems = [];\n\t\tif (item.items) {\n\t\t\t_subItems = generateNestedView(item.items);\n\t\t}\n\t\treturn getWidgetObject(\n\t\t\t{ ...item, elements: _subItems },\n\t\t\t[],\n\t\t\tnull,\n\t\t\tMODEL_TYPE.BASE\n\t\t);\n\t});\n\n\treturn _items;\n};\n\nexport function getXML(extensionMoves, state) {\n\tconst patches = extensionMoves\n\t\t.map((move) => {\n\t\t\tlet fields;\n\t\t\tif (move.name === \"insert\") {\n\t\t\t\tfields = move.elements\n\t\t\t\t\t.map((field) => {\n\t\t\t\t\t\tif (field && field.items && field.items.length) {\n\t\t\t\t\t\t\tconst f = { ...field };\n\t\t\t\t\t\t\tf.elements = generateNestedView(field.items);\n\t\t\t\t\t\t\treturn f;\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn field;\n\t\t\t\t\t})\n\t\t\t\t\t.filter((e) => e);\n\t\t\t}\n\t\t\tif (!move.target) {\n\t\t\t\treturn undefined;\n\t\t\t}\n\t\t\treturn getExtendJson2({\n\t\t\t\ttarget: move.target,\n\t\t\t\tposition: move.position,\n\t\t\t\tsource: move.source,\n\t\t\t\ttype: move.name,\n\t\t\t\twidgetAttrs: fields,\n\t\t\t\t...move.attributes,\n\t\t\t});\n\t\t})\n\t\t.filter((e) => e);\n\treturn patches;\n}\n\nfunction insertOnNewPanel(items, widget, panelId, state) {\n\tconst widgets = state.widgets;\n\tlet inserted = false;\n\tconst getPanelName = () => widgets[panelId].name;\n\tfor (let i = 0; i < items.length; i++) {\n\t\tconst item = items[i];\n\t\tif (item.name === getPanelName()) {\n\t\t\tif (item.items) {\n\t\t\t\titem.items.push(widget);\n\t\t\t} else {\n\t\t\t\titem.items = [widget];\n\t\t\t}\n\t\t\tinserted = true;\n\t\t}\n\t\tif (inserted) {\n\t\t\tbreak;\n\t\t}\n\t\tif (item.items && item.items.length) {\n\t\t\tconst _inserted = insertOnNewPanel(item.items, widget, panelId, state);\n\t\t\tif (_inserted) {\n\t\t\t\tinserted = _inserted;\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t}\n\treturn inserted;\n}\n\nexport function processMoves(state, widget, id, panelId) {\n\tconst list = [];\n\tlet processed = false;\n\tconst widgets = state.widgets;\n\tconst getPanelName = () => widgets[panelId].name;\n\tfor (let i = 0; i < state.extensionMoves.length; i++) {\n\t\tconst move = state.extensionMoves[i];\n\t\tif (move.name === \"insert\") {\n\t\t\tconst { elements } = move;\n\t\t\tfor (let j = 0; j < elements.length; j++) {\n\t\t\t\tconst element = elements[j];\n\t\t\t\tif (\n\t\t\t\t\telement.name === getPanelName() &&\n\t\t\t\t\telement.items &&\n\t\t\t\t\telement.items.length === 0\n\t\t\t\t) {\n\t\t\t\t\tstate.extensionMoves[i].elements[j].items.push(widget);\n\t\t\t\t\tprocessed = true;\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t\tif (element.items && element.items.length) {\n\t\t\t\t\tlet inserted = insertOnNewPanel(\n\t\t\t\t\t\telement.items,\n\t\t\t\t\t\twidget,\n\t\t\t\t\t\tpanelId,\n\t\t\t\t\t\tstate\n\t\t\t\t\t);\n\t\t\t\t\tif (inserted) {\n\t\t\t\t\t\tprocessed = true;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tif (processed) {\n\t\t\tbreak;\n\t\t}\n\t}\n\tif (processed) {\n\t\tif (widget.xPath) {\n\t\t\tlist.push({ name: \"replace\", target: widget.xPath });\n\t\t}\n\t}\n\treturn list;\n}\n","import properties from \"./../Properties/list\";\nimport { MODEL_TYPE, TYPE } from \"./../constants\";\nimport { translate } from \"../utils\";\n\nexport function validate(field, modelType, isCustomField = false) {\n\tconst errors = {};\n\tlet selectedType =\n\t\tfield.serverType === \"field\" ? field.type : field.serverType || field.type;\n\tselectedType = selectedType && selectedType.toLowerCase().replace(/_/g, \"-\");\n\tlet property = properties.find((option) => option.type === selectedType);\n\tif (selectedType === \"form\") {\n\t\tif (modelType === MODEL_TYPE.CUSTOM) {\n\t\t\tproperty = properties.find((option) => option.type === \"modelForm\");\n\t\t} else if (modelType === MODEL_TYPE.ENTITY) {\n\t\t\tproperty = properties.find((option) => option.type === \"entityForm\");\n\t\t}\n\t}\n\tif (\n\t\t!isCustomField &&\n\t\tmodelType === MODEL_TYPE.BASE &&\n\t\t[\n\t\t\tTYPE.panel,\n\t\t\tTYPE.panelStack,\n\t\t\tTYPE.tabs,\n\t\t\tTYPE.menu,\n\t\t\tTYPE.menubar,\n\t\t\tTYPE.toolbar,\n\t\t].includes(selectedType)\n\t) {\n\t\tif (field.items && field.items.length === 0) {\n\t\t\tconst message =\n\t\t\t\tselectedType === TYPE.menu\n\t\t\t\t\t? translate(\"Atleast one menu item required\")\n\t\t\t\t\t: translate(\"Atleast one children required\");\n\t\t\terrors[\"items\"] = message;\n\t\t}\n\t}\n\tif (!property) {\n\t\treturn errors;\n\t}\n\tconst propertyList = Object.keys(property.value).reduce((lst = [], key) => {\n\t\treturn [...lst, ...property.value[key]];\n\t}, []);\n\tpropertyList.forEach((property) => {\n\t\tconst addErrorMessage = () => {\n\t\t\terrors[property.name] = `${translate(\n\t\t\t\tproperty.title || property.name\n\t\t\t)} ${translate(\"required\")}`;\n\t\t};\n\t\tif (\n\t\t\t(property.requiredFor &&\n\t\t\t\tproperty.requiredFor.includes(selectedType) &&\n\t\t\t\t!field[property.name]) ||\n\t\t\t(property.required && !field[property.name])\n\t\t) {\n\t\t\taddErrorMessage();\n\t\t}\n\t\tif (\n\t\t\tproperty.requiredWhen &&\n\t\t\t(property.requiredNegation\n\t\t\t\t? !field[property.requiredWhen]\n\t\t\t\t: field[property.requiredWhen]) &&\n\t\t\t!field[property.name]\n\t\t) {\n\t\t\tif (field.isSelectionField) {\n\t\t\t\taddErrorMessage();\n\t\t\t} else if ([\"menuBuilderTitle\"].includes(property.name)) {\n\t\t\t\taddErrorMessage();\n\t\t\t} else if (\n\t\t\t\t[\"selectionText\"].includes(property.name) &&\n\t\t\t\tfield.updateSelection\n\t\t\t) {\n\t\t\t\taddErrorMessage();\n\t\t\t}\n\t\t}\n\t\tif (property.regex) {\n\t\t\tconst re = new RegExp(property.regex);\n\t\t\tif (!re.test(field[property.name]) && !errors[property.name]) {\n\t\t\t\terrors[property.name] = translate(property.regexErrorMessage);\n\t\t\t}\n\t\t}\n\t});\n\treturn errors;\n}\n\nexport function validateParentPanelItems(state, panelId) {\n\tconst panel = state.widgets[panelId];\n\tconst errors = state.errorList[panelId] || {};\n\tif (panel) {\n\t\tif (panel.items && panel.items.length > 0) {\n\t\t\tif (errors.items) {\n\t\t\t\tdelete errors.items;\n\t\t\t}\n\t\t} else {\n\t\t\terrors.items = translate(\"Atleast one children required\");\n\t\t}\n\t\tif (Object.keys(errors).length) {\n\t\t\tstate.errorList[panelId] = errors;\n\t\t} else {\n\t\t\tdelete state.errorList[panelId];\n\t\t}\n\t}\n}\n\nexport function validateOnRemove(state, id) {\n\tconst errors = state.errorList[id];\n\tif (errors) {\n\t\tdelete state.errorList[id];\n\t}\n}\n","import {\n\tTYPE,\n\tIDS,\n\tItemTypes,\n\tentityFieldTypes as entityTypes,\n} from \"./constants\";\n\nexport const fieldTypes = [\n\t{\n\t\tname: \"Common\",\n\t\tvalue: [\n\t\t\t{\n\t\t\t\tname: \"label\",\n\t\t\t\ttitle: \"Label\",\n\t\t\t\ttype: \"label\",\n\t\t\t\timage: \"label.png\",\n\t\t\t\tid: IDS.createWidgets.field,\n\t\t\t\tserverType: \"label\",\n\t\t\t\tcolSpan: 6,\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: \"button\",\n\t\t\t\ttype: \"button\",\n\t\t\t\ttitle: \"Button\",\n\t\t\t\timage: \"button.png\",\n\t\t\t\tid: IDS.createWidgets.field,\n\t\t\t\tserverType: \"button\",\n\t\t\t\tcolSpan: 6,\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: \"separator\",\n\t\t\t\ttype: \"separator\",\n\t\t\t\ttitle: \"Separator\",\n\t\t\t\timage: \"seperator.png\",\n\t\t\t\tid: IDS.createWidgets.field,\n\t\t\t\tserverType: \"separator\",\n\t\t\t\tcolSpan: 6,\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: \"spacer\",\n\t\t\t\ttype: \"spacer\",\n\t\t\t\ttitle: \"Spacer\",\n\t\t\t\tserverType: \"spacer\",\n\t\t\t\timage: \"line_spacing.png\",\n\t\t\t\tid: IDS.createWidgets.field,\n\t\t\t\tcolSpan: 6,\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: \"selection\",\n\t\t\t\ttitle: \"Selection\",\n\t\t\t\ttype: ItemTypes.ITEM,\n\t\t\t\timage: \"integer.png\",\n\t\t\t\tid: IDS.createWidgets.field,\n\t\t\t\tserverType: \"string\",\n\t\t\t\tisSelectionField: true,\n\t\t\t\tcolSpan: 6,\n\t\t\t},\n\t\t],\n\t},\n\t{\n\t\tname: \"Panels\",\n\t\tvalue: [\n\t\t\t{\n\t\t\t\tname: \"panel\",\n\t\t\t\ttype: ItemTypes.CONTAINER,\n\t\t\t\titems: [],\n\t\t\t\timage: \"panel.png\",\n\t\t\t\tid: IDS.createWidgets.panel,\n\t\t\t\tserverType: TYPE.panel,\n\t\t\t\tcols: 12,\n\t\t\t\tlayout: \"grid\",\n\t\t\t\tcolSpan: 12,\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: \"Tabs\",\n\t\t\t\ttype: TYPE.tabs,\n\t\t\t\timage: \"panel_tabs.png\",\n\t\t\t\ttab: true,\n\t\t\t\titems: [],\n\t\t\t\tid: IDS.createWidgets.tabs,\n\t\t\t\tserverType: TYPE.panel,\n\t\t\t\tisNew: true,\n\t\t\t\tcolSpan: 12,\n\t\t\t\ttitle: \"Tabs\",\n\t\t\t\tcurrent: null,\n\t\t\t\tlayout: \"grid\",\n\t\t\t},\n\t\t],\n\t},\n];\n\nexport const modelFields = [\n\t{\n\t\tname: \"Fields\",\n\t\tvalue: [\n\t\t\t{\n\t\t\t\tname: \"string\",\n\t\t\t\ttype: ItemTypes.ITEM,\n\t\t\t\ttitle: \"String\",\n\t\t\t\timage: \"string.png\",\n\t\t\t\tid: IDS.createWidgets.field,\n\t\t\t\tisModelField: true,\n\t\t\t\tserverType: \"string\",\n\t\t\t\tcolSpan: 6,\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: \"integer\",\n\t\t\t\ttype: ItemTypes.ITEM,\n\t\t\t\ttitle: \"Integer\",\n\t\t\t\timage: \"integer.png\",\n\t\t\t\tid: IDS.createWidgets.field,\n\t\t\t\tisModelField: true,\n\t\t\t\tserverType: \"integer\",\n\t\t\t\tcolSpan: 6,\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: \"decimal\",\n\t\t\t\ttype: ItemTypes.ITEM,\n\t\t\t\ttitle: \"Decimal\",\n\t\t\t\timage: \"decimal.png\",\n\t\t\t\tid: IDS.createWidgets.field,\n\t\t\t\tisModelField: true,\n\t\t\t\tserverType: \"decimal\",\n\t\t\t\tcolSpan: 6,\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: \"boolean\",\n\t\t\t\ttype: ItemTypes.ITEM,\n\t\t\t\ttitle: \"Boolean\",\n\t\t\t\timage: \"boolean.png\",\n\t\t\t\tid: IDS.createWidgets.field,\n\t\t\t\tisModelField: true,\n\t\t\t\tserverType: \"boolean\",\n\t\t\t\tcolSpan: 6,\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: \"datetime\",\n\t\t\t\ttype: ItemTypes.ITEM,\n\t\t\t\ttitle: \"Date time\",\n\t\t\t\timage: \"datetime.png\",\n\t\t\t\tid: IDS.createWidgets.field,\n\t\t\t\tisModelField: true,\n\t\t\t\tserverType: \"datetime\",\n\t\t\t\tcolSpan: 6,\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: \"date\",\n\t\t\t\ttype: ItemTypes.ITEM,\n\t\t\t\ttitle: \"Date\",\n\t\t\t\timage: \"date.png\",\n\t\t\t\tid: IDS.createWidgets.field,\n\t\t\t\tisModelField: true,\n\t\t\t\tserverType: \"date\",\n\t\t\t\tcolSpan: 6,\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: \"time\",\n\t\t\t\ttype: ItemTypes.ITEM,\n\t\t\t\ttitle: \"Time\",\n\t\t\t\timage: \"time.png\",\n\t\t\t\tid: IDS.createWidgets.field,\n\t\t\t\tisModelField: true,\n\t\t\t\tserverType: \"time\",\n\t\t\t\tcolSpan: 6,\n\t\t\t},\n\t\t],\n\t},\n\t{\n\t\tname: \"Relational fields\",\n\t\tvalue: [\n\t\t\t{\n\t\t\t\tname: \"manyToOne\",\n\t\t\t\ttype: ItemTypes.ITEM,\n\t\t\t\ttitle: \"Many to one\",\n\t\t\t\timage: \"many-to-one.png\",\n\t\t\t\tid: IDS.createWidgets.field,\n\t\t\t\tisModelField: true,\n\t\t\t\tserverType: \"many-to-one\",\n\t\t\t\tcolSpan: 6,\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: \"oneToMany\",\n\t\t\t\ttype: ItemTypes.ITEM,\n\t\t\t\ttitle: \"One to many\",\n\t\t\t\timage: \"one-to-many.png\",\n\t\t\t\tid: IDS.createWidgets.field,\n\t\t\t\tisModelField: true,\n\t\t\t\tserverType: \"one-to-many\",\n\t\t\t\tcolSpan: 6,\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: \"manyToMany\",\n\t\t\t\ttype: ItemTypes.ITEM,\n\t\t\t\ttitle: \"Many to many\",\n\t\t\t\timage: \"many-to-many.png\",\n\t\t\t\tid: IDS.createWidgets.field,\n\t\t\t\tisModelField: true,\n\t\t\t\tserverType: \"many-to-many\",\n\t\t\t\tcolSpan: 6,\n\t\t\t},\n\t\t],\n\t},\n];\n\nexport const entityFields = [\n\t{\n\t\tname: \"Fields\",\n\t\tvalue: [\n\t\t\t{\n\t\t\t\tname: \"string\",\n\t\t\t\ttype: entityTypes.string,\n\t\t\t\timage: \"string.png\",\n\t\t\t\tid: IDS.createWidgets.field,\n\t\t\t\tcolSpan: 12,\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: \"boolean\",\n\t\t\t\ttype: entityTypes.boolean,\n\t\t\t\timage: \"boolean.png\",\n\t\t\t\tid: IDS.createWidgets.field,\n\t\t\t\tcolSpan: 12,\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: \"long\",\n\t\t\t\ttype: entityTypes.long,\n\t\t\t\timage: \"long.png\",\n\t\t\t\tid: IDS.createWidgets.field,\n\t\t\t\tcolSpan: 12,\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: \"integer\",\n\t\t\t\ttype: entityTypes.integer,\n\t\t\t\timage: \"integer.png\",\n\t\t\t\tid: IDS.createWidgets.field,\n\t\t\t\tcolSpan: 12,\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: \"decimal\",\n\t\t\t\ttype: entityTypes.decimal,\n\t\t\t\timage: \"decimal.png\",\n\t\t\t\tid: IDS.createWidgets.field,\n\t\t\t\tcolSpan: 12,\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: \"date\",\n\t\t\t\ttype: entityTypes.date,\n\t\t\t\timage: \"date.png\",\n\t\t\t\tid: IDS.createWidgets.field,\n\t\t\t\tcolSpan: 12,\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: \"time\",\n\t\t\t\ttype: entityTypes.time,\n\t\t\t\timage: \"time.png\",\n\t\t\t\tid: IDS.createWidgets.field,\n\t\t\t\tcolSpan: 12,\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: \"datetime\",\n\t\t\t\ttype: entityTypes.datetime,\n\t\t\t\timage: \"datetime.png\",\n\t\t\t\tid: IDS.createWidgets.field,\n\t\t\t\tcolSpan: 12,\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: \"binary\",\n\t\t\t\ttype: entityTypes.binary,\n\t\t\t\timage: \"binary.png\",\n\t\t\t\tid: IDS.createWidgets.field,\n\t\t\t\tcolSpan: 12,\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: \"manyToOne\",\n\t\t\t\ttype: entityTypes.manyToOne,\n\t\t\t\timage: \"many-to-one.png\",\n\t\t\t\tid: IDS.createWidgets.field,\n\t\t\t\tcolSpan: 12,\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: \"manyToMany\",\n\t\t\t\ttype: entityTypes.manyToMany,\n\t\t\t\timage: \"many-to-many.png\",\n\t\t\t\tid: IDS.createWidgets.field,\n\t\t\t\tcolSpan: 12,\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: \"oneToMany\",\n\t\t\t\ttype: entityTypes.oneToMany,\n\t\t\t\timage: \"one-to-many.png\",\n\t\t\t\tid: IDS.createWidgets.field,\n\t\t\t\tcolSpan: 12,\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: \"oneToOne\",\n\t\t\t\ttype: entityTypes.oneToOne,\n\t\t\t\timage: \"one-to-one.png\",\n\t\t\t\tid: IDS.createWidgets.field,\n\t\t\t\tcolSpan: 12,\n\t\t\t},\n\t\t],\n\t},\n];\n","import Utils from \"./../utils\";\nimport { MODEL_TYPE, TYPE } from \"./../constants\";\n\nconst exemptedAttrs = [\n\t\"items\",\n\t\"cols\",\n\t\"serverType\",\n\t\"version\",\n\t\"type\",\n\t\"widgetAttrs\",\n\t\"current\",\n\t\"selectionList\",\n\t\"autoTitle\",\n\t\"isModelField\",\n\t\"elements\",\n\t\"relationship\",\n\t\"isDummy\",\n\t\"metaModel\",\n\t\"targetSearch\",\n\t\"layout\",\n\t\"massUpdate\",\n\t\"xPath\",\n\t\"tz\",\n];\n\nexport function getExtensionAttribute(patchList, target, keyName) {\n\tlet extend;\n\tfor (let i = 0; i < patchList.length; i++) {\n\t\tconst { elements = [], attributes: patchAttributes } = patchList[i];\n\t\tconst element = elements[0];\n\t\tif (element.name === \"attribute\" && patchAttributes.target === target) {\n\t\t\tconst attributes = element.attributes || {};\n\t\t\tif (attributes.name === keyName) {\n\t\t\t\textend = { ...patchList[i] };\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t}\n\treturn extend;\n}\n\nfunction checkTarget(target, string, check) {\n\tconst splitTarget = Utils.exploreTarget(target);\n\tif (check) {\n\t\tconst newTarget = splitTarget[check];\n\t\tif (newTarget && newTarget === string) {\n\t\t\treturn true;\n\t\t}\n\t\treturn false;\n\t}\n\treturn target === string;\n}\n\nexport function isExtensionRemove(patchList, target, check) {\n\tlet flag = false;\n\tfor (let i = 0; i < patchList.length; i++) {\n\t\tconst { attributes, elements = [] } = patchList[i];\n\t\tconst element = elements[0];\n\t\tif (\n\t\t\telement.name === \"replace\" &&\n\t\t\tattributes &&\n\t\t\tcheckTarget(attributes.target, target, check)\n\t\t) {\n\t\t\tflag = true;\n\t\t\tbreak;\n\t\t}\n\t}\n\treturn flag;\n}\n\nexport function isExtensionMove(patchList, widget, parentWidget) {\n\tlet flag = false;\n\tfor (let i = 0; i < patchList.length; i++) {\n\t\tconst { elements = [] } = patchList[i];\n\t\tconst element = elements[0];\n\t\tlet sourceName = `/${Utils.getWidgetType(widget)}[@name='${widget.name}']`;\n\t\tif (parentWidget && parentWidget.name) {\n\t\t\tsourceName = `//${Utils.getWidgetType(parentWidget)}[@name='${\n\t\t\t\tparentWidget.name\n\t\t\t}']${sourceName}`;\n\t\t}\n\t\tif (\n\t\t\telement.name === \"move\" &&\n\t\t\telement.attributes &&\n\t\t\telement.attributes.source === sourceName\n\t\t) {\n\t\t\tflag = true;\n\t\t\tbreak;\n\t\t}\n\t}\n\treturn flag;\n}\n\nfunction getWidgetAttrsObject(widget, modelType = MODEL_TYPE.BASE) {\n\treturn getWidgetObject(widget, [], null, modelType);\n}\n\nexport function getExtendJson2({\n\ttarget,\n\ttype,\n\tposition,\n\tsource,\n\tname,\n\tvalue,\n\twidgetAttrs,\n\titemSource,\n\t...rest\n}) {\n\tconst attributes = { target };\n\tlet elements = [];\n\tif (widgetAttrs && ![\"replace\", \"attribute\", \"move\"].includes(type)) {\n\t\tif (Array.isArray(widgetAttrs)) {\n\t\t\telements = widgetAttrs\n\t\t\t\t.map((widget) => {\n\t\t\t\t\treturn getWidgetAttrsObject(widget);\n\t\t\t\t})\n\t\t\t\t.filter((e) => e);\n\t\t} else {\n\t\t\telements.push(getWidgetAttrsObject(widgetAttrs));\n\t\t}\n\t}\n\tif (elements.length || [\"replace\", \"attribute\", \"move\"].includes(type)) {\n\t\tconst object = {\n\t\t\tattributes,\n\t\t\ttype: \"element\",\n\t\t\tname: \"extend\",\n\t\t\telements: [\n\t\t\t\t{\n\t\t\t\t\ttype: \"element\",\n\t\t\t\t\tname: type,\n\t\t\t\t\tattributes: {\n\t\t\t\t\t\tposition,\n\t\t\t\t\t\tsource,\n\t\t\t\t\t\tname,\n\t\t\t\t\t\tvalue,\n\t\t\t\t\t},\n\t\t\t\t\telements,\n\t\t\t\t},\n\t\t\t],\n\t\t};\n\t\treturn JSON.parse(JSON.stringify(object));\n\t}\n\treturn;\n}\n\nexport function getWidgetObject(widget, other = [], view, modelType) {\n\tconst { id, image, elements = [], ...attributes } = widget;\n\tconst uiFields = [\n\t\t\"panel\",\n\t\t\"panel-related\",\n\t\t\"panel-dashlet\",\n\t\t\"panel-tabs\",\n\t\t\"panel-stack\",\n\t\t\"panel-include\",\n\t\t\"button\",\n\t\t\"label\",\n\t\t\"spacer\",\n\t\t\"separator\",\n\t\t\"menu\",\n\t\t\"item\",\n\t\t\"toolbar\",\n\t\t\"menubar\",\n\t\t\"divider\",\n\t];\n\tlet exempt = [...exemptedAttrs];\n\tlet field =\n\t\tmodelType === MODEL_TYPE.ENTITY\n\t\t\t? Utils.getEntityField(attributes.type)\n\t\t\t: uiFields.includes(attributes.type)\n\t\t\t? attributes.type\n\t\t\t: \"field\";\n\tfield = uiFields.includes(attributes.serverType)\n\t\t? attributes.serverType\n\t\t: field;\n\tfield = widget.tab ? \"panel-tabs\" : field;\n\tif (modelType === MODEL_TYPE.ENTITY) {\n\t\texempt = [\"colSpan\"];\n\t}\n\tif (attributes.type === TYPE.panelInclude) {\n\t\texempt = [...exempt, \"title\", \"colSpan\"];\n\t}\n\tif (field === TYPE.tabs) {\n\t\texempt = [...exempt, \"tab\", \"title\"];\n\t}\n\tif (field === \"spacer\") {\n\t\texempt = [...exempt, \"title\", \"isDummy\"];\n\t}\n\tif (field === TYPE.panelInclude) {\n\t\texempt = [...exempt, \"module\", \"name\"];\n\t}\n\tif ([TYPE.menu, TYPE.menuItem, TYPE.toolbar, TYPE.menubar].includes(field)) {\n\t\texempt = [...exempt, \"colSpan\"];\n\t}\n\tif ([TYPE.toolbar, TYPE.menubar].includes(field)) {\n\t\texempt = [...exempt, \"colSpan\", \"name\", \"title\"];\n\t}\n\tif ([TYPE.divider].includes(field)) {\n\t\texempt = [...exempt, \"colSpan\", \"title\"];\n\t}\n\tlet object = {};\n\tobject = {\n\t\tattributes: {\n\t\t\t...Utils.getWidgetAttrs(attributes, exempt, modelType),\n\t\t},\n\t\ttype: \"element\",\n\t\tname: field,\n\t\telements: [...other, ...elements],\n\t};\n\treturn object;\n}\n\nexport function generateView(widgets, items, modelType) {\n\tlet view = {};\n\tlet elements = [];\n\tif (items.length) {\n\t\titems.forEach((item) => {\n\t\t\tconst widget = widgets[item];\n\t\t\tlet subViews = [];\n\t\t\tif (widget) {\n\t\t\t\tif (widget.items && widget.items.length) {\n\t\t\t\t\tsubViews = generateView(widgets, widget.items, modelType);\n\t\t\t\t}\n\t\t\t\telements.push({\n\t\t\t\t\t...getWidgetObject(widget, subViews, view, modelType),\n\t\t\t\t});\n\t\t\t}\n\t\t});\n\t}\n\treturn elements;\n}\n","import React from \"react\";\nimport classNames from \"classnames\";\nimport Grid from \"./Grid\";\nimport { translate } from \"../utils\";\n\n/**\n * Menu Component\n * Used As Container to group Field Component like form group\n */\nfunction MenuComponent({ id, attrs, design, isTab = true, ...rest }) {\n\tconst errors = rest.errorList[id] || {};\n\tconst [openMenu, setOpenMenu] = React.useState(false);\n\n\tconst handleToggleMenu = React.useCallback((e) => {\n\t\te.stopPropagation();\n\t\tsetOpenMenu((m) => !m);\n\t}, []);\n\n\tconst arrow = openMenu ? \"down\" : \"up\";\n\treturn (\n\t\t<React.Fragment>\n\t\t\t<div\n\t\t\t\tclassName={classNames(\"menu-header\", {\n\t\t\t\t\tinline: isTab,\n\t\t\t\t})}\n\t\t\t>\n\t\t\t\t<div className=\"menu-toggle-button\" onClick={handleToggleMenu}>\n\t\t\t\t\t<i className={`fa fa-chevron-${arrow}`} />\n\t\t\t\t</div>\n\t\t\t\t<span>{translate(attrs.title || attrs.autoTitle)}</span>\n\t\t\t\t<div className=\"menu-toggle-button\" onClick={handleToggleMenu}>\n\t\t\t\t\t<i className={`fa fa-chevron-${arrow}`} />\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t{errors.items && !isTab && (\n\t\t\t\t<div className={classNames(\"panel-children-error\")}>{errors.items}</div>\n\t\t\t)}\n\t\t\t{openMenu && (\n\t\t\t\t<Grid\n\t\t\t\t\tdesign={design}\n\t\t\t\t\tclassName=\"panel-body\"\n\t\t\t\t\titems={attrs.items || []}\n\t\t\t\t\tattrs={attrs}\n\t\t\t\t\tpanelId={id}\n\t\t\t\t\t_type={rest._type}\n\t\t\t\t\terrorList={rest.errorList}\n\t\t\t\t\tcanRemove={rest.canRemove}\n\t\t\t\t/>\n\t\t\t)}\n\t\t</React.Fragment>\n\t);\n}\n\nexport default React.memo(MenuComponent);\n","import Field from \"./Field\";\nimport Panel from \"./Panel\";\nimport TabPanel from \"./TabPanel\";\nimport Form from \"./Form\";\nimport Menu from \"./Menu\";\n\n// common Registery contains all Form Components\nconst Registery = {\n\tfield: { component: Field, props: { className: \"field-container\" } },\n\tdump_field: {\n\t\tcomponent: Field,\n\t\tprops: { className: \"field-container dump\" },\n\t},\n\tpanel: { component: Panel, props: { className: \"panel\" } },\n\tmenubar: { component: Panel, props: { className: \"panel menubar\" } },\n\tmenu: { component: Menu, props: { className: \"panel menu\" } },\n\ttoolbar: { component: Panel, props: { className: \"panel toolbar\" } },\n\t\"panel-stack\": { component: Panel, props: { className: \"panel\" } },\n\t\"panel-include\": { component: Panel, props: { className: \"panel\" } },\n\tform: { component: Form, props: { className: \"form-layout\" } },\n\tcustomForm: { component: Form, props: { className: \"form-layout\" } },\n\t\"panel-tabs\": {\n\t\tcomponent: TabPanel,\n\t\tprops: { className: \"panel tabs-panel\" },\n\t},\n};\n\nexport default Registery;\n","import React from \"react\";\nimport classNames from \"classnames\";\nimport { compose } from \"recompose\";\nimport { DragSource, DropTarget } from \"react-dnd\";\n\nimport { useStore } from \"../store/context\";\nimport { TYPE as WIDGET_TYPE, IDS, MODEL_TYPE, FIELD_TYPE } from \"../constants\";\nimport Registry from \"./Registery\";\nimport { translate } from \"../utils\";\n\n// Unique Type for Widget\nconst TYPE = Symbol();\n\n// DragSource\nconst CardSource = {\n\t// evaluate widget is draggable or not\n\tcanDrag(props) {\n\t\tconst { state } = props;\n\t\tconst isCustomField = props._type === \"customField\";\n\t\t// temporary restrict real view movement\n\t\tif (\n\t\t\tstate.modelType === MODEL_TYPE.BASE &&\n\t\t\t!isCustomField &&\n\t\t\t!props.isPalleteField\n\t\t) {\n\t\t\treturn;\n\t\t}\n\t\treturn !(\n\t\t\tprops.id === IDS.dumpField ||\n\t\t\tprops.attrs.draggable === false ||\n\t\t\tprops.attrs.isDummy ||\n\t\t\tprops.attrs.type === WIDGET_TYPE.form\n\t\t);\n\t},\n\t// event, raise when start dragging widget\n\tbeginDrag(props) {\n\t\tconst _props = { ...props };\n\t\tconst isPanel = _props.attrs.serverType === \"panel\";\n\t\tif (\n\t\t\tprops.state.modelType === MODEL_TYPE.CUSTOM ||\n\t\t\tprops._type === \"customField\"\n\t\t) {\n\t\t\t_props.attrs = {\n\t\t\t\t..._props.attrs,\n\t\t\t\tmodel: \"com.axelor.meta.db.MetaJsonRecord\",\n\t\t\t\tmodelField: \"attrs\",\n\t\t\t\twidgetAttrs: JSON.stringify({\n\t\t\t\t\tcolSpan: JSON.parse(_props.attrs.widgetAttrs || \"{}\").colSpan,\n\t\t\t\t\tshowTitle: !isPanel,\n\t\t\t\t}),\n\t\t\t};\n\t\t} else if (props.state.modelType === MODEL_TYPE.BASE) {\n\t\t\tif (_props.attrs.isModelField) {\n\t\t\t\t_props.attrs = {\n\t\t\t\t\t..._props.attrs,\n\t\t\t\t\t...(_props.attrs.serverType !== \"field\" && {\n\t\t\t\t\t\ttype: _props.attrs.serverType,\n\t\t\t\t\t}),\n\t\t\t\t\tserverType: \"field\",\n\t\t\t\t};\n\t\t\t}\n\t\t\t_props.attrs = {\n\t\t\t\t..._props.attrs,\n\t\t\t\twidgetAttrs: JSON.stringify({\n\t\t\t\t\tshowTitle: !isPanel,\n\t\t\t\t}),\n\t\t\t};\n\t\t}\n\t\tprops.onDrag(props.id, { props: _props });\n\t\treturn { ...props };\n\t},\n\t// event, raise when dragging widget is droped on target or somewhere else\n\t// reset tasks\n\tendDrag(props, monitor) {\n\t\t// check widget is dropped or not, if not reset back to its position for existing element\n\t\t// for new element, remove it from schema\n\t\tprops.onDrag(null, {\n\t\t\tisDrop: monitor.didDrop(),\n\t\t\tprops: {},\n\t\t\tnewProps: monitor.getItem(),\n\t\t});\n\t},\n\t// currently dragged element, special case for nested drag source\n\tisDragging(props, monitor) {\n\t\treturn props.id === monitor.getItem().id;\n\t},\n};\n\n// DropTarget\nconst CardTarget = {\n\t// event, raised when one widget is hover on another widget\n\n\thover(props, monitor) {\n\t\tlet {\n\t\t\tindex: dragIndex,\n\t\t\tpanelId: dragPanelId,\n\t\t\tid: dragId,\n\t\t\tattrs: dragAttrs,\n\t\t} = monitor.getItem();\n\t\tlet {\n\t\t\tindex: hoverIndex,\n\t\t\tpanelId: hoverPanelId,\n\t\t\tid: hoverId,\n\t\t\tattrs: hoverAttrs,\n\t\t\tstate,\n\t\t\tmeta,\n\t\t\tsetHoverAttr,\n\t\t} = props;\n\t\tconst panelSet = [\n\t\t\tWIDGET_TYPE.panel,\n\t\t\tWIDGET_TYPE.panelDashlet,\n\t\t\tWIDGET_TYPE.panelRelated,\n\t\t\tWIDGET_TYPE.panelInclude,\n\t\t];\n\t\tconst isCustomField = props._type === \"customField\";\n\t\tconst widgets =\n\t\t\tprops._type === \"customField\" ? state.customFieldWidgets : state.widgets;\n\t\tconst parentPanel = props.panelId ? widgets[props.panelId] : null;\n\n\t\t/**\n\t\t * Don't allow tabs to move if in edit state\n\t\t * Don't allow tabs drop in first row or in between panels\n\t\t */\n\t\tif (!meta) return;\n\t\tif (dragAttrs.type === WIDGET_TYPE.tabs) {\n\t\t\tif (meta.row === 0 && !dragAttrs.isNew) return;\n\t\t\tif (meta.grid) {\n\t\t\t\tlet maxIndex = Math.max(...meta.grid.map((o) => o.rowIndex));\n\t\t\t\tif (meta.row < maxIndex) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\t//Don't allow panel after tabs\n\t\tif (dragAttrs.type === WIDGET_TYPE.panel) {\n\t\t\tconst { grid, row } = meta;\n\t\t\tconst gridTab = grid && grid.find((f) => f.type === WIDGET_TYPE.tabs);\n\t\t\tif (gridTab && gridTab.rowIndex < row) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t}\n\n\t\t// temporary restrict real view movement\n\t\tif (state.modelType === MODEL_TYPE.BASE && !isCustomField) {\n\t\t\treturn;\n\t\t}\n\t\tif (state.modelType !== MODEL_TYPE.ENTITY) {\n\t\t\tif ([WIDGET_TYPE.menubar, WIDGET_TYPE.toolbar].includes(dragAttrs.type)) {\n\t\t\t\tconst bar = Object.values(state.widgets || {}).find((w) =>\n\t\t\t\t\t[WIDGET_TYPE.menubar, WIDGET_TYPE.toolbar].includes(w.type)\n\t\t\t\t);\n\t\t\t\tconst rowCount = bar ? 2 : 0;\n\t\t\t\tif (hoverPanelId) return;\n\t\t\t\tif (!meta) return;\n\t\t\t\tif (meta.row > rowCount || meta.col !== 1) return;\n\t\t\t}\n\t\t\tif (\n\t\t\t\t(state.modelType === MODEL_TYPE.CUSTOM || isCustomField) &&\n\t\t\t\t[WIDGET_TYPE.menubar, WIDGET_TYPE.toolbar].includes(\n\t\t\t\t\tdragAttrs.serverType\n\t\t\t\t)\n\t\t\t) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tif (\n\t\t\t\t![WIDGET_TYPE.menuItem, WIDGET_TYPE.menu, WIDGET_TYPE.divider].includes(\n\t\t\t\t\tdragAttrs.serverType\n\t\t\t\t) &&\n\t\t\t\tparentPanel &&\n\t\t\t\tparentPanel.type === WIDGET_TYPE.menu\n\t\t\t) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tif (\n\t\t\t\t[WIDGET_TYPE.menuItem, WIDGET_TYPE.divider].includes(\n\t\t\t\t\tdragAttrs.serverType\n\t\t\t\t) &&\n\t\t\t\t(!parentPanel || parentPanel.type !== WIDGET_TYPE.menu)\n\t\t\t) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tif (\n\t\t\t\t[WIDGET_TYPE.menu].includes(dragAttrs.serverType) &&\n\t\t\t\t(!parentPanel ||\n\t\t\t\t\t![WIDGET_TYPE.menu, WIDGET_TYPE.menubar].includes(parentPanel.type))\n\t\t\t) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tif (\n\t\t\t\tparentPanel &&\n\t\t\t\tparentPanel.type === WIDGET_TYPE.menubar &&\n\t\t\t\tdragAttrs.type !== WIDGET_TYPE.menu\n\t\t\t) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tif (\n\t\t\t\tparentPanel &&\n\t\t\t\tparentPanel.type === WIDGET_TYPE.toolbar &&\n\t\t\t\tdragAttrs.type !== FIELD_TYPE.button\n\t\t\t) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tif (\n\t\t\t\t!parentPanel &&\n\t\t\t\t![\n\t\t\t\t\t...panelSet,\n\t\t\t\t\tWIDGET_TYPE.tabs,\n\t\t\t\t\tWIDGET_TYPE.panelStack,\n\t\t\t\t\tWIDGET_TYPE.menubar,\n\t\t\t\t\tWIDGET_TYPE.toolbar,\n\t\t\t\t].includes(dragAttrs.type)\n\t\t\t) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\t// when stacked is true do not allow to drop field except specified panel types.\n\t\t\tif (\n\t\t\t\tparentPanel &&\n\t\t\t\tparentPanel.type === WIDGET_TYPE.panelStack &&\n\t\t\t\t!panelSet.includes(dragAttrs.type)\n\t\t\t) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tif (\n\t\t\t\tparentPanel &&\n\t\t\t\tparentPanel.type === WIDGET_TYPE.tabs &&\n\t\t\t\t!panelSet.includes(dragAttrs.type)\n\t\t\t) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tif (\n\t\t\t\tstate.modelType === MODEL_TYPE.CUSTOM ||\n\t\t\t\tprops._type === \"customField\"\n\t\t\t) {\n\t\t\t\t// let hasPanel = false;\n\t\t\t\tif (\n\t\t\t\t\t[\n\t\t\t\t\t\tWIDGET_TYPE.panelDashlet,\n\t\t\t\t\t\tWIDGET_TYPE.panelInclude,\n\t\t\t\t\t\tWIDGET_TYPE.panelRelated,\n\t\t\t\t\t\tWIDGET_TYPE.panelStack,\n\t\t\t\t\t].includes(dragAttrs.type)\n\t\t\t\t) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\t// restrict nested panel drop in custom model\n\t\t\t\tconst widgets =\n\t\t\t\t\tprops._type === \"customField\"\n\t\t\t\t\t\t? state.customFieldWidgets\n\t\t\t\t\t\t: state.widgets;\n\t\t\t\tconst stateItems =\n\t\t\t\t\tprops._type === \"customField\" ? state.customFieldItems : state.items;\n\t\t\t\tconst hasTabPanel =\n\t\t\t\t\tObject.keys(widgets).findIndex(\n\t\t\t\t\t\t(widgetKey) => widgets[widgetKey].type === WIDGET_TYPE.tabs\n\t\t\t\t\t) !== -1;\n\t\t\t\tif (\n\t\t\t\t\thasTabPanel &&\n\t\t\t\t\tdragAttrs.type === WIDGET_TYPE.tabs &&\n\t\t\t\t\tdragAttrs.isNew\n\t\t\t\t) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tif (\n\t\t\t\t\t[WIDGET_TYPE.panel, WIDGET_TYPE.tabs].includes(dragAttrs.type) &&\n\t\t\t\t\tprops.panelId &&\n\t\t\t\t\t!stateItems.includes(props.panelId)\n\t\t\t\t) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\t// paneltab can drop inside panel tab\n\t\t\t\tif (\n\t\t\t\t\tparentPanel &&\n\t\t\t\t\tdragAttrs.type === WIDGET_TYPE.panel &&\n\t\t\t\t\tparentPanel.type !== WIDGET_TYPE.tabs\n\t\t\t\t) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tif (\n\t\t\t\t\tparentPanel &&\n\t\t\t\t\tdragAttrs.type === WIDGET_TYPE.tabs &&\n\t\t\t\t\tparentPanel.type === WIDGET_TYPE.panel\n\t\t\t\t) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tconst { hoverAttr } = state;\n\t\t\t\tconst { widgetAttrs = \"{}\" } = hoverAttr;\n\t\t\t\tconst _attrs = JSON.parse(widgetAttrs);\n\n\t\t\t\tif (\n\t\t\t\t\tparentPanel &&\n\t\t\t\t\tdragAttrs.type === WIDGET_TYPE.panel &&\n\t\t\t\t\tparentPanel.type === WIDGET_TYPE.tabs &&\n\t\t\t\t\t!_attrs.tab\n\t\t\t\t) {\n\t\t\t\t\tsetHoverAttr({\n\t\t\t\t\t\ttitle: dragAttrs.title || translate(\"Tab\"),\n\t\t\t\t\t\twidgetAttrs: JSON.stringify({ tab: \"true\" }),\n\t\t\t\t\t});\n\t\t\t\t} else if (\n\t\t\t\t\t!parentPanel &&\n\t\t\t\t\tdragAttrs.type === WIDGET_TYPE.panel &&\n\t\t\t\t\t_attrs.tab\n\t\t\t\t) {\n\t\t\t\t\tconst attrs = JSON.parse(dragAttrs.widgetAttrs || \"{}\");\n\t\t\t\t\tsetHoverAttr({\n\t\t\t\t\t\ttitle: dragAttrs.title,\n\t\t\t\t\t\twidgetAttrs: JSON.stringify({ ...attrs, tab: \"false\" }),\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tif (props.panelId) {\n\t\t\t\t\tconst parentPanel = widgets[props.panelId];\n\t\t\t\t\tif (\n\t\t\t\t\t\tparentPanel &&\n\t\t\t\t\t\t[WIDGET_TYPE.tabs, WIDGET_TYPE.panelStack].includes(dragAttrs.type)\n\t\t\t\t\t) {\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t\tif (\n\t\t\t\t\t\t[\n\t\t\t\t\t\t\tWIDGET_TYPE.panelDashlet,\n\t\t\t\t\t\t\tWIDGET_TYPE.panelRelated,\n\t\t\t\t\t\t\tWIDGET_TYPE.panelInclude,\n\t\t\t\t\t\t].includes(parentPanel.type)\n\t\t\t\t\t) {\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (dragAttrs.isCoreField === false && props._type === \"customField\") {\n\t\t\t\treturn;\n\t\t\t}\n\t\t}\n\t\t// skip for same item drag n drop\n\t\t// skip for dragging widget in same panel\n\t\t// skip for other hover elements(monitor.isOver) specially for nested target\n\t\t// skip for dragging field directly on form\n\t\tif (\n\t\t\t(hoverIndex === dragIndex && dragPanelId === hoverPanelId) ||\n\t\t\t((hoverAttrs.type !== \"form\" && hoverAttrs.id) || []).indexOf(dragId) >\n\t\t\t\t-1 ||\n\t\t\t(dragAttrs.items || []).indexOf(hoverId) > -1 ||\n\t\t\t!monitor.isOver({ shallow: true }) ||\n\t\t\t(dragAttrs.type === WIDGET_TYPE.field &&\n\t\t\t\thoverAttrs.type === WIDGET_TYPE.form) ||\n\t\t\t(dragAttrs.type === WIDGET_TYPE.field && props.tabId !== undefined) ||\n\t\t\t(props.state.hoverWidget &&\n\t\t\t\tprops.state.hoverWidget.id === hoverId &&\n\t\t\t\tprops.state.hoverWidget.index === hoverIndex &&\n\t\t\t\tprops.state.hoverWidget.panelId === hoverPanelId)\n\t\t) {\n\t\t\treturn;\n\t\t}\n\n\t\t// Only for current dragging widget\n\t\tif (dragId === props.state.dragWidget) {\n\t\t\ttry {\n\t\t\t\tif (dragId && !dragAttrs.isNew && dragPanelId === hoverPanelId) {\n\t\t\t\t\tif (dragIndex + 1 === hoverIndex || dragIndex - 1 === hoverIndex) {\n\t\t\t\t\t\tprops.state.hoverWidget && props.onHover(null);\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tconst { isMoved } = props.onMove(\n\t\t\t\t\t{\n\t\t\t\t\t\tsource: {\n\t\t\t\t\t\t\tpanelId: dragPanelId,\n\t\t\t\t\t\t\tindex: dragIndex,\n\t\t\t\t\t\t\tid: dragId,\n\t\t\t\t\t\t\tattrs: dragAttrs,\n\t\t\t\t\t\t},\n\t\t\t\t\t\tdestination: {\n\t\t\t\t\t\t\tpanelId: hoverPanelId,\n\t\t\t\t\t\t\tindex: hoverIndex,\n\t\t\t\t\t\t\tid: hoverId,\n\t\t\t\t\t\t\tattrs: hoverAttrs,\n\t\t\t\t\t\t\t_type: props._type,\n\t\t\t\t\t\t},\n\t\t\t\t\t},\n\t\t\t\t\ttrue,\n\t\t\t\t\tprops._type\n\t\t\t\t);\n\t\t\t\tif (isMoved && props.onHover) {\n\t\t\t\t\tprops.onHover({\n\t\t\t\t\t\tmeta: props.meta || {},\n\t\t\t\t\t\tid: hoverId,\n\t\t\t\t\t\tindex: hoverIndex,\n\t\t\t\t\t\tpanelId: hoverPanelId,\n\t\t\t\t\t\tposition:\n\t\t\t\t\t\t\tprops.panelColumns &&\n\t\t\t\t\t\t\t(`${props.panelColumns}` === \"1\" ||\n\t\t\t\t\t\t\t\t`${props.panelColumns}` === `${dragAttrs.colSpan}`) &&\n\t\t\t\t\t\t\tprops.tabId === undefined\n\t\t\t\t\t\t\t\t? \"top\"\n\t\t\t\t\t\t\t\t: \"default\",\n\t\t\t\t\t\tattrs: hoverAttrs,\n\t\t\t\t\t\t_type: props._type,\n\t\t\t\t\t});\n\t\t\t\t} else {\n\t\t\t\t\tprops.state.hoverWidget && props.onHover(null);\n\t\t\t\t}\n\t\t\t} catch (e) {}\n\t\t}\n\n\t\tif (parentPanel && parentPanel.widgetAttrs) {\n\t\t\tlet parentWidgetAttrs = JSON.parse(parentPanel.widgetAttrs || \"{}\");\n\t\t\tlet dragAttrsWidgetAttrs = JSON.parse(dragAttrs.widgetAttrs || \"{}\");\n\t\t\tif (parentWidgetAttrs.itemSpan && !dragAttrsWidgetAttrs.colSpan) {\n\t\t\t\tsetHoverAttr({\n\t\t\t\t\tcolSpan: parentWidgetAttrs.itemSpan,\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t},\n};\n\nfunction Widget(props) {\n\tlet {\n\t\tid,\n\t\tisDragging,\n\t\tconnectDragSource,\n\t\tconnectDropTarget,\n\t\thighlighted,\n\t\thovered,\n\t\ttabId,\n\t\tclassName,\n\t\tcomponent: DefaultWidgetComponent,\n\t\tattrs,\n\t\tstate,\n\t\tupdate,\n\t\tonWidgetChange,\n\t\terrorList = {},\n\t\t...rest\n\t} = props;\n\tconst { dragWidget } = state;\n\tconst _widgets =\n\t\trest._type === \"customField\" ? state.customFieldWidgets : state.widgets;\n\t// special case for new element\n\t// hide/remove element from schema, if it drag outside form container(id=1)\n\tReact.useEffect(() => {\n\t\tupdate((draft) => {\n\t\t\tdraft.hoverWidget && (draft.hoverWidget.visible = hovered);\n\t\t});\n\t}, [update, hovered, id, dragWidget, attrs]);\n\n\tlet registryField = Registry[attrs.type] || Registry.field;\n\n\tif (rest.isTab && !Registry[attrs.type]) {\n\t\tregistryField = Registry[\"panel\"];\n\t}\n\n\tlet { component: WidgetComponent, props: componentProps = {} } =\n\t\tregistryField;\n\n\tif (DefaultWidgetComponent) {\n\t\tWidgetComponent = DefaultWidgetComponent;\n\t}\n\n\tlet isFormField = true;\n\tif (Object.values(IDS.createWidgets).indexOf(id) > -1) {\n\t\tisFormField = false;\n\t\tconnectDropTarget = (e) => e;\n\t}\n\tconst isEdit = isFormField && state.editWidget === id;\n\tconst isTabWidget = tabId !== undefined;\n\tconst isTabWidgetContent = isTabWidget ? !rest.isTab : false;\n\tconst showRemove =\n\t\tisFormField &&\n\t\tNumber(id) > 0 &&\n\t\t!isTabWidgetContent &&\n\t\trest.design &&\n\t\trest.canRemove !== false;\n\tif (\n\t\tisTabWidgetContent ||\n\t\t(id && id !== IDS.form && typeof id !== \"symbol\" && !attrs.isDummy)\n\t) {\n\t\tconnectDropTarget = (e) => e;\n\t}\n\tif (attrs.isExist === false || (!rest.design && IDS.dumpField)) return null;\n\treturn (\n\t\t<React.Fragment>\n\t\t\t{connectDragSource(\n\t\t\t\tconnectDropTarget(\n\t\t\t\t\t<div\n\t\t\t\t\t\t{...componentProps}\n\t\t\t\t\t\tclassName={classNames(\n\t\t\t\t\t\t\tclassName,\n\t\t\t\t\t\t\t\"widget\",\n\t\t\t\t\t\t\tcomponentProps.className,\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\"dummy-widget\": attrs.isDummy,\n\t\t\t\t\t\t\t\tedit: isEdit,\n\t\t\t\t\t\t\t\thighlighted: highlighted,\n\t\t\t\t\t\t\t\thovered: hovered,\n\t\t\t\t\t\t\t\tactive: isFormField && isDragging,\n\t\t\t\t\t\t\t\t\"form-field\": isFormField,\n\t\t\t\t\t\t\t\t\"panel-field\": attrs.type === \"panel\",\n\t\t\t\t\t\t\t\t\"non-title-panel\":\n\t\t\t\t\t\t\t\t\tattrs.type === \"panel\" && !rest.isTab && !attrs.title,\n\t\t\t\t\t\t\t\t// \"dummy-field\": attrs.serverType === \"field\",\n\t\t\t\t\t\t\t\t\"error-field\": Boolean(errorList[id]),\n\t\t\t\t\t\t\t\t\"pallete-field\": rest.isPalleteField,\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t)}\n\t\t\t\t\t\t_type={rest._type}\n\t\t\t\t\t\tonClick={(e) => {\n\t\t\t\t\t\t\tif (isFormField && rest.onSelect) {\n\t\t\t\t\t\t\t\te.stopPropagation();\n\t\t\t\t\t\t\t\tid !== IDS.dumpField && rest.onSelect(id, rest._type);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tif (isTabWidget) {\n\t\t\t\t\t\t\t\te.stopPropagation();\n\t\t\t\t\t\t\t\tif (id !== IDS.dumpField && _widgets[tabId]) {\n\t\t\t\t\t\t\t\t\tonWidgetChange(tabId, {\n\t\t\t\t\t\t\t\t\t\tcurrent: id,\n\t\t\t\t\t\t\t\t\t\t_type: rest._type,\n\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}}\n\t\t\t\t\t>\n\t\t\t\t\t\t{!isTabWidgetContent &&\n\t\t\t\t\t\t\tstate.hoverWidget &&\n\t\t\t\t\t\t\ttypeof id !== \"symbol\" &&\n\t\t\t\t\t\t\tNumber(id) >= 0 &&\n\t\t\t\t\t\t\tstate.hoverWidget.index === rest.index &&\n\t\t\t\t\t\t\tstate.hoverWidget.visible !== false &&\n\t\t\t\t\t\t\tstate.hoverWidget.panelId === rest.panelId && (\n\t\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\t\tclassName={classNames(\n\t\t\t\t\t\t\t\t\t\t\"hover-liner\",\n\t\t\t\t\t\t\t\t\t\t{ \"dummy-widget\": attrs.isDummy || id === 0 },\n\t\t\t\t\t\t\t\t\t\tstate.hoverWidget.position\n\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t{WidgetComponent && (\n\t\t\t\t\t\t\t<WidgetComponent\n\t\t\t\t\t\t\t\tid={id}\n\t\t\t\t\t\t\t\tisDragging={state.dragWidget === id}\n\t\t\t\t\t\t\t\tattrs={attrs}\n\t\t\t\t\t\t\t\t_type={rest._type}\n\t\t\t\t\t\t\t\terrorList={errorList}\n\t\t\t\t\t\t\t\tcanRemove={rest.canRemove}\n\t\t\t\t\t\t\t\tdraggable={attrs.type !== WIDGET_TYPE.menubar}\n\t\t\t\t\t\t\t\t{...rest}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t)}\n\t\t\t\t\t\t{showRemove && !state.dragWidget && (\n\t\t\t\t\t\t\t<span\n\t\t\t\t\t\t\t\tonClick={(e) => {\n\t\t\t\t\t\t\t\t\tif (rest.onRemove) {\n\t\t\t\t\t\t\t\t\t\te.stopPropagation();\n\t\t\t\t\t\t\t\t\t\trest.onRemove(rest.panelId, rest.index, id, rest._type);\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\tclassName=\"widget-remove\"\n\t\t\t\t\t\t\t\ttitle={translate(\"Remove Widget\")}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<i className=\"fa fa-remove\" />\n\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t)}\n\t\t\t\t\t</div>\n\t\t\t\t)\n\t\t\t)}\n\t\t</React.Fragment>\n\t);\n}\n\nconst SimpleWidget = (props) => (\n\t<Widget\n\t\t{...props}\n\t\tconnectDropTarget={(e) => e}\n\t\tconnectDragSource={(e) => e}\n\t/>\n);\n\nconst DraggableWidget = compose(\n\tDropTarget(TYPE, CardTarget, (connect, monitor) => ({\n\t\thighlighted: false,\n\t\thovered: monitor.isOver(),\n\t\tconnectDropTarget: connect.dropTarget(),\n\t})),\n\tDragSource(TYPE, CardSource, (connect, monitor) => ({\n\t\tconnectDragSource: connect.dragSource(),\n\t\tisDragging: monitor.isDragging(),\n\t}))\n)(Widget);\n\nexport const WidgetComponent = (props) => {\n\tconst store = useStore();\n\tconst { state } = store;\n\tconst _widgets =\n\t\tprops._type === \"customField\" ? state.customFieldWidgets : state.widgets;\n\tconst attrs =\n\t\t_widgets && _widgets[props.id] ? _widgets[props.id] : props.attrs || {};\n\tconst _props = { ...store, attrs };\n\tconst draggable = attrs.type !== WIDGET_TYPE.menubar;\n\n\tif (props.design || draggable)\n\t\treturn <DraggableWidget {..._props} {...props} />;\n\treturn <SimpleWidget {..._props} {...props} />;\n};\n\nexport default React.memo(WidgetComponent);\n","import React from \"react\";\nimport Grid from \"./Grid\";\nimport { PANEL_TYPE } from \"../constants\";\n\n/**\n * Form Component\n * Used As Main Container i.e. <form />\n */\nfunction FormComponent({ attrs = {}, items = [], design, widgets, ...rest }) {\n\t// render top level items as Widgets using Context FormConsumer\n\tconst rootPanel = React.useMemo(() => {\n\t\tconst sidebar = items.filter(\n\t\t\t(k) => widgets[k] && [\"true\", true].includes(widgets[k].sidebar)\n\t\t);\n\t\tconst mainItems = items.filter(\n\t\t\t(k) => widgets[k] && ![\"true\", true].includes(widgets[k].sidebar)\n\t\t);\n\t\tconst hasSidebar = sidebar.length > 0;\n\n\t\treturn hasSidebar\n\t\t\t? {\n\t\t\t\t\titems: [\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tlayout: PANEL_TYPE.grid,\n\t\t\t\t\t\t\titems: mainItems,\n\t\t\t\t\t\t\tcolSpan: 9,\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tlayout: PANEL_TYPE.grid,\n\t\t\t\t\t\t\titems: sidebar,\n\t\t\t\t\t\t\tcolSpan: 3,\n\t\t\t\t\t\t},\n\t\t\t\t\t],\n\t\t\t  }\n\t\t\t: {\n\t\t\t\t\titems: [\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tlayout: PANEL_TYPE.grid,\n\t\t\t\t\t\t\titems: mainItems,\n\t\t\t\t\t\t\tcolSpan: 12,\n\t\t\t\t\t\t},\n\t\t\t\t\t],\n\t\t\t  };\n\t}, [items, widgets]);\n\n\treturn (\n\t\t<div className=\"flex-container\">\n\t\t\t{rootPanel.items.map(({ items, colSpan, ...attrs }, i) => (\n\t\t\t\t<div className={`flex-item span-${colSpan}`} key={i}>\n\t\t\t\t\t<Grid\n\t\t\t\t\t\tkey={i}\n\t\t\t\t\t\tdesign={design}\n\t\t\t\t\t\tclassName=\"form-body\"\n\t\t\t\t\t\titems={items}\n\t\t\t\t\t\tattrs={attrs}\n\t\t\t\t\t\t_type={rest._type}\n\t\t\t\t\t\twidgets={widgets}\n\t\t\t\t\t\terrorList={rest.errorList}\n\t\t\t\t\t\tcanRemove={rest.canRemove}\n\t\t\t\t\t/>\n\t\t\t\t</div>\n\t\t\t))}\n\t\t</div>\n\t);\n}\n\nexport default FormComponent;\n","import React, { useState, useEffect } from \"react\";\nimport AxelorService from \"../services/axelor.rest\";\nimport { fetchCustomModel } from \"../Toolbar/api\";\nimport { translate, getDefaultGridFormName } from \"../utils\";\n\nconst metaViewService = new AxelorService({\n\tmodel: \"com.axelor.meta.db.MetaView\",\n});\nconst excludedUITypes = [\"panel\", \"label\", \"spacer\", \"button\"];\n\nconst showInGrid = (item) => {\n\treturn (\n\t\t!excludedUITypes.includes(item.type) && item.visibleInGrid && !item.hidden\n\t);\n};\n\nfunction RelationalFieldGridView({ attrs, id }) {\n\tconst {\n\t\tgridView,\n\t\ttargetModel: target,\n\t\ttitle,\n\t\tautoTitle,\n\t\taction,\n\t\ttargetJsonModel,\n\t} = attrs || {};\n\tconst [gridItems, setGridItems] = useState([]);\n\tconst [gridTitle, setGridTitle] = useState(null);\n\n\tuseEffect(() => {\n\t\tasync function getGrid() {\n\t\t\tlet viewName = gridView;\n\t\t\tif (action) {\n\t\t\t\tconst _context = {\n\t\t\t\t\t_id: null,\n\t\t\t\t};\n\t\t\t\tconst data = {\n\t\t\t\t\taction,\n\t\t\t\t\tmodel: \"com.axelor.meta.db.MetaAction\",\n\t\t\t\t\tdata: {\n\t\t\t\t\t\tcontext: _context,\n\t\t\t\t\t},\n\t\t\t\t};\n\n\t\t\t\tconst actionResult = await metaViewService.action(data);\n\t\t\t\tif (\n\t\t\t\t\tactionResult.data &&\n\t\t\t\t\tactionResult.data[0] &&\n\t\t\t\t\tactionResult.data[0].view &&\n\t\t\t\t\tactionResult.data[0].view.views\n\t\t\t\t) {\n\t\t\t\t\tconst view = actionResult.data[0].view.views.find(\n\t\t\t\t\t\t(v) => v.type === \"grid\"\n\t\t\t\t\t);\n\t\t\t\t\tif (view) {\n\t\t\t\t\t\tviewName = view.name;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (targetJsonModel) {\n\t\t\t\tlet model;\n\t\t\t\tif (!targetJsonModel.name && targetJsonModel.id) {\n\t\t\t\t\tmodel = await fetchCustomModel(targetJsonModel.id);\n\t\t\t\t}\n\t\t\t\tviewName = getDefaultGridFormName(\n\t\t\t\t\tmodel || targetJsonModel,\n\t\t\t\t\tfalse,\n\t\t\t\t\ttrue\n\t\t\t\t);\n\t\t\t}\n\t\t\tconst payload = {\n\t\t\t\tmodel: target,\n\t\t\t\tdata: {\n\t\t\t\t\ttype: \"grid\",\n\t\t\t\t\tname: viewName,\n\t\t\t\t},\n\t\t\t};\n\t\t\tif (viewName) {\n\t\t\t\tmetaViewService.view(payload).then((res) => {\n\t\t\t\t\tif (res.data && res.data.view) {\n\t\t\t\t\t\tconst { items = [], title } = res.data.view;\n\t\t\t\t\t\tsetGridTitle(title);\n\t\t\t\t\t\tif (targetJsonModel) {\n\t\t\t\t\t\t\tconst gridItems = [];\n\t\t\t\t\t\t\titems.forEach((item) => {\n\t\t\t\t\t\t\t\tconst { jsonFields = [] } = item;\n\t\t\t\t\t\t\t\tjsonFields.forEach((i) => {\n\t\t\t\t\t\t\t\t\tif (showInGrid(i)) {\n\t\t\t\t\t\t\t\t\t\tgridItems.push(i);\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\tsetGridItems(() => [...(gridItems || [])]);\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tconst { fields = [], jsonAttrs = [] } = res.data;\n\t\t\t\t\t\tlet displayFields = {};\n\t\t\t\t\t\tfields.forEach((field) => {\n\t\t\t\t\t\t\tdisplayFields[field.name] = field.title;\n\t\t\t\t\t\t});\n\t\t\t\t\t\tconst allFields = items.map((i) => {\n\t\t\t\t\t\t\treturn { ...i, title: displayFields[i.name] };\n\t\t\t\t\t\t});\n\n\t\t\t\t\t\tif (jsonAttrs && jsonAttrs.length > 0) {\n\t\t\t\t\t\t\tjsonAttrs.forEach((i) => {\n\t\t\t\t\t\t\t\tif (showInGrid(i)) {\n\t\t\t\t\t\t\t\t\tallFields.push(i);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\t\t\t\t\t\tsetGridItems(allFields);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\tsetGridItems([]);\n\t\t\t}\n\t\t}\n\t\tgetGrid();\n\t}, [gridView, target, targetJsonModel, id, action]);\n\n\treturn (\n\t\t<div>\n\t\t\t<div className=\"one-to-many-header\">\n\t\t\t\t<span>{translate(title || gridTitle || autoTitle)}</span>\n\t\t\t</div>\n\t\t\t<table>\n\t\t\t\t<tbody className=\"one-to-many-row\">\n\t\t\t\t\t{[...Array(3)].map((e, index) => (\n\t\t\t\t\t\t<tr style={{ display: \"flex\" }} key={`row_${index}`}>\n\t\t\t\t\t\t\t{gridItems.map((item, i) => (\n\t\t\t\t\t\t\t\t<td\n\t\t\t\t\t\t\t\t\tclassName=\"one-to-many-col one-to-many-col-border\"\n\t\t\t\t\t\t\t\t\tkey={`td_${i}`}\n\t\t\t\t\t\t\t\t\tstyle={{ borderBottom: index === 0 ? \"1px solid #ddd\" : \"\" }}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t{index === 0 && item\n\t\t\t\t\t\t\t\t\t\t? translate(item.title || item.autoTitle)\n\t\t\t\t\t\t\t\t\t\t: \"\"}\n\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t))}\n\t\t\t\t\t\t</tr>\n\t\t\t\t\t))}\n\t\t\t\t</tbody>\n\t\t\t</table>\n\t\t</div>\n\t);\n}\n\nexport default RelationalFieldGridView;\n","import React from \"react\";\nimport classNames from \"classnames\";\nimport { IDS, FIELD_TYPE, TYPE } from \"../constants\";\nimport RelationalFieldGridView from \"./RelationalFieldGridView\";\nimport { translate } from \"../utils\";\n\n// filter html(tags) compatible attributes\nconst filterInputProps = (props) => {\n\tconst allowed = [\n\t\t\"name\",\n\t\t\"title\",\n\t\t\"defaultValue\",\n\t\t\"placeholder\",\n\t\t\"readOnly\",\n\t\t\"checked\",\n\t\t\"disabled\",\n\t\t\"rows\",\n\t\t\"required\",\n\t];\n\t// return valid object with values\n\treturn allowed.reduce((obj, attr) => {\n\t\tif (props[attr] !== undefined) obj[attr] = props[attr];\n\t\tif (attr === \"required\") {\n\t\t\tobj[attr] = props[attr] === \"true\";\n\t\t}\n\t\treturn obj;\n\t}, {});\n};\n\n// Plain Textbox\nexport const TextInput = (props) => {\n\treturn (\n\t\t<input type=\"text\" autoComplete=\"off\" {...props} className=\"text-input\" />\n\t);\n};\n\n// Multiline Textbox i.e. Textarea\nexport const MultiTextInput = (props) => {\n\treturn <textarea rows={6} {...props} />;\n};\n\n// Blank Spacer to fill up space between two cells of Grid\nexport const Spacer = (props) => <div className=\"spacer\" />;\n\nexport const Separator = (props) => (\n\t<div className=\"spacer\">\n\t\t<hr className=\"separator-field\" />\n\t</div>\n);\n\nexport const Boolean = ({ inputProps, ...props }) => (\n\t<div className=\"boolean-wrapper\">\n\t\t<input {...inputProps} type=\"checkbox\" />\n\t\t<span className=\"boolean-text\" title={translate(props.title || props.name)}>\n\t\t\t{translate(props.title || props.name)}\n\t\t</span>\n\t</div>\n);\n\n// Button component\nexport const Button = ({ title, ...props }) => (\n\t<div className=\"button-container\">\n\t\t<button {...props} className=\"button-view\" title={translate(title)}>\n\t\t\t{translate(title)}\n\t\t</button>\n\t</div>\n);\n\nexport const MenuItem = ({ title, ...props }) => (\n\t<div className=\"menu-item-container\">{translate(title)}</div>\n);\n\nexport const Hilite = ({ color, background, strong }) => {\n\treturn (\n\t\t<div\n\t\t\tclassName={classNames(\n\t\t\t\t`hilite hilite hilite-background-${background} hilite-text-${color}`,\n\t\t\t\t{ \"hilite-strong\": strong }\n\t\t\t)}\n\t\t>\n\t\t\thilite\n\t\t</div>\n\t);\n};\n\n/**\n * Form \"Field\" Component\n * Used For User Inputs\n */\nfunction FieldComponent({ id, attrs }) {\n\t// check for dump field for empty panels\n\tif (id === IDS.dumpField) {\n\t\treturn <div className=\"dump-field\" />;\n\t}\n\n\tconst { name, title, serverType, multiline, type, autoTitle, widget } = attrs;\n\tconst inputProps = filterInputProps(attrs);\n\tlet _type =\n\t\tserverType && serverType !== \"field\" ? serverType.toLowerCase() : type;\n\tconst DefaultWidget = () => (\n\t\t<React.Fragment>\n\t\t\t{\n\t\t\t\t<label\n\t\t\t\t\tclassName=\"widget label\"\n\t\t\t\t\ttitle={translate(title || attrs.autoTitle || name)}\n\t\t\t\t>\n\t\t\t\t\t{translate(title || attrs.autoTitle || name)}\n\t\t\t\t</label>\n\t\t\t}\n\t\t\t{multiline ? (\n\t\t\t\t<MultiTextInput {...inputProps} />\n\t\t\t) : attrs.widget === \"Image\" ? (\n\t\t\t\t<img\n\t\t\t\t\talt={title || attrs.autoTitle || name}\n\t\t\t\t\tsrc=\"./images/not_found.png\"\n\t\t\t\t\tclassName=\"image-widget\"\n\t\t\t\t/>\n\t\t\t) : (\n\t\t\t\t<TextInput\n\t\t\t\t\ttype={serverType === FIELD_TYPE.number ? \"number\" : \"text\"}\n\t\t\t\t\t{...inputProps}\n\t\t\t\t/>\n\t\t\t)}\n\t\t</React.Fragment>\n\t);\n\n\tswitch (_type?.toLowerCase()) {\n\t\tcase FIELD_TYPE.boolean:\n\t\t\treturn (\n\t\t\t\t<Boolean\n\t\t\t\t\ttitle={title || autoTitle}\n\t\t\t\t\tname={name}\n\t\t\t\t\tinputProps={inputProps}\n\t\t\t\t/>\n\t\t\t);\n\t\tcase FIELD_TYPE.spacer:\n\t\t\treturn <Spacer />;\n\t\tcase FIELD_TYPE.hilite:\n\t\t\treturn <Hilite {...attrs} />;\n\t\tcase FIELD_TYPE.separator:\n\t\tcase TYPE.divider:\n\t\t\treturn <Separator />;\n\t\tcase TYPE.menuItem:\n\t\t\treturn <MenuItem title={title} />;\n\t\tcase FIELD_TYPE.button:\n\t\t\treturn <Button {...inputProps} title={title || name} />;\n\t\tcase \"selection\":\n\t\tcase \"label\": {\n\t\t\treturn <span dangerouslySetInnerHTML={{ __html: title }} />;\n\t\t}\n\t\tcase \"panel-dashlet\":\n\t\tcase \"panel-related\":\n\t\tcase \"one-to-many\":\n\t\tcase \"json-one-to-many\":\n\t\t\treturn <RelationalFieldGridView attrs={attrs} id={id} />;\n\t\tcase \"many-to-many\":\n\t\tcase \"json-many-to-many\":\n\t\t\treturn widget !== \"TagSelect\" ? (\n\t\t\t\t<RelationalFieldGridView attrs={attrs} id={id} />\n\t\t\t) : (\n\t\t\t\t<DefaultWidget />\n\t\t\t);\n\t\tdefault:\n\t\t\treturn <DefaultWidget />;\n\t}\n}\n\nexport default FieldComponent;\n"],"sourceRoot":""}