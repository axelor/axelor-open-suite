/*
 * Axelor Business Solutions
 *
 * Copyright (C) 2021 Axelor (<http://axelor.com>).
 *
 * This program is free software: you can redistribute it and/or  modify
 * it under the terms of the GNU Affero General Public License, version 3,
 * as published by the Free Software Foundation.
 *
 * This program is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 * GNU Affero General Public License for more details.
 *
 * You should have received a copy of the GNU Affero General Public License
 * along with this program.  If not, see <http://www.gnu.org/licenses/>.
 */
(this["webpackJsonpaxelor-studio"]=this["webpackJsonpaxelor-studio"]||[]).push([[0],{1:function(e,t,a){"use strict";var n=a(9),i=a(4),r=a(5),o=["NavSelect","CheckboxSelect","RadioSelect","MultiSelect","ImageSelect"],l={boolean:["InlineCheckbox","Toggle","BooleanSelect","BooleanRadio","BooleanSwitch"].concat(o),integer:["RelativeTime","Duration","Progress","SelectProgress"].concat(o),string:["Email","Url","Password","Html","CodeEditor","ImageLine"].concat(o),text:["Html","CodeEditor"].concat(o),"many-to-one":["SuggestBox","Image","binary-link"],"one-to-one":["SuggestBox","Image"],"many-to-many":["TagSelect"],binary:["Image","BinaryLink"].concat(o),date:[].concat(o),datetime:[].concat(o),time:[].concat(o),button:["Button","InfoButton","ToolButton"],decimal:["RelativeTime","Duration","Progress","SelectProgress"].concat(o)},c=a(2);a.d(t,"bb",(function(){return s})),a.d(t,"Nb",(function(){return u})),a.d(t,"vb",(function(){return d})),a.d(t,"p",(function(){return m})),a.d(t,"Kb",(function(){return f})),a.d(t,"n",(function(){return p})),a.d(t,"c",(function(){return b})),a.d(t,"B",(function(){return g})),a.d(t,"zb",(function(){return v})),a.d(t,"sb",(function(){return y})),a.d(t,"Ub",(function(){return h})),a.d(t,"wb",(function(){return O})),a.d(t,"Pb",(function(){return j})),a.d(t,"yb",(function(){return w})),a.d(t,"Wb",(function(){return x})),a.d(t,"cb",(function(){return T})),a.d(t,"db",(function(){return k})),a.d(t,"Y",(function(){return S})),a.d(t,"V",(function(){return E})),a.d(t,"jb",(function(){return C})),a.d(t,"tb",(function(){return M})),a.d(t,"P",(function(){return F})),a.d(t,"o",(function(){return N})),a.d(t,"kb",(function(){return I})),a.d(t,"xb",(function(){return L})),a.d(t,"Rb",(function(){return W})),a.d(t,"Sb",(function(){return A})),a.d(t,"Tb",(function(){return V})),a.d(t,"ob",(function(){return B})),a.d(t,"b",(function(){return q})),a.d(t,"Ib",(function(){return P})),a.d(t,"Jb",(function(){return _})),a.d(t,"x",(function(){return U})),a.d(t,"v",(function(){return D})),a.d(t,"qb",(function(){return R})),a.d(t,"k",(function(){return J})),a.d(t,"lb",(function(){return z})),a.d(t,"C",(function(){return X})),a.d(t,"Vb",(function(){return Y})),a.d(t,"Bb",(function(){return H})),a.d(t,"D",(function(){return K})),a.d(t,"E",(function(){return Q})),a.d(t,"rb",(function(){return G})),a.d(t,"mb",(function(){return $})),a.d(t,"J",(function(){return Z})),a.d(t,"Qb",(function(){return ee})),a.d(t,"l",(function(){return te})),a.d(t,"q",(function(){return ae})),a.d(t,"h",(function(){return ne})),a.d(t,"O",(function(){return ie})),a.d(t,"N",(function(){return re})),a.d(t,"X",(function(){return oe})),a.d(t,"W",(function(){return le})),a.d(t,"Cb",(function(){return ce})),a.d(t,"g",(function(){return se})),a.d(t,"F",(function(){return ue})),a.d(t,"A",(function(){return de})),a.d(t,"a",(function(){return me})),a.d(t,"u",(function(){return fe})),a.d(t,"f",(function(){return pe})),a.d(t,"eb",(function(){return be})),a.d(t,"K",(function(){return ge})),a.d(t,"I",(function(){return ve})),a.d(t,"Db",(function(){return ye})),a.d(t,"Mb",(function(){return he})),a.d(t,"j",(function(){return Oe})),a.d(t,"U",(function(){return je})),a.d(t,"z",(function(){return we})),a.d(t,"Lb",(function(){return xe})),a.d(t,"Gb",(function(){return Te})),a.d(t,"r",(function(){return ke})),a.d(t,"hb",(function(){return Se})),a.d(t,"ab",(function(){return Ee})),a.d(t,"R",(function(){return Ce})),a.d(t,"ub",(function(){return Me})),a.d(t,"w",(function(){return Fe})),a.d(t,"M",(function(){return Ne})),a.d(t,"L",(function(){return Ie})),a.d(t,"m",(function(){return Le})),a.d(t,"Ob",(function(){return We})),a.d(t,"G",(function(){return Ae})),a.d(t,"nb",(function(){return Ve})),a.d(t,"T",(function(){return Be})),a.d(t,"fb",(function(){return qe})),a.d(t,"Ab",(function(){return Pe})),a.d(t,"e",(function(){return _e})),a.d(t,"pb",(function(){return Ue})),a.d(t,"S",(function(){return De})),a.d(t,"Q",(function(){return Re})),a.d(t,"Hb",(function(){return Je})),a.d(t,"H",(function(){return ze})),a.d(t,"ib",(function(){return Xe})),a.d(t,"t",(function(){return Ye})),a.d(t,"y",(function(){return He})),a.d(t,"Eb",(function(){return Ke})),a.d(t,"gb",(function(){return Qe})),a.d(t,"s",(function(){return Ge})),a.d(t,"Z",(function(){return $e})),a.d(t,"i",(function(){return Ze})),a.d(t,"d",(function(){return et})),a.d(t,"Fb",(function(){return tt}));var s=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=Object.assign({},e);return Object(r.f)(Object(i.a)({name:"name",required:!0,readOnly:!0,regex:/^[a-z0-9]+$/i,regexErrorMessage:"Please enter alpha numeric characters only",unique:!0,isDisabled:function(e){e.properties,e.metaFieldStore;var t=e.editWidgetType;return e.modelType===c.h.BASE&&"customField"!==t},requiredFor:["button","label","panel","string","panel-dashlet","separator","panel-stack","integer","date","time","datetime","decimal","one-to-many","many-to-many","boolean","label","viewer","editor","one-to-one","spacer","long","hilite"]},t))},u=Object(r.f)({name:"type",column:"type_name",required:!0,selection:"json.field.type",readOnly:"true",formatter:function(e,t){if(t.tab)return"panel-tabs";var a=e.indexOf("entity");return-1!==a?e.substring(0,a):e}}),d=Object(r.e)({name:"type",column:"type_name",required:!0,data:["string","integer"],defaultOption:!1}),m=Object(r.e)({name:"dummyType",title:"Type",data:Object(n.a)(c.b)}),f=Object(r.f)({name:"title",translationView:!1}),p=Object(r.f)({name:"defaultValue",dependModelType:c.h.CUSTOM}),b=Object(r.c)({name:"appBuilder",title:"App name",ref:"com.axelor.studio.db.AppBuilder",dependModelType:c.h.CUSTOM}),g=Object(r.f)({name:"help",dependModelType:c.h.CUSTOM}),v=Object(r.b)({name:"sequence",dependModelType:c.h.CUSTOM}),y=Object(r.c)({name:"roles",ref:"com.axelor.auth.db.Role",multiple:!0,dependModelType:c.h.CUSTOM}),h={name:"valueExpr",type:"text",dependModelType:c.h.CUSTOM},O=Object(r.d)({name:"selection",title:"Existing selection",ref:"com.axelor.meta.db.MetaSelect",valueField:"name",dependModelType:c.h.CUSTOM,isDisabled:function(e,t,a){return e.updateSelection}}),j=Object(r.a)({name:"updateSelection",dependModelType:c.h.CUSTOM}),w=Object(r.f)({name:"selectionText",type:"text",depends:"updateSelection",dependValue:!0,dependModelType:c.h.CUSTOM}),x=Object(r.e)({name:"widget",data:l,title:"widget",dependModelType:c.h.CUSTOM}),T=Object(r.d)({name:"onChange",ref:"com.axelor.meta.db.MetaAction",dependModelType:c.h.CUSTOM}),k=Object(r.d)({name:"onNew",ref:"com.axelor.meta.db.MetaAction",multiple:!0,commaSeparated:!0}),S=(Object(r.d)({name:"onLoad",ref:"com.axelor.meta.db.MetaAction",multiple:!0,commaSeparated:!0}),Object(r.d)({name:"onSave",ref:"com.axelor.meta.db.MetaAction",multiple:!0,commaSeparated:!0}),Object(r.b)({name:"minSize",title:"Min",dependModelType:c.h.CUSTOM})),E=Object(r.b)({name:"maxSize",title:"Max",dependModelType:c.h.CUSTOM}),C=(Object(r.b)({name:"max",title:"Max"}),Object(r.b)({name:"min",title:"Min"}),Object(r.b)({name:"precision",title:"Precision"})),M=Object(r.b)({name:"scale",title:"Scale"}),F=Object(r.a)({name:"isJsonRelationalField",dependModelType:c.h.CUSTOM,getValue:function(e){var t=e.type;if(t&&0===t.indexOf("json"))return!0;return!1},change:function(e,t){var a=t.type;if(!0===e){if(!(0===a.indexOf("json"))){var n="json-".concat(a);return{type:n,serverType:n}}}else if(!1===e){if(0===a.indexOf("json")){var i=a.substring("json-".length);return{type:i,serverType:i}}}return{}}}),N=Object(r.f)({name:"domain"}),I=Object(r.f)({name:"prompt",parentField:"widgetAttrs"}),L=Object(r.f)({name:"selection-in",dependModelType:c.h.BASE,showInCustomField:!1}),W=Object(r.f)({name:"value",dependModelType:c.h.BASE,showInCustomField:!1}),A=Object(r.f)({name:"value:add",dependModelType:c.h.BASE,showInCustomField:!1}),V=Object(r.f)({name:"value:del",dependModelType:c.h.BASE,showInCustomField:!1}),B=Object(r.a)({name:"refresh",dependModelType:c.h.BASE,showInCustomField:!1}),q=Object(r.a)({name:"active",dependModelType:c.h.BASE,showInCustomField:!1,shouldRender:function(e){return e.xPath&&e.xPath.includes("panel-tabs")}}),P=Object(r.c)({name:"targetJsonModel",required:!0,ref:"com.axelor.meta.db.MetaJsonModel",displayField:"title",dependModelType:c.h.CUSTOM}),_=Object(r.d)({name:"targetModel",required:!0,ref:"com.axelor.meta.db.MetaModel",valueField:"fullName",canAddNew:!1,isDisabled:function(e,t,a){return"customField"!==t&&"field"!==e.serverType&&a!==c.h.CUSTOM}}),U=Object(r.d)({name:"gridView",title:"Grid view",ref:"com.axelor.meta.db.MetaView",valueField:"name",dependModelType:c.h.CUSTOM,needsTargetModel:[c.n.OneToMany,c.n.ManyToMany]}),D=Object(r.d)({name:"formView",title:"Form view",ref:"com.axelor.meta.db.MetaView",valueField:"name",dependModelType:c.h.CUSTOM,needsTargetModel:[c.n.OneToMany,c.n.ManyToMany]}),R=Object(r.a)({name:"required",defaultValue:"false",isDisabled:function(e){var t=e.properties,a=(e.metaFieldStore,e.editWidgetType);return!(e.modelType!==c.h.BASE||"customField"===a||!t.requiredIf||!t.requiredIf.length)}}),J=Object(r.b)({name:"columnSequence",dependModelType:c.h.CUSTOM}),z=Object(r.a)({name:"readonly",isDisabled:function(e){var t=e.properties,a=(e.metaFieldStore,e.editWidgetType);return!(e.modelType!==c.h.BASE||"customField"===a||!t.readonlyIf||!t.readonlyIf.length)}}),X=Object(r.a)({name:"hidden",isDisabled:function(e){var t=e.properties;return!(!t.hideIf||!t.hideIf.length)}}),Y=Object(r.a)({name:"visibleInGrid",title:"Visible in grid",dependModelType:c.h.CUSTOM}),H=Object(r.f)({name:"showIf",dependModelType:c.h.CUSTOM}),K=Object(r.f)({name:"hideIf",isDisabled:function(e){return!!e.properties.hidden}}),Q=Object(r.f)({name:"if",dependModelType:c.h.CUSTOM}),G=Object(r.f)({name:"requiredIf",isDisabled:function(e){var t=e.properties,a=(e.metaFieldStore,e.editWidgetType);return!(e.modelType!==c.h.BASE||"customField"===a||!t.required)}}),$=Object(r.f)({name:"readonlyIf",isDisabled:function(e){var t=e.properties,a=(e.metaFieldStore,e.editWidgetType);return!(e.modelType!==c.h.BASE||"customField"===a||!t.readonly)}}),Z=Object(r.f)({name:"includeIf",title:"Include if",dependModelType:c.h.CUSTOM}),ee=Object(r.f)({name:"validIf",parentField:"widgetAttrs",modelType:c.h.CUSTOM,dependModelType:c.h.CUSTOM}),te=(Object(r.f)({name:"canSave",dependModelType:c.h.CUSTOM}),Object(r.f)({name:"css",parentField:"widgetAttrs",modelType:c.h.CUSTOM})),ae=(Object(r.f)({name:"canEdit"}),Object(r.f)({name:"canDelete"}),Object(r.f)({name:"canCopy"}),Object(r.f)({name:"canNew"}),Object(r.f)({name:"canAttach"}),Object(r.e)({name:"width",data:["mini","mid","large"],title:"width"}),Object(r.a)({name:"editable",dependModelType:c.h.CUSTOM})),ne=Object(r.b)({name:"colSpan",parentField:"widgetAttrs",max:12,min:1,modelType:c.h.CUSTOM,dependModelType:c.h.CUSTOM,isDisabled:function(e){e.properties;var t=e.parentPanel;if(t){var a;if([c.j.toolbar,c.j.menubar].includes(t.serverType))return!0;if(t.itemSpan&&(null===(a=t.itemSpan)||void 0===a?void 0:a.length))return!0}return!1}}),ie=Object(r.b)({name:"itemSpan",parentField:"widgetAttrs",max:12,min:1,modelType:c.h.CUSTOM,dependModelType:c.h.CUSTOM,isDisabled:function(e){e.properties;var t=e.parentPanel;return!(!t||![c.j.toolbar,c.j.menubar].includes(t.serverType))}}),re=Object(r.a)({name:"isGenerateMenu"}),oe=Object(r.f)({name:"menuBuilderTitle",depends:"isGenerateMenu",dependValue:!0}),le=Object(r.c)({name:"menuBuilderParent",ref:"com.axelor.meta.db.MetaMenu",title:"Parent",depends:"isGenerateMenu",dependValue:!0,valueField:"id",displayField:"title",fetchFieldList:["parent"],shouldFetchInStart:!0,limit:null,getOptionLabel:function(e,t){return function e(t,a){var n=t.title||"";if(t.parent){var i=a.find((function(e){return e.id===t.parent.id}));if(i){var r=e(i,a);r&&(n="".concat(r," > ").concat(n))}}return n}(e,t)}}),ce=Object(r.a)({name:"showTitle",parentField:"widgetAttrs",defaultValue:!0,modelType:c.h.CUSTOM,dependModelType:c.h.CUSTOM}),se=Object(r.a)({name:"canSearch",dependModelType:c.h.CUSTOM}),ue=Object(r.f)({name:"if-module",dependModelType:c.h.CUSTOM}),de=Object(r.f)({name:"height",dependModelType:c.h.CUSTOM}),me=Object(r.d)({name:"action",ref:"com.axelor.meta.db.MetaAction",requiredFor:["panel-dashlet","item"],dependModelType:c.h.CUSTOM}),fe=Object(r.f)({name:"field",required:!0,requiredFor:["panel-related"],dependModelType:c.h.CUSTOM}),pe=Object(r.a)({name:"canMove",dependModelType:c.h.CUSTOM}),be=Object(r.f)({name:"orderBy",dependModelType:c.h.CUSTOM}),ge=Object(r.d)({name:"view",title:"View",ref:"com.axelor.meta.db.MetaView",valueField:"name",requiredFor:["panel-include"],dependModelType:c.h.CUSTOM}),ve=Object(r.f)({name:"from"}),ye=Object(r.a)({name:"sidebar",parentField:"widgetAttrs",modelType:c.h.CUSTOM,dependModelType:c.h.CUSTOM,showInCustomField:!1}),he=Object(r.a)({name:"translatable"}),Oe=Object(r.f)({name:"column"}),je=Object(r.a)({name:"massUpdate"}),we=Object(r.a)({name:"hashKey"}),xe=Object(r.a)({name:"transient"}),Te=Object(r.a)({name:"tz"}),ke=Object(r.a)({name:"encrypted"}),Se=Object(r.a)({name:"password"}),Ee=Object(r.a)({name:"multiline",dependModelType:c.h.CUSTOM}),Ce=Object(r.a)({name:"large"}),Me=Object(r.f)({name:"search"}),Fe=Object(r.a)({name:"formula"}),Ne=Object(r.a)({name:"initParam"}),Ie=Object(r.f)({name:"index"}),Le=Object(r.f)({name:"default"}),We=Object(r.a)({name:"unique"}),Ae=Object(r.a)({name:"image"}),Ve=Object(r.f)({name:"ref"}),Be=Object(r.f)({name:"mappedBy"}),qe=Object(r.a)({name:"orphanRemoval"}),Pe=Object(r.a)({name:"sequential"}),_e=Object(r.a)({name:"cachable"}),Ue=Object(r.e)({name:"repository",data:["none","default","abstract"]}),De=Object(r.a)({name:"logUpdates"}),Re=Object(r.f)({name:"lang"}),Je=Object(r.f)({name:"table"}),ze=Object(r.f)({name:"implements"}),Xe=Object(r.f)({name:"persistable"}),Ye=Object(r.f)({name:"extends"}),He=Object(r.a)({name:"hashAll"}),Ke=Object(r.e)({name:"strategy",data:["SINGLE","JOINED","CLASS"]}),Qe=(Object(r.a)({name:"stacked",dependModelType:c.h.BASE}),Object(r.f)({name:"packageName"})),Ge=Object(r.f)({name:"selection"}),$e=Object(r.d)({name:"model",required:!0,ref:"com.axelor.meta.db.MetaModel",valueField:"fullName"}),Ze=Object(r.e)({name:"color",data:["default","primary","warning","success","danger","info"]}),et=Object(r.e)({name:"background",data:["default","primary","warning","success","danger","info"]}),tt=Object(r.a)({name:"strong",dependModelType:c.h.BASE})},181:function(e,t,a){e.exports=a(230)},186:function(e,t,a){},187:function(e,t,a){},193:function(e,t){},195:function(e,t){},2:function(e,t,a){"use strict";a.d(t,"j",(function(){return n})),a.d(t,"g",(function(){return i})),a.d(t,"l",(function(){return r})),a.d(t,"d",(function(){return o})),a.d(t,"i",(function(){return l})),a.d(t,"e",(function(){return c})),a.d(t,"f",(function(){return s})),a.d(t,"n",(function(){return u})),a.d(t,"o",(function(){return d})),a.d(t,"h",(function(){return m})),a.d(t,"c",(function(){return f})),a.d(t,"a",(function(){return p})),a.d(t,"b",(function(){return b})),a.d(t,"k",(function(){return g})),a.d(t,"m",(function(){return v}));var n={panel:"panel",tabs:"panel-tabs",field:"field",dumpField:"dump_field",form:"form",panelStack:"panel-stack",panelDashlet:"panel-dashlet",panelRelated:"panel-related",panelInclude:"panel-include",menu:"menu",menuItem:"item",divider:"divider",menubar:"menubar",toolbar:"toolbar"},i={CONTAINER:"panel",ROOTCONTAINER:"root-container",ITEM:"item",DUMMY:"dummy"},r={string:"stringEntity",boolean:"booleanEntity",integer:"integerEntity",long:"longEntity",decimal:"decimalEntity",date:"dateEntity",time:"timeEntity",datetime:"datetimeEntity",binary:"binaryEntity",manyToMany:"many-to-manyEntity",oneToMany:"one-to-manyEntity",manyToOne:"many-to-oneEntity",oneToOne:"one-to-oneEntity"},o={string:"string",number:"number",button:"button",spacer:"spacer",boolean:"boolean",separator:"separator",hilite:"hilite"},l={stack:"stack",flow:"flow",grid:"grid",custom:"custom"},c={max:12},s={createWidgets:{tabs:Symbol(),panel:Symbol(),field:Symbol()},form:-1,customForm:-2,dumpField:0},u={OneToMany:"one-to-many",ManyToMany:"many-to-many",ManyToOne:"many-to-one",OneToOne:"one-to-one"},d={include:n.panelInclude,MANY_TO_MANY:"many-to-many",MANY_TO_ONE:"many-to-one",ONE_TO_ONE:"one-to-one",ONE_TO_MANY:"one-to-many"},m={BASE:"BASE",CUSTOM:"CUSTOM",ENTITY:"ENTITY"},f={META:"META",ENTITY:"ENTITY"},p={showTitle:!0,readonly:!1,required:!1,hidden:!1,sidebar:!1,canCollapse:!1,stacked:!1,canMove:!1,canSearch:!1,multiline:!1},b=["string","integer","decimal","boolean","datetime","date","time","many-to-one","one-to-many","many-to-many"],g={readonlyIf:"readonly",requiredIf:"required",hideIf:"hidden",collapseIf:"canCollapse"},v=["value:add","value:del","refresh","active"]},23:function(e,t,a){"use strict";var n,i=a(100),r=a(101),o=a(4),l=a(151),c=a.n(l),s={"X-Requested-With":"XMLHttpRequest","Content-Type":"application/json",Accept:"application/json"},u={};function d(e){var t=document.cookie||"";return t!==n&&(n=t,u=t.split("; ").reduce((function(e,t){var a=t.split("=");return e[a[0]]=a[1],e}),{})),u[e]}var m=function(e,t){return"ws/rest/".concat(e,"/").concat(t)},f=new(function(){function e(t){Object(i.a)(this,e),this.baseURL="../../"}return Object(r.a)(e,[{key:"request",value:function(e,t,a){var n={};return"get"!==t&&(n.data=a),c()(Object(o.a)({method:t,baseURL:this.baseURL,headers:Object(o.a)(Object(o.a)({},s),{},{"X-CSRF-Token":d("CSRF-TOKEN")}),url:e},n))}},{key:"interceptor",value:function(e,t,a){var n=this;return this.request(e,t,a).then((function(i){if(200===i.status)return i.data||{status:i.status};if(401===i.status){var r=localStorage.getItem("credential");if(r){var o=JSON.parse(r),l=o.username,c=o.password;return n.login(l,c).then((function(i){if(200===i.status)return n.interceptor(e,t,a)}))}}return Promise.resolve("Error")})).catch((function(i){if(401===i.response.status)return n.relogin(e,t,a)}))}},{key:"relogin",value:function(e,t,a){var n=this,i=localStorage.getItem("credential");if(i){var r=JSON.parse(i),o=r.username,l=r.password;return this.login(o,l).then((function(i){if(200===i.status)return n.interceptor(e,t,a)}))}}},{key:"get",value:function(e){return this.interceptor(e,"get")}},{key:"post",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.interceptor(e,"post",t)}},{key:"delete",value:function(e,t){return this.interceptor(e,"delete",t)}},{key:"login",value:function(e,t){var a={username:e,password:t};return this.interceptor("login.jsp","post",a).then((function(a){return 200===a.status&&localStorage.setItem("credential",JSON.stringify({username:e,password:t})),{status:a.status}}))}},{key:"logout",value:function(){return this.interceptor("logout").then((function(){localStorage.removeItem("credential")}))}}]),e}()),p=function(){function e(t){Object(i.a)(this,e),this.model=t.model}return Object(r.a)(e,[{key:"search",value:function(e){var t=e.fields,a=e.sortBy,n=e.data,i=e.limit,r=e.offset,o=m(this.model,"search");return f.post(o,{fields:t,sortBy:a,data:n,limit:i,offset:r})}},{key:"fetch",value:function(e,t){var a="".concat(e,"/fetch"),n=m(this.model,a);return f.post(n,t)}},{key:"view",value:function(e){return f.post("/ws/meta/view",e)}},{key:"save",value:function(e){var t=m(this.model,"");return f.post(t,{data:e})}},{key:"saveAll",value:function(e){var t=m(this.model,"");return f.post(t,{records:e})}},{key:"removeAll",value:function(e){var t=m(this.model,"removeAll");return f.post(t,{records:e})}},{key:"login",value:function(e,t){return f.login(e,t)}},{key:"logout",value:function(){return f.logout()}},{key:"action",value:function(e){return f.post("ws/action",e)}},{key:"info",value:function(){return f.get("ws/app/info")}}]),e}();t.a=p},230:function(e,t,a){"use strict";a.r(t);var n=a(0),i=a.n(n),r=a(24),o=a.n(r),l=(a(186),a(187),a(9)),c=a(272),s=a(269),u=a(300),d=a(157),m=a(26),f=a(274),p=a(302),b=a(292),g=a(290),v=a(291),y=a(25),h=a.n(y),O=a(67),j=a(74),w=a(271),x=a(8),T=Object(s.a)({fieldsContainer:{display:"flex",justifyContent:"center",alignItems:"center",background:"#e7eaec",borderRadius:5},fieldImage:{display:"flex",justifyContent:"center",alignItems:"center",padding:15},fieldLabel:{fontWeight:"bold"},icon:{width:20,height:20,backgroundRepeat:"no-repeat",backgroundSize:"contain",backgroundPosition:"center",position:"absolute"},gridContainer:{display:"flex",alignItems:"center"},labelContainer:{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"}}),k=function(e){var t=e.serverType||e.type;return t&&-1!==t.indexOf("datetime")?"datetime.png":t&&-1!==t.indexOf("date")?"date.png":t&&-1!==t.indexOf("time")?"time.png":t&&-1!==t.indexOf("decimal")?"decimal.png":e.image?e.image:"".concat(t,".png")};var S=function(e){var t=T(),a=e.attrs,n=e.targetName,r=void 0===n?"name":n;return i.a.createElement("div",{className:t.fieldsContainer},i.a.createElement(w.a,{arrow:!0,title:Object(x.n)(Object(x.b)(a[r]||a.title)),placement:"top"},i.a.createElement(c.a,{container:!0,className:t.gridContainer},i.a.createElement(c.a,{xs:4,item:!0,className:t.fieldImage},i.a.createElement("div",{className:t.icon,style:{backgroundImage:"url(./images/".concat(k(a),")")}})),i.a.createElement(c.a,{xs:8,item:!0,className:t.labelContainer},i.a.createElement(O.a,{variant:"caption",className:t.fieldLabel},Object(x.n)(Object(x.b)(a[r]||a.title)))))))},E=a(61),C=a(4),M=a(27),F=a(2),N=Object(s.a)({container:{padding:"0px 25px",display:"flex",flexWrap:"wrap",alignItems:"center",justifyContent:"space-between"},message:{color:"#fff"},fieldContainer:{marginTop:5,width:"45%"}}),I=(i.a.memo((function(e){var t=N(),a=Object(M.b)().state.metaFields||[];return i.a.createElement(c.a,{className:t.container},a?a.map((function(e,a){return i.a.createElement("div",{className:t.fieldContainer,key:a},i.a.createElement(E.default,{attrs:Object(C.a)(Object(C.a)({},e),{},{isCoreField:!1}),design:!0,component:S,id:F.f.createWidgets.field,targetImageName:"".concat(e&&e.type.toLowerCase(),".png")}))})):i.a.createElement(O.a,{className:t.message},"No fields available"))})),Object(s.a)({container:{padding:"0px 25px",display:"flex",flexWrap:"wrap",alignItems:"center",justifyContent:"space-between"},fieldGroupTitle:{padding:"25px 25px 0px 25px",color:"white"},fieldContainer:{marginTop:5,width:"45%"}})),L=i.a.memo((function(){var e=I(),t=Object(M.b)().state,a=t.modelType===F.h.ENTITY?j.a:[].concat(Object(l.a)(j.b),Object(l.a)(j.c)).filter((function(e){return"Menu"!==e.name||t.modelType!==F.h.CUSTOM}));return i.a.createElement(i.a.Fragment,null,a.map((function(a,n){return i.a.createElement(i.a.Fragment,{key:n},i.a.createElement(O.a,{variant:"body1",className:e.fieldGroupTitle},a.name),i.a.createElement(c.a,{className:e.container},a.value&&a.value.map((function(a,n){return a.editorType&&!a.editorType.includes(t.modelType)?null:function(e){return![F.j.menubar,F.j.toolbar].includes(e.type)||!t.widgets||-1===Object.values(t.widgets).findIndex((function(t){return t.type===e.type}))}(a)?i.a.createElement("div",{className:e.fieldContainer,key:n},i.a.createElement(E.default,{id:a.id,attrs:a,design:!0,component:S,isCoreField:!0,isPalleteField:!0})):null}))))})))})),W=a(13),A=a.n(W),V=a(20),B=a(15),q=a(21),P=a(308),_=a(278),U=a(287),D=a(311),R=a(285),J=a(310),z=a(301),X=a(288),Y=a(289),H=a(51),K=a(283),Q=a(303),G=a(23);function $(e,t){var a=i.a.useRef(!1);i.a.useEffect((function(){if(a.current){var n=setTimeout((function(){return e()}),t);return function(){return clearTimeout(n)}}a.current=!0}),[e,t])}var Z=a(282),ee=a(277),te=a(152),ae=a.n(te),ne=a(153),ie=a.n(ne),re=a(307),oe=a(281),le=a(276),ce=a(275),se=a(273),ue=a(279),de=a(236),me=a(280),fe=a(39),pe=Object(s.a)((function(e){return{root:{width:"100%",backgroundColor:e.palette.background.paper,maxHeight:300,overflow:"auto"},input:{width:"80%",marginRight:10},titleHeader:{borderBottom:"0.5px solid #ddd"},listItem:{borderBottom:"1px solid #ddd",paddingTop:10,paddingBottom:10},closeText:{textTransform:"capitalize"}}}));function be(e){var t=e.list,a=void 0===t?[]:t,n=e.onChange,r=e.handleClose,o=e.offset,l=e.total,s=e.displayField,u=e.getOptionLabel,d=Object(fe.a)(),m=pe(),f=Object(se.a)(d.breakpoints.down("sm")),p=i.a.useCallback((function(e){n(e),r()}),[n,r]),b=o+a.length<l,g=o>0,v=function(e){return u?u(e):e[s||"name"]};return i.a.createElement("div",null,i.a.createElement(re.a,{fullScreen:f,maxWidth:"sm",fullWidth:!0,open:e.open,onClose:e.handleClose,"aria-labelledby":"responsive-dialog-title"},i.a.createElement(ce.a,{id:"responsive-dialog-title",className:m.titleHeader},"Search ".concat(e.title||"item")),i.a.createElement(le.a,null,i.a.createElement(c.a,{container:!0},i.a.createElement(ee.a,{className:m.input,value:e.searchText,onChange:function(t){return e.setSearchText(t.target.value)}}),i.a.createElement(_.a,{onClick:e.onPrevious,disabled:!g},i.a.createElement(ae.a,null)),i.a.createElement(_.a,{onClick:e.onNext,disabled:!b},i.a.createElement(ie.a,null))),i.a.createElement(ue.a,{className:m.root},a.map((function(e,t){return i.a.createElement(de.a,{className:m.listItem,key:t,role:void 0,dense:!0,button:!0,onClick:function(){return p(e)}},i.a.createElement(me.a,{id:t,primary:v(e)}))})))),i.a.createElement(oe.a,null,i.a.createElement(Z.a,{autoFocus:!0,onClick:e.handleClose,color:"primary"},i.a.createElement(O.a,{className:m.closeText},"Close")))))}var ge=Object(K.a)(),ve=Object(s.a)({autoComplete:{backgroundColor:"#2f4050",marginBottom:5,"& > div > label":{color:"#e7eaec !important",fontSize:14},".modern-dark &":{backgroundColor:"#323232"}},input:{color:"#e7eaec",fontSize:14},root:{color:"#e7eaec"},error:{color:"red",marginBottom:5,fontSize:14}});function ye(e){var t=e.field,a=t.name,r=t.ref,o=t.title,c=t.valueField,s=void 0===c?"id":c,u=t.type,d=t.multiple,f=void 0!==d&&d,p=t.commaSeparated,b=t.displayField,g=void 0===b?"name":b,v=t.limit,y=void 0===v?10:v,h=t.data,j=void 0===h?[]:h,w=t.isDisabled,T=t.needsTargetModel,k=(t.showMore,t.canAddNew),S=void 0===k||k,E=t.getOptionLabel,M=t.fetchFieldList,F=void 0===M?[]:M,N=t.shouldFetchInStart,I=void 0!==N&&N,L=e.props,W=e.error,A=L.propertyList,V=L.setPropertyList,B=L.onChange,_=L.editWidgetType,U=L.modelType,D=A[a]||"";if(p&&"select"===u){var R=D?D.split(","):[];D=R.map((function(e){return Object(m.a)({},s,e)}))}var J=Object(n.useState)(Object(l.a)(j)),z=Object(q.a)(J,2),X=z[0],Y=z[1],H=Object(n.useState)(""),K=Object(q.a)(H,2),Z=K[0],ee=K[1],te=i.a.useRef(!0),ae=Object(n.useState)(!1),ne=Object(q.a)(ae,2),ie=ne[0],re=ne[1],oe=Object(n.useState)(0),le=Object(q.a)(oe,2),ce=le[0],se=le[1],ue=Object(n.useState)(0),de=Object(q.a)(ue,2),me=de[0],fe=de[1],pe=Object(n.useState)(!1),ye=Object(q.a)(pe,2),he=ye[0],Oe=ye[1],je=A.targetModel,we=ve(),xe=!!w&&w(A,_,U),Te=Object(n.useCallback)((function(e,t,a){"reset"!==a&&ee("objectSelection"===u&&"object"===typeof t?t[g]:t)}),[u,g]),ke=Object(n.useCallback)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return p?e?e.map((function(e){return e.name})).join(","):"":r?e[s]:e}),[s,p,r]),Se=Object(n.useCallback)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=[];if(e&&n.push({fieldName:"name",operator:"like",value:e}),"gridView"!==a&&"formView"!==a||!T.includes(L.type)||je){"gridView"===a&&(T.includes(L.type)&&n.push({fieldName:"model",operator:"=",value:je}),n.push({fieldName:"type",operator:"=",value:"grid"})),"formView"===a&&(T.includes(L.type)&&n.push({fieldName:"model",operator:"=",value:je}),n.push({fieldName:"type",operator:"=",value:"form"}));var i={criteria:n,operator:"and"},o=["name","fullName",s,g].concat(Object(l.a)(F)).filter((function(e){return e}));return I&&he?void 0:new G.a({model:r}).search({fields:o,data:i,limit:y,offset:t}).then((function(e){var t=e.data,a=e.total;Oe(!0),t&&t.length&&te.current&&(!ie&&a>y&&t.push({name:"Show more...",id:"studio_show_More_View"}),fe(a),Y(t))}))}}),[a,r,je,s,g,y,T,L.type,ie,he,I]),Ee=i.a.useCallback((function(){r&&Se(Z)}),[Se,Z,r]),Ce=i.a.useCallback((function(e){return e&&"string"===typeof e&&r&&(e=Object(m.a)({},s,e)),e}),[r,s]),Me=i.a.useCallback((function(e){ee(e),se(0)}),[]),Fe=i.a.useCallback((function(){var e=ce+y;e<=me&&(se(e),Se(Z,e))}),[y,me,ce,Se,Z]),Ne=i.a.useCallback((function(){var e=ce-y;se(e=e>0?e:0),Se(Z,e)}),[ce,y,Z,Se]),Ie=i.a.useCallback((function(){re(!1),se(0)}),[]),Le=i.a.useCallback((function(e,t){var n;if("studio_show_More_View"!==(null===(n=t)||void 0===n?void 0:n.id)){if(f){if(e.fromDialog)t=[].concat(Object(l.a)(D),[t]);else-1!==t.findIndex((function(e){return"studio_show_More_View"===(null===e||void 0===e?void 0:e.id)}))&&re(!0);t=t.map((function(e){if("studio_show_More_View"!==(null===e||void 0===e?void 0:e.id))return Ce(e)})).filter((function(e){return e}))}else t&&t.inputValue&&t.inputValue.length&&r&&(t[s]=t.inputValue);ee(""),V(Object(C.a)(Object(C.a)({},A),{},Object(m.a)({},a,"objectSelection"===u?t:t&&ke(t)))),B(Object(C.a)(Object(C.a)({},A),{},Object(m.a)({},a,"objectSelection"===u?t:t&&ke(t))))}else re(!0)}),[ke,f,a,B,V,A,D,u,r,Ce,s]);return $(Ee,500),Object(n.useEffect)((function(){return te.current=!0,Se(),function(){te.current=!1}}),[Se]),Object(n.useEffect)((function(){f||ee("object"===typeof D?D[g]:D)}),[f,D,g,u]),i.a.createElement(i.a.Fragment,null,i.a.createElement(Q.a,Object.assign({classes:{inputFocused:we.input,clearIndicator:we.input,popupIndicator:we.input},className:we.autoComplete,disabled:xe,multiple:f,options:X,freeSolo:"objectSelection"!==u,value:f?D||[]:function(e){return"string"===typeof e&&r?Object(m.a)({},s,e):e}(D),inputValue:Z||"",onInputChange:Te},!f&&{filterOptions:function(e,t){var a=ge(e,t);""!==Z&&S&&a.splice(0,0,{inputValue:Z,name:'Add "'.concat(Z,'"')});var n=e.find((function(e){return"studio_show_More_View"===e.id}));n&&!["",null,void 0].includes(t.inputValue)&&(!(-1!==a.findIndex((function(e){return"studio_show_More_View"===e.id})))&&a.push(Object(C.a)({},n)));return a}},{onChange:Le,renderInput:function(e){return i.a.createElement(P.a,Object.assign({},e,{variant:"filled",label:Object(x.b)(o||a)}))},getOptionLabel:function(e){return E?E(e,X):"string"===typeof e?e:e[g]||""}})),W&&i.a.createElement(O.a,{className:we.error},W),ie&&i.a.createElement(be,{searchText:Z,list:X,total:me,offset:ce,displayField:g,open:ie,onNext:Fe,onPrevious:Ne,handleClose:Ie,setSearchText:Me,title:Object(x.b)(o||a),onChange:function(e){return Le({fromDialog:!0},e)}}))}var he=a(1),Oe=Object(s.a)({container:{marginBottom:15},row:{display:"flex"},languageText:{width:"15%",marginTop:8,textTransform:"capitalize",textAlign:"center"}});var je=function(e){var t=Oe(),a=Object(M.b)(),n=a.state,r=a.update,o=e.keyValue,c=Object(B.a)(e,["keyValue"]),s=n.translationList,u=i.a.useState([]),d=Object(q.a)(u,2),m=d[0],f=d[1],p=i.a.useCallback((function(e){var t=e.key,a=e.message,n=e.language;f((function(e){var i=Object(l.a)(e),r=i.findIndex((function(e){return e.key===t&&e.language===n}));return-1!==r?i[r]=Object(C.a)(Object(C.a)({},i[r]),{},{message:a}):i.push({key:t,message:a,language:n}),Object(l.a)(i)}))}),[]),b=i.a.useCallback((function(e){var t=e.key,a=e.message,n=e.language;r((function(e){var i=e.translationList.findIndex((function(e){return e.key===t&&e.language===n}));-1!==i?e.translationList[i].message=a:e.translationList.push({key:t,message:a,language:n})}))}),[r]);return i.a.useEffect((function(){f(Object(l.a)(s))}),[s]),i.a.createElement("div",{className:t.container},n.languageList.map((function(e,a){var n;return i.a.createElement("div",{key:a,className:t.row},i.a.createElement(O.a,{classes:{root:t.languageText}},e.value),i.a.createElement(P.a,Object.assign({variant:"outlined"},c,{value:(null===(n=m.find((function(t){return t.key===o&&t.language===e.value})))||void 0===n?void 0:n.message)||"",onChange:function(t){return p({key:o,message:t.target.value,language:e.value})},onBlur:function(t){return t.target.value&&b({key:o,message:t.target.value,language:e.value})}})))})))},we=a(155),xe=a.n(we),Te=a(154),ke=a.n(Te),Se=a(156),Ee=a.n(Se),Ce=new G.a({model:"com.axelor.meta.db.MetaJsonField"}),Me=new G.a({model:"com.axelor.meta.db.MetaJsonModel"}),Fe=new G.a({model:"com.axelor.meta.db.MetaJsonField"}),Ne=new G.a({model:"com.axelor.studio.db.EntityModel"}),Ie=(new G.a({model:"com.axelor.apps.base.db.App"}),new G.a({model:"com.axelor.apps.base.db.AppBpm"})),Le=new G.a({model:"com.axelor.auth.db.User"}),We=new G.a({model:"com.axelor.meta.db.MetaView"}),Ae=new G.a({model:"com.axelor.meta.db.MetaModel"}),Ve=new G.a({model:"com.axelor.meta.db.MetaAttrs"}),Be=new G.a({model:"com.axelor.meta.db.MetaSelect"}),qe=new G.a({model:"com.axelor.studio.db.SelectionBuilder"}),Pe=new G.a({model:"com.axelor.meta.db.MetaTranslation"});function _e(e,t){var a="self.jsonModel = null and self.modelField='".concat(e.name,"' and self.model='").concat(t.fullName,"'");return Ce.search({data:{_domain:a},sortBy:["sequence"]})}function Ue(e){return Me.save(e)}function De(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=[];if(e.length){n.push({fieldName:"id",operator:"in",value:e});var i={criteria:n};Fe.search({data:i,sortBy:["sequence"]}).then((function(e){if(e.data){var n=e.data||[],i=Object(x.f)(n,a);t((function(e){e.items=n.filter((function(e){return"panel"===e.type})).map((function(e){return e.id})),e.widgets=Object(C.a)({},i.widgets),e.items=i.items}))}}))}else t((function(e){e.widgets={"-1":Object(C.a)(Object(C.a)({type:"form"},a),Object(x.h)(a?a.menuBuilder:void 0)),0:{type:"dump_field",name:""}},e.items=[],e.loader=!1}))}function Re(){return(Re=Object(V.a)(A.a.mark((function e(){var t,a;return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={data:{_domain:"self.app.code = :code",_domainContext:{code:"bpm"}},fields:["enableAppBuilder"],limit:1,offset:0},e.next=3,Ie.search(Object(C.a)({},t));case 3:if(a=e.sent,!Array.isArray(a.data)||!a.data[0]){e.next=6;break}return e.abrupt("return",a.data[0].enableAppBuilder);case 6:return e.abrupt("return",!1);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Je(e){return ze.apply(this,arguments)}function ze(){return(ze=Object(V.a)(A.a.mark((function e(t){var a,n;return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=Object(C.a)({_model:"com.axelor.meta.db.MetaJsonModel",_id:null},t),"action-studio-json-model-method-isgeneratemenu-onchange",n={action:"action-studio-json-model-method-isgeneratemenu-onchange",model:"com.axelor.meta.db.MetaJsonModel",data:{context:a}},e.next=5,Me.action(n);case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Xe(e){return Ye.apply(this,arguments)}function Ye(){return(Ye=Object(V.a)(A.a.mark((function e(t){var a,n,i;return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Me.fetch(t);case 2:return a=e.sent,n=a.data,i=void 0===n?[]:n,e.abrupt("return",i[0]);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function He(e){return Ke.apply(this,arguments)}function Ke(){return(Ke=Object(V.a)(A.a.mark((function e(t){var a,n,i;return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ne.fetch(t.id);case 2:return a=e.sent,n=a.data,i=void 0===n?[]:n,e.abrupt("return",i[0]);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Qe(){return(Qe=Object(V.a)(A.a.mark((function e(t){return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Ne.removeAll([t]));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ge(e){return $e.apply(this,arguments)}function $e(){return($e=Object(V.a)(A.a.mark((function e(t){var a,n,i,r,o;return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={_domain:"self.packageName = '".concat(t.packageName,"' and self.name = '").concat(t.name,"'")},e.next=3,Ne.search({data:a});case 3:return n=e.sent,i=n.data,r=(void 0===i?[]:i)[0],o=[],r&&(o=x.e.getEntityModelFields(r.entityXml)),e.abrupt("return",o);case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ze(e){return et.apply(this,arguments)}function et(){return(et=Object(V.a)(A.a.mark((function e(t){var a,n,i;return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={operator:"and",criteria:[{fieldName:"name",operator:"=",value:"".concat(t.name)}]},e.next=3,We.search({data:a});case 3:return(n=e.sent).data&&(i=x.e.getViews(n.data,t.name)),e.abrupt("return",i);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function tt(e){return at.apply(this,arguments)}function at(){return(at=Object(V.a)(A.a.mark((function e(t){var a,n,i,r,o,l;return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=[],n={_domain:"self.packageName = '".concat(t.packageName,"' and self.name = '").concat(t.name,"'")},e.next=4,Ae.search({data:n});case 4:if(!(i=e.sent).data||!i.data[0]){e.next=14;break}return r=i.data[0],o={fields:["metaFields"],related:{metaFields:["typeName","label","mappedBy","relationship","name","packageName","typeName"]}},e.next=10,Ae.fetch(r.id,o);case 10:if(!(l=e.sent)||!l.data[0]){e.next=14;break}return a=l.data[0].metaFields,e.abrupt("return",a);case 14:return e.abrupt("return",a);case 15:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function nt(e){return it.apply(this,arguments)}function it(){return(it=Object(V.a)(A.a.mark((function e(t){var a,n,i,r,o,c,s;return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.model,n=t.view,i=[{fieldName:"model",operator:"=",value:a},{fieldName:"view",operator:"=",value:n}],e.next=4,Ve.search({data:{criteria:i},limit:null});case 4:if(!(r=e.sent).data||!Array.isArray(r.data)){e.next=10;break}return o=Object.keys(F.k),c=Object.values(F.k),s=Object(l.a)(r.data).map((function(e){return c.includes(e.name)?e.value.startsWith('"')&&e.value.endsWith('"')?(e.value=e.value.replace('"',""),e.value=e.value.replace('"',"")):["true","false"].includes(e.value)||(e.name=o[c.indexOf(e.name)]):(e.value=e.value.replace('"',""),e.value=e.value.replace('"',"")),e})),e.abrupt("return",s);case 10:return e.abrupt("return",[]);case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function rt(e){return ot.apply(this,arguments)}function ot(){return(ot=Object(V.a)(A.a.mark((function e(t){var a;return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ve.saveAll(Object(l.a)(t));case 2:if(!(a=e.sent).data||!Array.isArray(a.data)){e.next=5;break}return e.abrupt("return",a.data);case 5:return e.abrupt("return",[]);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function lt(e){return ct.apply(this,arguments)}function ct(){return(ct=Object(V.a)(A.a.mark((function e(t){var a;return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ve.removeAll(t);case 2:if(!(a=e.sent).data||!Array.isArray(a.data)){e.next=5;break}return e.abrupt("return",a.data);case 5:return e.abrupt("return",[]);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function st(){return(st=Object(V.a)(A.a.mark((function e(){var t,a;return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=[{fieldName:"name",operator:"=",value:"select.language"}],e.next=3,Be.search({data:{criteria:t},fields:["items.value","items.title"]});case 3:if(!((a=e.sent)&&a.data&&Array.isArray(a.data))){e.next=6;break}return e.abrupt("return",a.data.map((function(e){return{title:e["items.title"],value:e["items.value"]}})));case 6:return e.abrupt("return",[]);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ut(e){return dt.apply(this,arguments)}function dt(){return(dt=Object(V.a)(A.a.mark((function e(t){var a,n;return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=[{fieldName:"key",operator:"in",value:t}],e.next=3,Pe.search({data:{criteria:a}});case 3:if(!(n=e.sent).data||!Array.isArray(n.data)){e.next=6;break}return e.abrupt("return",n.data);case 6:return e.abrupt("return",[]);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function mt(e){return ft.apply(this,arguments)}function ft(){return(ft=Object(V.a)(A.a.mark((function e(t){var a;return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Pe.saveAll(Object(l.a)(t));case 2:if(!(a=e.sent).data||!Array.isArray(a.data)){e.next=5;break}return e.abrupt("return",a.data);case 5:return e.abrupt("return",[]);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function pt(e){return bt.apply(this,arguments)}function bt(){return(bt=Object(V.a)(A.a.mark((function e(t){var a;return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Pe.removeAll(t);case 2:if(!(a=e.sent).data||!Array.isArray(a.data)){e.next=5;break}return e.abrupt("return",a.data);case 5:return e.abrupt("return",[]);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function gt(){return(gt=Object(V.a)(A.a.mark((function e(){var t,a;return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Le.info();case 2:if(!(t=e.sent)||!t["user.id"]){e.next=9;break}return e.next=6,Le.fetch(t["user.id"]);case 6:if(!(a=e.sent).data||!a.data[0]){e.next=9;break}return e.abrupt("return",a.data[0]);case 9:return e.abrupt("return",null);case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function vt(e){return yt.apply(this,arguments)}function yt(){return(yt=Object(V.a)(A.a.mark((function e(t){var a,n,i,r,o,l,c;return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a="",!t){e.next=9;break}return n={metaSelect:Object(C.a)({},t)},i={data:{context:n},action:"action-selection-builder-method-fill-selection-text",model:"com.axelor.studio.db.SelectionBuilder"},e.next=6,qe.action(i);case 6:r=e.sent,o=r.data,(l=void 0===o?[]:o)[0]&&(c=l[0].values||{}).selectionText&&(a=c.selectionText);case 9:return e.abrupt("return",a);case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var ht=a(286);function Ot(e){var t=e.onOk,a=e.onClose,n=e.open,r=e.message;return i.a.createElement(re.a,{open:n,onClose:a,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description"},i.a.createElement(ce.a,{id:"alert-dialog-title"},"Delete Confirmation"),i.a.createElement(le.a,null,i.a.createElement(ht.a,{id:"alert-dialog-description"},r)),i.a.createElement(oe.a,null,i.a.createElement(Z.a,{onClick:t,color:"primary"},"Yes"),i.a.createElement(Z.a,{onClick:a,color:"primary",autoFocus:!0},"No")))}var jt=Object(s.a)({input:{backgroundColor:"#2f4050",marginBottom:15,".modern-dark &":{backgroundColor:"#323232"}},translationInput:{paddingTop:10,paddingBottom:10},translationInputView:{backgroundColor:"#2f4050",marginBottom:5,".modern-dark &":{backgroundColor:"#323232"}},label:{color:"#e7eaec",fontSize:14,"&#outlined-basic-label":{color:"#e7eaec"}},outlinedRoot:{color:"#e7eaec","&:hover $notchedOutline":{borderColor:"#e7eaec"},"&$focused $notchedOutline":{borderColor:"white",borderWidth:1}},notchedOutline:{},focused:{color:"#e7eaec"},switchBase:{"&$checked":{color:"#e7eaec"},"&$checked + $track":{backgroundColor:"#e7eaec"}},checked:{},track:{},selection:{color:"#e7eaec",backgroundColor:"#2f4050",".modern-dark &":{backgroundColor:"#323232"}},iconOutlined:{color:"#e7eaec"},panelTitle:{color:"peachpuff",margin:"10px 0px",fontWeight:"bold"},disableInput:{color:"#e7eaec"},unique:{color:"#0275d8"},required:{color:"red"},translateButton:{color:"#e7eaec"}}),wt=i.a.createContext();var xt=function(e){return e.includes("studio:")};function Tt(e){var t=e.index,a=e.multiline,n=void 0!==a&&a,r=e.error,o=e.parentPanel,l=e.onTranslationRemove,c=e.clearable,s=void 0!==c&&c,u=jt(),d=i.a.useState(!1),m=Object(q.a)(d,2),f=m[0],p=m[1],b=e.field,g=b.title,v=b.name,y=b.type,h=(b.required,b.readOnly),O=b.max,j=b.min,w=b.parentField,T=b.translationView,k=Object(B.a)(b,["title","name","type","required","readOnly","max","min","parentField","translationView"]),S=i.a.useContext(wt),E=S.propertyList,M=S.setPropertyList,N=S.onChange,I=S.modelType,L=S.metaFieldStore,W=S.editWidgetType,A=function(e,t){var a=jt();return i.a.createElement("span",null,i.a.createElement("span",null,e),t.unique&&i.a.createElement("span",{className:a.unique}," (unique) "),t.required&&i.a.createElement("span",{className:a.required}," * "))}(Object(x.n)(Object(x.b)(g||v)),e.field),V=Object(x.n)(Object(x.b)(g||v));"showIf"===v||"requiredIf"===v?V="id == 1":"hideIf"===v?V="id == null":"readOnlyIf"===v&&(V="id != null");var U=E[v]||"";if((I===k.modelType||"customField"===S.editWidgetType)&&w){var D=E[w]?JSON.parse(E[w]):{};U=D[v]||""}k.formatter&&(U=k.formatter(U,E));var R=Boolean(h);k.isDisabled&&(R=k.isDisabled({properties:E,metaFieldStore:L,editWidgetType:W,modelType:I,parentPanel:o}));var J=i.a.useCallback((function(){if(!xt(U)){var e=Object(x.g)({name:v,fieldName:E[v]||y});N(Object(C.a)(Object(C.a)({},E||{}),Object(x.i)(v,e,w,E[w],!(I===k.modelType)||"customField"===W)),v)}}),[E,v,y,U,N,k.modelType,I,w,W]),z=i.a.useCallback((function(){p(!1),N(Object(C.a)(Object(C.a)({},E||{}),Object(x.i)(v,"",w,E[w],!(I===k.modelType))),v),l(U)}),[l,U,v,w,I,N,E,k.modelType]),X=i.a.useCallback((function(){p(!0)}),[]),Y=i.a.useCallback((function(){p(!1)}),[]);return i.a.createElement(i.a.Fragment,null,i.a.createElement(P.a,{error:Boolean(r),helperText:r,InputProps:{classes:{root:u&&u.outlinedRoot,notchedOutline:u&&u.notchedOutline,focused:u&&u.focused,disabled:u&&u.disableInput},endAdornment:T?xt(U)?i.a.createElement(_.a,{className:u.translateButton,onClick:X},i.a.createElement(ke.a,null)):i.a.createElement(_.a,{className:u.translateButton,onClick:J},i.a.createElement(xe.a,null)):s?i.a.createElement(_.a,{className:u.translateButton,onClick:function(){var e="",t=!0;k.modelType===F.h.BASE&&"customField"!==S.editWidgetType&&(t=""!==e||void 0!==E[v]),k.modelType===F.h.CUSTOM&&"customField"===S.editWidgetType&&(e=e||null),t&&N(Object(C.a)(Object(C.a)({},E||{}),Object(x.i)(v,e,w,E[w],!(I===k.modelType)||"customField"===W)),v)}},i.a.createElement(Ee.a,null)):null},inputProps:{min:j,max:O},InputLabelProps:{className:u&&u.label},key:t,className:u&&u.input,id:"outlined-basic",multiline:n,type:"integer"===y?"number":y,label:A,placeholder:V,variant:"outlined",disabled:R||T&&xt(U),value:U,rows:3,onChange:function(e){if("integer"!==y||!isNaN(Number(e.target.value))){if(j&&O){var t=Number(e.target.value);if(t<j||t>O)return}var a=e.target.value;M(Object(C.a)(Object(C.a)({},E||{}),Object(x.i)(v,a,w,E[w],!(I!==k.modelType)||"customField"===W)))}},onBlur:function(e){if("integer"!==y||!isNaN(Number(e.target.value))){if(j&&O){var t=Number(e.target.value);if(t<j||t>O)return}var a=e.target.value,n=!0;k.modelType===F.h.BASE&&"customField"!==S.editWidgetType&&(n=""!==a||void 0!==E[v]),k.modelType===F.h.CUSTOM&&"customField"===S.editWidgetType&&(a=a||null),n&&N(Object(C.a)(Object(C.a)({},E||{}),Object(x.i)(v,a,w,E[w],!(I===k.modelType)||"customField"===W)),v)}}}),T&&xt(U)&&i.a.createElement(je,{InputProps:{classes:{root:u&&u.outlinedRoot,notchedOutline:u&&u.notchedOutline,focused:u&&u.focused,disabled:u&&u.disableInput,input:u&&u.translationInput}},InputLabelProps:{className:u&&u.label},className:u&&u.translationInputView,keyValue:U}),f&&i.a.createElement(Ot,{open:f,message:"Are you sure, do you want to delete translations?",onClose:Y,onOk:z}))}function kt(e){var t=e.index,a=e.field,n=a.name,r=a.title,o=a.parentField,l=a.defaultValue,c=Object(B.a)(a,["name","title","parentField","defaultValue"]),s=i.a.useContext(wt),u=s.propertyList,d=s.setPropertyList,m=s.onChange,f=s.modelType,p=s.editWidgetType,b=s.metaFieldStore,g=Object(x.j)(u,n,o,l,!(f!==c.modelType)||"customField"===p),v=Boolean(g?!("false"===g):g),y=jt();c.getValue&&(v=c.getValue(u));var h=!1;return c.isDisabled&&(h=c.isDisabled({properties:u,metaFieldStore:b,editWidgetType:p,modelType:f})),r=Object(x.n)(Object(x.b)(r||n)),i.a.createElement(U.a,{style:{marginBottom:15},key:t,control:i.a.createElement(D.a,{classes:{switchBase:y&&y.switchBase,track:y&&y.track,checked:y&&y.checked},checked:v,disabled:h,onChange:function(){d(Object(C.a)(Object(C.a)(Object(C.a)({},u),c.change?c.change(!v,u):{}),Object(x.i)(n,!v,o,u[o],!(f!==c.modelType)||"customField"===p))),m(Object(C.a)(Object(C.a)(Object(C.a)({},u),c.change?c.change(!v,u):{}),Object(x.i)(n,!v,o,u[o],!(f!==c.modelType)||"customField"===p)),n)},value:u[n]}),label:Object(x.b)(r||n)})}function St(e){var t=e.index,a=e.field,n=a.name,r=a.required,o=a.data,l=a.helper,c=a.title,s=a.color,u=a.parentField,d=a.defaultOption,m=void 0===d||d,f=Object(B.a)(a,["name","required","data","helper","title","color","parentField","defaultOption"]),p=i.a.useContext(wt),b=p.propertyList,g=p.setPropertyList,v=p.labelWidth,y=p.inputLabel,h=p.type,O=p.onChange,j=p.modelType,w=jt();"object"!==typeof o||Array.isArray(o)||(o=o[(F.o[h]||h).toLowerCase()]||[]),c=Object(x.n)(Object(x.b)(c||n));var T=function(e){var t=e.color;return i.a.createElement("div",{style:{width:15,height:15,backgroundColor:t}})},k=b[n]||"";j!==f.modelType&&"customField"!==p.editWidgetType||!u||(k=(b[u]?JSON.parse(b[u]):{})[n]||"");return i.a.createElement(R.a,{key:t,variant:"outlined",className:w.formControl},i.a.createElement(J.a,{ref:y,className:w.focused},Object(x.b)(c||n)),i.a.createElement(z.a,{value:k,labelWidth:v||0,style:{width:"100%",marginBottom:15},className:w.selection,classes:{iconOutlined:w.iconOutlined,root:w.selection},required:r,variant:"outlined",onChange:function(e){g(Object(C.a)(Object(C.a)({},b),Object(x.i)(n,e.target.value,u,b[u],j===f.modelType||"customField"===p.editWidgetType))),O(Object(C.a)(Object(C.a)({},b),Object(x.i)(n,e.target.value,u,b[u],j===f.modelType||"customField"===p.editWidgetType)),n)}},m&&i.a.createElement(X.a,{key:t,value:null,style:{padding:"15px 0px"}}),o&&o.map((function(e,t){return"object"===typeof e?i.a.createElement(X.a,{key:t,value:e.value},i.a.createElement("i",{className:"fa ".concat(e),style:{marginRight:4}}),e.text):i.a.createElement(X.a,{key:t,value:e},s&&i.a.createElement(T,{color:e}),i.a.createElement("i",{className:"fa ".concat(e),style:{marginRight:4}}),i.a.createElement("span",null,e))}))),l&&i.a.createElement(Y.a,{type:"search",className:"helper",onClick:function(){return window.open(l,"_blank")}}))}function Et(){var e=i.a.useContext(wt),t=e.elements,a=e.id,n=e.propertyList,r=e.enableAppBuilder,o=e.modelType,l=e.editWidgetType,c=e.errors,s=e.entityType,u=e.actualType,d=e.parentPanel,m=e.onTranslationRemove;return i.a.createElement(i.a.Fragment,null,t.map((function(t,f){if(!1===function(e,t){if(e.depends){var a=t[e.depends];return e.dependValue===a}}(t,n))return null;if(!function(e,t,a,n){return(!e.dependModelType||e.dependModelType===t||"customField"===a)&&(("customField"!==a||!1!==e.showInCustomField)&&!(e.shouldRender&&!e.shouldRender(n)))}(t,o,l,n))return null;if("appBuilder"===t.name&&!r)return null;if([u,s].includes(F.c.META)&&"packageName"===t.name)return null;var p="".concat(f,"_").concat(a);switch(t.type){case"string":return i.a.createElement(Tt,{field:t,key:p,index:p,multiline:!1,error:c[t.name],onTranslationRemove:m});case"integer":return i.a.createElement(Tt,{field:t,key:p,index:p,multiline:!1,error:c[t.name],parentPanel:d,clearable:!0});case"boolean":return i.a.createElement(kt,{field:t,key:p,index:p,error:c[t.name]});case"select":case"objectSelection":return i.a.createElement(ye,{field:t,key:p,index:p,props:e,error:c[t.name]});case"staticSelect":return i.a.createElement(St,{field:t,key:p,index:p,error:c[t.name]});case"text":return i.a.createElement(Tt,{field:t,key:p,index:p,multiline:!0,error:c[t.name]});default:return i.a.createElement(Tt,{field:t,key:p,index:p,error:c[t.name]})}})))}function Ct(e){var t=e.children,a=Object(B.a)(e,["children"]);return i.a.createElement(wt.Provider,{value:a},t)}function Mt(e){var t,a,r,o,l=Object(M.b)(),s=l.state,u=l.onWidgetChange,d=l.onTranslationRemove,m=s.widgets,f=s.editWidget,p=s.editWidgetType,b=s.customFieldWidgets,g=s.modelType,v=s.enableAppBuilder,y=s.metaFieldStore,h=s.errorList,j=void 0===h?{}:h,w=s.entityType,T=s.actualType,k=null;f&&("customField"===p&&b?k=b[f]:"customField"!==p&&m&&(k=m[f]));var S=k||{},E=S.serverType,N=S.isSelectionField,I=(k||{}).type,L="field"===E?I||"string":E||I;if("datetime"===(L=L&&L.toLowerCase().replace(/_/g,"-"))){var W=y.find((function(e){return e.name===k.name}));W&&"true"==="".concat(W.tz)&&(L="zoneddatetime")}var B=Object(n.useState)({}),P=Object(q.a)(B,2),_=P[0],U=P[1],D=H.b.find((function(e){return e.type===L}));if("form"===L?s.modelType===F.h.CUSTOM?D=H.b.find((function(e){return"modelForm"===e.type})):s.modelType===F.h.ENTITY&&(D=H.b.find((function(e){return"entityForm"===e.type}))):L&&g===F.h.ENTITY&&-1===(L||"").toLowerCase().indexOf("entity")&&(L="".concat(L,"entity"),D=H.b.find((function(e){return e.type===L}))),N){var R=D.value.overview.findIndex((function(e){return"type"===e.name}));D.value.overview.splice(R,1,he.vb)}var J=jt(),z=i.a.useRef(null),X=i.a.useState(0),Y=Object(q.a)(X,2),K=Y[0],Q=Y[1];function G(e,t){return $.apply(this,arguments)}function $(){return($=Object(V.a)(A.a.mark((function e(t,a){var n,i,r;return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=Object(C.a)({},t),a===he.P.name&&(n[he.Ib.name]=null,n[he.Jb.name]=null),a!==he.P.name&&"type"!==a&&(n.type=k.type),!n.updateSelection){e.next=12;break}if(k.updateSelection){e.next=10;break}return i={name:n.selection},e.next=8,vt(i);case 8:r=e.sent,n.selectionText=r;case 10:e.next=13;break;case 12:n.selectionText="";case 13:n.selection&&"object"===typeof n.selection&&(n.selection=n.selection.name),u(f,Object(C.a)({},n));case 15:case"end":return e.stop()}}),e)})))).apply(this,arguments)}i.a.useEffect((function(){U(Object(C.a)(Object(C.a)({},k||{}),{},{type:L})),Q(z&&z.current&&z.current.offsetWidth)}),[k,L]),I=L;var Z={};f&&j&&(Z=j[f]||{});var ee=Object.values(m||{}).find((function(e){return e.items&&-1!==e.items.indexOf(f)}));return"panel-tabs"===(null===(t=k)||void 0===t?void 0:t.type)&&"customField"===p||(null===(a=D)||void 0===a?void 0:a.dependModelType)&&"true"==="".concat(null===(r=k)||void 0===r?void 0:r.tab)&&(null===(o=D)||void 0===o?void 0:o.dependModelType)!==g?null:i.a.createElement(c.a,{style:{padding:20}},I&&D&&!(s.modelType===F.h.CUSTOM&&D.type===F.j.tabs)&&Object.keys(D.value).map((function(e,t){return i.a.createElement(c.a,{key:t},i.a.createElement(O.a,{variant:"body1",className:J.panelTitle},function(e,t){return e.filter((function(e){return!e.dependModelType||e.dependModelType===t})).length>0}(D.value[e],g)&&Object(x.b)(e)),i.a.createElement(c.a,{style:{display:"flex",flexDirection:"column",width:"90%"}},i.a.createElement(Ct,{key:f,elements:D.value[e],propertyList:_,setPropertyList:U,labelWidth:K,inputLabel:z,type:I,onWidgetChange:u,id:f,onChange:G,modelType:g,enableAppBuilder:v,editWidgetType:p,metaFieldStore:y,errors:Z,entityType:w,actualType:T,parentPanel:ee,onTranslationRemove:d},i.a.createElement(Et,null))))})))}var Ft=i.a.memo((function(){return i.a.createElement("div",{style:{color:"#fff"}},i.a.createElement(Mt,null))})),Nt=Object(s.a)({root:{height:"100%",minWidth:317},tab:{minHeight:"fit-content",minWidth:"fit-content",textTransform:"none",color:"#fff",fontWeight:"bold",backgroundColor:"#2f4050",".modern-dark &":{color:"#fff",backgroundColor:"#1b1b1b"}},tabs:{backgroundColor:"#2f4050",".modern-dark &":{backgroundColor:"#1b1b1b"}},container:{backgroundColor:"#293846",height:"calc(100% - 70px)",overflow:"auto",scrollbarWidth:"thin",".modern-dark &":{backgroundColor:"#1b1b1b"}},activeTab:{backgroundColor:"#293846",".modern-dark &":{backgroundColor:"#323232"}}}),It=[{label:"Properties",icon:i.a.createElement(g.a,null),view:i.a.createElement(Ft,null)},{label:"Fields",icon:i.a.createElement(v.a,null),view:i.a.createElement(L,null)}],Lt=i.a.memo((function(e){var t=e.children,a=Nt();return i.a.createElement(c.a,{className:a.container},i.a.createElement(c.a,{style:{color:"#000",height:"100%"}},t))})),Wt=i.a.memo((function(){var e=Nt(),t=Object(M.b)(),a=t.state,n=t.update,r=a.tabIndex,o=a.editWidget;return i.a.createElement(f.a,{square:!0,className:e.root},i.a.createElement(p.a,{value:r,onChange:function(e,t){(0!==t||o)&&n((function(e){e.tabIndex=t}))},variant:"fullWidth",className:e.tabs,TabIndicatorProps:{style:{display:"none"}}},It.map((function(t,a){return i.a.createElement(b.a,{key:a,className:h()(e.tab,Object(m.a)({},e.activeTab,r===a)),icon:t.icon,label:t.label,style:{color:1!==a||o?"#fff":"#a6a6a6"}})}))),It.map((function(e,t){return r===t&&i.a.createElement(Lt,{key:t},e.view)})))})),At=a(293),Vt=(a(86),a(57),a(94),a(85)),Bt=Object(s.a)({container:{display:"flex",flexDirection:"column",height:"fit-content"},loaderContainer:{display:"flex",justifyContent:"center",paddingTop:"20% !important",height:"100%",position:"absolute",zIndex:1e3,border:"0px",backgroundColor:"rgba(0,0,0,0.05)"}});var qt=function(e){var t=e.design,a=Object(M.b)(),n=Bt(),r=a.state,o=r.widgets,l=r.customFieldWidgets,c=r.loader,s=r.errorList,u=r.modelField,d=r.modelType;return i.a.createElement(i.a.Fragment,null,c&&i.a.createElement("div",{className:h()(n.loaderContainer)},i.a.createElement(At.a,null)),i.a.createElement("div",{className:h()(n.container)},o&&i.a.createElement(E.default,Object.assign({index:0,id:F.f.form,attrs:a.state.widgets[F.f.form],onSelect:a.onSelect},{items:a.state.items,dragWidget:a.state.dragWidget,hoverWidget:a.state.hoverWidget,editWidget:a.state.editWidget,widgets:a.state.widgets,onSelect:a.onSelect,onMove:a.onMove,onDrag:a.onDrag,onHover:a.onHover,onWidgetChange:a.onWidgetChange,setHoverAttr:a.setHoverAttr,canRemove:d!==F.h.BASE,errorList:s},{design:t,component:Vt.a})),l&&i.a.createElement(i.a.Fragment,null,i.a.createElement("div",{className:"custom-field-view-header"},(null===u||void 0===u?void 0:u.name)||"attrs"),i.a.createElement(E.default,Object.assign({_type:"customField",index:0,id:F.f.customForm,attrs:a.state.customFieldWidgets[F.f.customForm],onSelect:a.onSelect},{items:a.state.customFieldItems,dragWidget:a.state.dragWidget,hoverWidget:a.state.hoverWidget,editWidget:a.state.editWidget,widgets:a.state.customFieldWidgets,onSelect:a.onSelect,onMove:a.onMove,onDrag:a.onDrag,onHover:a.onHover,onWidgetChange:a.onWidgetChange,setHoverAttr:a.setHoverAttr,errorList:s},{design:t,component:Vt.a})))))},Pt=i.a.memo((function(){var e=i.a.useState(!0),t=Object(q.a)(e,1)[0];return i.a.createElement("div",{className:h()("form-layout-container",{"form-layout-design":t}),style:{display:"flex",width:"100%",height:"100%",justifyContent:"center",overflow:"auto",position:"relative"}},i.a.createElement(qt,{design:t}))})),_t=a(41),Ut=a.n(_t),Dt=a(294),Rt=a(295),Jt=a(296),zt=a(297),Xt=a(298),Yt=a(299),Ht=Object(s.a)({autoComplete:{"& > div > label":{color:"#e7eaec !important",fontSize:14}},autoCompleteRoot:{width:200,marginLeft:10,color:"#e7eaec"},ddinput:{color:"#e7eaec",fontSize:14},inputView:{color:"#fff","& > *":{color:"#fff"}}});var Kt=i.a.memo((function(e){var t=e.value,a=e.label,r=e.model,o=e.searchFilter,c=e.onChange,s=e.options,u=e.filterData,d=e.limit,m=void 0===d?10:d,f=e.onSearch,p=e.modelType,b=Object(B.a)(e,["value","label","model","searchFilter","onChange","options","filterData","limit","onSearch","modelType"]),g=Ht(),v=Object(n.useState)(""),y=Object(q.a)(v,2),h=y[0],O=y[1],j=Object(n.useState)(!1),w=Object(q.a)(j,2),x=w[0],T=w[1],k=Object(n.useState)(Object(l.a)(s||[])),S=Object(q.a)(k,2),E=S[0],M=S[1],F=Object(n.useState)(!1),N=Object(q.a)(F,2),I=N[0],L=N[1],W=Object(n.useState)(0),_=Object(q.a)(W,2),U=_[0],D=_[1],R=Object(n.useState)(0),J=Object(q.a)(R,2),z=J[0],X=J[1],Y=i.a.useCallback(Object(V.a)(A.a.mark((function e(){var t,a,n,i,c,s,d,b,g,v=arguments;return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=v.length>0&&void 0!==v[0]?v[0]:"",!f){e.next=14;break}return T(!0),e.next=5,f({limit:m,searchText:t,searchFilter:o,filterData:u,modelType:p,offset:U});case 5:a=e.sent,n=a.models,i=a.total,!I&&i>m&&n.push({name:"Show more...",id:"studio_show_More_View"}),M(Object(l.a)(n)),T(!1),X(i),e.next=22;break;case 14:c=new G.a({model:r}),T(!0),s=o(t)||{},d=[],t&&d.push({fieldName:"name",operator:"like",value:t}),b=Object(C.a)(Object(C.a)(Object(C.a)({},s._domain&&{_domain:s._domain}),s._domainContext&&{_domainContext:s._domainContext}),{},{criteria:[].concat(d,Object(l.a)(s.criteria||[])),operator:"and"}),g=s.fields||[],c.search({fields:g,data:b,limit:m,offset:U}).then((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.data,a=void 0===t?[]:t,n=e.total;T(!1);var i=u?u(Object(l.a)(a)):Object(l.a)(a);!I&&n>m&&i.push({name:"Show more...",id:"studio_show_More_View"}),X(n),M(i)}));case 22:case"end":return e.stop()}}),e)}))),[o,r,u,I,m,f,p,U]),H=i.a.useCallback((function(){var e=U+m;e<=z&&D(e)}),[m,z,U]),K=i.a.useCallback((function(){D((function(e){var t=e-m;return t>0?t:0}))}),[m]),Z=i.a.useCallback((function(){!s&&Y(h)}),[h,Y,s]),ee=i.a.useCallback((function(e,t){"studio_show_More_View"===(null===t||void 0===t?void 0:t.id)?L(!0):c(t)}),[c]),te=i.a.useCallback((function(e){O(e),D(0)}),[]),ae=i.a.useCallback((function(){L(!1),D(0)}),[]);return $(Z,500),Object(n.useEffect)((function(){!s&&Y()}),[Y,s,r]),Object(n.useEffect)((function(){t||O("")}),[t]),i.a.createElement(i.a.Fragment,null,i.a.createElement(Q.a,Object.assign({clearOnEscape:!0,autoComplete:!0,classes:{root:g.autoCompleteRoot,inputFocused:g.input,clearIndicator:g.input,popupIndicator:g.input,input:g.inputView,endAdornment:g.inputView},className:g.autoComplete,onInputChange:function(e,t){return O(t)},renderInput:function(e){return e.inputProps.value=h,i.a.createElement(P.a,Object.assign({},e,{label:a,fullWidth:!0}))},options:Object(l.a)(E),loading:x,getOptionLabel:function(e){return"string"===typeof e?e:b.getOptionLabel?b.getOptionLabel(e):e.name},onChange:ee,filterOptions:function(e){return e},value:t||null,getOptionSelected:function(e,t){return e.name===t.name}},b)),i.a.createElement(be,{searchText:h,list:E,model:r,total:z,offset:U,open:I,onNext:H,onPrevious:K,handleClose:ae,setSearchText:te,onChange:c,title:a,getOptionLabel:b.getOptionLabel}))}));function Qt(e){return Gt.apply(this,arguments)}function Gt(){return(Gt=Object(V.a)(A.a.mark((function e(t){var a,n,i,r,o,c,s,u,d,m,f,p,b;return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.searchFilter,n=t.limit,i=t.searchText,r=t.modelType,o=t.offset,c=a(i)||{},s=[],i&&s.push({fieldName:"name",operator:"like",value:i}),u=Object(C.a)(Object(C.a)(Object(C.a)({},c._domain&&{_domain:c._domain}),c._domainContext&&{_domainContext:c._domainContext}),{},{criteria:[].concat(s,Object(l.a)(c.criteria||[])),operator:"and"}),d=c.fields||[],m=r===F.h.CUSTOM?Me:Ae,e.next=9,m.search({fields:d,data:u,limit:n,offset:o});case 9:return f=e.sent,p=[],f.data&&Array.isArray(f.data)&&(b=f.data.map((function(e){var t=p.findIndex((function(t){return t.name===e.name&&t.packageName===e.packageName}));if(-1===t||r===F.h.BASE)return r===F.h.BASE&&-1!==t&&p.splice(t,1),Object(C.a)(Object(C.a)({},e),{},{entityType:F.c.META});p.splice(t,1,Object(C.a)(Object(C.a)({},p[t]),{},{actualType:F.c.META}))})).filter((function(e){return e})),p.push.apply(p,Object(l.a)(b))),e.abrupt("return",{models:p,total:f.total});case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var $t=a(33),Zt=new G.a({model:"com.axelor.meta.db.MetaView"}),ea=Object(s.a)({container:{display:"flex"},autoComplete:{"& > div > label":{color:"#e7eaec !important",fontSize:14}},autoCompleteRoot:{width:200,marginLeft:10,color:"#e7eaec"},input:{color:"#e7eaec",fontSize:14}}),ta=[{name:"View",value:F.h.BASE},{name:"Custom",value:F.h.CUSTOM}];var aa=i.a.memo((function(e){var t=e.model,a=e.update,n=e.modelType,r=e.modelField,o=e.startLoader,s=e.entityModel,u=e.entityType,d=e.metaFieldStore,m=e.clearHistory,f=Object(B.a)(e,["model","update","modelType","modelField","startLoader","entityModel","entityType","metaFieldStore","clearHistory"]),p=ea(),b="com.axelor.meta.db.".concat(n!==F.h.CUSTOM?"MetaModel":"MetaJsonModel"),g=i.a.useCallback((function(e,t){var n=new G.a({model:"com.axelor.meta.db.MetaJsonField"}),i=[];if(e.length){i.push({fieldName:"id",operator:"in",value:e});var r={criteria:i};n.search({data:r,sortBy:["sequence"]}).then((function(e){if(e.data){var n=e.data||[],i=Object(x.f)(n,t);a((function(e){e.widgets=Object(C.a)({},i.widgets),e.items=i.items,e.loader=!1}))}else a((function(e){e.loader=!1}))}))}else a((function(e){e.widgets={"-1":Object(C.a)({type:"form"},t),0:{type:"dump_field",name:""}},e.items=[],e.loader=!1}))}),[a]),v=i.a.useCallback(function(){var e=Object(V.a)(A.a.mark((function e(t){var i,r;return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o(),t){e.next=4;break}return a((function(e){m(e),e.items=[],e.widgets=null,e.initialItems=null,e.entityModel=null,e.loader=!1,e.model=null,e.errorList=[],e.attrsList=[],e.translationList=[],e.initialTranslationList=[],e.removedTranslationList=[]})),e.abrupt("return");case 4:return e.next=6,tt(t);case 6:i=e.sent,r=i.map((function(e){return JSON.parse(JSON.stringify(Object(C.a)(Object(C.a)(Object(C.a)({},e),{},{type:F.n[e.relationship]||(e.typeName||"").toLowerCase()},e.relationship&&{targetModel:"".concat(e.packageName,".").concat(e.typeName)}),{},{packageName:void 0})))})),He(t).then((function(e){var i=x.e.generateEntityModelSchema(e.entityXml,e),o=x.e.getEntityModelFields(e.entityXml);a((function(e){m(e),e.model=t,e.entityType=t.entityType,e.actualType=t.actualType,e.entityModel=t,e.errorList=[],e.attrsList=[],e.translationList=[],e.initialTranslationList=[],e.removedTranslationList=[],n===F.h.ENTITY&&(e.widgets=i.widgets,e.items=i.items,e.metaFieldStore=Object(l.a)(r),e.metaFields=r.filter((function(e){return-1===o.findIndex((function(t){return t.name===e.name}))}))),n===F.h.BASE&&(e.metaFieldStore=[].concat(Object(l.a)(o),Object(l.a)(r)),e.metaFields=[].concat(Object(l.a)(o),Object(l.a)(r))),e.loader=!1}))}));case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[a,o,n,m]),y=i.a.useCallback(function(){var e=Object(V.a)(A.a.mark((function e(t){var i,r,o;return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=new G.a({model:b}),t){e.next=4;break}return a((function(e){m(e),e.model=null,e.items=[],e.exView=null,e.view=null,e.widgets=null,e.initialItems=null,e.initialWidgets=null,e.customFieldWidgets=null,e.customFieldItems=null,e.customFields=[],e.modelField=null,e.extensionXML=null,e.extensionView=null,e.originalXML=null,e.selectedView=null,e.metaFields=[],e.metaFieldStore=[],e.extensionMoves=[],e.errorList=[],e.attrsList=[],e.translationList=[],e.initialTranslationList=[],e.removedTranslationList=[]})),e.abrupt("return");case 4:return r={fields:["metaFields","packageName","name","fullName"],related:{metaFields:["typeName","label","mappedBy","relationship","name","packageName"]}},n===F.h.CUSTOM&&(a((function(e){e.loader=!0})),r={related:{menuBuilder:["title","parentMenu"]}}),e.next=8,Ge(t);case 8:o=e.sent,t.entityType===F.c.ENTITY?v(t):i.fetch(t.id,r).then((function(e){if(e.data){var i=e.data[0],r=i.fields,c=void 0===r?[]:r,s=Object(B.a)(i,["fields"]);a((function(e){m(e),e.model=t,e.entityType=t.entityType,e.widgets=null,e.initialWidgets=null,e.items=[],e.initialItems=null,e.view=null,e.exView=null,e.modelField=null,e.customFields=[],e.customFieldWidgets=null,e.originalXML=null,e.extensionXML=null,e.extensionView=null,e.entityFields=o,e.extensionMoves=[],e.errorList=[],e.attrsList=[],e.translationList=[],e.initialTranslationList=[],e.removedTranslationList=[],e.selectedView=null,e.editWidget=-1,e.editWidgetType=null,e.tabIndex=0;var a=(i.metaFields||[]).map((function(e){return JSON.parse(JSON.stringify(Object(C.a)(Object(C.a)(Object(C.a)({},e),{},{type:F.n[e.relationship]||(e.typeName||"").toLowerCase()},e.relationship&&{targetModel:"".concat(e.packageName,".").concat(e.typeName)}),{},{packageName:void 0})))}));if(n===F.h.BASE)e.metaFieldStore=[].concat(Object(l.a)(a),Object(l.a)(o)),e.metaFields=[].concat(Object(l.a)(a),Object(l.a)(o));else if(n===F.h.ENTITY){var r={name:i.name,packageName:i.packageName,model:"".concat(i.packageName,".").concat(i.name)},u=Object(x.f)([],r);e.widgets=Object(C.a)({},u.widgets),e.items=u.items,e.loader=!1,e.entityModel=null,t.entityType===F.c.META&&(e.metaFieldStore=Object(l.a)(a),e.metaFields=Object(l.a)(a))}else g(c.map((function(e){return e.id})),s),e.customModel=i}))}}));case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[a,b,n,g,v,m]),h=i.a.useCallback(function(){var e=Object(V.a)(A.a.mark((function e(n){var i,r,c,s,u,f,p,b,g,v;return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o(),n){e.next=4;break}return a((function(e){m(e),e.items=[],e.exView=null,e.view=null,e.widgets=null,e.initialItems=null,e.initialWidgets=null,e.customFieldWidgets=null,e.customFieldItems=null,e.customFields=[],e.modelField=null,e.extensionXML=null,e.extensionView=null,e.originalXML=null,e.loader=!1,e.metaFields=e.metaFieldStore,e.selectedView=null,e.extensionMoves=[],e.errorList=[],e.attrsList=[],e.translationList=[],e.initialTranslationList=[],e.removedTranslationList=[]})),e.abrupt("return");case 4:return e.next=6,Ze(n);case 6:return i=e.sent,e.next=9,nt({model:t.name,view:n.name});case 9:return r=e.sent,c=x.e.generateXMLToViewSchema({view:i.view,fields:d,extensionXML:i.extensionXML,attrsList:r}),s=Object.values(c.widgets).filter((function(e){return e.title&&e.title.startsWith("studio:")})).map((function(e){return e.title})),e.next=14,ut(s);case 14:return u=e.sent,f={operator:"and",criteria:[{operator:"or",criteria:[{fieldName:"computed",operator:"=",value:!1},{fieldName:"computed",operator:"isNull"}]},{operator:"or",criteria:[{fieldName:"extension",operator:"=",value:!1},{fieldName:"extension",operator:"isNull"}]},{fieldName:"name",operator:"=",value:"".concat(n.name)}]},Zt.search({data:f}).then((function(e){var t=e.data,n=void 0===t?[]:t;n[0]&&a((function(e){e.originalXML=JSON.parse(Ut.a.xml2json(n[0].xml,{compact:!1,fullTagEmptyElement:!1}))}))})),p={_domain:"self.xmlId = 'studio-".concat(n.name,"' and self.extension = true")},e.next=20,Zt.search({data:p});case 20:b=e.sent,g=b.data,(v=(void 0===g?[]:g)[0])&&a((function(e){e.extensionView=v,e.extensionXML=JSON.parse(Ut.a.xml2json(v.xml,{compact:!1,fullTagEmptyElement:!1}))})),a((function(e){m(e),e.attrsList=r,e.translationList=u,e.initialTranslationList=u,e.removedTranslationList=[],c&&(e.widgets=c.widgets,e.initialWidgets=c.widgets,e.items=c.items,e.initialItems=c.items,e.metaFields=Object(l.a)(e.metaFieldStore).filter((function(e){return-1===c.fieldList.findIndex((function(t){return t.name===e.name}))}))),e.selectedView=n,i.view&&(e.view={fields:e.metaFields,view:i.view},e.exView=i.view),e.customFields=[],e.customFieldWidgets=null,e.customFieldItems=null,e.modelField=null,e.loader=!1,e.extensionMoves=[],e.errorList=[],Object($t.b)(e)}));case 25:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[a,o,d,m,b]),O=i.a.useCallback((function(){var e="self.type='form'",a="".concat(t?t.fullName:"");return u===F.c.ENTITY&&(a="".concat(s?x.e.getEntityModel(s):"")),{_domain:e="".concat(e," and self.model='").concat(a,"' and (self.computed = true OR self.name NOT IN (select meta.name from MetaView meta where meta.computed = true))"),fields:["name","model","title","type","extension","xmlId","computed","xml"]}}),[t,s,u]),j=i.a.useCallback((function(){return{fields:["name","fullName","packageName"]}}),[]),w=i.a.useCallback((function(){return{_domain:"self.json = true and self.metaModel.id='".concat(t?t.id:-1,"'"),fields:["name"]}}),[t]),T=i.a.useCallback((function(e){e?_e(e,t).then((function(t){var n=t.data,i=void 0===n?[]:n,r=Object(x.f)(i,void 0,"","customForm");a((function(t){t.customFieldWidgets=r.widgets,t.customFieldItems=r.items,t.customFields=i,t.modelField=e}))})):a((function(t){t.customFieldWidgets=null,t.customFieldItems=null,t.customFields=[],t.modelField=e}))}),[t,a]),k=i.a.useCallback((function(e){e.value===F.h.CUSTOM&&function(){return Re.apply(this,arguments)}().then((function(e){a((function(t){t.enableAppBuilder=e}))})),a((function(t){m(t),t.modelType=e?e.value:null,t.entityType=null,t.model=null,t.widgets=null,t.initialWidgets=null,t.items=[],t.initialItems=null,t.view=null,t.exView=null,t.metaFields=[],t.modelField=null,t.customFields=[],t.customFieldWidgets=null,t.entityModel=null,t.metaFields=[],t.metaFieldStore=[],t.selectedView=null,t.extensionMoves=[],t.errorList=[],t.attrsList=[],t.translationList=[],t.initialTranslationList=[],t.removedTranslationList=[]}))}),[a,m]),S=i.a.useCallback((function(e){return e.filter((function(t){if(!t.computed&&-1!==e.findIndex((function(e){return e.name===t.name&&e.computed})))return!1;return!0!==t.extension}))}),[]);return i.a.createElement(c.a,{className:p.container},i.a.createElement(Kt,{options:ta,value:ta.find((function(e){return e.value===n})),filterSelectedOptions:!0,label:"Type",onChange:k,disableClearable:!0}),i.a.createElement(Kt,{onChange:y,label:"Model",model:b,searchFilter:j,value:t,onSearch:Qt,modelType:n}),n===F.h.BASE&&i.a.createElement(i.a.Fragment,null,i.a.createElement(Kt,{onChange:h,label:"View",model:"com.axelor.meta.db.MetaView",searchFilter:O,getOptionLabel:function(e){return!0===e.extension?"".concat(e.name," (Extension)"):!0===e.computed?"".concat(e.name," (Computed)"):e.name},value:f.selectedView,filterData:S}),i.a.createElement(Kt,{label:"Custom Fields",model:"com.axelor.meta.db.MetaField",searchFilter:w,onChange:T,value:r})))})),na=Object(s.a)({toolbarContainer:{width:"100%",height:"100%",backgroundColor:"rgb(41, 56, 70)",paddingLeft:15,".modern-dark &":{backgroundColor:"#1b1b1b"}},toolItemView:{color:"#fff"},crudIcon:{height:"1em",width:"1em",cursor:"pointer"},selectionContainer:{flex:1}});var ia=i.a.memo((function(e){var t,a=e.update,n=e.saveView,r=e.modelType,o=e.saveCustomFieldView,l=e.removeView,s=e.model,u=e.onNew,d=Object(B.a)(e,["update","saveView","modelType","saveCustomFieldView","removeView","model","onNew"]),m=na(),f=i.a.useCallback((function(){n(),r===F.h.BASE&&o()}),[n,o,r]),p=!(d.extensionView||(t=d.selectedView,t&&t.xmlId&&0===t.xmlId.indexOf("studio-"))||r===F.h.CUSTOM&&Boolean(d.customModel)||r===F.h.ENTITY&&Boolean(d.entityModel)&&Boolean(d.entityModel.id)),b=r===F.h.BASE&&!s&&!d.entityModel,g=Object.keys(d.errorList).length>0;return i.a.createElement(c.a,{container:!0,className:m.toolbarContainer},i.a.createElement(_.a,{className:m.toolItemView,onClick:d.onSidePanelToggle},i.a.createElement(Dt.a,{className:m.crudIcon})),r!==F.h.BASE&&i.a.createElement(_.a,{className:m.toolItemView,onClick:u,disabled:b},i.a.createElement(Rt.a,{className:m.crudIcon})),i.a.createElement(_.a,{className:m.toolItemView,onClick:f,disabled:g},i.a.createElement(Jt.a,{className:m.crudIcon})),i.a.createElement(_.a,{className:m.toolItemView,onClick:l,disabled:p},i.a.createElement(zt.a,{className:m.crudIcon})),i.a.createElement(c.a,{item:!0,className:m.selectionContainer},i.a.createElement(aa,Object.assign({model:s,update:a,modelType:r},d))),i.a.createElement(c.a,null,i.a.createElement(_.a,{className:m.toolItemView,onClick:function(){return d.undo()},disabled:d.pastLength<=0},i.a.createElement(Xt.a,{className:m.crudIcon})),i.a.createElement(_.a,{className:m.toolItemView,onClick:function(){return d.redo()},disabled:d.futureLength<=0},i.a.createElement(Yt.a,{className:m.crudIcon}))))})),ra=a(75),oa=a(62);function la(e){return e.split("[").length-1>1}var ca=function(e,t){if(e){var a=e.attributes,n=x.e.exploreTarget(e.target),i=Object.values(t).find((function(e){var t=x.e.exploreTarget(e.xPath);return t.self||n.self?t.self===n.self:!(!t.parent&&!n.parent)&&t.parent===n.parent})),r=x.e.dashToCamelCase(a.name);if(i){var o=i[r],l=i[a.maskName];if(void 0===l&&(l=""),void 0===o&&(o=!1),a.maskName!==a.name){if("".concat(l)==="".concat(a.value))return!0}else{if("".concat(o)==="".concat(a.value))return!0;if(["",void 0,null].includes(i[r])&&["",void 0,null].includes(a.value))return!0;if(a.maskName!==a.name&&["",void 0,null].includes(i[a.maskName])&&["",void 0,null].includes(a.value))return!0}}}return!1};function sa(e,t){var a=[],n=[],i=e.attrsList,r=void 0===i?[]:i,o=e.extensionMoves.filter((function(e){return"attribute"===e.name})),l=e.selectedView,c=e.model,s=new Map,u=function(e){var t=e.widgets,a=e.items;return Object.keys(t).forEach((function(e){var n=Object($t.a)(t,a,e);t[e].xPath=n})),t}(x.e.generateXMLToViewSchema({view:e.view.view,fields:e.metaFieldStore,attrsList:e.attrsList}));return o.forEach((function(e){var t=function(e){return F.k[e]}(e.attributes.name)||e.attributes.name,a=e.attributes.value,n=Object.assign({},Object(C.a)(Object(C.a)({},e),{},{attributes:Object(C.a)(Object(C.a)({},e.attributes),{},{name:t,value:a,maskName:e.attributes.name})}));s.set(t,n)})),s.forEach((function(e){var i=e,o=x.e.exploreTarget(i.target),s=i.attributes,d=function(e){var t=e.self,a=e.parent,n="",i=t||a;if(i){var r=i.indexOf("@name='")+"@name='".length,o=i.indexOf("']");n=i.substring(r,o)}return n}(o),m=r.findIndex((function(e){return d.includes(e.field)&&(e.name===s.name||F.k[e.name]===s.name)})),f=r[m],p=ca(i,t),b=ca(i,u),g=a.findIndex((function(e){return o.self&&o.self.includes(e.field)&&e.name===s.name})),v=F.a[s.name];p||b?-1!==g?a.splice(g,1):f&&f.id&&n.push({id:f.id,version:f.version}):f?[null,void 0].includes(s.value)?v?v===s.value&&n.push({id:f.id,version:f.version}):n.push({id:f.id,version:f.version}):f.value!==s.value&&(v?v===s.value&&n.push({id:f.id,version:f.version}):-1===g?a.push(Object(C.a)(Object(C.a)({},f),{},{name:s.name,value:s.value,maskName:s.maskName})):(a[g].value=s.value,a[g].maskName=s.maskName)):d&&(-1===g?a.push({view:l.name,model:c.fullName,name:s.name,maskName:s.maskName,value:s.value,field:d}):(a[g].value=s.value,a[g].maskName=s.maskName))})),{changedAttrsList:a,removedAttrsList:n}}function ua(e,t){var a=[],n=e.extensionMoves.filter((function(e){return"attribute"!==e.name})),i=Object(l.a)(n),r=function(e){if(-1===a.findIndex((function(t){return t.target===e.target&&t.name===e.attributes.name}))){var n=i.map((function(t,a){if(t.target===e.target&&t.attributes&&e.attributes.name===t.attributes.name)return a})).filter((function(e){return void 0!==e})),r=n[n.length-1];a.push({target:e.target,name:e.attributes.name});(function(e){if(e){var a=e.attributes,n=x.e.exploreTarget(e.target),i=Object.values(t).find((function(e){var t=x.e.exploreTarget(e.xPath);return!(!t.self||!n.self)&&t.self===n.self})),r=x.e.dashToCamelCase(a.name);if(i&&(i[r]===a.value||["",void 0,null].includes(i[r])&&["",void 0,null].includes(a.value)))return!0}})(i[r]);i=i.filter((function(t,a){return t.target!==e.target||!e.attributes||!t.attributes||e.attributes.name!==t.attributes.name||r===a}))}};return n.forEach((function(e,t){if(e.target){var a=x.e.exploreTarget(e.target),n=!0;a.self&&la(a.self)&&(n=!1),a.parent&&la(a.parent)&&(n=!1),"attribute"===e.name&&n&&r(e),"replace"===e.name&&n&&((null===a||void 0===a?void 0:a.self)&&a.self.includes("panel")||!(null===a||void 0===a?void 0:a.self)&&(null===a||void 0===a?void 0:a.parent.includes("panel"))||function(e){var t=!1,a=x.e.exploreTarget(e.target),n=i.findIndex((function(e){return"insert"===e.name&&(e.elements&&e.elements[0]&&a.self?a.self.includes("'".concat(e.elements[0].name,"'")):a.parent&&a.parent.includes(e.elements[0].name))})),r=i.filter((function(e){if(e.target){var t=x.e.exploreTarget(e.target);return["insert","move"].includes(e.name)&&t.self&&t.self.includes(a.self)}return!1}));if(-1===n||r.length||(t=!0,i.splice(n,1),Object(l.a)(i).forEach((function(t){if("move"===t.name&&t.source&&t.source===e.target){var a=i.findIndex((function(t){return"move"===t.name&&t.source&&t.source===e.target}));-1!==a&&i.splice(a,1)}}))),i=i.filter((function(t){return"attribute"!==t.name||t.target!==e.target})),t){var o=i.findIndex((function(t){return"replace"===t.name&&t.target===e.target}));-1!==o&&i.splice(o,1)}}(e))}})),i}var da=new G.a({model:"com.axelor.meta.db.MetaView"}),ma=new G.a({model:"com.axelor.meta.db.MetaJsonField"}),fa=new G.a({model:"com.axelor.newstudio.db.EntityModel"}),pa=function(e){var t=e.widgets,a=e.items;return Object.keys(t).forEach((function(e){var n=Object($t.a)(t,a,e);t[e].xPath=n})),t},ba=function(e,t,a){var n=[];return{changedTranslationList:e.filter((function(e){if(-1!==a.indexOf(e.key))return e.id&&n.push({id:e.id,version:e.version}),!1;if(e.id){var i=t.find((function(t){return t.language===e.language&&t.key===e.key}));return!(!i||i.message===e.message)}return!0})),deletedTranslationList:n}};var ga=i.a.memo((function(e){var t=Object(M.b)(),a=t.state,n=t.update,r=t.startLoader,o=t.undo,c=t.redo,s=t.clearHistory,u=i.a.useState(!1),d=Object(q.a)(u,2),m=d[0],f=d[1],p=i.a.useCallback((function(){n((function(e){e.loader=!1}))}),[n]),b=i.a.useCallback((function(e){r();var t,i=function(e){n((function(t){s(t),t.customModel=null,t.dialog=e,t.widgets=null,t.initialItems=null,t.initialWidgets=null,t.items=[],t.view=null,t.metaFields=[],t.selectedView=null,t.originalXML=null,t.extensionXML=null,t.selectedView=null,t.loader=!1,t.extensionView=null,t.errorList=[],t.modelType===F.h.CUSTOM&&(t.model=null),t.modelType===F.h.ENTITY&&(t.entityModel=null,t.model=null)}))};if(a.modelType===F.h.CUSTOM){if(a.model||a.customModel){(t=a.model||a.customModel,Me.removeAll([t])).then((function(e){i(null)}))}}else if(a.modelType===F.h.ENTITY){if(a.entityModel&&a.entityModel.id){(function(e){return Qe.apply(this,arguments)})(a.entityModel).then((function(e){i(null)}))}}else{var o;a.extensionView?o={id:a.extensionView.id,version:a.extensionView.version}:a.selectedView&&a.selectedView.xmlId&&0===a.selectedView.xmlId.indexOf("studio-")&&(o={id:a.selectedView.id,version:a.selectedView.version}),o&&da.removeAll([o]).then((function(e){i(null)}))}}),[n,a,r,s]),g=i.a.useCallback(Object(V.a)(A.a.mark((function e(){var t,i,o,c,s,u,d,m,f,p,g,v,y,h,O,j,w,T,k,S,E,M,N,I,L,W,q,P,_,U,D,R,J,z,X,Y,H,K,Q,G,$,Z,ee,te,ae,ne,ie,re,oe,le,ce,se;return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a.widgets){e.next=2;break}return e.abrupt("return");case 2:if(r(),a.modelType!==F.h.CUSTOM){e.next=26;break}if(t=x.e.getCustomModelFields(a.items,a.widgets,null,!0),i=t.fields,(o=a.widgets[-1]).name&&o.title){e.next=10;break}return c={message:"Please enter form name and title",type:"alert"},n((function(e){e.loader=!1,e.dialog=c})),e.abrupt("return");case 10:if(s=Object(C.a)(Object(C.a)(Object(C.a)({},a.customModel),x.e.getFormProperties(o)),{},{fields:i},a.customModel&&{version:a.customModel.version}),!0===o.isGenerateMenu&&(s.menuBuilder=Object(C.a)(Object(C.a)({},(a.customModel||{}).menuBuilder),{},{title:o.menuBuilderTitle,parentMenu:o.menuBuilderParent})),u=a.customModel||{},d=u.isGenerateMenu,o.isGenerateMenu===d){e.next=23;break}return e.next=16,Je(s);case 16:if(m=e.sent,f=m.data,!(p=void 0===f?[]:f)[0]||!p[0].reload){e.next=23;break}return e.next=21,Xe(s.id);case 21:g=e.sent,s=Object(C.a)(Object(C.a)({},s),{},{menuBuilder:null,version:g.version});case 23:Ue(s).then((function(e){var t=e.data[0],a=t.fields,i=void 0===a?[]:a,r=Object(B.a)(t,["fields"]);r.menuBuilder&&(r.menuBuilder=Object(C.a)(Object(C.a)({},s.menuBuilder),r.menuBuilder)),De(i.map((function(e){return e.id})),n,r);n((function(e){e.customModel=t,e.loader=!1}))})),e.next=118;break;case 26:if(a.modelType!==F.h.ENTITY){e.next=40;break}if((v=a.widgets[-1]).name){e.next=32;break}return y={message:"Please enter entity name",type:"alert"},n((function(e){e.loader=!1,e.dialog=y})),e.abrupt("return");case 32:h=Object(ra.a)(a.widgets,a.items,a.modelType),O=Object(C.a)(Object(C.a)({},v),{},{model:"".concat(v.packageName,".").concat(v.name)}),j={elements:[{name:"entity",type:"element",attributes:Object(C.a)({},x.e.getFormProperties(O,["extension","metaFields","id","$attachments","packageName","model"])),elements:Object(l.a)(h)}]},w=x.e.processXML(Ut.a.json2xml(j,{compact:!1,fullTagEmptyElement:!1})),T=Object(C.a)(Object(C.a)({},a.entityModel?a.entityModel:{}),{},{entityXml:w,name:v.name,packageName:v.packageName}),fa.save(T).then((function(e){var t=e.data[0];if(-1===e.status){var a={message:e.data.string,type:"alert"};n((function(e){e.loader=!1,e.dialog=a}))}else if(t){n((function(e){e.entityModel=t,e.loader=!1}))}})),e.next=118;break;case 40:if(!a.widgets){e.next=118;break}if(k=["viewId","modelId","version","helpOverride","menubar","xml","computed","xmlId","type","cols","colSpan","serverType"],a.exView&&!x.e.isCreatedFromStudio(a.exView)){e.next=64;break}if((E=a.widgets[-1]).name&&E.title){e.next=48;break}return M={message:"Please enter form name and title",type:"alert"},n((function(e){e.loader=!1,e.dialog=M})),e.abrupt("return");case 48:return e.next=50,da.search({data:{_domain:"self.name = '".concat(E.name,"'")}});case 50:if(!((N=e.sent)&&N.total&&N.total>0)||(null===(S=a.exView)||void 0===S?void 0:S.id)){e.next=55;break}return I={message:"View name already exists",type:"alert"},n((function(e){e.loader=!1,e.dialog=I})),e.abrupt("return");case 55:L=Object(ra.a)(a.widgets,a.items,a.modelType),W=a.entityType===F.c.ENTITY?x.e.getEntityModel(a.entityModel):a.model.fullName,q={elements:[{name:"form",type:"element",attributes:Object(C.a)(Object(C.a)({model:W},x.e.getFormProperties(E,[].concat(k,["extension","id"]))),{},{id:a.exView&&a.exView.xmlId?a.exView.xmlId:"studio-".concat(E.name)}),elements:Object(l.a)(L)}]},P=x.e.processXML(Ut.a.json2xml(q,{compact:!1,fullTagEmptyElement:!1})),_={xml:P,extension:E.extension,type:"form",name:E.name,title:E.title,model:W,xmlId:"studio-".concat(E.name)},a.exView&&a.exView.id&&(_.id=a.exView.id,_.version=a.exView.version,_.xmlId=a.exView.xmlId||_.xmlId),da.save(_).then(function(){var e=Object(V.a)(A.a.mark((function e(t){var a,i,r,o;return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(-1!==t.status){e.next=6;break}a=t.data,i={title:a.title,message:a.string||a.message,type:"alert"},n((function(e){e.loader=!1,e.dialog=i})),e.next=11;break;case 6:if(!t.data||!t.data[0]){e.next=11;break}return e.next=9,da.fetch(t.data[0].id);case 9:(r=e.sent).data&&r.data[0]&&(o=r.data[0],{message:"View saved successfully",type:"alert"},n((function(e){var t=x.e.generateXMLToViewSchema({view:o,fields:e.metaFieldStore});e.widgets=t.widgets,e.initialWidgets=t.widgets,e.items=t.items,e.initialItems=t.items,e.metaView=o,e.exView=o,e.selectedView=Object(C.a)({},o),e.loader=!1})));case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),e.next=118;break;case 64:if(U=a.view.view,D=a.entityType===F.c.ENTITY?x.e.getEntityModel(a.entityModel):a.model.fullName,R=x.e.generateViewFromJson({view:a.originalXML,fields:a.metaFieldStore}),J=pa(R),z=ua(a,J),X=sa(a,J),Y=X.changedAttrsList,H=X.removedAttrsList,K=Object(oa.b)(z,a),Q=!1,G=[],!Y.length){e.next=79;break}return Q=!0,$=Object.values(F.k),Z=Y.map((function(e){return[].concat(Object(l.a)($),Object(l.a)(F.m)).includes(e.name)?e:Object(C.a)(Object(C.a)({},e),{},{value:'"'.concat(e.value,'"')})})),e.next=79,rt(Z);case 79:if(!H.length){e.next=83;break}return Q=!0,e.next=83,lt(H);case 83:if(!Q){e.next=87;break}return e.next=86,nt({model:a.model.fullName,view:a.selectedView.name});case 86:G=e.sent;case 87:if(ee=ba(a.translationList,a.initialTranslationList,a.removedTranslationList),te=ee.changedTranslationList,ae=ee.deletedTranslationList,ne=[],ie=!1,!te.length){e.next=94;break}return ie=!0,e.next=94,mt(te);case 94:if(!ae.length){e.next=98;break}return ie=!0,e.next=98,pt(ae);case 98:if(!ie){e.next=104;break}return re=Object.values(a.widgets).filter((function(e){return e.title&&e.title.startsWith("studio:")})).map((function(e){return e.title})),e.next=102,ut(re);case 102:ne=e.sent,n((function(e){e.translationList=ne,e.initialTranslationList=ne,e.removedTranslationList=[]}));case 104:if(K.length||a.extensionXML){e.next=107;break}return a.extensionView?b("Removed extension view due to no changes available"):({message:"View saved successfully",type:"alert"},n((function(e){e.loader=!1;var t=e.view;if(Q){var a=x.e.generateXMLToViewSchema({view:t.view,fields:e.metaFieldStore,extensionXML:t.extensionXML,attrsList:G});e.widgets=a.widgets,e.initialWidgets=a.widgets,e.items=a.items,e.initialItems=a.items,e.extensionMoves=[],e.attrsList=G,Object($t.b)(e)}}))),e.abrupt("return");case 107:if(oe=function(e){if(!e)return[];var t=e.elements;return t[0]&&t[0].elements?t[0].elements:void 0},le={elements:[{type:"element",name:a.widgets[-1].type,attributes:{model:D,id:"studio-".concat(U.name),title:a.widgets[-1].title,name:U.name,extension:"true"},elements:[].concat(Object(l.a)(oe(a.extensionXML)),Object(l.a)(K))}]},ce=x.e.processXML(Ut.a.json2xml(le,{compact:!1,fullTagEmptyElement:!1})),se={xml:ce,extension:!0,type:a.widgets[-1].type},se=a.extensionView?Object(C.a)(Object(C.a)({},se),{},{id:a.extensionView.id,version:a.extensionView.version}):Object(C.a)(Object(C.a)({},se),{},{model:D,name:U.name,title:U.title,xmlId:"studio-".concat(U.name)}),console.log(ce),!a.extensionView){e.next=117;break}if(a.extensionView.xml!==se.xml){e.next=117;break}return n((function(e){if(e.loader=!1,Q){n((function(e){e.loader=!1;var t=e.view,a=x.e.generateXMLToViewSchema({view:t.view,fields:e.metaFieldStore,extensionXML:t.extensionXML,attrsList:G});e.widgets=a.widgets,e.initialWidgets=a.widgets,e.items=a.items,e.initialItems=a.items,Q&&(e.attrsList=G),Object($t.b)(e)}))}})),e.abrupt("return");case 117:da.save(se).then(function(){var e=Object(V.a)(A.a.mark((function e(t){var i,r,o,l;return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(-1!==t.status){e.next=5;break}i={message:t.data.string,type:"alert"},n((function(e){e.loader=!1,e.dialog=i})),e.next=13;break;case 5:if(!t.data||!t.data[0]){e.next=13;break}return r=t.data[0],o=a.view.view,{message:"View saved successfully",type:"alert"},e.next=11,Ze(o);case 11:l=e.sent,n((function(e){e.entityType,F.c.ENTITY;var a=x.e.generateXMLToViewSchema({view:l.view,fields:e.metaFieldStore,extensionXML:l.extensionXML,attrsList:G});e.widgets=a.widgets,e.initialWidgets=a.widgets,e.items=a.items,e.initialItems=a.items,e.exView=t.data[0],e.extensionMoves=[],e.loader=!1,Q&&(e.attrsList=G),e.extensionView=Object(C.a)(Object(C.a)(Object(C.a)({},e.extensionView),r),{},{version:l.extensionXML.id===r.id?l.extensionXML.version:r.version}),Object($t.b)(e)}));case 13:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 118:case"end":return e.stop()}}),e)}))),[a,n,r,p,b]),v=i.a.useCallback((function(){n((function(e){e.dialog=null}))}),[n]),y=i.a.useCallback((function(){r(),n((function(e){s(e),e.items=[],e.customModel=null,e.exView=null,e.view=null,e.extensionXML=null,e.extensionView=null,e.loader=!1,e.metaFields=e.metaFieldStore,e.selectedView=null,e.translationList=[],e.initialTranslationList=[],e.attrsList=[],e.modelType===F.h.BASE&&e.entityType===F.c.ENTITY||(e.entityModel=null),e.modelType===F.h.ENTITY&&(e.entityType=F.c.ENTITY,e.actualType=null,e.model=null,e.metaFields=[],e.metaFieldStore=[]),e.modelType===F.h.CUSTOM&&(e.model=null),e.widgets={"-1":Object(C.a)({type:"form",cols:12,extension:!1},x.e.getDefaultProperties(a.modelType,a.entityType,a.entityModel)),0:{type:"dump_field",name:""}},e.editWidget=-1,e.editWidgetType=null,e.tabIndex=0}))}),[n,a.modelType,r,a.entityType,a.entityModel,s]),h=i.a.useCallback((function(){var e;if((a.customFieldItems||a.removedCustomFields.length)&&(null===(e=a.modelField)||void 0===e?void 0:e.name)){r();var t={modelField:a.modelField.name,model:a.model.fullName},i=x.e.getCustomModelFields(a.customFieldItems,a.customFieldWidgets,t,!0).fields;if(i.length||a.removedCustomFields.length){var o=i.map((function(e){return ma.save(e)}));a.removedCustomFields.length&&o.push(ma.removeAll(a.removedCustomFields)),Promise.all(o).then((function(e){_e(a.modelField,a.model).then((function(e){var t=e.data,a=void 0===t?[]:t,i=Object(x.f)(a,void 0,"","customForm");n((function(e){e.customFieldWidgets=i.widgets,e.customFieldItems=i.items,e.customFields=a,e.loader=!1,e.removedCustomFields=[]}))}))}))}else p()}}),[n,p,a,r]),O=i.a.useCallback((function(){f(!1)}),[]),j=i.a.useCallback((function(){f(!0)}),[]),w=i.a.useCallback((function(){O(),b()}),[b,O]),T=i.a.useCallback((function(){n((function(e){e.sidePanel=!e.sidePanel}))}),[n]);return i.a.createElement(i.a.Fragment,null,function(){var e=a.dialog;return e&&i.a.createElement(re.a,{open:Boolean(e.message)},i.a.createElement(ce.a,null,e.title||"Alert"),i.a.createElement(le.a,null,i.a.createElement("div",{dangerouslySetInnerHTML:{__html:e.message}})),i.a.createElement(oe.a,null,i.a.createElement(Z.a,{onClick:v,color:"primary",autoFocus:!0},"OK")))}(),i.a.createElement(ia,{update:n,saveView:g,saveCustomFieldView:h,removeView:j,model:a.model,extensionView:a.extensionView,modelType:a.modelType,onNew:y,modelField:a.modelField,customModel:a.customModel,selectedView:a.selectedView,startLoader:r,entityModel:a.entityModel,errorList:a.errorList,entityType:a.entityType,metaFieldStore:a.metaFieldStore,undo:o,redo:c,pastLength:a.past.length,futureLength:a.future.length,clearHistory:s,onSidePanelToggle:T}),i.a.createElement(Ot,{open:m,onClose:O,onOk:w,message:"Are you sure? Do you want to delete it?"}))})),va=Object(s.a)({container:{display:"flex",height:"100%"},toolbarWrapper:{height:"60px"},panelContainer:{display:"flex",height:"calc(100% - 60px)"},sidePanel:{height:"100%"},mainPanel:{height:"100%",".modern-dark &":{backgroundColor:"#323232"}}});function ya(){var e=va(),t=Object(M.b)(),a=t.state,n=t.update,r=a.sidePanel,o=void 0===r||r;return i.a.useEffect((function(){(function(){return st.apply(this,arguments)})().then((function(e){n((function(t){t.languageList=Object(l.a)(e)}))})),function(){return gt.apply(this,arguments)}().then((function(e){e&&e.theme&&(document.body.className=e.theme)}))}),[n]),i.a.createElement(c.a,{container:!0,className:e.container},i.a.createElement(c.a,{item:!0,xs:12,className:e.toolbarWrapper},i.a.createElement(ga,null)),i.a.createElement(c.a,{container:!0,className:e.panelContainer},o&&i.a.createElement(c.a,{item:!0,xs:3,className:e.sidePanel},i.a.createElement(Wt,null)),i.a.createElement(c.a,{item:!0,xs:o?9:12,className:e.mainPanel},i.a.createElement(Pt,null))))}function ha(){return i.a.createElement(M.a,null,i.a.createElement(u.a,{backend:d.a},i.a.createElement(ya,null)))}o.a.render(i.a.createElement(ha,null),document.getElementById("root"))},27:function(e,t,a){"use strict";a.d(t,"b",(function(){return b}));var n=a(4),i=a(9),r=a(21),o=a(0),l=a.n(o),c=a(22),s=a(2),u=a(8),d=a(62),m=a(33),f=a(65),p=l.a.createContext();function b(){return l.a.useContext(p)}t.a=function(e){var t=e.children,a=function(e){var t=l.a.useState(e),a=Object(r.a)(t,2),n=a[0],i=a[1];return[n,l.a.useCallback((function(e){return i(Object(c.a)(e))}),[i])]}({future:[],past:[],title:"",items:[],widgets:null,dragWidget:null,editWidget:null,hoverWidget:null,initialWidgets:null,initialItems:null,tabIndex:0,modelType:"BASE",customFields:[],customFieldItems:[],customFieldWidgets:null,modelField:null,entityModel:null,hoverAttr:{},loader:!1,removedCustomFields:[],errorList:{},entityType:s.c.META,entityFields:[],actualType:null,extensionMoves:[],sidePanel:!0,attrsList:[],removedTranslationList:[]}),o=Object(r.a)(a,2),b=o[0],g=o[1],v=b.widgets;function y(e,t){var a="customField"===t?b.customFieldWidgets:b.widgets;return function e(t){var n=a[t].items;return(void 0===n?[]:n).reduce((function(t,a){return t.concat(e(a))}),[t])}(e)}function h(e,t,a,n){t.exView&&!u.e.isCreatedFromStudio(t.exView)&&Object(d.a)(e,t)}function O(e,t){Object.keys(e).forEach((function(a){t[a]=Object(c.b)(e[a])}))}function j(e){e.past.push({widgets:Object(c.b)(e.widgets),items:Object(c.b)(e.items),extensionMoves:Object(c.b)(e.extensionMoves),customFieldWidgets:Object(c.b)(e.customFieldWidgets),customFields:Object(c.b)(e.customFields),customFieldItems:Object(c.b)(e.customFieldItems),metaFields:Object(c.b)(e.metaFields),removedCustomFields:Object(c.b)(e.removedCustomFields),errorList:Object(c.b)(e.errorList)}),e.future.length&&(e.future=[])}var w={onWidgetChange:function(e,t){var a=arguments.length>2&&void 0!==arguments[2]&&arguments[2];g((function(n){j(n);var i="customField"===n.editWidgetType,r=[];Object(u.m)(t,n,e,i);var o="customField"===n.editWidgetType?n.customFieldWidgets:n.widgets;a&&(o[e]={});var l="customField"===n.editWidgetType&&n.customFieldWidgets?n.customFieldWidgets[e]:n.widgets[e];l&&Object.keys(t).forEach((function(a){var n=t[a];if((void 0===l[a]?"":l[a])!==n){var i=-1===e?"/":o[e].xPath,c=[void 0,null].includes(n)?"":n;Object(u.k)(b)&&r.push({name:"attribute",target:i,attributes:{name:u.e.keyReplacer(a,s.h.BASE),value:u.e.valueConverter(c,a)},id:e})}if("colSpan"===a){var d=Object.keys(o).find((function(t){return(o[t].items||[]).indexOf(e)>-1}));n=Math.min(Number(o[d]&&o[d].cols||n),n)}else"cols"===a&&n&&(n=Math.min(12,Number(n)));l[a]=n,"layout"===a&&n===s.i.stack&&(l.cols=12)})),"customField"!==n.editWidgetType&&n.modelType===s.h.BASE&&(h(r,n,n.widgets,n.items),Object(m.b)(n))}))},onMove:function(e,t,a){var n=e.source,i=e.destination,r=function(e){return{isMoved:e}};if(!n||!i||i.id===s.f.form&&b.items.length>1)return r(!1);if(Object.values(s.f.createWidgets).indexOf(n.id)>-1)return r(!0);var o="customField"===a?b.customFieldWidgets:v;return!n.attrs.isNew&&Object(u.c)(o,n,i)||[s.j.panel,s.j.tabs].includes(n.attrs.type)&&y(n.id,a).indexOf(i.id===s.f.dumpField?i.panelId:i.id)>-1?r(!1):r(!0)},onDrag:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=t.props,r=t.isDrop;g((function(t){var o=[],l=a.attrs,d=void 0===l?{}:l,p=Object(n.a)({type:d.type,title:d.label,name:d.name,relationship:d.relationship,mappedBy:d.mappedBy},d),b=t.dragWidget,g=t.hoverWidget,v=t.editWidget,y=t.dragWidgetProps;t.dragWidget=null,t.hoverWidget=null;var O=Object(n.a)({},t.hoverAttr);if(p.widgetAttrs&&O.widgetAttrs){var w=JSON.parse(O.widgetAttrs),x=JSON.parse(p.widgetAttrs);O.widgetAttrs=JSON.stringify(Object(n.a)(Object(n.a)({},x),w))}if(t.dragWidgetProps=Object.assign({},a,{attrs:Object(n.a)(Object(n.a)({},p),O)}),v&&v===b&&(t.editWidget=null),r){var T,k;if(!g||!y)return;j(t);var S=t.metaFields.findIndex((function(e){return e.typeName===y.attrs.typeName&&e.name===y.attrs.name}));-1!==S&&t.metaFields.splice(S,1),y.attrs=Object(n.a)(Object(n.a)({},y.attrs),t.hoverAttr);Object(i.a)(t.items),"customField"===g._type?Object(n.a)({},t.customFieldWidgets):Object(c.b)(t.widgets);var E,C=Object(u.l)({hoverWidget:g,dragWidgetProps:y})(t).extendList;if(o.push.apply(o,Object(i.a)(C)),"customField"!==g._type&&(E=t.widgets[g.panelId]),g.panelId&&![s.j.menubar,s.j.toolbar].includes(null===(T=E)||void 0===T?void 0:T.type)){var M=Object(u.d)(t,g.panelId,g._type).extendList,F=void 0===M?[]:M;o.push.apply(o,Object(i.a)(F))}if(y.panelId&&g.panelId!==y.panelId&&![s.j.menubar,s.j.toolbar].includes(null===(k=E)||void 0===k?void 0:k.type)){var N=Object(u.d)(t,y.panelId,g._type).extendList,I=void 0===N?[]:N;o.push.apply(o,Object(i.a)(I))}"customField"!==g._type&&t.modelType===s.h.BASE&&(Object(f.c)(t,y.panelId),Object(f.c)(t,g.panelId),h(o,t),Object(m.b)(t)),t.hoverAttr={}}else t.dragWidget=e}))},onRemove:function(e,t,a,n){var r=[],o="customField"===n;window.confirm("Sure want to delete?")&&g((function(l){j(l);var d="customField"===n?l.customFieldWidgets:l.widgets,p="customField"===n?"customFieldItems":"items",g=(Object(i.a)(l.items),Object(c.b)(l.widgets),d[a]);if(!o&&l.modelType===s.h.BASE){var v=l.metaFieldStore.findIndex((function(e){return(e.typeName===g.typeName||"field"===g.type)&&e.name===g.name}));-1!==v&&l.metaFields.unshift(l.metaFieldStore[v])}var O=e&&s.f.form!==e;if((t=(O?d[e].items:l[p]).findIndex((function(e){return"".concat(e)==="".concat(a)})))>-1&&d[a]){var w=y(a,n);w.forEach((function(e){if(o){var t=d[e];t.id&&l.removedCustomFields.push({id:t.id,version:t.version})}}));var x=Object(i.a)(w);if(O)if(d[e].layout!==s.i.grid||[s.j.menubar,s.j.toolbar].includes(d[e].type))d[e].items.splice(t,1);else{var T=Object(u.a)(l,{panelId:e,index:t,id:a},n);w=w.concat(T.ids),Object(u.k)(b)&&r.push.apply(r,Object(i.a)(T.extendList))}else l[p].splice(t,1);d[a]&&Object(u.k)(b)&&r.push({name:"replace",target:d[a].xPath}),w.forEach((function(e){d[e]&&(x.includes(e)||Object(u.k)(b)&&r.push({name:"replace",target:d[e].xPath}),delete d[e])})),w.indexOf(l.editWidget)>-1&&(l.editWidget=null)}Object(f.b)(l,a),o||l.modelType!==s.h.BASE||(Object(f.c)(l,e),h(r,l),Object(m.b)(l))}))},onHover:function(e){g((function(t){t.hoverWidget=e}))},onSelect:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;g((function(a){a.editWidget=e,a.tabIndex=0,a.editWidgetType=t}))},state:b,update:g,setHoverAttr:function(e){g((function(t){t.hoverAttr=e}))},startLoader:function(){g((function(e){e.loader=!0}))},undo:function(){g((function(e){e.past.length&&(e.future.unshift({widgets:Object(c.b)(e.widgets),items:Object(c.b)(e.items),extensionMoves:Object(c.b)(e.extensionMoves),customFieldWidgets:Object(c.b)(e.customFieldWidgets),customFields:Object(c.b)(e.customFields),customFieldItems:Object(c.b)(e.customFieldItems),metaFields:Object(c.b)(e.metaFields),removedCustomFields:Object(c.b)(e.removedCustomFields),errorList:Object(c.b)(e.errorList)}),O(e.past[e.past.length-1],e),e.past.splice(e.past.length-1,1))}))},redo:function(){g((function(e){e.future.length&&(e.past.push({widgets:Object(c.b)(e.widgets),items:Object(c.b)(e.items),extensionMoves:Object(c.b)(e.extensionMoves),customFieldWidgets:Object(c.b)(e.customFieldWidgets),customFieldItems:Object(c.b)(e.customFieldItems),metaFields:Object(c.b)(e.metaFields),customFields:Object(c.b)(e.customFields),removedCustomFields:Object(c.b)(e.removedCustomFields),errorList:Object(c.b)(e.errorList)}),O(e.future[0],e),e.future.splice(0,1))}))},clearHistory:function(e){e.future=[],e.past=[]},onTranslationRemove:function(e){g((function(t){t.removedTranslationList.push(e)}))}};return l.a.createElement(p.Provider,{value:w},t)}},33:function(e,t,a){"use strict";a.d(t,"a",(function(){return o})),a.d(t,"b",(function(){return l}));var n=a(8),i=a(2),r=function(e){return["viewer","editor","hilite"].includes(e)?"field":e};function o(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],a=arguments.length>2?arguments[2]:void 0,l=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"";if(-1===a)return"";var c=""===l,s=function(t,a){var n=e[a];return t.filter((function(t){return t!==a&&e[t]&&[e[t].name,e[t].originalName].includes(n.name)})).length>0},u=function(t,a){var n=e[a];return t.filter((function(t){return e[t]&&[e[t].name,e[t].originalName].includes(n.name)})).indexOf(a)+1},d=function(t,a,i){return t.filter((function(t){return e[t]&&r(n.e.getWidgetType(e[t],"field"))===a})).indexOf(i)+1},m=function(){var t=e[a];return!!t.name&&1===Object.values(e).filter((function(e){return e.name===t.name})).length},f=function(){return!c&&!!m()},p=!0,b=Object.values(e),g=Object.keys(e);if(b.forEach((function(i,c){if(i.items&&-1!==i.items.findIndex((function(e){return e===a}))){p=!1;var m=e[a],b=r(n.e.getWidgetType(m,"field"));if(m.name){var v="/".concat(b,"[@name='").concat(m.name,"']");if(s(i.items,a)){var y=u(i.items,a);y>0&&(v="".concat(v,"[").concat(y,"]"))}l="".concat(v).concat(l)}else{var h=d(i.items,b,a);l="/".concat(b,"[").concat(h,"]").concat(l)}l=f()?"/".concat(l):o(e,t,g[c],l)}})),p){var v=t.findIndex((function(e){return e===a}));if(-1!==v){var y=e[a];if(y.name){var h="//".concat(y.type,"[@name='").concat(y.name,"']");if([i.j.menubar,i.j.toolbar,i.j.divider].includes(y.type)&&(h="//".concat(y.type)),s(t,a)){var O=u(t,a);O>0&&(h="".concat(h,"[").concat(O,"]"))}l="".concat(h).concat(l)}else{var j=d(t,y.type,a);l="//".concat(y.type,"[").concat(j,"]").concat(l)}}}return l}function l(e){Object.keys(e.widgets).forEach((function(t){var a=o(e.widgets,e.items,t);e.widgets[t].xPath=a}))}},47:function(e,t,a){"use strict";a.d(t,"a",(function(){return b})),a.d(t,"c",(function(){return g}));var n=a(21),i=a(15),r=a(4),o=a(0),l=a.n(o),c=a(25),s=a.n(c),u=a(2),d=a(27),m=function(e){var t=e.widgetAttrs?JSON.parse(e.widgetAttrs):{};return t.colSpan?Number(t.colSpan):e.colSpan},f=1,p=12,b=function(e){var t=e.className,a=e.attrs,n=e.children,r=Object(i.a)(e,["className","attrs","children"]);return l.a.createElement("div",Object.assign({className:s()(t,a.cols?"grid-span grid-".concat(a.cols):"")},r),n)};function g(){var e=l.a.useState((function(){return null})),t=Object(n.a)(e,2),i=t[0],r=t[1];return l.a.useEffect((function(){Promise.resolve().then(a.bind(null,61)).then((function(e){return r((function(){return e.default}))}))}),[]),i}t.b=function(e){var t=g(),a=Object(d.b)().state,n=a.widgets,i=a.customFieldWidgets,o=e.className,c=e.items,s=e.attrs,v=e.panelId,y=e.design,h="customField"===e._type?i:n,O=Number(s.cols||1),j=2*O+1,w=s.layout===u.i.stack,x=y?1:0,T=(100-(1===j?0:j/2+1)*x)/((j-1)/2),k=l.a.useMemo((function(){var e=0;return function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:p,a=arguments.length>2?arguments[2]:void 0,n=[],i=1===t||a,o=i?p:t,l=[],c=0,s=function(e){return Number(e)};if(!e.length){var d={id:0,separator:!0},b={id:0,dummy:!0,dummyPanel:!0,colSpan:i?12:6};return[[d,b,d].concat(i?[]:[b,d])]}for(var g=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.item,a=e.overflow,i=void 0!==a&&a;if(i){var r=o-(c-s(t.colSpan));l.push({id:0,dummy:!0,colSpan:r})}n.push(l),l=[],c=0},v=function(e){return l.push(e)},y=0;y<e.length;y++){var h=Object.assign(e[y],i?{colSpan:p}:{colSpan:s(m(e[y]))}),O=h.colSpan,j=void 0===O?f:O,w=y===e.length-1;if((c+=s(j))>o?(g({item:h,overflow:!0}),c=j,v(h)):c===o?(l.push(h),g({item:h})):l.push(h),w&&l.length){var x=l.reduce((function(e,t){var a=t.colSpan;return e+(void 0===a?f:a)}),0),T=o-x;T>0&&l.push({id:0,dummy:!0,colSpan:T}),n.push(l)}}for(var k=[],S=0;S<n.length;S++){var E,C=n[S],M=![u.j.menubar,u.j.toolbar].includes(null===(E=C[0])||void 0===E?void 0:E.type),F=[],N=[],I=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{separator:!0};return e.push(Object(r.a)({id:0,colSpan:1},t))};I(F),M&&I(N,{relatedColSpan:m(C[0]),separator:!0});for(var L=0;L<C.length;L++){var W=C[L],A=m(W);I(F,{dummy:!0,colSpan:A}),I(N,W),I(F,{relatedColSpan:A,separator:!0}),M&&I(N,{relatedColSpan:A,separator:!0})}M?k.push(F):k.push([]),k.push(N),S===n.length-1&&k.push(F)}return k}(c.map((function(e){return Object.assign({},h[e]||{},{id:e})})),O,w,null===s||void 0===s?void 0:s.itemSpan).map((function(t,a){var n=0;return t.map((function(t){var i=n;return n+=t.separator?0:Number(t.colSpan||1),Object(r.a)(Object(r.a)({},t),{},{rowIndex:a,columnIndex:i,cellIndice:e++})}))}))}),[c,h,O,w,s]),S=k.reduce((function(e,t){return e.concat(t)}),[]);return l.a.createElement(b,{attrs:s,className:o},l.a.createElement("table",{cellPadding:"0",cellSpacing:"0"},y&&l.a.createElement("colgroup",null,w?l.a.createElement("col",{width:"100%"}):new Array(j).fill(0).map((function(e,t){return l.a.createElement("col",{key:t,width:"".concat(t%2===1?T:x,"%")})}))),l.a.createElement("tbody",null,k.map((function(a,n){return l.a.createElement("tr",{className:n%2===0?"empty-row":"fill-row",key:n},a.map((function(a,i){var r=a.id,o=a.colSpan,c=a.cellIndice,u=a.columnIndex,d=a.separator,m=a.relatedColSpan;return l.a.createElement("td",{className:d?"separator":"",key:c,colSpan:o>1?2*o-1:o},t&&l.a.createElement(t,{design:y,meta:{isSeparator:Boolean(d),colSpan:o,row:n,col:i,colIndex:u,grid:S,total:j,relatedColSpan:m},panelId:v,key:c,id:r,index:c,panelColumns:s.cols,_type:e._type,errorList:e.errorList,canRemove:e.canRemove}))})))})))))}},5:function(e,t,a){"use strict";a.d(t,"f",(function(){return i})),a.d(t,"c",(function(){return r})),a.d(t,"b",(function(){return o})),a.d(t,"d",(function(){return l})),a.d(t,"e",(function(){return c})),a.d(t,"a",(function(){return s}));var n=a(4),i=function(e){var t=Object.assign({},e);return Object(n.a)({type:"string"},t)},r=function(e){var t=Object.assign({},e);return Object(n.a)({type:"objectSelection"},t)},o=function(e){var t=Object.assign({},e);return Object(n.a)({type:"integer"},t)},l=function(e){var t=Object.assign({},e);return Object(n.a)({type:"select",valueField:"name"},t)},c=function(e){var t=Object.assign({},e);return Object(n.a)({type:"staticSelect"},t)},s=function(e){var t=Object.assign({},e);return Object(n.a)({type:"boolean"},t)}},51:function(e,t,a){"use strict";var n=a(4),i=["fa-500px","fa-address-book","fa-address-book-o","fa-address-card","fa-address-card-o","fa-adjust","fa-adn","fa-align-center","fa-align-justify","fa-align-left","fa-align-right","fa-amazon","fa-ambulance","fa-american-sign-language-interpreting","fa-anchor","fa-android","fa-angellist","fa-angle-double-down","fa-angle-double-left","fa-angle-double-right","fa-angle-double-up","fa-angle-down","fa-angle-left","fa-angle-right","fa-angle-up","fa-apple","fa-archive","fa-area-chart","fa-arrow-circle-down","fa-arrow-circle-left","fa-arrow-circle-o-down","fa-arrow-circle-o-left","fa-arrow-circle-o-right","fa-arrow-circle-o-up","fa-arrow-circle-right","fa-arrow-circle-up","fa-arrow-down","fa-arrow-left","fa-arrow-right","fa-arrow-up","fa-arrows","fa-arrows-alt","fa-arrows-h","fa-arrows-v","fa-asl-interpreting","fa-assistive-listening-systems","fa-asterisk","fa-at","fa-audio-description","fa-automobile","fa-backward","fa-balance-scale","fa-ban","fa-bandcamp","fa-bank","fa-bar-chart","fa-bar-chart-o","fa-barcode","fa-bars","fa-bath","fa-bathtub","fa-battery","fa-battery-0","fa-battery-1","fa-battery-2","fa-battery-3","fa-battery-4","fa-battery-empty","fa-battery-full","fa-battery-half","fa-battery-quarter","fa-battery-three-quarters","fa-bed","fa-beer","fa-behance","fa-behance-square","fa-bell","fa-bell-o","fa-bell-slash","fa-bell-slash-o","fa-bicycle","fa-binoculars","fa-birthday-cake","fa-bitbucket","fa-bitbucket-square","fa-bitcoin","fa-black-tie","fa-blind","fa-bluetooth","fa-bluetooth-b","fa-bold","fa-bolt","fa-bomb","fa-book","fa-bookmark","fa-bookmark-o","fa-braille","fa-briefcase","fa-btc","fa-bug","fa-building","fa-building-o","fa-bullhorn","fa-bullseye","fa-bus","fa-buysellads","fa-cab","fa-calculator","fa-calendar","fa-calendar-check-o","fa-calendar-minus-o","fa-calendar-o","fa-calendar-plus-o","fa-calendar-times-o","fa-camera","fa-camera-retro","fa-car","fa-caret-down","fa-caret-left","fa-caret-right","fa-caret-square-o-down","fa-caret-square-o-left","fa-caret-square-o-right","fa-caret-square-o-up","fa-caret-up","fa-cart-arrow-down","fa-cart-plus","fa-cc","fa-cc-amex","fa-cc-diners-club","fa-cc-discover","fa-cc-jcb","fa-cc-mastercard","fa-cc-paypal","fa-cc-stripe","fa-cc-visa","fa-certificate","fa-chain","fa-chain-broken","fa-check","fa-check-circle","fa-check-circle-o","fa-check-square","fa-check-square-o","fa-chevron-circle-down","fa-chevron-circle-left","fa-chevron-circle-right","fa-chevron-circle-up","fa-chevron-down","fa-chevron-left","fa-chevron-right","fa-chevron-up","fa-child","fa-chrome","fa-circle","fa-circle-o","fa-circle-o-notch","fa-circle-thin","fa-clipboard","fa-clock-o","fa-clone","fa-close","fa-cloud","fa-cloud-download","fa-cloud-upload","fa-cny","fa-code","fa-code-fork","fa-codepen","fa-codiepie","fa-coffee","fa-cog","fa-cogs","fa-columns","fa-comment","fa-comment-o","fa-commenting","fa-commenting-o","fa-comments","fa-comments-o","fa-compass","fa-compress","fa-connectdevelop","fa-contao","fa-copy","fa-copyright","fa-creative-commons","fa-credit-card","fa-credit-card-alt","fa-crop","fa-crosshairs","fa-css3","fa-cube","fa-cubes","fa-cut","fa-cutlery","fa-dashboard","fa-dashcube","fa-database","fa-deaf","fa-deafness","fa-dedent","fa-delicious","fa-desktop","fa-deviantart","fa-diamond","fa-digg","fa-dollar","fa-dot-circle-o","fa-download","fa-dribbble","fa-drivers-license","fa-drivers-license-o","fa-dropbox","fa-drupal","fa-edge","fa-edit","fa-eercast","fa-eject","fa-ellipsis-h","fa-ellipsis-v","fa-empire","fa-envelope","fa-envelope-o","fa-envelope-open","fa-envelope-open-o","fa-envelope-square","fa-envira","fa-eraser","fa-etsy","fa-eur","fa-euro","fa-exchange","fa-exclamation","fa-exclamation-circle","fa-exclamation-triangle","fa-expand","fa-expeditedssl","fa-external-link","fa-external-link-square","fa-eye","fa-eye-slash","fa-eyedropper","fa-fa","fa-facebook","fa-facebook-f","fa-facebook-official","fa-facebook-square","fa-fast-backward","fa-fast-forward","fa-fax","fa-feed","fa-female","fa-fighter-jet","fa-file","fa-file-archive-o","fa-file-audio-o","fa-file-code-o","fa-file-excel-o","fa-file-image-o","fa-file-movie-o","fa-file-o","fa-file-pdf-o","fa-file-photo-o","fa-file-picture-o","fa-file-powerpoint-o","fa-file-sound-o","fa-file-text","fa-file-text-o","fa-file-video-o","fa-file-word-o","fa-file-zip-o","fa-files-o","fa-film","fa-filter","fa-fire","fa-fire-extinguisher","fa-firefox","fa-first-order","fa-flag","fa-flag-checkered","fa-flag-o","fa-flash","fa-flask","fa-flickr","fa-floppy-o","fa-folder","fa-folder-o","fa-folder-open","fa-folder-open-o","fa-font","fa-font-awesome","fa-fonticons","fa-fort-awesome","fa-forumbee","fa-forward","fa-foursquare","fa-free-code-camp","fa-frown-o","fa-futbol-o","fa-gamepad","fa-gavel","fa-gbp","fa-ge","fa-gear","fa-gears","fa-genderless","fa-get-pocket","fa-gg","fa-gg-circle","fa-gift","fa-git","fa-git-square","fa-github","fa-github-alt","fa-github-square","fa-gitlab","fa-gittip","fa-glass","fa-glide","fa-glide-g","fa-globe","fa-google","fa-google-plus","fa-google-plus-circle","fa-google-plus-official","fa-google-plus-square","fa-google-wallet","fa-graduation-cap","fa-gratipay","fa-grav","fa-group","fa-h-square","fa-hacker-news","fa-hand-grab-o","fa-hand-lizard-o","fa-hand-o-down","fa-hand-o-left","fa-hand-o-right","fa-hand-o-up","fa-hand-paper-o","fa-hand-peace-o","fa-hand-pointer-o","fa-hand-rock-o","fa-hand-scissors-o","fa-hand-spock-o","fa-hand-stop-o","fa-handshake-o","fa-hard-of-hearing","fa-hashtag","fa-hdd-o","fa-header","fa-headphones","fa-heart","fa-heart-o","fa-heartbeat","fa-history","fa-home","fa-hospital-o","fa-hotel","fa-hourglass","fa-hourglass-1","fa-hourglass-2","fa-hourglass-3","fa-hourglass-end","fa-hourglass-half","fa-hourglass-o","fa-hourglass-start","fa-houzz","fa-html5","fa-i-cursor","fa-id-badge","fa-id-card","fa-id-card-o","fa-ils","fa-image","fa-imdb","fa-inbox","fa-indent","fa-industry","fa-info","fa-info-circle","fa-inr","fa-instagram","fa-institution","fa-internet-explorer","fa-intersex","fa-ioxhost","fa-italic","fa-joomla","fa-jpy","fa-jsfiddle","fa-key","fa-keyboard-o","fa-krw","fa-language","fa-laptop","fa-lastfm","fa-lastfm-square","fa-leaf","fa-leanpub","fa-legal","fa-lemon-o","fa-level-down","fa-level-up","fa-life-bouy","fa-life-buoy","fa-life-ring","fa-life-saver","fa-lightbulb-o","fa-line-chart","fa-link","fa-linkedin","fa-linkedin-square","fa-linode","fa-linux","fa-list","fa-list-alt","fa-list-ol","fa-list-ul","fa-location-arrow","fa-lock","fa-long-arrow-down","fa-long-arrow-left","fa-long-arrow-right","fa-long-arrow-up","fa-low-vision","fa-magic","fa-magnet","fa-mail-forward","fa-mail-reply","fa-mail-reply-all","fa-male","fa-map","fa-map-marker","fa-map-o","fa-map-pin","fa-map-signs","fa-mars","fa-mars-double","fa-mars-stroke","fa-mars-stroke-h","fa-mars-stroke-v","fa-maxcdn","fa-meanpath","fa-medium","fa-medkit","fa-meetup","fa-meh-o","fa-mercury","fa-microchip","fa-microphone","fa-microphone-slash","fa-minus","fa-minus-circle","fa-minus-square","fa-minus-square-o","fa-mixcloud","fa-mobile","fa-mobile-phone","fa-modx","fa-money","fa-moon-o","fa-mortar-board","fa-motorcycle","fa-mouse-pointer","fa-music","fa-navicon","fa-neuter","fa-newspaper-o","fa-object-group","fa-object-ungroup","fa-odnoklassniki","fa-odnoklassniki-square","fa-opencart","fa-openid","fa-opera","fa-optin-monster","fa-outdent","fa-pagelines","fa-paint-brush","fa-paper-plane","fa-paper-plane-o","fa-paperclip","fa-paragraph","fa-paste","fa-pause","fa-pause-circle","fa-pause-circle-o","fa-paw","fa-paypal","fa-pencil","fa-pencil-square","fa-pencil-square-o","fa-percent","fa-phone","fa-phone-square","fa-photo","fa-picture-o","fa-pie-chart","fa-pied-piper","fa-pied-piper-alt","fa-pied-piper-pp","fa-pinterest","fa-pinterest-p","fa-pinterest-square","fa-plane","fa-play","fa-play-circle","fa-play-circle-o","fa-plug","fa-plus","fa-plus-circle","fa-plus-square","fa-plus-square-o","fa-podcast","fa-power-off","fa-print","fa-product-hunt","fa-puzzle-piece","fa-qq","fa-qrcode","fa-question","fa-question-circle","fa-question-circle-o","fa-quora","fa-quote-left","fa-quote-right","fa-ra","fa-random","fa-ravelry","fa-rebel","fa-recycle","fa-reddit","fa-reddit-alien","fa-reddit-square","fa-refresh","fa-registered","fa-remove","fa-renren","fa-reorder","fa-repeat","fa-reply","fa-reply-all","fa-resistance","fa-retweet","fa-rmb","fa-road","fa-rocket","fa-rotate-left","fa-rotate-right","fa-rouble","fa-rss","fa-rss-square","fa-rub","fa-ruble","fa-rupee","fa-s15","fa-safari","fa-save","fa-scissors","fa-scribd","fa-search","fa-search-minus","fa-search-plus","fa-sellsy","fa-send","fa-send-o","fa-server","fa-share","fa-share-alt","fa-share-alt-square","fa-share-square","fa-share-square-o","fa-shekel","fa-sheqel","fa-shield","fa-ship","fa-shirtsinbulk","fa-shopping-bag","fa-shopping-basket","fa-shopping-cart","fa-shower","fa-sign-in","fa-sign-language","fa-sign-out","fa-signal","fa-signing","fa-simplybuilt","fa-sitemap","fa-skyatlas","fa-skype","fa-slack","fa-sliders","fa-slideshare","fa-smile-o","fa-snapchat","fa-snapchat-ghost","fa-snapchat-square","fa-snowflake-o","fa-soccer-ball-o","fa-sort","fa-sort-alpha-asc","fa-sort-alpha-desc","fa-sort-amount-asc","fa-sort-amount-desc","fa-sort-asc","fa-sort-desc","fa-sort-down","fa-sort-numeric-asc","fa-sort-numeric-desc","fa-sort-up","fa-soundcloud","fa-space-shuttle","fa-spinner","fa-spoon","fa-spotify","fa-square","fa-square-o","fa-stack-exchange","fa-stack-overflow","fa-star","fa-star-half","fa-star-half-empty","fa-star-half-full","fa-star-half-o","fa-star-o","fa-steam","fa-steam-square","fa-step-backward","fa-step-forward","fa-stethoscope","fa-sticky-note","fa-sticky-note-o","fa-stop","fa-stop-circle","fa-stop-circle-o","fa-street-view","fa-strikethrough","fa-stumbleupon","fa-stumbleupon-circle","fa-subscript","fa-subway","fa-suitcase","fa-sun-o","fa-superpowers","fa-superscript","fa-support","fa-table","fa-tablet","fa-tachometer","fa-tag","fa-tags","fa-tasks","fa-taxi","fa-telegram","fa-television","fa-tencent-weibo","fa-terminal","fa-text-height","fa-text-width","fa-th","fa-th-large","fa-th-list","fa-themeisle","fa-thermometer","fa-thermometer-0","fa-thermometer-1","fa-thermometer-2","fa-thermometer-3","fa-thermometer-4","fa-thermometer-empty","fa-thermometer-full","fa-thermometer-half","fa-thermometer-quarter","fa-thermometer-three-quarters","fa-thumb-tack","fa-thumbs-down","fa-thumbs-o-down","fa-thumbs-o-up","fa-thumbs-up","fa-ticket","fa-times","fa-times-circle","fa-times-circle-o","fa-times-rectangle","fa-times-rectangle-o","fa-tint","fa-toggle-down","fa-toggle-left","fa-toggle-off","fa-toggle-on","fa-toggle-right","fa-toggle-up","fa-trademark","fa-train","fa-transgender","fa-transgender-alt","fa-trash","fa-trash-o","fa-tree","fa-trello","fa-tripadvisor","fa-trophy","fa-truck","fa-try","fa-tty","fa-tumblr","fa-tumblr-square","fa-turkish-lira","fa-tv","fa-twitch","fa-twitter","fa-twitter-square","fa-umbrella","fa-underline","fa-undo","fa-universal-access","fa-university","fa-unlink","fa-unlock","fa-unlock-alt","fa-unsorted","fa-upload","fa-usb","fa-usd","fa-user","fa-user-circle","fa-user-circle-o","fa-user-md","fa-user-o","fa-user-plus","fa-user-secret","fa-user-times","fa-users","fa-vcard","fa-vcard-o","fa-venus","fa-venus-double","fa-venus-mars","fa-viacoin","fa-viadeo","fa-viadeo-square","fa-video-camera","fa-vimeo","fa-vimeo-square","fa-vine","fa-vk","fa-volume-control-phone","fa-volume-down","fa-volume-off","fa-volume-up","fa-warning","fa-wechat","fa-weibo","fa-weixin","fa-whatsapp","fa-wheelchair","fa-wheelchair-alt","fa-wifi","fa-wikipedia-w","fa-window-close","fa-window-close-o","fa-window-maximize","fa-window-minimize","fa-window-restore","fa-windows","fa-won","fa-wordpress","fa-wpbeginner","fa-wpexplorer","fa-wpforms","fa-wrench","fa-xing","fa-xing-square","fa-y-combinator","fa-y-combinator-square","fa-yahoo","fa-yc","fa-yc-square","fa-yelp","fa-yen","fa-yoast","fa-youtube","fa-youtube-play","fa-youtube-square"],r=a(1),o=a(5),l=a(2);a.d(t,"b",(function(){return G}));var c={overview:[Object(r.bb)({existsCheck:!0}),r.Nb,r.Kb,r.n,r.c,r.B,r.zb],fieldOptions:[r.wb,r.Pb,r.yb,r.xb,r.Wb,r.cb,r.Y,r.V,Object(o.f)({name:"regex",dependModelType:l.h.CUSTOM}),r.Rb],uiOptions:[r.qb,r.k,r.lb,Object(o.a)({name:"nameField",title:"nameColumn",dependModelType:l.h.CUSTOM}),r.C,r.Vb,r.l],conditions:[r.Bb,r.D,r.rb,r.mb,r.J,r.Qb],valueExpr:[r.Ub],roles:[r.sb],widgetAttributes:[r.h,r.Cb,Object(o.a)({name:"multiline",parentField:"widgetAttrs",modelType:l.h.CUSTOM,dependModelType:l.h.CUSTOM})]},s={overview:[Object(r.bb)({existsCheck:!0}),r.Nb,r.Kb,r.n,r.c,r.B,r.zb],fieldOptions:[r.wb,r.Pb,r.yb,r.xb,r.Wb,r.cb,r.Y,r.V,r.Rb],uiOptions:[r.qb,r.k,r.lb,r.C,r.Vb,r.l],conditions:[r.Bb,r.D,r.rb,r.mb,r.J,r.Qb],valueExpr:[r.Ub],roles:[r.sb],widgetAttributes:[r.h,r.Cb]},u={overview:[Object(r.bb)({existsCheck:!0}),r.Nb,r.Kb,r.n,r.c,r.B,r.zb],fieldOptions:[r.wb,r.Pb,r.yb,r.xb,r.Wb,r.cb,r.Y,r.V,Object(o.b)({name:"precision",default:6}),Object(o.b)({name:"scale",default:2}),r.Rb],uiOptions:[r.qb,r.k,r.lb,r.C,r.Vb,r.l],conditions:[r.Bb,r.D,r.rb,r.mb,r.J,r.Qb],valueExpr:[r.Ub],roles:[r.sb],widgetAttributes:[r.h,r.Cb]},d={overview:[Object(r.bb)({existsCheck:!0}),r.Nb,r.Kb,r.n,r.c,r.B,r.zb],fieldOptions:[r.wb,r.Pb,r.yb,r.Wb,r.cb,r.Rb],uiOptions:[r.qb,r.k,r.lb,r.C,r.Vb,r.l],conditions:[r.Bb,r.D,r.rb,r.mb,r.J,r.Qb],valueExpr:[r.Ub],roles:[r.sb],widgetAttributes:[r.h,r.Cb]},m={overview:[Object(r.bb)({existsCheck:!0}),r.Nb,r.Kb,r.n,r.c,r.B,r.zb],fieldOptions:[r.wb,r.Pb,r.yb,r.xb,r.Wb,r.cb,r.Rb],uiOptions:[r.qb,r.k,r.lb,r.C,r.Vb,r.l],conditions:[r.Bb,r.D,r.rb,r.mb,r.J,r.Qb],valueExpr:[r.Ub],roles:[r.sb],widgetAttributes:[r.h,r.Cb]},f={overview:[Object(r.bb)({existsCheck:!0}),r.Nb,r.Kb,r.c],uiOptions:[r.k,r.lb,r.C,Object(o.a)({name:"canCollapse",parentField:"widgetAttrs",modelType:l.h.CUSTOM,dependModelType:l.h.CUSTOM}),Object(o.f)({name:"collapseIf",parentField:"widgetAttrs",modelType:l.h.CUSTOM,dependModelType:l.h.CUSTOM}),r.Db,r.l,r.b],conditions:[r.Bb,r.D,r.mb,r.Qb],roles:[r.sb],widgetAttributes:[r.h,r.O,r.Cb]},p={overview:[Object(r.bb)({existsCheck:!0}),r.Nb,r.c],uiOptions:[r.k,r.lb,r.C,Object(o.a)({name:"canCollapse",parentField:"widgetAttrs",modelType:l.h.CUSTOM,dependModelType:l.h.CUSTOM}),Object(o.f)({name:"collapseIf",parentField:"widgetAttrs",modelType:l.h.CUSTOM,dependModelType:l.h.CUSTOM}),r.Db,r.l],conditions:[r.Bb,r.D,r.mb,r.Qb],roles:[r.sb],widgetAttributes:[r.h]},b={overview:[Object(r.bb)({existsCheck:!0}),r.Nb,r.Kb,r.c],uiOptions:[r.k,r.lb,r.C,r.l],conditions:[r.Bb,r.D,r.mb,r.Qb],roles:[r.sb],widgetAttributes:[r.Cb]},g={overview:[Object(r.bb)({existsCheck:!0}),r.Nb,r.Kb,r.c,r.B,r.zb,r.kb],fieldOptions:[r.Wb,Object(o.d)({name:"onClick",required:!0,ref:"com.axelor.meta.db.MetaAction",requiredFor:["button"],dependModelType:l.h.CUSTOM})],uiOptions:[r.k,r.lb,r.C,r.Vb,r.l],conditions:[r.Bb,r.D,r.rb,r.mb,r.J,r.Qb],roles:[r.sb],widgetAttributes:[r.h,r.Cb,Object(o.e)({name:"icon",title:"Icon",data:i,helper:"https://fontawesome.com/cheatsheet",parentField:"widgetAttrs",modelType:l.h.CUSTOM})]},v={overview:[Object(r.bb)({existsCheck:!0}),r.Nb,r.Kb,r.n,r.c,r.B,r.zb],uiOptions:[r.k,r.C,r.l],conditions:[r.Bb,r.D,r.rb,r.mb,r.J,r.Qb],roles:[r.sb],widgetAttributes:[r.h]},y={overview:[Object(r.bb)({existsCheck:!0}),r.Nb,r.c],fieldOptions:[],uiOptions:[r.k,r.C,r.l],conditions:[r.Bb,r.D,r.Qb],roles:[r.sb],widgetAttributes:[r.h]},h={overview:[Object(r.bb)({existsCheck:!0}),r.Nb,r.Kb,r.c],fieldOptions:[r.wb,r.Wb],uiOptions:[r.qb,r.k,r.C,r.l],conditions:[r.Bb,r.D,r.rb,r.mb,r.Qb],valueExpr:[r.Ub],roles:[r.sb],widgetAttributes:[r.h,r.Cb]},O={overview:[Object(r.bb)({existsCheck:!0}),r.Nb,r.Kb,r.c],fieldOptions:[r.wb,r.Pb,r.yb,r.Wb],uiOptions:[r.qb,r.k,r.C,r.lb,r.l],conditions:[r.Bb,r.D,r.rb,r.mb,r.Qb],valueExpr:[r.Ub],roles:[r.sb],widgetAttributes:[r.h,r.Cb]},j={overview:[Object(r.bb)({existsCheck:!0}),r.Nb,r.Kb,r.n,r.c,r.B,r.zb],fieldOptions:[r.wb,r.Pb,r.yb,r.xb,r.Wb,r.cb,r.P,r.o,r.Jb,r.x,r.v,r.Rb],uiOptions:[r.qb,r.k,r.lb,r.C,r.Vb,r.l],conditions:[r.Bb,r.D,r.rb,r.mb,r.J,r.Qb],valueExpr:[r.Ub],roles:[r.sb],widgetAttributes:[r.h,r.Cb]},w={overview:[Object(r.bb)({existsCheck:!0}),r.Nb,r.Kb,r.c,r.B,r.zb],fieldOptions:[r.wb,r.Pb,r.yb,r.xb,r.Wb,r.cb,r.P,r.o,r.Jb,r.x,r.v,r.Sb,r.Tb,r.Rb],uiOptions:[r.qb,r.k,r.lb,r.C,r.Vb,r.l],conditions:[r.Bb,r.D,r.rb,r.mb,r.J,r.Qb],valueExpr:[r.Ub],roles:[r.sb],widgetAttributes:[r.h,r.Cb]},x={overview:[Object(r.bb)({existsCheck:!0}),r.Nb,r.Kb,r.c,r.B,r.zb],fieldOptions:[r.wb,r.Pb,r.yb,r.xb,r.Wb,r.cb,r.P,r.o,r.Ib,r.Rb],uiOptions:[r.qb,r.k,r.lb,r.C,r.Vb,r.l],conditions:[r.Bb,r.D,r.rb,r.mb,r.J,r.Qb],valueExpr:[r.Ub],roles:[r.sb],widgetAttributes:[r.h,r.Cb]},T={overview:[Object(r.bb)({existsCheck:!0}),Object(n.a)(Object(n.a)({},r.Kb),{},{required:!0}),r.c,Object(o.e)({name:"formWidth",data:["large"]}),Object(o.f)({name:"orderBy",title:"Order by"}),r.N,r.W,r.X],actions:[Object(o.f)({name:"onNew"}),Object(o.f)({name:"onSave"})]},k={overview:[Object(r.bb)(),r.Nb,r.Kb,r.c],uiOptions:[r.k,r.C,r.Vb,r.l],conditions:[r.Bb,r.D,r.mb,r.J,r.Qb],widgetAttributes:[r.h,r.Cb]},S={overview:[Object(r.bb)(),r.p]},E={overview:[Object(r.bb)({existsCheck:!0}),r.Nb,Object(n.a)(Object(n.a)({},r.Kb),{},{readOnly:!0,translationView:!1})]},C={overview:[Object(r.bb)({existsCheck:!0}),r.Nb,r.Kb,r.Z,r.q]},M={overview:[Object(r.bb)({existsCheck:!0}),r.Nb,r.a,r.Kb,r.g,r.F],uiOptions:[r.lb,r.C,r.A,r.l,r.ob],conditions:[r.Bb,r.D,r.mb],widgetAttributes:[r.h,r.Cb]},F={overview:[Object(r.bb)({existsCheck:!0}),r.Nb,r.a],widgetAttributes:[r.Cb]},N={overview:[Object(r.bb)({existsCheck:!0}),r.Nb],conditions:[r.E,r.Bb,r.D,r.F]},I={overview:[Object(r.bb)({existsCheck:!0}),r.Nb],widgetAttributes:[r.Cb],conditions:[r.E,r.F,r.J]},L={overview:[Object(r.bb)({existsCheck:!0}),r.Nb,r.Kb,r.u,r.db,r.cb],uiOptions:[r.v,r.x,r.A,r.q,r.lb,r.C,r.l],conditions:[r.Bb,r.D,r.mb,r.Qb,r.f,r.eb],widgetAttributes:[r.h,r.Cb]},W={overview:[r.Nb,r.K,r.I,r.F],widgetAttributes:[r.Cb]},A=[Object(r.bb)({existsCheck:!0}),r.Nb,r.Kb,r.B,r.j,r.L,r.m,r.qb,r.lb,r.Ob,r.C,r.Lb,r.M,r.z,r.U,r.w],V={overview:[].concat(A,[Object(o.a)({name:"namecolumn",title:"nameColumn"}),r.s,r.Y,r.V,r.R,r.ub,r.zb,r.ab,r.Mb,r.hb,r.r])},B={overview:[].concat(A,[r.s,r.Y,r.V,r.jb,r.tb])},q={overview:[].concat(A,[r.s,r.Y,r.V])},P={overview:[].concat(A,[r.s])},_={overview:[].concat(A,[r.s])},U={overview:[].concat(A,[r.s,r.Gb])},D={overview:[].concat(A,[r.s,r.Y,r.V])},R={overview:[].concat(A,[r.s])},J={overview:[].concat(A,[r.s,r.G,r.r])},z={overview:[].concat(A,[r.nb,r.T,r.eb,r.fb])},X={overview:[].concat(A,[r.nb,r.T,r.eb])},Y={overview:[].concat(A,[r.nb])},H={overview:[].concat(A,[r.nb,r.T])},K={overview:[r.gb,Object(r.bb)({existsCheck:!0}),r.Ab,r.e,r.pb,r.S,r.ib,r.Q,r.t,r.H,r.Hb,r.Eb,r.y]},Q={overview:[Object(r.bb)({existsCheck:!0}),r.E,r.i,r.d,r.Fb,r.l]},G=[{type:"form",value:E},{type:"grid",value:C},{type:"modelForm",value:T},{type:"entityForm",value:K},{type:"string",value:c},{type:"byte[]",value:c},{type:"integer",value:s},{type:"number",value:s},{type:"decimal",value:u},{type:"bigdecimal",value:u},{type:"boolean",value:d},{type:"datetime",value:m},{type:"localdatetime",value:m},{type:"zoneddatetime",value:m},{type:"date",value:m},{type:"localdate",value:m},{type:"time",value:m},{type:"panel",value:f,dependModelType:l.h.BASE},{type:"panel-stack",value:p},{type:"panel-tab",value:b},{type:"button",value:g},{type:"separator",value:v},{type:"spacer",value:y},{type:"label",value:h},{type:"many-to-one",value:j},{type:"many-to-many",value:w},{type:"one-to-many",value:w},{type:"json-many-to-one",value:x},{type:"json-many-to-many",value:x},{type:"json-one-to-many",value:x},{type:"include",value:T},{type:"panel-tabs",value:b,showInCustomField:!1},{type:"panel-dashlet",value:M},{type:"panel-related",value:L},{type:"panel-include",value:W},{type:"text",value:k},{type:"long",value:u},{type:"panel-dashlet",value:k},{type:"dashlet",value:k},{type:"static",value:k},{type:"one-to-one",value:j},{type:"binary",value:k},{type:"field",value:k},{type:"dummy",value:S},{type:"viewer",value:O},{type:"editor",value:h},{type:"byte[]entity",value:V},{type:"stringentity",value:V},{type:"integerentity",value:q},{type:"decimalentity",value:B},{type:"bigdecimalentity",value:B},{type:"dateentity",value:P},{type:"localdateentity",value:P},{type:"timeentity",value:_},{type:"datetimeentity",value:U},{type:"localdatetimeentity",value:U},{type:"zoneddatetimeentity",value:U},{type:"longentity",value:D},{type:"booleanentity",value:R},{type:"binaryentity",value:J},{type:"many-to-oneentity",value:Y},{type:"many-to-manyentity",value:X},{type:"one-to-manyentity",value:z},{type:"one-to-oneentity",value:H},{type:"menu",value:I},{type:"item",value:F},{type:"divider",value:N},{type:"hilite",value:Q}];t.a=G},57:function(e,t,a){"use strict";var n=a(15),i=a(0),r=a.n(i),o=a(25),l=a.n(o),c=a(47),s=a(2);t.a=r.a.memo((function(e){var t=e.id,a=e.attrs,i=e.design,o=e.isTab,u=void 0!==o&&o,d=Object(n.a)(e,["id","attrs","design","isTab"]),m=d.errorList[t]||{};return r.a.createElement(r.a.Fragment,null,(a.title||[s.j.toolbar,s.j.menubar].includes(a.serverType))&&r.a.createElement("div",{className:l()("panel-header",{inline:u})},a.title||a.autoTitle,a.serverType===s.j.toolbar&&r.a.createElement("i",{className:"fa fa-wrench",title:"toolbar"}),a.serverType===s.j.menubar&&r.a.createElement("i",{className:"fa fa-bars",title:"menubar"})),m.items&&!u&&r.a.createElement("div",{className:l()("panel-children-error")},m.items),!u&&r.a.createElement(c.b,{design:i,className:"panel-body",items:a.items||[],attrs:a,panelId:t,_type:d._type,errorList:d.errorList,canRemove:d.canRemove}))}))},61:function(e,t,a){"use strict";a.r(t);var n=a(15),i=a(4),r=a(0),o=a.n(r),l=a(25),c=a.n(l),s=a(158),u=a(305),d=a(306),m=a(27),f=a(2),p=a(86),b=a(57),g=a(94),v=a(85),y=a(21),h=a(47);var O=o.a.memo((function(e){var t=e.id,a=e.attrs,i=e.design,r=e.isTab,l=void 0===r||r,s=Object(n.a)(e,["id","attrs","design","isTab"]),u=s.errorList[t]||{},d=o.a.useState(!1),m=Object(y.a)(d,2),f=m[0],p=m[1],b=o.a.useCallback((function(e){e.stopPropagation(),p((function(e){return!e}))}),[]),g=f?"down":"up";return o.a.createElement(o.a.Fragment,null,o.a.createElement("div",{className:c()("menu-header",{inline:l})},o.a.createElement("span",null,a.title||a.autoTitle),o.a.createElement("div",{className:"menu-toggle-button",onClick:b},o.a.createElement("i",{className:"fa fa-chevron-".concat(g)}))),u.items&&!l&&o.a.createElement("div",{className:c()("panel-children-error")},u.items),f&&o.a.createElement(h.b,{design:i,className:"panel-body",items:a.items||[],attrs:a,panelId:t,_type:s._type,errorList:s.errorList,canRemove:s.canRemove}))})),j={field:{component:p.a,props:{className:"field-container"}},dump_field:{component:p.a,props:{className:"field-container dump"}},panel:{component:b.a,props:{className:"panel"}},menubar:{component:b.a,props:{className:"panel menubar"}},menu:{component:O,props:{className:"panel menu"}},toolbar:{component:b.a,props:{className:"panel toolbar"}},"panel-stack":{component:b.a,props:{className:"panel"}},"panel-include":{component:b.a,props:{className:"panel"}},form:{component:v.a,props:{className:"form-layout"}},customForm:{component:v.a,props:{className:"form-layout"}},"panel-tabs":{component:g.a,props:{className:"panel tabs-panel"}}};a.d(t,"WidgetComponent",(function(){return C}));var w=Symbol(),x={canDrag:function(e){var t=e.state,a="customField"===e._type;if(t.modelType!==f.h.BASE||a||e.isPalleteField)return!(e.id===f.f.dumpField||!1===e.attrs.draggable||e.attrs.isDummy||e.attrs.type===f.j.form)},beginDrag:function(e){var t=Object(i.a)({},e);return e.state.modelType===f.h.CUSTOM||"customField"===e._type?t.attrs=Object(i.a)(Object(i.a)({},t.attrs),{},{model:"com.axelor.meta.db.MetaJsonRecord",modelField:"attrs",widgetAttrs:JSON.stringify({colSpan:t.attrs.colSpan})}):e.state.modelType===f.h.BASE&&t.attrs.isModelField&&(t.attrs=Object(i.a)(Object(i.a)(Object(i.a)({},t.attrs),"field"!==t.attrs.serverType&&{type:t.attrs.serverType}),{},{serverType:"field"})),e.onDrag(e.id,{props:t}),Object(i.a)({},e)},endDrag:function(e,t){e.onDrag(null,{isDrop:t.didDrop(),props:{},newProps:t.getItem()})},isDragging:function(e,t){return e.id===t.getItem().id}},T={hover:function(e,t){var a,n=t.getItem(),i=n.index,r=n.panelId,o=n.id,l=n.attrs,c=e.index,s=e.panelId,u=e.id,d=e.attrs,m=e.state,p=e.meta,b=e.setHoverAttr,g=[f.j.panel,f.j.panelDashlet,f.j.panelRelated,f.j.panelInclude],v="customField"===e._type,y=(null===(a=m.hoverWidget)||void 0===a||a.meta,"customField"===e._type?m.customFieldWidgets:m.widgets),h=e.panelId?y[e.panelId]:null;if(m.modelType!==f.h.BASE||v){if(m.modelType!==f.h.ENTITY){if([f.j.menubar,f.j.toolbar].includes(l.type)){var O=Object.values(m.widgets||{}).find((function(e){return[f.j.menubar,f.j.toolbar].includes(e.type)}))?2:0;if(s)return;if(!p)return;if(p.row>O||1!==p.col)return}if((m.modelType===f.h.CUSTOM||v)&&[f.j.menubar,f.j.toolbar].includes(l.serverType))return;if(![f.j.menuItem,f.j.menu,f.j.divider].includes(l.serverType)&&h&&h.type===f.j.menu)return;if([f.j.menuItem,f.j.divider].includes(l.serverType)&&(!h||h.type!==f.j.menu))return;if([f.j.menu].includes(l.serverType)&&(!h||![f.j.menu,f.j.menubar].includes(h.type)))return;if(h&&h.type===f.j.menubar&&l.type!==f.j.menu)return;if(h&&h.type===f.j.toolbar&&l.type!==f.d.button)return;if(!h&&![].concat(g,[f.j.tabs,f.j.panelStack,f.j.menubar,f.j.toolbar]).includes(l.type))return;if(h&&h.type===f.j.panelStack&&!g.includes(l.type))return;if(h&&h.type===f.j.tabs&&!g.includes(l.type))return;if(m.modelType===f.h.CUSTOM||"customField"===e._type){if([f.j.panelDashlet,f.j.panelInclude,f.j.panelRelated,f.j.panelStack].includes(l.type))return;var j="customField"===e._type?m.customFieldWidgets:m.widgets,w="customField"===e._type?m.customFieldItems:m.items;if(-1!==Object.keys(j).findIndex((function(e){return j[e].type===f.j.tabs}))&&l.type===f.j.tabs&&l.isNew)return;if([f.j.panel,f.j.tabs].includes(l.type)&&e.panelId&&!w.includes(e.panelId))return;if(p){var x=[p.row,p.row-1],T=w.filter((function(e){return j[e].type===f.j.panel}));!!p.grid&&-1!==p.grid.findIndex((function(e){return x.includes(e.rowIndex)&&T.includes(e.id)}))}if(h&&l.type===f.j.panel&&h.type!==f.j.tabs)return;if(h&&l.type===f.j.tabs&&h.type===f.j.panel)return;var k=m.hoverAttr.widgetAttrs,S=void 0===k?"{}":k,E=JSON.parse(S);h&&l.type===f.j.panel&&h.type===f.j.tabs&&!E.tab&&b({widgetAttrs:JSON.stringify({tab:"true"})})}else if(e.panelId){var C=y[e.panelId];if(C&&[f.j.tabs,f.j.panelStack].includes(l.type))return;if([f.j.panelDashlet,f.j.panelRelated,f.j.panelInclude].includes(C.type))return}if(!1===l.isCoreField&&"customField"===e._type)return}if(!(c===i&&r===s||("form"!==d.type&&d.id||[]).indexOf(o)>-1||(l.items||[]).indexOf(u)>-1||!t.isOver({shallow:!0})||l.type===f.j.field&&d.type===f.j.form||l.type===f.j.field&&void 0!==e.tabId||e.state.hoverWidget&&e.state.hoverWidget.id===u&&e.state.hoverWidget.index===c&&e.state.hoverWidget.panelId===s)&&o===e.state.dragWidget)try{if(o&&!l.isNew&&r===s&&(i+1===c||i-1===c))return void(e.state.hoverWidget&&e.onHover(null));e.onMove({source:{panelId:r,index:i,id:o,attrs:l},destination:{panelId:s,index:c,id:u,attrs:d,_type:e._type}},!0,e._type).isMoved&&e.onHover?e.onHover({meta:e.meta||{},id:u,index:c,panelId:s,position:!e.panelColumns||"1"!=="".concat(e.panelColumns)&&"".concat(e.panelColumns)!=="".concat(l.colSpan)||void 0!==e.tabId?"default":"top",attrs:d,_type:e._type}):e.state.hoverWidget&&e.onHover(null)}catch(M){console.log("error",M)}}}};function k(e){var t=e.id,a=e.isDragging,i=e.connectDragSource,r=e.connectDropTarget,l=e.highlighted,s=e.hovered,u=e.tabId,d=e.className,m=e.component,p=e.attrs,b=e.state,g=e.update,v=e.onWidgetChange,y=e.errorList,h=void 0===y?{}:y,O=Object(n.a)(e,["id","isDragging","connectDragSource","connectDropTarget","highlighted","hovered","tabId","className","component","attrs","state","update","onWidgetChange","errorList"]),w=b.dragWidget,x="customField"===O._type?b.customFieldWidgets:b.widgets;o.a.useEffect((function(){-1===t&&g((function(e){e.hoverWidget&&(e.hoverWidget.visible=s)}))}),[g,s,t,w]);var T=j[p.type]||j.field;O.isTab&&!j[p.type]&&(T=j.panel);var k=T,S=k.component,E=k.props,C=void 0===E?{}:E;m&&(S=m);var M=!0;Object.values(f.f.createWidgets).indexOf(t)>-1&&(M=!1,r=function(e){return e});var F=M&&b.editWidget===t,N=void 0!==u,I=!!N&&!O.isTab,L=M&&Number(t)>0&&!I&&O.design&&!1!==O.canRemove;return(I||t&&t!==f.f.form&&"symbol"!==typeof t&&!p.isDummy)&&(r=function(e){return e}),!1===p.isExist||!O.design&&f.f.dumpField?null:o.a.createElement(o.a.Fragment,null,i(r(o.a.createElement("div",Object.assign({},C,{className:c()(d,"widget",C.className,{"dummy-widget":p.isDummy,edit:F,highlighted:l,hovered:s,active:M&&a,"form-field":M,"panel-field":"panel"===p.type,"non-title-panel":"panel"===p.type&&!O.isTab&&!p.title,"dummy-field":"field"===p.serverType,"error-field":Boolean(h[t]),"pallete-field":O.isPalleteField}),_type:O._type,onClick:function(e){M&&O.onSelect&&(e.stopPropagation(),t!==f.f.dumpField&&O.onSelect(t,O._type)),N&&(e.stopPropagation(),t!==f.f.dumpField&&x[u]&&v(u,{current:t,_type:O._type}))}}),!I&&b.hoverWidget&&"symbol"!==typeof t&&Number(t)>=0&&b.hoverWidget.index===O.index&&!1!==b.hoverWidget.visible&&b.hoverWidget.panelId===O.panelId&&o.a.createElement("div",{className:c()("hover-liner",{"dummy-widget":p.isDummy||0===t},b.hoverWidget.position)}),S&&o.a.createElement(S,Object.assign({id:t,isDragging:b.dragWidget===t,attrs:p,_type:O._type,errorList:h,canRemove:O.canRemove,draggable:p.type!==f.j.menubar},O)),L&&!b.dragWidget&&o.a.createElement("span",{onClick:function(e){O.onRemove&&(e.stopPropagation(),O.onRemove(O.panelId,O.index,t,O._type))},className:"widget-remove",title:"Remove Widget"},o.a.createElement("i",{className:"fa fa-remove"}))))))}var S=function(e){return o.a.createElement(k,Object.assign({},e,{connectDropTarget:function(e){return e},connectDragSource:function(e){return e}}))},E=Object(s.a)(Object(u.a)(w,T,(function(e,t){return{highlighted:!1,hovered:t.isOver(),connectDropTarget:e.dropTarget()}})),Object(d.a)(w,x,(function(e,t){return{connectDragSource:e.dragSource(),isDragging:t.isDragging()}})))(k),C=function(e){var t=Object(m.b)(),a=t.state,n="customField"===e._type?a.customFieldWidgets:a.widgets,r=n&&n[e.id]?n[e.id]:e.attrs||{},l=Object(i.a)(Object(i.a)({},t),{},{attrs:r}),c=r.type!==f.j.menubar;return e.design||c?o.a.createElement(E,Object.assign({},l,e)):o.a.createElement(S,Object.assign({},l,e))};t.default=o.a.memo(C)},62:function(e,t,a){"use strict";a.d(t,"a",(function(){return s})),a.d(t,"b",(function(){return u})),a.d(t,"c",(function(){return m}));var n=a(4),i=a(9),r=a(75),o=a(2),l=a(8);function c(e,t,a,n){for(var i=n.widgets,r=!1,o=0;o<e.length;o++){var l=e[o];if(l.name===(i[a]&&i[a].name)&&(l[t.attributes.name]=t.attributes.value,r=!0),r)break;if(l.items&&l.items.length){var s=c(l.items,t,a,n);if(s){r=s;break}}}return r}function s(e,t){var a;!function(){var a=["widgetAttrs","items","current","elements","tz","targetModel","_type"];Object(i.a)(e).forEach((function(i,r){if("insert"===i.name){var o=i.id,s=e.findIndex((function(e){return"replace"===e.name&&e.id===o&&!e.target})),u=e.findIndex((function(e){return e.id===o&&"insert"===e.name}));-1!==s&&(e.splice(s,1),e.splice(u,1))}"attribute"===i.name&&function(){var r=i.id;if(i.attributes&&l.e.isDefaultValue(i.attributes.name,i.attributes.value)){var o=e.findIndex((function(e){return e.id===r&&"attribute"===e.name&&e.attributes.name===i.attributes.name}));e.splice(o,1,Object(n.a)(Object(n.a)({},e[o]),{},{attributes:Object(n.a)(Object(n.a)({},e[o].attributes),{},{value:i.attributes.value})}))}if(i.attributes&&a.includes(i.attributes.name)){var s=e.findIndex((function(e){return e.id===r&&"attribute"===e.name&&a.includes(e.attributes.name)}));e.splice(s,1)}else for(var u=!1,d=0;d<t.extensionMoves.length;d++){var m=t.extensionMoves[d];if("insert"===m.name)for(var f=m.elements,p=0;p<f.length;p++){var b=f[p];if(b.name===(t.widgets[r]&&t.widgets[r].name)){t.extensionMoves[d].elements[p][i.attributes.name]=i.attributes.value,u=!0;break}if(b.items&&b.items.length)c(b.items,i,r,t)&&(u=!0)}if(u){var g=e.findIndex((function(e){return e.id===r&&"attribute"===e.name}));e.splice(g,1);break}}}()}))}(),(a=t.extensionMoves).push.apply(a,Object(i.a)(e))}function u(e,t){return e.map((function(e){var t;if("insert"===e.name&&(t=e.elements.map((function(e){if(e&&e.items&&e.items.length){var t=Object(n.a)({},e);return t.elements=function e(t){return t.map((function(t){var a=[];return t.items&&(a=e(t.items)),Object(r.c)(Object(n.a)(Object(n.a)({},t),{},{elements:a}),[],null,o.h.BASE)}))}(e.items),t}return e})).filter((function(e){return e}))),e.target)return Object(r.b)(Object(n.a)({target:e.target,position:e.position,source:e.source,type:e.name,widgetAttrs:t},e.attributes))})).filter((function(e){return e}))}function d(e,t,a,n){for(var i=n.widgets,r=!1,o=0;o<e.length;o++){var l=e[o];if(l.name===i[a].name&&(l.items?l.items.push(t):l.items=[t],r=!0),r)break;if(l.items&&l.items.length){var c=d(l.items,t,a,n);if(c){r=c;break}}}return r}function m(e,t,a,n){for(var i=[],r=!1,o=e.widgets,l=0;l<e.extensionMoves.length;l++){var c=e.extensionMoves[l];if("insert"===c.name)for(var s=c.elements,u=0;u<s.length;u++){var m=s[u];if(m.name===o[n].name&&m.items&&0===m.items.length){e.extensionMoves[l].elements[u].items.push(t),r=!0;break}if(m.items&&m.items.length)d(m.items,t,n,e)&&(r=!0)}if(r)break}return r&&t.xPath&&i.push({name:"replace",target:t.xPath}),i}},65:function(e,t,a){"use strict";a.d(t,"a",(function(){return o})),a.d(t,"c",(function(){return l})),a.d(t,"b",(function(){return c}));var n=a(9),i=a(51),r=a(2);function o(e,t){var a=arguments.length>2&&void 0!==arguments[2]&&arguments[2],o={},l="field"===e.serverType?e.type:e.serverType||e.type;l=l&&l.toLowerCase().replace(/_/g,"-");var c=i.a.find((function(e){return e.type===l}));if("form"===l&&(t===r.h.CUSTOM?c=i.a.find((function(e){return"modelForm"===e.type})):t===r.h.ENTITY&&(c=i.a.find((function(e){return"entityForm"===e.type})))),!a&&t===r.h.BASE&&[r.j.panel,r.j.panelStack,r.j.tabs,r.j.menu,r.j.menubar,r.j.toolbar].includes(l)&&e.items&&0===e.items.length){var s=l===r.j.menu?"Atleast one menu item required":"Atleast one children required";o.items=s}if(!c)return o;var u=Object.keys(c.value).reduce((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;return[].concat(Object(n.a)(e),Object(n.a)(c.value[t]))}),[]);return u.forEach((function(t){((t.requiredFor&&t.requiredFor.includes(l)&&!e[t.name]||t.required&&!e[t.name])&&(o[t.name]="".concat(t.name," required")),a&&t.regex)&&(new RegExp(t.regex).test(e[t.name])||o[t.name]||(o[t.name]=t.regexErrorMessage))})),o}function l(e,t){var a=e.widgets[t],n=e.errorList[t]||{};a&&(a.items&&a.items.length>0?n.items&&delete n.items:n.items="Atleast one children required",Object.keys(n).length?e.errorList[t]=n:delete e.errorList[t])}function c(e,t){e.errorList[t]&&delete e.errorList[t]}},74:function(e,t,a){"use strict";a.d(t,"b",(function(){return i})),a.d(t,"c",(function(){return r})),a.d(t,"a",(function(){return o}));var n=a(2),i=[{name:"Common",value:[{name:"label",title:"label",type:"label",image:"label.png",id:n.f.createWidgets.field,serverType:"label",colSpan:6},{name:"button",type:"button",title:"button",image:"button.png",id:n.f.createWidgets.field,serverType:"button",colSpan:6},{name:"separator",type:"separator",image:"seperator.png",id:n.f.createWidgets.field,serverType:"separator",colSpan:6},{name:"spacer",type:"spacer",serverType:"spacer",image:"line_spacing.png",id:n.f.createWidgets.field,colSpan:6},{name:"selection",title:"Selection",type:n.g.ITEM,image:"integer.png",id:n.f.createWidgets.field,serverType:"string",isSelectionField:!0,colSpan:6}]},{name:"Panels",value:[{name:"panel",type:n.g.CONTAINER,items:[],title:"Panel",image:"panel.png",id:n.f.createWidgets.panel,serverType:n.j.panel,cols:12,layout:"grid",colSpan:12},{name:"Tabs",type:n.j.tabs,image:"panel_tabs.png",tab:!0,items:[],id:n.f.createWidgets.tabs,serverType:n.j.panel,isNew:!0,colSpan:12,title:"Tabs",current:null,layout:"grid"}]}],r=[{name:"Fields",value:[{name:"string",type:n.g.ITEM,title:"String",image:"string.png",id:n.f.createWidgets.field,isModelField:!0,serverType:"string",colSpan:6},{name:"integer",type:n.g.ITEM,title:"Integer",image:"integer.png",id:n.f.createWidgets.field,isModelField:!0,serverType:"integer",colSpan:6},{name:"decimal",type:n.g.ITEM,title:"Decimal",image:"decimal.png",id:n.f.createWidgets.field,isModelField:!0,serverType:"decimal",colSpan:6},{name:"boolean",type:n.g.ITEM,title:"Boolean",image:"boolean.png",id:n.f.createWidgets.field,isModelField:!0,serverType:"boolean",colSpan:6},{name:"datetime",type:n.g.ITEM,title:"Date Time",image:"datetime.png",id:n.f.createWidgets.field,isModelField:!0,serverType:"datetime",colSpan:6},{name:"date",type:n.g.ITEM,title:"Date",image:"date.png",id:n.f.createWidgets.field,isModelField:!0,serverType:"date",colSpan:6},{name:"time",type:n.g.ITEM,title:"Time",image:"time.png",id:n.f.createWidgets.field,isModelField:!0,serverType:"time",colSpan:6}]},{name:"Relational Fields",value:[{name:"manyToOne",type:n.g.ITEM,title:"Many to one",image:"many-to-one.png",id:n.f.createWidgets.field,isModelField:!0,serverType:"many-to-one",colSpan:6},{name:"oneToMany",type:n.g.ITEM,title:"One to many",image:"one-to-many.png",id:n.f.createWidgets.field,isModelField:!0,serverType:"one-to-many",colSpan:6},{name:"manyToMany",type:n.g.ITEM,title:"Many to many",image:"many-to-many.png",id:n.f.createWidgets.field,isModelField:!0,serverType:"many-to-many",colSpan:6},{name:"oneToOne",type:n.g.ITEM,title:"One to one",image:"one-to-one.png",id:n.f.createWidgets.field,isModelField:!0,serverType:"one-to-one",colSpan:6,editorType:[n.h.BASE,n.h.ENTITY]}]}],o=[{name:"Fields",value:[{name:"string",type:n.l.string,image:"string.png",id:n.f.createWidgets.field,colSpan:12},{name:"boolean",type:n.l.boolean,image:"boolean.png",id:n.f.createWidgets.field,colSpan:12},{name:"long",type:n.l.long,image:"long.png",id:n.f.createWidgets.field,colSpan:12},{name:"integer",type:n.l.integer,image:"integer.png",id:n.f.createWidgets.field,colSpan:12},{name:"decimal",type:n.l.decimal,image:"decimal.png",id:n.f.createWidgets.field,colSpan:12},{name:"date",type:n.l.date,image:"date.png",id:n.f.createWidgets.field,colSpan:12},{name:"time",type:n.l.time,image:"time.png",id:n.f.createWidgets.field,colSpan:12},{name:"datetime",type:n.l.datetime,image:"datetime.png",id:n.f.createWidgets.field,colSpan:12},{name:"binary",type:n.l.binary,image:"binary.png",id:n.f.createWidgets.field,colSpan:12},{name:"manyToOne",type:n.l.manyToOne,image:"many-to-one.png",id:n.f.createWidgets.field,colSpan:12},{name:"manyToMany",type:n.l.manyToMany,image:"many-to-many.png",id:n.f.createWidgets.field,colSpan:12},{name:"oneToMany",type:n.l.oneToMany,image:"one-to-many.png",id:n.f.createWidgets.field,colSpan:12},{name:"oneToOne",type:n.l.oneToOne,image:"one-to-one.png",id:n.f.createWidgets.field,colSpan:12}]}]},75:function(e,t,a){"use strict";a.d(t,"b",(function(){return u})),a.d(t,"c",(function(){return d})),a.d(t,"a",(function(){return m}));var n=a(9),i=a(15),r=a(4),o=a(8),l=a(2),c=["items","cols","serverType","version","type","widgetAttrs","current","selectionList","autoTitle","isModelField","elements","relationship","isDummy","metaModel","targetSearch","layout","massUpdate","xPath","tz"];function s(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:l.h.BASE;return d(e,[],null,t)}function u(e){var t=e.target,a=e.type,n=e.position,r=e.source,o=e.name,l=e.value,c=e.widgetAttrs,u=(e.itemSource,Object(i.a)(e,["target","type","position","source","name","value","widgetAttrs","itemSource"]),{target:t}),d=[];if(c&&!["replace","attribute","move"].includes(a)&&(Array.isArray(c)?d=c.map((function(e){return s(e)})).filter((function(e){return e})):d.push(s(c))),d.length||["replace","attribute","move"].includes(a)){var m={attributes:u,type:"element",name:"extend",elements:[{type:"element",name:a,attributes:{position:n,source:r,name:o,value:l},elements:d}]};return JSON.parse(JSON.stringify(m))}}function d(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],a=arguments.length>3?arguments[3]:void 0,s=(e.id,e.image,e.elements),u=void 0===s?[]:s,d=Object(i.a)(e,["id","image","elements"]),m=["panel","panel-related","panel-dashlet","panel-tabs","panel-stack","panel-include","button","label","spacer","separator","menu","item","toolbar","menubar","divider"],f=[].concat(c),p=a===l.h.ENTITY?o.e.getEntityField(d.type):m.includes(d.type)?d.type:"field";p=m.includes(d.serverType)?d.serverType:p,p=e.tab?"panel-tabs":p,a===l.h.ENTITY&&(f=["colSpan"]),d.type===l.j.panelInclude&&(f=[].concat(Object(n.a)(f),["title","colSpan"])),p===l.j.tabs&&(f=[].concat(Object(n.a)(f),["tab","title"])),"spacer"===p&&(f=[].concat(Object(n.a)(f),["title","isDummy"])),p===l.j.panelInclude&&(f=[].concat(Object(n.a)(f),["module","name"])),[l.j.menu,l.j.menuItem,l.j.toolbar,l.j.menubar].includes(p)&&(f=[].concat(Object(n.a)(f),["colSpan"])),[l.j.toolbar,l.j.menubar].includes(p)&&(f=[].concat(Object(n.a)(f),["colSpan","name","title"])),[l.j.divider].includes(p)&&(f=[].concat(Object(n.a)(f),["colSpan","title"]));return{attributes:Object(r.a)({},o.e.getWidgetAttrs(d,f,a)),type:"element",name:p,elements:[].concat(Object(n.a)(t),Object(n.a)(u))}}function m(e,t,a){var n={},i=[];return t.length&&t.forEach((function(t){var o=e[t],l=[];o&&(o.items&&o.items.length&&(l=m(e,o.items,a)),i.push(Object(r.a)({},d(o,l,n,a))))})),i}},8:function(e,t,a){"use strict";a.d(t,"b",(function(){return y})),a.d(t,"n",(function(){return h})),a.d(t,"d",(function(){return x})),a.d(t,"a",(function(){return T})),a.d(t,"m",(function(){return k})),a.d(t,"k",(function(){return S})),a.d(t,"l",(function(){return E})),a.d(t,"c",(function(){return C})),a.d(t,"h",(function(){return L})),a.d(t,"f",(function(){return W})),a.d(t,"i",(function(){return D})),a.d(t,"j",(function(){return R})),a.d(t,"g",(function(){return Q}));var n=a(26),i=a(9),r=a(4),o=a(15),l=a(44),c=a.n(l),s=a(2),u=a(74),d=a(41),m=a.n(d),f=a(65),p=a(144),b=a.n(p),g=a(33),v=a(62);function y(e){return e&&e.replace(/([A-Z])/g," $1").replace(/^./,(function(e){return e.toUpperCase()}))}function h(e){return window._t&&"string"===typeof e?window._t(e):e}var O=function(e){var t=e.widget,a=e.id,n=Object(o.a)(e,["widget","id"]);return Object(r.a)({colSpan:t.colSpan||1,serverType:s.d.spacer,type:s.j.field,isDummy:!0,name:"spacer".concat(a),title:"Spacer"},n)},j=function(e,t){var a=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=a?e.customFieldWidgets:e.widgets;return!0===t||n[t]&&n[t].isDummy},w=function(e,t,a){var n=t.cols,i=void 0===n?12:n,r=t.items,o=arguments.length>3&&void 0!==arguments[3]&&arguments[3],l=o?e.customFieldWidgets:e.widgets,c=[],s=0,u=0,d=[],m=function(e){for(var t=e;t<i;t++)d.push({index:t,item:!0,colSpan:1,indices:[t]})};return r.forEach((function(e){var t=Number(l[e].colSpan||1);(u+=t)>i&&(m(s),s=0,u=t,c.push(d),d=[]),a&&a(e,{column:s,row:c.length}),d.push({index:s,item:e,colSpan:t,indices:new Array(t).fill(0).map((function(e,t){return s+t}))}),s+=t})),m(s),c.push(d),c},x=function(e,t,a){var n=[],i="customField"===a,r=i?e.customFieldWidgets:e.widgets,o=r[t];if(o.layout!==s.i.grid)return{};var l=o.cols,c=void 0===l?12:l,u=o.items,d=w(e,{cols:c,items:u},null,i),m=[],f={};return d.forEach((function(t){t.forEach((function(t,a){if(j(e,t.item,i)){var n=f[t.index]||[];n.push(t),f[t.index]=n}})),t.every((function(t){return j(e,t.item,i)}))&&(m=m.concat(t.map((function(e){return e.item}))))})),m.length&&(o.items=o.items.filter((function(e){return-1===m.indexOf(e)})),m.forEach((function(t){r[t]&&(S(e)&&n.push({name:"replace",target:r[t].xPath,id:t}),r[t]&&delete r[t])}))),{extendList:n}},T=function(e,t,a){var n=t.id,o=t.index,l=t.panelId,u=[],d="customField"===a,m=d?e.customFieldWidgets:e.widgets,f=m[l],p=m[n]||{colSpan:1},b=f.cols,g=void 0===b?12:b,v=f.items,y=f.items[f.items.length-1]===n,h={column:null,row:null},x=[],T=[],k=[],E=w(e,{cols:g,items:v},(function(e,t){e===n&&(h=t)}),d);E.forEach((function(e,t){h.row===t&&(T=e.map((function(e){return e.item})));var a=e.find((function(e){return e.index===h.column}));a&&k.push(a.item)}));var C=f.items.splice(o,1),M=function(t){return t===n||j(e,t,d)};if(T.every(M)&&(f.items=f.items.filter((function(e){return!T.includes(e)})),x=x.concat(T)),E.length-1===k.length&&k.every(M)&&(f.items=f.items.filter((function(e){return!k.includes(e)})),x=x.concat(k)),0===x.length&&!m[C].isDummy&&!y){var F=c.a.uniqueId(),N={};e.modelType===s.h.CUSTOM&&(N={model:p.model,modelField:p.modelField}),m[F]=O(Object(r.a)({widget:{},id:F,colSpan:p.colSpan},N));var I=m[f.items[o]];S(e)&&u.push({name:"insert",position:"before",elements:[m[F]],target:I.xPath}),f.items.splice(o,0,F)}return{ids:[].concat(Object(i.a)(x),[n]),extendList:u}},k=function(e,t,a,n){var i=Object(f.a)(e,t.modelType,n);Object.keys(i).length?t.errorList[a]=i:t.errorList[a]&&delete t.errorList[a]};function S(e){return e.exView&&!_(e.exView)}var E=function(e){var t=e.hoverWidget,a=e.dragWidgetProps;return function(e){var n,i=[],o="customField"===t._type,l="customField"!==t._type||a.panelId?"items":"customFieldItems",u="customField"!==t._type||t.panelId?"items":"customFieldItems",d="customField"===t._type?e.customFieldWidgets:e.widgets,m=((t.panelId?d[t.panelId]:e)[u]||[]).slice(),f=t.meta,p=f.colSpan,b=f.grid,y=void 0===b?[]:b,h=f.row,j=f.relatedColSpan;a.attrs&&void 0!==a.attrs.isNew&&delete a.attrs.isNew;var w=d[t.panelId],x=null===w||void 0===w?void 0:w.serverType;if(a.attrs&&!a.attrs.colSpan)if(p&&a.attrs&&![s.j.menu,s.j.menuItem,s.j.divider].includes(a.attrs.type)&&![s.j.toolbar,s.j.menubar].includes(x)){var T=a.attrs.colSpan;if(x===s.j.panel&&Number(w.itemSpan)?a.attrs.colSpan=Number(w.itemSpan):a.attrs.colSpan=j||p,o){var E={colSpan:j||p};a.attrs.widgetAttrs=JSON.stringify(E)}if("".concat(a.attrs.colSpan)!=="".concat(T)){if(e.modelType===s.h.CUSTOM){var C=JSON.parse(a.attrs.widgetAttrs||"{}");C.colSpan=j||p,a.attrs.widgetAttrs=JSON.stringify(C)}S(e)&&i.push({name:"attribute",target:a.attrs.xPath,attributes:{name:"colSpan",value:a.attrs.colSpan}})}if(e.modelType===s.h.CUSTOM){var M=JSON.parse(a.attrs.widgetAttrs||"{}");M.colSpan=6,a.attrs.widgetAttrs=JSON.stringify(M)}}else if(a.attrs&&e.modelType===s.h.CUSTOM){var F=JSON.parse(a.attrs.widgetAttrs||"{}");F.colSpan=j||p,a.attrs.colSpan=j||p,a.attrs.widgetAttrs=JSON.stringify(F)}var N=[],I=function(e){var t=e.grid,a=e.items,n=e.widgetIndex,i=e.hoverCellRowIndex,o=[],l=[],c=!0,s=0;if(t.length&&(t.forEach((function(e,t){e.colSpan=Number(e.colSpan||1),e.id&&c&&t<n&&(s=a.indexOf(e.id)+1),!e.separator&&e.rowIndex<=i&&(t<n?e.id?(o=[],s=a.indexOf(e.id)+1):a.length&&o.push(Object(r.a)(Object(r.a)({},e),{},{colSpan:e.colSpan||6,isSpacer:!0})):c&&t>n&&(e.id?(s=a.indexOf(e.id),c=!1):a.length&&l.push(Object(r.a)(Object(r.a)({},e),{},{isSpacer:!0}))))})),a.length)){var u=a[a.length-1],d=t.findIndex((function(e){return"".concat(e.id)==="".concat(u)}));n>d&&-1!==d&&(l=[],s=a.length+1)}return{afterWidgets:l,beforeWidgets:o,itemIndex:s}}({grid:y,items:m,widgetIndex:Number(t.index),hoverCellRowIndex:h}),L=I.beforeWidgets,W=I.afterWidgets,A=I.itemIndex,V=void 0===A?0:A,B=!1;if(a.id&&d[a.id]){var q=a.panelId?d[a.panelId]:e,P=q[l],_=P.indexOf(a.id);if([s.i.grid].includes(q.layout)){var U=c.a.uniqueId(),D=P[P.length-1]===a.id,R=!1;a.panelId===t.panelId&&a.index<t.index&&(R=!0);var J=a.panelId?d[a.panelId]:null,z=!1;if(J&&[s.j.tabs,s.j.panelStack].includes(J.type)&&(z=!0),D&&!R||z||[s.j.menubar,s.j.toolbar].includes(x))P.splice(_,1);else{var X={colSpan:d[a.id].colSpan||1,serverType:s.d.spacer,type:s.j.field,isDummy:!0,name:"spacer".concat(U),title:"Spacer"};e.modelType===s.h.CUSTOM&&(X.model=a.attrs.model,X.modelField=a.attrs.modelField,X.widgetAttrs=JSON.stringify({colSpan:X.colSpan})),o&&(X.widgetAttrs=JSON.stringify({colSpan:X.colSpan})),d[U]=Object.assign({},X),S(e)&&i.push({name:"insert",position:"before",target:a.attrs.xPath,elements:[X],id:U}),P.splice(_,1,U)}}else a.panelId===t.panelId&&a.index<t.index&&(B=!0,V--),P.splice(_,1)}if(t.attrs.isDummy){var H=!a.id||Object.values(s.f.createWidgets).indexOf(a.id)>-1,K=H?c.a.uniqueId():a.id,Q=Object.assign({},a.attrs||{});return H&&!1!==Q.isCoreField&&Q.name&&(Q.name="".concat(Q.name).concat(K)),k(Q,e,K,o),H?(d[K]=Object.assign({},Q),S(e)&&i.push({name:"insert",position:"before",target:t.attrs.xPath,elements:[Q],id:K})):(S(e)&&i.push({name:"move",source:a.attrs.xPath,position:"before",target:t.attrs.xPath}),d[a.id]=Object.assign(Object(r.a)({},d[a.id]),Q)),(t.panelId?d[t.panelId]:e)[u].splice(m.indexOf(t.id)-(B?1:0),1,K),S(e)&&i.push({name:"replace",target:t.attrs.xPath}),{extendList:i}}if(t.meta&&t.meta.horizontal){var G=Number(t.index);a.panelId===t.panelId&&a.index<t.index&&(G-=2),V=Math.ceil(Number(G/2))}((t.panelId?d[t.panelId]:e).layout||s.i.flow)===s.i.flow&&(L=[],W=[]);var $,Z=[],ee=(t.panelId?d[t.panelId]:e)[u]||[],te=ee[V],ae=d[ee[V]],ne="before";!ae&&ee.length<=V&&(te=ee[ee.length-1],ae=d[ee[ee.length-1]],ne="after"),ae&&"true"==="".concat(ae.sidebar)&&(a.attrs.sidebar="true",S(e)&&i.push({name:"attribute",target:a.attrs.xPath,attributes:{name:"sidebar",value:"true"}})),ae&&($=ae.xPath||Object(g.a)(d,e[u],te));var ie=function(t,a){var n=Y(a.xPath),i=e.extensionMoves.filter((function(e){if(e.target){var t=Y(e.target);if("replace"===e.name){if(n.self)return t.parent.indexOf(n.self)>=0;if(t.parent.indexOf(n.parent)>=0)return!0}}return!1}));return!(![s.j.menu,s.d.button,s.j.menuItem].includes(t.attrs.type)||![s.j.menubar,s.j.toolbar,s.j.menu].includes(a.type)||0!==a.items.length||i.length)},re=[];return L.concat([a]).concat(W).forEach((function(n){var i=Object.assign({},n.attrs||{}),l=n.id,u="symbol"===typeof l,m=!l||u,f=!0;if([s.j.menubar,s.j.toolbar].includes(x)&&n.isSpacer&&(f=!1),f){if(m&&(l=c.a.uniqueId(),!1!==i.isCoreField&&(i&&Object.keys(i).length&&k(i,e,l,o),i.name&&(i.name="".concat(i.name).concat(l))),u&&(e.editWidget=l)),n.isSpacer&&n.isSpacer){var p=a.attrs||{};i=O({widget:n,id:l,model:p.model,modelField:p.modelField,widgetAttrs:JSON.stringify({colSpan:n.colSpan||6})})}if(m){if(S(e)&&!o)if(ae)S(e)&&re["after"===ne?"unshift":"push"]({name:"insert",position:ne,target:$,elements:[i],id:l});else{var b=d[t.panelId];ie(a,b)?Object(v.c)(e,i,l,t.panelId):re["after"===ne?"unshift":"push"]({name:"insert",position:"inside",target:b.xPath,elements:[i],id:l})}Z.push(l),d[l]=Object.assign({},i)}else{if(S(e)&&!o)if(ae)S(e)&&re["after"===ne?"unshift":"push"]({name:"move",source:a.attrs.xPath,position:ne,target:$});else{var g=d[t.panelId];ie(a,g)?Object(v.c)(e,a.attrs,a.id,t.panelId):S(e)&&re["after"===ne?"unshift":"push"]({name:"move",source:a.attrs.xPath,position:"inside",target:g.xPath})}d[a.id]=Object.assign(Object(r.a)({},d[a.id]),i)}N.push(l)}})),i.push.apply(i,re),(n=(t.panelId?d[t.panelId]:e)[u]||[]).splice.apply(n,[V,0].concat(N)),{extendList:i}}},C=function(e,t,a){if(e[t.id]&&(e[t.panelId]&&e[t.panelId].exclusive&&a.panelId!==t.panelId))return!0;if(e[a.id]&&(e[a.panelId]&&e[a.panelId].exclusive&&t.panelId!==a.panelId))return!0;return!1},M=function(e,t){return e||t},F=function(e){var t=e.type,a=e.widgetAttrs;if(t===s.j.panel&&a&&"true"===JSON.parse(a).tab)return!0;return!1},N=function(e){var t=JSON.parse(e.widgetAttrs||"{}"),a=e.type===s.j.panel?12:6;return t.colSpan||a},I=function(e){return[s.j.panel,s.j.tabs].includes(e.type)?{cols:12}:{}},L=function(e){return e?{menuBuilderTitle:e.title,menuBuilderParent:e.parentMenu}:{}},W=function(){var e,t,a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],o=arguments.length>1?arguments[1]:void 0,l=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",u=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"form",d=!1,m={},f=[],p=[];if(a.forEach((function(e){var a=c.a.uniqueId(),n=F(e);if([s.j.panel,s.j.tabs].includes(e.type))d=!0,t=a,e.items=[],e.layout="grid";else if(!d){var o=m[t];o?(o.items.push(a),m[t]=Object(r.a)(Object(r.a)({},m[t]),{},{items:Object(i.a)(o.items)})):d=!0}d&&(d=!1,n?p.push(a):f.push(a)),e.selectionText&&e.selectionText.length&&(e.updateSelection=!0),m[a]=Object(r.a)(Object(r.a)(Object(r.a)({},e),{},{colSpan:N(e)},I(e)),{},{type:"".concat(e.type).concat(l)})})),p.length){var b=c.a.uniqueId(),g={items:[].concat(p),type:s.j.tabs,title:"Tab Panel"};f.push(b),m[b]=Object(r.a)({},g)}var v="customForm"===u?s.f.customForm:s.f.form,y={widgets:Object(r.a)((e={},Object(n.a)(e,v,Object(r.a)(Object(r.a)({type:u,cols:12},o),L(o?o.menuBuilder:void 0))),Object(n.a)(e,s.f.dumpField,{type:s.j.dumpField,name:""}),e),m),items:[].concat(f)};return y};var A=function(e,t){if(t===s.h.BASE){["formView","gridView","minSize","maxSize"].includes(e={targetModel:"target",minSize:"min",maxSize:"max"}[e]||e)&&(e=J(e)),["bind"].includes(e)&&(e="x-".concat(J(e)))}return e},V=function(e,t){var a={targetModel:"target",minSize:"min",maxSize:"max"};if(t===s.h.BASE){var n=Object.values(a).findIndex((function(t){return t===e}));-1!==n&&(e=Object.keys(a)[n])}return e};function B(e){var t=[];return u.c.forEach((function(e){var a=e.value,n=(void 0===a?[]:a).map((function(e){return e.serverType}));t.push.apply(t,Object(i.a)(n))})),"field"===e.serverType&&t.includes(e.type)}function q(e,t){return e&&["title","text"].includes(t)&&(e=e.replace(/</g,"&lt;")),e}var P=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],a={},n=["image","serverType","isModelField","isCoreField","current"].concat(Object(i.a)(t));return Object.keys(e).forEach((function(t){n.includes(t)||("type"===t&&["item","field"].includes(e[t])?a[t]=e.serverType:a[t]=""===e[t]?null:e[t])})),a},_=function(e){var t=e.xmlId,a=void 0===t?null:t,n=e.extension;if(a&&!n&&0===a.indexOf("studio-"))return!0;return!1},U=function(e,t){var a=s.a[e];return void 0!==a&&"".concat(a)==="".concat(t)},D=function(e,t,a,i){var o=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],l=Object(n.a)({},e,t);if(o){var c="string"===typeof i?JSON.parse(i):i||{};if(a&&![void 0,"",null].includes(t)){if(U(e,t))return delete c[e],Object(n.a)({},a,JSON.stringify(Object(r.a)({},c)));var s=Object(n.a)({},e,"".concat(t));return Object(n.a)({},a,JSON.stringify(Object(r.a)(Object(r.a)({},c),s)))}if(a&&(!t||""===t))return delete c[e],Object(n.a)({},a,JSON.stringify(Object(r.a)({},c)))}return"showTitle"===e&&!0===t?{showTitle:void 0}:l},R=function(e,t,a,n){var i=!(arguments.length>4&&void 0!==arguments[4])||arguments[4];if(i&&a){if(e[a]){var r=JSON.parse(e[a]);return[void 0,null].includes(r[t])?n:r[t]}return n||null}return[void 0,null].includes(e[t])?n:e[t]},J=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"-";return e.replace(/[A-Z]/g,(function(e){return t+e.toLowerCase()}))},z=function(e){return e.replace(/-([a-z])/g,(function(e){return e[1].toUpperCase()}))},X=function(e,t){var a=s.a[e];return!(![!0,!1].includes(a)||"".concat(t)!=="".concat(a))},Y=function(e){var t=e.split("/"),a=t.length,n=a>3?t[a-2]:t[a-1],i=a>3?t[a-1]:void 0;return{parent:n,self:i}},H=function(e){var t,a=e.view,l=e.fields,u=(e.original,e.extensionXML,e.attrsList),d=a.elements,m=function(e,t,a,n){var i,l={};if(e){var c,u,d=e.attributes||{},m=d.type,f=Object(o.a)(d,["type"]);-1===e.name.indexOf("panel")&&(i=t.find((function(e){return e.name===f.name})));var p={};Object.keys(f).map((function(e){var t=e;0===e.indexOf("x-")&&(t=e.substring(2)),p[V(z(t),s.h.BASE)]=f[e]}));var b=M((null===(c=i)||void 0===c?void 0:c.target)||(null===(u=i)||void 0===u?void 0:u.targetModel),f.target);l=Object(r.a)(Object(r.a)(Object(r.a)(Object(r.a)({},p),{},{colSpan:Number(f.colSpan||6)},function(e,t,a,n){return{name:e.name}}(f,0,0,e.name)),function(e,t,a){var n,i;return t?(n=t.type.toLowerCase(),i=e):(n=e,i=a||("field"===e?void 0:e)),{serverType:s.o[n]||n,type:s.o[i]||i}}(e.name,i,m)),function(e,t){return e.title?{title:e.title}:(null===t||void 0===t?void 0:t.label)?{autoTitle:t.label}:e.name?{autoTitle:J(e.name," ")}:{}}(f,i)),b&&(l.targetModel=b),e.name&&(e.name.indexOf(s.j.panel)>=0||[s.j.menubar,s.j.toolbar].includes(e.name))&&(l.colSpan=Number(f.colSpan||12),l.cols=12,l.layout="grid",l.serverType="panel"===l.type&&!0===l.tab?s.j.tabs:l.serverType||l.type)}return{widget:l,field:i}},f=function(e){return e.name},p=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],a=arguments.length>1?arguments[1]:void 0,n=["panel-mail"],o={},l=[],d=[];return t.forEach((function(t){if(!n.includes(t.name)&&"cdata"!==t.type){var p=c.a.uniqueId(),b=m(t,a),g=b.widget,v=b.field;if(v&&d.push(v),l.push(p),t.name&&t.name.indexOf(s.j.panel)>=0&&(g.items=[]),t.elements&&"field"!==t.name){var y=e(t.elements,a,t.attributes);o=Object(r.a)(Object(r.a)({},o),y._widgets),g.items=Object(i.a)(y.itemList),d.push.apply(d,Object(i.a)(y.fieldList))}if(t.elements&&"field"===t.name){var h=f(t.elements[0]);h&&(g.type=h,g.elements=t.elements)}if(g.name)(u||[]).filter((function(e){return e.field===g.name})).forEach((function(e){["selection-in"].includes(e.name)?g[e.name]=e.value:g[V(z(e.name),s.h.BASE)]=e.value}));o[p]=Object(r.a)({},g)}})),{_widgets:o,itemList:l,fieldList:d}}(d,l),b=p.itemList,g=p._widgets,v=p.fieldList,y=g[b[0]],h=y.items||[];return delete g[b[0]],{widgets:Object(r.a)((t={},Object(n.a)(t,s.f.form,Object(r.a)(Object(r.a)({type:s.j.form,cols:12},y),{},{items:void 0})),Object(n.a)(t,s.f.dumpField,{type:s.j.dumpField,name:""}),t),g),items:h,fieldList:v}},K=function(e){return JSON.parse(m.a.xml2json(e,{compact:!1,fullTagEmptyElement:!1})).elements[0].elements};var Q=function(e){var t=e.name,a=e.fieldName,n=function(e){for(var t="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ",a="",n=e;n>0;--n)a+=t[Math.floor(Math.random()*t.length)];return a}(6);return"studio:".concat(n,":").concat(a,":").concat(t)};t.e={camleCaseString:y,translate:h,processXML:function(e,t){return b()(e)},getWidgetAttrs:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],a=arguments.length>2?arguments[2]:void 0,n={},r=["version","type","typeName","label","items","serverType","layout","cols","isCoreField","isModelField","relationship","current","autoTitle","metaModel","targetSearch","editorType","appBuilder"].concat(Object(i.a)(t));if("field"!==e.serverType&&r.push("targetModel","targetName","target"),Object.keys(e).forEach((function(t){if(!r.includes(t)&&""!==e[t]){var i=!0;a!==s.h.ENTITY||e[t]||(i=!1),a===s.h.BASE&&X(t,e[t])&&(i=!1),i&&("dummyType"===t?n.type=e[t]:n[A(t,a)]=q(e[t],t))}})),e.type===s.j.panelInclude&&"object"===typeof e.view&&(n.view=e.view.name),(e.isModelField||B(e))&&(n.type=e.type),e.type===s.j.panelRelated&&(n.name=e.field),n.name){var o=n.name.indexOf("[");-1!==o&&(n.name=n.name.substring(0,o))}return n},getCustomModelFields:function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],a=arguments.length>1?arguments[1]:void 0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=arguments.length>3&&void 0!==arguments[3]&&arguments[3],l=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,c=[];return t.forEach((function(t){var u=Object(r.a)({},a[t]),d=[];if(!["dump_field","form"].includes(u.type)&&(u.type!==s.j.tabs&&("symbol"===typeof u.id&&delete u.id,!1!==u.showTitle&&delete u.showTitle,o&&(u.sequence=l,l++),"spacer"===u.serverType&&d.push("title"),c.push(Object(r.a)(Object(r.a)({},P(u,d)),n))),u.items&&u.items.length)){var m=e(u.items,a,n,o,l);c.push.apply(c,Object(i.a)(m.fields)),l=m.sequence}})),{fields:c,sequence:l}},isCreatedFromStudio:_,getFormProperties:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],a=["type","cols","items"].concat(Object(i.a)(t)),n={};return Object.keys(e).forEach((function(t){a.includes(t)||""===e[t]||(n[t]=e[t])})),n},getEntityField:function(e){var t=e.indexOf("Entity"),a=-1===t?e:e.substring(0,t);return a={localdatetime:"datetime",localdate:"date"}[a]||a},getDefaultProperties:function(e,t,a){switch(e){case s.h.CUSTOM:return{formWidth:"large"};case s.h.BASE:var n={width:"large"};return t===s.c.ENTITY&&(n.model="".concat(a.packageName,".").concat(a.name)),n;default:return{}}},getPatchList:function(e){if(e){var t=e.elements,a=void 0===t?[]:t;if(a[0])return a[0].elements||[]}return[]},keyReplacer:A,valueConverter:q,filterFormPatch:function(e){return e.filter((function(e){return"/"===e.attributes.target}))},getCurrentFormAttributes:function(e){var t=e.elements;return(void 0===t?[]:t)[0].attributes||{}},mergeFormAttributes:function(e,t){var a=e.findIndex((function(e){return"/"===e.attributes.target})),n=-1===a?0:a,i=-1===a?0:1;return Object.keys(t).length?e.splice(n,i,Object(r.a)({},t)):-1!==a&&e.splice(a,1),e},camelToDashCase:J,dashToCamelCase:z,isSamePositionInOriginal:function e(t,a,n,i){var r=n.attrs||n||{},o=!1;return(t||[]).forEach((function(t){if(t.elements){if(t.attributes&&a&&t.attributes.name===a.name){var l=t.elements[i];l&&l.attributes&&r&&l.attributes.name===r.name&&(o=!0)}if(!o&&t.elements&&t.elements.length)!0===e(t.elements,a,n,i)&&(o=!0)}})),o},getWidgetType:function(e,t){var a=e.isModelField||!1===e.isCoreField||"field"===e.serverType?"field":e.type?e.type.toLowerCase():t;return a=["spacer","label","button"].includes(e.serverType)?e.serverType:a},isDefaultValue:X,getReferenceProperty:function(e){return Object(n.a)({},s.j.panelInclude,"view")[e]||"name"},generateEntityModelSchema:function(e,t){var a,l=JSON.parse(m.a.xml2json(e,{compact:!1,fullTagEmptyElement:!1})).elements[0],u=l.elements,d=void 0===u?[]:u,f=Object(o.a)(l,["elements"]),p=function(e){var t=[],a=[];return e.forEach((function(e){var n=c.a.uniqueId();t[n]=Object(r.a)(Object(r.a)({},e.attributes),{},{type:"".concat(e.name,"Entity")}),a.push(n)})),{widgets:t,itemList:a}}(d),b=p.itemList,g=p.widgets;return{widgets:Object(r.a)((a={},Object(n.a)(a,s.f.form,Object(r.a)(Object(r.a)({type:s.j.form,cols:12},f.attributes),{},{packageName:t.packageName})),Object(n.a)(a,s.f.dumpField,{type:s.j.dumpField,name:""}),a),g),items:Object(i.a)(b)}},getEntityModelFields:function(e){var t=JSON.parse(m.a.xml2json(e,{compact:!1,fullTagEmptyElement:!1})).elements[0].elements;return(void 0===t?[]:t).map((function(e){return{type:e.name,name:e.attributes.name,tz:e.attributes.tz}}))},getEntityModel:function(e){return"".concat(e.packageName,".").concat(e.name)},getEntityViewItems:function e(t){var a=[];return t.forEach((function(t){if("field"===t.type&&a.push(t.name),t.items){var n=e(t.items);a.push.apply(a,Object(i.a)(n))}})),a},checkTarget:function(e,t,a){var n=e.split("/");return a?n[a]===t:e===t},exploreTarget:Y,getViews:function(e,t){var a=e.find((function(e){return!0===e.computed})),n=e.find((function(e){return!0!==e.computed&&!0!==e.extension}));return{view:a||n,originalXML:n,extensionXML:e.find((function(e){return!0===e.extension&&e.xmlId==="studio-".concat(t)}))}},generateXMLToViewSchema:function(e){var t=e.view,a=e.fields,n=e.original,i=void 0!==n&&n,r=e.extensionXML,o=e.attrsList,l=JSON.parse(m.a.xml2json(t.xml,{compact:!1,fullTagEmptyElement:!1})).elements;return H({view:{elements:l},fields:a,original:i,extensionXML:r,attrsList:o})},generateViewFromJson:H,getChangeList:function(e,t){var a=[],n=e.widgets,i=K(t),r=Object.values(n),o=Object.keys(n);return i.forEach((function(e){var t=e.elements,n=(void 0===t?[]:t)[0];if(n&&n.attributes&&"move"===n.name){var i=Y(n.attributes.source);if(i.self){var l=i.self?r.findIndex((function(e){return"".concat(e.type,"[@name='").concat(e.name,"']")===i.self})):r.findIndex((function(e){return"".concat(e.type,"[@name='").concat(e.name,"']")===i.parent}));o[l]&&a.push(o[l])}}})),a}}},85:function(e,t,a){"use strict";var n=a(15),i=a(0),r=a.n(i),o=a(47),l=a(2);t.a=function(e){e.attrs;var t=e.items,a=void 0===t?[]:t,i=e.design,c=e.widgets,s=Object(n.a)(e,["attrs","items","design","widgets"]),u=r.a.useMemo((function(){var e=a.filter((function(e){return c[e]&&["true",!0].includes(c[e].sidebar)})),t=a.filter((function(e){return c[e]&&!["true",!0].includes(c[e].sidebar)}));return e.length>0?{items:[{layout:l.i.grid,items:t,colSpan:9},{layout:l.i.grid,items:e,colSpan:3}]}:{items:[{layout:l.i.grid,items:t,colSpan:12}]}}),[a,c]);return r.a.createElement("div",{className:"flex-container"},u.items.map((function(e,t){var a=e.items,l=e.colSpan,u=Object(n.a)(e,["items","colSpan"]);return r.a.createElement("div",{className:"flex-item span-".concat(l),key:t},r.a.createElement(o.b,{key:t,design:i,className:"form-body",items:a,attrs:u,_type:s._type,widgets:c,errorList:s.errorList,canRemove:s.canRemove}))})))}},86:function(e,t,a){"use strict";var n=a(15),i=a(0),r=a.n(i),o=a(25),l=a.n(o),c=a(2),s=a(13),u=a.n(s),d=a(20),m=a(21),f=new(a(23).a)({model:"com.axelor.meta.db.MetaView"});var p=function(e){var t=e.attrs,a=e.id,n=t.gridView,o=t.targetModel,l=t.title,c=t.autoTitle,s=t.action,p=r.a.useState([]),b=Object(m.a)(p,2),g=b[0],v=b[1];return Object(i.useEffect)((function(){function e(){return(e=Object(d.a)(u.a.mark((function e(){var t,a,i,r,l;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=n,!s){e.next=8;break}return a={action:s,model:"com.axelor.meta.db.MetaAction",data:{context:{_id:null}}},e.next=6,f.action(a);case 6:(i=e.sent).data&&i.data[0]&&i.data[0].view&&i.data[0].view.views&&(r=i.data[0].view.views.find((function(e){return"grid"===e.type})))&&(t=r.name);case 8:l={model:o,data:{type:"grid",name:t}},t?f.view(l).then((function(e){if(e.data&&e.data.view){var t=e.data.view.items;v(t)}})):v([]);case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[n,o,a,s]),r.a.createElement("div",null,r.a.createElement("div",{className:"one-to-many-header"},r.a.createElement("span",null,l||c),r.a.createElement("div",null,r.a.createElement("span",null,"New"))),r.a.createElement("div",{className:"one-to-many-row"},g.map((function(e,t){return r.a.createElement("span",{className:"one-to-many-col one-to-many-col-border",key:t},e.autoTitle)}))))},b=function(e){return r.a.createElement("input",Object.assign({type:"text",autoComplete:"off"},e,{className:"text-input"}))},g=function(e){return r.a.createElement("textarea",Object.assign({rows:6},e))},v=function(e){return r.a.createElement("div",{className:"spacer"})},y=function(e){return r.a.createElement("div",{className:"spacer"},r.a.createElement("hr",{className:"separator-field"}))},h=function(e){var t=e.inputProps,a=Object(n.a)(e,["inputProps"]);return r.a.createElement("div",{className:"boolean-wrapper"},r.a.createElement("input",Object.assign({},t,{type:"checkbox"})),r.a.createElement("span",{className:"boolean-text",title:a.title||a.name},a.title||a.name))},O=function(e){var t=e.title,a=Object(n.a)(e,["title"]);return r.a.createElement("div",{className:"button-container"},r.a.createElement("button",Object.assign({},a,{className:"button-view",title:t}),t))},j=function(e){var t=e.title;Object(n.a)(e,["title"]);return r.a.createElement("div",{className:"menu-item-container"},t)},w=function(e){var t=e.color,a=e.background,n=e.strong;return r.a.createElement("div",{className:l()("hilite hilite hilite-background-".concat(a," hilite-text-").concat(t),{"hilite-strong":n})},"hilite")};t.a=function(e){var t=e.id,a=e.attrs;if(t===c.f.dumpField)return r.a.createElement("div",{className:"dump-field"});var n,i=a.name,o=a.title,l=a.serverType,s=a.multiline,u=a.type,d=a.autoTitle,m=(n=a,["name","title","defaultValue","placeholder","readOnly","checked","disabled","rows","required"].reduce((function(e,t){return void 0!==n[t]&&(e[t]=n[t]),"required"===t&&(e[t]="true"===n[t]),e}),{})),f=l&&"field"!==l?l.toLowerCase():u;switch(null===f||void 0===f?void 0:f.toLowerCase()){case c.d.boolean:return r.a.createElement(h,{title:o||d,name:i,inputProps:m});case c.d.spacer:return r.a.createElement(v,null);case c.d.hilite:return r.a.createElement(w,a);case c.d.separator:case c.j.divider:return r.a.createElement(y,null);case c.j.menuItem:return r.a.createElement(j,{title:o});case c.d.button:return r.a.createElement(O,Object.assign({},m,{title:o||i}));case"selection":case"label":return r.a.createElement("span",{dangerouslySetInnerHTML:{__html:o}});case"panel-dashlet":case"panel-related":case"one-to-many":return r.a.createElement(p,{attrs:a,id:t});default:return r.a.createElement(r.a.Fragment,null,r.a.createElement("label",{className:"widget label",title:o||a.autoTitle||i},o||a.autoTitle||i),s?r.a.createElement(g,m):"Image"===a.widget?r.a.createElement("img",{alt:o||a.autoTitle||i,src:"./images/not_found.png",className:"image-widget"}):r.a.createElement(b,Object.assign({type:l===c.d.number?"number":"text"},m)))}}},94:function(e,t,a){"use strict";var n=a(9),i=a(15),r=a(0),o=a.n(r),l=a(25),c=a.n(l),s=a(47),u={cols:1};t.a=function(e){var t=Object(s.c)(),a=(e.id,e.attrs),r=(e.isDragging,e.isTab),l=void 0!==r&&r,d=Object(i.a)(e,["id","attrs","isDragging","isTab"]),m=a.title,f=a.items,p=void 0===f?[]:f,b=a.current,g=Object(n.a)(p.slice()).reduce((function(e,t){return e.concat([t,0])}),[0]),v=function(t,n){return{key:t||"".concat(t).concat(n),id:t,meta:{horizontal:!0},index:n,panelId:e.id,panelColumns:a.cols,tabId:e.id}},y=p.indexOf(b);return-1===y&&(y=0,b=p.length?p[0]:0),o.a.createElement(o.a.Fragment,null,m&&o.a.createElement("div",{className:c()("panel-header panel-tab-header",{inline:l})},m),!l&&o.a.createElement(s.a,{className:"panel-body",attrs:u},o.a.createElement("div",{className:c()("tabs",{"empty-tabs":1===g.length})},g.map((function(e,a){return t&&o.a.createElement(t,Object.assign({},d,v(e,a),{isTab:!0,className:b===e?"active-tab":""}))}))),p.length>0&&t&&o.a.createElement(t,Object.assign({},d,v(b,y)))))}}},[[181,1,2]]]);
//# sourceMappingURL=main.a3a58509.chunk.js.map