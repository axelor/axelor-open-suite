{"version":3,"sources":["Properties/widgetList.js","Properties/propertyFields.js","Properties/properties.helper.js","constants.js","services/http.js","services/axelor.rest.js","components/FieldComponent.js","Panels/Tabs/ExistingFieldsView.js","Panels/Tabs/AddPanelView.js","common.func.js","components/SearchView.js","components/SelectComponent.js","components/TranslationGrid.js","Toolbar/api.js","Toolbar/DeleteConfirmation.js","Properties/index.js","Panels/Tabs/PropertiesView.js","Panels/SidePanel.js","Editor/index.js","Panels/MainPanel.js","Toolbar/Select.js","Toolbar/customModelSearch.js","Toolbar/ViewSelection.js","Toolbar/Toolbar.js","store/optimizeExtension.js","Toolbar/ToolbarContainer.js","App.js","index.js","store/context.js","store/xpathGenerator.js","components/Grid.js","Properties/fieldTypes.js","Properties/fa-icons.js","Properties/list.js","components/Panel.js","components/Menu.js","components/Registery.js","components/Widget.js","store/computeXML.js","store/validation.js","fields.js","store/extensionGenerator.js","utils.js","components/Form.js","components/OneToMany.js","components/Field.js","components/TabPanel.js"],"names":["selectWidget","data","boolean","integer","string","text","binary","date","datetime","time","button","decimal","Name","props","StringField","name","required","readOnly","regex","regexErrorMessage","unique","isDisabled","properties","metaFieldStore","editWidgetType","modelType","MODEL_TYPE","BASE","requiredFor","Type","column","selection","formatter","value","tab","entityIndex","indexOf","substring","SelectableType","StaticSelectField","defaultOption","DummyType","title","DataTypes","Title","translationView","DefaultValue","dependModelType","CUSTOM","AppBuilder","ObjectSelectionField","ref","Help","Sequence","IntegerField","Roles","multiple","ValueExpression","type","Selection","SelectField","valueField","property","updateSelection","UpdateSelection","BooleanField","SelectionText","depends","dependValue","Widget","widgetList","OnChange","OnNew","commaSeparated","Min","Max","Precision","Scale","JsonRelationalField","getValue","change","_type","serverType","length","Domain","Prompt","parentField","SelectionIn","showInCustomField","Value","ValueAdd","ValueDel","Refresh","Active","shouldRender","list","xPath","includes","TargetJsonModel","displayField","TargetModel","canAddNew","GridView","needsTargetModel","relationalFields","OneToMany","ManyToMany","FormView","Required","defaultValue","ColumnSequence","ReadOnly","Hidden","VisibleInGrid","ShowIf","HideIf","If","RequiredIf","ReadOnlyIf","IncludeIf","ValidIf","Css","Editable","ColSpan","max","min","parentPanel","TYPE","toolbar","menubar","itemSpan","ItemSpan","IsGenerateMenu","MenuBuilderTitle","MenuBuilderParent","fetchFieldList","shouldFetchInStart","limit","getOptionLabel","option","getMenuBuilderTitle","parent","find","item","id","parentText","ShowTitle","CanSearch","IfModule","Height","Action","Field","CanMove","OrderBy","IncludeView","IncludeFrom","Sidebar","Translatable","Column","MassUpdate","HashKey","Transient","TZ","Encrypted","Password","Multiline","Large","Search","Formula","InitParam","Index","Default","Unique","Image","Ref","MappedBy","OrphanRemoval","Sequential","Cachable","Repository","LogUpdates","Lang","Table","Implements","Persistable","Extends","HashAll","Strategy","PackageName","EntitySelection","Model","Color","Background","Strong","panel","tabs","field","dumpField","form","panelStack","panelDashlet","panelRelated","panelInclude","menu","menuItem","divider","ItemTypes","CONTAINER","ROOTCONTAINER","ITEM","DUMMY","entityFieldTypes","long","manyToMany","oneToMany","manyToOne","oneToOne","FIELD_TYPE","number","spacer","separator","hilite","PANEL_TYPE","stack","flow","grid","custom","GRID_SIZE","IDS","createWidgets","Symbol","customForm","ManyToOne","OneToOne","typeReplacer","include","MANY_TO_MANY","MANY_TO_ONE","ONE_TO_ONE","ONE_TO_MANY","ENTITY","ENTITY_TYPE","META","DEFAULT_VALUE","showTitle","readonly","hidden","sidebar","canCollapse","stacked","canMove","canSearch","multiline","conditionProperties","readonlyIf","requiredIf","hideIf","collapseIf","otherNoQuoteProps","lastCookieString","headers","Accept","lastCookies","readCookie","cookieString","document","cookie","split","reduce","obj","parts","joinURL","model","subURL","services","this","baseURL","url","method","options","axios","request","then","result","status","credential","localStorage","getItem","JSON","parse","username","password","login","res","interceptor","Promise","resolve","catch","e","response","relogin","setItem","stringify","removeItem","AxelorService","fields","sortBy","offset","post","_subURL","records","logout","get","useStyles","makeStyles","fieldsContainer","display","justifyContent","alignItems","background","borderRadius","fieldImage","padding","fieldLabel","fontWeight","icon","width","height","backgroundRepeat","backgroundSize","backgroundPosition","position","gridContainer","labelContainer","whiteSpace","overflow","textOverflow","getImageURL","widget","image","FieldComponent","classes","attrs","targetName","className","Tooltip","arrow","translate","camleCaseString","placement","Grid","container","xs","style","backgroundImage","Typography","variant","flexWrap","message","color","fieldContainer","marginTop","React","memo","useStore","state","metaFields","map","i","key","isCoreField","design","component","targetImageName","toLowerCase","fieldGroupTitle","entityFields","fieldTypes","modelFields","filter","fieldType","index","Fragment","editorType","widgets","Object","values","findIndex","w","showField","isPalleteField","useDebounceEffect","handler","interval","isMounted","useRef","useEffect","current","timer","setTimeout","clearTimeout","theme","root","backgroundColor","palette","paper","maxHeight","input","marginRight","titleHeader","borderBottom","listItem","paddingTop","paddingBottom","closeText","textTransform","ResponsiveDialog","onChange","handleClose","total","useTheme","fullScreen","useMediaQuery","breakpoints","down","handleItemClick","useCallback","canNext","canPrev","getLabel","Dialog","maxWidth","fullWidth","open","onClose","aria-labelledby","DialogTitle","DialogContent","Input","searchText","setSearchText","target","IconButton","onClick","onPrevious","disabled","onNext","List","ListItem","role","undefined","dense","ListItemText","primary","DialogActions","Button","autoFocus","createFilterOptions","autoComplete","marginBottom","fontSize","error","SelectComponent","_props","preData","showMore","propertyList","setPropertyList","val","useState","setData","setsearchText","moreDialog","setMoreDialog","setOffset","setTotal","initialFetch","setInitialFetch","targetModel","handleInputChange","reason","getSelectValue","join","fetchOptions","criteria","push","fieldName","operator","search","optionDebounceHandler","getInputAsOption","handleSearch","handleNext","newOffset","handlePrevious","handleChange","_value","fromDialog","v","inputValue","inputFocused","clearIndicator","popupIndicator","freeSolo","onInputChange","filterOptions","params","filtered","splice","o","renderInput","TextField","label","row","languageText","textAlign","TranslationGrid","update","keyValue","rest","translationList","translations","setTranslations","handleTranslationChange","language","_translations","newList","translationIndex","handleTranslationUpdate","draft","languageList","lang","onBlur","metaJsonFieldService","metaModelService","metaFieldService","entityModelService","appBpmService","appUserService","metaViewService","modelService","metaAttrsService","metaSelectService","selectionBuilderService","metaTranslationService","fetchCustomFields","modelField","_domain","fullName","saveCustomModel","save","fetchJSONFields","ids","record","schema","generateCustomModelSchema","items","l","getMenuBuilder","menuBuilder","loader","a","payload","_domainContext","code","bpmResult","Array","isArray","enableAppBuilder","generateMenuChange","customModel","_context","_model","_id","action","context","fetchCustomModel","modelId","fetch","fetchEntityModel","removeAll","fetchEntityFields","_data","packageName","Utils","getEntityModelFields","entityXml","fetchViews","view","viewCriteria","viewList","views","getViews","fetchModelFields","related","modelData","fetchAttrsList","conditionPropertiesKeys","keys","conditionPropertiesValues","startsWith","endsWith","replace","saveAttrsList","saveAll","deleteAttrsList","d","getTranslationList","keyList","saveTranslationList","deleteTranslationList","info","userInfo","userResponse","getSelectionText","metaSelect","selectionText","payloadData","actionResponse","_properties","DeleteConfirmation","onOk","aria-describedby","DialogContentText","translationInput","translationInputView","outlinedRoot","borderColor","borderWidth","notchedOutline","focused","switchBase","checked","track","iconOutlined","panelTitle","margin","disableInput","translateButton","PropertiesContext","createContext","isValueGenerated","StringInput","onTranslationRemove","clearable","confirm","setConfirm","useContext","Label","placeholder","Boolean","handleTranslationClick","newValue","generateFieldUniqueTitle","getProperty","handleTranslationRemove","removeTranslation","helperText","InputProps","endAdornment","flag","inputProps","InputLabelProps","rows","isNaN","Number","getPropertyValue","fieldValue","FormControlLabel","control","Switch","StaticSelection","helper","labelWidth","inputLabel","ColorTag","FormControl","formControl","InputLabel","Select","MenuItem","opt","Icon","window","RenderPropertyField","elements","errors","entityType","actualType","checkDepend","checkModel","PropertiesProvider","children","Provider","Properties","onWidgetChange","editWidget","customFieldWidgets","errorList","isSelectionField","selectedType","f","tz","typeFieldIndex","overview","setLabelWidth","changedPropertyName","newProperties","offsetWidth","hasPropertyToShow","flexDirection","minWidth","minHeight","scrollbarWidth","activeTab","ListAlt","PlaylistAdd","TabPanel","tabIndex","Paper","square","Tabs","event","TabIndicatorProps","Tab","classNames","loaderContainer","zIndex","border","FormViewUI","store","CircularProgress","onSelect","dragWidget","hoverWidget","onMove","onDrag","onHover","setHoverAttr","canRemove","Form","customFieldItems","Editor","autoCompleteRoot","marginLeft","ddinput","inputView","searchFilter","filterData","onSearch","loading","setLoading","setList","searchMore","setSearchMore","models","service","debounceHandler","handleTextChange","clearOnEscape","getOptionSelected","modelSearch","modelResult","modelIndex","m","modelTypes","startLoader","entityModel","clearHistory","modelName","handleEntityModelSelect","initialItems","attrsList","initialTranslationList","removedTranslationList","originalModelFields","metaModelFields","relationship","typeName","generateEntityModelSchema","handleModelSelect","exView","initialWidgets","customFields","extensionXML","extensionView","originalXML","selectedView","extensionMoves","_fields","modelRecord","handleViewSelect","generateXMLToViewSchema","translationNames","originalViewData","convert","xml2json","xml","compact","fullTagEmptyElement","_viewSearch","fieldList","generateXpath","viewFilter","getEntityModel","modelFilter","metaFieldFilter","handleMetaFieldSelect","handleTypeSelect","getEnableAppBuilder","handleViewFilterData","computed","extension","filterSelectedOptions","disableClearable","toolbarContainer","paddingLeft","toolItemView","crudIcon","cursor","selectionContainer","flex","saveView","saveCustomFieldView","removeView","onNew","isRemoveDisabled","xmlId","isNewDisabled","isSaveDisabled","onSidePanelToggle","Menu","Add","Save","undo","pastLength","Undo","redo","futureLength","Redo","hasIndex","path","isSameAsOriginal","originalWidgets","attributes","itemExplore","exploreTarget","widgetExplore","self","attributeName","dashToCamelCase","widgetValue","maskedValue","maskName","getUpdatedAttrsList","newAttrsList","removedAttrsList","moves","movesMap","Map","currentWidgets","forEach","widgetId","eGeneratePath","getWidgets","move","convertConditionName","newMove","assign","set","moveExplore","pathText","endIndex","getName","fieldIndex","attr","isOriginal","isCurrent","newAttrsIndex","version","changedAttrsList","optimizeExtension","processed","filterListForAttribute","p","_list","_item","lastItem","k","explore","canRemoveReplace","insertIndex","source","moveIndex","removeIndex","filterListForRemove","customFieldService","getChangedTranslationList","initialList","deletedTranslationList","changedTranslationList","initialItem","deleteConfirmationDialog","setDeleteConfirmationDialog","closeLoader","clearView","dialog","removeEntityModel","getCustomModelFields","formProperties","getFormProperties","isGenerateMenu","menuBuilderTitle","parentMenu","menuBuilderParent","reload","patch","generateView","processXML","json2xml","exemptAttributes","isCreatedFromStudio","viewSearch","fetchResult","metaView","originalSchema","generateViewFromJson","getXML","isAttrsChanged","conditionalValues","isTranslationChanged","getExistingExtension","json","console","log","handleNew","cols","getDefaultProperties","removedCustomFields","extraProps","all","handleConfirmationClose","deleteView","handleRemoveConfirmation","handleSidePanelToggle","sidePanel","dangerouslySetInnerHTML","__html","renderDialog","past","future","toolbarWrapper","panelContainer","mainPanel","AppContent","fetchLanguages","fetchUserPreferences","body","App","DndProvider","backend","Backend","ReactDOM","render","getElementById","StoreContext","StoreProvider","setState","updater","produce","useMutableState","hoverAttr","getAllChildrenIds","widgetType","collectIds","concat","onExtension","moveIds","oldWidgets","oldItems","generateExtension","setPresent","object","original","generateHistory","reset","isCustomField","extendList","setErrorList","isExtensionView","keyReplacer","valueConverter","parentId","x","Math","destination","resolver","isMoved","_widgets","isNew","checkExclusive","panelId","isDrop","_extendList","_attrs","mappedBy","dragWidgetProps","extraAttr","widgetAttrs","_eWidgetAttr","_attrsWidgetAttr","hoverPanel","reorderGrid","checkGridEmptyCells","validateParentPanelItems","onRemove","widgetItems","unshift","isPanel","childrenIds","layout","arrangeItems","arrangeGrid","validateOnRemove","getItemType","itemId","isFirstLevel","hasSameNameInParentItems","originalName","getSameItemIndex","getTypeWiseItemIndex","getWidgetType","isUniquePanel","canStopParentLink","findRoot","widgetIds","_widget","itemPath","itemIndex","getColSpan","col","colSpan","DEFAULTS","GridContainer","useGridWidget","WidgetComponent","setWidgetComponent","module","default","gridSize","columns","isStackLayout","spacerWidth","colWidth","useMemo","cellIndice","size","isStack","span","getItemColspan","$cell","dummy","dummyPanel","addRow","fillColspan","addItem","isLastItem","occupiedSpan","remainSpan","fullGrid","draggable","upRow","midRow","addCell","$row","relatedColSpan","j","getFullGrid","rowIndex","c","columnIndex","gridRows","arr","cellPadding","cellSpacing","fill","indice","meta","isSeparator","colIndex","panelColumns","fontAwesome","stringOption","existsCheck","fieldOptions","uiOptions","conditions","valueExpr","roles","widgetAttributes","integerOption","decimalOption","booleanOption","datetimeOption","panelOption","panelStackOption","panelTabOption","buttonOption","fontAwesomeList","seperatorOption","spacerOption","labelOption","viewerOption","manyToOneOption","manyToManyAndOneToManyOption","customRelationOption","formOption","actions","commonOption","dummyOption","viewOption","gridOption","panelDashletOption","menuItemOption","dividerOption","menuOption","panelRelatedOption","panelIncludeOption","commonEntityOption","stringEntity","decimalEntity","integerEntity","dateEntity","timeEntity","datetimeEntity","longEntity","booleanEntity","binaryEntity","oneToManyEntity","manyToManyEntity","manyToOneEntity","oneToOneEntity","entityOption","hiliteOption","isTab","inline","autoTitle","openMenu","setOpenMenu","handleToggleMenu","stopPropagation","Registery","dump_field","Panel","CardSource","canDrag","isDummy","WIDGET_TYPE","beginDrag","isModelField","endDrag","monitor","didDrop","newProps","isDragging","CardTarget","hover","dragIndex","dragPanelId","dragId","dragAttrs","hoverIndex","hoverPanelId","hoverId","hoverAttrs","panelSet","rowCount","stateItems","widgetKey","rowIndexes","rootPanels","g","isOver","shallow","tabId","connectDragSource","connectDropTarget","highlighted","hovered","DefaultWidgetComponent","visible","registryField","Registry","componentProps","isFormField","isEdit","isTabWidget","isTabWidgetContent","showRemove","isExist","edit","active","SimpleWidget","DraggableWidget","compose","DropTarget","connect","dropTarget","DragSource","dragSource","setAttributeOnNewWidget","inserted","_inserted","exemptedAttributes","isDefaultValue","attrIndex","element","cleatVirtualAction","generateNestedView","_subItems","getWidgetObject","getExtendJson2","insertOnNewPanel","processMoves","validate","lst","RegExp","test","entityTypes","exemptedAttrs","getWidgetAttrsObject","itemSource","other","uiFields","exempt","getEntityField","getWidgetAttrs","subViews","word","str","toUpperCase","_t","getSpacer","isDummyWidget","getGrid","trackElement","ind","fillRow","start","indices","modelFieldType","removeIds","emptyColumns","cell","every","removeWidget","isLastItemRemove","columnCells","rowCells","gridRow","findCol","deleteItem","isDummyItem","$id","newId","_","uniqueId","otherProps","targetWidget","dragWidgetItems","_items","destinationItems","slice","hoverCellRowIndex","hoverType","existingColspan","newIds","widgetIndex","beforeWidgets","afterWidgets","cellIndex","isSpacer","lastItemIndex","collectWidgets","isRemovedFromSameList","sourcePanel","sourceItems","sourceItemIndex","isLastItemInSamePanel","hoverParent","isPanelTab","horizontal","ceil","hoverPath","newWidgetIds","hoverWidgetParentItems","hoverWidgetId","actualHoverWidget","shouldInsertInParent","hoverPathInfo","targetInfo","isCreateWidget","shouldAdd","exclusive","getTarget","fieldTarget","itemTarget","defaultColspan","getCols","_panelId","typeLateral","formType","formItems","tabItems","_ID","replacer","minSize","maxSize","camelToDashCase","editorKeyReplacer","_keyIndex","isDummyField","types","getCustomWidget","isAttrHasDefaultValue","parentValue","shouldCheckParent","_obj","caseString","targetSplit","getElementToWidget","itemList","_key","elementType","getElementName","TYPE_REPLACER","getElementTypes","getTitle","getSpecialType","getXMLToViewItems","exclude","getExtensionElements","chars","floor","random","randomString","xmlString","indent","format","squareIndex","additionalProps","countSequence","sequence","except","localdatetime","localdate","formWidth","getPatchList","xmlJson","filterFormPatch","patchList","getCurrentFormAttributes","mergeFormAttributes","formPatch","targetIndex","remove","isSamePositionInOriginal","hoverItemIndex","defaultType","getReferenceProperty","formData","getEntityItems","getEntityViewItems","checkTarget","checkString","which","viewName","getChangeList","extensionXml","elems","moveElement","FormComponent","rootPanel","mainItems","gridView","gridItems","setGridItems","actionResult","TextInput","MultiTextInput","Spacer","Separator","Hilite","strong","alt","src","panelAttrs","TabPanelComponent","getTabAttributes","activeTabIndex"],"mappings":"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OpE,EAAMoE,MACbymB,UAAW7qB,EAAM6qB,UACjByC,UAAWttB,EAAMstB,yB,sPCvQjBrtB,EAAc,SAAC,GAAD,IAAMD,EAAN,wCAC1B6C,KAAM,UACH7C,IAGSqC,EAAuB,SAAC,GAAD,IAAMrC,EAAN,wCACnC6C,KAAM,mBACH7C,IAGSyC,EAAe,SAAC,GAAD,IAAMzC,EAAN,wCAC3B6C,KAAM,WACH7C,IAGS+C,EAAc,SAAC,GAAD,IAAM/C,EAAN,wCAC1B6C,KAAM,SACNG,WAAY,QACThD,IAGS0B,EAAoB,SAAC,GAAD,IAAM1B,EAAN,wCAChC6C,KAAM,gBACH7C,IAGSoD,EAAe,SAAC,GAAD,IAAMpD,EAAN,wCAC3B6C,KAAM,WACH7C,K,2CCwvBWsjC,EArxBK,CACnB,WACA,kBACA,oBACA,kBACA,oBACA,YACA,SACA,kBACA,mBACA,gBACA,iBACA,YACA,eACA,yCACA,YACA,aACA,eACA,uBACA,uBACA,wBACA,qBACA,gBACA,gBACA,iBACA,cACA,WACA,aACA,gBACA,uBACA,uBACA,yBACA,yBACA,0BACA,uBACA,wBACA,qBACA,gBACA,gBACA,iBACA,cACA,YACA,gBACA,cACA,cACA,sBACA,iCACA,cACA,QACA,uBACA,gBACA,cACA,mBACA,SACA,cACA,UACA,eACA,iBACA,aACA,UACA,UACA,aACA,aACA,eACA,eACA,eACA,eACA,eACA,mBACA,kBACA,kBACA,qBACA,4BACA,SACA,UACA,aACA,oBACA,UACA,YACA,gBACA,kBACA,aACA,gBACA,mBACA,eACA,sBACA,aACA,eACA,WACA,eACA,iBACA,UACA,UACA,UACA,UACA,cACA,gBACA,aACA,eACA,SACA,SACA,cACA,gBACA,cACA,cACA,SACA,gBACA,SACA,gBACA,cACA,sBACA,sBACA,gBACA,qBACA,sBACA,YACA,kBACA,SACA,gBACA,gBACA,iBACA,yBACA,yBACA,0BACA,uBACA,cACA,qBACA,eACA,QACA,aACA,oBACA,iBACA,YACA,mBACA,eACA,eACA,aACA,iBACA,WACA,kBACA,WACA,kBACA,oBACA,kBACA,oBACA,yBACA,yBACA,0BACA,uBACA,kBACA,kBACA,mBACA,gBACA,WACA,YACA,YACA,cACA,oBACA,iBACA,eACA,aACA,WACA,WACA,WACA,oBACA,kBACA,SACA,UACA,eACA,aACA,cACA,YACA,SACA,UACA,aACA,aACA,eACA,gBACA,kBACA,cACA,gBACA,aACA,cACA,oBACA,YACA,UACA,eACA,sBACA,iBACA,qBACA,UACA,gBACA,UACA,UACA,WACA,SACA,aACA,eACA,cACA,cACA,UACA,cACA,YACA,eACA,aACA,gBACA,aACA,UACA,YACA,kBACA,cACA,cACA,qBACA,uBACA,aACA,YACA,UACA,UACA,aACA,WACA,gBACA,gBACA,YACA,cACA,gBACA,mBACA,qBACA,qBACA,YACA,YACA,UACA,SACA,UACA,cACA,iBACA,wBACA,0BACA,YACA,kBACA,mBACA,0BACA,SACA,eACA,gBACA,QACA,cACA,gBACA,uBACA,qBACA,mBACA,kBACA,SACA,UACA,YACA,iBACA,UACA,oBACA,kBACA,iBACA,kBACA,kBACA,kBACA,YACA,gBACA,kBACA,oBACA,uBACA,kBACA,eACA,iBACA,kBACA,iBACA,gBACA,aACA,UACA,YACA,UACA,uBACA,aACA,iBACA,UACA,oBACA,YACA,WACA,WACA,YACA,cACA,YACA,cACA,iBACA,mBACA,UACA,kBACA,eACA,kBACA,cACA,aACA,gBACA,oBACA,aACA,cACA,aACA,WACA,SACA,QACA,UACA,WACA,gBACA,gBACA,QACA,eACA,UACA,SACA,gBACA,YACA,gBACA,mBACA,YACA,YACA,WACA,WACA,aACA,WACA,YACA,iBACA,wBACA,0BACA,wBACA,mBACA,oBACA,cACA,UACA,WACA,cACA,iBACA,iBACA,mBACA,iBACA,iBACA,kBACA,eACA,kBACA,kBACA,oBACA,iBACA,qBACA,kBACA,iBACA,iBACA,qBACA,aACA,WACA,YACA,gBACA,WACA,aACA,eACA,aACA,UACA,gBACA,WACA,eACA,iBACA,iBACA,iBACA,mBACA,oBACA,iBACA,qBACA,WACA,WACA,cACA,cACA,aACA,eACA,SACA,WACA,UACA,WACA,YACA,cACA,UACA,iBACA,SACA,eACA,iBACA,uBACA,cACA,aACA,YACA,YACA,SACA,cACA,SACA,gBACA,SACA,cACA,YACA,YACA,mBACA,UACA,aACA,WACA,aACA,gBACA,cACA,eACA,eACA,eACA,gBACA,iBACA,gBACA,UACA,cACA,qBACA,YACA,WACA,UACA,cACA,aACA,aACA,oBACA,UACA,qBACA,qBACA,sBACA,mBACA,gBACA,WACA,YACA,kBACA,gBACA,oBACA,UACA,SACA,gBACA,WACA,aACA,eACA,UACA,iBACA,iBACA,mBACA,mBACA,YACA,cACA,YACA,YACA,YACA,WACA,aACA,eACA,gBACA,sBACA,WACA,kBACA,kBACA,oBACA,cACA,YACA,kBACA,UACA,WACA,YACA,kBACA,gBACA,mBACA,WACA,aACA,YACA,iBACA,kBACA,oBACA,mBACA,0BACA,cACA,YACA,WACA,mBACA,aACA,eACA,iBACA,iBACA,mBACA,eACA,eACA,WACA,WACA,kBACA,oBACA,SACA,YACA,YACA,mBACA,qBACA,aACA,WACA,kBACA,WACA,eACA,eACA,gBACA,oBACA,mBACA,eACA,iBACA,sBACA,WACA,UACA,iBACA,mBACA,UACA,UACA,iBACA,iBACA,mBACA,aACA,eACA,WACA,kBACA,kBACA,QACA,YACA,cACA,qBACA,uBACA,WACA,gBACA,iBACA,QACA,YACA,aACA,WACA,aACA,YACA,kBACA,mBACA,aACA,gBACA,YACA,YACA,aACA,YACA,WACA,eACA,gBACA,aACA,SACA,UACA,YACA,iBACA,kBACA,YACA,SACA,gBACA,SACA,WACA,WACA,SACA,YACA,UACA,cACA,YACA,YACA,kBACA,iBACA,YACA,UACA,YACA,YACA,WACA,eACA,sBACA,kBACA,oBACA,YACA,YACA,YACA,UACA,kBACA,kBACA,qBACA,mBACA,YACA,aACA,mBACA,cACA,YACA,aACA,iBACA,aACA,cACA,WACA,WACA,aACA,gBACA,aACA,cACA,oBACA,qBACA,iBACA,mBACA,UACA,oBACA,qBACA,qBACA,sBACA,cACA,eACA,eACA,sBACA,uBACA,aACA,gBACA,mBACA,aACA,WACA,aACA,YACA,cACA,oBACA,oBACA,UACA,eACA,qBACA,oBACA,iBACA,YACA,WACA,kBACA,mBACA,kBACA,iBACA,iBACA,mBACA,UACA,iBACA,mBACA,iBACA,mBACA,iBACA,wBACA,eACA,YACA,cACA,WACA,iBACA,iBACA,aACA,WACA,YACA,gBACA,SACA,UACA,WACA,UACA,cACA,gBACA,mBACA,cACA,iBACA,gBACA,QACA,cACA,aACA,eACA,iBACA,mBACA,mBACA,mBACA,mBACA,mBACA,uBACA,sBACA,sBACA,yBACA,gCACA,gBACA,iBACA,mBACA,iBACA,eACA,YACA,WACA,kBACA,oBACA,qBACA,uBACA,UACA,iBACA,iBACA,gBACA,eACA,kBACA,eACA,eACA,WACA,iBACA,qBACA,WACA,aACA,UACA,YACA,iBACA,YACA,WACA,SACA,SACA,YACA,mBACA,kBACA,QACA,YACA,aACA,oBACA,cACA,eACA,UACA,sBACA,gBACA,YACA,YACA,gBACA,cACA,YACA,SACA,SACA,UACA,iBACA,mBACA,aACA,YACA,eACA,iBACA,gBACA,WACA,WACA,aACA,WACA,kBACA,gBACA,aACA,YACA,mBACA,kBACA,WACA,kBACA,UACA,QACA,0BACA,iBACA,gBACA,eACA,aACA,YACA,WACA,YACA,cACA,gBACA,oBACA,UACA,iBACA,kBACA,oBACA,qBACA,qBACA,oBACA,aACA,SACA,eACA,gBACA,gBACA,aACA,YACA,UACA,iBACA,kBACA,yBACA,WACA,QACA,eACA,UACA,SACA,WACA,aACA,kBACA,qB,uDCtpBD,IAAMC,EAAe,CACpBpY,SAAU,CACTprB,aAAK,CAAEyjC,aAAa,IACpBxiC,KACAe,KACAE,IACAG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","file":"static/js/main.a3a58509.chunk.js","sourcesContent":["const selectWidget = [\n\t\"NavSelect\",\n\t\"CheckboxSelect\",\n\t\"RadioSelect\",\n\t\"MultiSelect\",\n\t\"ImageSelect\",\n];\nconst data = {\n\tboolean: [\n\t\t\"InlineCheckbox\",\n\t\t\"Toggle\",\n\t\t\"BooleanSelect\",\n\t\t\"BooleanRadio\",\n\t\t\"BooleanSwitch\",\n\t\t...selectWidget,\n\t],\n\tinteger: [\n\t\t\"RelativeTime\",\n\t\t\"Duration\",\n\t\t\"Progress\",\n\t\t\"SelectProgress\",\n\t\t...selectWidget,\n\t],\n\tstring: [\n\t\t\"Email\",\n\t\t\"Url\",\n\t\t\"Password\",\n\t\t\"Html\",\n\t\t\"CodeEditor\",\n\t\t\"ImageLine\",\n\t\t...selectWidget,\n\t],\n\ttext: [\"Html\", \"CodeEditor\", ...selectWidget],\n\t\"many-to-one\": [\"SuggestBox\", \"Image\", \"binary-link\"],\n\t\"one-to-one\": [\"SuggestBox\", \"Image\"],\n\t\"many-to-many\": [\"TagSelect\"],\n\tbinary: [\"Image\", \"BinaryLink\", ...selectWidget],\n\tdate: [...selectWidget],\n\tdatetime: [...selectWidget],\n\ttime: [...selectWidget],\n\tbutton: [\"Button\", \"InfoButton\", \"ToolButton\"],\n\tdecimal: [\n\t\t\"RelativeTime\",\n\t\t\"Duration\",\n\t\t\"Progress\",\n\t\t\"SelectProgress\",\n\t\t...selectWidget,\n\t],\n};\n\nexport default data;\n","import {\n\tStringField,\n\tObjectSelectionField,\n\tIntegerField,\n\tSelectField,\n\tStaticSelectField,\n\tBooleanField,\n} from \"./fieldTypes\";\nimport widgetList from \"./widgetList\";\nimport { MODEL_TYPE, DataTypes, relationalFields, TYPE } from \"../constants\";\nimport {getMenuBuilderTitle} from \"./properties.helper\";\n\n/** Overview Fields */\nexport const Name = ({ ...props } = {}) =>\n\tStringField({\n\t\tname: \"name\",\n\t\trequired: true,\n\t\treadOnly: true,\n\t\tregex: /^[a-z0-9]+$/i,\n\t\tregexErrorMessage: 'Please enter alpha numeric characters only',\n\t\tunique: true,\n\t\tisDisabled: ({properties, metaFieldStore, editWidgetType, modelType}) => {\n\t\t\tif(modelType === MODEL_TYPE.BASE && editWidgetType !== 'customField') {\n\t\t\t\t// const name = properties['name'];\n\t\t\t\t// const index = metaFieldStore.findIndex(field => field.name === name);\n\t\t\t\t// return index !== -1 ? true : false;\n\t\t\t\treturn true;\n\t\t\t}\n\t\t\treturn false;\n\t\t},\n\t\trequiredFor: ['button','label', 'panel', 'string', 'panel-dashlet', 'separator', 'panel-stack', 'integer', 'date', 'time', 'datetime', 'decimal', 'one-to-many', 'many-to-many', 'boolean', 'label', 'viewer', 'editor', 'one-to-one', 'spacer', 'long', 'hilite'],\n\t\t...props,\n\t});\n\nexport const Type = StringField({\n\tname: \"type\",\n\tcolumn: \"type_name\",\n\trequired: true,\n\tselection: \"json.field.type\",\n\treadOnly: \"true\",\n\tformatter: (value, properties) => {\n\t\tif(properties.tab) {\n\t\t\treturn 'panel-tabs';\n\t\t}\n\t\tconst entityIndex = value.indexOf('entity');\n\t\tif(entityIndex !== -1) {\n\t\t\treturn value.substring(0, entityIndex);\n\t\t}\n\t\treturn value;\n\t}\n});\n\n\nexport const SelectableType = StaticSelectField({\n\tname: \"type\",\n\tcolumn: \"type_name\",\n\trequired: true,\n\tdata: [\"string\", \"integer\"],\n\tdefaultOption: false,\n});\n\nexport const DummyType = StaticSelectField({\n\tname: \"dummyType\",\n\ttitle: \"Type\",\n\tdata: [...DataTypes],\n});\n\nexport const Title = StringField({\n\tname: \"title\",\n\ttranslationView: false,\n});\n\nexport const DefaultValue = StringField({\n\tname: \"defaultValue\",\n\tdependModelType: MODEL_TYPE.CUSTOM,\n});\n\nexport const AppBuilder = ObjectSelectionField({\n\tname: \"appBuilder\",\n\ttitle: \"App name\",\n\tref: \"com.axelor.studio.db.AppBuilder\",\n\tdependModelType: MODEL_TYPE.CUSTOM,\n});\n\nexport const Help = StringField({\n\tname: \"help\",\n\tdependModelType: MODEL_TYPE.CUSTOM,\n});\n\nexport const Sequence = IntegerField({\n\tname: \"sequence\",\n\tdependModelType: MODEL_TYPE.CUSTOM,\n});\n\n/** Roles Fields */\nexport const Roles = ObjectSelectionField({\n\tname: \"roles\",\n\tref: \"com.axelor.auth.db.Role\",\n\tmultiple: true,\n\tdependModelType: MODEL_TYPE.CUSTOM,\n});\n\n/** ValueExpr Fields */\nexport const ValueExpression = {\n\tname: \"valueExpr\",\n\ttype: \"text\",\n\tdependModelType: MODEL_TYPE.CUSTOM,\n};\n\n/** Field Options Fields */\nexport const Selection = SelectField({\n\tname: \"selection\",\n\ttitle: \"Existing selection\",\n\tref: \"com.axelor.meta.db.MetaSelect\",\n\tvalueField: \"name\",\n\tdependModelType: MODEL_TYPE.CUSTOM,\n\tisDisabled: (property, editWidgetType, modelType) => {\n\t\treturn (\n\t\t\tproperty.updateSelection\n\t\t);\n\t},\n});\n\nexport const UpdateSelection = BooleanField({\n\tname: \"updateSelection\",\n\tdependModelType: MODEL_TYPE.CUSTOM,\n});\n\nexport const SelectionText = StringField({\n\tname: \"selectionText\",\n\ttype: \"text\",\n\tdepends: \"updateSelection\",\n\tdependValue: true,\n\tdependModelType: MODEL_TYPE.CUSTOM,\n});\n\nexport const Widget = StaticSelectField({\n\tname: \"widget\",\n\tdata: widgetList,\n\ttitle: \"widget\",\n\tdependModelType: MODEL_TYPE.CUSTOM,\n});\n\nexport const OnChange = SelectField({\n\tname: \"onChange\",\n\tref: \"com.axelor.meta.db.MetaAction\",\n\tdependModelType: MODEL_TYPE.CUSTOM,\n});\n\nexport const OnNew = SelectField({\n\tname: \"onNew\",\n\tref: \"com.axelor.meta.db.MetaAction\",\n\tmultiple: true,\n\tcommaSeparated: true,\n});\n\nexport const OnLoad = SelectField({\n\tname: \"onLoad\",\n\tref: \"com.axelor.meta.db.MetaAction\",\n\tmultiple: true,\n\tcommaSeparated: true,\n});\n\nexport const OnSave = SelectField({\n\tname: \"onSave\",\n\tref: \"com.axelor.meta.db.MetaAction\",\n\tmultiple: true,\n\tcommaSeparated: true,\n});\n\nexport const Min = IntegerField({\n\tname: \"minSize\",\n\ttitle: \"Min\",\n\tdependModelType: MODEL_TYPE.CUSTOM,\n});\n\nexport const Max = IntegerField({\n\tname: \"maxSize\",\n\ttitle: \"Max\",\n\tdependModelType: MODEL_TYPE.CUSTOM,\n});\n\nexport const EntityMax = IntegerField({\n\tname: \"max\",\n\ttitle: \"Max\",\n});\n\nexport const EntityMin = IntegerField({\n\tname: \"min\",\n\ttitle: \"Min\",\n});\n\nexport const Precision = IntegerField({\n\tname: \"precision\",\n\ttitle: \"Precision\",\n});\n\nexport const Scale = IntegerField({\n\tname: \"scale\",\n\ttitle: \"Scale\",\n});\n\nexport const JsonRelationalField = BooleanField({\n\tname: \"isJsonRelationalField\",\n\tdependModelType: MODEL_TYPE.CUSTOM,\n\tgetValue: (properties) => {\n\t\tconst type = properties[\"type\"];\n\t\tif (type) {\n\t\t\tconst hasJSONField = type.indexOf(\"json\") === 0;\n\t\t\tif (hasJSONField) {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\t\treturn false;\n\t},\n\tchange: (value, properties) => {\n\t\tconst type = properties[\"type\"];\n\t\tif (value === true) {\n\t\t\tconst has = type.indexOf(\"json\") === 0;\n\t\t\tif (!has) {\n\t\t\t\tconst _type = `json-${type}`;\n\t\t\t\treturn {\n\t\t\t\t\ttype: _type,\n\t\t\t\t\tserverType: _type,\n\t\t\t\t};\n\t\t\t}\n\t\t} else if (value === false) {\n\t\t\tconst has = type.indexOf(\"json\") === 0;\n\t\t\tif (has) {\n\t\t\t\tconst _type = type.substring(\"json-\".length);\n\t\t\t\treturn {\n\t\t\t\t\ttype: _type,\n\t\t\t\t\tserverType: _type,\n\t\t\t\t};\n\t\t\t}\n\t\t}\n\t\treturn {};\n\t},\n});\n\nexport const Domain = StringField({\n\tname: \"domain\",\n});\n\nexport const Prompt = StringField({\n\tname: \"prompt\",\n\tparentField: \"widgetAttrs\",\n});\n\nexport const SelectionIn = StringField({\n\tname: \"selection-in\",\n\tdependModelType: MODEL_TYPE.BASE,\n\tshowInCustomField: false,\n});\n\nexport const Value = StringField({\n\tname: \"value\",\n\tdependModelType: MODEL_TYPE.BASE,\n\tshowInCustomField: false,\n});\n\nexport const ValueAdd = StringField({\n\tname: \"value:add\",\n\tdependModelType: MODEL_TYPE.BASE,\n\tshowInCustomField: false,\n});\n\nexport const ValueDel = StringField({\n\tname: \"value:del\",\n\tdependModelType: MODEL_TYPE.BASE,\n\tshowInCustomField: false,\n});\n\nexport const Refresh = BooleanField({\n\tname: \"refresh\",\n\tdependModelType: MODEL_TYPE.BASE,\n\tshowInCustomField: false,\n});\n\nexport const Active = BooleanField({\n\tname: \"active\",\n\tdependModelType: MODEL_TYPE.BASE,\n\tshowInCustomField: false,\n\tshouldRender: (list) => {\n\t\treturn list.xPath && list.xPath.includes('panel-tabs');\n\t}\n});\n\nexport const TargetJsonModel = ObjectSelectionField({\n\tname: \"targetJsonModel\",\n\trequired: true,\n\tref: \"com.axelor.meta.db.MetaJsonModel\",\n\tdisplayField: \"title\",\n\tdependModelType: MODEL_TYPE.CUSTOM,\n});\n\nexport const TargetModel = SelectField({\n\tname: \"targetModel\",\n\trequired: true,\n\tref: \"com.axelor.meta.db.MetaModel\",\n\tvalueField: \"fullName\",\n\tcanAddNew: false,\n\tisDisabled: (property, editWidgetType, modelType) => {\n\t\treturn (\n\t\t\teditWidgetType !== \"customField\" &&\n\t\t\tproperty.serverType !== \"field\" &&\n\t\t\tmodelType !== MODEL_TYPE.CUSTOM\n\t\t);\n\t},\n});\n\nexport const GridView = SelectField({\n\tname: \"gridView\",\n\ttitle: \"Grid view\",\n\tref: \"com.axelor.meta.db.MetaView\",\n\tvalueField: \"name\",\n\tdependModelType: MODEL_TYPE.CUSTOM,\n\tneedsTargetModel: [relationalFields.OneToMany, relationalFields.ManyToMany]\n});\n\nexport const FormView = SelectField({\n\tname: \"formView\",\n\ttitle: \"Form view\",\n\tref: \"com.axelor.meta.db.MetaView\",\n\tvalueField: \"name\",\n\tdependModelType: MODEL_TYPE.CUSTOM,\n\tneedsTargetModel: [relationalFields.OneToMany, relationalFields.ManyToMany]\n});\n\n/** Ui options fields */\nexport const Required = BooleanField({\n\tname: \"required\",\n\tdefaultValue: \"false\",\n\tisDisabled: ({properties, metaFieldStore, editWidgetType, modelType}) => {\n\t\tif(modelType === MODEL_TYPE.BASE && editWidgetType !== 'customField') {\n\t\t\tif(properties['requiredIf'] && properties['requiredIf'].length) {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\t\treturn false;\n\t}\n});\n\nexport const ColumnSequence = IntegerField({\n\tname: \"columnSequence\",\n\tdependModelType: MODEL_TYPE.CUSTOM,\n});\n\nexport const ReadOnly = BooleanField({\n\tname: \"readonly\",\n\tisDisabled: ({properties, metaFieldStore, editWidgetType, modelType}) => {\n\t\tif(modelType === MODEL_TYPE.BASE && editWidgetType !== 'customField') {\n\t\t\tif(properties['readonlyIf'] && properties['readonlyIf'].length) {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\t\treturn false;\n\t}\n});\n\nexport const Hidden = BooleanField({\n\tname: \"hidden\",\n\tisDisabled: ({properties}) => {\n\t\tif(properties['hideIf'] && properties['hideIf'].length) {\n\t\t\treturn true;\n\t\t}\n\t\treturn false;\n\t}\n});\n\nexport const VisibleInGrid = BooleanField({\n\tname: \"visibleInGrid\",\n\ttitle: \"Visible in grid\",\n\tdependModelType: MODEL_TYPE.CUSTOM,\n});\n\n/** Conditions Fields*/\nexport const ShowIf = StringField({\n\tname: \"showIf\",\n\tdependModelType: MODEL_TYPE.CUSTOM,\n});\n\nexport const HideIf = StringField({\n\tname: \"hideIf\",\n\tisDisabled: ({properties}) => {\n\t\tif(properties['hidden']) {\n\t\t\treturn true;\n\t\t}\n\t\treturn false;\n\t}\n});\n\nexport const If = StringField({\n\tname: \"if\",\n\tdependModelType: MODEL_TYPE.CUSTOM,\n});\n\nexport const RequiredIf = StringField({\n\tname: \"requiredIf\",\n\tisDisabled: ({properties, metaFieldStore, editWidgetType, modelType}) => {\n\t\tif(modelType === MODEL_TYPE.BASE && editWidgetType !== 'customField') {\n\t\t\tif(properties['required']) {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\t\treturn false;\n\t}\n});\n\nexport const ReadOnlyIf = StringField({\n\tname: \"readonlyIf\",\n\tisDisabled: ({properties, metaFieldStore, editWidgetType, modelType}) => {\n\t\tif(modelType === MODEL_TYPE.BASE && editWidgetType !== 'customField') {\n\t\t\tif(properties['readonly']) {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\t\treturn false;\n\t}\n});\n\nexport const IncludeIf = StringField({\n\tname: \"includeIf\",\n\ttitle: \"Include if\",\n\tdependModelType: MODEL_TYPE.CUSTOM,\n\n});\n\nexport const ValidIf = StringField({\n\tname: \"validIf\",\n\tparentField: \"widgetAttrs\",\n\tmodelType: MODEL_TYPE.CUSTOM,\n\tdependModelType: MODEL_TYPE.CUSTOM,\n});\n\nexport const CanSave = StringField({\n\tname: \"canSave\",\n\tdependModelType: MODEL_TYPE.CUSTOM,\n});\n\nexport const Css = StringField({\n\tname: 'css',\n\tparentField: \"widgetAttrs\",\n\tmodelType: MODEL_TYPE.CUSTOM,\n\n\t// dependModelType: MODEL_TYPE.BASE,\n});\n\nexport const CanEdit = StringField({\n\tname: \"canEdit\",\n});\n\nexport const CanDelete = StringField({\n\tname: \"canDelete\",\n});\n\nexport const CanCopy = StringField({\n\tname: \"canCopy\",\n});\n\nexport const CanNew = StringField({\n\tname: \"canNew\",\n});\n\nexport const CanAttach = StringField({\n\tname: \"canAttach\",\n});\n\nexport const FormWidth = StaticSelectField({\n\tname: \"width\",\n\tdata: [\"mini\", \"mid\", \"large\"],\n\ttitle: \"width\",\n});\n\nexport const Editable = BooleanField({\n\tname: \"editable\",\n\tdependModelType: MODEL_TYPE.CUSTOM,\n});\n\n/** Widget Fields*/\nexport const ColSpan = IntegerField({\n\tname: \"colSpan\",\n\tparentField: \"widgetAttrs\",\n\tmax: 12,\n\tmin: 1,\n\tmodelType: MODEL_TYPE.CUSTOM,\n\tdependModelType: MODEL_TYPE.CUSTOM,\n\tisDisabled: ({properties, parentPanel}) => {\n\t\tif(parentPanel) {\n\t\t\tif([TYPE.toolbar, TYPE.menubar].includes(parentPanel.serverType)) {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t\tif(parentPanel.itemSpan && parentPanel.itemSpan?.length) {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\t\treturn false;\n\t},\n});\n\nexport const ItemSpan = IntegerField({\n\tname: \"itemSpan\",\n\tparentField: \"widgetAttrs\",\n\tmax: 12,\n\tmin: 1,\n\tmodelType: MODEL_TYPE.CUSTOM,\n\tdependModelType: MODEL_TYPE.CUSTOM,\n\tisDisabled: ({properties, parentPanel}) => {\n\t\tif(parentPanel && [TYPE.toolbar, TYPE.menubar].includes(parentPanel.serverType)) {\n\t\t\treturn true;\n\t\t}\n\t\treturn false;\n\t},\n});\n\nexport const IsGenerateMenu = BooleanField({\n\tname: \"isGenerateMenu\",\n});\n\nexport const MenuBuilderTitle = StringField({\n\tname: \"menuBuilderTitle\",\n\tdepends: \"isGenerateMenu\",\n\tdependValue: true,\n});\n\nexport const MenuBuilderParent = ObjectSelectionField({\n\tname: \"menuBuilderParent\",\n\tref: \"com.axelor.meta.db.MetaMenu\",\n\ttitle: \"Parent\",\n\tdepends: \"isGenerateMenu\",\n\tdependValue: true,\n\tvalueField: \"id\",\n\tdisplayField: \"title\",\n\tfetchFieldList: ['parent'],\n\tshouldFetchInStart: true,\n\tlimit: null,\n\tgetOptionLabel: (option, data) => {\n\t\treturn getMenuBuilderTitle(option, data);\n\t}\n});\n\nexport const ShowTitle = BooleanField({\n\tname: \"showTitle\",\n\tparentField: \"widgetAttrs\",\n\tdefaultValue: true,\n\tmodelType: MODEL_TYPE.CUSTOM,\n\tdependModelType: MODEL_TYPE.CUSTOM,\n});\n\nexport const CanSearch = BooleanField({\n\tname: \"canSearch\",\n\tdependModelType: MODEL_TYPE.CUSTOM,\n});\n\nexport const IfModule = StringField({\n\tname: \"if-module\",\n\tdependModelType: MODEL_TYPE.CUSTOM,\n});\n\nexport const Height = StringField({\n\tname: \"height\",\n\tdependModelType: MODEL_TYPE.CUSTOM,\n});\n\nexport const Action = SelectField({\n\tname: \"action\",\n\tref: \"com.axelor.meta.db.MetaAction\",\n\trequiredFor: ['panel-dashlet', 'item'],\n\tdependModelType: MODEL_TYPE.CUSTOM,\n});\n\nexport const Field = StringField({\n\tname: \"field\",\n\trequired: true,\n\trequiredFor: ['panel-related'],\n\tdependModelType: MODEL_TYPE.CUSTOM,\n});\n\nexport const CanMove = BooleanField({\n\tname: \"canMove\",\n\tdependModelType: MODEL_TYPE.CUSTOM,\n});\n\nexport const OrderBy = StringField({\n\tname: \"orderBy\",\n\tdependModelType: MODEL_TYPE.CUSTOM,\n});\n\nexport const IncludeView = SelectField({\n\tname: \"view\",\n\ttitle: \"View\",\n\tref: \"com.axelor.meta.db.MetaView\",\n\tvalueField: \"name\",\n\trequiredFor: ['panel-include'],\n\tdependModelType: MODEL_TYPE.CUSTOM,\n});\n\nexport const IncludeFrom = StringField({\n\tname: \"from\",\n});\n\nexport const Sidebar = BooleanField({\n\tname: \"sidebar\",\n\tparentField: \"widgetAttrs\",\n\tmodelType: MODEL_TYPE.CUSTOM,\n\tdependModelType: MODEL_TYPE.CUSTOM,\n\tshowInCustomField: false,\n});\n\nexport const Translatable = BooleanField({\n\tname: \"translatable\",\n});\n\nexport const Column = StringField({\n\tname: \"column\",\n});\n\nexport const MassUpdate = BooleanField({\n\tname: \"massUpdate\",\n});\n\nexport const HashKey = BooleanField({\n\tname: \"hashKey\",\n});\n\nexport const Transient = BooleanField({\n\tname: \"transient\",\n});\n\nexport const TZ = BooleanField({\n\tname: \"tz\",\n});\n\nexport const Encrypted = BooleanField({\n\tname: \"encrypted\",\n});\n\nexport const Password = BooleanField({\n\tname: \"password\",\n});\n\nexport const Multiline = BooleanField({\n\tname: \"multiline\",\n\tdependModelType: MODEL_TYPE.CUSTOM,\n});\n\nexport const Large = BooleanField({\n\tname: \"large\",\n});\n\nexport const Search = StringField({\n\tname: \"search\",\n});\n\nexport const Formula = BooleanField({\n\tname: \"formula\",\n});\n\nexport const InitParam = BooleanField({\n\tname: \"initParam\",\n});\n\nexport const Index = StringField({\n\tname: \"index\",\n});\n\nexport const Default = StringField({\n\tname: \"default\",\n});\n\nexport const Unique = BooleanField({\n\tname: \"unique\",\n});\n\nexport const Image = BooleanField({\n\tname: \"image\",\n});\n\nexport const Ref = StringField({\n\tname: \"ref\",\n});\n\nexport const MappedBy = StringField({\n\tname: \"mappedBy\",\n});\n\nexport const OrphanRemoval = BooleanField({\n\tname: \"orphanRemoval\",\n});\n\nexport const Sequential = BooleanField({\n\tname: \"sequential\",\n});\n\nexport const Cachable = BooleanField({\n\tname: \"cachable\",\n});\n\nexport const Repository = StaticSelectField({\n\tname: \"repository\",\n\tdata: [\"none\", \"default\", \"abstract\"],\n});\n\nexport const LogUpdates = BooleanField({\n\tname: \"logUpdates\",\n});\n\nexport const Lang = StringField({\n\tname: \"lang\",\n});\n\nexport const Table = StringField({\n\tname: \"table\",\n});\n\nexport const Implements = StringField({\n\tname: \"implements\",\n});\n\nexport const Persistable = StringField({\n\tname: \"persistable\",\n});\n\nexport const Extends = StringField({\n\tname: \"extends\",\n});\n\nexport const HashAll = BooleanField({\n\tname: \"hashAll\",\n});\n\nexport const Strategy = StaticSelectField({\n\tname: \"strategy\",\n\tdata: [\"SINGLE\", \"JOINED\", \"CLASS\"],\n});\n\nexport const Stacked = BooleanField({\n\tname: \"stacked\",\n\tdependModelType: MODEL_TYPE.BASE,\n});\n\nexport const PackageName = StringField({\n\tname: \"packageName\",\n});\n\nexport const EntitySelection = StringField({\n\tname: 'selection',\n});\n\nexport const Model = SelectField({\n\tname: \"model\",\n\trequired: true,\n\tref: \"com.axelor.meta.db.MetaModel\",\n\tvalueField: \"fullName\",\n});\n\nexport const Color = StaticSelectField({\n\tname: \"color\",\n\tdata: [\"default\", \"primary\", \"warning\", \"success\", \"danger\", \"info\"],\n});\n\nexport const Background = StaticSelectField({\n\tname: \"background\",\n\tdata: [\"default\", \"primary\", \"warning\", \"success\", \"danger\", \"info\"],\n});\n\nexport const Strong = BooleanField({\n\tname: \"strong\",\n\tdependModelType: MODEL_TYPE.BASE,\n});\n\nexport default {\n\tName,\n\tType,\n\tTitle,\n\tDefaultValue,\n\tAppBuilder,\n\tHelp,\n\tSequence,\n\tRoles,\n\tValueExpression,\n\tSelection,\n\tWidget,\n\tOnChange,\n\tMin,\n\tMax,\n\tJsonRelationalField,\n\tDomain,\n\tTargetJsonModel,\n\tTargetModel,\n\tGridView,\n\tFormView,\n\tRequired,\n\tColumnSequence,\n\tReadOnly,\n\tHidden,\n\tVisibleInGrid,\n\tShowIf,\n\tHideIf,\n\tRequiredIf,\n\tReadOnlyIf,\n\tIncludeIf,\n\tValidIf,\n\tColSpan,\n\tShowTitle,\n\tOnNew,\n\tOnLoad,\n\tOnSave,\n\tFormWidth,\n\tEditable,\n\tDummyType,\n\tIfModule,\n\tAction,\n\tHeight,\n\tCanSearch,\n\tField,\n\tCanMove,\n\tOrderBy,\n\tIncludeFrom,\n\tIncludeView,\n\tTranslatable,\n\tMassUpdate,\n\tEntityMax,\n\tEntityMin,\n\tPrecision,\n\tScale,\n\tTZ,\n\tEncrypted,\n\tPassword,\n\tMultiline,\n\tColumn,\n\tHashKey,\n\tTransient,\n\tLarge,\n\tSearch,\n\tFormula,\n\tInitParam,\n\tImage,\n\tRef,\n\tMappedBy,\n\tOrphanRemoval,\n\tCachable,\n\tRepository,\n\tSequential,\n\tImplements,\n\tPersistable,\n\tTable,\n\tLang,\n\tLogUpdates,\n\tHashAll,\n\tExtends,\n\tStrategy,\n\tIsGenerateMenu,\n\tMenuBuilderParent,\n\tMenuBuilderTitle,\n\tStacked,\n\tPackageName,\n\tEntitySelection,\n\tModel,\n\tColor,\n\tStrong,\n\tBackground,\n\tItemSpan,\n\tCss\n};\n","export const getMenuBuilderTitle = (option, data) => {\n\tlet text = option.title || '';\n\tif(option.parent) {\n\t\tconst parent = data.find(item => item.id === option.parent.id);\n\t\tif(parent) {\n\t\t\tconst parentText = getMenuBuilderTitle(parent, data);\n\t\t\tif(parentText) {\n\t\t\t\ttext = `${parentText} > ${text}`;\n\t\t\t}\n\t\t}\n\t}\n\treturn text;\n}\n","// TYPE define all elements\nexport const TYPE = {\n\tpanel: \"panel\",\n\ttabs: \"panel-tabs\",\n\tfield: \"field\",\n\tdumpField: \"dump_field\",\n\tform: \"form\",\n\tpanelStack: \"panel-stack\",\n\tpanelDashlet: \"panel-dashlet\",\n\tpanelRelated: \"panel-related\",\n\tpanelInclude: \"panel-include\",\n\tmenu: \"menu\",\n\tmenuItem: \"item\",\n\tdivider: \"divider\",\n\tmenubar: \"menubar\",\n\ttoolbar: \"toolbar\",\n};\n\nexport const ItemTypes = {\n\tCONTAINER: \"panel\",\n\tROOTCONTAINER: \"root-container\",\n\tITEM: \"item\",\n\tDUMMY: \"dummy\",\n};\n\nexport const entityFieldTypes = {\n\tstring: \"stringEntity\",\n\tboolean: \"booleanEntity\",\n\tinteger: \"integerEntity\",\n\tlong: \"longEntity\",\n\tdecimal: \"decimalEntity\",\n\tdate: \"dateEntity\",\n\ttime: \"timeEntity\",\n\tdatetime: \"datetimeEntity\",\n\tbinary: \"binaryEntity\",\n\tmanyToMany: \"many-to-manyEntity\",\n\toneToMany: \"one-to-manyEntity\",\n\tmanyToOne: \"many-to-oneEntity\",\n\toneToOne: \"one-to-oneEntity\",\n};\n\n// FIELD_TYPE define all field types(manage on server end)\nexport const FIELD_TYPE = {\n\tstring: \"string\",\n\tnumber: \"number\",\n\tbutton: \"button\",\n\tspacer: \"spacer\",\n\tboolean: \"boolean\",\n\tseparator: \"separator\",\n\thilite: \"hilite\",\n};\n\n// Panel Container Types\nexport const PANEL_TYPE = {\n\tstack: \"stack\",\n\tflow: \"flow\",\n\tgrid: \"grid\",\n\tcustom: \"custom\",\n};\n\n// define Grid Size constants\nexport const GRID_SIZE = {\n\tmax: 12,\n};\n\n// contains all unique ids for special widgets\nexport const IDS = {\n\tcreateWidgets: {\n\t\ttabs: Symbol(),\n\t\tpanel: Symbol(),\n\t\tfield: Symbol(),\n\t},\n\tform: -1,\n\tcustomForm: -2,\n\tdumpField: 0,\n};\n\nexport const relationalFields = {\n\tOneToMany: \"one-to-many\",\n\tManyToMany: \"many-to-many\",\n\tManyToOne: \"many-to-one\",\n\tOneToOne: \"one-to-one\",\n};\n\nexport const typeReplacer = {\n\tinclude: TYPE.panelInclude,\n\tMANY_TO_MANY: \"many-to-many\",\n\tMANY_TO_ONE: \"many-to-one\",\n\tONE_TO_ONE: \"one-to-one\",\n\tONE_TO_MANY: \"one-to-many\",\n};\n\nexport const MODEL_TYPE = {\n\tBASE: \"BASE\",\n\tCUSTOM: \"CUSTOM\",\n\tENTITY: \"ENTITY\",\n};\n\nexport const ENTITY_TYPE = {\n\tMETA: \"META\",\n\tENTITY: \"ENTITY\",\n};\n\nexport const DEFAULT_VALUE = {\n\tshowTitle: true,\n\treadonly: false,\n\trequired: false,\n\thidden: false,\n\tsidebar: false,\n\tcanCollapse: false,\n\tstacked: false,\n\tcanMove: false,\n\tcanSearch: false,\n\tmultiline: false,\n}\n\nexport const DataTypes = [\n\t\"string\",\n\t\"integer\",\n\t\"decimal\",\n\t\"boolean\",\n\t\"datetime\",\n\t\"date\",\n\t\"time\",\n\t\"many-to-one\",\n\t\"one-to-many\",\n\t\"many-to-many\",\n];\n\nexport const conditionProperties = {\n\treadonlyIf: 'readonly',\n\trequiredIf: 'required',\n\thideIf: 'hidden',\n\tcollapseIf: 'canCollapse',\n}\n\nexport const otherNoQuoteProps = ['value:add', 'value:del', 'refresh', 'active'];\n","import axios from \"axios\";\n\nconst headers = {\n\t\"X-Requested-With\": \"XMLHttpRequest\",\n\t\"Content-Type\": \"application/json\",\n\tAccept: \"application/json\",\n};\nlet lastCookieString;\nlet lastCookies = {};\n\nfunction readCookie(name) {\n\tlet cookieString = document.cookie || \"\";\n\tif (cookieString !== lastCookieString) {\n\t\tlastCookieString = cookieString;\n\t\tlastCookies = cookieString.split(\"; \").reduce((obj, value) => {\n\t\t\tlet parts = value.split(\"=\");\n\t\t\tobj[parts[0]] = parts[1];\n\t\t\treturn obj;\n\t\t}, {});\n\t}\n\treturn lastCookies[name];\n}\n\nclass service {\n\tconstructor(props) {\n\t\tthis.baseURL =\n\t\t\tprocess.env.NODE_ENV === \"production\" ? \"../../\" : \"/axelor-erp/\";\n\t}\n\n\trequest(url, method, data) {\n\t\tlet options = {};\n\t\tif (method !== \"get\") {\n\t\t\toptions[\"data\"] = data;\n\t\t}\n\t\treturn axios({\n\t\t\tmethod: method,\n\t\t\tbaseURL: this.baseURL,\n\t\t\theaders: {\n\t\t\t\t...headers,\n\t\t\t\t\"X-CSRF-Token\": readCookie(\"CSRF-TOKEN\"),\n\t\t\t},\n\t\t\turl,\n\t\t\t...options,\n\t\t});\n\t}\n\n\tinterceptor(url, method, data) {\n\t\treturn this.request(url, method, data)\n\t\t\t.then((result) => {\n\t\t\t\tif (result.status === 200) {\n\t\t\t\t\treturn result.data || { status: result.status };\n\t\t\t\t} else if (result.status === 401) {\n\t\t\t\t\tconst credential = localStorage.getItem(\"credential\");\n\t\t\t\t\tif (credential) {\n\t\t\t\t\t\tconst { username, password } = JSON.parse(credential);\n\t\t\t\t\t\treturn this.login(username, password).then((res) => {\n\t\t\t\t\t\t\tif (res.status === 200) {\n\t\t\t\t\t\t\t\treturn this.interceptor(url, method, data);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\treturn Promise.resolve(\"Error\");\n\t\t\t})\n\t\t\t.catch((e) => {\n\t\t\t\tif (e.response.status === 401) {\n\t\t\t\t\treturn this.relogin(url, method, data);\n\t\t\t\t}\n\t\t\t});\n\t}\n\n\trelogin(url, method, data) {\n\t\tconst credential = localStorage.getItem(\"credential\");\n\t\tif (credential) {\n\t\t\tconst { username, password } = JSON.parse(credential);\n\t\t\treturn this.login(username, password).then((res) => {\n\t\t\t\tif (res.status === 200) {\n\t\t\t\t\treturn this.interceptor(url, method, data);\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t}\n\n\tget(url) {\n\t\treturn this.interceptor(url, \"get\");\n\t}\n\n\tpost(url, data = {}) {\n\t\treturn this.interceptor(url, \"post\", data);\n\t}\n\n\tdelete(url, data) {\n\t\treturn this.interceptor(url, \"delete\", data);\n\t}\n\n\tlogin(username, password) {\n\t\tconst data = { username, password };\n\t\treturn this.interceptor(\"login.jsp\", \"post\", data).then((res) => {\n\t\t\tif (res.status === 200) {\n\t\t\t\tlocalStorage.setItem(\n\t\t\t\t\t\"credential\",\n\t\t\t\t\tJSON.stringify({ username, password })\n\t\t\t\t);\n\t\t\t}\n\t\t\treturn { status: res.status };\n\t\t});\n\t}\n\n\tlogout() {\n\t\treturn this.interceptor(\"logout\").then(() => {\n\t\t\tlocalStorage.removeItem(\"credential\");\n\t\t});\n\t}\n}\n\nexport default service;\n","import httpService from \"./http\";\n\nconst joinURL = (model, subURL) => {\n\treturn `ws/rest/${model}/${subURL}`;\n};\n\nconst services = new httpService();\n\nclass AxelorService {\n\tconstructor(props) {\n\t\tthis.model = props.model;\n\t}\n\n\tsearch({ fields, sortBy, data, limit, offset }) {\n\t\tconst _subURL = `search`;\n\t\tconst url = joinURL(this.model, _subURL);\n\t\treturn services.post(url, { fields, sortBy, data, limit, offset });\n\t}\n\n\tfetch(id, data) {\n\t\tconst _subURL = `${id}/fetch`;\n\t\tconst url = joinURL(this.model, _subURL);\n\t\treturn services.post(url, data);\n\t}\n\n\tview(data) {\n\t\tconst url = \"/ws/meta/view\";\n\t\treturn services.post(url, data);\n\t}\n\n\tsave(data) {\n\t\tconst url = joinURL(this.model, \"\");\n\t\treturn services.post(url, { data });\n\t}\n\n\tsaveAll(data) {\n\t\tconst url = joinURL(this.model, \"\");\n\t\treturn services.post(url, { records: data });\n\t}\n\n\tremoveAll(records) {\n\t\tconst url = joinURL(this.model, \"removeAll\");\n\t\treturn services.post(url, { records });\n\t}\n\n\tlogin(username, password) {\n\t\treturn services.login(username, password);\n\t}\n\n\tlogout() {\n\t\treturn services.logout();\n\t}\n\n\taction(data) {\n\t\tconst url = \"ws/action\";\n\t\treturn services.post(url, data);\n\t}\n\n\tinfo() {\n\t\tconst url = \"ws/app/info\";\n\t\treturn services.get(url);\n\t}\n}\n\nexport default AxelorService;\n","import React from \"react\";\nimport { Grid, Typography, Tooltip } from \"@material-ui/core\";\nimport { makeStyles } from \"@material-ui/core/styles\";\n\nimport { translate, camleCaseString } from \"../utils\";\n\nconst useStyles = makeStyles({\n\tfieldsContainer: {\n\t\tdisplay: \"flex\",\n\t\tjustifyContent: \"center\",\n\t\talignItems: \"center\",\n\t\tbackground: \"#e7eaec\",\n\t\tborderRadius: 5,\n\t},\n\tfieldImage: {\n\t\tdisplay: \"flex\",\n\t\tjustifyContent: \"center\",\n\t\talignItems: \"center\",\n\t\tpadding: 15,\n\t},\n\tfieldLabel: {\n\t\tfontWeight: \"bold\",\n\t},\n\ticon: {\n\t\twidth: 20,\n\t\theight: 20,\n\t\tbackgroundRepeat: \"no-repeat\",\n\t\tbackgroundSize: \"contain\",\n\t\tbackgroundPosition: \"center\",\n\t\tposition: \"absolute\",\n\t},\n\tgridContainer: {\n\t\tdisplay: \"flex\",\n\t\talignItems: \"center\",\n\t},\n\tlabelContainer: {\n\t\twhiteSpace: \"nowrap\",\n\t\toverflow: \"hidden\",\n\t\ttextOverflow: \"ellipsis\",\n\t},\n});\n\nconst getImageURL = (widget) => {\n\tconst type = widget.serverType || widget.type;\n\tif(type && type.indexOf('datetime') !== -1) {\n\t\treturn 'datetime.png';\n\t}\n\tif(type && type.indexOf('date') !== -1) {\n\t\treturn 'date.png';\n\t}\n\tif(type && type.indexOf('time') !== -1) {\n\t\treturn 'time.png';\n\t}\n\tif(type && type.indexOf('decimal') !== -1) {\n\t\treturn 'decimal.png';\n\t}\n\tif(widget.image) {\n\t\treturn widget.image;\n\t}\n\treturn `${type}.png`;\n}\n\nexport function FieldComponent(props) {\n\tconst classes = useStyles();\n\tconst { attrs, targetName = \"name\" } = props;\n\treturn (\n\t\t<div className={classes.fieldsContainer}>\n\t\t\t<Tooltip\n\t\t\t\tarrow\n\t\t\t\ttitle={translate(camleCaseString(attrs[targetName] || attrs.title))}\n\t\t\t\tplacement=\"top\"\n\t\t\t>\n\t\t\t\t<Grid container className={classes.gridContainer}>\n\t\t\t\t\t<Grid xs={4} item className={classes.fieldImage}>\n\t\t\t\t\t\t<div\n\t\t\t\t\t\t\tclassName={classes.icon}\n\t\t\t\t\t\t\tstyle={{\n\t\t\t\t\t\t\t\tbackgroundImage: `url(./images/${getImageURL(attrs)})`,\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</Grid>\n\t\t\t\t\t<Grid xs={8} item className={classes.labelContainer}>\n\t\t\t\t\t\t<Typography variant=\"caption\" className={classes.fieldLabel}>\n\t\t\t\t\t\t\t{translate(camleCaseString(attrs[targetName] || attrs.title))}\n\t\t\t\t\t\t</Typography>\n\t\t\t\t\t</Grid>\n\t\t\t\t</Grid>\n\t\t\t</Tooltip>\n\t\t</div>\n\t);\n}\n\nexport default FieldComponent;\n","import React from \"react\";\nimport { Grid, Typography } from \"@material-ui/core\";\nimport { makeStyles } from \"@material-ui/core/styles\";\n\nimport FieldComponent from \"../../components/FieldComponent\";\nimport { useStore } from \"../../store/context\";\nimport Widget from \"./../../components/Widget\";\nimport { IDS } from \"./../../constants\";\n\nconst useStyles = makeStyles({\n\tcontainer: {\n\t\tpadding: \"0px 25px\",\n\t\tdisplay: \"flex\",\n\t\tflexWrap: \"wrap\",\n\t\talignItems: \"center\",\n\t\tjustifyContent: \"space-between\",\n\t},\n\tmessage: {\n\t\tcolor: \"#fff\",\n\t},\n\tfieldContainer: {\n\t\tmarginTop: 5,\n\t\twidth: \"45%\",\n\t},\n});\n\nexport default React.memo(function ExistingFieldsView(props) {\n\tconst classes = useStyles();\n\tconst { state } = useStore();\n\tconst fields = state.metaFields || [];\n\treturn (\n\t\t<Grid className={classes.container}>\n\t\t\t{fields ? (\n\t\t\t\tfields.map((field, i) => (\n\t\t\t\t\t<div className={classes.fieldContainer} key={i}>\n\t\t\t\t\t\t<Widget\n\t\t\t\t\t\t\tattrs={{ ...field, isCoreField: false }}\n\t\t\t\t\t\t\tdesign={true}\n\t\t\t\t\t\t\tcomponent={FieldComponent}\n\t\t\t\t\t\t\tid={IDS.createWidgets.field}\n\t\t\t\t\t\t\ttargetImageName={`${field && field.type.toLowerCase()}.png`}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</div>\n\t\t\t\t))\n\t\t\t) : (\n\t\t\t\t<Typography className={classes.message}>No fields available</Typography>\n\t\t\t)}\n\t\t</Grid>\n\t);\n});\n","import React from \"react\";\nimport { Grid, Typography } from \"@material-ui/core\";\nimport { makeStyles } from \"@material-ui/core/styles\";\n\nimport { fieldTypes, modelFields, entityFields } from \"../../fields\";\nimport FieldComponent from \"../../components/FieldComponent\";\nimport Widget from \"./../../components/Widget\";\nimport ExistingFieldsView from \"./ExistingFieldsView\";\nimport { useStore } from \"../../store/context\";\nimport { MODEL_TYPE, TYPE } from \"../../constants\";\n\nconst useStyles = makeStyles({\n\tcontainer: {\n\t\tpadding: \"0px 25px\",\n\t\tdisplay: \"flex\",\n\t\tflexWrap: \"wrap\",\n\t\talignItems: \"center\",\n\t\tjustifyContent: \"space-between\",\n\t},\n\tfieldGroupTitle: {\n\t\tpadding: \"25px 25px 0px 25px\",\n\t\tcolor: \"white\",\n\t},\n\tfieldContainer: {\n\t\tmarginTop: 5,\n\t\twidth: \"45%\",\n\t},\n});\n\nexport default React.memo(function AddPanelView() {\n\tconst classes = useStyles();\n\tconst { state } = useStore();\n\tconst fields =\n\t\tstate.modelType === MODEL_TYPE.ENTITY\n\t\t\t? entityFields\n\t\t\t: [...fieldTypes, ...modelFields].filter(e => {\n\t\t\t\tif(e.name === 'Menu' && state.modelType === MODEL_TYPE.CUSTOM) {\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t\treturn true;\n\t\t\t});\n\n\tconst showField = (field) => {\n\t\tif([TYPE.menubar, TYPE.toolbar].includes(field.type) && state.widgets) {\n\t\t\tconst index = Object.values(state.widgets).findIndex(w => w.type === field.type);\n\t\t\treturn index === -1;\n\t\t}\n\t\treturn true;\n\t}\n\treturn (\n\t\t<>\n\t\t\t{fields.map((fieldType, index) => (\n\t\t\t\t<React.Fragment key={index}>\n\t\t\t\t\t<Typography variant=\"body1\" className={classes.fieldGroupTitle}>\n\t\t\t\t\t\t{fieldType.name}\n\t\t\t\t\t</Typography>\n\t\t\t\t\t<Grid className={classes.container}>\n\t\t\t\t\t\t{fieldType.value &&\n\t\t\t\t\t\t\tfieldType.value.map((field, i) => {\n\t\t\t\t\t\t\t\tif(field.editorType && !field.editorType.includes(state.modelType)) {\n\t\t\t\t\t\t\t\t\treturn null;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tif(!showField(field)) {\n\t\t\t\t\t\t\t\t\treturn null;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t\t<div className={classes.fieldContainer} key={i}>\n\t\t\t\t\t\t\t\t\t\t<Widget\n\t\t\t\t\t\t\t\t\t\t\tid={field.id}\n\t\t\t\t\t\t\t\t\t\t\tattrs={field}\n\t\t\t\t\t\t\t\t\t\t\tdesign={true}\n\t\t\t\t\t\t\t\t\t\t\tcomponent={FieldComponent}\n\t\t\t\t\t\t\t\t\t\t\tisCoreField={true}\n\t\t\t\t\t\t\t\t\t\t\tisPalleteField={true}\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t})}\n\t\t\t\t\t</Grid>\n\t\t\t\t</React.Fragment>\n\t\t\t))}\n\t\t\t{/* {state.metaFields && state.metaFields.length > 0 && (\n\t\t\t\t<Grid>\n\t\t\t\t\t<Typography variant=\"body1\" className={classes.fieldGroupTitle}>\n\t\t\t\t\t\tExisting Fields\n\t\t\t\t\t</Typography>\n\t\t\t\t\t<ExistingFieldsView />\n\t\t\t\t</Grid>\n\t\t\t)} */}\n\t\t</>\n\t);\n});\n","import React from \"react\";\n\nexport function useDebounceEffect(handler, interval) {\n\tconst isMounted = React.useRef(false);\n\tReact.useEffect(() => {\n\t\tif (isMounted.current) {\n\t\t\tconst timer = setTimeout(() => handler(), interval);\n\t\t\treturn () => clearTimeout(timer);\n\t\t}\n\t\tisMounted.current = true;\n\t}, [handler, interval]);\n}\n","import React from \"react\";\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport Button from \"@material-ui/core/Button\";\nimport Grid from \"@material-ui/core/Grid\";\nimport Input from \"@material-ui/core/Input\";\nimport ChevronLeft from \"@material-ui/icons/ChevronLeft\";\nimport ChevronRight from \"@material-ui/icons/ChevronRight\";\nimport Typography from \"@material-ui/core/Typography\";\nimport Dialog from \"@material-ui/core/Dialog\";\nimport DialogActions from \"@material-ui/core/DialogActions\";\nimport DialogContent from \"@material-ui/core/DialogContent\";\nimport DialogTitle from \"@material-ui/core/DialogTitle\";\nimport useMediaQuery from \"@material-ui/core/useMediaQuery\";\nimport List from \"@material-ui/core/List\";\nimport ListItem from \"@material-ui/core/ListItem\";\nimport ListItemText from \"@material-ui/core/ListItemText\";\nimport { useTheme } from \"@material-ui/core/styles\";\nimport IconButton from \"@material-ui/core/IconButton\";\n\nconst useStyles = makeStyles((theme) => ({\n\troot: {\n\t\twidth: \"100%\",\n\t\tbackgroundColor: theme.palette.background.paper,\n\t\tmaxHeight: 300,\n    overflow: 'auto',\n\t},\n\tinput: {\n\t\twidth: \"80%\",\n\t\tmarginRight: 10,\n\t},\n\ttitleHeader: {\n\t\tborderBottom: '0.5px solid #ddd',\n\t},\n\tlistItem: {\n\t\tborderBottom: '1px solid #ddd',\n    paddingTop: 10,\n    paddingBottom: 10,\n\t},\n\tcloseText: {\n\t\ttextTransform: 'capitalize',\n\t}\n}));\n\nexport default function ResponsiveDialog(props) {\n\tconst { list = [], onChange, handleClose, offset, total, displayField, getOptionLabel } = props;\n\tconst theme = useTheme();\n\tconst classes = useStyles();\n\tconst fullScreen = useMediaQuery(theme.breakpoints.down(\"sm\"));\n\n\tconst handleItemClick = React.useCallback((item) => {\n\t\tonChange(item);\n\t\thandleClose();\n\t}, [onChange, handleClose]);\n\n\tconst canNext = offset + list.length < total;\n\tconst canPrev = offset > 0;\n\n\tconst getLabel = (item) => {\n\t\treturn getOptionLabel ? getOptionLabel(item) :  item[displayField || 'name'];\n\t}\n\n\treturn (\n\t\t<div>\n\t\t\t<Dialog\n\t\t\t\tfullScreen={fullScreen}\n\t\t\t\tmaxWidth=\"sm\"\n\t\t\t\tfullWidth={true}\n\t\t\t\topen={props.open}\n\t\t\t\tonClose={props.handleClose}\n\t\t\t\taria-labelledby=\"responsive-dialog-title\"\n\t\t\t>\n\t\t\t\t<DialogTitle id=\"responsive-dialog-title\" className={classes.titleHeader}>{`Search ${props.title || 'item'}`}</DialogTitle>\n\t\t\t\t<DialogContent>\n\t\t\t\t\t<Grid container>\n\t\t\t\t\t\t<Input\n\t\t\t\t\t\t\tclassName={classes.input}\n\t\t\t\t\t\t\tvalue={props.searchText}\n\t\t\t\t\t\t\tonChange={(e) => props.setSearchText(e.target.value)}\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t<IconButton onClick={props.onPrevious} disabled={!canPrev}>\n\t\t\t\t\t\t\t<ChevronLeft />\n\t\t\t\t\t\t</IconButton>\n\t\t\t\t\t\t<IconButton onClick={props.onNext} disabled={!canNext}>\n\t\t\t\t\t\t\t<ChevronRight />\n\t\t\t\t\t\t</IconButton>\n\t\t\t\t\t</Grid>\n\t\t\t\t\t<List className={classes.root}>\n\t\t\t\t\t\t{list.map((item, i) => (\n\t\t\t\t\t\t\t<ListItem\n\t\t\t\t\t\t\t\tclassName={classes.listItem}\n\t\t\t\t\t\t\t\tkey={i}\n\t\t\t\t\t\t\t\trole={undefined}\n\t\t\t\t\t\t\t\tdense\n\t\t\t\t\t\t\t\tbutton\n\t\t\t\t\t\t\t\tonClick={() => handleItemClick(item)}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<ListItemText id={i} primary={getLabel(item)} />\n\t\t\t\t\t\t\t</ListItem>\n\t\t\t\t\t\t))}\n\t\t\t\t\t</List>\n\t\t\t\t</DialogContent>\n\t\t\t\t<DialogActions>\n\t\t\t\t\t<Button autoFocus onClick={props.handleClose} color=\"primary\">\n\t\t\t\t\t\t<Typography className={classes.closeText}>Close</Typography>\n\t\t\t\t\t</Button>\n\t\t\t\t</DialogActions>\n\t\t\t</Dialog>\n\t\t</div>\n\t);\n}\n","import React, { useState, useEffect, useCallback } from \"react\";\nimport AutoComplete, {\n\tcreateFilterOptions,\n} from \"@material-ui/lab/Autocomplete\";\nimport { TextField, Typography } from \"@material-ui/core\";\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport AxelorService from \"../services/axelor.rest\";\nimport { camleCaseString } from \"../utils\";\nimport { useDebounceEffect } from \"./../common.func\";\nimport SearchView from './SearchView';\nconst filter = createFilterOptions();\nconst useStyles = makeStyles({\n\tautoComplete: {\n\t\tbackgroundColor: \"#2f4050\",\n\t\tmarginBottom: 5,\n\t\t\"& > div > label\": {\n\t\t\tcolor: \"#e7eaec !important\",\n\t\t\tfontSize: 14,\n\t\t},\n\t\t'.modern-dark &': {\n\t\t\tbackgroundColor: \"#323232\",\n\t\t}\n\t},\n\tinput: {\n\t\tcolor: \"#e7eaec\",\n\t\tfontSize: 14,\n\t},\n\troot: {\n\t\tcolor: \"#e7eaec\",\n\t},\n\terror: {\n\t\tcolor: 'red',\n\t\tmarginBottom: 5,\n\t\tfontSize: 14,\n\t}\n});\n\nexport default function SelectComponent(_props) {\n\tconst {\n\t\tname,\n\t\tref,\n\t\ttitle,\n\t\tvalueField = \"id\",\n\t\ttype,\n\t\tmultiple = false,\n\t\tcommaSeparated,\n\t\tdisplayField = \"name\",\n\t\tlimit = 10,\n\t\tdata: preData = [],\n\t\tisDisabled,\n\t\tneedsTargetModel,\n\t\tshowMore = false,\n\t\tcanAddNew = true,\n\t\tgetOptionLabel,\n\t\tfetchFieldList = [],\n\t\tshouldFetchInStart = false,\n\t} = _props.field;\n\tconst { props, error } = _props;\n\tconst {\n\t\tpropertyList,\n\t\tsetPropertyList,\n\t\tonChange,\n\t\teditWidgetType,\n\t\tmodelType,\n\t} = props;\n\tlet value = propertyList[name] || \"\";\n\tif (commaSeparated && type === \"select\") {\n\t\tconst values = value ? value.split(\",\") : [];\n\t\tvalue = values.map((val) => {\n\t\t\treturn { [valueField]: val };\n\t\t});\n\t}\n\tconst [data, setData] = useState([...preData]);\n\tconst [searchText, setsearchText] = useState(\"\");\n\tconst isMounted = React.useRef(true);\n\tconst [moreDialog, setMoreDialog] = useState(false);\n\tconst [offset, setOffset] = useState(0);\n\tconst [total, setTotal] = useState(0);\n\tconst [initialFetch, setInitialFetch] = useState(false);\n\tconst { targetModel } = propertyList;\n\tconst classes = useStyles();\n\tconst disabled = isDisabled\n\t\t? isDisabled(propertyList, editWidgetType, modelType)\n\t\t: false;\n\n\tconst handleInputChange = useCallback(\n\t\t(e, value, reason) => {\n\t\t\tif (reason !== \"reset\") {\n\t\t\t\tif (type === \"objectSelection\" && typeof value === \"object\") {\n\t\t\t\t\tsetsearchText(value[displayField]);\n\t\t\t\t} else {\n\t\t\t\t\tsetsearchText(value);\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\t[type, displayField]\n\t);\n\n\tconst getSelectValue = useCallback(\n\t\t(value = []) => {\n\t\t\tif (commaSeparated) {\n\t\t\t\treturn value ? value.map((e) => e.name).join(\",\") : \"\";\n\t\t\t}\n\t\t\treturn ref ? value[valueField] : value;\n\t\t},\n\t\t[valueField, commaSeparated, ref]\n\t);\n\n\tconst fetchOptions = useCallback(\n\t\t(searchText = \"\", offset = 0) => {\n\t\t\tconst criteria = [];\n\t\t\tif (searchText) {\n\t\t\t\tcriteria.push({\n\t\t\t\t\tfieldName: \"name\",\n\t\t\t\t\toperator: \"like\",\n\t\t\t\t\tvalue: searchText,\n\t\t\t\t});\n\t\t\t}\n\t\t\tif ((name === \"gridView\" || name === \"formView\") && needsTargetModel.includes(props.type)) {\n\t\t\t\tif (!targetModel) return;\n\t\t\t}\n\t\t\tif (name === \"gridView\") {\n\t\t\t\tneedsTargetModel.includes(props.type) && criteria.push({\n\t\t\t\t\tfieldName: \"model\",\n\t\t\t\t\toperator: \"=\",\n\t\t\t\t\tvalue: targetModel,\n\t\t\t\t});\n\t\t\t\tcriteria.push({ fieldName: \"type\", operator: \"=\", value: \"grid\" });\n\t\t\t}\n\t\t\tif (name === \"formView\") {\n\t\t\t\tneedsTargetModel.includes(props.type) && criteria.push({\n\t\t\t\t\tfieldName: \"model\",\n\t\t\t\t\toperator: \"=\",\n\t\t\t\t\tvalue: targetModel,\n\t\t\t\t});\n\t\t\t\tcriteria.push({ fieldName: \"type\", operator: \"=\", value: \"form\" });\n\t\t\t}\n\t\t\tconst data = {\n\t\t\t\tcriteria,\n\t\t\t\toperator: \"and\",\n\t\t\t};\n\t\t\tconst fields = [\"name\", \"fullName\", valueField, displayField, ...fetchFieldList].filter(\n\t\t\t\t(e) => e\n\t\t\t);\n\t\t\tif(shouldFetchInStart && initialFetch) {\n\t\t\t\t// setData(data);\n\t\t\t} else {\n\t\t\t\treturn new AxelorService({ model: ref })\n\t\t\t\t\t.search({ fields, data, limit, offset })\n\t\t\t\t\t.then(({ data, total }) => {\n\t\t\t\t\t\tsetInitialFetch(true);\n\t\t\t\t\t\tif (data && data.length) {\n\t\t\t\t\t\t\tif (isMounted.current) {\n\t\t\t\t\t\t\t\t!moreDialog && total > limit && data.push({ name: \"Show more...\", id: 'studio_show_More_View' })\n\t\t\t\t\t\t\t\tsetTotal(total);\n\t\t\t\t\t\t\t\tsetData(data);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t}\n\t\t},\n\t\t[name, ref, targetModel, valueField, displayField, limit, needsTargetModel, props.type, moreDialog, initialFetch, shouldFetchInStart]\n\t);\n\n\tconst optionDebounceHandler = React.useCallback(() => {\n\t\tref && fetchOptions(searchText);\n\t}, [fetchOptions, searchText, ref]);\n\n\tconst getValue = (value) => {\n\t\treturn typeof value === \"string\" && ref ? { [valueField]: value } : value;\n\t};\n\n\tconst getInputAsOption = React.useCallback((value) => {\n\t\tif (value && typeof value === \"string\" && ref) {\n\t\t\tvalue = { [valueField]: value };\n\t\t}\n\t\treturn value;\n\t}, [ref, valueField]);\n\n\tconst handleSearch = React.useCallback((value) => {\n\t\tsetsearchText(value);\n\t\tsetOffset(0);\n\t}, []);\n\n\tconst handleNext = React.useCallback(() => {\n\t\tconst newOffset = offset + limit;\n\t\tif(newOffset <= total) {\n\t\t\tsetOffset(newOffset);\n\t\t\tfetchOptions(searchText, newOffset)\n\t\t}\n\t}, [limit, total, offset, fetchOptions, searchText]);\n\n\tconst handlePrevious = React.useCallback(() => {\n\t\tlet newOffset = offset-limit;\n\t\tnewOffset = newOffset > 0 ? newOffset : 0;\n\t\tsetOffset(newOffset)\n\t\tfetchOptions(searchText, newOffset)\n\t}, [offset, limit, searchText, fetchOptions]);\n\n\tconst handleClose = React.useCallback(() => {\n\t\tsetMoreDialog(false);\n\t\tsetOffset(0);\n\t}, []);\n\n\tconst handleChange = React.useCallback((e, _value) => {\n\t\tif(_value?.id === 'studio_show_More_View') {\n\t\t\tsetMoreDialog(true);\n\t\t\treturn;\n\t\t}\n\t\tif (multiple) {\n\t\t\tif(e.fromDialog) {\n\t\t\t\t_value = [...value, _value];\n\t\t\t} else {\n\t\t\t\tconst hasMoreView = _value.findIndex(v => v?.id === 'studio_show_More_View') !== -1;\n\t\t\t\tif(hasMoreView) {\n\t\t\t\t\tsetMoreDialog(true);\n\t\t\t\t}\n\t\t\t}\n\t\t\t_value = _value.map((val) => {\n\t\t\t\tif(val?.id !== 'studio_show_More_View') {\n\t\t\t\t\treturn getInputAsOption(val)\n\t\t\t\t}\n\t\t\t\treturn undefined;\n\t\t\t}).filter(e => e);\n\t\t} else {\n\t\t\tif (_value && _value.inputValue && _value.inputValue.length && ref) {\n\t\t\t\t_value[valueField] = _value.inputValue;\n\t\t\t}\n\t\t}\n\t\tsetsearchText(\"\");\n\t\tsetPropertyList({\n\t\t\t...propertyList,\n\t\t\t[name]:\n\t\t\t\ttype === \"objectSelection\"\n\t\t\t\t\t? _value\n\t\t\t\t\t: _value && getSelectValue(_value),\n\t\t});\n\t\tonChange({\n\t\t\t...propertyList,\n\t\t\t[name]:\n\t\t\t\ttype === \"objectSelection\"\n\t\t\t\t\t? _value\n\t\t\t\t\t: _value && getSelectValue(_value),\n\t\t});\n\t}, [getSelectValue, multiple, name, onChange, setPropertyList, propertyList, value, type, ref, getInputAsOption,valueField]);\n\n\n\tuseDebounceEffect(optionDebounceHandler, 500);\n\n\tuseEffect(() => {\n\t\tisMounted.current = true;\n\t\tfetchOptions();\n\t\treturn () => {\n\t\t\tisMounted.current = false;\n\t\t};\n\t}, [fetchOptions]);\n\n\tuseEffect(() => {\n\t\tif (!multiple) {\n\t\t\tif (typeof value === \"object\") {\n\t\t\t\tsetsearchText(value[displayField]);\n\t\t\t} else {\n\t\t\t\tsetsearchText(value);\n\t\t\t}\n\t\t}\n\t}, [multiple, value, displayField, type]);\n\treturn (\n\t\t<React.Fragment>\n\t\t\t<AutoComplete\n\t\t\t\tclasses={{\n\t\t\t\t\tinputFocused: classes.input,\n\t\t\t\t\tclearIndicator: classes.input,\n\t\t\t\t\tpopupIndicator: classes.input,\n\t\t\t\t}}\n\t\t\t\tclassName={classes.autoComplete}\n\t\t\t\tdisabled={disabled}\n\t\t\t\tmultiple={multiple}\n\t\t\t\toptions={data}\n\t\t\t\tfreeSolo={type !== \"objectSelection\"}\n\t\t\t\tvalue={multiple ? value || [] : getValue(value)}\n\t\t\t\tinputValue={searchText || \"\"}\n\t\t\t\tonInputChange={handleInputChange}\n\t\t\t\t{...(!multiple && {\n\t\t\t\t\tfilterOptions: (options, params) => {\n\t\t\t\t\t\tconst filtered = filter(options, params);\n\t\t\t\t\t\t// Suggest the creation of a new value\n\t\t\t\t\t\tif (searchText !== \"\" && canAddNew) {\n\t\t\t\t\t\t\tfiltered.splice(0, 0, {\n\t\t\t\t\t\t\t\tinputValue: searchText,\n\t\t\t\t\t\t\t\tname: `Add \"${searchText}\"`,\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\t\t\t\t\t\tconst showMore = options.find(o => o.id === 'studio_show_More_View');\n\t\t\t\t\t\tif(showMore && !['', null, undefined].includes(params.inputValue)) {\n\t\t\t\t\t\t\tconst hasShowMore = filtered.findIndex(o => o.id === 'studio_show_More_View') !== -1;\n\n\t\t\t\t\t\t\t!hasShowMore && filtered.push({...showMore});\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\treturn filtered;\n\t\t\t\t\t},\n\t\t\t\t})}\n\t\t\t\tonChange={handleChange}\n\t\t\t\trenderInput={(params) => (\n\t\t\t\t\t<TextField\n\t\t\t\t\t\t{...params}\n\t\t\t\t\t\tvariant=\"filled\"\n\t\t\t\t\t\tlabel={camleCaseString(title || name)}\n\t\t\t\t\t/>\n\t\t\t\t)}\n\t\t\t\tgetOptionLabel={(option) => {\n\t\t\t\t\tif(getOptionLabel) {\n\t\t\t\t\t\treturn getOptionLabel(option, data);\n\t\t\t\t\t}\n\t\t\t\t\treturn typeof option === \"string\" ? option : option[displayField] || \"\"\n\t\t\t\t}}\n\t\t\t\t// getOptionSelected={(option) => {\n\t\t\t\t// \treturn typeof option === 'object' ? option[valueField] === value : option === value;\n\t\t\t\t// }}\n\t\t\t/>\n\t\t\t{error && <Typography className={classes.error}>{error}</Typography>}\n\t\t\t{moreDialog && <SearchView searchText={searchText}\n\t\t\t\tlist={data}\n\t\t\t\ttotal={total}\n\t\t\t\toffset={offset}\n\t\t\t\tdisplayField={displayField}\n\t\t\t\topen={moreDialog}\n\t\t\t\tonNext={handleNext}\n\t\t\t\tonPrevious={handlePrevious}\n\t\t\t\thandleClose={handleClose}\n\t\t\t\tsetSearchText={handleSearch}\n\t\t\t\ttitle={camleCaseString(title || name)}\n\t\t\t\tonChange={(value) => handleChange({fromDialog: true}, value)}  />}\n\t\t</React.Fragment>\n\t);\n}\n","import React from \"react\";\nimport {\n\tTextField,\n\tTypography,\n} from \"@material-ui/core\";\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport { useStore } from \"../store/context\";\nconst useStyles = makeStyles({\n\tcontainer: {\n\t\tmarginBottom: 15,\n\t},\n\trow: {\n\t\tdisplay: \"flex\",\n\t},\n\tlanguageText: {\n\t\twidth: \"15%\",\n\t\tmarginTop: 8,\n\t\ttextTransform: \"capitalize\",\n\t\ttextAlign: \"center\",\n\t},\n});\n\nfunction TranslationGrid(props) {\n\tconst classes = useStyles();\n\tconst { state, update } = useStore();\n\tconst { keyValue, ...rest } = props;\n\tconst { translationList } = state;\n\tconst [translations, setTranslations] = React.useState([]);\n\n\tconst handleTranslationChange = React.useCallback(\n\t\t({ key, message, language }) => {\n\t\t\tsetTranslations((_translations) => {\n\t\t\t\tlet newList = [..._translations];\n\t\t\t\tconst translationIndex = newList.findIndex(\n\t\t\t\t\t(e) => e.key === key && e.language === language\n\t\t\t\t);\n\n\t\t\t\tif (translationIndex !== -1) {\n\t\t\t\t\tnewList[translationIndex] = {...newList[translationIndex], message};\n\t\t\t\t} else {\n\t\t\t\t\tnewList.push({ key, message, language });\n\t\t\t\t}\n\t\t\t\treturn [...newList];\n\t\t\t});\n\t\t},\n\t\t[]\n\t);\n\n\tconst handleTranslationUpdate = React.useCallback(\n\t\t({ key, message, language }) => {\n\t\t\tupdate((draft) => {\n\t\t\t\tconst translationIndex = draft.translationList.findIndex(\n\t\t\t\t\t(e) => e.key === key && e.language === language\n\t\t\t\t);\n\n\t\t\t\tif (translationIndex !== -1) {\n\t\t\t\t\tdraft.translationList[translationIndex].message = message;\n\t\t\t\t} else {\n\t\t\t\t\tdraft.translationList.push({ key, message, language });\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\t\t[update]\n\t);\n\n\tReact.useEffect(() => {\n\t\tsetTranslations([...translationList]);\n\t}, [translationList]);\n\n\treturn (\n\t\t<div className={classes.container}>\n\t\t\t{state.languageList.map((lang, i) => (\n\t\t\t\t<div key={i} className={classes.row}>\n\t\t\t\t\t<Typography classes={{ root: classes.languageText }}>\n\t\t\t\t\t\t{lang.value}\n\t\t\t\t\t</Typography>\n\t\t\t\t\t<TextField\n\t\t\t\t\t\tvariant=\"outlined\"\n\t\t\t\t\t\t{...rest}\n\t\t\t\t\t\tvalue={\n\t\t\t\t\t\t\ttranslations.find(\n\t\t\t\t\t\t\t\t(e) => e.key === keyValue && e.language === lang.value\n\t\t\t\t\t\t\t)?.message || ''\n\t\t\t\t\t\t}\n\t\t\t\t\t\tonChange={(e) => handleTranslationChange({\n\t\t\t\t\t\t\tkey: keyValue,\n\t\t\t\t\t\t\tmessage: e.target.value,\n\t\t\t\t\t\t\tlanguage: lang.value,\n\t\t\t\t\t\t})}\n\t\t\t\t\t\tonBlur={(e) =>\n\t\t\t\t\t\t\te.target.value && handleTranslationUpdate({\n\t\t\t\t\t\t\t\tkey: keyValue,\n\t\t\t\t\t\t\t\tmessage: e.target.value,\n\t\t\t\t\t\t\t\tlanguage: lang.value,\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t}\n\t\t\t\t\t/>\n\t\t\t\t</div>\n\t\t\t))}\n\t\t</div>\n\t);\n}\n\nexport default TranslationGrid;\n","import { conditionProperties } from \"../constants\";\nimport AxelorService from \"./../services/axelor.rest\";\nimport Utils, { generateCustomModelSchema, getMenuBuilder } from \"./../utils\";\n\nconst metaJsonFieldService = new AxelorService({\n\tmodel: \"com.axelor.meta.db.MetaJsonField\",\n});\nexport const metaModelService = new AxelorService({\n\tmodel: \"com.axelor.meta.db.MetaJsonModel\",\n});\nconst metaFieldService = new AxelorService({\n\tmodel: \"com.axelor.meta.db.MetaJsonField\",\n});\nexport const entityModelService = new AxelorService({\n\tmodel: \"com.axelor.studio.db.EntityModel\",\n});\nconst appService = new AxelorService({ model: \"com.axelor.apps.base.db.App\" });\nconst appBpmService = new AxelorService({ model: \"com.axelor.apps.base.db.AppBpm\" });\nconst appUserService = new AxelorService({ model: \"com.axelor.auth.db.User\" });\n\nconst metaViewService = new AxelorService({\n\tmodel: \"com.axelor.meta.db.MetaView\",\n});\nexport const modelService = new AxelorService({\n\tmodel: \"com.axelor.meta.db.MetaModel\",\n});\n\nexport const metaAttrsService = new AxelorService({\n\tmodel: \"com.axelor.meta.db.MetaAttrs\",\n});\n\nexport const metaSelectService = new AxelorService({\n\tmodel: \"com.axelor.meta.db.MetaSelect\",\n});\n\n\nexport const selectionBuilderService = new AxelorService({\n\tmodel: \"com.axelor.studio.db.SelectionBuilder\",\n});\n\nexport const metaTranslationService = new AxelorService({\n\tmodel: \"com.axelor.meta.db.MetaTranslation\",\n});\n\nexport function fetchCustomFields(modelField, model) {\n\tconst _domain = `self.jsonModel = null and self.modelField='${modelField.name}' and self.model='${model.fullName}'`;\n\treturn metaJsonFieldService.search({\n\t\tdata: { _domain },\n\t\tsortBy: [\"sequence\"],\n\t});\n}\n\nexport function saveCustomModel(model) {\n\treturn metaModelService.save(model);\n}\n\nexport function fetchJSONFields(ids, update, record = {}) {\n\tconst criteria = [];\n\tif (ids.length) {\n\t\tcriteria.push({ fieldName: \"id\", operator: \"in\", value: ids });\n\n\t\tconst data = {\n\t\t\tcriteria,\n\t\t};\n\t\tmetaFieldService.search({ data, sortBy: [\"sequence\"] }).then((res) => {\n\t\t\tif (res.data) {\n\t\t\t\tconst list = res.data || [];\n\t\t\t\tconst schema = generateCustomModelSchema(list, record);\n\t\t\t\tupdate((draft) => {\n\t\t\t\t\tdraft.items = list.filter((l) => l.type === \"panel\").map((e) => e.id);\n\t\t\t\t\tdraft.widgets = {\n\t\t\t\t\t\t...schema.widgets,\n\t\t\t\t\t};\n\t\t\t\t\tdraft.items = schema.items;\n\t\t\t\t});\n\t\t\t}\n\t\t});\n\t} else {\n\t\tupdate((draft) => {\n\t\t\tdraft.widgets = {\n\t\t\t\t\"-1\": {\n\t\t\t\t\ttype: \"form\",\n\t\t\t\t\t...record,\n\t\t\t\t\t...getMenuBuilder(record ? record.menuBuilder : undefined),\n\t\t\t\t},\n\t\t\t\t\"0\": { type: \"dump_field\", name: \"\" },\n\t\t\t};\n\t\t\tdraft.items = [];\n\t\t\tdraft.loader = false;\n\t\t});\n\t}\n}\n\nexport function removeCustomModel(model) {\n\treturn metaModelService.removeAll([model]);\n}\n\nexport async function getEnableAppBuilder() {\n\tconst payload = {\n\t\tdata : {\n\t\t\t_domain:\"self.app.code = :code\",\n\t\t\t_domainContext: {code: \"bpm\" }\n\t\t},\n\t\tfields: [\"enableAppBuilder\"],\n\t\tlimit: 1,\n\t\toffset: 0\n\t};\n\tconst bpmResult = await appBpmService.search({...payload});\n\tif(Array.isArray(bpmResult.data) && bpmResult.data[0]) {\n\t\treturn bpmResult.data[0].enableAppBuilder;\n\t}\n\t// const appResult = await appService.search({})\n\t// if(Array.isArray(appResult.data)) {\n\t// \tconst bpmApp = appResult.data.find(item => item.code === 'bpm');\n\t// \tif (bpmApp) {\n\t// \t\tconst payloadData = {\n\t// \t\t\tdata: { context: {...bpmApp, _model: appService.model} },\n\t// \t\t\taction: \"com.axelor.apps.base.web.AppController:configure\",\n\t// \t\t\tmodel: appService.model,\n\t// \t\t}\n\t// \t\tconst actionResponse = await appService.action(payloadData);\n\t// \t\tif(Array.isArray(actionResponse.data) && actionResponse.data[0]) {\n\t// \t\t\tconst showRecord = actionResponse.data[0].view.context._showRecord;\n\t// \t\t\tconst bpmResult = appBpmService.fetch(showRecord, {fields: ['enableAppBuilder']});\n\t// \t\t\tif(Array.isArray(bpmResult.data) && bpmResult.data[0]) {\n\t// \t\t\t\treturn bpmResult.data[0].enableAppBuilder;\n\t// \t\t\t}\n\t// \t\t}\n\t// \t\t// return bpmApp.enableAppBuilder;\n\t// \t}\n\t// }\n\treturn false;\n}\n\nexport async function generateMenuChange(customModel) {\n\tconst _context = {\n\t\t_model: \"com.axelor.meta.db.MetaJsonModel\",\n\t\t_id: null,\n\t\t...customModel,\n\t};\n\tconst changeAction =\n\t\t\"action-studio-json-model-method-isgeneratemenu-onchange\";\n\tconst data = {\n\t\taction: changeAction,\n\t\tmodel: \"com.axelor.meta.db.MetaJsonModel\",\n\t\tdata: {\n\t\t\tcontext: _context,\n\t\t},\n\t};\n\treturn await metaModelService.action(data);\n}\n\nexport async function fetchCustomModel(modelId) {\n\tconst result = await metaModelService.fetch(modelId);\n\tconst { data = [] } = result;\n\treturn data[0];\n}\n\nexport async function fetchEntityModel(model) {\n\tconst result = await entityModelService.fetch(model.id);\n\tconst { data = [] } = result;\n\treturn data[0];\n}\n\nexport async function removeEntityModel(model) {\n\treturn entityModelService.removeAll([model]);\n}\n\nexport async function fetchEntityFields(model) {\n\tconst _data = {\n\t\t_domain: `self.packageName = '${model.packageName}' and self.name = '${model.name}'`,\n\t}\n\tconst result = await entityModelService.search({data: _data});\n\tconst { data = [] } = result;\n\tconst record = data[0];\n\n\tlet fields = [];\n\tif(record) {\n\t\tfields = Utils.getEntityModelFields(record.entityXml);\n\t}\n\treturn fields;\n}\n\nexport async function fetchViews(view) {\n\tconst viewCriteria = {\n\t\toperator: \"and\",\n\t\tcriteria: [\n\t\t\t{ fieldName: \"name\", operator: \"=\", value: `${view.name}` },\n\t\t],\n\t};\n\tconst viewList = await metaViewService.search({ data: viewCriteria });\n\tlet views;\n\tif(viewList.data) {\n\t\tviews = Utils.getViews(viewList.data, view.name);\n\t}\n\treturn views;\n}\n\nexport async function fetchModelFields(model) {\n\tlet fields = [];\n\tconst _data = {\n\t\t_domain: `self.packageName = '${model.packageName}' and self.name = '${model.name}'`,\n\t}\n\tconst result = await modelService.search({data: _data});\n\tif(result.data && result.data[0]) {\n\t\tconst record = result.data[0];\n\t\tconst data = {\n\t\t\tfields: [\"metaFields\"],\n\t\t\trelated: {\n\t\t\t\tmetaFields: [\n\t\t\t\t\t\"typeName\",\n\t\t\t\t\t\"label\",\n\t\t\t\t\t\"mappedBy\",\n\t\t\t\t\t\"relationship\",\n\t\t\t\t\t\"name\",\n\t\t\t\t\t\"packageName\",\n\t\t\t\t\t\"typeName\",\n\t\t\t\t],\n\t\t\t},\n\t\t};\n\t\tconst modelData = await modelService.fetch(record.id, data);\n\n\t\tif(modelData && modelData.data[0]) {\n\t\t\tfields = modelData.data[0].metaFields;\n\t\t\treturn fields;\n\t\t}\n\t}\n\treturn fields;\n}\n\nexport async function fetchAttrsList({model, view}) {\n\tconst criteria = [\n\t\t{fieldName: 'model', operator: '=', value: model},\n\t\t{fieldName: 'view', operator: '=', value: view},\n\t];\n\tconst result = await metaAttrsService.search({data: {criteria}, limit: null});\n\tif(result.data && Array.isArray(result.data)) {\n\t\tconst conditionPropertiesKeys = Object.keys(conditionProperties);\n\t\tconst conditionPropertiesValues = Object.values(conditionProperties);\n\n\t\tconst data = [...result.data].map(item => {\n\t\t\tif(conditionPropertiesValues.includes(item.name)) {\n\t\t\t\tif(item.value.startsWith('\"') && item.value.endsWith('\"')) {\n\t\t\t\t\titem.value = item.value.replace(`\"`, '')\n\t\t\t\t\titem.value = item.value.replace(`\"`, '')\n\t\t\t\t} else {\n\t\t\t\t\tif(!['true', 'false'].includes(item.value)) {\n\t\t\t\t\t\titem.name = conditionPropertiesKeys[conditionPropertiesValues.indexOf(item.name)];\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\titem.value = item.value.replace(`\"`, '')\n\t\t\t\titem.value = item.value.replace(`\"`, '')\n\t\t\t}\n\t\t\treturn item;\n\t\t});\n\t\treturn data;\n\t}\n\treturn [];\n}\n\nexport async function saveAttrsList(list) {\n\tconst result = await metaAttrsService.saveAll([...list]);\n\tif(result.data && Array.isArray(result.data)) {\n\t\treturn result.data;\n\t}\n\treturn [];\n}\n\nexport async function deleteAttrsList(list) {\n\tconst result = await metaAttrsService.removeAll(list);\n\tif(result.data && Array.isArray(result.data)) {\n\t\treturn result.data;\n\t}\n\treturn [];\n}\n\nexport async function fetchLanguages() {\n\tconst criteria = [\n\t\t{fieldName: 'name', operator: '=', value: 'select.language'}\n\t];\n\tconst result = await metaSelectService.search({data: {criteria}, fields: [\"items.value\", \"items.title\"]});\n\tif(result && result.data && Array.isArray(result.data)) {\n\n\t\treturn result.data.map(d => {\n\t\t\treturn {title: d['items.title'], value: d['items.value']}\n\t\t});\n\t}\n\treturn [];\n}\n\nexport async function getTranslationList(keyList) {\n\tconst criteria = [\n\t\t{fieldName: 'key', operator: 'in', value: keyList}\n\t];\n\tconst result = await metaTranslationService.search({data: {criteria}});\n\tif(result.data && Array.isArray(result.data)) {\n\t\treturn result.data;\n\t}\n\treturn [];\n}\n\nexport async function saveTranslationList(list) {\n\tconst result = await metaTranslationService.saveAll([...list]);\n\tif(result.data && Array.isArray(result.data)) {\n\t\treturn result.data;\n\t}\n\treturn [];\n}\n\nexport async function deleteTranslationList(list) {\n\tconst result = await metaTranslationService.removeAll(list);\n\tif(result.data && Array.isArray(result.data)) {\n\t\treturn result.data;\n\t}\n\treturn [];\n}\n\nexport async function fetchUserPreferences() {\n\tconst userInfo = await appUserService.info();\n\tif(userInfo && userInfo['user.id']) {\n\t\tconst userResponse = await appUserService.fetch(userInfo['user.id']);\n\t\tif(userResponse.data && userResponse.data[0]) {\n\t\t\treturn userResponse.data[0];\n\t\t}\n\t}\n\treturn null;\n}\n\nexport async function getSelectionText(metaSelect) {\n\tlet selectionText = '';\n\tif(metaSelect) {\n\t\tconst context = {\n\t\t\tmetaSelect: {\n\t\t\t\t...metaSelect,\n\t\t\t},\n\t\t};\n\t\tconst payloadData = {\n\t\t\tdata: { context },\n\t\t\taction: 'action-selection-builder-method-fill-selection-text',\n\t\t\tmodel: \"com.axelor.studio.db.SelectionBuilder\",\n\t\t}\n\t\tconst actionResponse = await selectionBuilderService.action(payloadData);\n\t\tconst {data = []} = actionResponse;\n\t\tif(data[0]) {\n\t\t\tconst _properties = data[0].values || {};\n\t\t\tif(_properties.selectionText) {\n\t\t\t\tselectionText = _properties.selectionText;\n\t\t\t}\n\t\t}\n\t}\n\treturn selectionText;\n}\n","import React from \"react\";\nimport Button from \"@material-ui/core/Button\";\nimport Dialog from \"@material-ui/core/Dialog\";\nimport DialogActions from \"@material-ui/core/DialogActions\";\nimport DialogContent from \"@material-ui/core/DialogContent\";\nimport DialogContentText from \"@material-ui/core/DialogContentText\";\nimport DialogTitle from \"@material-ui/core/DialogTitle\";\n\nexport default function DeleteConfirmation({ onOk, onClose, open, message }) {\n\treturn (\n\t\t<Dialog\n\t\t\topen={open}\n\t\t\tonClose={onClose}\n\t\t\taria-labelledby=\"alert-dialog-title\"\n\t\t\taria-describedby=\"alert-dialog-description\"\n\t\t>\n\t\t\t<DialogTitle id=\"alert-dialog-title\">{\"Delete Confirmation\"}</DialogTitle>\n\t\t\t<DialogContent>\n\t\t\t\t<DialogContentText id=\"alert-dialog-description\">\n\t\t\t\t\t{message}\n\t\t\t\t</DialogContentText>\n\t\t\t</DialogContent>\n\t\t\t<DialogActions>\n\t\t\t\t<Button onClick={onOk} color=\"primary\">\n\t\t\t\t\tYes\n\t\t\t\t</Button>\n\t\t\t\t<Button onClick={onClose} color=\"primary\" autoFocus>\n\t\t\t\t\tNo\n\t\t\t\t</Button>\n\t\t\t</DialogActions>\n\t\t</Dialog>\n\t);\n}\n","import React, { useState } from \"react\";\nimport {\n\tTextField,\n\tGrid,\n\tTypography,\n\tFormControlLabel,\n\tSwitch,\n\tIcon,\n\tSelect,\n\tMenuItem,\n\tInputLabel,\n\tFormControl,\n\tIconButton,\n} from \"@material-ui/core\";\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport { options } from \"./list\";\nimport {\n\tcamleCaseString,\n\ttranslate,\n\tgetProperty,\n\tgetPropertyValue,\n\tgenerateFieldUniqueTitle,\n} from \"../utils\";\nimport SelectComponent from \"../components/SelectComponent\";\nimport { MODEL_TYPE, TYPE, typeReplacer, ENTITY_TYPE } from \"../constants\";\nimport { useStore } from \"../store/context\";\nimport { JsonRelationalField, SelectableType, TargetJsonModel, TargetModel } from \"./propertyFields\";\nimport TranslationGrid from \"../components/TranslationGrid\";\nimport TranslateIcon from \"@material-ui/icons/Translate\";\nimport CloseIcon from \"@material-ui/icons/Delete\";\nimport ClearIcon from \"@material-ui/icons/Close\";\nimport {getSelectionText} from \"../Toolbar/api\";\n\nimport DialogConfirmation from \"../Toolbar/DeleteConfirmation\";\n\nconst useStyles = makeStyles({\n\tinput: {\n\t\tbackgroundColor: \"#2f4050\",\n\t\tmarginBottom: 15,\n\t\t'.modern-dark &': {\n\t\t\tbackgroundColor: \"#323232\",\n\t\t}\n\t},\n\ttranslationInput: {\n\t\tpaddingTop: 10,\n\t\tpaddingBottom: 10,\n\t},\n\ttranslationInputView: {\n\t\tbackgroundColor: \"#2f4050\",\n\t\tmarginBottom: 5,\n\t\t'.modern-dark &': {\n\t\t\tbackgroundColor: \"#323232\",\n\t\t}\n\t},\n\tlabel: {\n\t\tcolor: \"#e7eaec\",\n\t\tfontSize: 14,\n\t\t\"&#outlined-basic-label\": {\n\t\t\tcolor: \"#e7eaec\",\n\t\t},\n\t},\n\toutlinedRoot: {\n\t\tcolor: \"#e7eaec\",\n\t\t\"&:hover $notchedOutline\": {\n\t\t\tborderColor: \"#e7eaec\",\n\t\t},\n\t\t\"&$focused $notchedOutline\": {\n\t\t\tborderColor: \"white\",\n\t\t\tborderWidth: 1,\n\t\t},\n\t},\n\tnotchedOutline: {},\n\tfocused: {\n\t\tcolor: \"#e7eaec\",\n\t},\n\tswitchBase: {\n\t\t\"&$checked\": {\n\t\t\tcolor: \"#e7eaec\",\n\t\t},\n\t\t\"&$checked + $track\": {\n\t\t\tbackgroundColor: \"#e7eaec\",\n\t\t},\n\t},\n\tchecked: {},\n\ttrack: {},\n\tselection: {\n\t\tcolor: \"#e7eaec\",\n\t\tbackgroundColor: \"#2f4050\",\n\t\t'.modern-dark &': {\n\t\t\tbackgroundColor: \"#323232\",\n\t\t}\n\t},\n\ticonOutlined: {\n\t\tcolor: \"#e7eaec\",\n\t},\n\tpanelTitle: {\n\t\tcolor: \"peachpuff\",\n\t\tmargin: \"10px 0px\",\n\t\tfontWeight: \"bold\",\n\t},\n\tdisableInput: {\n\t\tcolor: \"#e7eaec\",\n\t},\n\tunique: {\n\t\tcolor: \"#0275d8\",\n\t},\n\trequired: {\n\t\tcolor: \"red\",\n\t},\n\ttranslateButton: {\n\t\tcolor: \"#e7eaec\",\n\t},\n});\n\nconst PropertiesContext = React.createContext();\n\nfunction Label(text, field) {\n\tconst classes = useStyles();\n\treturn (\n\t\t<span>\n\t\t\t<span>{text}</span>\n\t\t\t{field.unique && <span className={classes.unique}> (unique) </span>}\n\t\t\t{field.required && <span className={classes.required}> * </span>}\n\t\t</span>\n\t);\n}\n\nconst isValueGenerated = (value) => {\n\treturn value.includes(\"studio:\");\n};\n\nconst hasPropertyToShow = (list, type) => {\n\treturn list.filter(item => !item.dependModelType || item.dependModelType === type).length > 0;\n}\n\nfunction StringInput(_props) {\n\tconst { index, multiline = false, error, parentPanel, onTranslationRemove, clearable = false } = _props;\n\tconst classes = useStyles();\n\tconst [confirm, setConfirm] = React.useState(false);\n\tconst {\n\t\ttitle,\n\t\tname,\n\t\ttype,\n\t\trequired,\n\t\treadOnly,\n\t\tmax,\n\t\tmin,\n\t\tparentField,\n\t\ttranslationView,\n\t\t...rest\n\t} = _props.field;\n\tconst props = React.useContext(PropertiesContext);\n\tconst {\n\t\tpropertyList,\n\t\tsetPropertyList,\n\t\tonChange,\n\t\tmodelType,\n\t\tmetaFieldStore,\n\t\teditWidgetType,\n\t} = props;\n\tlet label = Label(translate(camleCaseString(title || name)), _props.field);\n\tlet placeholder = translate(camleCaseString(title || name));\n\tif (name === \"showIf\" || name === \"requiredIf\") {\n\t\tplaceholder = \"id == 1\";\n\t} else if (name === \"hideIf\") {\n\t\tplaceholder = \"id == null\";\n\t} else if (name === \"readOnlyIf\") {\n\t\tplaceholder = \"id != null\";\n\t}\n\tlet value = propertyList[name] || \"\";\n\tif (\n\t\t(modelType === rest.modelType || props.editWidgetType === \"customField\") &&\n\t\tparentField\n\t) {\n\t\tconst field = propertyList[parentField]\n\t\t\t? JSON.parse(propertyList[parentField])\n\t\t\t: {};\n\t\tvalue = field[name] || \"\";\n\t}\n\tif (rest.formatter) {\n\t\tvalue = rest.formatter(value, propertyList);\n\t}\n\tlet disabled = Boolean(readOnly);\n\tif (rest.isDisabled) {\n\t\tdisabled = rest.isDisabled({\n\t\t\tproperties: propertyList,\n\t\t\tmetaFieldStore,\n\t\t\teditWidgetType,\n\t\t\tmodelType,\n\t\t\tparentPanel,\n\t\t});\n\t}\n\n\tconst handleTranslationClick = React.useCallback(() => {\n\t\tif (isValueGenerated(value)) {\n\t\t\treturn;\n\t\t}\n\t\tconst newValue = generateFieldUniqueTitle({\n\t\t\tname,\n\t\t\tfieldName: propertyList[name] || type,\n\t\t});\n\t\tonChange(\n\t\t\t{\n\t\t\t\t...(propertyList || {}),\n\t\t\t\t...getProperty(\n\t\t\t\t\tname,\n\t\t\t\t\tnewValue,\n\t\t\t\t\tparentField,\n\t\t\t\t\tpropertyList[parentField],\n\t\t\t\t\t(!(modelType === rest.modelType)  || editWidgetType === 'customField')\n\t\t\t\t),\n\t\t\t},\n\t\t\tname\n\t\t);\n\t}, [\n\t\tpropertyList,\n\t\tname,\n\t\ttype,\n\t\tvalue,\n\t\tonChange,\n\t\trest.modelType,\n\t\tmodelType,\n\t\tparentField,\n\t\teditWidgetType\n\t]);\n\n\tconst handleTranslationRemove = React.useCallback(() => {\n\t\tsetConfirm(false);\n\t\tonChange(\n\t\t\t{\n\t\t\t\t...(propertyList || {}),\n\t\t\t\t...getProperty(\n\t\t\t\t\tname,\n\t\t\t\t\t\"\",\n\t\t\t\t\tparentField,\n\t\t\t\t\tpropertyList[parentField],\n\t\t\t\t\t!(modelType === rest.modelType)\n\t\t\t\t),\n\t\t\t},\n\t\t\tname\n\t\t);\n\t\tonTranslationRemove(value);\n\t}, [onTranslationRemove, value, name, parentField, modelType, onChange, propertyList, rest.modelType]);\n\n\tconst removeTranslation = React.useCallback(() => {\n\t\tsetConfirm(true);\n\t}, []);\n\n\tconst onClose = React.useCallback(() => {\n\t\tsetConfirm(false);\n\t}, []);\n\n\treturn (\n\t\t<React.Fragment>\n\t\t\t<TextField\n\t\t\t\terror={Boolean(error)}\n\t\t\t\thelperText={error}\n\t\t\t\tInputProps={{\n\t\t\t\t\tclasses: {\n\t\t\t\t\t\troot: classes && classes.outlinedRoot,\n\t\t\t\t\t\tnotchedOutline: classes && classes.notchedOutline,\n\t\t\t\t\t\tfocused: classes && classes.focused,\n\t\t\t\t\t\tdisabled: classes && classes.disableInput,\n\t\t\t\t\t},\n\t\t\t\t\tendAdornment: translationView ? (\n\t\t\t\t\t\tisValueGenerated(value) ? (\n\t\t\t\t\t\t\t<IconButton\n\t\t\t\t\t\t\t\tclassName={classes.translateButton}\n\t\t\t\t\t\t\t\tonClick={removeTranslation}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<CloseIcon />\n\t\t\t\t\t\t\t</IconButton>\n\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\t<IconButton\n\t\t\t\t\t\t\t\tclassName={classes.translateButton}\n\t\t\t\t\t\t\t\tonClick={handleTranslationClick}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<TranslateIcon />\n\t\t\t\t\t\t\t</IconButton>\n\t\t\t\t\t\t)\n\t\t\t\t\t) : clearable ?\n\t\t\t\t\t<IconButton\n\t\t\t\t\t\t\t\tclassName={classes.translateButton}\n\t\t\t\t\t\t\t\tonClick={() => {\n\t\t\t\t\t\t\t\t\tlet value = '';\n\t\t\t\t\t\t\t\t\tlet flag = true;\n\t\t\t\t\t\t\t\t\tif (\n\t\t\t\t\t\t\t\t\t\trest.modelType === MODEL_TYPE.BASE &&\n\t\t\t\t\t\t\t\t\t\tprops.editWidgetType !== \"customField\"\n\t\t\t\t\t\t\t\t\t) {\n\t\t\t\t\t\t\t\t\t\tflag =\n\t\t\t\t\t\t\t\t\t\t\tvalue === \"\"\n\t\t\t\t\t\t\t\t\t\t\t\t? propertyList[name] !== undefined\n\t\t\t\t\t\t\t\t\t\t\t\t\t? true\n\t\t\t\t\t\t\t\t\t\t\t\t\t: false\n\t\t\t\t\t\t\t\t\t\t\t\t: true;\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\tif (\n\t\t\t\t\t\t\t\t\t\trest.modelType === MODEL_TYPE.CUSTOM &&\n\t\t\t\t\t\t\t\t\t\tprops.editWidgetType === \"customField\"\n\t\t\t\t\t\t\t\t\t) {\n\t\t\t\t\t\t\t\t\t\t// set null value when value is negative for custom view & custom fields\n\t\t\t\t\t\t\t\t\t\tvalue = value || null;\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\tif (flag) {\n\t\t\t\t\t\t\t\t\t\tonChange(\n\t\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\t\t...(propertyList || {}),\n\t\t\t\t\t\t\t\t\t\t\t\t...getProperty(\n\t\t\t\t\t\t\t\t\t\t\t\t\tname,\n\t\t\t\t\t\t\t\t\t\t\t\t\tvalue,\n\t\t\t\t\t\t\t\t\t\t\t\t\tparentField,\n\t\t\t\t\t\t\t\t\t\t\t\t\tpropertyList[parentField],\n\t\t\t\t\t\t\t\t\t\t\t\t\t(!(modelType === rest.modelType)  || editWidgetType === 'customField')\n\t\t\t\t\t\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t\t\tname\n\t\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<ClearIcon />\n\t\t\t\t\t\t\t</IconButton>\n\t\t\t\t\t: null,\n\t\t\t\t}}\n\t\t\t\tinputProps={{ min: min, max: max }}\n\t\t\t\tInputLabelProps={{\n\t\t\t\t\tclassName: classes && classes.label,\n\t\t\t\t}}\n\t\t\t\tkey={index}\n\t\t\t\tclassName={classes && classes.input}\n\t\t\t\tid=\"outlined-basic\"\n\t\t\t\tmultiline={multiline}\n\t\t\t\ttype={type === \"integer\" ? \"number\" : type}\n\t\t\t\tlabel={label}\n\t\t\t\tplaceholder={placeholder}\n\t\t\t\tvariant=\"outlined\"\n\t\t\t\tdisabled={disabled || (translationView && isValueGenerated(value))}\n\t\t\t\tvalue={value}\n\t\t\t\trows={3}\n\t\t\t\tonChange={(e) => {\n\t\t\t\t\tif (type === \"integer\" && isNaN(Number(e.target.value))) {\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t\tif (min && max) {\n\t\t\t\t\t\tconst value = Number(e.target.value);\n\t\t\t\t\t\tif (value < min || value > max) {\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tlet value = e.target.value;\n\t\t\t\t\tsetPropertyList({\n\t\t\t\t\t\t...(propertyList || {}),\n\t\t\t\t\t\t...getProperty(\n\t\t\t\t\t\t\tname,\n\t\t\t\t\t\t\tvalue,\n\t\t\t\t\t\t\tparentField,\n\t\t\t\t\t\t\tpropertyList[parentField],\n\t\t\t\t\t\t\t(!(modelType !== rest.modelType)  || editWidgetType === 'customField')\n\t\t\t\t\t\t),\n\t\t\t\t\t});\n\t\t\t\t}}\n\t\t\t\tonBlur={(e) => {\n\t\t\t\t\tif (type === \"integer\" && isNaN(Number(e.target.value))) {\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t\tif (min && max) {\n\t\t\t\t\t\tconst value = Number(e.target.value);\n\t\t\t\t\t\tif (value < min || value > max) {\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tlet value = e.target.value;\n\t\t\t\t\tlet flag = true;\n\t\t\t\t\tif (\n\t\t\t\t\t\trest.modelType === MODEL_TYPE.BASE &&\n\t\t\t\t\t\tprops.editWidgetType !== \"customField\"\n\t\t\t\t\t) {\n\t\t\t\t\t\tflag =\n\t\t\t\t\t\t\tvalue === \"\"\n\t\t\t\t\t\t\t\t? propertyList[name] !== undefined\n\t\t\t\t\t\t\t\t\t? true\n\t\t\t\t\t\t\t\t\t: false\n\t\t\t\t\t\t\t\t: true;\n\t\t\t\t\t}\n\t\t\t\t\tif (\n\t\t\t\t\t\trest.modelType === MODEL_TYPE.CUSTOM &&\n\t\t\t\t\t\tprops.editWidgetType === \"customField\"\n\t\t\t\t\t) {\n\t\t\t\t\t\t// set null value when value is negative for custom view & custom fields\n\t\t\t\t\t\tvalue = value || null;\n\t\t\t\t\t}\n\t\t\t\t\tif (flag) {\n\t\t\t\t\t\tonChange(\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t...(propertyList || {}),\n\t\t\t\t\t\t\t\t...getProperty(\n\t\t\t\t\t\t\t\t\tname,\n\t\t\t\t\t\t\t\t\tvalue,\n\t\t\t\t\t\t\t\t\tparentField,\n\t\t\t\t\t\t\t\t\tpropertyList[parentField],\n\t\t\t\t\t\t\t\t\t(!(modelType === rest.modelType)  || editWidgetType === 'customField')\n\t\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\tname\n\t\t\t\t\t\t);\n\t\t\t\t\t}\n\t\t\t\t}}\n\t\t\t/>\n\t\t\t{translationView && isValueGenerated(value) && (\n\t\t\t\t<TranslationGrid\n\t\t\t\t\tInputProps={{\n\t\t\t\t\t\tclasses: {\n\t\t\t\t\t\t\troot: classes && classes.outlinedRoot,\n\t\t\t\t\t\t\tnotchedOutline: classes && classes.notchedOutline,\n\t\t\t\t\t\t\tfocused: classes && classes.focused,\n\t\t\t\t\t\t\tdisabled: classes && classes.disableInput,\n\t\t\t\t\t\t\tinput: classes && classes.translationInput,\n\t\t\t\t\t\t},\n\t\t\t\t\t}}\n\t\t\t\t\tInputLabelProps={{\n\t\t\t\t\t\tclassName: classes && classes.label,\n\t\t\t\t\t}}\n\t\t\t\t\tclassName={classes && classes.translationInputView}\n\t\t\t\t\tkeyValue={value}\n\t\t\t\t/>\n\t\t\t)}\n\t\t\t{\n\t\t\t\tconfirm &&\n\t\t\t\t<DialogConfirmation\n\t\t\t\t\topen={confirm}\n\t\t\t\t\tmessage=\"Are you sure, do you want to delete translations?\"\n\t\t\t\t\tonClose={onClose}\n\t\t\t\t\tonOk={handleTranslationRemove}\n\t\t\t\t/>\n\t\t\t}\n\t\t</React.Fragment>\n\t);\n}\n\nfunction BooleanField(_props) {\n\tconst { index,  } = _props;\n\tlet { name, title, parentField, defaultValue, ...rest } = _props.field;\n\tconst props = React.useContext(PropertiesContext);\n\tconst { propertyList, setPropertyList, onChange, modelType, editWidgetType, metaFieldStore } = props;\n\tlet _value = getPropertyValue(\n\t\tpropertyList,\n\t\tname,\n\t\tparentField,\n\t\tdefaultValue,\n\t\t(!(modelType !== rest.modelType) || editWidgetType === 'customField')\n\t);\n\tlet fieldValue = Boolean(_value ? !(_value === \"false\") : _value);\n\tconst classes = useStyles();\n\tif (rest.getValue) {\n\t\tfieldValue = rest.getValue(propertyList);\n\t}\n\tlet disabled = false;\n\tif(rest.isDisabled) {\n\t\tdisabled = rest.isDisabled({\n\t\t\tproperties: propertyList,\n\t\t\tmetaFieldStore,\n\t\t\teditWidgetType,\n\t\t\tmodelType,\n\t\t});\n\t}\n\ttitle = translate(camleCaseString(title || name));\n\treturn (\n\t\t<FormControlLabel\n\t\t\tstyle={{ marginBottom: 15 }}\n\t\t\tkey={index}\n\t\t\tcontrol={\n\t\t\t\t<Switch\n\t\t\t\t\tclasses={{\n\t\t\t\t\t\tswitchBase: classes && classes.switchBase,\n\t\t\t\t\t\ttrack: classes && classes.track,\n\t\t\t\t\t\tchecked: classes && classes.checked,\n\t\t\t\t\t}}\n\t\t\t\t\tchecked={fieldValue}\n\t\t\t\t\tdisabled={disabled}\n\t\t\t\t\tonChange={() => {\n\t\t\t\t\t\tsetPropertyList({\n\t\t\t\t\t\t\t...propertyList,\n\t\t\t\t\t\t\t...(rest.change ? rest.change(!fieldValue, propertyList) : {}),\n\t\t\t\t\t\t\t...getProperty(\n\t\t\t\t\t\t\t\tname,\n\t\t\t\t\t\t\t\t!fieldValue,\n\t\t\t\t\t\t\t\tparentField,\n\t\t\t\t\t\t\t\tpropertyList[parentField],\n\t\t\t\t\t\t\t\t(!(modelType !== rest.modelType) || editWidgetType === 'customField')\n\t\t\t\t\t\t\t),\n\t\t\t\t\t\t});\n\t\t\t\t\t\tonChange(\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t...propertyList,\n\t\t\t\t\t\t\t\t...(rest.change ? rest.change(!fieldValue, propertyList) : {}),\n\t\t\t\t\t\t\t\t...getProperty(\n\t\t\t\t\t\t\t\t\tname,\n\t\t\t\t\t\t\t\t\t!fieldValue,\n\t\t\t\t\t\t\t\t\tparentField,\n\t\t\t\t\t\t\t\t\tpropertyList[parentField],\n\t\t\t\t\t\t\t\t\t(!(modelType !== rest.modelType) || editWidgetType === 'customField')\n\t\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\tname\n\t\t\t\t\t\t);\n\t\t\t\t\t}}\n\t\t\t\t\tvalue={propertyList[name]}\n\t\t\t\t/>\n\t\t\t}\n\t\t\tlabel={camleCaseString(title || name)}\n\t\t/>\n\t);\n}\n\nfunction StaticSelection(_props) {\n\tconst { index } = _props;\n\tlet {\n\t\tname,\n\t\trequired,\n\t\tdata,\n\t\thelper,\n\t\ttitle,\n\t\tcolor,\n\t\tparentField,\n\t\tdefaultOption = true,\n\t\t...rest\n\t} = _props.field;\n\tconst props = React.useContext(PropertiesContext);\n\tconst {\n\t\tpropertyList,\n\t\tsetPropertyList,\n\t\tlabelWidth,\n\t\tinputLabel,\n\t\ttype,\n\t\tonChange,\n\t\tmodelType,\n\t} = props;\n\tconst classes = useStyles();\n\n\tif (typeof data === \"object\" && !Array.isArray(data)) {\n\t\tdata = data[(typeReplacer[type] || type).toLowerCase()] || [];\n\t}\n\ttitle = translate(camleCaseString(title || name));\n\n\tconst ColorTag = ({ color }) => (\n\t\t<div style={{ width: 15, height: 15, backgroundColor: color }}></div>\n\t);\n\tlet value = propertyList[name] || \"\";\n\tif (\n\t\t(modelType === rest.modelType || props.editWidgetType === \"customField\") &&\n\t\tparentField\n\t) {\n\t\tconst field = propertyList[parentField]\n\t\t\t? JSON.parse(propertyList[parentField])\n\t\t\t: {};\n\t\tvalue = field[name] || \"\";\n\t}\n\treturn (\n\t\t<FormControl key={index} variant=\"outlined\" className={classes.formControl}>\n\t\t\t<InputLabel ref={inputLabel} className={classes.focused}>\n\t\t\t\t{camleCaseString(title || name)}\n\t\t\t</InputLabel>\n\t\t\t<Select\n\t\t\t\tvalue={value}\n\t\t\t\tlabelWidth={labelWidth || 0}\n\t\t\t\tstyle={{ width: \"100%\", marginBottom: 15 }}\n\t\t\t\tclassName={classes.selection}\n\t\t\t\tclasses={{\n\t\t\t\t\ticonOutlined: classes.iconOutlined,\n\t\t\t\t\troot: classes.selection,\n\t\t\t\t}}\n\t\t\t\trequired={required}\n\t\t\t\tvariant=\"outlined\"\n\t\t\t\tonChange={(e) => {\n\t\t\t\t\tsetPropertyList({\n\t\t\t\t\t\t...propertyList,\n\t\t\t\t\t\t...getProperty(\n\t\t\t\t\t\t\tname,\n\t\t\t\t\t\t\te.target.value,\n\t\t\t\t\t\t\tparentField,\n\t\t\t\t\t\t\tpropertyList[parentField],\n\t\t\t\t\t\t\tmodelType === rest.modelType ||\n\t\t\t\t\t\t\t\tprops.editWidgetType === \"customField\"\n\t\t\t\t\t\t),\n\t\t\t\t\t});\n\t\t\t\t\tonChange(\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\t...propertyList,\n\t\t\t\t\t\t\t...getProperty(\n\t\t\t\t\t\t\t\tname,\n\t\t\t\t\t\t\t\te.target.value,\n\t\t\t\t\t\t\t\tparentField,\n\t\t\t\t\t\t\t\tpropertyList[parentField],\n\t\t\t\t\t\t\t\tmodelType === rest.modelType ||\n\t\t\t\t\t\t\t\t\tprops.editWidgetType === \"customField\"\n\t\t\t\t\t\t\t),\n\t\t\t\t\t\t},\n\t\t\t\t\t\tname\n\t\t\t\t\t);\n\t\t\t\t}}\n\t\t\t>\n\t\t\t\t{defaultOption && <MenuItem\n\t\t\t\t\tkey={index}\n\t\t\t\t\tvalue={null}\n\t\t\t\t\tstyle={{ padding: \"15px 0px\" }}\n\t\t\t\t></MenuItem>}\n\t\t\t\t{data &&\n\t\t\t\t\tdata.map((opt, index) =>\n\t\t\t\t\t\ttypeof opt === \"object\" ? (\n\t\t\t\t\t\t\t<MenuItem key={index} value={opt.value}>\n\t\t\t\t\t\t\t\t<i className={`fa ${opt}`} style={{ marginRight: 4 }} />\n\t\t\t\t\t\t\t\t{opt.text}\n\t\t\t\t\t\t\t</MenuItem>\n\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\t<MenuItem key={index} value={opt}>\n\t\t\t\t\t\t\t\t{color && <ColorTag color={opt} />}\n\t\t\t\t\t\t\t\t<i className={`fa ${opt}`} style={{ marginRight: 4 }} />\n\t\t\t\t\t\t\t\t<span>{opt}</span>\n\t\t\t\t\t\t\t</MenuItem>\n\t\t\t\t\t\t)\n\t\t\t\t\t)}\n\t\t\t</Select>\n\t\t\t{helper && (\n\t\t\t\t<Icon\n\t\t\t\t\ttype=\"search\"\n\t\t\t\t\tclassName=\"helper\"\n\t\t\t\t\tonClick={() => window.open(helper, \"_blank\")}\n\t\t\t\t/>\n\t\t\t)}\n\t\t</FormControl>\n\t);\n}\n\nfunction checkDepend(field, propertyList) {\n\tif (field.depends) {\n\t\tconst value = propertyList[field.depends];\n\t\tif (field.dependValue !== value) {\n\t\t\treturn false;\n\t\t}\n\t\treturn true;\n\t}\n\treturn;\n}\n\nfunction checkModel(field, modelType, editWidgetType, propertyList) {\n\tif (field.dependModelType && field.dependModelType !== modelType) {\n\t\tif (editWidgetType !== \"customField\") {\n\t\t\treturn false;\n\t\t}\n\t}\n\tif(editWidgetType === \"customField\" && field.showInCustomField === false) {\n\t\treturn false;\n\t}\n\tif(field.shouldRender && !field.shouldRender(propertyList)) {\n\t\treturn false;\n\t}\n\treturn true;\n}\n\nfunction RenderPropertyField() {\n\tconst props = React.useContext(PropertiesContext);\n\tconst {\n\t\telements,\n\t\tid,\n\t\tpropertyList,\n\t\tenableAppBuilder,\n\t\tmodelType,\n\t\teditWidgetType,\n\t\terrors,\n\t\tentityType,\n\t\tactualType,\n\t\tparentPanel,\n\t\tonTranslationRemove,\n\t} = props;\n\treturn (\n\t\t<>\n\t\t\t{elements.map((field, index) => {\n\t\t\t\tconst depend = checkDepend(field, propertyList);\n\t\t\t\tif (depend === false) {\n\t\t\t\t\treturn null;\n\t\t\t\t}\n\t\t\t\tif (!checkModel(field, modelType, editWidgetType, propertyList)) {\n\t\t\t\t\treturn null;\n\t\t\t\t}\n\t\t\t\tif (field.name === \"appBuilder\" && !enableAppBuilder) {\n\t\t\t\t\treturn null;\n\t\t\t\t}\n\t\t\t\tif (\n\t\t\t\t\t[actualType, entityType].includes(ENTITY_TYPE.META) &&\n\t\t\t\t\tfield.name === \"packageName\"\n\t\t\t\t) {\n\t\t\t\t\treturn null;\n\t\t\t\t}\n\t\t\t\tconst key = `${index}_${id}`;\n\t\t\t\tswitch (field.type) {\n\t\t\t\t\tcase \"string\":\n\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t<StringInput\n\t\t\t\t\t\t\t\tfield={field}\n\t\t\t\t\t\t\t\tkey={key}\n\t\t\t\t\t\t\t\tindex={key}\n\t\t\t\t\t\t\t\tmultiline={false}\n\t\t\t\t\t\t\t\terror={errors[field.name]}\n\t\t\t\t\t\t\t\tonTranslationRemove={onTranslationRemove}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t);\n\t\t\t\t\tcase \"integer\":\n\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t<StringInput\n\t\t\t\t\t\t\t\tfield={field}\n\t\t\t\t\t\t\t\tkey={key}\n\t\t\t\t\t\t\t\tindex={key}\n\t\t\t\t\t\t\t\tmultiline={false}\n\t\t\t\t\t\t\t\terror={errors[field.name]}\n\t\t\t\t\t\t\t\tparentPanel={parentPanel}\n\t\t\t\t\t\t\t\tclearable={true}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t);\n\t\t\t\t\tcase \"boolean\":\n\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t<BooleanField\n\t\t\t\t\t\t\t\tfield={field}\n\t\t\t\t\t\t\t\tkey={key}\n\t\t\t\t\t\t\t\tindex={key}\n\t\t\t\t\t\t\t\terror={errors[field.name]}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t);\n\t\t\t\t\tcase \"select\":\n\t\t\t\t\tcase \"objectSelection\":\n\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t<SelectComponent\n\t\t\t\t\t\t\t\tfield={field}\n\t\t\t\t\t\t\t\tkey={key}\n\t\t\t\t\t\t\t\tindex={key}\n\t\t\t\t\t\t\t\tprops={props}\n\t\t\t\t\t\t\t\terror={errors[field.name]}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t);\n\t\t\t\t\tcase \"staticSelect\":\n\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t<StaticSelection\n\t\t\t\t\t\t\t\tfield={field}\n\t\t\t\t\t\t\t\tkey={key}\n\t\t\t\t\t\t\t\tindex={key}\n\t\t\t\t\t\t\t\terror={errors[field.name]}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t);\n\t\t\t\t\tcase \"text\":\n\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t<StringInput\n\t\t\t\t\t\t\t\tfield={field}\n\t\t\t\t\t\t\t\tkey={key}\n\t\t\t\t\t\t\t\tindex={key}\n\t\t\t\t\t\t\t\tmultiline={true}\n\t\t\t\t\t\t\t\terror={errors[field.name]}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t);\n\t\t\t\t\tdefault:\n\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t<StringInput\n\t\t\t\t\t\t\t\tfield={field}\n\t\t\t\t\t\t\t\tkey={key}\n\t\t\t\t\t\t\t\tindex={key}\n\t\t\t\t\t\t\t\terror={errors[field.name]}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t})}\n\t\t</>\n\t);\n}\n\nfunction PropertiesProvider({ children, ...value }) {\n\treturn (\n\t\t<PropertiesContext.Provider value={value}>\n\t\t\t{children}\n\t\t</PropertiesContext.Provider>\n\t);\n}\n\nexport default function Properties(props) {\n\tconst { state, onWidgetChange, onTranslationRemove } = useStore();\n\tconst {\n\t\twidgets,\n\t\teditWidget,\n\t\teditWidgetType,\n\t\tcustomFieldWidgets,\n\t\tmodelType,\n\t\tenableAppBuilder,\n\t\tmetaFieldStore,\n\t\terrorList = {},\n\t\tentityType,\n\t\tactualType,\n\t} = state;\n\tlet widget = null;\n\tif (editWidget) {\n\t\tif (editWidgetType === \"customField\" && customFieldWidgets) {\n\t\t\twidget = customFieldWidgets[editWidget];\n\t\t} else if (editWidgetType !== \"customField\" && widgets) {\n\t\t\twidget = widgets[editWidget];\n\t\t}\n\t}\n\tconst { serverType, isSelectionField } = widget || {};\n\tlet { type } = widget || {};\n\tlet selectedType =\n\t\tserverType === \"field\" ? type || \"string\" : serverType || type;\n\tselectedType = selectedType && selectedType.toLowerCase().replace(/_/g, \"-\");\n\tif (selectedType === \"datetime\") {\n\t\tconst field = metaFieldStore.find((f) => f.name === widget.name);\n\t\tif (field && `${field.tz}` === \"true\") {\n\t\t\tselectedType = \"zoneddatetime\";\n\t\t}\n\t}\n\tconst [propertyList, setPropertyList] = useState({});\n\tlet property = options.find((option) => option.type === selectedType);\n\tif (selectedType === \"form\") {\n\t\tif (state.modelType === MODEL_TYPE.CUSTOM) {\n\t\t\tproperty = options.find((option) => option.type === \"modelForm\");\n\t\t} else if (state.modelType === MODEL_TYPE.ENTITY) {\n\t\t\tproperty = options.find((option) => option.type === \"entityForm\");\n\t\t}\n\t} else if (\n\t\tselectedType &&\n\t\tmodelType === MODEL_TYPE.ENTITY &&\n\t\t(selectedType || \"\").toLowerCase().indexOf(\"entity\") === -1\n\t) {\n\t\tselectedType = `${selectedType}entity`;\n\t\tproperty = options.find((option) => option.type === selectedType);\n\t}\n\tif(isSelectionField) {\n\t\tconst typeFieldIndex = property.value.overview.findIndex(item => item.name === 'type');\n\t\tproperty.value.overview.splice(typeFieldIndex, 1, SelectableType);\n\t}\n\tconst classes = useStyles();\n\tconst inputLabel = React.useRef(null);\n\tconst [labelWidth, setLabelWidth] = React.useState(0);\n\tReact.useEffect(() => {\n\t\tsetPropertyList({\n\t\t\t...(widget || {}),\n\t\t\ttype: selectedType,\n\t\t});\n\t\tsetLabelWidth(\n\t\t\tinputLabel && inputLabel.current && inputLabel.current.offsetWidth\n\t\t);\n\t}, [widget, selectedType]);\n\n\tasync function onChange(props, changedPropertyName) {\n\t\tconst newProperties = { ...props };\n\t\tif(changedPropertyName === JsonRelationalField.name) {\n\t\t\t// when isJsonRelationalField changes\n\t\t\tnewProperties[TargetJsonModel.name] = null;\n\t\t\tnewProperties[TargetModel.name] = null;\n\t\t}\n\t\tif (changedPropertyName !== JsonRelationalField.name && changedPropertyName !== 'type') {\n\t\t\tnewProperties.type = widget.type;\n\t\t}\n\t\t/* selectionText implementation starts here */\n\t\t\tif(newProperties.updateSelection) {\n\t\t\t\tif(!widget.updateSelection) {\n\t\t\t\t\tconst obj = {name: newProperties.selection};\n\t\t\t\t\tconst text = await getSelectionText(obj);\n\t\t\t\t\tnewProperties.selectionText = text;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tnewProperties.selectionText = '';\n\t\t\t}\n\t\t\tif(newProperties.selection && typeof newProperties.selection === 'object') {\n\t\t\t\tnewProperties.selection = newProperties.selection.name;\n\t\t\t}\n\t\t/* selectionText implementation ends here */\n\t\tonWidgetChange(editWidget, { ...newProperties });\n\t}\n\n\ttype = selectedType;\n\tlet errors = {};\n\tif (editWidget && errorList) {\n\t\terrors = errorList[editWidget] || {};\n\t}\n\tconst parentPanel = Object.values(widgets || {}).find(\n\t\t(w) => w.items && w.items.indexOf(editWidget) !== -1\n\t);\n\tif(widget?.type === 'panel-tabs' && editWidgetType === \"customField\") {\n\t\treturn null;\n\t}\n\tif (\n\t\tproperty?.dependModelType &&\n\t\t`${widget?.tab}` === \"true\" &&\n\t\tproperty?.dependModelType !== modelType\n\t) {\n\t\treturn null;\n\t}\n\treturn (\n\t\t<Grid style={{ padding: 20 }}>\n\t\t\t{type &&\n\t\t\t\tproperty &&\n\t\t\t\t!(\n\t\t\t\t\tstate.modelType === MODEL_TYPE.CUSTOM && property.type === TYPE.tabs\n\t\t\t\t) &&\n\t\t\t\tObject.keys(property.value).map((panel, i) => (\n\t\t\t\t\t<Grid key={i}>\n\t\t\t\t\t\t<Typography variant=\"body1\" className={classes.panelTitle}>\n\t\t\t\t\t\t\t{hasPropertyToShow(property.value[panel], modelType) && camleCaseString(panel)}\n\t\t\t\t\t\t</Typography>\n\t\t\t\t\t\t<Grid\n\t\t\t\t\t\t\tstyle={{ display: \"flex\", flexDirection: \"column\", width: \"90%\" }}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<PropertiesProvider\n\t\t\t\t\t\t\t\tkey={editWidget}\n\t\t\t\t\t\t\t\telements={property.value[panel]}\n\t\t\t\t\t\t\t\tpropertyList={propertyList}\n\t\t\t\t\t\t\t\tsetPropertyList={setPropertyList}\n\t\t\t\t\t\t\t\tlabelWidth={labelWidth}\n\t\t\t\t\t\t\t\tinputLabel={inputLabel}\n\t\t\t\t\t\t\t\ttype={type}\n\t\t\t\t\t\t\t\tonWidgetChange={onWidgetChange}\n\t\t\t\t\t\t\t\tid={editWidget}\n\t\t\t\t\t\t\t\tonChange={onChange}\n\t\t\t\t\t\t\t\tmodelType={modelType}\n\t\t\t\t\t\t\t\tenableAppBuilder={enableAppBuilder}\n\t\t\t\t\t\t\t\teditWidgetType={editWidgetType}\n\t\t\t\t\t\t\t\tmetaFieldStore={metaFieldStore}\n\t\t\t\t\t\t\t\terrors={errors}\n\t\t\t\t\t\t\t\tentityType={entityType}\n\t\t\t\t\t\t\t\tactualType={actualType}\n\t\t\t\t\t\t\t\tparentPanel={parentPanel}\n\t\t\t\t\t\t\t\tonTranslationRemove={onTranslationRemove}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<RenderPropertyField />\n\t\t\t\t\t\t\t</PropertiesProvider>\n\t\t\t\t\t\t</Grid>\n\t\t\t\t\t</Grid>\n\t\t\t\t))}\n\t\t</Grid>\n\t);\n}\n","import React from \"react\";\nimport Properties from \"../../Properties\";\n\nexport default React.memo(function PropertiesView() {\n\treturn (\n\t\t<div style={{ color: \"#fff\" }}>\n\t\t\t<Properties />\n\t\t</div>\n\t);\n});\n","import React from \"react\";\nimport { Tabs, Tab, Paper, Grid } from \"@material-ui/core\";\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport { ListAlt, PlaylistAdd } from \"@material-ui/icons\";\nimport classNames from \"classnames\";\n\nimport AddPanelView from \"./Tabs/AddPanelView\";\nimport PropertiesView from \"./Tabs/PropertiesView\";\nimport { useStore } from \"../store/context\";\n\nconst useStyles = makeStyles({\n\troot: {\n\t\theight: \"100%\",\n\t\tminWidth: 317,\n\t},\n\ttab: {\n\t\tminHeight: \"fit-content\",\n\t\tminWidth: \"fit-content\",\n\t\ttextTransform: \"none\",\n\t\tcolor: \"#fff\",\n\t\tfontWeight: \"bold\",\n\t\tbackgroundColor: \"#2f4050\",\n\t\t'.modern-dark &': {\n\t\t\tcolor: \"#fff\",\n\t\t\tbackgroundColor: \"#1b1b1b\",\n\t\t}\n\t},\n\ttabs: {\n\t\tbackgroundColor: \"#2f4050\",\n\t\t'.modern-dark &': {\n\t\t\tbackgroundColor: \"#1b1b1b\",\n\t\t}\n\t},\n\tcontainer: {\n\t\tbackgroundColor: \"#293846\",\n\t\theight: `calc(100% - 70px)`,\n\t\toverflow: \"auto\",\n\t\tscrollbarWidth: 'thin',\n\t\t'.modern-dark &': {\n\t\t\tbackgroundColor: \"#1b1b1b\",\n\t\t}\n\t},\n\tactiveTab: {\n\t\tbackgroundColor: \"#293846\",\n\t\t'.modern-dark &': {\n\t\t\tbackgroundColor: \"#323232\",\n\t\t}\n\t}\n});\n\nconst tabs = [\n\t{ label: \"Properties\", icon: <ListAlt />, view: <PropertiesView /> },\n\t{ label: \"Fields\", icon: <PlaylistAdd />, view: <AddPanelView /> },\n];\n\nconst TabPanel = React.memo(function TabPanel(props) {\n\tconst { children } = props;\n\tconst classes = useStyles();\n\n\treturn (\n\t\t<Grid\n\t\t\tclassName={classes.container}\n\t\t>\n\t\t\t<Grid style={{ color: \"#000\", height: \"100%\" }}>{children}</Grid>\n\t\t</Grid>\n\t);\n});\n\nexport default React.memo(function SidePanel() {\n\tconst classes = useStyles();\n\tconst { state, update } = useStore();\n\tconst { tabIndex, editWidget } = state;\n\n\tconst onTabChange = (event, newValue) => {\n\t\tif (newValue === 0 && !editWidget) {\n\t\t\treturn;\n\t\t}\n\t\tupdate((draft) => {\n\t\t\tdraft.tabIndex = newValue;\n\t\t});\n\t};\n\n\treturn (\n\t\t<Paper square className={classes.root}>\n\t\t\t<Tabs\n\t\t\t\tvalue={tabIndex}\n\t\t\t\tonChange={onTabChange}\n\t\t\t\tvariant=\"fullWidth\"\n\t\t\t\tclassName={classes.tabs}\n\t\t\t\tTabIndicatorProps={{\n\t\t\t\t\tstyle: {\n\t\t\t\t\t\tdisplay: \"none\",\n\t\t\t\t\t},\n\t\t\t\t}}\n\t\t\t>\n\t\t\t\t{tabs.map((tab, i) => (\n\t\t\t\t\t<Tab\n\t\t\t\t\t\tkey={i}\n\t\t\t\t\t\tclassName={classNames(classes.tab, {[classes.activeTab]: tabIndex === i})}\n\t\t\t\t\t\ticon={tab.icon}\n\t\t\t\t\t\tlabel={tab.label}\n\t\t\t\t\t\tstyle={{\n\t\t\t\t\t\t\t// backgroundColor: tabIndex === i ? \"#293846\" : \"#2f4050\",\n\t\t\t\t\t\t\tcolor: i === 1 && !editWidget ? \"#a6a6a6\" : \"#fff\",\n\t\t\t\t\t\t}}\n\t\t\t\t\t/>\n\t\t\t\t))}\n\t\t\t</Tabs>\n\t\t\t{tabs.map(\n\t\t\t\t(tab, i) => tabIndex === i && <TabPanel key={i}>{tab.view}</TabPanel>\n\t\t\t)}\n\t\t</Paper>\n\t);\n});\n","import React from \"react\";\nimport CircularProgress from \"@material-ui/core/CircularProgress\";\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport classNames from \"classnames\";\n\nimport { Widget, Form } from \"../components\";\nimport { IDS, MODEL_TYPE } from \"../constants\";\nimport { useStore } from \"../store/context\";\n\nconst useStyles = makeStyles({\n\tcontainer: {\n\t\tdisplay: \"flex\",\n\t\tflexDirection: \"column\",\n\t\theight: 'fit-content',\n\t},\n\tloaderContainer: {\n\t\tdisplay: \"flex\",\n\t\tjustifyContent: \"center\",\n\t\tpaddingTop: \"20% !important\",\n\t\theight: \"100%\",\n\t\tposition: \"absolute\",\n\t\tzIndex: 1000,\n\t\tborder: \"0px\",\n\t\tbackgroundColor: \"rgba(0,0,0,0.05)\",\n\t},\n});\n// Render Main Form UI View\nfunction FormViewUI({ design }) {\n\tconst store = useStore();\n\tconst classes = useStyles();\n\tconst { widgets, customFieldWidgets, loader, errorList, modelField, modelType } = store.state;\n\treturn (\n\t\t<React.Fragment>\n\t\t\t{loader && (\n\t\t\t\t<div className={classNames(classes.loaderContainer)}>\n\t\t\t\t\t<CircularProgress />\n\t\t\t\t</div>\n\t\t\t)}\n\t\t\t<div className={classNames(classes.container)}>\n\t\t\t\t{widgets && (\n\t\t\t\t\t<Widget\n\t\t\t\t\t\tindex={0}\n\t\t\t\t\t\tid={IDS.form}\n\t\t\t\t\t\tattrs={store.state.widgets[IDS.form]}\n\t\t\t\t\t\tonSelect={store.onSelect}\n\t\t\t\t\t\t{...{\n\t\t\t\t\t\t\titems: store.state.items,\n\t\t\t\t\t\t\tdragWidget: store.state.dragWidget,\n\t\t\t\t\t\t\thoverWidget: store.state.hoverWidget,\n\t\t\t\t\t\t\teditWidget: store.state.editWidget,\n\t\t\t\t\t\t\twidgets: store.state.widgets,\n\t\t\t\t\t\t\tonSelect: store.onSelect,\n\t\t\t\t\t\t\tonMove: store.onMove,\n\t\t\t\t\t\t\tonDrag: store.onDrag,\n\t\t\t\t\t\t\tonHover: store.onHover,\n\t\t\t\t\t\t\tonWidgetChange: store.onWidgetChange,\n\t\t\t\t\t\t\tsetHoverAttr: store.setHoverAttr,\n\t\t\t\t\t\t\tcanRemove: modelType === MODEL_TYPE.BASE ? false : true,\n\t\t\t\t\t\t\terrorList,\n\t\t\t\t\t\t}}\n\t\t\t\t\t\tdesign={design}\n\t\t\t\t\t\tcomponent={Form}\n\t\t\t\t\t/>\n\t\t\t\t)}\n\t\t\t\t{customFieldWidgets && (\n\t\t\t\t\t<React.Fragment>\n\t\t\t\t\t\t<div className=\"custom-field-view-header\">{modelField?.name || 'attrs'}</div>\n\t\t\t\t\t\t<Widget\n\t\t\t\t\t\t\t_type=\"customField\"\n\t\t\t\t\t\t\tindex={0}\n\t\t\t\t\t\t\tid={IDS.customForm}\n\t\t\t\t\t\t\tattrs={store.state.customFieldWidgets[IDS.customForm]}\n\t\t\t\t\t\t\tonSelect={store.onSelect}\n\t\t\t\t\t\t\t{...{\n\t\t\t\t\t\t\t\titems: store.state.customFieldItems,\n\t\t\t\t\t\t\t\tdragWidget: store.state.dragWidget,\n\t\t\t\t\t\t\t\thoverWidget: store.state.hoverWidget,\n\t\t\t\t\t\t\t\teditWidget: store.state.editWidget,\n\t\t\t\t\t\t\t\twidgets: store.state.customFieldWidgets,\n\t\t\t\t\t\t\t\tonSelect: store.onSelect,\n\t\t\t\t\t\t\t\tonMove: store.onMove,\n\t\t\t\t\t\t\t\tonDrag: store.onDrag,\n\t\t\t\t\t\t\t\tonHover: store.onHover,\n\t\t\t\t\t\t\t\tonWidgetChange: store.onWidgetChange,\n\t\t\t\t\t\t\t\tsetHoverAttr: store.setHoverAttr,\n\t\t\t\t\t\t\t\terrorList,\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\tdesign={design}\n\t\t\t\t\t\t\tcomponent={Form}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</React.Fragment>\n\t\t\t\t)}\n\t\t\t</div>\n\t\t</React.Fragment>\n\t);\n}\n\nexport default FormViewUI;\n","import React from \"react\";\nimport classNames from \"classnames\";\nimport Editor from \"./../Editor\";\n\nexport default React.memo(function MainPanel() {\n\tconst [design] = React.useState(true);\n\treturn (\n\t\t<div\n\t\t\tclassName={classNames(\"form-layout-container\", {\n\t\t\t\t\"form-layout-design\": design,\n\t\t\t})}\n\t\t\tstyle={{\n\t\t\t\tdisplay: \"flex\",\n\t\t\t\twidth: \"100%\",\n\t\t\t\theight: \"100%\",\n\t\t\t\tjustifyContent: \"center\",\n\t\t\t\toverflow: \"auto\",\n\t\t\t\tposition: \"relative\",\n\t\t\t}}\n\t\t>\n\t\t\t<Editor design={design} />\n\t\t</div>\n\t);\n});\n","import React, { useState, useEffect } from \"react\";\nimport { TextField } from \"@material-ui/core\";\nimport AutoComplete from \"@material-ui/lab/Autocomplete\";\nimport { makeStyles } from \"@material-ui/core/styles\";\n\nimport AxelorService from \"./../services/axelor.rest\";\nimport { useDebounceEffect } from \"./../common.func\";\nimport SearchView from '../components/SearchView';\n\nconst useStyles = makeStyles({\n\tautoComplete: {\n\t\t\"& > div > label\": {\n\t\t\tcolor: \"#e7eaec !important\",\n\t\t\tfontSize: 14,\n\t\t},\n\t},\n\tautoCompleteRoot: {\n\t\twidth: 200,\n\t\tmarginLeft: 10,\n\t\tcolor: \"#e7eaec\",\n\t},\n\tddinput: {\n\t\tcolor: \"#e7eaec\",\n\t\tfontSize: 14,\n\t},\n\tinputView: {\n\t\tcolor: \"#fff\",\n\t\t\"& > *\": {\n\t\t\tcolor: \"#fff\",\n\t\t},\n\t},\n});\n\nfunction Select({\n\tvalue,\n\tlabel,\n\tmodel,\n\tsearchFilter,\n\tonChange,\n\toptions,\n\tfilterData,\n\tlimit = 10,\n\tonSearch,\n\tmodelType,\n\t...props\n}) {\n\tconst classes = useStyles();\n\tconst [searchText, setSearchText] = useState(\"\");\n\tconst [loading, setLoading] = useState(false);\n\tconst [list, setList] = useState([...(options ? options : [])]);\n\tconst [searchMore, setSearchMore] = useState(false);\n\tconst [offset, setOffset] = useState(0);\n\tconst [total, setTotal] = useState(0);\n\n\tconst search = React.useCallback(\n\t\tasync (searchText = \"\") => {\n\t\t\tif(onSearch) {\n\t\t\t\tsetLoading(true);\n\t\t\t\tconst {models, total} = await onSearch({limit, searchText, searchFilter, filterData, modelType, offset})\n\t\t\t\t!searchMore && total > limit && models.push({ name: \"Show more...\", id: 'studio_show_More_View' })\n\t\t\t\tsetList([...models]);\n\t\t\t\tsetLoading(false);\n\t\t\t\tsetTotal(total);\n\t\t\t} else {\n\t\t\t\tconst service = new AxelorService({ model });\n\t\t\t\tsetLoading(true);\n\t\t\t\tconst _data = searchFilter(searchText) || {};\n\t\t\t\tconst criteria = [];\n\t\t\t\tif (searchText) {\n\t\t\t\t\tcriteria.push({\n\t\t\t\t\t\tfieldName: \"name\",\n\t\t\t\t\t\toperator: \"like\",\n\t\t\t\t\t\tvalue: searchText,\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\tconst data = {\n\t\t\t\t\t...(_data._domain && { _domain: _data._domain }),\n\t\t\t\t\t...(_data._domainContext && { _domainContext: _data._domainContext }),\n\t\t\t\t\tcriteria: [...criteria, ...(_data.criteria || [])],\n\t\t\t\t\toperator: \"and\",\n\t\t\t\t};\n\t\t\t\tconst fields = _data.fields || [];\n\t\t\t\tservice\n\t\t\t\t\t.search({ fields, data, limit, offset: offset })\n\t\t\t\t\t.then((response = {}) => {\n\t\t\t\t\t\tconst { data = [], total } = response;\n\t\t\t\t\t\tsetLoading(false);\n\t\t\t\t\t\tconst list = filterData ? filterData([...data]) : [...data];\n\t\t\t\t\t\t!searchMore && total > limit && list.push({ name: \"Show more...\", id: 'studio_show_More_View' })\n\t\t\t\t\t\tsetTotal(total);\n\t\t\t\t\t\tsetList(list);\n\t\t\t\t\t});\n\t\t\t}\n\t\t},\n\t\t[searchFilter, model, filterData, searchMore, limit, onSearch, modelType, offset]\n\t);\n\n\tconst handleNext = React.useCallback(() => {\n\t\tconst newOffset = offset + limit;\n\t\tif(newOffset <= total) {\n\t\t\tsetOffset(newOffset);\n\t\t}\n\t}, [limit, total, offset]);\n\n\tconst handlePrevious = React.useCallback(() => {\n\t\tsetOffset(offset => {\n\t\t\tconst newOffset = offset-limit;\n\t\t\treturn newOffset > 0 ? newOffset : 0;\n\t\t})\n\t}, [limit]);\n\n\tconst debounceHandler = React.useCallback(() => {\n\t\t!options && search(searchText);\n\t}, [searchText, search, options]);\n\n\tconst handleChange = React.useCallback(\n\t\t(e, value) => {\n\t\t\tif(value?.id === 'studio_show_More_View') {\n\t\t\t\tsetSearchMore(true);\n\t\t\t} else {\n\t\t\t\tonChange(value);\n\t\t\t}\n\t\t},\n\t\t[onChange]\n\t);\n\n\tconst handleTextChange = React.useCallback((value) => {\n\t\tsetSearchText(value);\n\t\tsetOffset(0);\n\t}, []);\n\n\tconst handleClose = React.useCallback(() => {\n\t\tsetSearchMore(false);\n\t\tsetOffset(0);\n\t}, []);\n\n\tuseDebounceEffect(debounceHandler, 500);\n\n\tuseEffect(() => {\n\t\t!options && search();\n\t}, [search, options, model]);\n\n\tuseEffect(() => {\n\t\tif (!value) {\n\t\t\tsetSearchText(\"\");\n\t\t}\n\t}, [value]);\n\treturn (\n\t\t<React.Fragment>\n\n\t\t\t<AutoComplete\n\t\t\t\tclearOnEscape\n\t\t\t\tautoComplete\n\t\t\t\tclasses={{\n\t\t\t\t\troot: classes.autoCompleteRoot,\n\t\t\t\t\tinputFocused: classes.input,\n\t\t\t\t\tclearIndicator: classes.input,\n\t\t\t\t\tpopupIndicator: classes.input,\n\t\t\t\t\tinput: classes.inputView,\n\t\t\t\t\tendAdornment: classes.inputView,\n\t\t\t\t}}\n\t\t\t\tclassName={classes.autoComplete}\n\t\t\t\tonInputChange={(e, value) => setSearchText(value)}\n\t\t\t\trenderInput={(params) => {\n\t\t\t\t\tparams.inputProps.value = searchText;\n\t\t\t\t\treturn <TextField {...params} label={label} fullWidth />;\n\t\t\t\t}}\n\t\t\t\toptions={[...list]}\n\t\t\t\tloading={loading}\n\t\t\t\tgetOptionLabel={(option) =>\n\t\t\t\t\ttypeof option === \"string\"\n\t\t\t\t\t\t? option\n\t\t\t\t\t\t: props.getOptionLabel\n\t\t\t\t\t\t? props.getOptionLabel(option)\n\t\t\t\t\t\t: option.name\n\t\t\t\t}\n\t\t\t\tonChange={handleChange}\n\t\t\t\tfilterOptions={(options) => options}\n\t\t\t\tvalue={value || null}\n\t\t\t\tgetOptionSelected={(option, value) => option.name === value.name}\n\t\t\t\t{...props}\n\t\t\t/>\n\t\t\t<SearchView\n\t\t\t\tsearchText={searchText}\n\t\t\t\tlist={list}\n\t\t\t\tmodel={model}\n\t\t\t\ttotal={total}\n\t\t\t\toffset={offset}\n\t\t\t\topen={searchMore}\n\t\t\t\tonNext={handleNext}\n\t\t\t\tonPrevious={handlePrevious}\n\t\t\t\thandleClose={handleClose}\n\t\t\t\tsetSearchText={handleTextChange}\n\t\t\t\tonChange={onChange}\n\t\t\t\ttitle={label}\n\t\t\t\tgetOptionLabel={props.getOptionLabel}\n\t\t\t/>\n\t\t</React.Fragment>\n\t);\n}\n\nexport default React.memo(Select);\n","import {modelService, entityModelService, metaModelService} from './api';\nimport {ENTITY_TYPE, MODEL_TYPE} from '../constants';\n\nexport async function modelSearch({searchFilter, limit, searchText,  modelType, offset}) {\n\tconst _data = searchFilter(searchText) || {};\n\tconst criteria = [];\n\tif (searchText) {\n\t\tcriteria.push({\n\t\t\tfieldName: \"name\",\n\t\t\toperator: \"like\",\n\t\t\tvalue: searchText,\n\t\t});\n\t}\n\tconst data = {\n\t\t...(_data._domain && { _domain: _data._domain }),\n\t\t...(_data._domainContext && { _domainContext: _data._domainContext }),\n\t\tcriteria: [...criteria, ...(_data.criteria || [])],\n\t\toperator: \"and\",\n\t};\n\tconst fields = _data.fields || [];\n\tconst service = modelType === MODEL_TYPE.CUSTOM ? metaModelService : modelService;\n\tconst modelResult = await service\n\t.search({ fields, data, limit, offset });\n\tconst models = [];\n\tif(modelResult.data && Array.isArray(modelResult.data)) {\n\t\tconst list = modelResult.data.map(record => {\n\t\t\tconst modelIndex = models.findIndex(m => m.name === record.name && m.packageName === record.packageName);\n\t\t\tif(modelIndex === -1 || modelType === MODEL_TYPE.BASE) {\n\t\t\t\tif(modelType === MODEL_TYPE.BASE && modelIndex !== -1) {\n\t\t\t\t\tmodels.splice(modelIndex, 1);\n\t\t\t\t}\n\t\t\t\treturn {...record, entityType: ENTITY_TYPE.META}\n\t\t\t} else {\n\t\t\t\tmodels.splice(modelIndex, 1, {...models[modelIndex], actualType: ENTITY_TYPE.META});\n\t\t\t}\n\t\t\treturn undefined;\n\t\t}).filter(e => e);\n\t\tmodels.push(...list);\n\t}\n\treturn {models, total: modelResult.total};\n}\n","import React from \"react\";\nimport { Grid } from \"@material-ui/core\";\nimport { makeStyles } from \"@material-ui/core/styles\";\n\nimport AxelorService from \"./../services/axelor.rest\";\nimport Utils, { generateCustomModelSchema } from \"./../utils\";\nimport Select from \"./Select\";\nimport {\n\trelationalFields,\n\tMODEL_TYPE,\n\tENTITY_TYPE,\n} from \"./../constants\";\nimport {\n\tfetchCustomFields,\n\tgetEnableAppBuilder,\n\tfetchEntityModel,\n\tfetchEntityFields,\n\tfetchModelFields,\n\tfetchViews,\n\tfetchAttrsList,\n\tgetTranslationList,\n} from \"./api\";\nimport { modelSearch } from \"./customModelSearch\";\nimport {generateXpath} from './../store/xpathGenerator';\nimport convert from \"xml-js\";\n\nconst metaViewService = new AxelorService({\n\tmodel: \"com.axelor.meta.db.MetaView\",\n});\n\nconst useStyles = makeStyles({\n\tcontainer: {\n\t\tdisplay: \"flex\",\n\t},\n\tautoComplete: {\n\t\t\"& > div > label\": {\n\t\t\tcolor: \"#e7eaec !important\",\n\t\t\tfontSize: 14,\n\t\t},\n\t},\n\tautoCompleteRoot: {\n\t\twidth: 200,\n\t\tmarginLeft: 10,\n\t\tcolor: \"#e7eaec\",\n\t},\n\tinput: {\n\t\tcolor: \"#e7eaec\",\n\t\tfontSize: 14,\n\t},\n});\n\nconst modelTypes = [\n\t{ name: \"View\", value: MODEL_TYPE.BASE },\n\t{ name: \"Custom\", value: MODEL_TYPE.CUSTOM },\n];\n\nfunction ViewSelection({\n\tmodel,\n\tupdate,\n\tmodelType,\n\tmodelField,\n\tstartLoader,\n\tentityModel,\n\tentityType,\n\tmetaFieldStore,\n\tclearHistory,\n\t...props\n}) {\n\tconst classes = useStyles();\n\tconst modelName = `com.axelor.meta.db.${\n\t\tmodelType !== MODEL_TYPE.CUSTOM ? \"MetaModel\" : \"MetaJsonModel\"\n\t}`;\n\n\tconst fetchJSONFields = React.useCallback(\n\t\t(ids, record) => {\n\t\t\tconst metaFieldService = new AxelorService({\n\t\t\t\tmodel: \"com.axelor.meta.db.MetaJsonField\",\n\t\t\t});\n\t\t\tconst criteria = [];\n\t\t\tif (ids.length) {\n\t\t\t\tcriteria.push({ fieldName: \"id\", operator: \"in\", value: ids });\n\t\t\t\tconst data = {\n\t\t\t\t\tcriteria,\n\t\t\t\t};\n\t\t\t\tmetaFieldService.search({ data, sortBy: [\"sequence\"] }).then((res) => {\n\t\t\t\t\tif (res.data) {\n\t\t\t\t\t\tconst list = res.data || [];\n\t\t\t\t\t\tconst schema = generateCustomModelSchema(list, record);\n\t\t\t\t\t\tupdate((draft) => {\n\t\t\t\t\t\t\tdraft.widgets = {\n\t\t\t\t\t\t\t\t...schema.widgets,\n\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\tdraft.items = schema.items;\n\t\t\t\t\t\t\tdraft.loader = false;\n\t\t\t\t\t\t});\n\t\t\t\t\t} else {\n\t\t\t\t\t\tupdate((draft) => {\n\t\t\t\t\t\t\tdraft.loader = false;\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\tupdate((draft) => {\n\t\t\t\t\tdraft.widgets = {\n\t\t\t\t\t\t\"-1\": {\n\t\t\t\t\t\t\ttype: \"form\",\n\t\t\t\t\t\t\t...record,\n\t\t\t\t\t\t},\n\t\t\t\t\t\t\"0\": { type: \"dump_field\", name: \"\" },\n\t\t\t\t\t};\n\t\t\t\t\tdraft.items = [];\n\t\t\t\t\tdraft.loader = false;\n\t\t\t\t});\n\t\t\t}\n\t\t},\n\t\t[update]\n\t);\n\n\tconst handleEntityModelSelect = React.useCallback(\n\t\tasync (model) => {\n\t\t\tstartLoader();\n\t\t\tif (!model) {\n\t\t\t\tupdate((draft) => {\n\t\t\t\t\tclearHistory(draft);\n\t\t\t\t\tdraft.items = [];\n\t\t\t\t\tdraft.widgets = null;\n\t\t\t\t\tdraft.initialItems = null;\n\t\t\t\t\tdraft.entityModel = null;\n\t\t\t\t\tdraft.loader = false;\n\t\t\t\t\tdraft.model = null;\n\t\t\t\t\tdraft.errorList = [];\n\t\t\t\t\tdraft.attrsList = [];\n\t\t\t\t\tdraft.translationList = [];\n\t\t\t\t\tdraft.initialTranslationList = [];\n\t\t\t\t\tdraft.removedTranslationList = [];\n\t\t\t\t});\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tconst originalModelFields = await fetchModelFields(model);\n\t\t\tconst metaModelFields = originalModelFields.map((f) => {\n\t\t\t\treturn JSON.parse(\n\t\t\t\t\tJSON.stringify({\n\t\t\t\t\t\t...f,\n\t\t\t\t\t\ttype: relationalFields[f.relationship] || (f.typeName || '').toLowerCase(),\n\t\t\t\t\t\t...(f.relationship && {\n\t\t\t\t\t\t\ttargetModel: `${f.packageName}.${f.typeName}`,\n\t\t\t\t\t\t}),\n\t\t\t\t\t\tpackageName: undefined,\n\t\t\t\t\t})\n\t\t\t\t);\n\t\t\t});\n\t\t\tfetchEntityModel(model).then((res) => {\n\t\t\t\tconst schema = Utils.generateEntityModelSchema(res.entityXml, res);\n\t\t\t\tconst fields = Utils.getEntityModelFields(res.entityXml);\n\t\t\t\tupdate((draft) => {\n\t\t\t\t\tclearHistory(draft);\n\t\t\t\t\tdraft.model = model;\n\t\t\t\t\tdraft.entityType = model.entityType;\n\t\t\t\t\tdraft.actualType = model.actualType;\n\t\t\t\t\tdraft.entityModel = model;\n\t\t\t\t\tdraft.errorList = [];\n\t\t\t\t\tdraft.attrsList = [];\n\t\t\t\t\tdraft.translationList = [];\n\t\t\t\t\tdraft.initialTranslationList = [];\n\t\t\t\t\tdraft.removedTranslationList = [];\n\t\t\t\t\tif (modelType === MODEL_TYPE.ENTITY) {\n\t\t\t\t\t\tdraft.widgets = schema.widgets;\n\t\t\t\t\t\tdraft.items = schema.items;\n\t\t\t\t\t\tdraft.metaFieldStore = [...metaModelFields];\n\t\t\t\t\t\tdraft.metaFields = metaModelFields.filter(f => fields.findIndex(field => field.name === f.name) === -1);\n\t\t\t\t\t}\n\t\t\t\t\tif (modelType === MODEL_TYPE.BASE) {\n\t\t\t\t\t\tdraft.metaFieldStore = [...fields, ...metaModelFields];\n\t\t\t\t\t\tdraft.metaFields = [...fields, ...metaModelFields];\n\t\t\t\t\t}\n\t\t\t\t\tdraft.loader = false;\n\t\t\t\t});\n\t\t\t});\n\t\t},\n\t\t[update, startLoader, modelType, clearHistory]\n\t);\n\n\tconst handleModelSelect = React.useCallback(\n\t\tasync (model) => {\n\t\t\tconst metaModelService = new AxelorService({ model: modelName });\n\t\t\tif (!model) {\n\t\t\t\tupdate((draft) => {\n\t\t\t\t\tclearHistory(draft);\n\t\t\t\t\tdraft.model = null;\n\t\t\t\t\tdraft.items = [];\n\t\t\t\t\tdraft.exView = null;\n\t\t\t\t\tdraft.view = null;\n\t\t\t\t\tdraft.widgets = null;\n\t\t\t\t\tdraft.initialItems = null;\n\t\t\t\t\tdraft.initialWidgets = null;\n\t\t\t\t\tdraft.customFieldWidgets = null;\n\t\t\t\t\tdraft.customFieldItems = null;\n\t\t\t\t\tdraft.customFields = [];\n\t\t\t\t\tdraft.modelField = null;\n\t\t\t\t\tdraft.extensionXML = null;\n\t\t\t\t\tdraft.extensionView = null;\n\t\t\t\t\tdraft.originalXML = null;\n\t\t\t\t\tdraft.selectedView = null;\n\t\t\t\t\tdraft.metaFields = [];\n\t\t\t\t\tdraft.metaFieldStore = [];\n\t\t\t\t\tdraft.extensionMoves = [];\n\t\t\t\t\tdraft.errorList = [];\n\t\t\t\t\tdraft.attrsList = [];\n\t\t\t\t\tdraft.translationList = [];\n\t\t\t\t\tdraft.initialTranslationList = [];\n\t\t\t\t\tdraft.removedTranslationList = [];\n\t\t\t\t});\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tlet data = {\n\t\t\t\tfields: [\"metaFields\", \"packageName\", \"name\", \"fullName\"],\n\t\t\t\trelated: {\n\t\t\t\t\tmetaFields: [\n\t\t\t\t\t\t\"typeName\",\n\t\t\t\t\t\t\"label\",\n\t\t\t\t\t\t\"mappedBy\",\n\t\t\t\t\t\t\"relationship\",\n\t\t\t\t\t\t\"name\",\n\t\t\t\t\t\t\"packageName\",\n\t\t\t\t\t],\n\t\t\t\t},\n\t\t\t};\n\t\t\tif (modelType === MODEL_TYPE.CUSTOM) {\n\t\t\t\tupdate((draft) => {\n\t\t\t\t\tdraft.loader = true;\n\t\t\t\t});\n\t\t\t\tdata = {\n\t\t\t\t\trelated: {\n\t\t\t\t\t\tmenuBuilder: [\"title\", \"parentMenu\"],\n\t\t\t\t\t},\n\t\t\t\t};\n\t\t\t}\n\t\t\tconst entityFields = await fetchEntityFields(model);\n\t\t\tif(model.entityType === ENTITY_TYPE.ENTITY) {\n\t\t\t\thandleEntityModelSelect(model);\n\t\t\t} else {\n\t\t\t\tmetaModelService.fetch(model.id, data).then((res) => {\n\t\t\t\t\tif (res.data) {\n\t\t\t\t\t\tconst record = res.data[0];\n\t\t\t\t\t\tconst { fields = [], ...rest } = record;\n\t\t\t\t\t\tupdate((draft) => {\n\t\t\t\t\t\t\tclearHistory(draft);\n\t\t\t\t\t\t\tdraft.model = model;\n\t\t\t\t\t\t\tdraft.entityType = model.entityType;\n\t\t\t\t\t\t\tdraft.widgets = null;\n\t\t\t\t\t\t\tdraft.initialWidgets = null;\n\t\t\t\t\t\t\tdraft.items = [];\n\t\t\t\t\t\t\tdraft.initialItems = null;\n\t\t\t\t\t\t\tdraft.view = null;\n\t\t\t\t\t\t\tdraft.exView = null;\n\t\t\t\t\t\t\tdraft.modelField = null;\n\t\t\t\t\t\t\tdraft.customFields = [];\n\t\t\t\t\t\t\tdraft.customFieldWidgets = null;\n\t\t\t\t\t\t\tdraft.originalXML = null;\n\t\t\t\t\t\t\tdraft.extensionXML = null;\n\t\t\t\t\t\t\tdraft.extensionView = null;\n\t\t\t\t\t\t\tdraft.entityFields = entityFields;\n\t\t\t\t\t\t\tdraft.extensionMoves = [];\n\t\t\t\t\t\t\tdraft.errorList = [];\n\t\t\t\t\t\t\tdraft.attrsList = [];\n\t\t\t\t\t\t\tdraft.translationList = [];\n\t\t\t\t\t\t\tdraft.initialTranslationList = [];\n\t\t\t\t\t\t\tdraft.removedTranslationList = [];\n\t\t\t\t\t\t\tdraft.selectedView = null;\n\t\t\t\t\t\t\tdraft.editWidget = -1;\n\t\t\t\t\t\t\tdraft.editWidgetType = null;\n\t\t\t\t\t\t\tdraft.tabIndex = 0;\n\t\t\t\t\t\t\tconst _fields = (record.metaFields || []).map((f) => {\n\t\t\t\t\t\t\t\treturn JSON.parse(\n\t\t\t\t\t\t\t\t\tJSON.stringify({\n\t\t\t\t\t\t\t\t\t\t...f,\n\t\t\t\t\t\t\t\t\t\ttype: relationalFields[f.relationship] || (f.typeName || '').toLowerCase(),\n\t\t\t\t\t\t\t\t\t\t...(f.relationship && {\n\t\t\t\t\t\t\t\t\t\t\ttargetModel: `${f.packageName}.${f.typeName}`,\n\t\t\t\t\t\t\t\t\t\t}),\n\t\t\t\t\t\t\t\t\t\tpackageName: undefined,\n\t\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\tif (modelType === MODEL_TYPE.BASE) {\n\t\t\t\t\t\t\t\tdraft.metaFieldStore = [..._fields, ...entityFields];\n\t\t\t\t\t\t\t\tdraft.metaFields = [..._fields, ...entityFields];\n\t\t\t\t\t\t\t} else if (modelType === MODEL_TYPE.ENTITY) {\n\t\t\t\t\t\t\t\tconst modelRecord = {\n\t\t\t\t\t\t\t\t\tname: record.name,\n\t\t\t\t\t\t\t\t\tpackageName: record.packageName,\n\t\t\t\t\t\t\t\t\tmodel: `${record.packageName}.${record.name}`,\n\t\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\t\tconst schema = generateCustomModelSchema([], modelRecord);\n\t\t\t\t\t\t\t\tdraft.widgets = {\n\t\t\t\t\t\t\t\t\t...schema.widgets,\n\t\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\t\tdraft.items = schema.items;\n\t\t\t\t\t\t\t\tdraft.loader = false;\n\t\t\t\t\t\t\t\tdraft.entityModel = null;\n\t\t\t\t\t\t\t\tif (model.entityType === ENTITY_TYPE.META) {\n\t\t\t\t\t\t\t\t\tdraft.metaFieldStore = [..._fields];\n\t\t\t\t\t\t\t\t\tdraft.metaFields = [..._fields];\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tfetchJSONFields(\n\t\t\t\t\t\t\t\t\tfields.map((f) => f.id),\n\t\t\t\t\t\t\t\t\trest\n\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\tdraft.customModel = record;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t},\n\t\t[update, modelName, modelType, fetchJSONFields, handleEntityModelSelect, clearHistory]\n\t);\n\n\tconst handleViewSelect = React.useCallback(\n\t\tasync (view) => {\n\t\t\tstartLoader();\n\t\t\tif (!view) {\n\t\t\t\tupdate((draft) => {\n\t\t\t\t\tclearHistory(draft);\n\t\t\t\t\tdraft.items = [];\n\t\t\t\t\tdraft.exView = null;\n\t\t\t\t\tdraft.view = null;\n\t\t\t\t\tdraft.widgets = null;\n\t\t\t\t\tdraft.initialItems = null;\n\t\t\t\t\tdraft.initialWidgets = null;\n\t\t\t\t\tdraft.customFieldWidgets = null;\n\t\t\t\t\tdraft.customFieldItems = null;\n\t\t\t\t\tdraft.customFields = [];\n\t\t\t\t\tdraft.modelField = null;\n\t\t\t\t\tdraft.extensionXML = null;\n\t\t\t\t\tdraft.extensionView = null;\n\t\t\t\t\tdraft.originalXML = null;\n\t\t\t\t\tdraft.loader = false;\n\t\t\t\t\tdraft.metaFields = draft.metaFieldStore;\n\t\t\t\t\tdraft.selectedView = null;\n\t\t\t\t\tdraft.extensionMoves = [];\n\t\t\t\t\tdraft.errorList = [];\n\t\t\t\t\tdraft.attrsList = [];\n\t\t\t\t\tdraft.translationList = [];\n\t\t\t\t\tdraft.initialTranslationList = [];\n\t\t\t\t\tdraft.removedTranslationList = [];\n\t\t\t\t});\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tconst views = await fetchViews(view);\n\t\t\tconst attrsList = await fetchAttrsList({model: model.name, view: view.name});\n\t\t\tconst schema = Utils.generateXMLToViewSchema({view: views.view, fields: metaFieldStore, extensionXML: views.extensionXML, attrsList});\n\t\t\tconst translationNames = Object.values(schema.widgets).filter(widget => widget.title && widget.title.startsWith(\"studio:\")).map(widget => widget.title);\n\t\t\tconst translationList = await getTranslationList(translationNames);\n\t\t\tconst originalViewData = {\n\t\t\t\toperator: \"and\",\n\t\t\t\tcriteria: [\n\t\t\t\t\t{\n\t\t\t\t\t\toperator: \"or\",\n\t\t\t\t\t\tcriteria: [\n\t\t\t\t\t\t\t{ fieldName: \"computed\", operator: \"=\", value: false },\n\t\t\t\t\t\t\t{ fieldName: \"computed\", operator: \"isNull\" },\n\t\t\t\t\t\t],\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\toperator: \"or\",\n\t\t\t\t\t\tcriteria: [\n\t\t\t\t\t\t\t{ fieldName: \"extension\", operator: \"=\", value: false },\n\t\t\t\t\t\t\t{ fieldName: \"extension\", operator: \"isNull\" },\n\t\t\t\t\t\t],\n\t\t\t\t\t},\n\t\t\t\t\t{ fieldName: \"name\", operator: \"=\", value: `${view.name}` },\n\t\t\t\t],\n\t\t\t};\n\t\t\tmetaViewService.search({ data: originalViewData }).then((res) => {\n\t\t\t\tconst { data = [] } = res;\n\t\t\t\tif (data[0]) {\n\t\t\t\t\tupdate((draft) => {\n\t\t\t\t\t\tdraft.originalXML = JSON.parse(\n\t\t\t\t\t\t\tconvert.xml2json(data[0].xml, {\n\t\t\t\t\t\t\t\tcompact: false,\n\t\t\t\t\t\t\t\tfullTagEmptyElement: false,\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t);\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t});\n\t\t\t// fetch studio extension view\n\t\t\tconst _viewSearch = {\n\t\t\t\t_domain: `self.xmlId = 'studio-${view.name}' and self.extension = true`,\n\t\t\t};\n\t\t\tconst res = await metaViewService.search({ data: _viewSearch });\n\t\t\tconst { data: resData = [] } = res;\n\t\t\tconst record = resData[0];\n\t\t\tif (record) {\n\t\t\t\tupdate((draft) => {\n\t\t\t\t\tdraft.extensionView = record;\n\t\t\t\t\tdraft.extensionXML = JSON.parse(\n\t\t\t\t\t\tconvert.xml2json(record.xml, {\n\t\t\t\t\t\t\tcompact: false,\n\t\t\t\t\t\t\tfullTagEmptyElement: false,\n\t\t\t\t\t\t})\n\t\t\t\t\t);\n\t\t\t\t});\n\t\t\t}\n\t\t\tupdate((draft) => {\n\t\t\t\tclearHistory(draft);\n\t\t\t\tdraft.attrsList = attrsList;\n\t\t\t\tdraft.translationList = translationList;\n\t\t\t\tdraft.initialTranslationList = translationList;\n\t\t\t\tdraft.removedTranslationList = [];\n\t\t\t\tif (schema) {\n\t\t\t\t\tdraft.widgets = schema.widgets;\n\t\t\t\t\tdraft.initialWidgets = schema.widgets;\n\t\t\t\t\tdraft.items = schema.items;\n\t\t\t\t\tdraft.initialItems = schema.items;\n\t\t\t\t\tdraft.metaFields = [...draft.metaFieldStore].filter(\n\t\t\t\t\t\t(field) =>\n\t\t\t\t\t\t\tschema.fieldList.findIndex((f) => f.name === field.name) ===\n\t\t\t\t\t\t\t-1\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t\tdraft.selectedView = view;\n\t\t\t\tif (views.view) {\n\t\t\t\t\tdraft.view = { fields: draft.metaFields, view: views.view };\n\t\t\t\t\tdraft.exView = views.view;\n\t\t\t\t}\n\t\t\t\tdraft.customFields = [];\n\t\t\t\tdraft.customFieldWidgets = null;\n\t\t\t\tdraft.customFieldItems = null;\n\t\t\t\tdraft.modelField = null;\n\t\t\t\tdraft.loader = false;\n\t\t\t\tdraft.extensionMoves = [];\n\t\t\t\tdraft.errorList = [];\n\t\t\t\tgenerateXpath(draft);\n\t\t\t});\n\t\t},\n\t\t[update, startLoader, metaFieldStore, clearHistory, modelName]\n\t);\n\n\tconst viewFilter = React.useCallback(() => {\n\t\tlet _domain = `self.type='form'`;\n\t\tlet _model = `${model ? model.fullName : \"\"}`;\n\t\tif (entityType === ENTITY_TYPE.ENTITY) {\n\t\t\t_model = `${entityModel ? Utils.getEntityModel(entityModel) : \"\"}`;\n\t\t}\n\t\t// if(model) {\n\t\t_domain = `${_domain} and self.model='${_model}' and (self.computed = true OR self.name NOT IN (select meta.name from MetaView meta where meta.computed = true))`;\n\t\t// }\n\t\treturn {\n\t\t\t_domain,\n\t\t\tfields: [\n\t\t\t\t\"name\",\n\t\t\t\t\"model\",\n\t\t\t\t\"title\",\n\t\t\t\t\"type\",\n\t\t\t\t\"extension\",\n\t\t\t\t\"xmlId\",\n\t\t\t\t\"computed\",\n\t\t\t\t\"xml\",\n\t\t\t],\n\t\t};\n\t}, [model, entityModel, entityType]);\n\n\tconst modelFilter = React.useCallback(() => {\n\t\treturn {\n\t\t\tfields: [\"name\", \"fullName\", \"packageName\"],\n\t\t};\n\t}, []);\n\n\tconst metaFieldFilter = React.useCallback(() => {\n\t\tconst _domain = `self.json = true and self.metaModel.id='${\n\t\t\tmodel ? model.id : -1\n\t\t}'`;\n\t\treturn {\n\t\t\t_domain,\n\t\t\tfields: [\"name\"],\n\t\t};\n\t}, [model]);\n\n\tconst handleMetaFieldSelect = React.useCallback(\n\t\t(field) => {\n\t\t\tif (field) {\n\t\t\t\tfetchCustomFields(field, model).then((res) => {\n\t\t\t\t\tconst { data = [] } = res;\n\t\t\t\t\tconst schema = generateCustomModelSchema(data, undefined, '', 'customForm');\n\t\t\t\t\tupdate((draft) => {\n\t\t\t\t\t\tdraft.customFieldWidgets = schema.widgets;\n\t\t\t\t\t\tdraft.customFieldItems = schema.items;\n\t\t\t\t\t\tdraft.customFields = data;\n\t\t\t\t\t\tdraft.modelField = field;\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\tupdate((draft) => {\n\t\t\t\t\tdraft.customFieldWidgets = null;\n\t\t\t\t\tdraft.customFieldItems = null;\n\t\t\t\t\tdraft.customFields = [];\n\t\t\t\t\tdraft.modelField = field;\n\t\t\t\t});\n\t\t\t}\n\t\t},\n\t\t[model, update]\n\t);\n\n\tconst handleTypeSelect = React.useCallback(\n\t\t(type) => {\n\t\t\tconst { value } = type;\n\t\t\tif (value === MODEL_TYPE.CUSTOM) {\n\t\t\t\tgetEnableAppBuilder().then((res) => {\n\t\t\t\t\tupdate((draft) => {\n\t\t\t\t\t\tdraft.enableAppBuilder = res;\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t\t}\n\t\t\tupdate((draft) => {\n\t\t\t\tclearHistory(draft);\n\t\t\t\tdraft.modelType = type ? type.value : null;\n\t\t\t\tdraft.entityType = null;\n\t\t\t\tdraft.model = null;\n\t\t\t\tdraft.widgets = null;\n\t\t\t\tdraft.initialWidgets = null;\n\t\t\t\tdraft.items = [];\n\t\t\t\tdraft.initialItems = null;\n\t\t\t\tdraft.view = null;\n\t\t\t\tdraft.exView = null;\n\t\t\t\tdraft.metaFields = [];\n\t\t\t\tdraft.modelField = null;\n\t\t\t\tdraft.customFields = [];\n\t\t\t\tdraft.customFieldWidgets = null;\n\t\t\t\tdraft.entityModel = null;\n\t\t\t\tdraft.metaFields = [];\n\t\t\t\tdraft.metaFieldStore = [];\n\t\t\t\tdraft.selectedView = null;\n\t\t\t\tdraft.extensionMoves = [];\n\t\t\t\tdraft.errorList = [];\n\t\t\t\tdraft.attrsList = [];\n\t\t\t\tdraft.translationList = [];\n\t\t\t\tdraft.initialTranslationList = [];\n\t\t\t\tdraft.removedTranslationList = [];\n\t\t\t});\n\t\t},\n\t\t[update, clearHistory]\n\t);\n\n\tconst handleViewFilterData = React.useCallback((list) => {\n\t\tconst newList = list.filter((view) => {\n\t\t\tif (!view.computed) {\n\t\t\t\tconst index = list.findIndex((e) => e.name === view.name && e.computed);\n\t\t\t\tif (index !== -1) {\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t}\n\t\t\tif(view.extension === true) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\treturn true;\n\t\t});\n\t\treturn newList;\n\t}, []);\n\n\tconst getOptionLabel = (option) => {\n\t\tif (option.extension === true) {\n\t\t\treturn `${option.name} (Extension)`;\n\t\t}\n\t\tif (option.computed === true) {\n\t\t\treturn `${option.name} (Computed)`;\n\t\t}\n\t\treturn option.name;\n\t};\n\treturn (\n\t\t<Grid className={classes.container}>\n\t\t\t<Select\n\t\t\t\toptions={modelTypes}\n\t\t\t\tvalue={modelTypes.find((e) => e.value === modelType)}\n\t\t\t\tfilterSelectedOptions={true}\n\t\t\t\tlabel=\"Type\"\n\t\t\t\tonChange={handleTypeSelect}\n\t\t\t\tdisableClearable\n\t\t\t/>\n\t\t\t<Select\n\t\t\t\tonChange={handleModelSelect}\n\t\t\t\tlabel=\"Model\"\n\t\t\t\tmodel={modelName}\n\t\t\t\tsearchFilter={modelFilter}\n\t\t\t\tvalue={model}\n\t\t\t\tonSearch={modelSearch}\n\t\t\t\tmodelType={modelType}\n\t\t\t/>\n\t\t\t{modelType === MODEL_TYPE.BASE && (\n\t\t\t\t<React.Fragment>\n\t\t\t\t\t<Select\n\t\t\t\t\t\tonChange={handleViewSelect}\n\t\t\t\t\t\tlabel=\"View\"\n\t\t\t\t\t\tmodel=\"com.axelor.meta.db.MetaView\"\n\t\t\t\t\t\tsearchFilter={viewFilter}\n\t\t\t\t\t\tgetOptionLabel={getOptionLabel}\n\t\t\t\t\t\tvalue={props.selectedView}\n\t\t\t\t\t\tfilterData={handleViewFilterData}\n\t\t\t\t\t/>\n\t\t\t\t\t<Select\n\t\t\t\t\t\tlabel=\"Custom Fields\"\n\t\t\t\t\t\tmodel=\"com.axelor.meta.db.MetaField\"\n\t\t\t\t\t\tsearchFilter={metaFieldFilter}\n\t\t\t\t\t\tonChange={handleMetaFieldSelect}\n\t\t\t\t\t\tvalue={modelField}\n\t\t\t\t\t/>\n\t\t\t\t</React.Fragment>\n\t\t\t)}\n\t\t</Grid>\n\t);\n}\n\nexport default React.memo(ViewSelection);\n","import React from \"react\";\nimport { Grid, IconButton } from \"@material-ui/core\";\nimport { Add, Save, Delete, Undo, Redo, Menu } from \"@material-ui/icons\";\nimport { makeStyles } from \"@material-ui/core/styles\";\n\nimport ViewSelection from \"./ViewSelection\";\nimport { MODEL_TYPE } from \"./../constants\";\n\nconst useStyles = makeStyles({\n\ttoolbarContainer: {\n\t\twidth: \"100%\",\n\t\theight: \"100%\",\n\t\tbackgroundColor: \"rgb(41, 56, 70)\",\n\t\tpaddingLeft: 15,\n\t\t'.modern-dark &': {\n\t\t\tbackgroundColor: \"#1b1b1b\",\n\t\t}\n\t},\n\ttoolItemView: {\n\t\tcolor: \"#fff\",\n\t},\n\tcrudIcon: {\n\t\theight: \"1em\",\n\t\twidth: \"1em\",\n\t\tcursor: \"pointer\",\n\t},\n\tselectionContainer: {\n\t\tflex: 1,\n\t},\n});\n\nfunction isStudioView(view) {\n\tif (view && view.xmlId && view.xmlId.indexOf(\"studio-\") === 0) {\n\t\treturn true;\n\t}\n\treturn false;\n}\n\nfunction Toolbar({\n\tupdate,\n\tsaveView,\n\tmodelType,\n\tsaveCustomFieldView,\n\tremoveView,\n\tmodel,\n\tonNew,\n\t...props\n}) {\n\tconst classes = useStyles();\n\tconst save = React.useCallback(() => {\n\t\tsaveView();\n\t\tif (modelType === MODEL_TYPE.BASE) {\n\t\t\tsaveCustomFieldView();\n\t\t}\n\t}, [saveView, saveCustomFieldView, modelType]);\n\tconst isRemoveDisabled = !(\n\t\tprops.extensionView ||\n\t\tisStudioView(props.selectedView) ||\n\t\t(modelType === MODEL_TYPE.CUSTOM && Boolean(props.customModel)) ||\n\t\t(modelType === MODEL_TYPE.ENTITY &&\n\t\t\tBoolean(props.entityModel) &&\n\t\t\tBoolean(props.entityModel.id))\n\t);\n\tconst isNewDisabled =\n\t\tmodelType === MODEL_TYPE.BASE && !model && !props.entityModel;\n\tconst isSaveDisabled = Object.keys(props.errorList).length > 0;\n\n\treturn (\n\t\t<Grid container className={classes.toolbarContainer}>\n\t\t\t<IconButton\n\t\t\t\tclassName={classes.toolItemView}\n\t\t\t\tonClick={props.onSidePanelToggle}\n\t\t\t>\n\t\t\t\t<Menu className={classes.crudIcon} />\n\t\t\t</IconButton>\n\t\t\t{modelType !== MODEL_TYPE.BASE && <IconButton\n\t\t\t\tclassName={classes.toolItemView}\n\t\t\t\tonClick={onNew}\n\t\t\t\tdisabled={isNewDisabled}\n\t\t\t>\n\t\t\t\t<Add className={classes.crudIcon} />\n\t\t\t</IconButton>}\n\t\t\t<IconButton\n\t\t\t\tclassName={classes.toolItemView}\n\t\t\t\tonClick={save}\n\t\t\t\tdisabled={isSaveDisabled}\n\t\t\t>\n\t\t\t\t<Save className={classes.crudIcon} />\n\t\t\t</IconButton>\n\t\t\t<IconButton\n\t\t\t\tclassName={classes.toolItemView}\n\t\t\t\tonClick={removeView}\n\t\t\t\tdisabled={isRemoveDisabled}\n\t\t\t>\n\t\t\t\t<Delete className={classes.crudIcon} />\n\t\t\t</IconButton>\n\t\t\t<Grid item className={classes.selectionContainer}>\n\t\t\t\t<ViewSelection\n\t\t\t\t\tmodel={model}\n\t\t\t\t\tupdate={update}\n\t\t\t\t\tmodelType={modelType}\n\t\t\t\t\t{...props}\n\t\t\t\t/>\n\t\t\t</Grid>\n\t\t\t<Grid>\n\t\t\t\t<IconButton\n\t\t\t\t\tclassName={classes.toolItemView}\n\t\t\t\t\tonClick={() => props.undo()}\n\t\t\t\t\tdisabled={props.pastLength <= 0}\n\t\t\t\t>\n\t\t\t\t\t<Undo className={classes.crudIcon} />\n\t\t\t\t</IconButton>\n\t\t\t\t<IconButton\n\t\t\t\t\tclassName={classes.toolItemView}\n\t\t\t\t\tonClick={() => props.redo()}\n\t\t\t\t\tdisabled={props.futureLength <= 0}\n\t\t\t\t>\n\t\t\t\t\t<Redo className={classes.crudIcon} />\n\t\t\t\t</IconButton>\n\t\t\t</Grid>\n\t\t</Grid>\n\t);\n}\n\nexport default React.memo(Toolbar);\n","import Utils from \"../utils\";\nimport {DEFAULT_VALUE, conditionProperties} from \"../constants\";\nimport {eGeneratePath} from './../store/xpathGenerator';\n\nfunction hasIndex(path) {\n\treturn path.split(\"[\").length - 1 > 1;\n}\n\nfunction convertConditionName(name) {\n\tconst propertyName = conditionProperties[name];\n\treturn propertyName;\n}\n\nconst getWidgets = ({widgets, items}) => {\n\tObject.keys(widgets).forEach(widgetId => {\n\t\tconst path = eGeneratePath(widgets, items, widgetId)\n\t\twidgets[widgetId].xPath = path;\n\t});\n\treturn widgets;\n}\n\nfunction getName({self, parent}) {\n\tlet name = '';\n\tconst pathText = self || parent;\n\tif(pathText) {\n\t\tconst finder = \"@name='\";\n\t\tconst index = pathText.indexOf(finder) + finder.length;\n\t\tconst endIndex = pathText.indexOf(\"']\");\n\t\tname = pathText.substring(index, endIndex);\n\t}\n\treturn name;\n}\n\nconst isSameAsOriginal = (item, originalWidgets) => {\n\tif(item) {\n\t\tconst {attributes} = item;\n\t\tconst itemExplore = Utils.exploreTarget(item.target);\n\t\tconst widget = Object.values(originalWidgets).find(widget => {\n\t\t\tconst widgetExplore = Utils.exploreTarget(widget.xPath);\n\t\t\tif(widgetExplore.self || itemExplore.self) {\n\t\t\t\treturn widgetExplore.self === itemExplore.self;\n\t\t\t} else if(widgetExplore.parent || itemExplore.parent) {\n\t\t\t\treturn widgetExplore.parent === itemExplore.parent;\n\t\t\t}\n\t\t\treturn false;\n\t\t});\n\t\tconst attributeName = Utils.dashToCamelCase(attributes.name);\n\t\tif(widget) {\n\t\t\tlet widgetValue = widget[attributeName];\n\t\t\tlet maskedValue = widget[attributes.maskName];\n\t\t\tif(maskedValue === undefined) {\n\t\t\t\tmaskedValue = \"\";\n\t\t\t}\n\t\t\tif(widgetValue === undefined) {\n\t\t\t\twidgetValue = false;\n\t\t\t}\n\t\t\t// console.log({widgetValue, maskedValue, attributes});\n\t\t\tif(attributes.maskName !== attributes.name) {\n\t\t\t\tif(`${maskedValue}` === `${attributes.value}`) {\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t} else if(`${widgetValue}` === `${attributes.value}`) {\n\t\t\t\treturn true;\n\t\t\t} else if([\"\", undefined, null].includes(widget[attributeName]) && [\"\", undefined, null].includes(attributes.value)) {\n\t\t\t\treturn true;\n\t\t\t} else if(attributes.maskName !== attributes.name && [\"\", undefined, null].includes(widget[attributes.maskName]) && [\"\", undefined, null].includes(attributes.value)) {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\t}\n\treturn false;\n}\n\nexport function getUpdatedAttrsList(state, originalWidgets) {\n\tconst newAttrsList = [];\n\tconst removedAttrsList = [];\n\tconst {attrsList = []} = state;\n\tconst moves = state.extensionMoves.filter(m => m.name === 'attribute');\n\tconst view = state.selectedView;\n\tconst model = state.model;\n\tconst movesMap = new Map();\n\tconst currentSchema = Utils.generateXMLToViewSchema({view: state.view.view, fields: state.metaFieldStore, attrsList: state.attrsList});\n\tconst currentWidgets = getWidgets(currentSchema);\n\n\tmoves.forEach(move => {\n\t\tconst convertedName = convertConditionName(move.attributes.name);\n\t\tconst name = convertedName || move.attributes.name;\n\t\tconst value = move.attributes.value;\n\t\tconst newMove = Object.assign({}, {...move, attributes: {...move.attributes, name, value, maskName: move.attributes.name}});\n\t\tmovesMap.set(name, newMove);\n\t});\n\t// console.log(moves.length, movesMap, [...attrsList]);\n\tmovesMap.forEach((value) => {\n\t\tconst move = value;\n\t\t// console.log(value);\n\t\tconst moveExplore = Utils.exploreTarget(move.target);\n\t\tconst {attributes} = move;\n\t\tconst fieldName = getName(moveExplore);\n\t\tconst fieldIndex = attrsList.findIndex(attr => fieldName.includes(attr.field) && (attr.name === attributes.name || conditionProperties[attr.name] === attributes.name));\n\t\tconst field = attrsList[fieldIndex];\n\t\tconst isOriginal = isSameAsOriginal(move, originalWidgets);\n\t\tconst isCurrent = isSameAsOriginal(move, currentWidgets);\n\t\tconst newAttrsIndex = newAttrsList.findIndex(attr => moveExplore.self && moveExplore.self.includes(attr.field) && attr.name === attributes.name);\n\t\tlet defaultValue = DEFAULT_VALUE[attributes.name];\n\t\t// commented because title having empty value and it's not setting empty\n\t\t// value because this condition checking if it's undefined then set empty string\n\t\t// if(defaultValue === undefined) {\n\t\t// \tdefaultValue = \"\";\n\t\t// }\n\t\t//console.log(defaultValue);\n\t\t//console.log({isCurrent, isOriginal, defaultValue, originalWidgets, currentWidgets, move});\n\t\tif(isOriginal || isCurrent) {\n\t\t\tif(newAttrsIndex !== -1) {\n\t\t\t\tnewAttrsList.splice(newAttrsIndex, 1);\n\t\t\t} else if(field && field.id) {\n\t\t\t\tremovedAttrsList.push({id: field.id, version: field.version});\n\t\t\t}\n\t\t} else {\n\n\t\t\tif(field) {\n\t\t\t\tif([null, undefined].includes(attributes.value)) {\n\t\t\t\t\tif(defaultValue) {\n\t\t\t\t\t\tif(defaultValue === attributes.value) {\n\t\t\t\t\t\t\tremovedAttrsList.push({id: field.id, version: field.version});\n\t\t\t\t\t\t}\n\t\t\t\t\t} else {\n\t\t\t\t\t\tremovedAttrsList.push({id: field.id, version: field.version});\n\t\t\t\t\t}\n\t\t\t\t} else if(field.value !== attributes.value) {\n\t\t\t\t\tif(defaultValue) {\n\t\t\t\t\t\tif(defaultValue === attributes.value) {\n\t\t\t\t\t\t\tremovedAttrsList.push({id: field.id, version: field.version});\n\t\t\t\t\t\t}\n\t\t\t\t\t} else {\n\t\t\t\t\t\tif(newAttrsIndex === -1) {\n\t\t\t\t\t\t\tnewAttrsList.push({\n\t\t\t\t\t\t\t\t...field,\n\t\t\t\t\t\t\t\tname: attributes.name,\n\t\t\t\t\t\t\t\tvalue: attributes.value,\n\t\t\t\t\t\t\t\tmaskName: attributes.maskName,\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tnewAttrsList[newAttrsIndex].value = attributes.value;\n\t\t\t\t\t\t\tnewAttrsList[newAttrsIndex].maskName = attributes.maskName;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tif(fieldName) {\n\t\t\t\t\t// const hasInAttrsList = attrsList.find(attr => )\n\t\t\t\t\t// if(defaultValue !== attributes.value) {\n\t\t\t\t\t\tif(newAttrsIndex === -1) {\n\t\t\t\t\t\t\tnewAttrsList.push({\n\t\t\t\t\t\t\t\tview: view.name,\n\t\t\t\t\t\t\t\tmodel: model.fullName,\n\t\t\t\t\t\t\t\tname: attributes.name,\n\t\t\t\t\t\t\t\tmaskName: attributes.maskName,\n\t\t\t\t\t\t\t\tvalue: attributes.value,\n\t\t\t\t\t\t\t\tfield: fieldName,\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tnewAttrsList[newAttrsIndex].value = attributes.value;\n\t\t\t\t\t\t\tnewAttrsList[newAttrsIndex].maskName = attributes.maskName;\n\t\t\t\t\t\t}\n\t\t\t\t\t// } else if(newAttrsIndex !== -1) {\n\t\t\t\t\t// \tnewAttrsList.splice(newAttrsIndex, 1);\n\t\t\t\t\t// }\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t});\n\treturn {changedAttrsList: newAttrsList, removedAttrsList};\n}\n\nexport function optimizeExtension(state, originalWidgets) {\n\tconst processed = [];\n\tconst moves = state.extensionMoves.filter(m => m.name !== 'attribute');\n\tconst isSameAsOriginal = (item) => {\n\t\tif(item) {\n\t\t\tconst {attributes} = item;\n\t\t\tconst itemExplore = Utils.exploreTarget(item.target);\n\t\t\tconst widget = Object.values(originalWidgets).find(widget => {\n\t\t\t\tconst widgetExplore = Utils.exploreTarget(widget.xPath);\n\t\t\t\tif(widgetExplore.self && itemExplore.self) {\n\t\t\t\t\treturn widgetExplore.self === itemExplore.self;\n\t\t\t\t}\n\t\t\t\treturn false;\n\t\t\t});\n\t\t\tconst attributeName = Utils.dashToCamelCase(attributes.name);\n\t\t\tif(widget && (widget[attributeName] === attributes.value || ([\"\", undefined, null].includes(widget[attributeName]) && [\"\", undefined, null].includes(attributes.value)))) {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\t\treturn false;\n\t}\n\tlet list = [...moves];\n\tconst filterListForAttribute = (move) => {\n\t\tif (\n\t\t\tprocessed.findIndex(\n\t\t\t\t(p) => p.target === move.target && p.name === move.attributes.name\n\t\t\t) === -1\n\t\t) {\n\t\t\tconst _list = list\n\t\t\t\t.map((_item, i) => {\n\t\t\t\t\tif (\n\t\t\t\t\t\t_item.target === move.target && _item.attributes &&\n\t\t\t\t\t\tmove.attributes.name === _item.attributes.name\n\t\t\t\t\t) {\n\t\t\t\t\t\treturn i;\n\t\t\t\t\t}\n\t\t\t\t\treturn undefined;\n\t\t\t\t})\n\t\t\t\t.filter((e) => e !== undefined);\n\t\t\tconst lastItem = _list[_list.length - 1];\n\t\t\tprocessed.push({ target: move.target, name: move.attributes.name });\n\t\t\tconst isOriginal = isSameAsOriginal(list[lastItem]);\n\t\t\tlist = list.filter((item, k) => {\n\t\t\t\tif (item.target === move.target) {\n\t\t\t\t\tif (\n\t\t\t\t\t\tmove.attributes &&\n\t\t\t\t\t\titem.attributes &&\n\t\t\t\t\t\tmove.attributes.name === item.attributes.name\n\t\t\t\t\t) {\n\t\t\t\t\t\treturn lastItem === k ? true : false;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\treturn true;\n\t\t\t});\n\t\t}\n\t};\n\n\tconst filterListForRemove = (move) => {\n\t\tlet canRemoveReplace = false;\n\t\tconst explore = Utils.exploreTarget(move.target);\n\t\t// check for insert nodes\n\t\tconst insertIndex = list.findIndex(item => {\n\t\t\tif(item.name === 'insert'){\n\t\t\t\treturn item.elements &&\n\t\t\t\titem.elements[0] &&\n\t\t\t\texplore.self ? explore.self.includes(`'${item.elements[0].name}'`) :\n\t\t\t\texplore.parent && explore.parent.includes(item.elements[0].name)\n\t\t\t}\n\t\t\treturn false;\n\t\t});\n\t\tconst depends = list.filter(item => {\n\t\t\tif(item.target) {\n\t\t\t\tconst itemExplore = Utils.exploreTarget(item.target);\n\t\t\t\treturn ['insert', 'move'].includes(item.name) && itemExplore.self && itemExplore.self.includes(explore.self)\n\t\t\t}\n\t\t\treturn false;\n\t\t});\n\t\tif(insertIndex !== -1 && !depends.length) {\n\t\t\tcanRemoveReplace = true;\n\t\t\tlist.splice(insertIndex, 1);\n\t\t\t// check for move\n\t\t\t[...list].forEach(item => {\n\t\t\t\tif(item.name === 'move' && item.source && item.source === move.target) {\n\t\t\t\t\tconst moveIndex = list.findIndex(_item => _item.name === 'move' && _item.source && _item.source === move.target);\n\t\t\t\t\tif(moveIndex !== -1) {\n\t\t\t\t\t\tlist.splice(moveIndex, 1);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t\t// remove attribute changes\n\t\tlist = list.filter(item => {\n\t\t\tif(item.name === 'attribute' && item.target === move.target) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\treturn true;\n\t\t});\n\t\tif(canRemoveReplace) {\n\t\t\tconst removeIndex = list.findIndex(item => item.name === 'replace' && item.target === move.target);\n\t\t\tif(removeIndex !== -1) {\n\t\t\t\tlist.splice(removeIndex, 1);\n\t\t\t}\n\t\t}\n\t}\n\n\tmoves.forEach((move, i) => {\n\t\tif(move.target) {\n\t\t\tconst explore = Utils.exploreTarget(move.target);\n\t\t\tlet flag = true;\n\t\t\tif (explore.self && hasIndex(explore.self)) {\n\t\t\t\tflag = false;\n\t\t\t}\n\t\t\tif (explore.parent && hasIndex(explore.parent)) {\n\t\t\t\tflag = false;\n\t\t\t}\n\t\t\tif (move.name === \"attribute\" && flag) {\n\t\t\t\tfilterListForAttribute(move);\n\t\t\t}\n\t\t\tif(move.name === 'replace' && flag) {\n\t\t\t\tif(!((explore?.self && explore.self.includes('panel')) || (!explore?.self && explore?.parent.includes('panel')))) {\n\t\t\t\t\tfilterListForRemove(move);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t});\n\treturn list;\n}\n","import React from \"react\";\nimport convert from \"xml-js\";\nimport {\n\tDialog,\n\tDialogTitle,\n\tDialogContent,\n\tDialogActions,\n\tButton,\n} from \"@material-ui/core\";\n\nimport Toolbar from \"./Toolbar\";\nimport { useStore } from \"../store/context\";\nimport {\n\tgenerateView,\n} from \"../store/extensionGenerator\";\nimport AxelorService from \"./../services/axelor.rest\";\nimport Utils, { generateCustomModelSchema } from \"../utils\";\nimport { MODEL_TYPE, ENTITY_TYPE, conditionProperties, otherNoQuoteProps } from \"../constants\";\nimport {\n\tsaveCustomModel,\n\tfetchJSONFields,\n\tremoveCustomModel,\n\tgenerateMenuChange,\n\tfetchCustomModel,\n\tfetchCustomFields,\n\tremoveEntityModel,\n\tfetchViews,\n\tsaveAttrsList,\n\tfetchAttrsList,\n\tsaveTranslationList,\n\tgetTranslationList,\n\tdeleteAttrsList,\n\tdeleteTranslationList\n} from \"./api\";\nimport DeleteConfirmation from \"./DeleteConfirmation\";\nimport {getXML} from './../store/computeXML';\nimport {generateXpath, eGeneratePath} from './../store/xpathGenerator';\nimport {optimizeExtension, getUpdatedAttrsList} from '../store/optimizeExtension';\n\nconst metaViewService = new AxelorService({\n\tmodel: \"com.axelor.meta.db.MetaView\",\n});\nconst customFieldService = new AxelorService({\n\tmodel: \"com.axelor.meta.db.MetaJsonField\",\n});\nconst entityModelService = new AxelorService({\n\tmodel: \"com.axelor.newstudio.db.EntityModel\",\n});\n\nconst getWidgets = ({widgets, items}) => {\n\tObject.keys(widgets).forEach(widgetId => {\n\t\tconst path = eGeneratePath(widgets, items, widgetId)\n\t\twidgets[widgetId].xPath = path;\n\t});\n\treturn widgets;\n}\n\nconst getChangedTranslationList = (list, initialList, removedTranslationList) => {\n\tconst deletedTranslationList = [];\n\tconst changedTranslationList = list.filter(item => {\n\t\tif(removedTranslationList.indexOf(item.key) !== -1) {\n\t\t\titem.id && deletedTranslationList.push({id: item.id, version: item.version});\n\t\t\treturn false;\n\t\t}\n\t\tif(item.id) {\n\t\t\tconst initialItem = initialList.find(i => i.language === item.language && i.key === item.key);\n\t\t\tif(initialItem && initialItem.message !== item.message) {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t\treturn false;\n\t\t}\n\t\treturn true;\n\t});\n\treturn {changedTranslationList, deletedTranslationList};\n}\n\nfunction ToolbarContainer(props) {\n\tconst { state, update, startLoader, undo, redo, clearHistory } = useStore();\n\tconst [\n\t\tdeleteConfirmationDialog,\n\t\tsetDeleteConfirmationDialog,\n\t] = React.useState(false);\n\n\tconst closeLoader = React.useCallback(() => {\n\t\tupdate(draft => {\n\t\t\tdraft.loader = false;\n\t\t})\n\t}, [update]);\n\n\tconst removeView = React.useCallback(\n\t\tfunction removeView(message) {\n\t\t\tstartLoader();\n\t\t\tconst clearView = (dialog) => {\n\t\t\t\tupdate((draft) => {\n\t\t\t\t\tclearHistory(draft);\n\t\t\t\t\tdraft.customModel = null;\n\t\t\t\t\tdraft.dialog = dialog;\n\t\t\t\t\tdraft.widgets = null;\n\t\t\t\t\tdraft.initialItems = null;\n\t\t\t\t\tdraft.initialWidgets = null;\n\t\t\t\t\tdraft.items = [];\n\t\t\t\t\tdraft.view = null;\n\t\t\t\t\tdraft.metaFields = [];\n\t\t\t\t\tdraft.selectedView = null;\n\t\t\t\t\tdraft.originalXML = null;\n\t\t\t\t\tdraft.extensionXML = null;\n\t\t\t\t\tdraft.selectedView = null;\n\t\t\t\t\tdraft.loader = false;\n\t\t\t\t\tdraft.extensionView = null;\n\t\t\t\t\tdraft.errorList = [];\n\t\t\t\t\tif (draft.modelType === MODEL_TYPE.CUSTOM) {\n\t\t\t\t\t\tdraft.model = null;\n\t\t\t\t\t}\n\t\t\t\t\tif(draft.modelType === MODEL_TYPE.ENTITY) {\n\t\t\t\t\t\tdraft.entityModel = null;\n\t\t\t\t\t\tdraft.model = null;\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t};\n\t\t\tif (state.modelType === MODEL_TYPE.CUSTOM) {\n\t\t\t\tif (state.model || state.customModel) {\n\t\t\t\t\tconst dialog = {\n\t\t\t\t\t\tmessage: \"View removed successfully\",\n\t\t\t\t\t\ttype: \"alert\",\n\t\t\t\t\t};\n\t\t\t\t\tremoveCustomModel(state.model || state.customModel).then((e) => {\n\t\t\t\t\t\tclearView(null);\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t} else if (state.modelType === MODEL_TYPE.ENTITY) {\n\t\t\t\tif(state.entityModel && state.entityModel.id) {\n\t\t\t\t\tconst dialog = {\n\t\t\t\t\t\tmessage: \"Entity model removed successfully\",\n\t\t\t\t\t\ttype: \"alert\",\n\t\t\t\t\t};\n\t\t\t\t\tremoveEntityModel(state.entityModel).then((e) => {\n\t\t\t\t\t\tclearView(null);\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tlet record;\n\t\t\t\tif (state.extensionView) {\n\t\t\t\t\trecord = {\n\t\t\t\t\t\tid: state.extensionView.id,\n\t\t\t\t\t\tversion: state.extensionView.version,\n\t\t\t\t\t};\n\t\t\t\t} else if(state.selectedView && state.selectedView.xmlId && state.selectedView.xmlId.indexOf(\"studio-\") === 0){\n\t\t\t\t\trecord = {\n\t\t\t\t\t\tid: state.selectedView.id,\n\t\t\t\t\t\tversion: state.selectedView.version,\n\t\t\t\t\t};\n\t\t\t\t}\n\t\t\t\tif(record) {\n\t\t\t\t\tmetaViewService.removeAll([record]).then((e) => {\n\t\t\t\t\t\tconst dialog = {\n\t\t\t\t\t\t\tmessage: message || \"View removed successfully\",\n\t\t\t\t\t\t\ttype: \"alert\",\n\t\t\t\t\t\t};\n\t\t\t\t\t\tclearView(null);\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\t[update, state, startLoader, clearHistory]\n\t);\n\tconst saveView = React.useCallback(async () => {\n\t\tif(!state.widgets) {\n\t\t\treturn;\n\t\t}\n\t\tstartLoader();\n\t\tif (state.modelType === MODEL_TYPE.CUSTOM) {\n\t\t\tconst { fields } = Utils.getCustomModelFields(\n\t\t\t\tstate.items,\n\t\t\t\tstate.widgets,\n\t\t\t\tnull,\n\t\t\t\ttrue\n\t\t\t);\n\t\t\tconst formProperties = state.widgets[-1];\n\t\t\tif(!formProperties.name || !formProperties.title) {\n\t\t\t\tconst dialog = {\n\t\t\t\t\tmessage: \"Please enter form name and title\",\n\t\t\t\t\ttype: \"alert\",\n\t\t\t\t};\n\t\t\t\tupdate((draft) => {\n\t\t\t\t\tdraft.loader = false;\n\t\t\t\t\tdraft.dialog = dialog;\n\t\t\t\t});\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tlet customModel = {\n\t\t\t\t...state.customModel,\n\t\t\t\t...Utils.getFormProperties(formProperties),\n\t\t\t\tfields,\n\t\t\t\t...(state.customModel && { version: state.customModel.version }),\n\t\t\t};\n\t\t\tif (formProperties.isGenerateMenu === true) {\n\t\t\t\tcustomModel[\"menuBuilder\"] = {\n\t\t\t\t\t...(state.customModel || {}).menuBuilder,\n\t\t\t\t\ttitle: formProperties.menuBuilderTitle,\n\t\t\t\t\tparentMenu: formProperties.menuBuilderParent,\n\t\t\t\t};\n\t\t\t}\n\t\t\tconst { isGenerateMenu } = state.customModel || {};\n\t\t\tif (formProperties.isGenerateMenu !== isGenerateMenu) {\n\t\t\t\tconst res = await generateMenuChange(customModel);\n\t\t\t\tconst { data = [] } = res;\n\t\t\t\tif (data[0] && data[0].reload) {\n\t\t\t\t\tconst modelResult = await fetchCustomModel(customModel.id);\n\t\t\t\t\tcustomModel = {\n\t\t\t\t\t\t...customModel,\n\t\t\t\t\t\tmenuBuilder: null,\n\t\t\t\t\t\tversion: modelResult.version,\n\t\t\t\t\t};\n\t\t\t\t}\n\t\t\t}\n\t\t\tsaveCustomModel(customModel).then((res) => {\n\t\t\t\tconst record = res.data[0];\n\t\t\t\tconst { fields = [], ...rest } = record;\n\t\t\t\tif (rest.menuBuilder) {\n\t\t\t\t\trest.menuBuilder = {\n\t\t\t\t\t\t...customModel.menuBuilder,\n\t\t\t\t\t\t...rest.menuBuilder,\n\t\t\t\t\t};\n\t\t\t\t}\n\t\t\t\tfetchJSONFields(\n\t\t\t\t\tfields.map((f) => f.id),\n\t\t\t\t\tupdate,\n\t\t\t\t\trest\n\t\t\t\t);\n\t\t\t\tconst dialog = {\n\t\t\t\t\tmessage: \"View saved successfully\",\n\t\t\t\t\ttype: \"alert\",\n\t\t\t\t};\n\t\t\t\tupdate((draft) => {\n\t\t\t\t\tdraft.customModel = record;\n\t\t\t\t\tdraft.loader = false;\n\t\t\t\t});\n\t\t\t});\n\t\t} else if (state.modelType === MODEL_TYPE.ENTITY) {\n\t\t\tconst formProperties = state.widgets[-1];\n\t\t\tif(!formProperties.name) {\n\t\t\t\tconst dialog = {\n\t\t\t\t\tmessage: \"Please enter entity name\",\n\t\t\t\t\ttype: \"alert\",\n\t\t\t\t};\n\t\t\t\tupdate((draft) => {\n\t\t\t\t\tdraft.loader = false;\n\t\t\t\t\tdraft.dialog = dialog;\n\t\t\t\t});\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tconst patch = generateView(state.widgets, state.items, state.modelType);\n\t\t\tconst properties = {...formProperties, model: `${formProperties.packageName}.${formProperties.name}`}\n\t\t\tconst form = {\n\t\t\t\telements: [\n\t\t\t\t\t{\n\t\t\t\t\t\tname: \"entity\",\n\t\t\t\t\t\ttype: \"element\",\n\t\t\t\t\t\tattributes: {\n\t\t\t\t\t\t\t...Utils.getFormProperties(properties, [\"extension\", \"metaFields\", \"id\", \"$attachments\", \"packageName\", \"model\"]),\n\t\t\t\t\t\t},\n\t\t\t\t\t\telements: [\n\t\t\t\t\t\t\t...patch,\n\t\t\t\t\t\t]\n\t\t\t\t\t},\n\t\t\t\t],\n\t\t\t};\n\t\t\tconst xml = Utils.processXML(\n\t\t\t\tconvert.json2xml(form, {\n\t\t\t\t\tcompact: false,\n\t\t\t\t\tfullTagEmptyElement: false,\n\t\t\t\t})\n\t\t\t);\n\t\t\tconst data = {\n\t\t\t\t...(state.entityModel ? state.entityModel : {}),\n\t\t\t\tentityXml: xml,\n\t\t\t\tname: formProperties.name,\n\t\t\t\tpackageName: formProperties.packageName,\n\t\t\t};\n\t\t\tentityModelService.save(data).then((res) => {\n\t\t\t\tconst record = res.data[0];\n\t\t\t\tif (res.status === -1) {\n\t\t\t\t\tconst dialog = {\n\t\t\t\t\t\tmessage: res.data.string,\n\t\t\t\t\t\ttype: \"alert\",\n\t\t\t\t\t};\n\t\t\t\t\tupdate((draft) => {\n\t\t\t\t\t\tdraft.loader = false;\n\t\t\t\t\t\tdraft.dialog = dialog;\n\t\t\t\t\t});\n\t\t\t\t} else if (record) {\n\t\t\t\t\tconst dialog = {\n\t\t\t\t\t\tmessage: \"Model saved successfully\",\n\t\t\t\t\t\ttype: \"alert\",\n\t\t\t\t\t};\n\t\t\t\t\tupdate((draft) => {\n\t\t\t\t\t\tdraft.entityModel = record;\n\t\t\t\t\t\tdraft.loader = false;\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t});\n\t\t} else {\n\t\t\tif (state.widgets) {\n\t\t\t\tconst exemptAttributes = [\n\t\t\t\t\t\"viewId\",\n\t\t\t\t\t\"modelId\",\n\t\t\t\t\t\"version\",\n\t\t\t\t\t\"helpOverride\",\n\t\t\t\t\t\"menubar\",\n\t\t\t\t\t\"xml\",\n\t\t\t\t\t\"computed\",\n\t\t\t\t\t\"xmlId\",\n\t\t\t\t\t\"type\",\n\t\t\t\t\t\"cols\",\n\t\t\t\t\t\"colSpan\",\n\t\t\t\t\t\"serverType\"\n\t\t\t\t];\n\t\t\t\tif (!state.exView || Utils.isCreatedFromStudio(state.exView)) {\n\t\t\t\t\tconst formProperties = state.widgets[-1];\n\t\t\t\t\tif(!formProperties.name || !formProperties.title) {\n\t\t\t\t\t\tconst dialog = {\n\t\t\t\t\t\t\tmessage: \"Please enter form name and title\",\n\t\t\t\t\t\t\ttype: \"alert\",\n\t\t\t\t\t\t};\n\t\t\t\t\t\tupdate((draft) => {\n\t\t\t\t\t\t\tdraft.loader = false;\n\t\t\t\t\t\t\tdraft.dialog = dialog;\n\t\t\t\t\t\t});\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t\tconst viewSearch = await metaViewService.search({data: {_domain: `self.name = '${formProperties.name}'`}});\n\t\t\t\t\tif(viewSearch && viewSearch.total && viewSearch.total > 0 && !state.exView?.id) {\n\t\t\t\t\t\tconst dialog = {\n\t\t\t\t\t\t\tmessage: \"View name already exists\",\n\t\t\t\t\t\t\ttype: \"alert\",\n\t\t\t\t\t\t};\n\t\t\t\t\t\tupdate((draft) => {\n\t\t\t\t\t\t\tdraft.loader = false;\n\t\t\t\t\t\t\tdraft.dialog = dialog;\n\t\t\t\t\t\t});\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t\tconst patch = generateView(\n\t\t\t\t\t\tstate.widgets,\n\t\t\t\t\t\tstate.items,\n\t\t\t\t\t\tstate.modelType\n\t\t\t\t\t);\n\t\t\t\t\tconst model = state.entityType === ENTITY_TYPE.ENTITY ? Utils.getEntityModel(state.entityModel): state.model.fullName;\n\t\t\t\t\tconst form = {\n\t\t\t\t\t\telements: [\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tname: \"form\",\n\t\t\t\t\t\t\t\ttype: \"element\",\n\t\t\t\t\t\t\t\tattributes: {\n\t\t\t\t\t\t\t\t\tmodel,\n\t\t\t\t\t\t\t\t\t...Utils.getFormProperties(formProperties, [...exemptAttributes, 'extension', 'id']),\n\t\t\t\t\t\t\t\t\tid: state.exView && state.exView.xmlId\n\t\t\t\t\t\t\t\t\t\t\t? state.exView.xmlId\n\t\t\t\t\t\t\t\t\t\t\t: `studio-${formProperties.name}`,\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\telements: [...patch],\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t],\n\t\t\t\t\t};\n\t\t\t\t\tconst xml = Utils.processXML(\n\t\t\t\t\t\tconvert.json2xml(form, {\n\t\t\t\t\t\t\tcompact: false,\n\t\t\t\t\t\t\tfullTagEmptyElement: false,\n\t\t\t\t\t\t})\n\t\t\t\t\t);\n\t\t\t\t\tlet data = {\n\t\t\t\t\t\txml,\n\t\t\t\t\t\textension: formProperties.extension,\n\t\t\t\t\t\ttype: \"form\",\n\t\t\t\t\t\tname: formProperties.name,\n\t\t\t\t\t\ttitle: formProperties.title,\n\t\t\t\t\t\tmodel,\n\t\t\t\t\t\txmlId: `studio-${formProperties.name}`,\n\t\t\t\t\t};\n\t\t\t\t\tif (state.exView && state.exView.id) {\n\t\t\t\t\t\tdata[\"id\"] = state.exView.id;\n\t\t\t\t\t\tdata[\"version\"] = state.exView.version;\n\t\t\t\t\t\tdata[\"xmlId\"] = state.exView.xmlId || data.xmlId;\n\t\t\t\t\t}\n\t\t\t\t\tmetaViewService.save(data).then(async (res) => {\n\t\t\t\t\t\tif (res.status === -1) {\n\t\t\t\t\t\t\tconst error = res.data;\n\t\t\t\t\t\t\tconst dialog = {\n\t\t\t\t\t\t\t\ttitle: error.title,\n\t\t\t\t\t\t\t\tmessage: error.string || error.message,\n\t\t\t\t\t\t\t\ttype: \"alert\",\n\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\tupdate((draft) => {\n\t\t\t\t\t\t\t\tdraft.loader = false;\n\t\t\t\t\t\t\t\tdraft.dialog = dialog;\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t} else if (res.data && res.data[0]) {\n\t\t\t\t\t\t\tconst fetchResult = await metaViewService.fetch(res.data[0].id);\n\t\t\t\t\t\t\tif(fetchResult.data && fetchResult.data[0]) {\n\t\t\t\t\t\t\t\tconst record = fetchResult.data[0];\n\t\t\t\t\t\t\t\tconst dialog = {\n\t\t\t\t\t\t\t\t\tmessage: \"View saved successfully\",\n\t\t\t\t\t\t\t\t\ttype: \"alert\",\n\t\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\t\tupdate((draft) => {\n\t\t\t\t\t\t\t\t\tconst schema = Utils.generateXMLToViewSchema({view: record, fields: draft.metaFieldStore});\n\t\t\t\t\t\t\t\t\tdraft.widgets = schema.widgets;\n\t\t\t\t\t\t\t\t\tdraft.initialWidgets = schema.widgets;\n\t\t\t\t\t\t\t\t\tdraft.items = schema.items;\n\t\t\t\t\t\t\t\t\tdraft.initialItems = schema.items;\n\t\t\t\t\t\t\t\t\tdraft.metaView = record;\n\t\t\t\t\t\t\t\t\tdraft.exView = record;\n\t\t\t\t\t\t\t\t\tdraft.selectedView = {...record};\n\t\t\t\t\t\t\t\t\tdraft.loader = false;\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t} else {\n\t\t\t\t\t\tconst { view } = state.view;\n\t\t\t\t\t\tconst model = state.entityType === ENTITY_TYPE.ENTITY ? Utils.getEntityModel(state.entityModel): state.model.fullName;\n\t\t\t\t\t\tconst originalSchema = Utils.generateViewFromJson({view: state.originalXML, fields: state.metaFieldStore});\n\t\t\t\t\t\tconst widgets = getWidgets(originalSchema);\n\t\t\t\t\t\tconst moves = optimizeExtension(state, widgets);\n\t\t\t\t\t\tconst {changedAttrsList, removedAttrsList} = getUpdatedAttrsList(state, widgets);\n\t\t\t\t\t\tconst extension = getXML(moves, state);\n\t\t\t\t\t\tlet isAttrsChanged = false;\n\t\t\t\t\t\tlet attrsList = [];\n\t\t\t\t\t\tif(changedAttrsList.length) {\n\t\t\t\t\t\t\tisAttrsChanged = true;\n\t\t\t\t\t\t\tconst conditionalValues = Object.values(conditionProperties);\n\t\t\t\t\t\t\tconst list = changedAttrsList.map(attr => {\n\t\t\t\t\t\t\t\tif([...conditionalValues, ...otherNoQuoteProps].includes(attr.name)) {\n\t\t\t\t\t\t\t\t\treturn attr;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\treturn {...attr, value: `\"${attr.value}\"`}\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\tawait saveAttrsList(list);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif(removedAttrsList.length) {\n\t\t\t\t\t\t\tisAttrsChanged = true;\n\t\t\t\t\t\t\tawait deleteAttrsList(removedAttrsList);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif(isAttrsChanged) {\n\t\t\t\t\t\t\tattrsList = await fetchAttrsList({model: state.model.fullName, view: state.selectedView.name});\n\t\t\t\t\t\t}\n\t\t\t\t\t\tconst {changedTranslationList, deletedTranslationList} = getChangedTranslationList(state.translationList, state.initialTranslationList, state.removedTranslationList);\n\t\t\t\t\t\tlet translationList = [];\n\t\t\t\t\t\tlet isTranslationChanged = false;\n\t\t\t\t\t\tif(changedTranslationList.length) {\n\t\t\t\t\t\t\tisTranslationChanged = true;\n\t\t\t\t\t\t\tawait saveTranslationList(changedTranslationList);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif(deletedTranslationList.length) {\n\t\t\t\t\t\t\tisTranslationChanged = true;\n\t\t\t\t\t\t\tawait deleteTranslationList(deletedTranslationList);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif(isTranslationChanged) {\n\t\t\t\t\t\t\tconst translationNames = Object.values(state.widgets).filter(widget => widget.title && widget.title.startsWith(\"studio:\")).map(widget => widget.title);\n\t\t\t\t\t\t\ttranslationList = await getTranslationList(translationNames);\n\t\t\t\t\t\t\tupdate(draft => {\n\t\t\t\t\t\t\t\tdraft.translationList = translationList;\n\t\t\t\t\t\t\t\tdraft.initialTranslationList = translationList;\n\t\t\t\t\t\t\t\tdraft.removedTranslationList = [];\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif(!extension.length && !state.extensionXML) {\n\t\t\t\t\t\t\tif(state.extensionView) {\n\t\t\t\t\t\t\t\tremoveView(\"Removed extension view due to no changes available\")\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tconst dialog = {\n\t\t\t\t\t\t\t\t\tmessage: \"View saved successfully\",\n\t\t\t\t\t\t\t\t\ttype: \"alert\",\n\t\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\t\tupdate(draft => {\n\t\t\t\t\t\t\t\t\tdraft.loader = false;\n\t\t\t\t\t\t\t\t\tconst views = draft.view;\n\t\t\t\t\t\t\t\t\tif(isAttrsChanged) {\n\t\t\t\t\t\t\t\t\t\tconst schema = Utils.generateXMLToViewSchema({view: views.view, fields: draft.metaFieldStore, extensionXML: views.extensionXML, attrsList});\n\t\t\t\t\t\t\t\t\t\tdraft.widgets = schema.widgets;\n\t\t\t\t\t\t\t\t\t\tdraft.initialWidgets = schema.widgets;\n\t\t\t\t\t\t\t\t\t\tdraft.items = schema.items;\n\t\t\t\t\t\t\t\t\t\tdraft.initialItems = schema.items;\n\t\t\t\t\t\t\t\t\t\tdraft.extensionMoves = [];\n\t\t\t\t\t\t\t\t\t\tdraft.attrsList = attrsList;\n\t\t\t\t\t\t\t\t\t\tgenerateXpath(draft);\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tconst getExistingExtension = (json) => {\n\t\t\t\t\t\t\tif(!json) {\n\t\t\t\t\t\t\t\treturn [];\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tconst {elements} = json;\n\t\t\t\t\t\t\tif(elements[0] && elements[0].elements) {\n\t\t\t\t\t\t\t\treturn elements[0].elements;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t};\n\t\t\t\t\t\tconst form = {\n\t\t\t\t\t\t\telements: [\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\ttype: \"element\",\n\t\t\t\t\t\t\t\t\tname: state.widgets[-1].type,\n\t\t\t\t\t\t\t\t\tattributes: {\n\t\t\t\t\t\t\t\t\t\tmodel,\n\t\t\t\t\t\t\t\t\t\tid: `studio-${view.name}`,\n\t\t\t\t\t\t\t\t\t\ttitle: state.widgets[-1].title,\n\t\t\t\t\t\t\t\t\t\tname: view.name,\n\t\t\t\t\t\t\t\t\t\textension: 'true'\n\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\telements: [\n\t\t\t\t\t\t\t\t\t\t...getExistingExtension(state.extensionXML),\n\t\t\t\t\t\t\t\t\t\t...extension\n\t\t\t\t\t\t\t\t\t],\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t],\n\t\t\t\t\t\t};\n\t\t\t\t\t\tconst xml = Utils.processXML(\n\t\t\t\t\t\t\tconvert.json2xml(form, {\n\t\t\t\t\t\t\t\tcompact: false,\n\t\t\t\t\t\t\t\tfullTagEmptyElement: false,\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t);\n\t\t\t\t\t\tlet data = {\n\t\t\t\t\t\t\txml,\n\t\t\t\t\t\t\textension: true,\n\t\t\t\t\t\t\ttype: state.widgets[-1].type,\n\t\t\t\t\t\t};\n\t\t\t\t\t\tif (state.extensionView) {\n\t\t\t\t\t\t\tdata = {\n\t\t\t\t\t\t\t\t...data,\n\t\t\t\t\t\t\t\tid: state.extensionView.id,\n\t\t\t\t\t\t\t\tversion: state.extensionView.version,\n\t\t\t\t\t\t\t};\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tdata = {\n\t\t\t\t\t\t\t\t...data,\n\t\t\t\t\t\t\t\tmodel,\n\t\t\t\t\t\t\t\tname: view.name,\n\t\t\t\t\t\t\t\ttitle: view.title,\n\t\t\t\t\t\t\t\txmlId: `studio-${view.name}`,\n\t\t\t\t\t\t\t};\n\t\t\t\t\t\t}\n\t\t\t\t\t\tconsole.log(xml);\n\t\t\t\t\t\tif(state.extensionView) {\n\t\t\t\t\t\t\tif(state.extensionView.xml === data.xml) {\n\t\t\t\t\t\t\t\tupdate(draft => {\n\t\t\t\t\t\t\t\t\tdraft.loader = false;\n\t\t\t\t\t\t\t\t\tif(isAttrsChanged) {\n\t\t\t\t\t\t\t\t\t\tconst dialog = {\n\t\t\t\t\t\t\t\t\t\t\tmessage: \"View saved successfully\",\n\t\t\t\t\t\t\t\t\t\t\ttype: \"alert\",\n\t\t\t\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\t\t\t\tupdate(draft => {\n\t\t\t\t\t\t\t\t\t\t\tdraft.loader = false;\n\t\t\t\t\t\t\t\t\t\t\tconst views = draft.view;\n\t\t\t\t\t\t\t\t\t\t\tconst schema = Utils.generateXMLToViewSchema({view: views.view, fields: draft.metaFieldStore, extensionXML: views.extensionXML, attrsList});\n\t\t\t\t\t\t\t\t\t\t\tdraft.widgets = schema.widgets;\n\t\t\t\t\t\t\t\t\t\t\tdraft.initialWidgets = schema.widgets;\n\t\t\t\t\t\t\t\t\t\t\tdraft.items = schema.items;\n\t\t\t\t\t\t\t\t\t\t\tdraft.initialItems = schema.items;\n\t\t\t\t\t\t\t\t\t\t\tif(isAttrsChanged) {\n\t\t\t\t\t\t\t\t\t\t\t\tdraft.attrsList = attrsList;\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\tgenerateXpath(draft);\n\t\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\tmetaViewService.save(data).then(async(res) => {\n\t\t\t\t\t\t\tif (res.status === -1) {\n\t\t\t\t\t\t\t\tconst dialog = {\n\t\t\t\t\t\t\t\t\tmessage: res.data.string,\n\t\t\t\t\t\t\t\t\ttype: \"alert\",\n\t\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\t\tupdate((draft) => {\n\t\t\t\t\t\t\t\t\tdraft.loader = false;\n\t\t\t\t\t\t\t\t\tdraft.dialog = dialog;\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t} else if (res.data && res.data[0]) {\n\t\t\t\t\t\t\t\tconst record = res.data[0];\n\t\t\t\t\t\t\t\tconst { view } = state.view;\n\t\t\t\t\t\t\t\tconst dialog = {\n\t\t\t\t\t\t\t\t\tmessage: \"View saved successfully\",\n\t\t\t\t\t\t\t\t\ttype: \"alert\",\n\t\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\t\tconst views = await fetchViews(view);\n\t\t\t\t\t\t\t\tupdate((draft) => {\n\t\t\t\t\t\t\t\t\tif(draft.entityType === ENTITY_TYPE.ENTITY) {\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\tconst schema = Utils.generateXMLToViewSchema({view: views.view, fields: draft.metaFieldStore, extensionXML: views.extensionXML, attrsList});\n\t\t\t\t\t\t\t\t\tdraft.widgets = schema.widgets;\n\t\t\t\t\t\t\t\t\tdraft.initialWidgets = schema.widgets;\n\t\t\t\t\t\t\t\t\tdraft.items = schema.items;\n\t\t\t\t\t\t\t\t\tdraft.initialItems = schema.items;\n\t\t\t\t\t\t\t\t\tdraft.exView = res.data[0];\n\t\t\t\t\t\t\t\t\tdraft.extensionMoves = [];\n\t\t\t\t\t\t\t\t\tdraft.loader = false;\n\t\t\t\t\t\t\t\t\tif(isAttrsChanged) {\n\t\t\t\t\t\t\t\t\t\tdraft.attrsList = attrsList;\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\tdraft.extensionView = {\n\t\t\t\t\t\t\t\t\t\t...draft.extensionView,\n\t\t\t\t\t\t\t\t\t\t...record,\n\t\t\t\t\t\t\t\t\t\tversion: views.extensionXML.id === record.id ? views.extensionXML.version : record.version,\n\t\t\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\t\t\tgenerateXpath(draft);\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}, [state, update, startLoader, closeLoader, removeView]);\n\n\tconst handleClose = React.useCallback(() => {\n\t\tupdate((draft) => {\n\t\t\tdraft.dialog = null;\n\t\t});\n\t}, [update]);\n\n\tconst handleNew = React.useCallback(() => {\n\t\tstartLoader();\n\t\tupdate((draft) => {\n\t\t\tclearHistory(draft)\n\t\t\tdraft.items = [];\n\t\t\tdraft.customModel = null;\n\t\t\tdraft.exView = null;\n\t\t\tdraft.view = null;\n\t\t\tdraft.extensionXML = null;\n\t\t\tdraft.extensionView = null;\n\t\t\tdraft.loader = false;\n\t\t\tdraft.metaFields = draft.metaFieldStore;\n\t\t\tdraft.selectedView = null;\n\t\t\tdraft.translationList = [];\n\t\t\tdraft.initialTranslationList = [];\n\t\t\tdraft.attrsList = [];\n\t\t\tif(!(draft.modelType === MODEL_TYPE.BASE && draft.entityType === ENTITY_TYPE.ENTITY)) {\n\t\t\t\tdraft.entityModel = null;\n\t\t\t}\n\t\t\tif(draft.modelType === MODEL_TYPE.ENTITY) {\n\t\t\t\tdraft.entityType = ENTITY_TYPE.ENTITY;\n\t\t\t\tdraft.actualType = null;\n\t\t\t\tdraft.model = null;\n\t\t\t\tdraft.metaFields = [];\n\t\t\t\tdraft.metaFieldStore = [];\n\t\t\t}\n\t\t\tif (draft.modelType === MODEL_TYPE.CUSTOM) {\n\t\t\t\tdraft.model = null;\n\t\t\t}\n\t\t\tdraft.widgets = {\n\t\t\t\t\"-1\": {\n\t\t\t\t\ttype: \"form\",\n\t\t\t\t\tcols: 12,\n\t\t\t\t\textension: false,\n\t\t\t\t\t...Utils.getDefaultProperties(state.modelType, state.entityType, state.entityModel),\n\t\t\t\t},\n\t\t\t\t\"0\": { type: \"dump_field\", name: \"\" },\n\t\t\t};\n\t\t\tdraft.editWidget = -1;\n\t\t\tdraft.editWidgetType = null;\n\t\t\tdraft.tabIndex = 0;\n\t\t});\n\t}, [update, state.modelType, startLoader, state.entityType, state.entityModel, clearHistory]);\n\n\tconst saveCustomFieldView = React.useCallback(() => {\n\t\tif ((state.customFieldItems || state.removedCustomFields.length) && state.modelField?.name) {\n\t\t\tstartLoader();\n\t\t\tconst extraProps = {\n\t\t\t\tmodelField: state.modelField.name,\n\t\t\t\tmodel: state.model.fullName,\n\t\t\t};\n\t\t\tconst { fields } = Utils.getCustomModelFields(\n\t\t\t\tstate.customFieldItems,\n\t\t\t\tstate.customFieldWidgets,\n\t\t\t\textraProps,\n\t\t\t\ttrue\n\t\t\t);\n\t\t\tif (fields.length || state.removedCustomFields.length) {\n\t\t\t\tconst all = fields.map((field) => customFieldService.save(field));\n\t\t\t\tif (state.removedCustomFields.length) {\n\t\t\t\t\tall.push(customFieldService.removeAll(state.removedCustomFields));\n\t\t\t\t}\n\t\t\t\tPromise.all(all).then((res) => {\n\t\t\t\t\tfetchCustomFields(state.modelField, state.model).then((res) => {\n\t\t\t\t\t\tconst { data = [] } = res;\n\t\t\t\t\t\tconst schema = generateCustomModelSchema(data, undefined, '', 'customForm');\n\t\t\t\t\t\tupdate((draft) => {\n\t\t\t\t\t\t\tdraft.customFieldWidgets = schema.widgets;\n\t\t\t\t\t\t\tdraft.customFieldItems = schema.items;\n\t\t\t\t\t\t\tdraft.customFields = data;\n\t\t\t\t\t\t\tdraft.loader = false;\n\t\t\t\t\t\t\tdraft.removedCustomFields = [];\n\t\t\t\t\t\t});\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\tcloseLoader();\n\t\t\t}\n\t\t}\n\t}, [update, closeLoader, state, startLoader]);\n\n\tconst handleConfirmationClose = React.useCallback(() => {\n\t\tsetDeleteConfirmationDialog(false);\n\t}, []);\n\n\tconst deleteView = React.useCallback(() => {\n\t\tsetDeleteConfirmationDialog(true);\n\t}, []);\n\n\tconst handleRemoveConfirmation = React.useCallback(() => {\n\t\thandleConfirmationClose();\n\t\tremoveView();\n\t}, [removeView, handleConfirmationClose]);\n\n\tconst handleSidePanelToggle = React.useCallback(() => {\n\t\tupdate(draft => {\n\t\t\tdraft.sidePanel = !draft.sidePanel;\n\t\t});\n\t}, [update]);\n\n\tfunction renderDialog() {\n\t\tconst { dialog } = state;\n\t\treturn (\n\t\t\tdialog && (\n\t\t\t\t<Dialog open={Boolean(dialog.message)}>\n\t\t\t\t\t<DialogTitle>{dialog.title || 'Alert'}</DialogTitle>\n\t\t\t\t\t<DialogContent>\n\t\t\t\t\t\t<div dangerouslySetInnerHTML={{__html: dialog.message}}>\n\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</DialogContent>\n\t\t\t\t\t<DialogActions>\n\t\t\t\t\t\t<Button onClick={handleClose} color=\"primary\" autoFocus>\n\t\t\t\t\t\t\tOK\n\t\t\t\t\t\t</Button>\n\t\t\t\t\t</DialogActions>\n\t\t\t\t</Dialog>\n\t\t\t)\n\t\t);\n\t}\n\n\treturn (\n\t\t<React.Fragment>\n\t\t\t{renderDialog()}\n\t\t\t<Toolbar\n\t\t\t\tupdate={update}\n\t\t\t\tsaveView={saveView}\n\t\t\t\tsaveCustomFieldView={saveCustomFieldView}\n\t\t\t\tremoveView={deleteView}\n\t\t\t\tmodel={state.model}\n\t\t\t\textensionView={state.extensionView}\n\t\t\t\tmodelType={state.modelType}\n\t\t\t\tonNew={handleNew}\n\t\t\t\tmodelField={state.modelField}\n\t\t\t\tcustomModel={state.customModel}\n\t\t\t\tselectedView={state.selectedView}\n\t\t\t\tstartLoader={startLoader}\n\t\t\t\tentityModel={state.entityModel}\n\t\t\t\terrorList={state.errorList}\n\t\t\t\tentityType={state.entityType}\n\t\t\t\tmetaFieldStore={state.metaFieldStore}\n\t\t\t\tundo={undo}\n\t\t\t\tredo={redo}\n\t\t\t\tpastLength={state.past.length}\n\t\t\t\tfutureLength={state.future.length}\n\t\t\t\tclearHistory={clearHistory}\n\t\t\t\tonSidePanelToggle={handleSidePanelToggle}\n\t\t\t/>\n\t\t\t<DeleteConfirmation\n\t\t\t\topen={deleteConfirmationDialog}\n\t\t\t\tonClose={handleConfirmationClose}\n\t\t\t\tonOk={handleRemoveConfirmation}\n\t\t\t\tmessage=\"Are you sure? Do you want to delete it?\"\n\t\t\t/>\n\t\t</React.Fragment>\n\t);\n}\n\nexport default React.memo(ToolbarContainer);\n","import React from \"react\";\nimport { Grid } from \"@material-ui/core\";\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport { DndProvider } from \"react-dnd\";\nimport Backend from \"react-dnd-html5-backend\";\n\nimport SidePanel from \"./Panels/SidePanel\";\nimport MainPanel from \"./Panels/MainPanel\";\nimport Toolbar from \"./Toolbar/ToolbarContainer\";\nimport StudioProvider, { useStore } from \"./store/context\";\nimport {fetchLanguages, fetchUserPreferences} from \"./Toolbar/api\";\n\nconst useStyles = makeStyles({\n\tcontainer: {\n\t\tdisplay: \"flex\",\n\t\theight: \"100%\",\n\t},\n\ttoolbarWrapper: {\n\t\theight: \"60px\",\n\t},\n\tpanelContainer: {\n\t\tdisplay: \"flex\",\n\t\theight: \"calc(100% - 60px)\",\n\t},\n\tsidePanel: {\n\t\theight: \"100%\",\n\t},\n\tmainPanel: {\n\t\theight: \"100%\",\n\t\t'.modern-dark &': {\n\t\t\tbackgroundColor: \"#323232\",\n\t\t},\n\t},\n});\n\nfunction AppContent() {\n\tconst classes = useStyles();\n\tconst {state, update} = useStore();\n\tconst { sidePanel = true } = state;\n\n\tReact.useEffect(() => {\n\t\tfetchLanguages().then(result => {\n\t\t\tupdate(draft => {\n\t\t\t\tdraft.languageList = [...result];\n\t\t\t});\n\t\t});\n\t\tfetchUserPreferences().then(result => {\n\t\t\tif(result && result.theme) {\n\t\t\t\tdocument.body.className = result.theme;\n\t\t\t}\n\t\t});\n\t}, [update]);\n\n\treturn (\n\t\t<Grid container className={classes.container}>\n\t\t\t<Grid item xs={12} className={classes.toolbarWrapper}>\n\t\t\t\t<Toolbar />\n\t\t\t</Grid>\n\t\t\t<Grid container className={classes.panelContainer}>\n\t\t\t\t{sidePanel && (\n\t\t\t\t\t<Grid item xs={3} className={classes.sidePanel}>\n\t\t\t\t\t\t<SidePanel />\n\t\t\t\t\t</Grid>\n\t\t\t\t)}\n\t\t\t\t<Grid item xs={sidePanel ? 9 : 12} className={classes.mainPanel}>\n\t\t\t\t\t<MainPanel />\n\t\t\t\t</Grid>\n\t\t\t</Grid>\n\t\t</Grid>\n\t);\n}\n\nexport default function App() {\n\treturn (\n\t\t<StudioProvider>\n\t\t\t<DndProvider backend={Backend}>\n\t\t\t\t<AppContent />\n\t\t\t</DndProvider>\n\t\t</StudioProvider>\n\t);\n}\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport \"./index.css\";\nimport \"./theme.css\";\nimport App from \"./App\";\n\nReactDOM.render(<App />, document.getElementById(\"root\"));\n","import React from \"react\";\nimport produce from \"immer\";\nimport { TYPE, IDS, PANEL_TYPE, MODEL_TYPE, ENTITY_TYPE } from \"../constants\";\nimport {\n\treorderGrid,\n\tcheckExclusive,\n\tarrangeGrid,\n\tcheckGridEmptyCells,\n\tsetErrorList,\n} from \"../utils\";\nimport { original } from \"immer\";\nimport {generateExtension} from \"./computeXML\";\nimport {generateXpath} from \"./xpathGenerator\";\nimport {validateParentPanelItems, validateOnRemove} from \"./validation\";\nimport Utils, {isExtensionView} from './../utils';\n\nconst StoreContext = React.createContext();\n\nfunction useMutableState(defaultValue) {\n\tconst [state, setState] = React.useState(defaultValue);\n\treturn [\n\t\tstate,\n\t\tReact.useCallback((updater) => setState(produce(updater)), [setState]),\n\t];\n}\n\nfunction StoreProvider({ children }) {\n\tconst [state, setState] = useMutableState({\n\t\tfuture: [],\n\t\tpast: [],\n\t\ttitle: \"\",\n\t\titems: [],\n\t\twidgets: null,\n\t\tdragWidget: null,\n\t\teditWidget: null,\n\t\thoverWidget: null,\n\t\tinitialWidgets: null,\n\t\tinitialItems: null,\n\t\ttabIndex: 0,\n\t\tmodelType: \"BASE\",\n\t\tcustomFields: [],\n\t\tcustomFieldItems: [],\n\t\tcustomFieldWidgets: null,\n\t\tmodelField: null,\n\t\tentityModel: null,\n\t\thoverAttr: {},\n\t\tloader: false,\n\t\tremovedCustomFields: [],\n\t\terrorList: {},\n\t\tentityType: ENTITY_TYPE.META,\n\t\tentityFields: [],\n\t\tactualType: null,\n\t\textensionMoves: [],\n\t\tsidePanel: true,\n\t\tattrsList: [],\n\t\tremovedTranslationList: [],\n\t});\n\tconst { widgets } = state;\n\n\tfunction getAllChildrenIds(id, widgetType) {\n\t\tconst widgets =\n\t\t\twidgetType === \"customField\" ? state.customFieldWidgets : state.widgets;\n\t\tconst collectIds = (parent) => {\n\t\t\tconst { items = [] } = widgets[parent];\n\t\t\treturn items.reduce((all, item) => all.concat(collectIds(item)), [\n\t\t\t\tparent,\n\t\t\t]);\n\t\t};\n\t\treturn collectIds(id);\n\t}\n\n\tfunction onExtension(moveIds, state, oldWidgets, oldItems) {\n\t\tif(state.exView && !Utils.isCreatedFromStudio(state.exView)) {\n\t\t\tgenerateExtension(moveIds, state);\n\t\t}\n\t}\n\n\t// update widget properties\n\tfunction onWidgetChange(id, props, reset = false) {\n\t\tsetState((draft) => {\n\t\t\tgenerateHistory(draft);\n\t\t\tconst isCustomField = draft.editWidgetType === \"customField\";\n\t\t\tconst extendList = [];\n\t\t\tsetErrorList(props, draft, id, isCustomField);\n\t\t\tconst widgets =\n\t\t\t\tdraft.editWidgetType === \"customField\"\n\t\t\t\t\t? draft.customFieldWidgets\n\t\t\t\t\t: draft.widgets;\n\t\t\tif (reset) {\n\t\t\t\twidgets[id] = {};\n\t\t\t}\n\t\t\tconst widget =\n\t\t\t\tdraft.editWidgetType === \"customField\" && draft.customFieldWidgets\n\t\t\t\t\t? draft.customFieldWidgets[id]\n\t\t\t\t\t: draft.widgets[id];\n\t\t\tif (widget) {\n\t\t\t\tObject.keys(props).forEach((key) => {\n\t\t\t\t\tlet value = props[key];\n\t\t\t\t\tlet doChange = true;\n\t\t\t\t\t// add change in move\n\t\t\t\t\tconst _value = widget[key] === undefined ? \"\" : widget[key];\n\t\t\t\t\tif(_value !== value) {\n\t\t\t\t\t\tconst xPath = id === -1 ? '/' : widgets[id].xPath;\n\t\t\t\t\t\tlet _value = [undefined, null].includes(value) ? '' : value;\n\n\t\t\t\t\t\tisExtensionView(state) && extendList.push({name: 'attribute', target: xPath, attributes: {name: Utils.keyReplacer(key, MODEL_TYPE.BASE), value: Utils.valueConverter(_value, key)}, id});\n\t\t\t\t\t}\n\t\t\t\t\tif (key === \"colSpan\") {\n\t\t\t\t\t\tconst parentId = Object.keys(widgets).find(\n\t\t\t\t\t\t\t(x) => (widgets[x].items || []).indexOf(id) > -1\n\t\t\t\t\t\t);\n\t\t\t\t\t\tvalue = Math.min(\n\t\t\t\t\t\t\tNumber((widgets[parentId] && widgets[parentId].cols) || value),\n\t\t\t\t\t\t\tvalue\n\t\t\t\t\t\t);\n\t\t\t\t\t} else if (key === \"cols\" && value) {\n\t\t\t\t\t\tvalue = Math.min(12, Number(value));\n\t\t\t\t\t}\n\t\t\t\t\tif (doChange) {\n\t\t\t\t\t\twidget[key] = value;\n\t\t\t\t\t\tkey === \"layout\" &&\n\t\t\t\t\t\t\tvalue === PANEL_TYPE.stack &&\n\t\t\t\t\t\t\t(widget.cols = 12);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t\tif(draft.editWidgetType !== \"customField\" && draft.modelType === MODEL_TYPE.BASE) {\n\t\t\t\tonExtension(extendList, draft, draft.widgets, draft.items);\n\t\t\t\tgenerateXpath(draft);\n\t\t\t}\n\t\t});\n\t}\n\n\t// remove widget\n\tfunction onRemove(panelId, index, id, widgetType) {\n\t\tconst extendList = [];\n\t\tconst isCustomField = widgetType === \"customField\";\n\t\tlet result = window.confirm(\"Sure want to delete?\");\n\t\tif (!result) return;\n\t\tsetState((draft) => {\n\t\t\tgenerateHistory(draft);\n\t\t\tconst widgets =\n\t\t\t\twidgetType === \"customField\" ? draft.customFieldWidgets : draft.widgets;\n\t\t\tconst widgetItems =\n\t\t\t\twidgetType === \"customField\" ? \"customFieldItems\" : \"items\";\n\t\t\tlet oldItems = [...draft.items];\n\t\t\tlet oldWidgets =original(draft.widgets);\n\t\t\tconst widget = widgets[id];\n\n\t\t\tif (!isCustomField && draft.modelType === MODEL_TYPE.BASE) {\n\t\t\t\tconst index = draft.metaFieldStore.findIndex(\n\t\t\t\t\t(f) =>\n\t\t\t\t\t\t(f.typeName === widget.typeName || widget.type === 'field') &&\n\t\t\t\t\t\tf.name === widget.name\n\t\t\t\t);\n\t\t\t\tif (index !== -1) {\n\t\t\t\t\tdraft.metaFields.unshift(draft.metaFieldStore[index]);\n\t\t\t\t}\n\t\t\t}\n\t\t\tconst isPanel = panelId && IDS.form !== panelId;\n\t\t\tindex = (isPanel ? widgets[panelId].items : draft[widgetItems]).findIndex(\n\t\t\t\t(x) => `${x}` === `${id}`\n\t\t\t);\n\t\t\tif (index > -1 && widgets[id]) {\n\t\t\t\tlet ids = getAllChildrenIds(id, widgetType);\n\t\t\t\tids.forEach((id) => {\n\t\t\t\t\tif (isCustomField) {\n\t\t\t\t\t\tconst widget = widgets[id];\n\t\t\t\t\t\tif (widget.id) {\n\t\t\t\t\t\t\tdraft.removedCustomFields.push({\n\t\t\t\t\t\t\t\tid: widget.id,\n\t\t\t\t\t\t\t\tversion: widget.version,\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\tconst childrenIds = [...ids];\n\t\t\t\tif (isPanel) {\n\t\t\t\t\tif (widgets[panelId].layout === PANEL_TYPE.grid && ![TYPE.menubar, TYPE.toolbar].includes(widgets[panelId].type)) {\n\t\t\t\t\t\tconst arrangeItems = arrangeGrid(draft, { panelId, index, id }, widgetType);\n\t\t\t\t\t\tids = ids.concat(\n\t\t\t\t\t\t\tarrangeItems.ids\n\t\t\t\t\t\t);\n\t\t\t\t\t\tisExtensionView(state) && extendList.push(...arrangeItems.extendList);\n\t\t\t\t\t} else {\n\t\t\t\t\t\twidgets[panelId].items.splice(index, 1);\n\t\t\t\t\t}\n\t\t\t\t\t// draft.widgets[panelId].items.splice(index, 1);\n\t\t\t\t} else {\n\t\t\t\t\tdraft[widgetItems].splice(index, 1);\n\t\t\t\t}\n\t\t\t\tif(widgets[id]) {\n\t\t\t\t\tisExtensionView(state) && extendList.push({name: 'replace', target: widgets[id].xPath});\n\t\t\t\t}\n\t\t\t\tids.forEach((id) => {\n\t\t\t\t\tif(widgets[id]) {\n\t\t\t\t\t\tif(!childrenIds.includes(id)) {\n\t\t\t\t\t\t\tisExtensionView(state) && extendList.push({name: 'replace', target: widgets[id].xPath});\n\t\t\t\t\t\t}\n\t\t\t\t\t\tdelete widgets[id]\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\tif (ids.indexOf(draft.editWidget) > -1) {\n\t\t\t\t\tdraft.editWidget = null;\n\t\t\t\t}\n\t\t\t}\n\t\t\tvalidateOnRemove(draft, id);\n\t\t\tif(!isCustomField && draft.modelType === MODEL_TYPE.BASE) {\n\t\t\t\tvalidateParentPanelItems(draft, panelId);\n\t\t\t\tonExtension(extendList, draft, oldWidgets, oldItems);\n\t\t\t\tgenerateXpath(draft);\n\t\t\t}\n\t\t});\n\t}\n\n\t// select widget, to open properties editor\n\tfunction onSelect(id = null, type = null) {\n\t\tsetState((draft) => {\n\t\t\tdraft.editWidget = id;\n\t\t\tdraft.tabIndex = 0;\n\t\t\tdraft.editWidgetType = type;\n\t\t});\n\t}\n\n\t// set current dragging widget\n\tfunction onDrag(id = null, { props, isDrop } = {}) {\n\t\tsetState((draft) => {\n\t\t\tconst _extendList = [];\n\t\t\tconst { attrs = {} } = props;\n\t\t\tconst _attrs = {\n\t\t\t\ttype: attrs.type,\n\t\t\t\ttitle: attrs.label,\n\t\t\t\tname: attrs.name,\n\t\t\t\trelationship: attrs.relationship,\n\t\t\t\tmappedBy: attrs.mappedBy,\n\t\t\t\t...attrs,\n\t\t\t};\n\t\t\tconst { dragWidget, hoverWidget, editWidget, dragWidgetProps } = draft;\n\t\t\tdraft.dragWidget = null;\n\t\t\tdraft.hoverWidget = null;\n\t\t\tconst extraAttr = { ...draft.hoverAttr };\n\t\t\tif (_attrs.widgetAttrs && extraAttr.widgetAttrs) {\n\t\t\t\tconst _eWidgetAttr = JSON.parse(extraAttr.widgetAttrs);\n\t\t\t\tconst _attrsWidgetAttr = JSON.parse(_attrs.widgetAttrs);\n\t\t\t\textraAttr.widgetAttrs = JSON.stringify({\n\t\t\t\t\t..._attrsWidgetAttr,\n\t\t\t\t\t..._eWidgetAttr,\n\t\t\t\t});\n\t\t\t}\n\t\t\tdraft.dragWidgetProps = Object.assign({}, props, {\n\t\t\t\tattrs: { ..._attrs, ...extraAttr },\n\t\t\t});\n\n\t\t\tif (editWidget && editWidget === dragWidget) {\n\t\t\t\tdraft.editWidget = null;\n\t\t\t}\n\t\t\tif (isDrop) {\n\t\t\t\tif (!hoverWidget || !dragWidgetProps) return;\n\t\t\t\tgenerateHistory(draft);\n\t\t\t\tconst index = draft.metaFields.findIndex(\n\t\t\t\t\t(f) =>\n\t\t\t\t\t\tf.typeName === dragWidgetProps.attrs.typeName &&\n\t\t\t\t\t\tf.name === dragWidgetProps.attrs.name\n\t\t\t\t);\n\t\t\t\tif (index !== -1) {\n\t\t\t\t\tdraft.metaFields.splice(index, 1);\n\t\t\t\t}\n\t\t\t\tdragWidgetProps.attrs = {\n\t\t\t\t\t...dragWidgetProps.attrs,\n\t\t\t\t\t...draft.hoverAttr,\n\t\t\t\t};\n\t\t\t\tlet oldItems = [...draft.items];\n\t\t\t\tlet oldWidgets =\n\t\t\t\thoverWidget._type === \"customField\"\n\t\t\t\t\t? {...draft.customFieldWidgets}\n\t\t\t\t\t: original(draft.widgets);\n\n\t\t\t\tconst {extendList} = reorderGrid({ hoverWidget, dragWidgetProps })(draft);\n\t\t\t\t_extendList.push(...extendList);\n\t\t\t\tlet hoverPanel;\n\t\t\t\tif(hoverWidget._type !== \"customField\") {\n\t\t\t\t\thoverPanel = draft.widgets[hoverWidget.panelId];\n\t\t\t\t}\n\t\t\t\tif (hoverWidget.panelId && ![TYPE.menubar, TYPE.toolbar].includes(hoverPanel?.type)) {\n\t\t\t\t\tconst {extendList = []} = checkGridEmptyCells(draft, hoverWidget.panelId, hoverWidget._type);\n\t\t\t\t\t_extendList.push(...extendList);\n\t\t\t\t}\n\t\t\t\tif (\n\t\t\t\t\tdragWidgetProps.panelId &&\n\t\t\t\t\thoverWidget.panelId !== dragWidgetProps.panelId &&\n\t\t\t\t\t![TYPE.menubar, TYPE.toolbar].includes(hoverPanel?.type)\n\t\t\t\t) {\n\t\t\t\t\tconst {extendList = []} = checkGridEmptyCells(\n\t\t\t\t\t\tdraft,\n\t\t\t\t\t\tdragWidgetProps.panelId,\n\t\t\t\t\t\thoverWidget._type\n\t\t\t\t\t);\n\t\t\t\t\t_extendList.push(...extendList);\n\t\t\t\t}\n\t\t\t\tif(hoverWidget._type !== \"customField\" && draft.modelType === MODEL_TYPE.BASE) {\n\t\t\t\t\tvalidateParentPanelItems(draft, dragWidgetProps.panelId);\n\t\t\t\t\tvalidateParentPanelItems(draft, hoverWidget.panelId);\n\t\t\t\t\tonExtension(_extendList, draft, oldWidgets, oldItems);\n\t\t\t\t\tgenerateXpath(draft);\n\t\t\t\t}\n\t\t\t\tdraft.hoverAttr = {};\n\t\t\t} else {\n\t\t\t\tdraft.dragWidget = id;\n\t\t\t}\n\t\t});\n\t}\n\n\tfunction onTranslationRemove(key) {\n\t\tsetState((draft) => {\n\t\t\tdraft.removedTranslationList.push(key);\n\t\t});\n\t}\n\n\tfunction onHover(hoverWidget) {\n\t\tsetState((draft) => {\n\t\t\tdraft.hoverWidget = hoverWidget;\n\t\t});\n\t}\n\n\t// move widget in form\n\tfunction onMove({ source, destination }, flag, _type) {\n\t\tconst resolver = (isMoved) => ({ isMoved });\n\n\t\tif (\n\t\t\t// avoid drop target of form itself\n\t\t\t!source ||\n\t\t\t!destination ||\n\t\t\t(destination.id === IDS.form && state.items.length > 1)\n\t\t) {\n\t\t\treturn resolver(false);\n\t\t}\n\n\t\t// on create widget case\n\t\tif (Object.values(IDS.createWidgets).indexOf(source.id) > -1) {\n\t\t\treturn resolver(true);\n\t\t}\n\n\t\tconst _widgets =\n\t\t\t_type === \"customField\" ? state.customFieldWidgets : widgets;\n\t\tif (\n\t\t\t// case for create new widget\n\t\t\t// special case for exclusive\n\t\t\t(!source.attrs.isNew && checkExclusive(_widgets, source, destination)) ||\n\t\t\t// avoid to drag panel on its one of children element\n\t\t\t([TYPE.panel, TYPE.tabs].includes(source.attrs.type) &&\n\t\t\t\tgetAllChildrenIds(source.id, _type).indexOf(\n\t\t\t\t\tdestination.id === IDS.dumpField\n\t\t\t\t\t\t? destination.panelId\n\t\t\t\t\t\t: destination.id\n\t\t\t\t) > -1)\n\t\t) {\n\t\t\treturn resolver(false);\n\t\t}\n\n\t\treturn resolver(true);\n\t}\n\n\tfunction setHoverAttr(attr) {\n\t\tsetState((draft) => {\n\t\t\tdraft.hoverAttr = attr;\n\t\t});\n\t}\n\n\tfunction startLoader() {\n\t\tsetState((draft) => {\n\t\t\tdraft.loader = true;\n\t\t});\n\t}\n\n\tfunction undo() {\n\t\tsetState(draft => {\n\t\t\tif(draft.past.length) {\n\t\t\t\tdraft.future.unshift({\n\t\t\t\t\twidgets: original(draft.widgets),\n\t\t\t\t\titems: original(draft.items),\n\t\t\t\t\textensionMoves: original(draft.extensionMoves),\n\t\t\t\t\tcustomFieldWidgets: original(draft.customFieldWidgets),\n\t\t\t\t\tcustomFields: original(draft.customFields),\n\t\t\t\t\tcustomFieldItems: original(draft.customFieldItems),\n\t\t\t\t\tmetaFields: original(draft.metaFields),\n\t\t\t\t\tremovedCustomFields: original(draft.removedCustomFields),\n\t\t\t\t\terrorList: original(draft.errorList)\n\t\t\t\t});\n\t\t\t\tsetPresent(draft.past[draft.past.length - 1], draft);\n\t\t\t\tdraft.past.splice(draft.past.length - 1, 1);\n\t\t\t}\n\t\t})\n\t}\n\n\tfunction redo() {\n\t\tsetState(draft => {\n\t\t\tif(draft.future.length) {\n\t\t\t\tdraft.past.push({\n\t\t\t\t\twidgets: original(draft.widgets),\n\t\t\t\t\titems: original(draft.items),\n\t\t\t\t\textensionMoves: original(draft.extensionMoves),\n\t\t\t\t\tcustomFieldWidgets: original(draft.customFieldWidgets),\n\t\t\t\t\tcustomFieldItems: original(draft.customFieldItems),\n\t\t\t\t\tmetaFields: original(draft.metaFields),\n\t\t\t\t\tcustomFields: original(draft.customFields),\n\t\t\t\t\tremovedCustomFields: original(draft.removedCustomFields),\n\t\t\t\t\terrorList: original(draft.errorList)\n\t\t\t\t});\n\t\t\t\tsetPresent(draft.future[0], draft);\n\t\t\t\tdraft.future.splice(0, 1);\n\t\t\t}\n\t\t})\n\t}\n\n\tfunction setPresent(object, draft) {\n\t\tObject.keys(object).forEach(key => {\n\t\t\tdraft[key] = original(object[key]);\n\t\t});\n\t}\n\n\tfunction generateHistory(draft) {\n\t\tdraft.past.push({\n\t\t\twidgets: original(draft.widgets),\n\t\t\titems: original(draft.items),\n\t\t\textensionMoves: original(draft.extensionMoves),\n\t\t\tcustomFieldWidgets: original(draft.customFieldWidgets),\n\t\t\tcustomFields: original(draft.customFields),\n\t\t\tcustomFieldItems: original(draft.customFieldItems),\n\t\t\tmetaFields: original(draft.metaFields),\n\t\t\tremovedCustomFields: original(draft.removedCustomFields),\n\t\t\terrorList: original(draft.errorList)\n\t\t});\n\t\tif(draft.future.length) {\n\t\t\tdraft.future = [];\n\t\t}\n\t}\n\n\tfunction clearHistory(draft) {\n\t\tdraft.future = [];\n\t\tdraft.past = [];\n\t}\n\n\tconst value = {\n\t\tonWidgetChange,\n\t\tonMove,\n\t\tonDrag,\n\t\tonRemove,\n\t\tonHover,\n\t\tonSelect,\n\t\tstate,\n\t\tupdate: setState,\n\t\tsetHoverAttr,\n\t\tstartLoader,\n\t\tundo,\n\t\tredo,\n\t\tclearHistory,\n\t\tonTranslationRemove,\n\t};\n\treturn (\n\t\t<StoreContext.Provider value={value}>{children}</StoreContext.Provider>\n\t);\n}\n\nexport function useStore() {\n\treturn React.useContext(StoreContext);\n}\n\nexport function useStoreState() {\n\tconst { state } = React.useContext(StoreContext);\n\treturn state;\n}\n\nexport function useWidget(id) {\n\tconst { widgets } = useStore();\n\treturn widgets[id];\n}\n\nexport default StoreProvider;\n","import Utils from './../utils';\nimport {TYPE} from './../constants';\n\nconst getItemType = (type) => {\n\tconst types = ['viewer', 'editor', 'hilite'];\n\treturn types.includes(type) ? 'field' : type;\n}\n\nexport function eGeneratePath(widgets, items = [], itemId, path = '') {\n\tif(itemId === -1) {\n\t\treturn '';\n\t}\n\tconst isFirstLevel = path === '';\n\tconst hasSameNameInParentItems = (items, itemId) => {\n\t\tconst widget = widgets[itemId];\n\t\tconst sameWidgets = items.filter(item => item !== itemId && widgets[item] && [widgets[item].name, widgets[item].originalName].includes(widget.name));\n\t\treturn sameWidgets.length > 0;\n\t}\n\n\tconst getSameItemIndex = (items, itemId) => {\n\t\tconst widget = widgets[itemId];\n\t\tconst sameWidgets = items.filter(item => widgets[item] && [widgets[item].name, widgets[item].originalName].includes(widget.name));\n\t\treturn sameWidgets.indexOf(itemId) + 1;\n\t}\n\n\tconst getTypeWiseItemIndex = (items, type, itemId) => {\n\t\tconst sameWidgets = items.filter(item => widgets[item] && getItemType(Utils.getWidgetType(widgets[item], 'field')) === type);\n\t\treturn sameWidgets.indexOf(itemId) + 1;\n\t}\n\n\tconst isUniquePanel = () => {\n\t\tconst widget = widgets[itemId];\n\t\tif(!widget.name) {\n\t\t\treturn false;\n\t\t}\n\t\tconst widgetList = Object.values(widgets);\n\t\tconst sameWidgets = widgetList.filter(w => w.name === widget.name);\n\t\treturn sameWidgets.length === 1;\n\t}\n\n\tconst canStopParentLink = () => {\n\t\tif(isFirstLevel) {\n\t\t\treturn false;\n\t\t}\n\t\tif(!isUniquePanel()) {\n\t\t\treturn false;\n\t\t}\n\t\treturn true;\n\t}\n\n\n\tlet findRoot = true;\n\tconst widgetList = Object.values(widgets);\n\tconst widgetIds = Object.keys(widgets);\n\twidgetList.forEach((widget, i) => {\n\t\tif(widget.items) {\n\t\t\tconst index = widget.items.findIndex(e => e === itemId);\n\t\t\tif(index !== -1) {\n\t\t\t\tfindRoot = false;\n\t\t\t\tconst _widget = widgets[itemId];\n\t\t\t\tconst widgetType = getItemType(Utils.getWidgetType(_widget, 'field'));\n\t\t\t\tif(_widget.name) {\n\t\t\t\t\tlet itemPath = `/${widgetType}[@name='${_widget.name}']`;\n\t\t\t\t\tif(hasSameNameInParentItems(widget.items, itemId)) {\n\t\t\t\t\t\tconst itemIndex = getSameItemIndex(widget.items, itemId);\n\t\t\t\t\t\tif(itemIndex > 0) {\n\t\t\t\t\t\t\titemPath = `${itemPath}[${itemIndex}]`;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tpath = `${itemPath}${path}`;\n\t\t\t\t} else {\n\t\t\t\t\tconst itemIndex = getTypeWiseItemIndex(widget.items, widgetType, itemId);\n\t\t\t\t\tpath = `/${widgetType}[${itemIndex}]${path}`;\n\t\t\t\t}\n\t\t\t\tif(!canStopParentLink()) {\n\t\t\t\t\tpath = eGeneratePath(widgets, items, widgetIds[i], path);\n\t\t\t\t} else {\n\t\t\t\t\tpath = `/${path}`;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t})\n\tif(findRoot) {\n\t\tconst index = items.findIndex(e => e === itemId);\n\t\tif(index !== -1) {\n\t\t\tconst _widget = widgets[itemId];\n\t\t\tif(_widget.name) {\n\t\t\t\tlet itemPath = `//${_widget.type}[@name='${_widget.name}']`;\n\t\t\t\tif([TYPE.menubar, TYPE.toolbar, TYPE.divider].includes(_widget.type)) {\n\t\t\t\t\titemPath = `//${_widget.type}`;\n\t\t\t\t}\n\t\t\t\tif(hasSameNameInParentItems(items, itemId)) {\n\t\t\t\t\tconst itemIndex = getSameItemIndex(items, itemId);\n\t\t\t\t\tif(itemIndex > 0) {\n\t\t\t\t\t\titemPath = `${itemPath}[${itemIndex}]`;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tpath = `${itemPath}${path}`\n\t\t\t} else {\n\t\t\t\tconst itemIndex = getTypeWiseItemIndex(items, _widget.type, itemId);\n\t\t\t\tpath = `//${_widget.type}[${itemIndex}]${path}`;\n\n\t\t\t\t// path = `/*[${index + 1}]${path}`;\n\t\t\t}\n\t\t}\n\t}\n\treturn path;\n}\n\n\n\n// generate xpath for all widgets\nexport function generateXpath(draft) {\n\tObject.keys(draft.widgets).forEach(widgetId => {\n\t\t\tconst path = eGeneratePath(draft.widgets, draft.items, widgetId)\n\t\t\tdraft.widgets[widgetId].xPath = path;\n\t});\n}\n","import React from \"react\";\nimport classNames from \"classnames\";\nimport { GRID_SIZE, PANEL_TYPE, TYPE } from \"../constants\";\nimport { useStore } from \"../store/context\";\n\nconst getColSpan = (col) => {\n\tconst widgetAttrs = col.widgetAttrs ? JSON.parse(col.widgetAttrs) : {};\n\tif(widgetAttrs.colSpan) {\n\t\treturn Number(widgetAttrs.colSpan);\n\t} else {\n\t\treturn col.colSpan;\n\t}\n}\n\n// get Column cell CSS according to colSpan and Container size\nexport const getColumnCss = (columns, colSpan) => {\n\tconst [n, span] = [Number(columns), Number(colSpan)];\n\tif (n > GRID_SIZE.max) return \"\";\n\treturn `col-span col-${\n\t\tspan > n ? GRID_SIZE.max : Math.floor((GRID_SIZE.max * span) / n)\n\t}`;\n};\n\nconst DEFAULTS = {\n\tITEM_COLSPAN: 1,\n\tMAX_SIZE: 12,\n};\n\nconst getFullGrid = (items, size = DEFAULTS.MAX_SIZE, isStackLayout, parentItemSpan) => {\n\tconst grid = [];\n\tconst isStack = size === 1 || isStackLayout;\n\tconst gridSize = isStack ? DEFAULTS.MAX_SIZE : size;\n\tlet row = [];\n\tlet span = 0;\n\n\tconst getItemColspan = (colSpan) => {\n\t\t// if(Number(parentItemSpan)) {\n\t\t// \treturn Number(parentItemSpan)\n\t\t// }\n\t\treturn Number(colSpan)\n\t}\n\n\tif (!items.length) {\n\t\tconst $cell = { id: 0, separator: true };\n\t\tconst dummy = {\n\t\t\tid: 0,\n\t\t\tdummy: true,\n\t\t\tdummyPanel: true,\n\t\t\tcolSpan: isStack ? 12 : 6,\n\t\t};\n\t\treturn [[$cell, dummy, $cell].concat(isStack ? [] : [dummy, $cell])];\n\t}\n\n\tconst addRow = ({ item, overflow = false } = {}) => {\n\t\tif (overflow) {\n\t\t\tconst fillColspan = gridSize - (span - getItemColspan(item.colSpan));\n\t\t\trow.push({\n\t\t\t\tid: 0,\n\t\t\t\tdummy: true,\n\t\t\t\tcolSpan: fillColspan,\n\t\t\t});\n\t\t}\n\t\tgrid.push(row);\n\t\trow = [];\n\t\tspan = 0;\n\t};\n\n\tconst addItem = (item) => row.push(item);\n\n\tfor (let i = 0; i < items.length; i++) {\n\t\tconst item = Object.assign(\n\t\t\titems[i],\n\t\t\tisStack ? { colSpan: DEFAULTS.MAX_SIZE } : {colSpan: getItemColspan(getColSpan(items[i]))}\n\t\t);\n\t\tconst { colSpan: itemSpan = DEFAULTS.ITEM_COLSPAN } = item;\n\t\tconst isLastItem = i === items.length - 1;\n\t\tspan += getItemColspan(itemSpan);\n\t\tif (span > gridSize) {\n\t\t\taddRow({ item, overflow: true });\n\t\t\tspan = itemSpan;\n\t\t\taddItem(item);\n\t\t} else if (span === gridSize) {\n\t\t\trow.push(item);\n\t\t\taddRow({ item });\n\t\t} else {\n\t\t\trow.push(item);\n\t\t}\n\n\t\tif (isLastItem && row.length) {\n\t\t\tconst occupiedSpan = row.reduce(\n\t\t\t\t(total, { colSpan = DEFAULTS.ITEM_COLSPAN }) => total + colSpan,\n\t\t\t\t0\n\t\t\t);\n\t\t\tconst remainSpan = gridSize - occupiedSpan;\n\t\t\tif (remainSpan > 0) {\n\t\t\t\trow.push({\n\t\t\t\t\tid: 0,\n\t\t\t\t\tdummy: true,\n\t\t\t\t\tcolSpan: remainSpan,\n\t\t\t\t});\n\t\t\t}\n\t\t\tgrid.push(row);\n\t\t}\n\t}\n\n\tconst fullGrid = [];\n\tfor (let i = 0; i < grid.length; i++) {\n\t\tconst row = grid[i];\n\t\tconst draggable = ![TYPE.menubar, TYPE.toolbar].includes(row[0]?.type);\n\t\tconst upRow = [];\n\t\tconst midRow = [];\n\t\tconst addCell = ($row, options = { separator: true }) =>\n\t\t\t$row.push({\n\t\t\t\tid: 0,\n\t\t\t\tcolSpan: 1,\n\t\t\t\t...options,\n\t\t\t});\n\t\taddCell(upRow);\n\n\t\tdraggable && addCell(midRow, { relatedColSpan: getColSpan(row[0]), separator: true });\n\n\t\tfor (let j = 0; j < row.length; j++) {\n\t\t\tconst col = row[j];\n\t\t\tconst colSpan = getColSpan(col);\n\t\t\taddCell(upRow, { dummy: true, colSpan });\n\t\t\taddCell(midRow, col);\n\n\t\t\taddCell(upRow, { relatedColSpan: colSpan, separator: true });\n\t\t\tdraggable && addCell(midRow, { relatedColSpan: colSpan, separator: true });\n\t\t}\n\n\t\tdraggable ? fullGrid.push(upRow) : fullGrid.push([]);\n\t\tfullGrid.push(midRow);\n\n\t\tif (i === grid.length - 1) {\n\t\t\tfullGrid.push(upRow);\n\t\t}\n\t}\n\treturn fullGrid;\n};\n\n// Grid Container embeds grid cell\nexport const GridContainer = ({ className, attrs, children, ...rest }) => (\n\t<div\n\t\tclassName={classNames(\n\t\t\tclassName,\n\t\t\tattrs.cols ? `grid-span grid-${attrs.cols}` : \"\"\n\t\t)}\n\t\t{...rest}\n\t>\n\t\t{children}\n\t</div>\n);\n\nexport function useGridWidget() {\n\tconst [WidgetComponent, setWidgetComponent] = React.useState(() => null);\n\n\tReact.useEffect(() => {\n\t\timport(\"./Widget\").then((module) =>\n\t\t\tsetWidgetComponent(() => module.default)\n\t\t);\n\t}, []);\n\n\treturn WidgetComponent;\n}\n\n/**\n * Grid Component handle layout of Container Components like panels\n */\nfunction Grid(props) {\n\tconst WidgetComponent = useGridWidget();\n\tconst {\n\t\tstate: { widgets: _widgets, customFieldWidgets },\n\t} = useStore();\n\tconst { className, items, attrs, panelId, design } = props;\n\tlet widgets = props._type === \"customField\" ? customFieldWidgets : _widgets;\n\tconst gridSize = Number(attrs.cols || 1);\n\tconst columns = gridSize * 2 + 1;\n\tconst isStackLayout = attrs.layout === PANEL_TYPE.stack;\n\tconst spacers = columns === 1 ? 0 : columns / 2 + 1;\n\tconst spacerWidth = design ? 1 : 0; //%\n\tconst cols = (columns - 1) / 2;\n\tconst colWidth = (100 - spacers * spacerWidth) / cols;\n\tconst rows = React.useMemo(() => {\n\t\tlet cellIndice = 0;\n\t\tconst childs = items.map((x) =>\n\t\t\tObject.assign({}, widgets[x] || {}, { id: x })\n\t\t);\n\t\treturn getFullGrid(childs, gridSize, isStackLayout, attrs?.itemSpan).map(\n\t\t\t(columns, rowIndex) => {\n\t\t\t\tlet span = 0;\n\t\t\t\treturn columns.map((c) => {\n\t\t\t\t\tlet columnIndex = span;\n\t\t\t\t\tspan += c.separator ? 0 : Number(c.colSpan || 1);\n\t\t\t\t\treturn { ...c, rowIndex, columnIndex, cellIndice: cellIndice++ };\n\t\t\t\t});\n\t\t\t}\n\t\t);\n\t}, [items, widgets, gridSize, isStackLayout, attrs]);\n\n\tconst gridRows = rows.reduce((arr, row) => arr.concat(row), []);\n\treturn (\n\t\t<GridContainer {...{ attrs, className }}>\n\t\t\t<table cellPadding=\"0\" cellSpacing=\"0\">\n\t\t\t\t{design && (\n\t\t\t\t\t<colgroup>\n\t\t\t\t\t\t{isStackLayout ? (\n\t\t\t\t\t\t\t<col width={\"100%\"} />\n\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\tnew Array(columns)\n\t\t\t\t\t\t\t\t.fill(0)\n\t\t\t\t\t\t\t\t.map((col, i) => (\n\t\t\t\t\t\t\t\t\t<col\n\t\t\t\t\t\t\t\t\t\tkey={i}\n\t\t\t\t\t\t\t\t\t\twidth={`${i % 2 === 1 ? colWidth : spacerWidth}%`}\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t))\n\t\t\t\t\t\t)}\n\t\t\t\t\t</colgroup>\n\t\t\t\t)}\n\t\t\t\t<tbody>\n\t\t\t\t\t{rows.map((cols, rowIndex) => (\n\t\t\t\t\t\t<tr\n\t\t\t\t\t\t\tclassName={rowIndex % 2 === 0 ? \"empty-row\" : \"fill-row\"}\n\t\t\t\t\t\t\tkey={rowIndex}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{cols.map(\n\t\t\t\t\t\t\t\t(\n\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\tid,\n\t\t\t\t\t\t\t\t\t\tcolSpan,\n\t\t\t\t\t\t\t\t\t\tcellIndice: indice,\n\t\t\t\t\t\t\t\t\t\tcolumnIndex,\n\t\t\t\t\t\t\t\t\t\tseparator,\n\t\t\t\t\t\t\t\t\t\trelatedColSpan,\n\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\ti\n\t\t\t\t\t\t\t\t) => {\n\t\t\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t\t\t<td\n\t\t\t\t\t\t\t\t\t\t\tclassName={separator ? \"separator\" : \"\"}\n\t\t\t\t\t\t\t\t\t\t\tkey={indice}\n\t\t\t\t\t\t\t\t\t\t\tcolSpan={colSpan > 1 ? colSpan * 2 - 1 : colSpan}\n\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t{WidgetComponent && (\n\t\t\t\t\t\t\t\t\t\t\t\t<WidgetComponent\n\t\t\t\t\t\t\t\t\t\t\t\t\tdesign={design}\n\t\t\t\t\t\t\t\t\t\t\t\t\tmeta={{\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tisSeparator: Boolean(separator),\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tcolSpan,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\trow: rowIndex,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tcol: i,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tcolIndex: columnIndex,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tgrid: gridRows,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\ttotal: columns,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\trelatedColSpan: relatedColSpan,\n\t\t\t\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t\t\t\tpanelId={panelId}\n\t\t\t\t\t\t\t\t\t\t\t\t\tkey={indice}\n\t\t\t\t\t\t\t\t\t\t\t\t\tid={id}\n\t\t\t\t\t\t\t\t\t\t\t\t\tindex={indice}\n\t\t\t\t\t\t\t\t\t\t\t\t\tpanelColumns={attrs.cols}\n\t\t\t\t\t\t\t\t\t\t\t\t\t_type={props._type}\n\t\t\t\t\t\t\t\t\t\t\t\t\terrorList={props.errorList}\n\t\t\t\t\t\t\t\t\t\t\t\t\tcanRemove={props.canRemove}\n\t\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t</tr>\n\t\t\t\t\t))}\n\t\t\t\t</tbody>\n\t\t\t</table>\n\t\t</GridContainer>\n\t);\n}\n\nexport default Grid;\n","/** Set field types */\nexport const StringField = ({ ...props }) => ({\n\ttype: \"string\",\n\t...props,\n});\n\nexport const ObjectSelectionField = ({ ...props }) => ({\n\ttype: \"objectSelection\",\n\t...props,\n});\n\nexport const IntegerField = ({ ...props }) => ({\n\ttype: \"integer\",\n\t...props,\n});\n\nexport const SelectField = ({ ...props }) => ({\n\ttype: \"select\",\n\tvalueField: \"name\",\n\t...props,\n});\n\nexport const StaticSelectField = ({ ...props }) => ({\n\ttype: \"staticSelect\",\n\t...props,\n});\n\nexport const BooleanField = ({ ...props }) => ({\n\ttype: \"boolean\",\n\t...props,\n});\n\nexport default {\n\tStringField,\n\tObjectSelectionField,\n\tIntegerField,\n\tSelectField,\n\tStaticSelectField,\n\tBooleanField,\n};\n","const fontAwesome = [\n\t\"fa-500px\",\n\t\"fa-address-book\",\n\t\"fa-address-book-o\",\n\t\"fa-address-card\",\n\t\"fa-address-card-o\",\n\t\"fa-adjust\",\n\t\"fa-adn\",\n\t\"fa-align-center\",\n\t\"fa-align-justify\",\n\t\"fa-align-left\",\n\t\"fa-align-right\",\n\t\"fa-amazon\",\n\t\"fa-ambulance\",\n\t\"fa-american-sign-language-interpreting\",\n\t\"fa-anchor\",\n\t\"fa-android\",\n\t\"fa-angellist\",\n\t\"fa-angle-double-down\",\n\t\"fa-angle-double-left\",\n\t\"fa-angle-double-right\",\n\t\"fa-angle-double-up\",\n\t\"fa-angle-down\",\n\t\"fa-angle-left\",\n\t\"fa-angle-right\",\n\t\"fa-angle-up\",\n\t\"fa-apple\",\n\t\"fa-archive\",\n\t\"fa-area-chart\",\n\t\"fa-arrow-circle-down\",\n\t\"fa-arrow-circle-left\",\n\t\"fa-arrow-circle-o-down\",\n\t\"fa-arrow-circle-o-left\",\n\t\"fa-arrow-circle-o-right\",\n\t\"fa-arrow-circle-o-up\",\n\t\"fa-arrow-circle-right\",\n\t\"fa-arrow-circle-up\",\n\t\"fa-arrow-down\",\n\t\"fa-arrow-left\",\n\t\"fa-arrow-right\",\n\t\"fa-arrow-up\",\n\t\"fa-arrows\",\n\t\"fa-arrows-alt\",\n\t\"fa-arrows-h\",\n\t\"fa-arrows-v\",\n\t\"fa-asl-interpreting\",\n\t\"fa-assistive-listening-systems\",\n\t\"fa-asterisk\",\n\t\"fa-at\",\n\t\"fa-audio-description\",\n\t\"fa-automobile\",\n\t\"fa-backward\",\n\t\"fa-balance-scale\",\n\t\"fa-ban\",\n\t\"fa-bandcamp\",\n\t\"fa-bank\",\n\t\"fa-bar-chart\",\n\t\"fa-bar-chart-o\",\n\t\"fa-barcode\",\n\t\"fa-bars\",\n\t\"fa-bath\",\n\t\"fa-bathtub\",\n\t\"fa-battery\",\n\t\"fa-battery-0\",\n\t\"fa-battery-1\",\n\t\"fa-battery-2\",\n\t\"fa-battery-3\",\n\t\"fa-battery-4\",\n\t\"fa-battery-empty\",\n\t\"fa-battery-full\",\n\t\"fa-battery-half\",\n\t\"fa-battery-quarter\",\n\t\"fa-battery-three-quarters\",\n\t\"fa-bed\",\n\t\"fa-beer\",\n\t\"fa-behance\",\n\t\"fa-behance-square\",\n\t\"fa-bell\",\n\t\"fa-bell-o\",\n\t\"fa-bell-slash\",\n\t\"fa-bell-slash-o\",\n\t\"fa-bicycle\",\n\t\"fa-binoculars\",\n\t\"fa-birthday-cake\",\n\t\"fa-bitbucket\",\n\t\"fa-bitbucket-square\",\n\t\"fa-bitcoin\",\n\t\"fa-black-tie\",\n\t\"fa-blind\",\n\t\"fa-bluetooth\",\n\t\"fa-bluetooth-b\",\n\t\"fa-bold\",\n\t\"fa-bolt\",\n\t\"fa-bomb\",\n\t\"fa-book\",\n\t\"fa-bookmark\",\n\t\"fa-bookmark-o\",\n\t\"fa-braille\",\n\t\"fa-briefcase\",\n\t\"fa-btc\",\n\t\"fa-bug\",\n\t\"fa-building\",\n\t\"fa-building-o\",\n\t\"fa-bullhorn\",\n\t\"fa-bullseye\",\n\t\"fa-bus\",\n\t\"fa-buysellads\",\n\t\"fa-cab\",\n\t\"fa-calculator\",\n\t\"fa-calendar\",\n\t\"fa-calendar-check-o\",\n\t\"fa-calendar-minus-o\",\n\t\"fa-calendar-o\",\n\t\"fa-calendar-plus-o\",\n\t\"fa-calendar-times-o\",\n\t\"fa-camera\",\n\t\"fa-camera-retro\",\n\t\"fa-car\",\n\t\"fa-caret-down\",\n\t\"fa-caret-left\",\n\t\"fa-caret-right\",\n\t\"fa-caret-square-o-down\",\n\t\"fa-caret-square-o-left\",\n\t\"fa-caret-square-o-right\",\n\t\"fa-caret-square-o-up\",\n\t\"fa-caret-up\",\n\t\"fa-cart-arrow-down\",\n\t\"fa-cart-plus\",\n\t\"fa-cc\",\n\t\"fa-cc-amex\",\n\t\"fa-cc-diners-club\",\n\t\"fa-cc-discover\",\n\t\"fa-cc-jcb\",\n\t\"fa-cc-mastercard\",\n\t\"fa-cc-paypal\",\n\t\"fa-cc-stripe\",\n\t\"fa-cc-visa\",\n\t\"fa-certificate\",\n\t\"fa-chain\",\n\t\"fa-chain-broken\",\n\t\"fa-check\",\n\t\"fa-check-circle\",\n\t\"fa-check-circle-o\",\n\t\"fa-check-square\",\n\t\"fa-check-square-o\",\n\t\"fa-chevron-circle-down\",\n\t\"fa-chevron-circle-left\",\n\t\"fa-chevron-circle-right\",\n\t\"fa-chevron-circle-up\",\n\t\"fa-chevron-down\",\n\t\"fa-chevron-left\",\n\t\"fa-chevron-right\",\n\t\"fa-chevron-up\",\n\t\"fa-child\",\n\t\"fa-chrome\",\n\t\"fa-circle\",\n\t\"fa-circle-o\",\n\t\"fa-circle-o-notch\",\n\t\"fa-circle-thin\",\n\t\"fa-clipboard\",\n\t\"fa-clock-o\",\n\t\"fa-clone\",\n\t\"fa-close\",\n\t\"fa-cloud\",\n\t\"fa-cloud-download\",\n\t\"fa-cloud-upload\",\n\t\"fa-cny\",\n\t\"fa-code\",\n\t\"fa-code-fork\",\n\t\"fa-codepen\",\n\t\"fa-codiepie\",\n\t\"fa-coffee\",\n\t\"fa-cog\",\n\t\"fa-cogs\",\n\t\"fa-columns\",\n\t\"fa-comment\",\n\t\"fa-comment-o\",\n\t\"fa-commenting\",\n\t\"fa-commenting-o\",\n\t\"fa-comments\",\n\t\"fa-comments-o\",\n\t\"fa-compass\",\n\t\"fa-compress\",\n\t\"fa-connectdevelop\",\n\t\"fa-contao\",\n\t\"fa-copy\",\n\t\"fa-copyright\",\n\t\"fa-creative-commons\",\n\t\"fa-credit-card\",\n\t\"fa-credit-card-alt\",\n\t\"fa-crop\",\n\t\"fa-crosshairs\",\n\t\"fa-css3\",\n\t\"fa-cube\",\n\t\"fa-cubes\",\n\t\"fa-cut\",\n\t\"fa-cutlery\",\n\t\"fa-dashboard\",\n\t\"fa-dashcube\",\n\t\"fa-database\",\n\t\"fa-deaf\",\n\t\"fa-deafness\",\n\t\"fa-dedent\",\n\t\"fa-delicious\",\n\t\"fa-desktop\",\n\t\"fa-deviantart\",\n\t\"fa-diamond\",\n\t\"fa-digg\",\n\t\"fa-dollar\",\n\t\"fa-dot-circle-o\",\n\t\"fa-download\",\n\t\"fa-dribbble\",\n\t\"fa-drivers-license\",\n\t\"fa-drivers-license-o\",\n\t\"fa-dropbox\",\n\t\"fa-drupal\",\n\t\"fa-edge\",\n\t\"fa-edit\",\n\t\"fa-eercast\",\n\t\"fa-eject\",\n\t\"fa-ellipsis-h\",\n\t\"fa-ellipsis-v\",\n\t\"fa-empire\",\n\t\"fa-envelope\",\n\t\"fa-envelope-o\",\n\t\"fa-envelope-open\",\n\t\"fa-envelope-open-o\",\n\t\"fa-envelope-square\",\n\t\"fa-envira\",\n\t\"fa-eraser\",\n\t\"fa-etsy\",\n\t\"fa-eur\",\n\t\"fa-euro\",\n\t\"fa-exchange\",\n\t\"fa-exclamation\",\n\t\"fa-exclamation-circle\",\n\t\"fa-exclamation-triangle\",\n\t\"fa-expand\",\n\t\"fa-expeditedssl\",\n\t\"fa-external-link\",\n\t\"fa-external-link-square\",\n\t\"fa-eye\",\n\t\"fa-eye-slash\",\n\t\"fa-eyedropper\",\n\t\"fa-fa\",\n\t\"fa-facebook\",\n\t\"fa-facebook-f\",\n\t\"fa-facebook-official\",\n\t\"fa-facebook-square\",\n\t\"fa-fast-backward\",\n\t\"fa-fast-forward\",\n\t\"fa-fax\",\n\t\"fa-feed\",\n\t\"fa-female\",\n\t\"fa-fighter-jet\",\n\t\"fa-file\",\n\t\"fa-file-archive-o\",\n\t\"fa-file-audio-o\",\n\t\"fa-file-code-o\",\n\t\"fa-file-excel-o\",\n\t\"fa-file-image-o\",\n\t\"fa-file-movie-o\",\n\t\"fa-file-o\",\n\t\"fa-file-pdf-o\",\n\t\"fa-file-photo-o\",\n\t\"fa-file-picture-o\",\n\t\"fa-file-powerpoint-o\",\n\t\"fa-file-sound-o\",\n\t\"fa-file-text\",\n\t\"fa-file-text-o\",\n\t\"fa-file-video-o\",\n\t\"fa-file-word-o\",\n\t\"fa-file-zip-o\",\n\t\"fa-files-o\",\n\t\"fa-film\",\n\t\"fa-filter\",\n\t\"fa-fire\",\n\t\"fa-fire-extinguisher\",\n\t\"fa-firefox\",\n\t\"fa-first-order\",\n\t\"fa-flag\",\n\t\"fa-flag-checkered\",\n\t\"fa-flag-o\",\n\t\"fa-flash\",\n\t\"fa-flask\",\n\t\"fa-flickr\",\n\t\"fa-floppy-o\",\n\t\"fa-folder\",\n\t\"fa-folder-o\",\n\t\"fa-folder-open\",\n\t\"fa-folder-open-o\",\n\t\"fa-font\",\n\t\"fa-font-awesome\",\n\t\"fa-fonticons\",\n\t\"fa-fort-awesome\",\n\t\"fa-forumbee\",\n\t\"fa-forward\",\n\t\"fa-foursquare\",\n\t\"fa-free-code-camp\",\n\t\"fa-frown-o\",\n\t\"fa-futbol-o\",\n\t\"fa-gamepad\",\n\t\"fa-gavel\",\n\t\"fa-gbp\",\n\t\"fa-ge\",\n\t\"fa-gear\",\n\t\"fa-gears\",\n\t\"fa-genderless\",\n\t\"fa-get-pocket\",\n\t\"fa-gg\",\n\t\"fa-gg-circle\",\n\t\"fa-gift\",\n\t\"fa-git\",\n\t\"fa-git-square\",\n\t\"fa-github\",\n\t\"fa-github-alt\",\n\t\"fa-github-square\",\n\t\"fa-gitlab\",\n\t\"fa-gittip\",\n\t\"fa-glass\",\n\t\"fa-glide\",\n\t\"fa-glide-g\",\n\t\"fa-globe\",\n\t\"fa-google\",\n\t\"fa-google-plus\",\n\t\"fa-google-plus-circle\",\n\t\"fa-google-plus-official\",\n\t\"fa-google-plus-square\",\n\t\"fa-google-wallet\",\n\t\"fa-graduation-cap\",\n\t\"fa-gratipay\",\n\t\"fa-grav\",\n\t\"fa-group\",\n\t\"fa-h-square\",\n\t\"fa-hacker-news\",\n\t\"fa-hand-grab-o\",\n\t\"fa-hand-lizard-o\",\n\t\"fa-hand-o-down\",\n\t\"fa-hand-o-left\",\n\t\"fa-hand-o-right\",\n\t\"fa-hand-o-up\",\n\t\"fa-hand-paper-o\",\n\t\"fa-hand-peace-o\",\n\t\"fa-hand-pointer-o\",\n\t\"fa-hand-rock-o\",\n\t\"fa-hand-scissors-o\",\n\t\"fa-hand-spock-o\",\n\t\"fa-hand-stop-o\",\n\t\"fa-handshake-o\",\n\t\"fa-hard-of-hearing\",\n\t\"fa-hashtag\",\n\t\"fa-hdd-o\",\n\t\"fa-header\",\n\t\"fa-headphones\",\n\t\"fa-heart\",\n\t\"fa-heart-o\",\n\t\"fa-heartbeat\",\n\t\"fa-history\",\n\t\"fa-home\",\n\t\"fa-hospital-o\",\n\t\"fa-hotel\",\n\t\"fa-hourglass\",\n\t\"fa-hourglass-1\",\n\t\"fa-hourglass-2\",\n\t\"fa-hourglass-3\",\n\t\"fa-hourglass-end\",\n\t\"fa-hourglass-half\",\n\t\"fa-hourglass-o\",\n\t\"fa-hourglass-start\",\n\t\"fa-houzz\",\n\t\"fa-html5\",\n\t\"fa-i-cursor\",\n\t\"fa-id-badge\",\n\t\"fa-id-card\",\n\t\"fa-id-card-o\",\n\t\"fa-ils\",\n\t\"fa-image\",\n\t\"fa-imdb\",\n\t\"fa-inbox\",\n\t\"fa-indent\",\n\t\"fa-industry\",\n\t\"fa-info\",\n\t\"fa-info-circle\",\n\t\"fa-inr\",\n\t\"fa-instagram\",\n\t\"fa-institution\",\n\t\"fa-internet-explorer\",\n\t\"fa-intersex\",\n\t\"fa-ioxhost\",\n\t\"fa-italic\",\n\t\"fa-joomla\",\n\t\"fa-jpy\",\n\t\"fa-jsfiddle\",\n\t\"fa-key\",\n\t\"fa-keyboard-o\",\n\t\"fa-krw\",\n\t\"fa-language\",\n\t\"fa-laptop\",\n\t\"fa-lastfm\",\n\t\"fa-lastfm-square\",\n\t\"fa-leaf\",\n\t\"fa-leanpub\",\n\t\"fa-legal\",\n\t\"fa-lemon-o\",\n\t\"fa-level-down\",\n\t\"fa-level-up\",\n\t\"fa-life-bouy\",\n\t\"fa-life-buoy\",\n\t\"fa-life-ring\",\n\t\"fa-life-saver\",\n\t\"fa-lightbulb-o\",\n\t\"fa-line-chart\",\n\t\"fa-link\",\n\t\"fa-linkedin\",\n\t\"fa-linkedin-square\",\n\t\"fa-linode\",\n\t\"fa-linux\",\n\t\"fa-list\",\n\t\"fa-list-alt\",\n\t\"fa-list-ol\",\n\t\"fa-list-ul\",\n\t\"fa-location-arrow\",\n\t\"fa-lock\",\n\t\"fa-long-arrow-down\",\n\t\"fa-long-arrow-left\",\n\t\"fa-long-arrow-right\",\n\t\"fa-long-arrow-up\",\n\t\"fa-low-vision\",\n\t\"fa-magic\",\n\t\"fa-magnet\",\n\t\"fa-mail-forward\",\n\t\"fa-mail-reply\",\n\t\"fa-mail-reply-all\",\n\t\"fa-male\",\n\t\"fa-map\",\n\t\"fa-map-marker\",\n\t\"fa-map-o\",\n\t\"fa-map-pin\",\n\t\"fa-map-signs\",\n\t\"fa-mars\",\n\t\"fa-mars-double\",\n\t\"fa-mars-stroke\",\n\t\"fa-mars-stroke-h\",\n\t\"fa-mars-stroke-v\",\n\t\"fa-maxcdn\",\n\t\"fa-meanpath\",\n\t\"fa-medium\",\n\t\"fa-medkit\",\n\t\"fa-meetup\",\n\t\"fa-meh-o\",\n\t\"fa-mercury\",\n\t\"fa-microchip\",\n\t\"fa-microphone\",\n\t\"fa-microphone-slash\",\n\t\"fa-minus\",\n\t\"fa-minus-circle\",\n\t\"fa-minus-square\",\n\t\"fa-minus-square-o\",\n\t\"fa-mixcloud\",\n\t\"fa-mobile\",\n\t\"fa-mobile-phone\",\n\t\"fa-modx\",\n\t\"fa-money\",\n\t\"fa-moon-o\",\n\t\"fa-mortar-board\",\n\t\"fa-motorcycle\",\n\t\"fa-mouse-pointer\",\n\t\"fa-music\",\n\t\"fa-navicon\",\n\t\"fa-neuter\",\n\t\"fa-newspaper-o\",\n\t\"fa-object-group\",\n\t\"fa-object-ungroup\",\n\t\"fa-odnoklassniki\",\n\t\"fa-odnoklassniki-square\",\n\t\"fa-opencart\",\n\t\"fa-openid\",\n\t\"fa-opera\",\n\t\"fa-optin-monster\",\n\t\"fa-outdent\",\n\t\"fa-pagelines\",\n\t\"fa-paint-brush\",\n\t\"fa-paper-plane\",\n\t\"fa-paper-plane-o\",\n\t\"fa-paperclip\",\n\t\"fa-paragraph\",\n\t\"fa-paste\",\n\t\"fa-pause\",\n\t\"fa-pause-circle\",\n\t\"fa-pause-circle-o\",\n\t\"fa-paw\",\n\t\"fa-paypal\",\n\t\"fa-pencil\",\n\t\"fa-pencil-square\",\n\t\"fa-pencil-square-o\",\n\t\"fa-percent\",\n\t\"fa-phone\",\n\t\"fa-phone-square\",\n\t\"fa-photo\",\n\t\"fa-picture-o\",\n\t\"fa-pie-chart\",\n\t\"fa-pied-piper\",\n\t\"fa-pied-piper-alt\",\n\t\"fa-pied-piper-pp\",\n\t\"fa-pinterest\",\n\t\"fa-pinterest-p\",\n\t\"fa-pinterest-square\",\n\t\"fa-plane\",\n\t\"fa-play\",\n\t\"fa-play-circle\",\n\t\"fa-play-circle-o\",\n\t\"fa-plug\",\n\t\"fa-plus\",\n\t\"fa-plus-circle\",\n\t\"fa-plus-square\",\n\t\"fa-plus-square-o\",\n\t\"fa-podcast\",\n\t\"fa-power-off\",\n\t\"fa-print\",\n\t\"fa-product-hunt\",\n\t\"fa-puzzle-piece\",\n\t\"fa-qq\",\n\t\"fa-qrcode\",\n\t\"fa-question\",\n\t\"fa-question-circle\",\n\t\"fa-question-circle-o\",\n\t\"fa-quora\",\n\t\"fa-quote-left\",\n\t\"fa-quote-right\",\n\t\"fa-ra\",\n\t\"fa-random\",\n\t\"fa-ravelry\",\n\t\"fa-rebel\",\n\t\"fa-recycle\",\n\t\"fa-reddit\",\n\t\"fa-reddit-alien\",\n\t\"fa-reddit-square\",\n\t\"fa-refresh\",\n\t\"fa-registered\",\n\t\"fa-remove\",\n\t\"fa-renren\",\n\t\"fa-reorder\",\n\t\"fa-repeat\",\n\t\"fa-reply\",\n\t\"fa-reply-all\",\n\t\"fa-resistance\",\n\t\"fa-retweet\",\n\t\"fa-rmb\",\n\t\"fa-road\",\n\t\"fa-rocket\",\n\t\"fa-rotate-left\",\n\t\"fa-rotate-right\",\n\t\"fa-rouble\",\n\t\"fa-rss\",\n\t\"fa-rss-square\",\n\t\"fa-rub\",\n\t\"fa-ruble\",\n\t\"fa-rupee\",\n\t\"fa-s15\",\n\t\"fa-safari\",\n\t\"fa-save\",\n\t\"fa-scissors\",\n\t\"fa-scribd\",\n\t\"fa-search\",\n\t\"fa-search-minus\",\n\t\"fa-search-plus\",\n\t\"fa-sellsy\",\n\t\"fa-send\",\n\t\"fa-send-o\",\n\t\"fa-server\",\n\t\"fa-share\",\n\t\"fa-share-alt\",\n\t\"fa-share-alt-square\",\n\t\"fa-share-square\",\n\t\"fa-share-square-o\",\n\t\"fa-shekel\",\n\t\"fa-sheqel\",\n\t\"fa-shield\",\n\t\"fa-ship\",\n\t\"fa-shirtsinbulk\",\n\t\"fa-shopping-bag\",\n\t\"fa-shopping-basket\",\n\t\"fa-shopping-cart\",\n\t\"fa-shower\",\n\t\"fa-sign-in\",\n\t\"fa-sign-language\",\n\t\"fa-sign-out\",\n\t\"fa-signal\",\n\t\"fa-signing\",\n\t\"fa-simplybuilt\",\n\t\"fa-sitemap\",\n\t\"fa-skyatlas\",\n\t\"fa-skype\",\n\t\"fa-slack\",\n\t\"fa-sliders\",\n\t\"fa-slideshare\",\n\t\"fa-smile-o\",\n\t\"fa-snapchat\",\n\t\"fa-snapchat-ghost\",\n\t\"fa-snapchat-square\",\n\t\"fa-snowflake-o\",\n\t\"fa-soccer-ball-o\",\n\t\"fa-sort\",\n\t\"fa-sort-alpha-asc\",\n\t\"fa-sort-alpha-desc\",\n\t\"fa-sort-amount-asc\",\n\t\"fa-sort-amount-desc\",\n\t\"fa-sort-asc\",\n\t\"fa-sort-desc\",\n\t\"fa-sort-down\",\n\t\"fa-sort-numeric-asc\",\n\t\"fa-sort-numeric-desc\",\n\t\"fa-sort-up\",\n\t\"fa-soundcloud\",\n\t\"fa-space-shuttle\",\n\t\"fa-spinner\",\n\t\"fa-spoon\",\n\t\"fa-spotify\",\n\t\"fa-square\",\n\t\"fa-square-o\",\n\t\"fa-stack-exchange\",\n\t\"fa-stack-overflow\",\n\t\"fa-star\",\n\t\"fa-star-half\",\n\t\"fa-star-half-empty\",\n\t\"fa-star-half-full\",\n\t\"fa-star-half-o\",\n\t\"fa-star-o\",\n\t\"fa-steam\",\n\t\"fa-steam-square\",\n\t\"fa-step-backward\",\n\t\"fa-step-forward\",\n\t\"fa-stethoscope\",\n\t\"fa-sticky-note\",\n\t\"fa-sticky-note-o\",\n\t\"fa-stop\",\n\t\"fa-stop-circle\",\n\t\"fa-stop-circle-o\",\n\t\"fa-street-view\",\n\t\"fa-strikethrough\",\n\t\"fa-stumbleupon\",\n\t\"fa-stumbleupon-circle\",\n\t\"fa-subscript\",\n\t\"fa-subway\",\n\t\"fa-suitcase\",\n\t\"fa-sun-o\",\n\t\"fa-superpowers\",\n\t\"fa-superscript\",\n\t\"fa-support\",\n\t\"fa-table\",\n\t\"fa-tablet\",\n\t\"fa-tachometer\",\n\t\"fa-tag\",\n\t\"fa-tags\",\n\t\"fa-tasks\",\n\t\"fa-taxi\",\n\t\"fa-telegram\",\n\t\"fa-television\",\n\t\"fa-tencent-weibo\",\n\t\"fa-terminal\",\n\t\"fa-text-height\",\n\t\"fa-text-width\",\n\t\"fa-th\",\n\t\"fa-th-large\",\n\t\"fa-th-list\",\n\t\"fa-themeisle\",\n\t\"fa-thermometer\",\n\t\"fa-thermometer-0\",\n\t\"fa-thermometer-1\",\n\t\"fa-thermometer-2\",\n\t\"fa-thermometer-3\",\n\t\"fa-thermometer-4\",\n\t\"fa-thermometer-empty\",\n\t\"fa-thermometer-full\",\n\t\"fa-thermometer-half\",\n\t\"fa-thermometer-quarter\",\n\t\"fa-thermometer-three-quarters\",\n\t\"fa-thumb-tack\",\n\t\"fa-thumbs-down\",\n\t\"fa-thumbs-o-down\",\n\t\"fa-thumbs-o-up\",\n\t\"fa-thumbs-up\",\n\t\"fa-ticket\",\n\t\"fa-times\",\n\t\"fa-times-circle\",\n\t\"fa-times-circle-o\",\n\t\"fa-times-rectangle\",\n\t\"fa-times-rectangle-o\",\n\t\"fa-tint\",\n\t\"fa-toggle-down\",\n\t\"fa-toggle-left\",\n\t\"fa-toggle-off\",\n\t\"fa-toggle-on\",\n\t\"fa-toggle-right\",\n\t\"fa-toggle-up\",\n\t\"fa-trademark\",\n\t\"fa-train\",\n\t\"fa-transgender\",\n\t\"fa-transgender-alt\",\n\t\"fa-trash\",\n\t\"fa-trash-o\",\n\t\"fa-tree\",\n\t\"fa-trello\",\n\t\"fa-tripadvisor\",\n\t\"fa-trophy\",\n\t\"fa-truck\",\n\t\"fa-try\",\n\t\"fa-tty\",\n\t\"fa-tumblr\",\n\t\"fa-tumblr-square\",\n\t\"fa-turkish-lira\",\n\t\"fa-tv\",\n\t\"fa-twitch\",\n\t\"fa-twitter\",\n\t\"fa-twitter-square\",\n\t\"fa-umbrella\",\n\t\"fa-underline\",\n\t\"fa-undo\",\n\t\"fa-universal-access\",\n\t\"fa-university\",\n\t\"fa-unlink\",\n\t\"fa-unlock\",\n\t\"fa-unlock-alt\",\n\t\"fa-unsorted\",\n\t\"fa-upload\",\n\t\"fa-usb\",\n\t\"fa-usd\",\n\t\"fa-user\",\n\t\"fa-user-circle\",\n\t\"fa-user-circle-o\",\n\t\"fa-user-md\",\n\t\"fa-user-o\",\n\t\"fa-user-plus\",\n\t\"fa-user-secret\",\n\t\"fa-user-times\",\n\t\"fa-users\",\n\t\"fa-vcard\",\n\t\"fa-vcard-o\",\n\t\"fa-venus\",\n\t\"fa-venus-double\",\n\t\"fa-venus-mars\",\n\t\"fa-viacoin\",\n\t\"fa-viadeo\",\n\t\"fa-viadeo-square\",\n\t\"fa-video-camera\",\n\t\"fa-vimeo\",\n\t\"fa-vimeo-square\",\n\t\"fa-vine\",\n\t\"fa-vk\",\n\t\"fa-volume-control-phone\",\n\t\"fa-volume-down\",\n\t\"fa-volume-off\",\n\t\"fa-volume-up\",\n\t\"fa-warning\",\n\t\"fa-wechat\",\n\t\"fa-weibo\",\n\t\"fa-weixin\",\n\t\"fa-whatsapp\",\n\t\"fa-wheelchair\",\n\t\"fa-wheelchair-alt\",\n\t\"fa-wifi\",\n\t\"fa-wikipedia-w\",\n\t\"fa-window-close\",\n\t\"fa-window-close-o\",\n\t\"fa-window-maximize\",\n\t\"fa-window-minimize\",\n\t\"fa-window-restore\",\n\t\"fa-windows\",\n\t\"fa-won\",\n\t\"fa-wordpress\",\n\t\"fa-wpbeginner\",\n\t\"fa-wpexplorer\",\n\t\"fa-wpforms\",\n\t\"fa-wrench\",\n\t\"fa-xing\",\n\t\"fa-xing-square\",\n\t\"fa-y-combinator\",\n\t\"fa-y-combinator-square\",\n\t\"fa-yahoo\",\n\t\"fa-yc\",\n\t\"fa-yc-square\",\n\t\"fa-yelp\",\n\t\"fa-yen\",\n\t\"fa-yoast\",\n\t\"fa-youtube\",\n\t\"fa-youtube-play\",\n\t\"fa-youtube-square\",\n];\n\nexport default fontAwesome;\n","import colorList from \"./colorList\";\nimport fontAwesomeList from \"./fa-icons\";\nimport {\n\tName,\n\tType,\n\tTitle,\n\tDefaultValue,\n\tAppBuilder,\n\tHelp,\n\tSequence,\n\tRoles,\n\tValueExpression,\n\tSelection,\n\tWidget,\n\tOnChange,\n\tMin,\n\tMax,\n\tJsonRelationalField,\n\tDomain,\n\tTargetJsonModel,\n\tTargetModel,\n\tGridView,\n\tFormView,\n\tRequired,\n\tColumnSequence,\n\tReadOnly,\n\tHidden,\n\tVisibleInGrid,\n\tShowIf,\n\tHideIf,\n\tIf,\n\tRequiredIf,\n\tReadOnlyIf,\n\tIncludeIf,\n\tValidIf,\n\tColSpan,\n\tShowTitle,\n\tOnNew,\n\tOnSave,\n\tOnLoad,\n\tCanAttach,\n\tCanCopy,\n\tCanDelete,\n\tCanEdit,\n\tCanNew,\n\tCanSave,\n\tFormWidth,\n\tEditable,\n\tDummyType,\n\tCanSearch,\n\tAction,\n\tIfModule,\n\tHeight,\n\tField,\n\tCanMove,\n\tOrderBy,\n\tIncludeFrom,\n\tIncludeView,\n\tTransient,\n\tMassUpdate,\n\tColumn,\n\tFormula,\n\tIndex,\n\tDefault,\n\tUnique,\n\tInitParam,\n\tHashKey,\n\tLarge,\n\tMultiline,\n\tTranslatable,\n\tPassword,\n\tEncrypted,\n\tSearch,\n\tPrecision,\n\tScale,\n\tTZ,\n\tImage,\n\tOrphanRemoval,\n\tRef,\n\tMappedBy,\n\tCachable,\n\tSequential,\n\tRepository,\n\tLogUpdates,\n\tLang,\n\tImplements,\n\tTable,\n\tPersistable,\n\tStrategy,\n\tHashAll,\n\tExtends,\n\tIsGenerateMenu,\n\tMenuBuilderParent,\n\tMenuBuilderTitle,\n\tStacked,\n\tPackageName,\n\tEntitySelection,\n\tModel,\n\tStrong,\n\tColor,\n\tBackground,\n\tItemSpan,\n\tCss,\n\tPrompt,\n\tSelectionIn,\n\tValueAdd,\n\tValueDel,\n\tActive,\n\tRefresh,\n\tValue,\n\tSidebar,\n\tSelectionText,\n\tUpdateSelection,\n} from \"./propertyFields\";\nimport {\n\tStringField,\n\tIntegerField,\n\tStaticSelectField,\n\tSelectField,\n\tBooleanField,\n} from \"./fieldTypes\";\nimport { MODEL_TYPE } from \"./../constants\";\n\n/** Options */\nconst stringOption = {\n\toverview: [\n\t\tName({ existsCheck: true }),\n\t\tType,\n\t\tTitle,\n\t\tDefaultValue,\n\t\tAppBuilder,\n\t\tHelp,\n\t\tSequence,\n\t],\n\tfieldOptions: [\n\t\tSelection,\n\t\tUpdateSelection,\n\t\tSelectionText,\n\t\tSelectionIn,\n\t\tWidget,\n\t\tOnChange,\n\t\tMin,\n\t\tMax,\n\t\tStringField({ name: \"regex\", dependModelType: MODEL_TYPE.CUSTOM, }),\n\t\tValue\n\t],\n\tuiOptions: [\n\t\tRequired,\n\t\tColumnSequence,\n\t\tReadOnly,\n\t\tBooleanField({\n\t\t\tname: \"nameField\",\n\t\t\ttitle: \"nameColumn\",\n\t\t\tdependModelType: MODEL_TYPE.CUSTOM,\n\t\t}),\n\t\tHidden,\n\t\tVisibleInGrid,\n\t\tCss,\n\t],\n\tconditions: [ShowIf, HideIf, RequiredIf, ReadOnlyIf, IncludeIf, ValidIf],\n\tvalueExpr: [ValueExpression],\n\troles: [Roles],\n\twidgetAttributes: [\n\t\tColSpan,\n\t\tShowTitle,\n\t\tBooleanField({\n\t\t\tname: \"multiline\",\n\t\t\tparentField: \"widgetAttrs\",\n\t\t\tmodelType: MODEL_TYPE.CUSTOM,\n\t\t\tdependModelType: MODEL_TYPE.CUSTOM,\n\t\t}),\n\t],\n};\n\nconst integerOption = {\n\toverview: [\n\t\tName({ existsCheck: true }),\n\t\tType,\n\t\tTitle,\n\t\tDefaultValue,\n\t\tAppBuilder,\n\t\tHelp,\n\t\tSequence,\n\t],\n\tfieldOptions: [\n\t\tSelection,\n\t\tUpdateSelection,\n\t\tSelectionText,\n\t\tSelectionIn, Widget, OnChange, Min, Max, Value],\n\tuiOptions: [Required, ColumnSequence, ReadOnly, Hidden, VisibleInGrid, Css],\n\tconditions: [ShowIf, HideIf, RequiredIf, ReadOnlyIf, IncludeIf, ValidIf],\n\tvalueExpr: [ValueExpression],\n\troles: [Roles],\n\twidgetAttributes: [ColSpan, ShowTitle],\n};\n\nconst decimalOption = {\n\toverview: [\n\t\tName({ existsCheck: true }),\n\t\tType,\n\t\tTitle,\n\t\tDefaultValue,\n\t\tAppBuilder,\n\t\tHelp,\n\t\tSequence,\n\t],\n\tfieldOptions: [\n\t\tSelection,\n\t\tUpdateSelection,\n\t\tSelectionText,\n\t\tSelectionIn,\n\t\tWidget,\n\t\tOnChange,\n\t\tMin,\n\t\tMax,\n\t\tIntegerField({\n\t\t\tname: \"precision\",\n\t\t\tdefault: 6,\n\t\t}),\n\t\tIntegerField({\n\t\t\tname: \"scale\",\n\t\t\tdefault: 2,\n\t\t}),\n\t\tValue\n\t],\n\tuiOptions: [Required, ColumnSequence, ReadOnly, Hidden, VisibleInGrid, Css],\n\tconditions: [ShowIf, HideIf, RequiredIf, ReadOnlyIf, IncludeIf, ValidIf],\n\tvalueExpr: [ValueExpression],\n\troles: [Roles],\n\twidgetAttributes: [ColSpan, ShowTitle],\n};\n\nconst booleanOption = {\n\toverview: [\n\t\tName({ existsCheck: true }),\n\t\tType,\n\t\tTitle,\n\t\tDefaultValue,\n\t\tAppBuilder,\n\t\tHelp,\n\t\tSequence,\n\t],\n\tfieldOptions: [Selection,\n\t\tUpdateSelection,\n\t\tSelectionText, Widget, OnChange, Value],\n\tuiOptions: [Required, ColumnSequence, ReadOnly, Hidden, VisibleInGrid, Css],\n\tconditions: [ShowIf, HideIf, RequiredIf, ReadOnlyIf, IncludeIf, ValidIf],\n\tvalueExpr: [ValueExpression],\n\troles: [Roles],\n\twidgetAttributes: [ColSpan, ShowTitle],\n};\n\nconst datetimeOption = {\n\toverview: [\n\t\tName({ existsCheck: true }),\n\t\tType,\n\t\tTitle,\n\t\tDefaultValue,\n\t\tAppBuilder,\n\t\tHelp,\n\t\tSequence,\n\t],\n\tfieldOptions: [Selection,\n\t\tUpdateSelection,\n\t\tSelectionText, SelectionIn, Widget, OnChange, Value],\n\tuiOptions: [Required, ColumnSequence, ReadOnly, Hidden, VisibleInGrid, Css],\n\tconditions: [ShowIf, HideIf, RequiredIf, ReadOnlyIf, IncludeIf, ValidIf],\n\tvalueExpr: [ValueExpression],\n\troles: [Roles],\n\twidgetAttributes: [ColSpan, ShowTitle],\n};\n\nconst panelOption = {\n\toverview: [Name({ existsCheck: true }), Type, Title, AppBuilder],\n\tuiOptions: [\n\t\tColumnSequence,\n\t\tReadOnly,\n\t\tHidden,\n\t\tBooleanField({\n\t\t\tname: \"canCollapse\",\n\t\t\tparentField: \"widgetAttrs\",\n\t\t\tmodelType: MODEL_TYPE.CUSTOM,\n\t\t\tdependModelType: MODEL_TYPE.CUSTOM,\n\t\t}),\n\t\tStringField({\n\t\t\tname: \"collapseIf\",\n\t\t\tparentField: \"widgetAttrs\",\n\t\t\tmodelType: MODEL_TYPE.CUSTOM,\n\t\t\tdependModelType: MODEL_TYPE.CUSTOM,\n\t\t}),\n\t\tSidebar,\n\t\t// Stacked,\n\t\tCss,\n\t\tActive,\n\t],\n\tconditions: [ShowIf, HideIf, ReadOnlyIf, ValidIf],\n\troles: [Roles],\n\twidgetAttributes: [ColSpan, ItemSpan, ShowTitle],\n};\n\nconst panelStackOption = {\n\toverview: [Name({ existsCheck: true }), Type, AppBuilder],\n\tuiOptions: [\n\t\tColumnSequence,\n\t\tReadOnly,\n\t\tHidden,\n\t\tBooleanField({\n\t\t\tname: \"canCollapse\",\n\t\t\tparentField: \"widgetAttrs\",\n\t\t\tmodelType: MODEL_TYPE.CUSTOM,\n\t\t\tdependModelType: MODEL_TYPE.CUSTOM,\n\t\t}),\n\t\tStringField({\n\t\t\tname: \"collapseIf\",\n\t\t\tparentField: \"widgetAttrs\",\n\t\t\tmodelType: MODEL_TYPE.CUSTOM,\n\t\t\tdependModelType: MODEL_TYPE.CUSTOM,\n\t\t}),\n\t\tSidebar,\n\t\tCss,\n\t],\n\tconditions: [ShowIf, HideIf, ReadOnlyIf, ValidIf],\n\troles: [Roles],\n\twidgetAttributes: [ColSpan],\n};\n\nconst panelTabOption = {\n\toverview: [Name({ existsCheck: true }), Type, Title, AppBuilder],\n\tuiOptions: [ColumnSequence, ReadOnly, Hidden, Css],\n\tconditions: [ShowIf, HideIf, ReadOnlyIf, ValidIf],\n\troles: [Roles],\n\twidgetAttributes: [ShowTitle],\n};\n\nconst buttonOption = {\n\toverview: [\n\t\tName({ existsCheck: true }),\n\t\tType,\n\t\tTitle,\n\t\tAppBuilder,\n\t\tHelp,\n\t\tSequence,\n\t\tPrompt,\n\t],\n\tfieldOptions: [\n\t\tWidget,\n\t\tSelectField({\n\t\t\tname: \"onClick\",\n\t\t\trequired: true,\n\t\t\tref: \"com.axelor.meta.db.MetaAction\",\n\t\t\trequiredFor: ['button'],\n\t\t\tdependModelType: MODEL_TYPE.CUSTOM,\n\t\t}),\n\t],\n\tuiOptions: [ColumnSequence, ReadOnly, Hidden, VisibleInGrid, Css],\n\tconditions: [ShowIf, HideIf, RequiredIf, ReadOnlyIf, IncludeIf, ValidIf],\n\troles: [Roles],\n\twidgetAttributes: [\n\t\tColSpan,\n\t\tShowTitle,\n\t\tStaticSelectField({\n\t\t\tname: \"icon\",\n\t\t\ttitle: \"Icon\",\n\t\t\tdata: fontAwesomeList,\n\t\t\thelper: \"https://fontawesome.com/cheatsheet\",\n\t\t\tparentField: \"widgetAttrs\",\n\t\t\tmodelType: MODEL_TYPE.CUSTOM,\n\t\t}),\n\t\t// StaticSelectField({\n\t\t// \tname: \"color\",\n\t\t// \tdata: [\n\t\t// \t\t\"btn-default\",\n\t\t// \t\t\"btn-warning\",\n\t\t// \t\t\"btn-info\",\n\t\t// \t\t\"btn-success\",\n\t\t// \t\t\"btn-primary\",\n\t\t// \t\t\"btn-danger\",\n\t\t// \t],\n\t\t// \ttitle: \"Color\",\n\t\t// }),\n\t],\n};\n\nconst seperatorOption = {\n\toverview: [\n\t\tName({ existsCheck: true }),\n\t\tType,\n\t\tTitle,\n\t\tDefaultValue,\n\t\tAppBuilder,\n\t\tHelp,\n\t\tSequence,\n\t],\n\tuiOptions: [ColumnSequence, Hidden, Css],\n\tconditions: [ShowIf, HideIf, RequiredIf, ReadOnlyIf, IncludeIf, ValidIf],\n\troles: [Roles],\n\twidgetAttributes: [ColSpan],\n};\n\nconst spacerOption = {\n\toverview: [Name({ existsCheck: true }), Type, AppBuilder],\n\tfieldOptions: [],\n\tuiOptions: [ColumnSequence, Hidden, Css],\n\tconditions: [ShowIf, HideIf, ValidIf],\n\troles: [Roles],\n\twidgetAttributes: [ColSpan],\n};\n\nconst labelOption = {\n\toverview: [Name({ existsCheck: true }), Type, Title, AppBuilder],\n\tfieldOptions: [Selection, Widget],\n\tuiOptions: [\n\t\tRequired,\n\t\tColumnSequence,\n\t\tHidden,\n\t\tCss,\n\t],\n\tconditions: [ShowIf, HideIf, RequiredIf, ReadOnlyIf, ValidIf],\n\tvalueExpr: [ValueExpression],\n\troles: [Roles],\n\twidgetAttributes: [ColSpan, ShowTitle],\n};\n\nconst viewerOption = {\n\toverview: [Name({ existsCheck: true }), Type, Title, AppBuilder],\n\tfieldOptions: [Selection,\n\t\tUpdateSelection,\n\t\tSelectionText, Widget],\n\tuiOptions: [\n\t\tRequired,\n\t\tColumnSequence,\n\t\tHidden,\n\t\tReadOnly,\n\t\tCss,\n\t],\n\tconditions: [ShowIf, HideIf, RequiredIf, ReadOnlyIf, ValidIf],\n\tvalueExpr: [ValueExpression],\n\troles: [Roles],\n\twidgetAttributes: [ColSpan, ShowTitle],\n};\n\nconst manyToOneOption = {\n\toverview: [\n\t\tName({ existsCheck: true }),\n\t\tType,\n\t\tTitle,\n\t\tDefaultValue,\n\t\tAppBuilder,\n\t\tHelp,\n\t\tSequence,\n\t],\n\tfieldOptions: [\n\t\tSelection,\n\t\tUpdateSelection,\n\t\tSelectionText,\n\t\tSelectionIn,\n\t\tWidget,\n\t\tOnChange,\n\t\tJsonRelationalField,\n\t\tDomain,\n\t\tTargetModel,\n\t\tGridView,\n\t\tFormView,\n\t\tValue\n\t],\n\tuiOptions: [Required, ColumnSequence, ReadOnly, Hidden, VisibleInGrid, Css],\n\tconditions: [ShowIf, HideIf, RequiredIf, ReadOnlyIf, IncludeIf, ValidIf],\n\tvalueExpr: [ValueExpression],\n\troles: [Roles],\n\twidgetAttributes: [ColSpan, ShowTitle],\n};\n\nconst manyToManyAndOneToManyOption = {\n\toverview: [\n\t\tName({ existsCheck: true }),\n\t\tType,\n\t\tTitle,\n\t\tAppBuilder,\n\t\tHelp,\n\t\tSequence,\n\t],\n\tfieldOptions: [\n\t\tSelection,\n\t\tUpdateSelection,\n\t\tSelectionText,\n\t\tSelectionIn,\n\t\tWidget,\n\t\tOnChange,\n\t\tJsonRelationalField,\n\t\tDomain,\n\t\tTargetModel,\n\t\tGridView,\n\t\tFormView,\n\t\tValueAdd,\n\t\tValueDel,\n\t\tValue\n\t],\n\tuiOptions: [Required, ColumnSequence, ReadOnly, Hidden, VisibleInGrid, Css],\n\tconditions: [ShowIf, HideIf, RequiredIf, ReadOnlyIf, IncludeIf, ValidIf],\n\tvalueExpr: [ValueExpression],\n\troles: [Roles],\n\twidgetAttributes: [ColSpan, ShowTitle],\n};\n\nconst customRelationOption = {\n\toverview: [\n\t\tName({ existsCheck: true }),\n\t\tType,\n\t\tTitle,\n\t\tAppBuilder,\n\t\tHelp,\n\t\tSequence,\n\t],\n\tfieldOptions: [\n\t\tSelection,\n\t\tUpdateSelection,\n\t\tSelectionText,\n\t\tSelectionIn,\n\t\tWidget,\n\t\tOnChange,\n\t\tJsonRelationalField,\n\t\tDomain,\n\t\tTargetJsonModel,\n\t\tValue\n\t],\n\tuiOptions: [Required, ColumnSequence, ReadOnly, Hidden, VisibleInGrid, Css],\n\tconditions: [ShowIf, HideIf, RequiredIf, ReadOnlyIf, IncludeIf, ValidIf],\n\tvalueExpr: [ValueExpression],\n\troles: [Roles],\n\twidgetAttributes: [ColSpan, ShowTitle],\n};\n\nconst formOption = {\n\toverview: [\n\t\tName({ existsCheck: true }),\n\t\t{ ...Title, required: true },\n\t\tAppBuilder,\n\t\tStaticSelectField({\n\t\t\tname: \"formWidth\",\n\t\t\tdata: [\"large\"],\n\t\t}),\n\t\tStringField({\n\t\t\tname: \"orderBy\",\n\t\t\ttitle: \"Order by\",\n\t\t}),\n\t\tIsGenerateMenu,\n\t\tMenuBuilderParent,\n\t\tMenuBuilderTitle,\n\t],\n\tactions: [StringField({ name: \"onNew\" }), StringField({ name: \"onSave\" })],\n};\n\nconst commonOption = {\n\toverview: [Name(), Type, Title, AppBuilder],\n\tuiOptions: [ColumnSequence, Hidden, VisibleInGrid, Css],\n\tconditions: [ShowIf, HideIf, ReadOnlyIf, IncludeIf, ValidIf],\n\twidgetAttributes: [ColSpan, ShowTitle],\n};\n\nconst dummyOption = {\n\toverview: [Name(), DummyType],\n};\nconst viewOption = {\n\toverview: [\n\t\tName({ existsCheck: true }),\n\t\tType,\n\t\t{...Title, readOnly: true, translationView: false},\n\t\t// Editable,\n\t\t// OnNew,\n\t\t// OnSave,\n\t\t// OnLoad,\n\t\t// CanAttach,\n\t\t// CanCopy,\n\t\t// CanDelete,\n\t\t// CanEdit,\n\t\t// CanNew,\n\t\t// CanSave,\n\t\t// FormWidth,\n\t],\n};\n\nconst gridOption = {\n\toverview: [\n\t\tName({ existsCheck: true }),\n\t\tType,\n\t\tTitle,\n\t\tModel,\n\t\tEditable\n\t],\n};\n\nconst panelDashletOption = {\n\toverview: [Name({ existsCheck: true }), Type, Action, Title, CanSearch, IfModule],\n\tuiOptions: [ReadOnly, Hidden, Height, Css, Refresh],\n\tconditions: [ShowIf, HideIf, ReadOnlyIf],\n\twidgetAttributes: [ColSpan, ShowTitle],\n};\n\nconst menuItemOption = {\n\toverview: [Name({ existsCheck: true }), Type, Action],\n\t// conditions: [If, ShowIf, HideIf, ReadOnlyIf],\n\twidgetAttributes: [ShowTitle],\n};\n\nconst dividerOption = {\n\toverview: [Name({ existsCheck: true }), Type],\n\tconditions: [If, ShowIf, HideIf, IfModule],\n};\n\nconst menuOption = {\n\toverview: [Name({ existsCheck: true }), Type],\n\twidgetAttributes: [ShowTitle,\n\t\t// StaticSelectField({\n\t\t// \tname: \"icon\",\n\t\t// \ttitle: \"Icon\",\n\t\t// \tdata: fontAwesomeList,\n\t\t// \thelper: \"https://fontawesome.com/cheatsheet\",\n\t\t// })\n],\n\tconditions: [If, IfModule, IncludeIf],\n};\n\nconst panelRelatedOption = {\n\toverview: [Name({ existsCheck: true }), Type, Title, Field, OnNew, OnChange],\n\tuiOptions: [FormView, GridView, Height, Editable,ReadOnly,Hidden, Css],\n\tconditions: [ShowIf, HideIf, ReadOnlyIf, ValidIf, CanMove, OrderBy],\n\twidgetAttributes: [ColSpan, ShowTitle],\n};\n\nconst panelIncludeOption = {\n\toverview: [Type, IncludeView, IncludeFrom, IfModule],\n\twidgetAttributes: [ShowTitle],\n};\n\nconst commonEntityOption = [\n\tName({ existsCheck: true }),\n\tType,\n\tTitle,\n\tHelp,\n\tColumn,\n\tIndex,\n\tDefault,\n\tRequired,\n\tReadOnly,\n\tUnique,\n\tHidden,\n\tTransient,\n\tInitParam,\n\tHashKey,\n\tMassUpdate,\n\tFormula,\n];\n\nconst stringEntity = {\n\toverview: [\n\t\t...commonEntityOption,\n\t\tBooleanField({\n\t\t\tname: \"namecolumn\",\n\t\t\ttitle: \"nameColumn\",\n\t\t}),\n\t\tEntitySelection,\n\t\tMin,\n\t\tMax,\n\t\tLarge,\n\t\tSearch,\n\t\tSequence,\n\t\tMultiline,\n\t\tTranslatable,\n\t\tPassword,\n\t\tEncrypted,\n\t],\n};\n\nconst decimalEntity = {\n\toverview: [...commonEntityOption, EntitySelection, Min, Max, Precision, Scale],\n};\n\nconst integerEntity = {\n\toverview: [...commonEntityOption, EntitySelection, Min, Max],\n};\n\nconst dateEntity = {\n\toverview: [...commonEntityOption, EntitySelection],\n};\n\nconst timeEntity = {\n\toverview: [...commonEntityOption, EntitySelection],\n};\n\nconst datetimeEntity = {\n\toverview: [...commonEntityOption, EntitySelection, TZ],\n};\n\nconst longEntity = {\n\toverview: [...commonEntityOption, EntitySelection, Min, Max],\n};\n\nconst booleanEntity = {\n\toverview: [...commonEntityOption, EntitySelection],\n};\n\nconst binaryEntity = {\n\toverview: [...commonEntityOption, EntitySelection, Image, Encrypted],\n};\n\nconst oneToManyEntity = {\n\toverview: [...commonEntityOption, Ref, MappedBy, OrderBy, OrphanRemoval],\n};\n\nconst manyToManyEntity = {\n\toverview: [...commonEntityOption, Ref, MappedBy, OrderBy],\n};\n\nconst manyToOneEntity = {\n\toverview: [...commonEntityOption, Ref],\n};\n\nconst oneToOneEntity = {\n\toverview: [...commonEntityOption, Ref, MappedBy],\n};\n\nconst entityOption = {\n\toverview: [\n\t\tPackageName,\n\t\tName({ existsCheck: true }),\n\t\tSequential,\n\t\tCachable,\n\t\tRepository,\n\t\tLogUpdates,\n\t\tPersistable,\n\t\tLang,\n\t\tExtends,\n\t\tImplements,\n\t\tTable,\n\t\tStrategy,\n\t\tHashAll,\n\t],\n};\n\nconst hiliteOption = {\n\toverview: [\n\t\tName({ existsCheck: true }),\n\t\tIf,\n\t\tColor,\n\t\tBackground,\n\t\tStrong,\n\t\tCss,\n\t],\n};\n\nexport const options = [\n\t{ type: \"form\", value: viewOption },\n\t{ type: \"grid\", value: gridOption },\n\t{ type: \"modelForm\", value: formOption },\n\t{ type: \"entityForm\", value: entityOption },\n\t{ type: \"string\", value: stringOption },\n\t{ type: \"byte[]\", value: stringOption },\n\t{ type: \"integer\", value: integerOption },\n\t{ type: \"number\", value: integerOption },\n\t{ type: \"decimal\", value: decimalOption },\n\t{ type: \"bigdecimal\", value: decimalOption },\n\t{ type: \"boolean\", value: booleanOption },\n\t{ type: \"datetime\", value: datetimeOption },\n\t{ type: \"localdatetime\", value: datetimeOption },\n\t{ type: \"zoneddatetime\", value: datetimeOption },\n\t{ type: \"date\", value: datetimeOption },\n\t{ type: \"localdate\", value: datetimeOption },\n\t{ type: \"time\", value: datetimeOption },\n\t{ type: \"panel\", value: panelOption, dependModelType: MODEL_TYPE.BASE },\n\t{ type: \"panel-stack\", value: panelStackOption },\n\t{ type: \"panel-tab\", value: panelTabOption },\n\t{ type: \"button\", value: buttonOption },\n\t{ type: \"separator\", value: seperatorOption },\n\t{ type: \"spacer\", value: spacerOption },\n\t{ type: \"label\", value: labelOption },\n\t{ type: \"many-to-one\", value: manyToOneOption },\n\t{ type: \"many-to-many\", value: manyToManyAndOneToManyOption },\n\t{ type: \"one-to-many\", value: manyToManyAndOneToManyOption },\n\t{ type: \"json-many-to-one\", value: customRelationOption },\n\t{ type: \"json-many-to-many\", value: customRelationOption },\n\t{ type: \"json-one-to-many\", value: customRelationOption },\n\t{ type: \"include\", value: formOption },\n\t{ type: \"panel-tabs\", value: panelTabOption, showInCustomField: false,  },\n\t{ type: \"panel-dashlet\", value: panelDashletOption },\n\t{ type: \"panel-related\", value: panelRelatedOption },\n\t{ type: \"panel-include\", value: panelIncludeOption },\n\t{ type: \"text\", value: commonOption },\n\t{ type: \"long\", value: decimalOption },\n\t{ type: \"panel-dashlet\", value: commonOption },\n\t{ type: \"dashlet\", value: commonOption },\n\t{ type: \"static\", value: commonOption },\n\t{ type: \"one-to-one\", value: manyToOneOption },\n\t{ type: \"binary\", value: commonOption },\n\t{ type: \"field\", value: commonOption },\n\t{ type: \"dummy\", value: dummyOption },\n\t{ type: \"viewer\", value: viewerOption },\n\t{ type: \"editor\", value: labelOption },\n\t{ type: \"byte[]entity\", value: stringEntity },\n\t{ type: \"stringentity\", value: stringEntity },\n\t{ type: \"integerentity\", value: integerEntity },\n\t{ type: \"decimalentity\", value: decimalEntity },\n\t{ type: \"bigdecimalentity\", value: decimalEntity },\n\t{ type: \"dateentity\", value: dateEntity },\n\t{ type: \"localdateentity\", value: dateEntity },\n\t{ type: \"timeentity\", value: timeEntity },\n\t{ type: \"datetimeentity\", value: datetimeEntity },\n\t{ type: \"localdatetimeentity\", value: datetimeEntity },\n\t{ type: \"zoneddatetimeentity\", value: datetimeEntity },\n\t{ type: \"longentity\", value: longEntity },\n\t{ type: \"booleanentity\", value: booleanEntity },\n\t{ type: \"binaryentity\", value: binaryEntity },\n\t{ type: \"many-to-oneentity\", value: manyToOneEntity },\n\t{ type: \"many-to-manyentity\", value: manyToManyEntity },\n\t{ type: \"one-to-manyentity\", value: oneToManyEntity },\n\t{ type: \"one-to-oneentity\", value: oneToOneEntity },\n\t{ type: \"menu\", value: menuOption },\n\t{ type: \"item\", value: menuItemOption },\n\t{ type: \"divider\", value: dividerOption },\n\t{ type: \"hilite\", value: hiliteOption },\n];\n\nexport default options;\n","import React from \"react\";\nimport classNames from \"classnames\";\nimport Grid from \"./Grid\";\nimport {TYPE} from \"../constants\";\n\n/**\n * Panel Component\n * Used As Container to group Field Component like form group\n */\nfunction PanelComponent({ id, attrs, design, isTab = false, ...rest }) {\n\tconst errors = rest.errorList[id] || {};\n\treturn (\n\t\t<React.Fragment>\n\t\t\t{(attrs.title || [TYPE.toolbar, TYPE.menubar].includes(attrs.serverType)) && <div\n\t\t\t\tclassName={classNames(\"panel-header\", {\n\t\t\t\t\tinline: isTab,\n\t\t\t\t})}\n\t\t\t>\n\t\t\t\t{attrs.title || attrs.autoTitle}\n\t\t\t\t{attrs.serverType === TYPE.toolbar && <i className=\"fa fa-wrench\" title=\"toolbar\" />}\n\t\t\t\t{attrs.serverType === TYPE.menubar && <i className=\"fa fa-bars\" title=\"menubar\" />}\n\n\t\t\t</div>}\n\t\t\t{\n\t\t\t\terrors.items && !isTab &&\n\t\t\t\t<div className={classNames(\"panel-children-error\")}>{errors.items}</div>\n\t\t\t}\n\t\t\t{!isTab && (\n\t\t\t\t<Grid\n\t\t\t\t\tdesign={design}\n\t\t\t\t\tclassName=\"panel-body\"\n\t\t\t\t\titems={attrs.items || []}\n\t\t\t\t\tattrs={attrs}\n\t\t\t\t\tpanelId={id}\n\t\t\t\t\t_type={rest._type}\n\t\t\t\t\terrorList={rest.errorList}\n\t\t\t\t\tcanRemove={rest.canRemove}\n\t\t\t\t/>\n\t\t\t)}\n\t\t</React.Fragment>\n\t);\n}\n\nexport default React.memo(PanelComponent);\n","import React from \"react\";\nimport classNames from \"classnames\";\nimport Grid from \"./Grid\";\n\n/**\n * Menu Component\n * Used As Container to group Field Component like form group\n */\nfunction MenuComponent({ id, attrs, design, isTab = true, ...rest }) {\n\tconst errors = rest.errorList[id] || {};\n\tconst [openMenu, setOpenMenu] = React.useState(false);\n\n\tconst handleToggleMenu = React.useCallback((e) => {\n\t\te.stopPropagation();\n\t\tsetOpenMenu(m => !m);\n\t}, []);\n\n\tconst arrow = openMenu ? 'down' : 'up';\n\treturn (\n\t\t<React.Fragment>\n\t\t\t<div\n\t\t\t\tclassName={classNames(\"menu-header\", {\n\t\t\t\t\tinline: isTab,\n\t\t\t\t})}\n\t\t\t>\n\t\t\t\t<span>{attrs.title || attrs.autoTitle}</span>\n\t\t\t\t<div className=\"menu-toggle-button\" onClick={handleToggleMenu}><i className={`fa fa-chevron-${arrow}`} /></div>\n\t\t\t</div>\n\t\t\t{\n\t\t\t\terrors.items && !isTab &&\n\t\t\t\t<div className={classNames(\"panel-children-error\")}>{errors.items}</div>\n\t\t\t}\n\t\t\t{\n\t\t\t\topenMenu &&\n\t\t\t\t<Grid\n\t\t\t\t\tdesign={design}\n\t\t\t\t\tclassName=\"panel-body\"\n\t\t\t\t\titems={attrs.items || []}\n\t\t\t\t\tattrs={attrs}\n\t\t\t\t\tpanelId={id}\n\t\t\t\t\t_type={rest._type}\n\t\t\t\t\terrorList={rest.errorList}\n\t\t\t\t\tcanRemove={rest.canRemove}\n\t\t\t\t/>\n\t\t\t}\n\t\t</React.Fragment>\n\t);\n}\n\nexport default React.memo(MenuComponent);\n","import Field from \"./Field\";\nimport Panel from \"./Panel\";\nimport TabPanel from \"./TabPanel\";\nimport Form from \"./Form\";\nimport Menu from \"./Menu\";\n\n// common Registery contains all Form Components\nconst Registery = {\n\tfield: { component: Field, props: { className: \"field-container\" } },\n\tdump_field: {\n\t\tcomponent: Field,\n\t\tprops: { className: \"field-container dump\" },\n\t},\n\tpanel: { component: Panel, props: { className: \"panel\" } },\n\tmenubar: { component: Panel, props: { className: \"panel menubar\" } },\n\tmenu: { component: Menu, props: { className: \"panel menu\" } },\n\ttoolbar: { component: Panel, props: { className: \"panel toolbar\" } },\n\t\"panel-stack\": { component: Panel, props: { className: \"panel\" } },\n\t\"panel-include\": { component: Panel, props: { className: \"panel\" } },\n\tform: { component: Form, props: { className: \"form-layout\" } },\n\tcustomForm: { component: Form, props: { className: \"form-layout\" } },\n\t\"panel-tabs\": {\n\t\tcomponent: TabPanel,\n\t\tprops: { className: \"panel tabs-panel\" },\n\t},\n};\n\nexport default Registery;\n","import React from \"react\";\nimport classNames from \"classnames\";\nimport { compose } from \"recompose\";\nimport { DragSource, DropTarget } from \"react-dnd\";\n\nimport { useStore } from \"../store/context\";\nimport { TYPE as WIDGET_TYPE, IDS, MODEL_TYPE, FIELD_TYPE } from \"../constants\";\nimport Registry from \"./Registery\";\n\n// Unique Type for Widget\nconst TYPE = Symbol();\n\n// DragSource\nconst CardSource = {\n\t// evaluate widget is draggable or not\n\tcanDrag(props) {\n\t\tconst {state} = props;\n\t\tconst isCustomField = props._type === \"customField\";\n\t\t// temporary restrict real view movement\n\t\tif(state.modelType === MODEL_TYPE.BASE && !isCustomField && !props.isPalleteField) {\n\t\t\treturn;\n\t\t}\n\t\treturn !(\n\t\t\tprops.id === IDS.dumpField ||\n\t\t\tprops.attrs.draggable === false ||\n\t\t\tprops.attrs.isDummy ||\n\t\t\tprops.attrs.type === WIDGET_TYPE.form\n\t\t);\n\t},\n\t// event, raise when start dragging widget\n\tbeginDrag(props) {\n\t\tconst _props = { ...props };\n\t\tif (\n\t\t\tprops.state.modelType === MODEL_TYPE.CUSTOM ||\n\t\t\tprops._type === \"customField\"\n\t\t) {\n\t\t\t_props.attrs = {\n\t\t\t\t..._props.attrs,\n\t\t\t\tmodel: \"com.axelor.meta.db.MetaJsonRecord\",\n\t\t\t\tmodelField: \"attrs\",\n\t\t\t\twidgetAttrs: JSON.stringify({ colSpan: _props.attrs.colSpan }),\n\t\t\t};\n\t\t} else if (\n\t\t\tprops.state.modelType === MODEL_TYPE.BASE &&\n\t\t\t_props.attrs.isModelField\n\t\t) {\n\t\t\t_props.attrs = {\n\t\t\t\t..._props.attrs,\n\t\t\t\t...(_props.attrs.serverType !== \"field\" && {\n\t\t\t\t\ttype: _props.attrs.serverType,\n\t\t\t\t}),\n\t\t\t\tserverType: \"field\",\n\t\t\t};\n\t\t}\n\t\tprops.onDrag(props.id, { props: _props });\n\t\treturn { ...props };\n\t},\n\t// event, raise when dragging widget is droped on target or somewhere else\n\t// reset tasks\n\tendDrag(props, monitor) {\n\t\t// check widget is dropped or not, if not reset back to its position for existing element\n\t\t// for new element, remove it from schema\n\t\tprops.onDrag(null, {\n\t\t\tisDrop: monitor.didDrop(),\n\t\t\tprops: {},\n\t\t\tnewProps: monitor.getItem(),\n\t\t});\n\t},\n\t// currently dragged element, special case for nested drag source\n\tisDragging(props, monitor) {\n\t\treturn props.id === monitor.getItem().id;\n\t},\n};\n\n// DropTarget\nconst CardTarget = {\n\t// event, raised when one widget is hover on another widget\n\n\thover(props, monitor) {\n\t\tlet {\n\t\t\tindex: dragIndex,\n\t\t\tpanelId: dragPanelId,\n\t\t\tid: dragId,\n\t\t\tattrs: dragAttrs,\n\t\t} = monitor.getItem();\n\t\tlet {\n\t\t\tindex: hoverIndex,\n\t\t\tpanelId: hoverPanelId,\n\t\t\tid: hoverId,\n\t\t\tattrs: hoverAttrs,\n\t\t\tstate,\n\t\t\tmeta,\n\t\t\tsetHoverAttr,\n\t\t} = props;\n\t\tconst panelSet = [\n\t\t\tWIDGET_TYPE.panel,\n\t\t\tWIDGET_TYPE.panelDashlet,\n\t\t\tWIDGET_TYPE.panelRelated,\n\t\t\tWIDGET_TYPE.panelInclude,\n\t\t];\n\t\tconst isCustomField = props._type === \"customField\";\n\t\tconst hoverMeta = state.hoverWidget?.meta;\n\t\tconst widgets =\n\t\t\tprops._type === \"customField\" ? state.customFieldWidgets : state.widgets;\n\t\tconst parentPanel = props.panelId ? widgets[props.panelId] : null;\n\t\t// temporary restrict real view movement\n\t\tif(state.modelType === MODEL_TYPE.BASE && !isCustomField) {\n\t\t\treturn;\n\t\t}\n\t\tif (state.modelType !== MODEL_TYPE.ENTITY) {\n\t\t\tif([WIDGET_TYPE.menubar, WIDGET_TYPE.toolbar].includes(dragAttrs.type)) {\n\t\t\t\tconst bar = Object.values(state.widgets || {}).find(w => [WIDGET_TYPE.menubar, WIDGET_TYPE.toolbar].includes(w.type));\n\t\t\t\tconst rowCount = bar ? 2 : 0;\n\t\t\t\tif (hoverPanelId) return;\n\t\t\t\tif (!meta) return;\n\t\t\t\tif (meta.row > rowCount || meta.col !== 1) return;\n\t\t\t}\n\t\t\tif((state.modelType === MODEL_TYPE.CUSTOM || isCustomField) && [WIDGET_TYPE.menubar, WIDGET_TYPE.toolbar].includes(dragAttrs.serverType)) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tif(![WIDGET_TYPE.menuItem, WIDGET_TYPE.menu,WIDGET_TYPE.divider].includes(dragAttrs.serverType) && (parentPanel && parentPanel.type === WIDGET_TYPE.menu)) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tif([WIDGET_TYPE.menuItem,WIDGET_TYPE.divider].includes(dragAttrs.serverType) && (!parentPanel || parentPanel.type !== WIDGET_TYPE.menu)) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tif([WIDGET_TYPE.menu].includes(dragAttrs.serverType) && (!parentPanel || ![WIDGET_TYPE.menu, WIDGET_TYPE.menubar].includes(parentPanel.type))) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tif((parentPanel && parentPanel.type === WIDGET_TYPE.menubar) && dragAttrs.type !== WIDGET_TYPE.menu) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tif((parentPanel && parentPanel.type === WIDGET_TYPE.toolbar) && dragAttrs.type !== FIELD_TYPE.button) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tif (\n\t\t\t\t!parentPanel &&\n\t\t\t\t![...panelSet, WIDGET_TYPE.tabs, WIDGET_TYPE.panelStack, WIDGET_TYPE.menubar, WIDGET_TYPE.toolbar].includes(\n\t\t\t\t\tdragAttrs.type\n\t\t\t\t)\n\t\t\t) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\t// when stacked is true do not allow to drop field except specified panel types.\n\t\t\tif (\n\t\t\t\tparentPanel &&\n\t\t\t\tparentPanel.type === WIDGET_TYPE.panelStack &&\n\t\t\t\t!panelSet.includes(dragAttrs.type)\n\t\t\t) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tif (\n\t\t\t\tparentPanel &&\n\t\t\t\tparentPanel.type === WIDGET_TYPE.tabs &&\n\t\t\t\t!panelSet.includes(dragAttrs.type)\n\t\t\t) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tif (\n\t\t\t\tstate.modelType === MODEL_TYPE.CUSTOM ||\n\t\t\t\tprops._type === \"customField\"\n\t\t\t) {\n\t\t\t\tlet hasPanel = false;\n\t\t\t\tif (\n\t\t\t\t\t[\n\t\t\t\t\t\tWIDGET_TYPE.panelDashlet,\n\t\t\t\t\t\tWIDGET_TYPE.panelInclude,\n\t\t\t\t\t\tWIDGET_TYPE.panelRelated,\n\t\t\t\t\t\tWIDGET_TYPE.panelStack,\n\t\t\t\t\t].includes(dragAttrs.type)\n\t\t\t\t) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\t// restrict nested panel drop in custom model\n\t\t\t\tconst widgets =\n\t\t\t\t\tprops._type === \"customField\"\n\t\t\t\t\t\t? state.customFieldWidgets\n\t\t\t\t\t\t: state.widgets;\n\t\t\t\tconst stateItems =\n\t\t\t\t\tprops._type === \"customField\" ? state.customFieldItems : state.items;\n\t\t\t\tconst hasTabPanel =\n\t\t\t\t\tObject.keys(widgets).findIndex(\n\t\t\t\t\t\t(widgetKey) => widgets[widgetKey].type === WIDGET_TYPE.tabs\n\t\t\t\t\t) !== -1;\n\t\t\t\tif (\n\t\t\t\t\thasTabPanel &&\n\t\t\t\t\tdragAttrs.type === WIDGET_TYPE.tabs &&\n\t\t\t\t\tdragAttrs.isNew\n\t\t\t\t) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tif (\n\t\t\t\t\t[WIDGET_TYPE.panel, WIDGET_TYPE.tabs].includes(dragAttrs.type) &&\n\t\t\t\t\tprops.panelId &&\n\t\t\t\t\t!stateItems.includes(props.panelId)\n\t\t\t\t) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tif (meta) {\n\t\t\t\t\tconst rowIndexes = [meta.row, meta.row - 1];\n\t\t\t\t\tconst rootPanels = stateItems.filter(\n\t\t\t\t\t\t(i) => widgets[i].type === WIDGET_TYPE.panel\n\t\t\t\t\t);\n\t\t\t\t\thasPanel = meta.grid\n\t\t\t\t\t\t? meta.grid.findIndex(\n\t\t\t\t\t\t\t\t(g) =>\n\t\t\t\t\t\t\t\t\trowIndexes.includes(g.rowIndex) && rootPanels.includes(g.id)\n\t\t\t\t\t\t  ) !== -1\n\t\t\t\t\t\t: false;\n\t\t\t\t}\n\t\t\t\t// const allowedTypes = [WIDGET_TYPE.panel, WIDGET_TYPE.tabs];\n\t\t\t\t// paneltab can drop inside panel tab\n\t\t\t\tif (\n\t\t\t\t\tparentPanel &&\n\t\t\t\t\tdragAttrs.type === WIDGET_TYPE.panel &&\n\t\t\t\t\tparentPanel.type !== WIDGET_TYPE.tabs\n\t\t\t\t) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tif (\n\t\t\t\t\tparentPanel &&\n\t\t\t\t\tdragAttrs.type === WIDGET_TYPE.tabs &&\n\t\t\t\t\tparentPanel.type === WIDGET_TYPE.panel\n\t\t\t\t) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tconst { hoverAttr } = state;\n\t\t\t\tconst { widgetAttrs = \"{}\" } = hoverAttr;\n\t\t\t\tconst _attrs = JSON.parse(widgetAttrs);\n\n\t\t\t\tif (\n\t\t\t\t\tparentPanel &&\n\t\t\t\t\tdragAttrs.type === WIDGET_TYPE.panel &&\n\t\t\t\t\tparentPanel.type === WIDGET_TYPE.tabs &&\n\t\t\t\t\t!_attrs.tab\n\t\t\t\t) {\n\t\t\t\t\tsetHoverAttr({ widgetAttrs: JSON.stringify({ tab: \"true\" }) });\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tif (props.panelId) {\n\t\t\t\t\tconst parentPanel = widgets[props.panelId];\n\t\t\t\t\tif (\n\t\t\t\t\t\tparentPanel &&\n\t\t\t\t\t\t[WIDGET_TYPE.tabs, WIDGET_TYPE.panelStack].includes(dragAttrs.type)\n\t\t\t\t\t) {\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t\tif (\n\t\t\t\t\t\t[\n\t\t\t\t\t\t\tWIDGET_TYPE.panelDashlet,\n\t\t\t\t\t\t\tWIDGET_TYPE.panelRelated,\n\t\t\t\t\t\t\tWIDGET_TYPE.panelInclude,\n\t\t\t\t\t\t].includes(parentPanel.type)\n\t\t\t\t\t) {\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (dragAttrs.isCoreField === false && props._type === \"customField\") {\n\t\t\t\treturn;\n\t\t\t}\n\t\t}\n\t\t// skip for same item drag n drop\n\t\t// skip for dragging widget in same panel\n\t\t// skip for other hover elements(monitor.isOver) specially for nested target\n\t\t// skip for dragging field directly on form\n\t\tif (\n\t\t\t(hoverIndex === dragIndex && dragPanelId === hoverPanelId) ||\n\t\t\t((hoverAttrs.type !== \"form\" && hoverAttrs.id) || []).indexOf(dragId) >\n\t\t\t\t-1 ||\n\t\t\t(dragAttrs.items || []).indexOf(hoverId) > -1 ||\n\t\t\t!monitor.isOver({ shallow: true }) ||\n\t\t\t(dragAttrs.type === WIDGET_TYPE.field &&\n\t\t\t\thoverAttrs.type === WIDGET_TYPE.form) ||\n\t\t\t(dragAttrs.type === WIDGET_TYPE.field && props.tabId !== undefined) ||\n\t\t\t(props.state.hoverWidget &&\n\t\t\t\tprops.state.hoverWidget.id === hoverId &&\n\t\t\t\tprops.state.hoverWidget.index === hoverIndex &&\n\t\t\t\tprops.state.hoverWidget.panelId === hoverPanelId)\n\t\t) {\n\t\t\treturn;\n\t\t}\n\n\t\t// Only for current dragging widget\n\t\tif (dragId === props.state.dragWidget) {\n\t\t\ttry {\n\t\t\t\tif (dragId && !dragAttrs.isNew && dragPanelId === hoverPanelId) {\n\t\t\t\t\tif (dragIndex + 1 === hoverIndex || dragIndex - 1 === hoverIndex) {\n\t\t\t\t\t\tprops.state.hoverWidget && props.onHover(null);\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tconst { isMoved } = props.onMove(\n\t\t\t\t\t{\n\t\t\t\t\t\tsource: {\n\t\t\t\t\t\t\tpanelId: dragPanelId,\n\t\t\t\t\t\t\tindex: dragIndex,\n\t\t\t\t\t\t\tid: dragId,\n\t\t\t\t\t\t\tattrs: dragAttrs,\n\t\t\t\t\t\t},\n\t\t\t\t\t\tdestination: {\n\t\t\t\t\t\t\tpanelId: hoverPanelId,\n\t\t\t\t\t\t\tindex: hoverIndex,\n\t\t\t\t\t\t\tid: hoverId,\n\t\t\t\t\t\t\tattrs: hoverAttrs,\n\t\t\t\t\t\t\t_type: props._type,\n\t\t\t\t\t\t},\n\t\t\t\t\t},\n\t\t\t\t\ttrue,\n\t\t\t\t\tprops._type\n\t\t\t\t);\n\t\t\t\tif (isMoved && props.onHover) {\n\t\t\t\t\tprops.onHover({\n\t\t\t\t\t\tmeta: props.meta || {},\n\t\t\t\t\t\tid: hoverId,\n\t\t\t\t\t\tindex: hoverIndex,\n\t\t\t\t\t\tpanelId: hoverPanelId,\n\t\t\t\t\t\tposition:\n\t\t\t\t\t\t\tprops.panelColumns &&\n\t\t\t\t\t\t\t(`${props.panelColumns}` === \"1\" ||\n\t\t\t\t\t\t\t\t`${props.panelColumns}` === `${dragAttrs.colSpan}`) &&\n\t\t\t\t\t\t\tprops.tabId === undefined\n\t\t\t\t\t\t\t\t? \"top\"\n\t\t\t\t\t\t\t\t: \"default\",\n\t\t\t\t\t\tattrs: hoverAttrs,\n\t\t\t\t\t\t_type: props._type,\n\t\t\t\t\t});\n\t\t\t\t} else {\n\t\t\t\t\tprops.state.hoverWidget && props.onHover(null);\n\t\t\t\t}\n\t\t\t} catch (e) {\n\t\t\t\tconsole.log(\"error\", e);\n\t\t\t}\n\t\t}\n\t},\n};\n\nfunction Widget(props) {\n\tlet {\n\t\tid,\n\t\tisDragging,\n\t\tconnectDragSource,\n\t\tconnectDropTarget,\n\t\thighlighted,\n\t\thovered,\n\t\ttabId,\n\t\tclassName,\n\t\tcomponent: DefaultWidgetComponent,\n\t\tattrs,\n\t\tstate,\n\t\tupdate,\n\t\tonWidgetChange,\n\t\terrorList = {},\n\t\t...rest\n\t} = props;\n\tconst { dragWidget } = state;\n\tconst _widgets =\n\t\trest._type === \"customField\" ? state.customFieldWidgets : state.widgets;\n\t// special case for new element\n\t// hide/remove element from schema, if it drag outside form container(id=1)\n\tReact.useEffect(() => {\n\t\tid === -1 &&\n\t\t\tupdate((draft) => {\n\t\t\t\tdraft.hoverWidget && (draft.hoverWidget.visible = hovered);\n\t\t\t});\n\t}, [update, hovered, id, dragWidget]);\n\n\tlet registryField = Registry[attrs.type] || Registry.field;\n\n\tif(rest.isTab && !Registry[attrs.type]) {\n\t\tregistryField = Registry['panel'];\n\t}\n\n\tlet { component: WidgetComponent, props: componentProps = {} } =\n\t\tregistryField;\n\n\tif (DefaultWidgetComponent) {\n\t\tWidgetComponent = DefaultWidgetComponent;\n\t}\n\n\tlet isFormField = true;\n\tif (Object.values(IDS.createWidgets).indexOf(id) > -1) {\n\t\tisFormField = false;\n\t\tconnectDropTarget = (e) => e;\n\t}\n\tconst isEdit = isFormField && state.editWidget === id;\n\tconst isTabWidget = tabId !== undefined;\n\tconst isTabWidgetContent = isTabWidget ? !rest.isTab : false;\n\tconst showRemove =\n\t\t(isFormField && Number(id) > 0 && !isTabWidgetContent && rest.design) && rest.canRemove !== false;\n\tif (\n\t\tisTabWidgetContent ||\n\t\t(id && id !== IDS.form && typeof id !== \"symbol\" && !attrs.isDummy)\n\t) {\n\t\tconnectDropTarget = (e) => e;\n\t}\n\tif (attrs.isExist === false || (!rest.design && IDS.dumpField)) return null;\n\treturn (\n\t\t<React.Fragment>\n\t\t\t{connectDragSource(\n\t\t\t\tconnectDropTarget(\n\t\t\t\t\t<div\n\t\t\t\t\t\t{...componentProps}\n\t\t\t\t\t\tclassName={classNames(\n\t\t\t\t\t\t\tclassName,\n\t\t\t\t\t\t\t\"widget\",\n\t\t\t\t\t\t\tcomponentProps.className,\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\"dummy-widget\": attrs.isDummy,\n\t\t\t\t\t\t\t\tedit: isEdit,\n\t\t\t\t\t\t\t\thighlighted: highlighted,\n\t\t\t\t\t\t\t\thovered: hovered,\n\t\t\t\t\t\t\t\tactive: isFormField && isDragging,\n\t\t\t\t\t\t\t\t\"form-field\": isFormField,\n\t\t\t\t\t\t\t\t\"panel-field\": attrs.type === \"panel\",\n\t\t\t\t\t\t\t\t\"non-title-panel\": attrs.type === \"panel\" && !rest.isTab && !attrs.title,\n\t\t\t\t\t\t\t\t\"dummy-field\": attrs.serverType === \"field\",\n\t\t\t\t\t\t\t\t\"error-field\": Boolean(errorList[id]),\n\t\t\t\t\t\t\t\t\"pallete-field\": rest.isPalleteField,\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t)}\n\t\t\t\t\t\t_type={rest._type}\n\t\t\t\t\t\tonClick={(e) => {\n\t\t\t\t\t\t\tif (isFormField && rest.onSelect) {\n\t\t\t\t\t\t\t\te.stopPropagation();\n\t\t\t\t\t\t\t\tid !== IDS.dumpField && rest.onSelect(id, rest._type);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tif (isTabWidget) {\n\t\t\t\t\t\t\t\te.stopPropagation();\n\t\t\t\t\t\t\t\tif (id !== IDS.dumpField && _widgets[tabId]) {\n\t\t\t\t\t\t\t\t\tonWidgetChange(tabId, {\n\t\t\t\t\t\t\t\t\t\tcurrent: id,\n\t\t\t\t\t\t\t\t\t\t_type: rest._type,\n\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}}\n\t\t\t\t\t>\n\t\t\t\t\t\t{!isTabWidgetContent &&\n\t\t\t\t\t\t\tstate.hoverWidget &&\n\t\t\t\t\t\t\ttypeof id !== \"symbol\" &&\n\t\t\t\t\t\t\tNumber(id) >= 0 &&\n\t\t\t\t\t\t\tstate.hoverWidget.index === rest.index &&\n\t\t\t\t\t\t\tstate.hoverWidget.visible !== false &&\n\t\t\t\t\t\t\tstate.hoverWidget.panelId === rest.panelId && (\n\t\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\t\tclassName={classNames(\n\t\t\t\t\t\t\t\t\t\t\"hover-liner\",\n\t\t\t\t\t\t\t\t\t\t{ \"dummy-widget\": attrs.isDummy || id === 0 },\n\t\t\t\t\t\t\t\t\t\tstate.hoverWidget.position\n\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t{WidgetComponent && (\n\t\t\t\t\t\t\t<WidgetComponent\n\t\t\t\t\t\t\t\tid={id}\n\t\t\t\t\t\t\t\tisDragging={state.dragWidget === id}\n\t\t\t\t\t\t\t\tattrs={attrs}\n\t\t\t\t\t\t\t\t_type={rest._type}\n\t\t\t\t\t\t\t\terrorList={errorList}\n\t\t\t\t\t\t\t\tcanRemove={rest.canRemove}\n\t\t\t\t\t\t\t\tdraggable={attrs.type !== WIDGET_TYPE.menubar}\n\t\t\t\t\t\t\t\t{...rest}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t)}\n\t\t\t\t\t\t{showRemove && !state.dragWidget && (\n\t\t\t\t\t\t\t<span\n\t\t\t\t\t\t\t\tonClick={(e) => {\n\t\t\t\t\t\t\t\t\tif (rest.onRemove) {\n\t\t\t\t\t\t\t\t\t\te.stopPropagation();\n\t\t\t\t\t\t\t\t\t\trest.onRemove(rest.panelId, rest.index, id, rest._type);\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\tclassName=\"widget-remove\"\n\t\t\t\t\t\t\t\ttitle=\"Remove Widget\"\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<i className=\"fa fa-remove\" />\n\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t)}\n\t\t\t\t\t</div>\n\t\t\t\t)\n\t\t\t)}\n\t\t</React.Fragment>\n\t);\n}\n\nconst SimpleWidget = (props) => (\n\t<Widget\n\t\t{...props}\n\t\tconnectDropTarget={(e) => e}\n\t\tconnectDragSource={(e) => e}\n\t/>\n);\n\nconst DraggableWidget = compose(\n\tDropTarget(TYPE, CardTarget, (connect, monitor) => ({\n\t\thighlighted: false,\n\t\thovered: monitor.isOver(),\n\t\tconnectDropTarget: connect.dropTarget(),\n\t})),\n\tDragSource(TYPE, CardSource, (connect, monitor) => ({\n\t\tconnectDragSource: connect.dragSource(),\n\t\tisDragging: monitor.isDragging(),\n\t}))\n)(Widget);\n\nexport const WidgetComponent = (props) => {\n\tconst store = useStore();\n\tconst { state } = store;\n\tconst _widgets =\n\t\tprops._type === \"customField\" ? state.customFieldWidgets : state.widgets;\n\tconst attrs =\n\t\t_widgets && _widgets[props.id] ? _widgets[props.id] : props.attrs || {};\n\tconst _props = { ...store, attrs };\n\tconst draggable = attrs.type !== WIDGET_TYPE.menubar;\n\n\tif (props.design || draggable) return <DraggableWidget {..._props} {...props} />;\n\treturn <SimpleWidget {..._props} {...props} />;\n};\n\nexport default React.memo(WidgetComponent);\n","import {getExtendJson2, getWidgetObject} from './extensionGenerator';\nimport {MODEL_TYPE} from './../constants';\nimport Utils from './../utils';\n\nfunction setAttributeOnNewWidget(items, widget, widgetId, state) {\n\tconst widgets = state.widgets;\n\tlet inserted = false;\n\tconst getWidgetName = () => widgets[widgetId] && widgets[widgetId].name;\n\tfor(let i = 0; i < items.length; i++) {\n\t\tconst item = items[i];\n\t\tif(item.name === getWidgetName()) {\n\t\t\titem[widget.attributes.name] = widget.attributes.value;\n\t\t\tinserted = true;\n\t\t}\n\t\tif(inserted) {\n\t\t\tbreak;\n\t\t}\n\t\tif(item.items && item.items.length) {\n\t\t\tconst _inserted = setAttributeOnNewWidget(item.items, widget, widgetId, state);\n\t\t\tif(_inserted) {\n\t\t\t\tinserted = _inserted;\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t}\n\treturn inserted;\n}\n\nexport function generateExtension(list, state) {\n\tconst cleatVirtualAction = () => {\n\t\tconst exemptedAttributes = ['widgetAttrs', 'items', 'current', 'elements', 'tz', 'targetModel', '_type'];\n\t\t[...list].forEach((item, i) => {\n\t\t\tif(item.name === 'insert') {\n\t\t\t\tconst id = item.id;\n\t\t\t\tconst removeIndex = list.findIndex(item => item.name === 'replace' && item.id === id && !item.target);\n\t\t\t\tconst insertIndex = list.findIndex(item => item.id === id && item.name === 'insert');\n\t\t\t\tif(removeIndex !== -1) {\n\t\t\t\t\tlist.splice(removeIndex, 1);\n\t\t\t\t\tlist.splice(insertIndex, 1);\n\t\t\t\t}\n\t\t\t}\n\t\t\tif(item.name === 'attribute') {\n\t\t\t\tconst id = item.id;\n\t\t\t\t// set blank values for default value\n\t\t\t\tif(item.attributes && Utils.isDefaultValue(item.attributes.name, item.attributes.value)) {\n\t\t\t\t\tconst attrIndex = list.findIndex(e => e.id === id && e.name === 'attribute' && e.attributes.name === item.attributes.name);\n\t\t\t\t\tlist.splice(attrIndex, 1, {...list[attrIndex], attributes: {...list[attrIndex].attributes, value: item.attributes.value}})\n\t\t\t\t}\n\t\t\t\tif(item.attributes && exemptedAttributes.includes(item.attributes.name)) {\n\t\t\t\t\tconst attrIndex = list.findIndex(item => item.id === id && item.name === 'attribute' && exemptedAttributes.includes(item.attributes.name));\n\t\t\t\t\tlist.splice(attrIndex, 1);\n\t\t\t\t} else {\n\t\t\t\t\tlet processed = false;\n\t\t\t\t\tconst getWidgetName = () => state.widgets[id] && state.widgets[id].name;\n\t\t\t\t\tfor(let k = 0; k < state.extensionMoves.length; k++) {\n\t\t\t\t\t\tconst move = state.extensionMoves[k];\n\t\t\t\t\t\tif(move.name === 'insert') {\n\t\t\t\t\t\t\tconst {elements} = move;\n\t\t\t\t\t\t\tfor(let j = 0; j < elements.length; j++) {\n\t\t\t\t\t\t\t\tconst element = elements[j];\n\t\t\t\t\t\t\t\tif(element.name === getWidgetName()) {\n\t\t\t\t\t\t\t\t\tstate.extensionMoves[k].elements[j][item.attributes.name] = item.attributes.value;\n\t\t\t\t\t\t\t\t\tprocessed = true;\n\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tif(element.items && element.items.length) {\n\t\t\t\t\t\t\t\t\tlet inserted = setAttributeOnNewWidget(element.items, item, id, state);\n\t\t\t\t\t\t\t\t\tif(inserted) {\n\t\t\t\t\t\t\t\t\t\tprocessed = true;\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif(processed) {\n\t\t\t\t\t\t\tconst attrIndex = list.findIndex(item => item.id === id && item.name === 'attribute');\n\t\t\t\t\t\t\tlist.splice(attrIndex, 1);\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t})\n\t}\n\tcleatVirtualAction();\n\tstate.extensionMoves.push(...list);\n}\n\nconst generateNestedView = (items) => {\n\tconst _items = items.map(item => {\n\t\tlet _subItems = [];\n\t\tif(item.items) {\n\t\t\t_subItems = generateNestedView(item.items);\n\t\t}\n\t\treturn getWidgetObject({...item, elements: _subItems}, [], null, MODEL_TYPE.BASE)\n\t});\n\n\treturn _items;\n}\n\nexport function getXML(extensionMoves, state) {\n\tconst patches = extensionMoves.map(move => {\n\t\tlet fields;\n\t\tif(move.name === 'insert') {\n\t\t\tfields = move.elements.map(field => {\n\t\t\t\tif(field && field.items && field.items.length) {\n\t\t\t\t\tconst f = {...field};\n\t\t\t\t\tf.elements = generateNestedView(field.items);\n\t\t\t\t\treturn f;\n\t\t\t\t}\n\t\t\t\treturn field\n\t\t\t}).filter(e => e);\n\t\t}\n\t\tif(!move.target) {\n\t\t\treturn undefined;\n\t\t}\n\t\treturn getExtendJson2({\n\t\t\ttarget: move.target,\n\t\t\tposition: move.position,\n\t\t\tsource: move.source,\n\t\t\ttype: move.name,\n\t\t\twidgetAttrs: fields,\n\t\t\t...move.attributes,\n\t\t});\n\t}).filter(e => e);\n\treturn patches;\n}\n\nfunction insertOnNewPanel(items, widget, panelId, state) {\n\tconst widgets = state.widgets;\n\tlet inserted = false;\n\tconst getPanelName = () => widgets[panelId].name;\n\tfor(let i = 0; i < items.length; i++) {\n\t\tconst item = items[i];\n\t\tif(item.name === getPanelName()) {\n\t\t\tif(item.items) {\n\t\t\t\titem.items.push(widget);\n\t\t\t} else {\n\t\t\t\titem.items = [widget];\n\t\t\t}\n\t\t\tinserted = true;\n\t\t}\n\t\tif(inserted) {\n\t\t\tbreak;\n\t\t}\n\t\tif(item.items && item.items.length) {\n\t\t\tconst _inserted = insertOnNewPanel(item.items, widget, panelId, state);\n\t\t\tif(_inserted) {\n\t\t\t\tinserted = _inserted;\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t}\n\treturn inserted;\n}\n\nexport function processMoves(state, widget, id, panelId) {\n\tconst list = [];\n\tlet processed = false;\n\tconst widgets = state.widgets;\n\tconst getPanelName = () => widgets[panelId].name;\n\tfor(let i = 0; i < state.extensionMoves.length; i++) {\n\t\tconst move = state.extensionMoves[i];\n\t\tif(move.name === 'insert') {\n\t\t\tconst {elements} = move;\n\t\t\tfor(let j = 0; j < elements.length; j++) {\n\t\t\t\tconst element = elements[j];\n\t\t\t\tif(element.name === getPanelName() && element.items && element.items.length === 0) {\n\t\t\t\t\tstate.extensionMoves[i].elements[j].items.push(widget);\n\t\t\t\t\tprocessed = true;\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t\tif(element.items && element.items.length) {\n\t\t\t\t\tlet inserted = insertOnNewPanel(element.items, widget, panelId, state);\n\t\t\t\t\tif(inserted) {\n\t\t\t\t\t\tprocessed = true;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tif(processed) {\n\t\t\tbreak;\n\t\t}\n\t}\n\tif(processed) {\n\t\tif(widget.xPath) {\n\t\t\tlist.push({name: 'replace', target: widget.xPath});\n\t\t}\n\t}\n\treturn list;\n}\n","import properties from './../Properties/list';\nimport {MODEL_TYPE, TYPE} from './../constants';\n\nexport function validate(field, modelType, isCustomField = false) {\n\tconst errors = {};\n\tlet selectedType = field.serverType === \"field\" ? field.type : field.serverType || field.type;\n\tselectedType = selectedType && selectedType.toLowerCase().replace(/_/g, \"-\");\n\tlet property = properties.find((option) => option.type === selectedType);\n\tif (selectedType === \"form\") {\n\t\tif (modelType === MODEL_TYPE.CUSTOM) {\n\t\t\tproperty = properties.find((option) => option.type === \"modelForm\");\n\t\t} else if (modelType === MODEL_TYPE.ENTITY) {\n\t\t\tproperty = properties.find((option) => option.type === \"entityForm\");\n\t\t}\n\t}\n\tif(!isCustomField && modelType === MODEL_TYPE.BASE && [TYPE.panel, TYPE.panelStack, TYPE.tabs, TYPE.menu, TYPE.menubar, TYPE.toolbar].includes(selectedType)) {\n\t\tif(field.items && field.items.length === 0) {\n\t\t\tconst message = selectedType === TYPE.menu ? 'Atleast one menu item required' : 'Atleast one children required';\n\t\t\terrors['items'] = message;\n\t\t}\n\t}\n\tif(!property) {\n\t\treturn errors;\n\t}\n\tconst propertyList = Object.keys(property.value).reduce((lst = [], key) => {\n\t\treturn [...lst, ...property.value[key]]\n\t},[]);\n\tpropertyList.forEach(property => {\n\t\tif(\n\t\t\t(property.requiredFor &&\n\t\t\tproperty.requiredFor.includes(selectedType) &&\n\t\t\t!field[property.name]) || (property.required && !field[property.name])\n\t\t) {\n\t\t\terrors[property.name] = `${property.name} required`;\n\t\t}\n\t\tif(isCustomField && property.regex) {\n\t\t\tconst re = new RegExp(property.regex);\n\t\t\tif(!re.test(field[property.name]) && !errors[property.name]) {\n\t\t\t\terrors[property.name] = property.regexErrorMessage;\n\t\t\t}\n\t\t}\n\t});\n\treturn errors;\n}\n\nexport function validateParentPanelItems(state, panelId) {\n\tconst panel = state.widgets[panelId];\n\tconst errors = state.errorList[panelId] || {};\n\tif(panel) {\n\t\tif(panel.items && panel.items.length > 0) {\n\t\t\tif(errors.items) {\n\t\t\t\tdelete errors.items;\n\t\t\t}\n\t\t} else {\n\t\t\terrors.items = 'Atleast one children required';\n\t\t}\n\t\tif(Object.keys(errors).length) {\n\t\t\tstate.errorList[panelId] = errors;\n\t\t} else {\n\t\t\tdelete state.errorList[panelId];\n\t\t}\n\t}\n}\n\nexport function validateOnRemove(state, id) {\n\tconst errors = state.errorList[id];\n\tif(errors) {\n\t\tdelete state.errorList[id];\n\t}\n}\n","import {\n\tTYPE,\n\tIDS,\n\tMODEL_TYPE,\n\tItemTypes,\n\tentityFieldTypes as entityTypes,\n} from \"./constants\";\n\nexport const fieldTypes = [\n\t{\n\t\tname: \"Common\",\n\t\tvalue: [\n\t\t\t{\n\t\t\t\tname: \"label\",\n\t\t\t\ttitle: \"label\",\n\t\t\t\ttype: \"label\",\n\t\t\t\timage: \"label.png\",\n\t\t\t\tid: IDS.createWidgets.field,\n\t\t\t\tserverType: \"label\",\n\t\t\t\tcolSpan: 6,\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: \"button\",\n\t\t\t\ttype: \"button\",\n\t\t\t\ttitle: \"button\",\n\t\t\t\timage: \"button.png\",\n\t\t\t\tid: IDS.createWidgets.field,\n\t\t\t\tserverType: \"button\",\n\t\t\t\tcolSpan: 6,\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: \"separator\",\n\t\t\t\ttype: \"separator\",\n\t\t\t\timage: \"seperator.png\",\n\t\t\t\tid: IDS.createWidgets.field,\n\t\t\t\tserverType: \"separator\",\n\t\t\t\tcolSpan: 6,\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: \"spacer\",\n\t\t\t\ttype: \"spacer\",\n\t\t\t\tserverType: \"spacer\",\n\t\t\t\timage: \"line_spacing.png\",\n\t\t\t\tid: IDS.createWidgets.field,\n\t\t\t\tcolSpan: 6,\n\t\t\t},\n      {\n\t\t\t\tname: \"selection\",\n\t\t\t\ttitle: \"Selection\",\n\t\t\t\ttype: ItemTypes.ITEM,\n\t\t\t\timage: \"integer.png\",\n\t\t\t\tid: IDS.createWidgets.field,\n\t\t\t\tserverType: \"string\",\n\t\t\t\tisSelectionField: true,\n\t\t\t\tcolSpan: 6,\n\t\t\t},\n\t\t],\n\t},\n\t{\n\t\tname: \"Panels\",\n\t\tvalue: [\n\t\t\t{\n\t\t\t\tname: \"panel\",\n\t\t\t\ttype: ItemTypes.CONTAINER,\n\t\t\t\titems: [],\n\t\t\t\ttitle: \"Panel\",\n\t\t\t\timage: \"panel.png\",\n\t\t\t\tid: IDS.createWidgets.panel,\n\t\t\t\tserverType: TYPE.panel,\n\t\t\t\tcols: 12,\n\t\t\t\tlayout: \"grid\",\n\t\t\t\tcolSpan: 12,\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: \"Tabs\",\n\t\t\t\ttype: TYPE.tabs,\n\t\t\t\timage: \"panel_tabs.png\",\n\t\t\t\ttab: true,\n\t\t\t\titems: [],\n\t\t\t\tid: IDS.createWidgets.tabs,\n\t\t\t\tserverType: TYPE.panel,\n\t\t\t\tisNew: true,\n\t\t\t\tcolSpan: 12,\n\t\t\t\ttitle: \"Tabs\",\n\t\t\t\tcurrent: null,\n\t\t\t\tlayout: \"grid\",\n\t\t\t},\n\t\t],\n\t},\n];\n\nexport const modelFields = [\n\t{\n\t\tname: \"Fields\",\n\t\tvalue: [\n\t\t\t{\n\t\t\t\tname: \"string\",\n\t\t\t\ttype: ItemTypes.ITEM,\n\t\t\t\ttitle: \"String\",\n\t\t\t\timage: \"string.png\",\n\t\t\t\tid: IDS.createWidgets.field,\n\t\t\t\tisModelField: true,\n\t\t\t\tserverType: \"string\",\n\t\t\t\tcolSpan: 6,\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: \"integer\",\n\t\t\t\ttype: ItemTypes.ITEM,\n\t\t\t\ttitle: \"Integer\",\n\t\t\t\timage: \"integer.png\",\n\t\t\t\tid: IDS.createWidgets.field,\n\t\t\t\tisModelField: true,\n\t\t\t\tserverType: \"integer\",\n\t\t\t\tcolSpan: 6,\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: \"decimal\",\n\t\t\t\ttype: ItemTypes.ITEM,\n\t\t\t\ttitle: \"Decimal\",\n\t\t\t\timage: \"decimal.png\",\n\t\t\t\tid: IDS.createWidgets.field,\n\t\t\t\tisModelField: true,\n\t\t\t\tserverType: \"decimal\",\n\t\t\t\tcolSpan: 6,\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: \"boolean\",\n\t\t\t\ttype: ItemTypes.ITEM,\n\t\t\t\ttitle: \"Boolean\",\n\t\t\t\timage: \"boolean.png\",\n\t\t\t\tid: IDS.createWidgets.field,\n\t\t\t\tisModelField: true,\n\t\t\t\tserverType: \"boolean\",\n\t\t\t\tcolSpan: 6,\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: \"datetime\",\n\t\t\t\ttype: ItemTypes.ITEM,\n\t\t\t\ttitle: \"Date Time\",\n\t\t\t\timage: \"datetime.png\",\n\t\t\t\tid: IDS.createWidgets.field,\n\t\t\t\tisModelField: true,\n\t\t\t\tserverType: \"datetime\",\n\t\t\t\tcolSpan: 6,\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: \"date\",\n\t\t\t\ttype: ItemTypes.ITEM,\n\t\t\t\ttitle: \"Date\",\n\t\t\t\timage: \"date.png\",\n\t\t\t\tid: IDS.createWidgets.field,\n\t\t\t\tisModelField: true,\n\t\t\t\tserverType: \"date\",\n\t\t\t\tcolSpan: 6,\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: \"time\",\n\t\t\t\ttype: ItemTypes.ITEM,\n\t\t\t\ttitle: \"Time\",\n\t\t\t\timage: \"time.png\",\n\t\t\t\tid: IDS.createWidgets.field,\n\t\t\t\tisModelField: true,\n\t\t\t\tserverType: \"time\",\n\t\t\t\tcolSpan: 6,\n\t\t\t},\n\t\t],\n\t},\n\t{\n\t\tname: \"Relational Fields\",\n\t\tvalue: [\n\t\t\t{\n\t\t\t\tname: \"manyToOne\",\n\t\t\t\ttype: ItemTypes.ITEM,\n\t\t\t\ttitle: \"Many to one\",\n\t\t\t\timage: \"many-to-one.png\",\n\t\t\t\tid: IDS.createWidgets.field,\n\t\t\t\tisModelField: true,\n\t\t\t\tserverType: \"many-to-one\",\n\t\t\t\tcolSpan: 6,\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: \"oneToMany\",\n\t\t\t\ttype: ItemTypes.ITEM,\n\t\t\t\ttitle: \"One to many\",\n\t\t\t\timage: \"one-to-many.png\",\n\t\t\t\tid: IDS.createWidgets.field,\n\t\t\t\tisModelField: true,\n\t\t\t\tserverType: \"one-to-many\",\n\t\t\t\tcolSpan: 6,\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: \"manyToMany\",\n\t\t\t\ttype: ItemTypes.ITEM,\n\t\t\t\ttitle: \"Many to many\",\n\t\t\t\timage: \"many-to-many.png\",\n\t\t\t\tid: IDS.createWidgets.field,\n\t\t\t\tisModelField: true,\n\t\t\t\tserverType: \"many-to-many\",\n\t\t\t\tcolSpan: 6,\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: \"oneToOne\",\n\t\t\t\ttype: ItemTypes.ITEM,\n\t\t\t\ttitle: \"One to one\",\n\t\t\t\timage: \"one-to-one.png\",\n\t\t\t\tid: IDS.createWidgets.field,\n\t\t\t\tisModelField: true,\n\t\t\t\tserverType: \"one-to-one\",\n\t\t\t\tcolSpan: 6,\n\t\t\t\teditorType: [MODEL_TYPE.BASE, MODEL_TYPE.ENTITY],\n\t\t\t},\n\t\t],\n\t},\n];\n\nexport const entityFields = [\n\t{\n\t\tname: \"Fields\",\n\t\tvalue: [\n\t\t\t{\n\t\t\t\tname: \"string\",\n\t\t\t\ttype: entityTypes.string,\n\t\t\t\timage: \"string.png\",\n\t\t\t\tid: IDS.createWidgets.field,\n\t\t\t\tcolSpan: 12,\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: \"boolean\",\n\t\t\t\ttype: entityTypes.boolean,\n\t\t\t\timage: \"boolean.png\",\n\t\t\t\tid: IDS.createWidgets.field,\n\t\t\t\tcolSpan: 12,\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: \"long\",\n\t\t\t\ttype: entityTypes.long,\n\t\t\t\timage: \"long.png\",\n\t\t\t\tid: IDS.createWidgets.field,\n\t\t\t\tcolSpan: 12,\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: \"integer\",\n\t\t\t\ttype: entityTypes.integer,\n\t\t\t\timage: \"integer.png\",\n\t\t\t\tid: IDS.createWidgets.field,\n\t\t\t\tcolSpan: 12,\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: \"decimal\",\n\t\t\t\ttype: entityTypes.decimal,\n\t\t\t\timage: \"decimal.png\",\n\t\t\t\tid: IDS.createWidgets.field,\n\t\t\t\tcolSpan: 12,\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: \"date\",\n\t\t\t\ttype: entityTypes.date,\n\t\t\t\timage: \"date.png\",\n\t\t\t\tid: IDS.createWidgets.field,\n\t\t\t\tcolSpan: 12,\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: \"time\",\n\t\t\t\ttype: entityTypes.time,\n\t\t\t\timage: \"time.png\",\n\t\t\t\tid: IDS.createWidgets.field,\n\t\t\t\tcolSpan: 12,\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: \"datetime\",\n\t\t\t\ttype: entityTypes.datetime,\n\t\t\t\timage: \"datetime.png\",\n\t\t\t\tid: IDS.createWidgets.field,\n\t\t\t\tcolSpan: 12,\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: \"binary\",\n\t\t\t\ttype: entityTypes.binary,\n\t\t\t\timage: \"binary.png\",\n\t\t\t\tid: IDS.createWidgets.field,\n\t\t\t\tcolSpan: 12,\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: \"manyToOne\",\n\t\t\t\ttype: entityTypes.manyToOne,\n\t\t\t\timage: \"many-to-one.png\",\n\t\t\t\tid: IDS.createWidgets.field,\n\t\t\t\tcolSpan: 12,\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: \"manyToMany\",\n\t\t\t\ttype: entityTypes.manyToMany,\n\t\t\t\timage: \"many-to-many.png\",\n\t\t\t\tid: IDS.createWidgets.field,\n\t\t\t\tcolSpan: 12,\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: \"oneToMany\",\n\t\t\t\ttype: entityTypes.oneToMany,\n\t\t\t\timage: \"one-to-many.png\",\n\t\t\t\tid: IDS.createWidgets.field,\n\t\t\t\tcolSpan: 12,\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: \"oneToOne\",\n\t\t\t\ttype: entityTypes.oneToOne,\n\t\t\t\timage: \"one-to-one.png\",\n\t\t\t\tid: IDS.createWidgets.field,\n\t\t\t\tcolSpan: 12,\n\t\t\t},\n\t\t],\n\t},\n];\n","import Utils from \"./../utils\";\nimport { MODEL_TYPE, TYPE } from \"./../constants\";\n\nconst exemptedAttrs = [\n\t\"items\",\n\t\"cols\",\n\t\"serverType\",\n\t\"version\",\n\t\"type\",\n\t\"widgetAttrs\",\n\t\"current\",\n\t\"selectionList\",\n\t\"autoTitle\",\n\t\"isModelField\",\n\t\"elements\",\n\t\"relationship\",\n\t\"isDummy\",\n\t\"metaModel\",\n\t\"targetSearch\",\n\t\"layout\",\n\t\"massUpdate\",\n\t\"xPath\",\n\t\"tz\",\n];\n\nexport function getExtensionAttribute(patchList, target, keyName) {\n\tlet extend;\n\tfor(let i = 0; i < patchList.length; i++) {\n\t\tconst {elements = [], attributes: patchAttributes} = patchList[i];\n\t\tconst element = elements[0];\n\t\tif(element.name === 'attribute' && patchAttributes.target === target) {\n\t\t\tconst attributes = element.attributes || {};\n\t\t\tif(attributes.name === keyName) {\n\t\t\t\textend = {...patchList[i]};\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t}\n\treturn extend;\n}\n\nfunction checkTarget(target, string, check) {\n\tconst splitTarget = Utils.exploreTarget(target);\n\tif(check) {\n\t\tconst newTarget = splitTarget[check];\n\t\tif(newTarget && newTarget === string) {\n\t\t\treturn true;\n\t\t}\n\t\treturn false;\n\t}\n\treturn target === string;\n}\n\nexport function isExtensionRemove(patchList, target, check) {\n\tlet flag = false;\n\tfor(let i = 0; i < patchList.length; i++) {\n\t\tconst {attributes, elements = []} = patchList[i];\n\t\tconst element = elements[0];\n\t\tif(element.name === 'replace' && attributes && checkTarget(attributes.target, target, check)) {\n\t\t\tflag = true;\n\t\t\tbreak;\n\t\t}\n\t}\n\treturn flag;\n}\n\nexport function isExtensionMove(patchList, widget, parentWidget) {\n\tlet flag = false;\n\tfor(let i = 0; i < patchList.length; i++) {\n\t\tconst {elements = []} = patchList[i];\n\t\tconst element = elements[0];\n\t\tlet sourceName = `/${Utils.getWidgetType(widget)}[@name='${\n\t\t\twidget.name\n\t\t}']`;\n\t\tif(parentWidget && parentWidget.name) {\n\t\t\tsourceName = `//${Utils.getWidgetType(parentWidget)}[@name='${parentWidget.name}']${sourceName}`;\n\t\t}\n\t\tif(element.name === 'move' && element.attributes && element.attributes.source === sourceName) {\n\t\t\t\tflag = true;\n\t\t\t\tbreak;\n\t\t}\n\t}\n\treturn flag;\n}\n\nfunction getWidgetAttrsObject(widget, modelType = MODEL_TYPE.BASE) {\n\treturn getWidgetObject(widget, [], null, modelType)\n}\n\nexport function getExtendJson2({\n\ttarget,\n\ttype,\n\tposition,\n\tsource,\n\tname,\n\tvalue,\n\twidgetAttrs,\n\titemSource,\n\t...rest\n}) {\n\tconst attributes = { target };\n\tlet elements = [];\n\tif (widgetAttrs && ![\"replace\", \"attribute\", \"move\"].includes(type)) {\n\t\tif (Array.isArray(widgetAttrs)) {\n\t\t\telements = widgetAttrs\n\t\t\t\t.map((widget) => {\n\t\t\t\t\treturn getWidgetAttrsObject(widget);\n\t\t\t\t})\n\t\t\t\t.filter((e) => e);\n\t\t} else {\n\t\t\telements.push(getWidgetAttrsObject(widgetAttrs));\n\t\t}\n\t}\n\tif (elements.length || [\"replace\", \"attribute\", \"move\"].includes(type)) {\n\t\tconst object = {\n\t\t\tattributes,\n\t\t\ttype: \"element\",\n\t\t\tname: \"extend\",\n\t\t\telements: [\n\t\t\t\t{\n\t\t\t\t\ttype: \"element\",\n\t\t\t\t\tname: type,\n\t\t\t\t\tattributes: {\n\t\t\t\t\t\tposition,\n\t\t\t\t\t\tsource,\n\t\t\t\t\t\tname,\n\t\t\t\t\t\tvalue,\n\t\t\t\t\t},\n\t\t\t\t\telements,\n\t\t\t\t},\n\t\t\t],\n\t\t};\n\t\treturn JSON.parse(JSON.stringify(object));\n\t}\n\treturn;\n}\n\nexport function getWidgetObject(widget, other = [], view, modelType) {\n\tconst { id, image, elements = [], ...attributes } = widget;\n\tconst uiFields = [\n\t\t\"panel\",\n\t\t\"panel-related\",\n\t\t\"panel-dashlet\",\n\t\t\"panel-tabs\",\n\t\t\"panel-stack\",\n\t\t\"panel-include\",\n\t\t\"button\",\n\t\t\"label\",\n\t\t\"spacer\",\n\t\t\"separator\",\n\t\t\"menu\",\n\t\t\"item\",\n\t\t\"toolbar\",\n\t\t\"menubar\",\n\t\t\"divider\"\n\t];\n\tlet exempt = [...exemptedAttrs];\n\tlet field =\n\t\tmodelType === MODEL_TYPE.ENTITY\n\t\t\t? Utils.getEntityField(attributes.type)\n\t\t\t: uiFields.includes(attributes.type)\n\t\t\t? attributes.type\n\t\t\t: \"field\";\n\tfield = uiFields.includes(attributes.serverType)\n\t\t? attributes.serverType\n\t\t: field;\n\tfield = widget.tab ? 'panel-tabs' : field;\n\tif (modelType === MODEL_TYPE.ENTITY) {\n\t\texempt = [\"colSpan\"];\n\t}\n\tif (attributes.type === TYPE.panelInclude) {\n\t\texempt = [...exempt, \"title\", \"colSpan\"];\n\t}\n\tif (field === TYPE.tabs) {\n\t\texempt = [...exempt, \"tab\", \"title\"];\n\t}\n\tif (field === \"spacer\") {\n\t\texempt = [...exempt, \"title\", \"isDummy\"];\n\t}\n\tif (field === TYPE.panelInclude) {\n\t\texempt = [...exempt, \"module\", \"name\"];\n\t}\n\tif([TYPE.menu, TYPE.menuItem, TYPE.toolbar, TYPE.menubar].includes(field)) {\n\t\texempt = [...exempt, \"colSpan\"];\n\t}\n\tif([TYPE.toolbar, TYPE.menubar].includes(field)) {\n\t\texempt = [...exempt, \"colSpan\", \"name\", \"title\"];\n\t}\n\tif([TYPE.divider].includes(field)) {\n\t\texempt = [...exempt, \"colSpan\", \"title\"];\n\t}\n\tlet object = {};\n\tobject = {\n\t\tattributes: {\n\t\t\t...Utils.getWidgetAttrs(attributes, exempt, modelType),\n\t\t},\n\t\ttype: \"element\",\n\t\tname: field,\n\t\telements: [...other, ...elements],\n\t};\n\treturn object;\n}\n\nexport function generateView(widgets, items, modelType) {\n\tlet view = {};\n\tlet elements = [];\n\tif (items.length) {\n\t\titems.forEach((item) => {\n\t\t\tconst widget = widgets[item];\n\t\t\tlet subViews = [];\n\t\t\tif (widget) {\n\t\t\t\tif (widget.items && widget.items.length) {\n\t\t\t\t\tsubViews = generateView(widgets, widget.items, modelType);\n\t\t\t\t}\n\t\t\t\telements.push({\n\t\t\t\t\t...getWidgetObject(widget, subViews, view, modelType),\n\t\t\t\t});\n\t\t\t}\n\t\t});\n\t}\n\treturn elements;\n}\n","import _ from \"lodash\";\nimport {\n\tTYPE,\n\tFIELD_TYPE,\n\tPANEL_TYPE,\n\tGRID_SIZE,\n\tIDS,\n\tMODEL_TYPE,\n\tDEFAULT_VALUE,\n\tENTITY_TYPE,\n\ttypeReplacer as TYPE_REPLACER,\n} from \"./constants\";\nimport {modelFields} from './fields';\nimport convert from 'xml-js';\nimport {validate} from './store/validation';\nimport format from 'xml-beautifier';\nimport {eGeneratePath} from './store/xpathGenerator';\nimport {processMoves} from './store/computeXML';\n\n\nexport function camleCaseString(word) {\n\tlet string =\n\t\tword &&\n\t\tword.replace(/([A-Z])/g, \" $1\").replace(/^./, function (str) {\n\t\t\treturn str.toUpperCase();\n\t\t});\n\treturn string;\n}\n\nexport function translate(str) {\n\tif (window._t && typeof str === \"string\") {\n\t\treturn window._t(str);\n\t}\n\treturn str;\n}\n\nconst getSpacer = ({ widget, id, ...other }) => ({\n\tcolSpan: widget.colSpan || 1,\n\tserverType: FIELD_TYPE.spacer,\n\ttype: TYPE.field,\n\tisDummy: true,\n\tname: `spacer${id}`,\n\ttitle: \"Spacer\",\n\t...other,\n});\n\nconst isDummyWidget = (state, id, isCustomField = false) => {\n\tconst widgets = isCustomField ? state.customFieldWidgets : state.widgets;\n\treturn id === true || (widgets[id] && widgets[id].isDummy);\n};\n\nexport const getGrid = (\n\tstate,\n\t{ cols = 12, items },\n\ttrackElement,\n\tisCustomField = false\n) => {\n\tconst widgets = isCustomField ? state.customFieldWidgets : state.widgets;\n\tconst grid = [];\n\tlet ind = 0;\n\tlet span = 0;\n\tlet row = [];\n\n\tlet fillRow = (start) => {\n\t\tfor (let i = start; i < cols; i++) {\n\t\t\trow.push({ index: i, item: true, colSpan: 1, indices: [i] });\n\t\t}\n\t};\n\n\titems.forEach((item) => {\n\t\tlet colSpan = Number(widgets[item].colSpan || 1);\n\t\tspan += colSpan;\n\t\t//next row\n\t\tif (span > cols) {\n\t\t\tfillRow(ind);\n\t\t\tind = 0;\n\t\t\tspan = colSpan;\n\t\t\tgrid.push(row);\n\t\t\trow = [];\n\t\t}\n\t\ttrackElement &&\n\t\t\ttrackElement(item, {\n\t\t\t\tcolumn: ind,\n\t\t\t\trow: grid.length,\n\t\t\t});\n\t\trow.push({\n\t\t\tindex: ind,\n\t\t\titem,\n\t\t\tcolSpan,\n\t\t\tindices: new Array(colSpan).fill(0).map((x, i) => ind + i),\n\t\t});\n\t\tind += colSpan;\n\t});\n\n\tfillRow(ind);\n\tgrid.push(row);\n\treturn grid;\n};\n\nexport const checkGridEmptyCells = (state, panelId, modelFieldType) => {\n\tconst extendList = [];\n\tconst isCustomField = modelFieldType === \"customField\";\n\tconst widgets = isCustomField ? state.customFieldWidgets : state.widgets;\n\n\tconst panel = widgets[panelId];\n\tif (panel.layout !== PANEL_TYPE.grid) return {};\n\tconst { cols = 12, items } = panel;\n\tconst grid = getGrid(\n\t\tstate,\n\t\t{\n\t\t\tcols,\n\t\t\titems,\n\t\t},\n\t\tnull,\n\t\tisCustomField\n\t);\n\tlet removeIds = [];\n\tlet emptyColumns = {};\n\t\tgrid.forEach((row) => {\n\t\t\trow.forEach((cell, i) => {\n\t\t\t\tif (isDummyWidget(state, cell.item, isCustomField)) {\n\t\t\t\t\tlet target = emptyColumns[cell.index] || [];\n\t\t\t\t\ttarget.push(cell);\n\t\t\t\t\temptyColumns[cell.index] = target;\n\t\t\t\t}\n\t\t\t});\n\t\t\tif (row.every((cell) => isDummyWidget(state, cell.item, isCustomField))) {\n\t\t\t\tremoveIds = removeIds.concat(row.map((x) => x.item));\n\t\t\t}\n\t\t});\n\n\n\t// Object.values(emptyColumns)\n\t// \t.filter((arr) => arr.length === grid.length)\n\t// \t.forEach((row) => {\n\t// \t\tremoveIds = removeIds.concat(row.map((x) => x.item));\n\t// \t\t// panel.cols = Number(panel.cols || 12) - 1;\n\t// \t});\n\n\tif (removeIds.length) {\n\t\tpanel.items = panel.items.filter((x) => removeIds.indexOf(x) === -1);\n\t\tremoveIds.forEach((x) => {\n\t\t\tif(widgets[x]) {\n\t\t\t\tisExtensionView(state) && extendList.push({name: 'replace', target: widgets[x].xPath, id: x});\n\t\t\t\twidgets[x] && delete widgets[x]\n\t\t\t}\n\t\t});\n\t}\n\treturn {extendList};\n};\n\nexport const adjustGridSpan = (state, panelId, cell) => {\n\tconst panel = state.widgets[panelId];\n\tif ((panel && panel.layout) !== PANEL_TYPE.grid) return;\n\tconst { cols = 12, items } = panel;\n\tconst grid = getGrid(state, {\n\t\tcols,\n\t\titems,\n\t});\n\tfor (let i = 0; i < grid.length; i++) {\n\t\tconst row = grid[i];\n\t\t// find adjustive cell to determine its row\n\t\tconst startCellIndex = row.findIndex((x) => x.item === cell.id);\n\t\tif (startCellIndex > -1) {\n\t\t\t// find edit cell index inside panel\n\t\t\tconst idIndex = state.widgets[panelId].items.findIndex(\n\t\t\t\t(x) => `${x}` === `${cell.id}`\n\t\t\t);\n\t\t\t// how many cells to be stretch\n\t\t\tconst fillCellSpan =\n\t\t\t\tNumber(cell.span) - Number(row[startCellIndex].colSpan);\n\t\t\t// increase cell colSpan\n\t\t\tif (fillCellSpan > 0) {\n\t\t\t\tlet uptoCellIndex = row.length; // default upto last cell\n\t\t\t\t// check how many next dummy/virtual cells it can utilized\n\t\t\t\tlet _span = 0;\n\t\t\t\tfor (let j = startCellIndex + 1; j < row.length; j++) {\n\t\t\t\t\tconst cell = row[j];\n\t\t\t\t\t// item is virtual or dummy\n\t\t\t\t\tif (cell.item === true || state.widgets[cell.item].isDummy) {\n\t\t\t\t\t\t_span += cell.colSpan;\n\t\t\t\t\t} else {\n\t\t\t\t\t\t// if found any valid item\n\t\t\t\t\t\tuptoCellIndex = j;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t\t// only upto required free cells\n\t\t\t\t\tif (_span >= Math.abs(fillCellSpan)) {\n\t\t\t\t\t\tuptoCellIndex = j + 1;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\t// extract free cells if exists\n\t\t\t\tconst freeCells = row.slice(startCellIndex + 1, uptoCellIndex);\n\t\t\t\t// calc total free cell span area\n\t\t\t\tconst freeCellSpan = freeCells.reduce(\n\t\t\t\t\t(total, cell) => total + Number(cell.colSpan || 1),\n\t\t\t\t\t0\n\t\t\t\t);\n\t\t\t\tconst totalRowSpan = row.reduce((total, c) => {\n\t\t\t\t\ttotal += c.item === cell.id ? Number(cell.span) : c.colSpan;\n\t\t\t\t\treturn total;\n\t\t\t\t}, 0);\n\t\t\t\tif (totalRowSpan - freeCellSpan >= GRID_SIZE.max) {\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t\tconst diff = fillCellSpan - freeCellSpan;\n\t\t\t\tfreeCells.forEach(\n\t\t\t\t\t(x) => state.widgets[x.item] && delete state.widgets[x.item]\n\t\t\t\t);\n\t\t\t\tconst freeCellIds = freeCells\n\t\t\t\t\t.filter((x) => x.item !== true)\n\t\t\t\t\t.map((x) => x.item);\n\t\t\t\tstate.widgets[panelId].items = state.widgets[panelId].items.filter(\n\t\t\t\t\t(x) => !freeCellIds.includes(x)\n\t\t\t\t);\n\t\t\t\tstate.widgets[panelId].cols =\n\t\t\t\t\tNumber(state.widgets[panelId].cols) + diff;\n\t\t\t\tgrid.forEach((row) => {\n\t\t\t\t\tconst findCell = row.find(\n\t\t\t\t\t\t(x) => x.item !== true && (x.indices || []).includes(startCellIndex)\n\t\t\t\t\t);\n\t\t\t\t\tif (findCell && state.widgets[findCell.item]) {\n\t\t\t\t\t\tstate.widgets[findCell.item].colSpan =\n\t\t\t\t\t\t\tNumber(state.widgets[findCell.item].colSpan) + diff;\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\t// decrease cell colSpan\n\t\t\t} else if (fillCellSpan < 0) {\n\t\t\t\tconst diff = Math.abs(fillCellSpan);\n\t\t\t\tfor (let j = 0; j < diff; j++) {\n\t\t\t\t\tlet newId = _.uniqueId();\n\t\t\t\t\tstate.widgets[newId] = getSpacer({\n\t\t\t\t\t\twidget: { colSpan: 6 },\n\t\t\t\t\t\tid: newId,\n\t\t\t\t\t});\n\t\t\t\t\tstate.widgets[panelId].items.splice(idIndex + 1, 0, newId);\n\t\t\t\t}\n\t\t\t}\n\t\t\tstate.widgets[cell.id].colSpan = Number(cell.span);\n\t\t\tcheckGridEmptyCells(state, panelId);\n\t\t\tbreak;\n\t\t}\n\t}\n\treturn true;\n};\n\nexport const arrangeGrid = (state, { id, index, panelId }, widgetType) => {\n\tconst extendList = [];\n\tconst isCustomField = widgetType === \"customField\";\n\tconst widgets = isCustomField ? state.customFieldWidgets : state.widgets;\n\tconst panel = widgets[panelId];\n\tconst removeWidget = widgets[id] || { colSpan: 1 };\n\tconst { cols = 12, items } = panel;\n\tconst isLastItemRemove = panel.items[panel.items.length - 1] === id;\n\tlet removeItem = { column: null, row: null };\n\tlet ids = [];\n\tlet columnCells = [];\n\tlet rowCells = [];\n\n\tconst grid = getGrid(\n\t\tstate,\n\t\t{ cols, items },\n\t\t(item, meta) => {\n\t\t\tif (item === id) {\n\t\t\t\tremoveItem = meta;\n\t\t\t}\n\t\t},\n\t\tisCustomField\n\t);\n\n\tgrid.forEach((gridRow, i) => {\n\t\tif (removeItem.row === i) {\n\t\t\tcolumnCells = gridRow.map((x) => x.item);\n\t\t}\n\t\tconst findCol = gridRow.find((x) => x.index === removeItem.column);\n\t\tif (findCol) {\n\t\t\trowCells.push(findCol.item);\n\t\t}\n\t});\n\n\tconst deleteItem = panel.items.splice(index, 1);\n\tconst isDummyItem = ($id) =>\n\t\t$id === id || isDummyWidget(state, $id, isCustomField);\n\n\tif (columnCells.every(isDummyItem)) {\n\t\tpanel.items = panel.items.filter((x) => !columnCells.includes(x));\n\t\tids = ids.concat(columnCells);\n\t}\n\n\tif (grid.length - 1 === rowCells.length && rowCells.every(isDummyItem)) {\n\t\tpanel.items = panel.items.filter((x) => !rowCells.includes(x));\n\t\t// panel.cols = Number(panel.cols) - removeWidget.colSpan;\n\n\t\tids = ids.concat(rowCells);\n\t}\n\n\tif (ids.length === 0 && !widgets[deleteItem].isDummy && !isLastItemRemove) {\n\t\tlet newId = _.uniqueId();\n\t\tlet otherProps = {};\n\t\tif(state.modelType === MODEL_TYPE.CUSTOM) {\n\t\t\totherProps = {\n\t\t\t\tmodel: removeWidget.model,\n\t\t\t\tmodelField: removeWidget.modelField,\n\t\t\t};\n\t\t}\n\t\twidgets[newId] = getSpacer({\n\t\t\twidget: {},\n\t\t\tid: newId,\n\t\t\tcolSpan: removeWidget.colSpan,\n\t\t\t...otherProps,\n\t\t});\n\t\tconst targetWidget = widgets[panel.items[index]]\n\t\tisExtensionView(state) && extendList.push({name: 'insert', position: 'before', elements: [widgets[newId]], target: targetWidget.xPath})\n\t\tpanel.items.splice(index, 0, newId);\n\t}\n\treturn {ids: [...ids, id], extendList};\n};\n\nconst collectWidgets = ({ grid, items, widgetIndex, hoverCellRowIndex }) => {\n\tlet beforeWidgets = [];\n\tlet afterWidgets = [];\n\tlet flag = true;\n\tlet itemIndex = 0;\n\tif (grid.length) {\n\t\tgrid.forEach((cell, cellIndex) => {\n\t\t\tcell.colSpan = Number(cell.colSpan || 1);\n\t\t\t// once any valid id cell find, take its index as default value\n\t\t\tif (cell.id && flag && cellIndex < widgetIndex) {\n\t\t\t\titemIndex = items.indexOf(cell.id) + 1;\n\t\t\t}\n\t\t\t// consider hover row cells\n\t\t\tif (!cell.separator && cell.rowIndex <= hoverCellRowIndex) {\n\t\t\t\t// before hover widget\n\t\t\t\tif (cellIndex < widgetIndex) {\n\t\t\t\t\t// reset before row if you find valid cell with id\n\t\t\t\t\tif (cell.id) {\n\t\t\t\t\t\tbeforeWidgets = [];\n\t\t\t\t\t\titemIndex = items.indexOf(cell.id) + 1;\n\t\t\t\t\t} else if (items.length) {\n\t\t\t\t\t\tbeforeWidgets.push({\n\t\t\t\t\t\t\t...cell,\n\t\t\t\t\t\t\tcolSpan: cell.colSpan || 6,\n\t\t\t\t\t\t\tisSpacer: true,\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t\t// after hover widget\n\t\t\t\t} else if (flag && cellIndex > widgetIndex) {\n\t\t\t\t\tif (cell.id) {\n\t\t\t\t\t\titemIndex = items.indexOf(cell.id);\n\t\t\t\t\t\tflag = false;\n\t\t\t\t\t} else if (items.length) {\n\t\t\t\t\t\tafterWidgets.push({ ...cell, isSpacer: true });\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t\tif (items.length) {\n\t\t\t// find last item index\n\t\t\tconst lastItem = items[items.length - 1];\n\t\t\tconst lastItemIndex = grid.findIndex((x) => `${x.id}` === `${lastItem}`);\n\t\t\t// if drop at end of list then fill only one widget so empty after widgets\n\t\t\tif (widgetIndex > lastItemIndex && lastItemIndex !== -1) {\n\t\t\t\tafterWidgets = [];\n\t\t\t\titemIndex = items.length + 1;\n\t\t\t}\n\t\t}\n\t}\n\treturn { afterWidgets, beforeWidgets, itemIndex };\n};\n\nexport const setErrorList = (attrs, state, id, isCustomField) => {\n\tconst errors = validate(attrs, state.modelType, isCustomField);\n\tif(Object.keys(errors).length) {\n\t\tstate.errorList[id] = errors;\n\t} else if(state.errorList[id]) {\n\t\tdelete state.errorList[id];\n\t}\n}\n\n\nexport function isExtensionView(state) {\n\treturn state.exView && !isCreatedFromStudio(state.exView);\n}\n\n// reorder widgets based on dummy widgets\nexport const reorderGrid = ({ hoverWidget, dragWidgetProps }) => (state) => {\n\tconst extendList = [];\n\tconst isCustomField = hoverWidget._type === \"customField\";\n\tconst dragWidgetItems = hoverWidget._type === \"customField\" && !dragWidgetProps.panelId\n\t? \"customFieldItems\"\n\t: \"items\";\n\tconst _items =\n\t\thoverWidget._type === \"customField\" && !hoverWidget.panelId\n\t\t\t? \"customFieldItems\"\n\t\t\t: \"items\";\n\tconst _widgets =\n\t\thoverWidget._type === \"customField\"\n\t\t\t? state.customFieldWidgets\n\t\t\t: state.widgets;\n\tconst destinationItems = (\n\t\t(hoverWidget.panelId ? _widgets[hoverWidget.panelId] : state)[_items] || []\n\t).slice();\n\tconst {\n\t\tcolSpan,\n\t\tgrid = [],\n\t\trow: hoverCellRowIndex,\n\t\trelatedColSpan,\n\t} = hoverWidget.meta;\n\t// remove isNew attribute\n\tif (dragWidgetProps.attrs && dragWidgetProps.attrs.isNew !== undefined) {\n\t\tdelete dragWidgetProps.attrs.isNew;\n\t}\n\t// clone colSpan of hover widget\n\tconst parentPanel = _widgets[hoverWidget.panelId];\n\tconst hoverType = parentPanel?.serverType;\n\t// console.log(original(dragWidgetProps))\n\tif(dragWidgetProps.attrs && !dragWidgetProps.attrs.colSpan) {\n\t\tif (colSpan && dragWidgetProps.attrs && ![TYPE.menu, TYPE.menuItem, TYPE.divider].includes(dragWidgetProps.attrs.type) && ![TYPE.toolbar, TYPE.menubar].includes(hoverType)) {\n\t\t\tconst existingColspan = dragWidgetProps.attrs.colSpan;\n\t\t\t// set itemSpan if exists\n\t\t\tif(hoverType === TYPE.panel && Number(parentPanel.itemSpan)) {\n\t\t\t\tdragWidgetProps.attrs.colSpan = Number(parentPanel.itemSpan);\n\t\t\t} else {\n\t\t\t\tdragWidgetProps.attrs.colSpan = relatedColSpan || colSpan;\n\n\t\t\t}\n\t\t\tif(isCustomField) {\n\t\t\t\t// set colSpan in widgetAttrs for custom field\n\t\t\t\tconst widgetAttrs = {colSpan: relatedColSpan || colSpan};\n\t\t\t\tdragWidgetProps.attrs.widgetAttrs = JSON.stringify(widgetAttrs);\n\t\t\t}\n\t\t\tif(`${dragWidgetProps.attrs.colSpan}` !== `${existingColspan}`) {\n\t\t\t\tif(state.modelType === MODEL_TYPE.CUSTOM) {\n\t\t\t\t\t// change widgetAttrs for colSpan\n\t\t\t\t\tconst widgetAttrs = JSON.parse(dragWidgetProps.attrs.widgetAttrs || '{}');\n\t\t\t\t\twidgetAttrs.colSpan = relatedColSpan || colSpan;\n\t\t\t\t\tdragWidgetProps.attrs.widgetAttrs = JSON.stringify(widgetAttrs);\n\t\t\t\t}\n\t\t\t\tisExtensionView(state) && extendList.push({ name: 'attribute', target: dragWidgetProps.attrs.xPath, attributes: {name: 'colSpan', value: dragWidgetProps.attrs.colSpan} })\n\t\t\t}\n\t\t\tif(state.modelType === MODEL_TYPE.CUSTOM) {\n\t\t\t\tconst widgetAttrs = JSON.parse(dragWidgetProps.attrs.widgetAttrs || '{}');\n\t\t\t\twidgetAttrs.colSpan = 6;\n\t\t\t\tdragWidgetProps.attrs.widgetAttrs = JSON.stringify(widgetAttrs);\n\t\t\t}\n\t\t} else if(dragWidgetProps.attrs && state.modelType === MODEL_TYPE.CUSTOM) {\n\t\t\tconst widgetAttrs = JSON.parse(dragWidgetProps.attrs.widgetAttrs || '{}');\n\t\t\twidgetAttrs.colSpan = relatedColSpan || colSpan;\n\t\t\tdragWidgetProps.attrs.colSpan = relatedColSpan || colSpan;\n\t\t\tdragWidgetProps.attrs.widgetAttrs = JSON.stringify(widgetAttrs);\n\t\t}\n\t}\n\tconst newIds = [];\n\tlet widgetIndex = Number(hoverWidget.index);\n\tlet { beforeWidgets, afterWidgets, itemIndex = 0 } = collectWidgets({\n\t\tgrid,\n\t\titems: destinationItems,\n\t\twidgetIndex,\n\t\thoverCellRowIndex,\n\t});\n\n\tlet isRemovedFromSameList = false;\n\t// if drag widget is existing one then remove it from its panel\n\tif (dragWidgetProps.id && _widgets[dragWidgetProps.id]) {\n\t\tconst sourcePanel = dragWidgetProps.panelId\n\t\t\t? _widgets[dragWidgetProps.panelId]\n\t\t\t: state;\n\t\tconst sourceItems = sourcePanel[dragWidgetItems];\n\t\tconst sourceItemIndex = sourceItems.indexOf(dragWidgetProps.id);\n\t\tif ([PANEL_TYPE.grid].includes(sourcePanel.layout)) {\n\t\t\tlet newId = _.uniqueId();\n\t\t\tconst isLastItem =\n\t\t\t\tsourceItems[sourceItems.length - 1] === dragWidgetProps.id;\n\t\t\tlet isLastItemInSamePanel = false;\n\t\t\tif (dragWidgetProps.panelId === hoverWidget.panelId) {\n\t\t\t\tif (dragWidgetProps.index < hoverWidget.index) {\n\t\t\t\t\tisLastItemInSamePanel = true;\n\t\t\t\t}\n\t\t\t}\n\t\t\tconst hoverParent = dragWidgetProps.panelId ? _widgets[dragWidgetProps.panelId] : null;\n\t\t\tlet isPanelTab = false;\n\t\t\tif(hoverParent && [TYPE.tabs, TYPE.panelStack].includes(hoverParent.type)) {\n\t\t\t\tisPanelTab = true;\n\t\t\t}\n\t\t\tif ((isLastItem && !isLastItemInSamePanel) || isPanelTab || [TYPE.menubar, TYPE.toolbar].includes(hoverType)) {\n\t\t\t\tsourceItems.splice(sourceItemIndex, 1);\n\t\t\t} else {\n\t\t\t\tlet attrs = {\n\t\t\t\t\tcolSpan: _widgets[dragWidgetProps.id].colSpan || 1,\n\t\t\t\t\tserverType: FIELD_TYPE.spacer,\n\t\t\t\t\ttype: TYPE.field,\n\t\t\t\t\tisDummy: true,\n\t\t\t\t\tname: `spacer${newId}`,\n\t\t\t\t\ttitle: \"Spacer\",\n\t\t\t\t};\n\t\t\t\tif(state.modelType === MODEL_TYPE.CUSTOM) {\n\t\t\t\t\tattrs['model'] = dragWidgetProps.attrs.model;\n\t\t\t\t\tattrs['modelField'] = dragWidgetProps.attrs.modelField;\n\t\t\t\t\tattrs['widgetAttrs'] = JSON.stringify({colSpan: attrs.colSpan });\n\t\t\t\t}\n\t\t\t\tif(isCustomField) {\n\t\t\t\t\tattrs['widgetAttrs'] = JSON.stringify({colSpan: attrs.colSpan });\n\t\t\t\t}\n\t\t\t\t\t_widgets[newId] = Object.assign({}, attrs);\n\t\t\t\t\tisExtensionView(state) && extendList.push({ name: 'insert', position: 'before', target: dragWidgetProps.attrs.xPath, elements: [attrs], id: newId })\n\t\t\t\t\tsourceItems.splice(sourceItemIndex, 1, newId);\n\t\t\t}\n\t\t} else {\n\t\t\t// if same panel, drag widget is before hover widget\n\t\t\tif (dragWidgetProps.panelId === hoverWidget.panelId) {\n\t\t\t\tif (dragWidgetProps.index < hoverWidget.index) {\n\t\t\t\t\tisRemovedFromSameList = true;\n\t\t\t\t\titemIndex--;\n\t\t\t\t}\n\t\t\t}\n\t\t\tsourceItems.splice(sourceItemIndex, 1);\n\t\t}\n\t}\n\n\t// remove dummy widget if spacer created automatically\n\tif (hoverWidget.attrs.isDummy) {\n\t\tlet isNew =\n\t\t\t!dragWidgetProps.id ||\n\t\t\tObject.values(IDS.createWidgets).indexOf(dragWidgetProps.id) > -1;\n\t\tlet newId = isNew ? _.uniqueId() : dragWidgetProps.id;\n\t\tlet attrs = Object.assign({}, dragWidgetProps.attrs || {});\n\t\tif (isNew && attrs.isCoreField !== false && attrs.name) {\n\t\t\tattrs.name = `${attrs.name}${newId}`;\n\t\t}\n\t\tsetErrorList(attrs, state, newId, isCustomField);\n\t\tif (isNew) {\n\t\t\t_widgets[newId] = Object.assign({}, attrs);\n\t\t\tisExtensionView(state) && extendList.push({ name: 'insert', position: 'before', target: hoverWidget.attrs.xPath, elements: [attrs], id: newId })\n\t\t} else {\n\t\t\tisExtensionView(state) && extendList.push({ name: 'move', source: dragWidgetProps.attrs.xPath, position: 'before', target: hoverWidget.attrs.xPath })\n\t\t\t_widgets[dragWidgetProps.id] = Object.assign(\n\t\t\t\t{ ..._widgets[dragWidgetProps.id] },\n\t\t\t\tattrs\n\t\t\t);\n\t\t}\n\t\t(hoverWidget.panelId ? _widgets[hoverWidget.panelId] : state)[\n\t\t\t_items\n\t\t].splice(\n\t\t\tdestinationItems.indexOf(hoverWidget.id) -\n\t\t\t\t(isRemovedFromSameList ? 1 : 0),\n\t\t\t1,\n\t\t\tnewId\n\t\t);\n\t\tisExtensionView(state) && extendList.push({ name: 'replace', target: hoverWidget.attrs.xPath })\n\t\treturn {extendList};\n\t}\n\n\t// cell placement is horizontal special case for Tabs widget\n\tif (hoverWidget.meta && hoverWidget.meta.horizontal) {\n\t\tlet index = Number(hoverWidget.index);\n\t\tif (\n\t\t\tdragWidgetProps.panelId === hoverWidget.panelId &&\n\t\t\tdragWidgetProps.index < hoverWidget.index\n\t\t) {\n\t\t\tindex = index - 2;\n\t\t}\n\t\t// calculate item position\n\t\titemIndex = Math.ceil(Number(index / 2));\n\t}\n\n\t// remove all dummy cells for flow layout\n\tconst destinationPanel = hoverWidget.panelId\n\t\t? _widgets[hoverWidget.panelId]\n\t\t: state;\n\tif ((destinationPanel.layout || PANEL_TYPE.flow) === PANEL_TYPE.flow) {\n\t\tbeforeWidgets = [];\n\t\tafterWidgets = [];\n\t}\n\t// fill all widgets in panel\n\tconst newWidgetIds = [];\n\tconst hoverWidgetParentItems = (\n\t\t(hoverWidget.panelId ? _widgets[hoverWidget.panelId] : state)[_items] || []\n\t);\n\tlet hoverWidgetId = hoverWidgetParentItems[itemIndex];\n\tlet hoverPath;\n\tlet actualHoverWidget = _widgets[hoverWidgetParentItems[itemIndex]];\n\tlet position = 'before';\n\tif (!actualHoverWidget && hoverWidgetParentItems.length <= itemIndex) {\n\t\thoverWidgetId = hoverWidgetParentItems[hoverWidgetParentItems.length - 1];\n\t\tactualHoverWidget = _widgets[hoverWidgetParentItems[hoverWidgetParentItems.length - 1]];\n\t\tposition = 'after';\n\t}\n\t// check for sidebar widget\n\tif(actualHoverWidget && `${actualHoverWidget.sidebar}` === 'true') {\n\t\tdragWidgetProps.attrs.sidebar = 'true';\n\t\tisExtensionView(state) && extendList.push({ name: 'attribute', target: dragWidgetProps.attrs.xPath, attributes: {name: 'sidebar', value: 'true'} })\n\t}\n\tif(actualHoverWidget) {\n\t\thoverPath = actualHoverWidget.xPath || eGeneratePath(_widgets, state[_items],hoverWidgetId);\n\t}\n\tconst shouldInsertInParent = (dragWidget, hoverWidget) => {\n\t\tconst hoverPathInfo = exploreTarget(hoverWidget.xPath);\n\t\tconst list = state.extensionMoves.filter(m => {\n\t\t\tif(m.target) {\n\t\t\t\tconst targetInfo =\texploreTarget(m.target);\n\t\t\t\tif(m.name === 'replace') {\n\t\t\t\t\tif(hoverPathInfo.self) {\n\t\t\t\t\t\tif(targetInfo.parent.indexOf(hoverPathInfo.self) >= 0) {\n\t\t\t\t\t\t\treturn true;\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn false;\n\t\t\t\t\t} else if(targetInfo.parent.indexOf(hoverPathInfo.parent) >= 0) {\n\t\t\t\t\t\treturn true;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn false;\n\t\t});\n\t\tif(\n\t\t\t[TYPE.menu, FIELD_TYPE.button, TYPE.menuItem].includes(dragWidget.attrs.type) &&\n\t\t\t[TYPE.menubar, TYPE.toolbar, TYPE.menu].includes(hoverWidget.type)\n\t\t) {\n\t\t\t// hoverwidget should not have any child remove\n\t\t\tif(hoverWidget.items.length === 0 && !list.length) {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\t\treturn  false;\n\t}\n\tconst list = [];\n\tbeforeWidgets\n\t\t.concat([dragWidgetProps])\n\t\t.concat(afterWidgets)\n\t\t.forEach((widget) => {\n\t\t\tlet attrs = Object.assign({}, widget.attrs || {});\n\t\t\tlet newId = widget.id;\n\t\t\tconst isCreateWidget = typeof newId === \"symbol\";\n\t\t\tconst isNew = !newId || isCreateWidget;\n\t\t\tlet shouldAdd = true;\n\t\t\t// new drag widgets\n\t\t\tif([TYPE.menubar, TYPE.toolbar].includes(hoverType) && widget.isSpacer) {\n\t\t\t\tshouldAdd = false;\n\t\t\t}\n\t\t\tif(shouldAdd) {\n\n\t\t\t\tif (isNew) {\n\t\t\t\t\tnewId = _.uniqueId();\n\t\t\t\t\tif(attrs.isCoreField !== false) {\n\t\t\t\t\t\tif(attrs && Object.keys(attrs).length) {\n\t\t\t\t\t\t\tsetErrorList(attrs, state, newId, isCustomField);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif(attrs.name) {\n\t\t\t\t\t\t\tattrs.name = `${attrs.name}${newId}`;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\t// set new drag widget as edit widget\n\t\t\t\t\tif (isCreateWidget) {\n\t\t\t\t\t\tstate.editWidget = newId;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tif(widget.isSpacer)\n\t\t\t\t// if its spacer widgets\n\t\t\t\tif (widget.isSpacer) {\n\t\t\t\t\tconst _attrs = dragWidgetProps.attrs || {};\n\t\t\t\t\tattrs = getSpacer({\n\t\t\t\t\t\twidget,\n\t\t\t\t\t\tid: newId,\n\t\t\t\t\t\tmodel: _attrs.model,\n\t\t\t\t\t\tmodelField: _attrs.modelField,\n\t\t\t\t\t\twidgetAttrs: JSON.stringify({ colSpan: widget.colSpan || 6 }),\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\t// add new widget\n\t\t\t\tif (isNew) {\n\t\t\t\t\tif(isExtensionView(state) && !isCustomField) {\n\t\t\t\t\t\tif(actualHoverWidget) {\n\t\t\t\t\t\t\tisExtensionView(state) && list[position === 'after' ? 'unshift' : 'push']({ name: 'insert', position, target: hoverPath, elements: [attrs], id: newId })\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tconst widget = _widgets[hoverWidget.panelId];\n\t\t\t\t\t\t\tif(shouldInsertInParent(dragWidgetProps, widget)) {\n\t\t\t\t\t\t\t\tprocessMoves(state, attrs, newId, hoverWidget.panelId);\n\t\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\t\tlist[position === 'after' ? 'unshift' : 'push']({ name: 'insert', position: 'inside', target: widget.xPath, elements: [attrs], id: newId })\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t// processMoves(state, attrs, newId, hoverWidget.panelId);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\tnewWidgetIds.push(newId);\n\t\t\t\t\t_widgets[newId] = Object.assign({}, attrs);\n\t\t\t\t} else {\n\t\t\t\t\tif(isExtensionView(state) && !isCustomField) {\n\t\t\t\t\t\tif(actualHoverWidget) {\n\t\t\t\t\t\t\tisExtensionView(state) && list[position === 'after' ? 'unshift' : 'push']({ name: 'move', source: dragWidgetProps.attrs.xPath, position, target: hoverPath })\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tconst widget = _widgets[hoverWidget.panelId];\n\t\t\t\t\t\t\tif(shouldInsertInParent(dragWidgetProps, widget)) {\n\t\t\t\t\t\t\t\tprocessMoves(state, dragWidgetProps.attrs, dragWidgetProps.id, hoverWidget.panelId);\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tisExtensionView(state) && list[position === 'after' ? 'unshift' : 'push']({ name: 'move', source: dragWidgetProps.attrs.xPath, position: 'inside', target: widget.xPath })\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t// const tempList = processMoves(state, dragWidgetProps.attrs, dragWidgetProps.id, hoverWidget.panelId);\n\t\t\t\t\t\t\t// if(tempList.length) {\n\t\t\t\t\t\t\t// \tconst index = extendList.findIndex(l => l.name === 'attribute');\n\t\t\t\t\t\t\t// \tif(index !== -1) {\n\t\t\t\t\t\t\t// \t\textendList.splice(index, 1);\n\t\t\t\t\t\t\t// \t}\n\t\t\t\t\t\t\t// }\n\t\t\t\t\t\t\t// list.push(...tempList);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\t_widgets[dragWidgetProps.id] = Object.assign(\n\t\t\t\t\t\t{ ..._widgets[dragWidgetProps.id] },\n\t\t\t\t\t\tattrs\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t\tnewIds.push(newId);\n\t\t\t}\n\t\t});\n\t\textendList.push(...list);\n\t// put all new widgets into panel\n\t(\n\t\t(hoverWidget.panelId ? _widgets[hoverWidget.panelId] : state)[_items] || []\n\t).splice(itemIndex, 0, ...newIds);\n\treturn {extendList};\n};\n\nconst getWidgetType = (widgetAttrs, defaultType) => {\n\tconst uiFields = [\"spacer\", \"label\", \"button\"];\n\tlet _type =\n\t\twidgetAttrs.isModelField || widgetAttrs.isCoreField === false || widgetAttrs.serverType === 'field'\n\t\t\t? \"field\"\n\t\t\t: widgetAttrs.type ? widgetAttrs.type.toLowerCase() : defaultType;\n\t_type = uiFields.includes(widgetAttrs.serverType)\n\t\t? widgetAttrs.serverType\n\t\t: _type;\n\treturn _type;\n}\n\n// check source or destination panel is exclusive or not\nexport const checkExclusive = (widgets, source, destination) => {\n\t// special case for exclusive\n\tif (widgets[source.id]) {\n\t\tif (widgets[source.panelId]) {\n\t\t\tlet sourcePanelAttrs = widgets[source.panelId];\n\t\t\tif (\n\t\t\t\tsourcePanelAttrs.exclusive &&\n\t\t\t\tdestination.panelId !== source.panelId\n\t\t\t) {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\t}\n\tif (widgets[destination.id]) {\n\t\tif (widgets[destination.panelId]) {\n\t\t\tlet destinationPanelAttrs = widgets[destination.panelId];\n\t\t\tif (\n\t\t\t\tdestinationPanelAttrs.exclusive &&\n\t\t\t\tsource.panelId !== destination.panelId\n\t\t\t) {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\t}\n\treturn false;\n};\n\nconst isSamePositionInOriginal = (elements, panel, widget, hoverItemIndex) => {\n\tconst field = widget.attrs || widget || {};\n\tlet flag = false;\n\t(elements || []).forEach((element) => {\n\t\tif(element.elements) {\n\t\t\tif (element.attributes && panel && element.attributes.name === panel.name) {\n\t\t\t\tconst item = element.elements[hoverItemIndex];\n\t\t\t\tif (\n\t\t\t\t\titem &&\n\t\t\t\t\titem.attributes &&\n\t\t\t\t\tfield &&\n\t\t\t\t\titem.attributes.name === field.name\n\t\t\t\t) {\n\t\t\t\t\tflag = true;\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (!flag && element.elements && element.elements.length) {\n\t\t\t\tconst result = isSamePositionInOriginal(\n\t\t\t\t\telement.elements,\n\t\t\t\t\tpanel,\n\t\t\t\t\twidget,\n\t\t\t\t\thoverItemIndex\n\t\t\t\t);\n\t\t\t\tif (result === true) {\n\t\t\t\t\tflag = true;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t});\n\treturn flag;\n};\n\nconst getServerType = (fieldType, type, serverType) => {\n\tconst typeReplacer = {\n\t\tinclude: TYPE.panelInclude,\n\t\tMANY_TO_MANY: \"many-to-many\",\n\t\tMANY_TO_ONE: \"many-to-one\",\n\t\tONE_TO_ONE: \"one-to-one\",\n\t};\n\tconst _type = fieldType || type;\n\tif (type === \"field\" && !fieldType) {\n\t\treturn type;\n\t}\n\treturn typeReplacer[_type] || _type;\n};\n\nconst getType = (serverType, type, itemType, viewer) => {\n\tconst typeReplacer = {\n\t\tinclude: TYPE.panelInclude,\n\t\tMANY_TO_MANY: \"many-to-many\",\n\t\tMANY_TO_ONE: \"many-to-one\",\n\t\tONE_TO_ONE: \"one-to-one\",\n\t};\n\tif (serverType === \"field\") {\n\t\t//check for viewer\n\t\tif(viewer) {\n\t\t\treturn viewer.type;\n\t\t}\n\t\treturn typeReplacer[itemType] || itemType;\n\t}\n\treturn typeReplacer[type] || type;\n};\n\nconst getTarget = (fieldTarget, itemTarget) => {\n\treturn fieldTarget || itemTarget;\n};\n\nconst getAttributesFromField = (field) => {\n\tconst attrsList = ['required'];\n\tconst attrs = {};\n\tattrsList.forEach(key => {\n\t\tattrs[key] = field[key];\n\t});\n\treturn attrs;\n}\n\nconst convertType = (string) => {\n\tif(string) {\n\t\treturn string.replace(/_/g, '-').toLowerCase();\n\t}\n};\n\nconst getItems = (items, widgets, fields = []) => {\n\tconst itemList = [];\n\tconst getAttributes = (item) => {\n\t\tconst attrs = {};\n\t\tconst type = getType(null, item.type);\n\t\tObject.keys(item).forEach(key => {\n\t\t\tattrs[dashToCamelCase(key)] = item[key];\n\t\t});\n\t\tif(type === TYPE.panelRelated) {\n\t\t\tattrs['field'] = item.name;\n\t\t}\n\t\tif(type === TYPE.panelInclude) {\n\t\t\tattrs['from'] = item.module;\n\t\t}\n\t\treturn attrs;\n\t}\n\titems.forEach((item) => {\n\t\tif (item.type !== \"panel-mail\") {\n\t\t\tconst _ID = _.uniqueId();\n\t\t\titemList.push(_ID);\n\t\t\tconst field = fields.find((f) => f.name === item.name) || {};\n\t\t\tconst serverType = getServerType(convertType(field.type), item.type, item.serverType);\n\t\t\tconst target = getTarget(field.target, item.target);\n\t\t\tconst viewer = item.viewer || item.editor;\n\t\t\twidgets[_ID] = {\n\t\t\t\t...getAttributes(item),\n\t\t\t\t...getAttributesFromField(field),\n\t\t\t\tcolSpan: item.colSpan || 6,\n\t\t\t\tserverType: serverType,\n\t\t\t\ttype: getType(serverType, item.type, item.serverType, viewer),\n\t\t\t};\n\t\t\tif(target) {\n\t\t\t\twidgets[_ID] = {\n\t\t\t\t\t...widgets[_ID],\n\t\t\t\t\ttarget,\n\t\t\t\t\ttargetModel: target,\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (item.type.indexOf(TYPE.panel) >= 0) {\n\t\t\t\tconst { itemList } = getItems(item.items, widgets, fields);\n\t\t\t\twidgets[_ID] = {\n\t\t\t\t\t...widgets[_ID],\n\t\t\t\t\tcols: 12,\n\t\t\t\t\tlayout: \"grid\",\n\t\t\t\t\titems: [...itemList],\n\t\t\t\t\tserverType:\n\t\t\t\t\t\titem.type === \"panel\" && item.tab === true\n\t\t\t\t\t\t\t? TYPE.tabs\n\t\t\t\t\t\t\t: item.serverType || item.type,\n\t\t\t\t};\n\t\t\t}\n\t\t}\n\t});\n\treturn { itemList, _widgets: widgets };\n};\n\nconst isPanelTab = (field) => {\n\tconst { type, widgetAttrs } = field;\n\tif (type === TYPE.panel && widgetAttrs) {\n\t\tconst attrs = JSON.parse(widgetAttrs);\n\t\tif (attrs.tab === \"true\") {\n\t\t\treturn true;\n\t\t}\n\t}\n\treturn false;\n};\n\nconst getColSpan = (widget) => {\n\tconst attrs = JSON.parse(widget.widgetAttrs || \"{}\");\n\tconst defaultColspan = widget.type === TYPE.panel ? 12 : 6;\n\treturn attrs.colSpan || defaultColspan;\n};\n\nconst getCols = (widget) => {\n\tif ([TYPE.panel, TYPE.tabs].includes(widget.type)) {\n\t\treturn { cols: 12 };\n\t}\n\treturn {};\n};\n\nexport const getMenuBuilder = (menuBuilder) => {\n\tif (menuBuilder) {\n\t\treturn {\n\t\t\tmenuBuilderTitle: menuBuilder.title,\n\t\t\tmenuBuilderParent: menuBuilder.parentMenu,\n\t\t};\n\t}\n\treturn {};\n};\n\nexport const generateCustomModelSchema = (fields = [], record, typeLateral = '', formType = 'form') => {\n\tlet flag = false;\n\tconst _widgets = {};\n\tconst formItems = [];\n\tconst tabItems = [];\n\tlet _panelId;\n\tfields.forEach((f) => {\n\t\tconst _ID = _.uniqueId();\n\t\tconst isTab = isPanelTab(f);\n\t\tif ([TYPE.panel, TYPE.tabs].includes(f.type)) {\n\t\t\tflag = true;\n\t\t\t_panelId = _ID;\n\t\t\tf[\"items\"] = [];\n\t\t\tf[\"layout\"] = \"grid\";\n\t\t} else if (!flag) {\n\t\t\tconst _item = _widgets[_panelId];\n\t\t\tif (_item) {\n\t\t\t\t_item.items.push(_ID);\n\t\t\t\t_widgets[_panelId] = { ..._widgets[_panelId], items: [..._item.items] };\n\t\t\t} else {\n\t\t\t\tflag = true;\n\t\t\t}\n\t\t}\n\t\tif (flag) {\n\t\t\tflag = false;\n\t\t\tif (isTab) {\n\t\t\t\ttabItems.push(_ID);\n\t\t\t} else {\n\t\t\t\tformItems.push(_ID);\n\t\t\t}\n\t\t}\n\t\tif(f.selectionText && f.selectionText.length) {\n\t\t\tf.updateSelection = true;\n\t\t}\n\t\t_widgets[_ID] = { ...f, colSpan: getColSpan(f), ...getCols(f), type: `${f.type}${typeLateral}` };\n\t});\n\t// add tab panel if tabItems has length\n\tif (tabItems.length) {\n\t\tconst _ID = _.uniqueId();\n\t\tconst field = {\n\t\t\titems: [...tabItems],\n\t\t\ttype: TYPE.tabs,\n\t\t\ttitle: \"Tab Panel\",\n\t\t};\n\t\tformItems.push(_ID);\n\t\t_widgets[_ID] = { ...field };\n\t}\n\tconst form = formType === 'customForm' ? IDS.customForm : IDS.form;\n\tconst schema = {\n\t\twidgets: {\n\t\t\t[form]: {\n\t\t\t\ttype: formType,\n\t\t\t\tcols: 12,\n\t\t\t\t...record,\n\t\t\t\t...getMenuBuilder(record ? record.menuBuilder : undefined),\n\t\t\t},\n\t\t\t[IDS.dumpField]: {\n\t\t\t\ttype: TYPE.dumpField,\n\t\t\t\tname: \"\",\n\t\t\t},\n\t\t\t..._widgets,\n\t\t},\n\t\titems: [...formItems],\n\t};\n\treturn schema;\n};\n\nfunction processXML( xmlString , indent ) {\n  return format(xmlString);\n}\n\n\n\nconst replacer = (key, modelType) => {\n\tconst camelToDash = [\"formView\", \"gridView\", \"minSize\", \"maxSize\"];\n\tconst xField = [\"bind\"];\n\tif (modelType === MODEL_TYPE.BASE) {\n\t\tconst keyReplacer = {\n\t\t\ttargetModel: \"target\",\n\t\t\tminSize: \"min\",\n\t\t\tmaxSize: \"max\",\n\t\t};\n\t\tkey = keyReplacer[key] || key;\n\t\tif (camelToDash.includes(key)) {\n\t\t\tkey = camelToDashCase(key);\n\t\t}\n\t\tif(xField.includes(key)) {\n\t\t\tkey = `x-${camelToDashCase(key)}`;\n\t\t}\n\t}\n\treturn key;\n};\n\nconst editorKeyReplacer = (key, modelType) => {\n\tconst keyReplacer = {\n\t\ttargetModel: \"target\",\n\t\tminSize: \"min\",\n\t\tmaxSize: \"max\",\n\t};\n\tif (modelType === MODEL_TYPE.BASE) {\n\t\tconst _keyIndex = Object.values(keyReplacer).findIndex(v => v === key);\n\t\tif(_keyIndex !== -1) {\n\t\t\tkey = Object.keys(keyReplacer)[_keyIndex];\n\t\t}\n\t}\n\treturn key;\n}\n\nfunction isDummyField(widget) {\n\tconst modelTypes = [];\n\tmodelFields.forEach(f => {\n\t\tconst {value = []} = f;\n\t\tconst types = value.map(v => v.serverType);\n\t\tmodelTypes.push(...types);\n \t});\n\treturn widget.serverType === 'field' && modelTypes.includes(widget.type);\n}\n\nfunction valueConverter(value, key) {\n\tconst ltKeys = ['title', 'text'];\n\tif(value && ltKeys.includes(key)) {\n\t\tvalue = value.replace(/</g, '&lt;');\n\t}\n\treturn value;\n}\n\nconst getWidgetAttrs = (attrs, exempt = [], modelType) => {\n\tconst widgetAttrs = {};\n\tconst exemptedAttrs = [\n\t\t\"version\",\n\t\t\"type\",\n\t\t\"typeName\",\n\t\t\"label\",\n\t\t\"items\",\n\t\t\"serverType\",\n\t\t\"layout\",\n\t\t\"cols\",\n\t\t\"isCoreField\",\n\t\t\"isModelField\",\n\t\t\"relationship\",\n\t\t\"current\",\n\t\t\"autoTitle\",\n\t\t\"metaModel\",\n\t\t\"targetSearch\",\n\t\t\"editorType\",\n\t\t\"appBuilder\",\n\t\t...exempt,\n\t];\n\tif (attrs.serverType !== \"field\") {\n\t\texemptedAttrs.push(\"targetModel\", \"targetName\", \"target\");\n\t}\n\tObject.keys(attrs).forEach((key) => {\n\t\tif (!exemptedAttrs.includes(key) && attrs[key] !== \"\") {\n\t\t\tlet flag = true;\n\t\t\tif(modelType === MODEL_TYPE.ENTITY && !attrs[key]) {\n\t\t\t\tflag = false;\n\t\t\t}\n\t\t\tif(modelType === MODEL_TYPE.BASE && isDefaultValue(key, attrs[key])) {\n\t\t\t\tflag = false;\n\t\t\t}\n\t\t\tif(flag) {\n\t\t\t\tif (key === \"dummyType\") {\n\t\t\t\t\twidgetAttrs[\"type\"] = attrs[key];\n\t\t\t\t} else {\n\t\t\t\t\twidgetAttrs[replacer(key, modelType)] = valueConverter(attrs[key], key);\n\t\t\t\t}\n\t\t\t}\n\t\t\t}\n\t});\n\t// check for dummy model field\n\tif(attrs.type === TYPE.panelInclude) {\n\t\tif(typeof attrs.view === 'object') {\n\t\t\twidgetAttrs.view = attrs.view.name;\n\t\t}\n\t}\n\tif (attrs.isModelField || isDummyField(attrs)) {\n\t\twidgetAttrs[\"type\"] = attrs.type;\n\t}\n\tif(attrs.type === TYPE.panelRelated) {\n\t\twidgetAttrs['name'] = attrs.field;\n\t}\n\tif(widgetAttrs.name) {\n\t\t// change array field index\n\t\tconst squareIndex = widgetAttrs.name.indexOf('[');\n\t\tif(squareIndex !== -1) {\n\t\t\twidgetAttrs.name = widgetAttrs.name.substring(0,squareIndex);\n\t\t}\n\t}\n\treturn widgetAttrs;\n};\n\nconst getCustomWidget = (widget, exempt = []) => {\n\tconst _widget = {};\n\tconst exemptedAttrs = [\n\t\t\"image\",\n\t\t\"serverType\",\n\t\t\"isModelField\",\n\t\t\"isCoreField\",\n\t\t\"current\",\n\t\t...exempt,\n\t];\n\tObject.keys(widget).forEach((key) => {\n\t\tif (!exemptedAttrs.includes(key)) {\n\t\t\tif (key === \"type\" && [\"item\", \"field\"].includes(widget[key])) {\n\t\t\t\t_widget[key] = widget[\"serverType\"];\n\t\t\t} else {\n\t\t\t\t_widget[key] = widget[key] === \"\" ? null : widget[key];\n\t\t\t}\n\t\t}\n\t});\n\treturn _widget;\n};\n\nconst getCustomModelFields = (\n\titems = [],\n\twidgets,\n\tadditionalProps = {},\n\tcountSequence = false,\n\tsequence = 0\n) => {\n\tconst fields = [];\n\titems.forEach((item) => {\n\t\tlet _widget = { ...widgets[item] };\n\t\tconst exempt = [];\n\t\tif (![\"dump_field\", \"form\"].includes(_widget.type)) {\n\t\t\tif (_widget.type !== TYPE.tabs) {\n\t\t\t\tif (typeof _widget.id === \"symbol\") {\n\t\t\t\t\tdelete _widget.id;\n\t\t\t\t}\n\t\t\t\tif (_widget.showTitle !== false) {\n\t\t\t\t\tdelete _widget.showTitle;\n\t\t\t\t}\n\t\t\t\tif (countSequence) {\n\t\t\t\t\t_widget.sequence = sequence;\n\t\t\t\t\tsequence++;\n\t\t\t\t}\n\t\t\t\tif (_widget.serverType === \"spacer\") {\n\t\t\t\t\texempt.push(\"title\");\n\t\t\t\t}\n\t\t\t\tfields.push({\n\t\t\t\t\t...getCustomWidget(_widget, exempt),\n\t\t\t\t\t...additionalProps,\n\t\t\t\t});\n\t\t\t}\n\t\t\tif (_widget.items && _widget.items.length) {\n\t\t\t\tconst modelFields = getCustomModelFields(\n\t\t\t\t\t_widget.items,\n\t\t\t\t\twidgets,\n\t\t\t\t\tadditionalProps,\n\t\t\t\t\tcountSequence,\n\t\t\t\t\tsequence\n\t\t\t\t);\n\t\t\t\tfields.push(...modelFields.fields);\n\t\t\t\tsequence = modelFields.sequence;\n\t\t\t}\n\t\t}\n\t});\n\treturn { fields, sequence };\n};\n\nconst isCreatedFromStudio = ({ xmlId = null, extension }) => {\n\tif (xmlId && !extension) {\n\t\tconst index = xmlId.indexOf(\"studio-\");\n\t\tif (index === 0) {\n\t\t\treturn true;\n\t\t}\n\t}\n\treturn false;\n};\n\nconst getFormProperties = (form, exempt = []) => {\n\tconst except = [\"type\", \"cols\", \"items\", ...exempt];\n\tconst properties = {};\n\tObject.keys(form).forEach((key) => {\n\t\tif (!except.includes(key) && form[key] !== \"\") {\n\t\t\tproperties[key] = form[key];\n\t\t}\n\t});\n\treturn properties;\n};\n\nconst getEntityField = (type) => {\n\tconst realType = {localdatetime: 'datetime', localdate: 'date'};\n\tconst index = type.indexOf(\"Entity\");\n\tlet _type = index === -1 ? type : type.substring(0, index);\n\t_type = realType[_type] || _type;\n\treturn _type;\n};\n\n/**\n * Checks whether value is same as default value or not\n * for given property name.\n * Returns boolean true/false\n * @param {string} name\n * @param {string} value\n */\nconst isAttrHasDefaultValue = (name, value) => {\n\tconst defaultValue = DEFAULT_VALUE[name];\n\tif(defaultValue !== undefined && `${defaultValue}` === `${value}`) {\n\t\treturn true;\n\t}\n\treturn false;\n}\n\nexport const getProperty = (\n\tname,\n\tvalue,\n\tparentField,\n\tparentValue,\n\tshouldCheckParent = true\n) => {\n\tconst obj = { [name]: value };\n\tif (shouldCheckParent) {\n\t\tconst _value = typeof parentValue === 'string' ? JSON.parse(parentValue) : parentValue || {};\n\t\tif (parentField && ![undefined, \"\", null].includes(value)) {\n\t\t\t// check for default value\n\t\t\tif (isAttrHasDefaultValue(name, value)) {\n\t\t\t\tdelete _value[name];\n\t\t\t\treturn { [parentField]: JSON.stringify({ ..._value }) };\n\t\t\t}\n\t\t\tconst _obj = { [name]: `${value}` };\n\t\t\treturn { [parentField]: JSON.stringify({ ..._value, ..._obj }) };\n\t\t} else if (parentField && (!value || value === \"\")) {\n\t\t\tdelete _value[name];\n\t\t\treturn { [parentField]: JSON.stringify({ ..._value }) };\n\t\t}\n\t}\n\tif (name === \"showTitle\" && value === true) {\n\t\treturn { showTitle: undefined };\n\t}\n\treturn obj;\n};\n\nexport const getPropertyValue = (\n\tlist,\n\tname,\n\tparentField,\n\tdefaultValue,\n\tshouldCheckParent = true\n) => {\n\tif (shouldCheckParent && parentField) {\n\t\tif (list[parentField]) {\n\t\t\tconst field = JSON.parse(list[parentField]);\n\t\t\treturn [undefined, null].includes(field[name])\n\t\t\t\t? defaultValue\n\t\t\t\t: field[name];\n\t\t}\n\t\treturn defaultValue || null;\n\t}\n\treturn [undefined, null].includes(list[name]) ? defaultValue : list[name];\n};\n\nconst getDefaultProperties = (modelType, entityType, entityModel) => {\n\tswitch (modelType) {\n\t\tcase MODEL_TYPE.CUSTOM:\n\t\t\treturn { formWidth: \"large\" };\n\t\tcase MODEL_TYPE.BASE:{\n\t\t\tconst props = { width: \"large\" };\n\t\t\tif(entityType === ENTITY_TYPE.ENTITY) {\n\t\t\t\tprops['model'] = `${entityModel.packageName}.${entityModel.name}`;\n\t\t\t}\n\t\t\treturn props;\n\t\t}\n\t\tdefault:\n\t\t\treturn {};\n\t}\n};\n\nconst getEntityModel = (entityModel) => {\n\treturn `${entityModel.packageName}.${entityModel.name}`;\n}\n\nconst getPatchList = (xmlJson) => {\n\tif (xmlJson) {\n\t\tconst { elements = [] } = xmlJson;\n\t\tif (elements[0]) {\n\t\t\treturn elements[0].elements || [];\n\t\t}\n\t}\n\treturn [];\n};\n\nconst filterFormPatch = (patchList) => {\n\treturn patchList.filter((element) => element.attributes.target === \"/\");\n};\n\nconst getCurrentFormAttributes = (xml) => {\n\tconst { elements = [] } = xml;\n\treturn elements[0].attributes || {};\n};\n\nconst mergeFormAttributes = (patchList, formPatch) => {\n\tconst index = patchList.findIndex(\n\t\t(element) => element.attributes.target === \"/\"\n\t);\n\tconst targetIndex = index === -1 ? 0 : index;\n\tconst remove = index === -1 ? 0 : 1;\n\tif (Object.keys(formPatch).length) {\n\t\tpatchList.splice(targetIndex, remove, { ...formPatch });\n\t} else if (index !== -1) {\n\t\tpatchList.splice(index, 1);\n\t}\n\treturn patchList;\n};\n\nconst camelToDashCase = (string, caseString=\"-\") => {\n\treturn string.replace(/[A-Z]/g, (m) => caseString + m.toLowerCase());\n};\n\nconst dashToCamelCase = (string) => {\n\treturn string.replace(/-([a-z])/g, function (g) {\n\t\treturn g[1].toUpperCase();\n\t});\n};\n\nconst isDefaultValue = (field, value) => {\n\tconst fieldValue = DEFAULT_VALUE[field];\n\tif([true, false].includes(fieldValue) && `${value}` === `${fieldValue}`) {\n\t\treturn true;\n\t}\n\treturn false;\n}\n\nconst getReferenceProperty = (widgetType) => {\n\tconst referenceProperty = {\n\t\t[TYPE.panelInclude]: 'view'\n\t}\n\tconst refProp = referenceProperty[widgetType];\n\treturn refProp || 'name';\n}\n\nconst getEntityItems = (items) => {\n\tconst widgets = [];\n\tconst itemList = [];\n\titems.forEach((f) => {\n\t\tconst _ID = _.uniqueId();\n\t\twidgets[_ID] = { ...f.attributes, type: `${f.name}Entity` };\n\t\titemList.push(_ID);\n\t});\n\treturn {widgets, itemList};\n}\n\nconst generateEntityModelSchema = (xml, record) => {\n\tconst jsonData = JSON.parse(\n\t\tconvert.xml2json(xml, {\n\t\t\tcompact: false,\n\t\t\tfullTagEmptyElement: false,\n\t\t})\n\t);\n\tconst {elements = [], ...formData} = jsonData.elements[0];\n\tconst { itemList, widgets } = getEntityItems(elements);\n\tconst schema = {\n\t\twidgets: {\n\t\t\t[IDS.form]: {\n\t\t\t\ttype: TYPE.form,\n\t\t\t\tcols: 12,\n\t\t\t\t...formData.attributes,\n\t\t\t\tpackageName: record.packageName,\n\t\t\t},\n\t\t\t[IDS.dumpField]: {\n\t\t\t\ttype: TYPE.dumpField,\n\t\t\t\tname: \"\",\n\t\t\t},\n\t\t\t...widgets,\n\t\t},\n\t\titems: [...itemList],\n\t};\n\treturn schema;\n}\n\nconst getEntityModelFields = (xml) => {\n\tconst jsonData = JSON.parse(\n\t\tconvert.xml2json(xml, {\n\t\t\tcompact: false,\n\t\t\tfullTagEmptyElement: false,\n\t\t})\n\t);\n\tconst {elements = []} = jsonData.elements[0];\n\tconst fields = elements.map(element => {\n\t\treturn {type: element.name, name: element.attributes.name, tz: element.attributes.tz};\n\t});\n\treturn fields;\n}\n\nconst getEntityViewItems = (items) => {\n\tlet fields = [];\n\titems.forEach(item => {\n\t\tif(item.type === 'field') {\n\t\t\tfields.push(item.name);\n\t\t}\n\t\tif(item.items) {\n\t\t\tconst _fields = getEntityViewItems(item.items);\n\t\t\tfields.push(..._fields);\n\t\t}\n\t});\n\treturn fields;\n}\n\nconst checkTarget = (target, checkString, which) => {\n\t// 2 for parent check and 3 for itself/child element check\n\tconst targetSplit = target.split('/');\n\tif(which) {\n\t\tif(targetSplit[which] === checkString) {\n\t\t\treturn true;\n\t\t}\n\t\treturn false;\n\t}\n\treturn target === checkString;\n}\n\nconst exploreTarget = (target, which = 3) => {\n\t// 2 for parent check and 3 for itself/child element check\n\tconst targetSplit = target.split('/');\n\tconst length = targetSplit.length;\n\tlet parent = length > 3 ? targetSplit[length - 2] : targetSplit[length - 1];\n\tlet self = length > 3 ? targetSplit[length - 1] : undefined;\n\treturn { parent, self};\n}\n\nconst getViews = (list, viewName) => {\n\tlet view = list.find(v => v.computed === true);\n\tlet originalXML = list.find(v => v.computed !== true && v.extension !== true);\n\tconst extensionXML = list.find(v => v.extension === true && v.xmlId === `studio-${viewName}`);\n\treturn {\n\t\tview: view || originalXML,\n\t\toriginalXML,\n\t\textensionXML,\n\t}\n}\n\nconst getElementTypes = (name, field, _type) => {\n\tlet serverType;\n\tlet type;\n\tif(field) {\n\t\tserverType = field.type.toLowerCase();\n\t\ttype = name;\n\t} else {\n\t\tserverType = name;\n\t\ttype = _type ? _type : name === 'field' ? undefined : name;  // if element is field then set default type string\n\t}\n\treturn {serverType: TYPE_REPLACER[serverType] || serverType, type: TYPE_REPLACER[type] || type};\n}\n\nconst getTitle = (attributes, field) => {\n\tif(attributes.title) {\n\t\treturn {title: attributes.title};\n\t}\n\tif(field?.label) {\n\t\treturn {autoTitle: field.label};\n\t}\n\tif(attributes.name) {\n\t\treturn {autoTitle: camelToDashCase(attributes.name, ' ')}\n\t}\n\treturn {};\n}\n\n\n\n\nconst generateViewFromJson = ({view, fields, original, extensionXML, attrsList}) => {\n\tconst {elements} = view;\n\n\tconst getElementName = (attributes, parent, itemList, elementType) => {\n\t\tconst nameObj = {name: attributes.name};\n\t\treturn nameObj;\n\t}\n\n\tconst getElementToWidget = (element, fields, parent, itemList) => {\n\t\tlet widget = {};\n\t\tlet field;\n\t\tif(element) {\n\t\t\tconst {type, ...attributes} = element.attributes || {};\n\t\t\tif(element.name.indexOf('panel') === -1) {\n\t\t\t\tfield = fields.find(f => f.name === attributes.name);\n\t\t\t}\n\t\t\tconst attrs = {};\n\t\t\tObject.keys(attributes).map(key => {\n\t\t\t\tlet _key = key;\n\t\t\t\tif(key.indexOf('x-') === 0) {\n\t\t\t\t\t_key = key.substring(2);\n\t\t\t\t}\n\t\t\t\tattrs[editorKeyReplacer(dashToCamelCase(_key), MODEL_TYPE.BASE)] = attributes[key];\n\t\t\t\treturn undefined;\n\t\t\t})\n\t\t\tconst targetModel = getTarget(field?.target || field?.targetModel, attributes.target);\n\t\t\twidget = {\n\t\t\t\t...attrs,\n\t\t\t\tcolSpan: Number(attributes.colSpan || 6),\n\t\t\t\t...getElementName(attributes, parent, itemList, element.name),\n\t\t\t\t...getElementTypes(element.name, field, type),\n\t\t\t\t...getTitle(attributes, field),\n\t\t\t}\n\t\t\tif(targetModel) {\n\t\t\t\twidget.targetModel = targetModel;\n\t\t\t}\n\t\t\tif(element.name && (element.name.indexOf(TYPE.panel) >= 0 || [TYPE.menubar, TYPE.toolbar].includes(element.name))) {\n\t\t\t\twidget.colSpan = Number(attributes.colSpan || 12);\n\t\t\t\twidget.cols = 12;\n\t\t\t\twidget.layout = \"grid\";\n\t\t\t\twidget.serverType =\n\t\t\t\t\t\t\twidget.type === \"panel\" && widget.tab === true\n\t\t\t\t\t\t\t\t? TYPE.tabs\n\t\t\t\t\t\t\t\t: widget.serverType || widget.type;\n\t\t\t}\n\t\t\t// widget.type =\n\t\t}\n\t\treturn {widget, field};\n\t}\n\n\tconst getSpecialType = (element) => {\n\t\treturn element.name;\n\t}\n\tconst getXMLToViewItems = (elements = [], fields, parent) => {\n\t\tconst exclude = ['panel-mail'];\n\t\tlet _widgets = {};\n\t\tconst itemList = [];\n\t\tconst fieldList = [];\n\t\telements.forEach(element => {\n\t\t\tif(!exclude.includes(element.name) && element.type !== 'cdata') {\n\t\t\t\tconst _ID = _.uniqueId();\n\t\t\t\tconst {widget, field} = getElementToWidget(element, fields, parent, itemList)\n\t\t\t\tif(field) {\n\t\t\t\t\tfieldList.push(field);\n\t\t\t\t}\n\t\t\t\titemList.push(_ID);\n\t\t\t\tif(element.name && element.name.indexOf(TYPE.panel) >= 0) {\n\t\t\t\t\twidget.items = [];\n\t\t\t\t}\n\t\t\t\tif(element.elements && element.name !== 'field') {\n\t\t\t\t\tconst items = getXMLToViewItems(element.elements, fields, element.attributes);\n\t\t\t\t\t_widgets = {..._widgets, ...items._widgets};\n\t\t\t\t\twidget.items = [...items.itemList];\n\t\t\t\t\tfieldList.push(...items.fieldList);\n\t\t\t\t}\n\t\t\t\tif(element.elements && element.name === 'field') {\n\t\t\t\t\t// check for viewer\n\t\t\t\t\tconst type = getSpecialType(element.elements[0]);\n\t\t\t\t\tif(type) {\n\t\t\t\t\t\twidget.type = type;\n\t\t\t\t\t\twidget.elements = element.elements;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\t// override with meta attrs list\n\t\t\t\tif(widget.name) {\n\t\t\t\t\tconst list = (attrsList || []).filter(attr => attr.field === widget.name);\n\t\t\t\t\tlist.forEach((attr) => {\n\t\t\t\t\t\tif(['selection-in'].includes(attr.name)) {\n\t\t\t\t\t\t\twidget[attr.name] = attr.value;\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\twidget[editorKeyReplacer(dashToCamelCase(attr.name), MODEL_TYPE.BASE)] = attr.value;\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\t_widgets[_ID] = {...widget};\n\t\t\t}\n\t\t});\n\t\treturn {_widgets, itemList, fieldList};\n\t}\n\n\tconst { itemList, _widgets, fieldList } = getXMLToViewItems(elements, fields);\n\tconst form = _widgets[itemList[0]];\n\tconst items = form.items || [];\n\tdelete _widgets[itemList[0]];\n\t// const { items, ...rest } = view;\n\tconst schema = {\n\t\twidgets: {\n\t\t\t[IDS.form]: {\n\t\t\t\ttype: TYPE.form,\n\t\t\t\tcols: 12,\n\t\t\t\t...form,\n\t\t\t\titems: undefined,\n\t\t\t},\n\t\t\t[IDS.dumpField]: {\n\t\t\t\ttype: TYPE.dumpField,\n\t\t\t\tname: \"\",\n\t\t\t},\n\t\t\t..._widgets,\n\t\t},\n\t\titems,\n\t\tfieldList,\n\t};\n\treturn schema;\n}\n\nconst generateXMLToViewSchema = ({view, fields, original = false, extensionXML, attrsList}) => {\n\tconst {elements} = JSON.parse(\n\t\tconvert.xml2json(view.xml, {\n\t\t\tcompact: false,\n\t\t\tfullTagEmptyElement: false,\n\t\t})\n\t);\n\treturn generateViewFromJson({view: {elements}, fields, original, extensionXML, attrsList});\n}\n\nconst getChangeList = (schema, extensionXml) => {\n\tconst list = [];\n\tconst {widgets} = schema;\n\tconst elems = getExtensionElements(extensionXml);\n\tconst widgetList = Object.values(widgets);\n\tconst widgetIds = Object.keys(widgets);\n\telems.forEach(json => {\n\t\tconst { elements = []} = json;\n\t\t// const object =\n\t\tconst moveElement = elements[0];\n\t\tif(moveElement && moveElement.attributes && moveElement.name === 'move') {\n\t\t\tconst source = exploreTarget(moveElement.attributes.source);\n\t\t\tif(source.self) {\n\t\t\t\tconst index = source.self ? widgetList.findIndex(w => `${w.type}[@name='${w.name}']` === source.self) :\n\t\t\t\twidgetList.findIndex(w => `${w.type}[@name='${w.name}']` === source.parent);\n\t\t\t\tif(widgetIds[index]) {\n\t\t\t\t\tlist.push(widgetIds[index]);\n\t\t\t\t}\n\t\t\t}\n\t\t\t// return {\n\t\t\t// \ttarget: attributes.target,\n\t\t\t// \tsource: moveElement.attributes.source,\n\t\t\t// \tposition: moveElement.attributes.position,\n\t\t\t// }\n\t\t}\n\t});\n\treturn list;\n}\n\nconst getExtensionElements = (xml) => {\n\tconst extensionJson = JSON.parse(\n\t\tconvert.xml2json(xml, {\n\t\t\tcompact: false,\n\t\t\tfullTagEmptyElement: false,\n\t\t})\n\t);\n\tconst elems = extensionJson.elements[0].elements;\n\treturn elems;\n}\n\nfunction randomString(length) {\n\tconst chars = '0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ';\n\tvar result = '';\n\tfor (var i = length; i > 0; --i) result += chars[Math.floor(Math.random() * chars.length)];\n\treturn result;\n}\n\nexport const generateFieldUniqueTitle = ({name, fieldName}) => {\n\tconst text = randomString(6);\n\treturn `studio:${text}:${fieldName}:${name}`;\n}\n\nexport default {\n\tcamleCaseString,\n\ttranslate,\n\tprocessXML,\n\tgetWidgetAttrs,\n\tgetCustomModelFields,\n\tisCreatedFromStudio,\n\tgetFormProperties,\n\tgetEntityField,\n\tgetDefaultProperties,\n\tgetPatchList,\n\tkeyReplacer: replacer,\n\tvalueConverter,\n\tfilterFormPatch,\n\tgetCurrentFormAttributes,\n\tmergeFormAttributes,\n\tcamelToDashCase,\n\tdashToCamelCase,\n\tisSamePositionInOriginal,\n\tgetWidgetType,\n\tisDefaultValue,\n\tgetReferenceProperty,\n\tgenerateEntityModelSchema,\n\tgetEntityModelFields,\n\tgetEntityModel,\n\tgetEntityViewItems,\n\tcheckTarget,\n\texploreTarget,\n\tgetViews,\n\tgenerateXMLToViewSchema,\n\tgenerateViewFromJson,\n\tgetChangeList,\n};\n","import React from \"react\";\nimport Grid from \"./Grid\";\nimport { PANEL_TYPE } from \"../constants\";\n\n/**\n * Form Component\n * Used As Main Container i.e. <form />\n */\nfunction FormComponent({ attrs = {}, items = [], design, widgets, ...rest }) {\n\t// render top level items as Widgets using Context FormConsumer\n\tconst rootPanel = React.useMemo(() => {\n\t\tconst sidebar = items.filter((k) => widgets[k] && ['true', true].includes(widgets[k].sidebar));\n\t\tconst mainItems = items.filter((k) => widgets[k] && !['true', true].includes(widgets[k].sidebar));\n\t\tconst hasSidebar = sidebar.length > 0;\n\n\t\treturn hasSidebar\n\t\t\t? {\n\t\t\t\t\titems: [\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tlayout: PANEL_TYPE.grid,\n\t\t\t\t\t\t\titems: mainItems,\n\t\t\t\t\t\t\tcolSpan: 9,\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tlayout: PANEL_TYPE.grid,\n\t\t\t\t\t\t\titems: sidebar,\n\t\t\t\t\t\t\tcolSpan: 3,\n\t\t\t\t\t\t},\n\t\t\t\t\t],\n\t\t\t  }\n\t\t\t: {\n\t\t\t\t\titems: [\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tlayout: PANEL_TYPE.grid,\n\t\t\t\t\t\t\titems: mainItems,\n\t\t\t\t\t\t\tcolSpan: 12,\n\t\t\t\t\t\t},\n\t\t\t\t\t],\n\t\t\t  };\n\t}, [items, widgets]);\n\n\treturn (\n\t\t<div className=\"flex-container\">\n\t\t\t{rootPanel.items.map(({ items, colSpan, ...attrs }, i) => (\n\t\t\t\t<div className={`flex-item span-${colSpan}`} key={i}>\n\t\t\t\t\t<Grid\n\t\t\t\t\t\tkey={i}\n\t\t\t\t\t\tdesign={design}\n\t\t\t\t\t\tclassName=\"form-body\"\n\t\t\t\t\t\titems={items}\n\t\t\t\t\t\tattrs={attrs}\n\t\t\t\t\t\t_type={rest._type}\n\t\t\t\t\t\twidgets={widgets}\n\t\t\t\t\t\terrorList={rest.errorList}\n\t\t\t\t\t\tcanRemove={rest.canRemove}\n\t\t\t\t\t/>\n\t\t\t\t</div>\n\t\t\t))}\n\t\t</div>\n\t);\n}\n\nexport default FormComponent;\n","import React, { useEffect } from \"react\";\nimport AxelorService from \"./../services/axelor.rest\";\n\nconst metaViewService = new AxelorService({\n\tmodel: \"com.axelor.meta.db.MetaView\",\n});\n\nfunction OneToMany({ attrs, id }) {\n\tconst { gridView, targetModel: target, title, autoTitle, action } = attrs;\n\tconst [gridItems, setGridItems] = React.useState([]);\n\tuseEffect(() => {\n\t\tasync function getGrid() {\n\t\t\tlet viewName = gridView;\n\t\t\tif(action) {\n\t\t\t\tconst _context = {\n\t\t\t\t\t_id: null,\n\t\t\t\t};\n\t\t\t\tconst data = {\n\t\t\t\t\taction,\n\t\t\t\t\tmodel:  \"com.axelor.meta.db.MetaAction\",\n\t\t\t\t\tdata: {\n\t\t\t\t\t\tcontext: _context,\n\t\t\t\t\t},\n\t\t\t\t}\n\n\t\t\t\tconst actionResult = await metaViewService.action(data);\n\t\t\t\tif(actionResult.data && actionResult.data[0] && actionResult.data[0].view && actionResult.data[0].view.views) {\n\t\t\t\t\tconst view = actionResult.data[0].view.views.find(v => v.type === 'grid');\n\t\t\t\t\tif(view) {\n\t\t\t\t\t\tviewName = view.name;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\tconst payload = {\n\t\t\t\tmodel: target,\n\t\t\t\tdata: {\n\t\t\t\t\ttype: \"grid\",\n\t\t\t\t\tname: viewName,\n\t\t\t\t},\n\t\t\t};\n\t\t\tif(viewName) {\n\t\t\t\tmetaViewService.view(payload).then((res) => {\n\t\t\t\t\tif (res.data && res.data.view) {\n\t\t\t\t\t\tconst { items } = res.data.view;\n\t\t\t\t\t\tsetGridItems(items);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\tsetGridItems([]);\n\t\t\t}\n\t\t}\n\t\tgetGrid();\n\t}, [gridView, target, id, action]);\n\treturn (\n\t\t<div>\n\t\t\t<div className=\"one-to-many-header\">\n\t\t\t\t<span>{title || autoTitle}</span>\n\t\t\t\t<div>\n\t\t\t\t\t<span>New</span>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<div className=\"one-to-many-row\">\n\t\t\t\t{gridItems.map((item, i) => (\n\t\t\t\t\t<span className=\"one-to-many-col one-to-many-col-border\" key={i}>\n\t\t\t\t\t\t{item.autoTitle}\n\t\t\t\t\t</span>\n\t\t\t\t))}\n\t\t\t</div>\n\t\t</div>\n\t);\n}\n\nexport default OneToMany;\n","import React from \"react\";\nimport classNames from \"classnames\";\nimport { IDS, FIELD_TYPE, TYPE } from \"../constants\";\nimport OneToMany from \"./OneToMany\";\n\n// filter html(tags) compatible attributes\nconst filterInputProps = (props) => {\n\tconst allowed = [\n\t\t\"name\",\n\t\t\"title\",\n\t\t\"defaultValue\",\n\t\t\"placeholder\",\n\t\t\"readOnly\",\n\t\t\"checked\",\n\t\t\"disabled\",\n\t\t\"rows\",\n\t\t\"required\",\n\t];\n\t// return valid object with values\n\treturn allowed.reduce((obj, attr) => {\n\t\tif (props[attr] !== undefined) obj[attr] = props[attr];\n\t\tif (attr === \"required\") {\n\t\t\tobj[attr] = props[attr] === \"true\";\n\t\t}\n\t\treturn obj;\n\t}, {});\n};\n\n// Plain Textbox\nexport const TextInput = (props) => {\n\treturn <input type=\"text\" autoComplete=\"off\" {...props} className=\"text-input\" />;\n};\n\n// Multiline Textbox i.e. Textarea\nexport const MultiTextInput = (props) => {\n\treturn <textarea rows={6} {...props} />;\n};\n\n// Blank Spacer to fill up space between two cells of Grid\nexport const Spacer = (props) => <div className=\"spacer\" />;\n\nexport const Separator = (props) => (\n\t<div className=\"spacer\">\n\t\t<hr className=\"separator-field\" />\n\t</div>\n);\n\nexport const Boolean = ({ inputProps, ...props }) => (\n\t<div className=\"boolean-wrapper\">\n\t\t<input {...inputProps} type=\"checkbox\" />\n\t\t<span className=\"boolean-text\" title={props.title || props.name}>{props.title || props.name}</span>\n\t</div>\n);\n\n// Button component\nexport const Button = ({ title, ...props }) => (\n\t<div className=\"button-container\">\n\t\t<button {...props} className=\"button-view\" title={title}>{title}</button>\n\t</div>\n);\n\nexport const MenuItem = ({ title, ...props }) => (\n\t<div className=\"menu-item-container\">{title}</div>\n);\n\nexport const Hilite = ({ color, background, strong }) => {\n\treturn (\n\t\t<div\n\t\t\tclassName={classNames(\n\t\t\t\t`hilite hilite hilite-background-${background} hilite-text-${color}`,\n\t\t\t\t{ \"hilite-strong\": strong }\n\t\t\t)}\n\t\t>\n\t\t\thilite\n\t\t</div>\n\t);\n};\n\n/**\n * Form \"Field\" Component\n * Used For User Inputs\n */\nfunction FieldComponent({ id, attrs }) {\n\t// check for dump field for empty panels\n\tif (id === IDS.dumpField) {\n\t\treturn <div className=\"dump-field\" />;\n\t}\n\n\tconst { name, title, serverType, multiline, type, autoTitle } = attrs;\n\tconst inputProps = filterInputProps(attrs);\n\tlet _type =\n\t\tserverType && serverType !== \"field\" ? serverType.toLowerCase() : type;\n\t\tswitch (_type?.toLowerCase()) {\n\t\tcase FIELD_TYPE.boolean:\n\t\t\treturn (\n\t\t\t\t<Boolean\n\t\t\t\t\ttitle={title || autoTitle}\n\t\t\t\t\tname={name}\n\t\t\t\t\tinputProps={inputProps}\n\t\t\t\t/>\n\t\t\t);\n\t\tcase FIELD_TYPE.spacer:\n\t\t\treturn <Spacer />;\n\t\tcase FIELD_TYPE.hilite:\n\t\t\treturn <Hilite {...attrs} />;\n\t\tcase FIELD_TYPE.separator:\n\t\tcase TYPE.divider:\n\t\t\treturn <Separator />;\n\t\tcase TYPE.menuItem:\n\t\t\treturn <MenuItem title={title} />;\n\t\tcase FIELD_TYPE.button:\n\t\t\treturn <Button {...inputProps} title={title || name} />;\n\t\tcase \"selection\":\n\t\tcase \"label\": {\n\t\t\treturn <span dangerouslySetInnerHTML={{ __html: title }} />;\n\t\t}\n\t\tcase \"panel-dashlet\":\n\t\tcase \"panel-related\":\n\t\tcase \"one-to-many\":\n\t\t\treturn <OneToMany attrs={attrs} id={id} />;\n\t\tdefault:\n\t\t\treturn (\n\t\t\t\t<React.Fragment>\n\t\t\t\t\t{<label className=\"widget label\" title={title || attrs.autoTitle || name}>{title || attrs.autoTitle || name}</label>}\n\t\t\t\t\t{multiline ? (\n\t\t\t\t\t\t<MultiTextInput {...inputProps} />\n\t\t\t\t\t) : (\n\t\t\t\t\t\tattrs.widget === \"Image\" ?\n\t\t\t\t\t\t\t<img alt={title || attrs.autoTitle || name} src=\"./images/not_found.png\" className=\"image-widget\" />\n\t\t\t\t\t\t:\n\t\t\t\t\t\t<TextInput\n\t\t\t\t\t\t\ttype={serverType === FIELD_TYPE.number ? \"number\" : \"text\"}\n\t\t\t\t\t\t\t{...inputProps}\n\t\t\t\t\t\t/>\n\t\t\t\t\t)}\n\t\t\t\t</React.Fragment>\n\t\t\t);\n\t}\n}\n\nexport default FieldComponent;\n","import React from \"react\";\nimport classNames from \"classnames\";\nimport { GridContainer, useGridWidget } from \"./Grid\";\n\nconst panelAttrs = { cols: 1 };\n\n/**\n * Panel Component\n * Used As Container to group Field Component like form group\n */\nfunction TabPanelComponent(props) {\n\tconst WidgetComponent = useGridWidget();\n\tconst { id, attrs, isDragging, isTab = false, ...rest } = props;\n\tconst { title, items = [] } = attrs;\n\tlet { current } = attrs;\n\tconst tabs = [...items.slice()].reduce((all, tab) => all.concat([tab, 0]), [\n\t\t0,\n\t]);\n\t// reuse common tab attributes\n\tconst getTabAttributes = (id, index) => ({\n\t\tkey: !id ? `${id}${index}` : id,\n\t\tid,\n\t\tmeta: {\n\t\t\thorizontal: true,\n\t\t},\n\t\tindex,\n\t\tpanelId: props.id,\n\t\tpanelColumns: attrs.cols,\n\t\ttabId: props.id,\n\t});\n\tlet activeTabIndex = items.indexOf(current);\n\t// if active tab index not found, take first element as active one\n\tif (activeTabIndex === -1) {\n\t\tactiveTabIndex = 0;\n\t\tcurrent = items.length ? items[0] : 0;\n\t}\n\n\treturn (\n\t\t<React.Fragment>\n\t\t\t{title && <div\n\t\t\t\tclassName={classNames(\"panel-header panel-tab-header\", {\n\t\t\t\t\tinline: isTab,\n\t\t\t\t})}\n\t\t\t>\n\t\t\t\t{title}\n\t\t\t</div>}\n\t\t\t{!isTab && (\n\t\t\t\t<GridContainer className={\"panel-body\"} attrs={panelAttrs}>\n\t\t\t\t\t<div\n\t\t\t\t\t\tclassName={classNames(\"tabs\", { \"empty-tabs\": tabs.length === 1 })}\n\t\t\t\t\t>\n\t\t\t\t\t\t{tabs.map(\n\t\t\t\t\t\t\t(tab, i) =>\n\t\t\t\t\t\t\t\tWidgetComponent && (\n\t\t\t\t\t\t\t\t\t<WidgetComponent\n\t\t\t\t\t\t\t\t\t\t{...rest}\n\t\t\t\t\t\t\t\t\t\t{...getTabAttributes(tab, i)}\n\t\t\t\t\t\t\t\t\t\tisTab={true}\n\t\t\t\t\t\t\t\t\t\tclassName={current === tab ? \"active-tab\" : \"\"}\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t)}\n\t\t\t\t\t</div>\n\t\t\t\t\t{items.length > 0 && WidgetComponent && (\n\t\t\t\t\t\t<WidgetComponent\n\t\t\t\t\t\t\t{...rest}\n\t\t\t\t\t\t\t{...getTabAttributes(current, activeTabIndex)}\n\t\t\t\t\t\t/>\n\t\t\t\t\t)}\n\t\t\t\t</GridContainer>\n\t\t\t)}\n\t\t</React.Fragment>\n\t);\n}\n\n//panel tabs-panel\nexport default TabPanelComponent;\n"],"sourceRoot":""}