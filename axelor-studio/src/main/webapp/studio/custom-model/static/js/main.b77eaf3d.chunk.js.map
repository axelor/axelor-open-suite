{"version":3,"sources":["Properties/widgetList.js","Properties/propertyFields.js","Properties/properties.helper.js","constants.js","Toolbar/api.js","components/FieldComponent.js","Panels/Tabs/Field.js","Panels/Tabs/AddPanelView.js","common.func.js","components/SearchView.js","components/SelectComponent.js","components/TranslationGrid.js","Toolbar/DeleteConfirmation.js","Properties/index.js","Panels/Tabs/PropertiesView.js","Panels/SidePanel.js","Editor/utils.js","Editor/index.js","Panels/MainPanel.js","Toolbar/Select.js","Toolbar/customModelSearch.js","Toolbar/ViewSelection.js","Toolbar/Toolbar.js","custom-hooks/useKeyPress.js","store/optimizeExtension.js","Toolbar/ToolbarContainer.js","App.js","index.js","services/http.js","services/axelor.rest.js","store/context.js","store/xpathGenerator.js","utils.js","components/Grid.js","components/Panel.js","store/computeXML.js","store/validation.js","Properties/fa-icons.js","Properties/list.js","Properties/fieldTypes.js","components/Menu.js","components/Registery.js","components/Widget.js","components/Form.js","components/RelationalFieldGridView.js","components/Field.js","fields.js","store/extensionGenerator.js","components/TabPanel.js"],"names":["selectWidget","data","boolean","integer","string","text","binary","date","datetime","time","button","decimal","Name","props","StringField","name","title","required","readOnly","regex","regexErrorMessage","unique","isDisabled","properties","editWidgetType","metaFieldStore","modelType","MODEL_TYPE","BASE","CUSTOM","id","type","requiredFor","Type","column","selection","formatter","value","tab","entityIndex","indexOf","substring","SelectableType","StaticSelectField","defaultOption","disableClearable","DummyType","DataTypes","Title","translationView","DefaultValue","dependModelType","AppBuilder","ObjectSelectionField","ref","Help","Sequence","IntegerField","Roles","multiple","ValueExpression","UpdateSelection","BooleanField","uncheckDialog","Selection","SelectField","valueField","requiredWhen","requiredNegation","property","updateSelection","SelectionText","depends","dependValue","Widget","widgetList","OnChange","canAddNew","commaSeparated","OnNew","Min","Max","JsonRelationalField","getValue","change","_type","serverType","length","Domain","Prompt","parentField","SelectionIn","showInCustomField","Value","ValueAdd","ValueDel","Refresh","Active","shouldRender","list","xPath","includes","TargetJsonModel","displayField","TargetModel","GridView","needsTargetModel","relationalFields","OneToMany","ManyToMany","ManyToOne","FormView","Required","defaultValue","ColumnSequence","ReadOnly","Hidden","VisibleInGrid","ShowIf","HideIf","If","RequiredIf","ReadOnlyIf","IncludeIf","ValidIf","Css","Editable","ColSpan","Array","fill","map","_","i","toString","getOptionLabel","option","parentPanel","TYPE","toolbar","menubar","ItemSpan","IsGenerateMenu","MenuBuilderTitle","MenuBuilderParent","shouldFetchInStart","limit","getMenuBuilderTitle","parent","find","item","parentText","filter","f","ShowTitle","CanSearch","IfModule","Height","Action","Field","CanMove","OrderBy","IncludeView","IncludeFrom","Sidebar","Model","Color","Background","Strong","Image","panel","tabs","field","dumpField","form","panelStack","panelDashlet","panelRelated","panelInclude","menu","menuItem","divider","ItemTypes","CONTAINER","ROOTCONTAINER","ITEM","DUMMY","FIELD_TYPE","number","spacer","separator","hilite","PANEL_TYPE","stack","flow","grid","custom","GRID_SIZE","max","IDS","createWidgets","Symbol","customForm","PANEL_PROPS","colSpan","cols","image","items","layout","mappedBy","undefined","model","modelField","relationship","widgetAttrs","JSON","stringify","showTitle","itemSpan","OneToOne","typeReplacer","include","MANY_TO_MANY","MANY_TO_ONE","ONE_TO_ONE","ONE_TO_MANY","ENTITY_TYPE","META","DEFAULT_VALUE","readonly","hidden","sidebar","canCollapse","stacked","canMove","canSearch","multiline","conditionProperties","readonlyIf","requiredIf","hideIf","collapseIf","otherNoQuoteProps","metaJsonFieldService","AxelorService","metaModelService","appBpmService","appUserService","metaViewService","modelService","metaAttrsService","metaSelectService","selectionBuilderService","metaTranslationService","fetchCustomFields","_domain","fullName","search","sortBy","saveCustomModel","a","save","res","status","fields","getFields","all","$version","version","e","Promise","updatedField","response","updatedFields","fetchJSONFields","ids","update","record","criteria","push","fieldName","operator","then","schema","generateCustomModelSchema","draft","l","widgets","getMenuBuilder","menuBuilder","0","loader","removeCustomModel","removeAll","getEnableAppBuilder","payload","_domainContext","code","offset","bpmResult","isArray","enableAppBuilder","generateMenuChange","customModel","_context","_model","_id","action","context","fetchCustomModel","modelId","handleError","fetch","related","result","fetchViews","view","viewCriteria","viewList","views","Utils","getViews","fetchAttrsList","conditionPropertiesKeys","Object","keys","conditionPropertiesValues","values","startsWith","endsWith","replace","saveAttrsList","saveAll","deleteAttrsList","fetchLanguages","d","getTranslationList","keyList","saveTranslationList","deleteTranslationList","fetchUserPreferences","info","userInfo","userResponse","getSelectionText","metaSelect","selectionText","payloadData","actionResponse","_properties","useStyles","makeStyles","fieldsContainer","display","justifyContent","alignItems","background","borderRadius","fieldImage","padding","fieldLabel","fontWeight","icon","width","height","backgroundRepeat","backgroundSize","backgroundPosition","position","gridContainer","flexWrap","labelContainer","whiteSpace","overflow","textOverflow","getImageURL","widget","FieldComponent","classes","attrs","targetName","className","Tooltip","arrow","translate","placement","Grid","container","xs","style","backgroundImage","Typography","variant","camleCaseString","theme","breakpoints","down","classNames","fieldGroupTitle","color","React","memo","state","useStore","fieldTypes","modelFields","fieldType","index","Fragment","key","editorType","findIndex","w","showField","design","component","isCoreField","isPalleteField","useDebounceEffect","handler","interval","isMounted","useRef","useEffect","current","timer","setTimeout","clearTimeout","root","backgroundColor","palette","paper","maxHeight","input","marginRight","titleHeader","borderBottom","listItem","paddingTop","paddingBottom","closeText","textTransform","ResponsiveDialog","onChange","handleClose","total","useTheme","fullScreen","useMediaQuery","handleItemClick","useCallback","canNext","canPrev","getLabel","Dialog","maxWidth","fullWidth","open","onClose","aria-labelledby","DialogTitle","DialogContent","Input","searchText","setSearchText","target","IconButton","onClick","onPrevious","disabled","onNext","List","ListItem","role","dense","ListItemText","primary","DialogActions","Button","autoFocus","createFilterOptions","autoComplete","marginTop","label","fontSize","popperAutoComplete","error","marginBottom","SelectComponent","_props","preData","propertyList","setPropertyList","split","val","useState","setData","setsearchText","moreDialog","setMoreDialog","setOffset","setTotal","initialFetch","setInitialFetch","targetModel","handleInputChange","reason","getSelectValue","join","fetchOptions","uniqueData","uniqBy","optionDebounceHandler","getInputAsOption","handleSearch","handleNext","newOffset","handlePrevious","handleChange","_value","fromDialog","v","inputValue","updatedValue","gridView","getDefaultGridFormName","formView","inputFocused","clearIndicator","popupIndicator","popper","noOptions","options","forcePopupIcon","freeSolo","size","onInputChange","filterOptions","params","filtered","splice","showMore","o","renderInput","TextField","InputLabelProps","row","languageText","textAlign","TranslationGrid","keyValue","rest","translationList","translations","setTranslations","handleTranslationChange","message","language","_translations","newList","translationIndex","handleTranslationUpdate","languageList","lang","onBlur","minWidth","DeleteConfirmation","onOk","aria-describedby","DialogContentText","translationInput","translationInputView","top","outlinedRoot","borderColor","borderWidth","notchedOutline","focused","switchBase","checked","track","iconOutlined","panelTitle","panelMargin","margin","disableInput","translateButton","staticSelectMenuItem","autoCompleteInput","autoCompleteOption","textFieldInput","booleanInputLabel","PropertiesContext","createContext","isValueGenerated","StringInput","onTranslationRemove","clearable","confirm","setConfirm","min","useContext","Label","placeholder","parse","Boolean","handleTranslationClick","newValue","generateFieldUniqueTitle","getProperty","handleTranslationRemove","removeTranslation","savedValue","helperText","InputProps","endAdornment","flag","inputProps","minRows","onFocus","isNaN","Number","trim","openAlert","setAlertOpen","getPropertyValue","fieldValue","handleOnChange","FormControlLabel","control","Switch","StaticSelection","helper","toLowerCase","ColorTag","groupLabel","autoHighlight","renderOption","RenderPropertyField","elements","errors","entityType","actualType","checkDepend","checkModel","PropertiesProvider","children","Provider","Properties","onWidgetChange","editWidget","customFieldWidgets","errorList","isSelectionField","selectedType","tz","typeFieldIndex","overview","fieldOptions","widgetAttributes","inputLabel","labelWidth","setLabelWidth","changedPropertyName","newProperties","obj","offsetWidth","hasPropertyToShow","capitalizeFirst","flexDirection","boxShadow","borderTop","minHeight","borderTopRightRadius","scrollbarWidth","borderBottomRightRadius","activeTab","ListAlt","PlaylistAdd","TabPanel","tabIndex","Paper","square","Tabs","event","TabIndicatorProps","Tab","customScrollTo","element","scrollableParent","includeHidden","getComputedStyle","excludeStaticParent","overflowRegex","document","body","parentElement","test","overflowY","overflowX","getScrollParent","window","requestAnimationFrame","scrollTo","offsetTop","behavior","uiContainer","loaderContainer","zIndex","border","bottom","left","right","emptyFormInfo","FormViewUI","store","customPanelRef","createRef","formInfo","focus","CircularProgress","onSelect","dragWidget","hoverWidget","onMove","onDrag","onHover","setHoverAttr","addTabPanel","Form","customFieldItems","Editor","autoCompleteRoot","marginLeft","inputView","popperView","searchFilter","filterData","onSearch","loading","setLoading","setList","searchMore","setSearchMore","models","uniqueList","service","_data","debounceHandler","handleTextChange","clearOnEscape","getOptionSelected","modelSearch","modelResult","modelIndex","m","packageName","modelTypes","startLoader","clearHistory","reset","modelName","handleModelSelect","exView","initialItems","initialWidgets","customFields","extensionXML","extensionView","originalXML","selectedView","metaFields","extensionMoves","attrsList","initialTranslationList","removedTranslationList","_fields","typeName","handleViewSelect","generateXMLToViewSchema","translationNames","originalViewData","convert","xml2json","xml","compact","fullTagEmptyElement","_viewSearch","fieldList","generateXpath","viewFilter","modelFilter","metaFieldFilter","handleMetaFieldSelect","newId","uniqueId","handleTypeSelect","updater","handleViewFilterData","computed","extension","filterSelectedOptions","toolbarContainer","toolItemView","crudIcon","cursor","selectionContainer","flex","toolbarActions","disableBtn","ToolbarButton","saveView","saveCustomFieldView","removeView","onNew","isRemoveDisabled","xmlId","isNewDisabled","isSaveDisabled","callback","node","callbackRef","useLayoutEffect","handleKeyPress","some","ctrlKey","preventDefault","targetNode","addEventListener","removeEventListener","useKeyPress","onSidePanelToggle","classnames","refresh","undo","pastLength","redo","futureLength","hasIndex","path","isSameAsOriginal","originalWidgets","attributes","itemExplore","exploreTarget","widgetExplore","self","attributeName","dashToCamelCase","widgetValue","maskedValue","maskName","getUpdatedAttrsList","newAttrsList","removedAttrsList","moves","movesMap","Map","currentWidgets","forEach","widgetId","eGeneratePath","getWidgets","move","convertConditionName","newMove","assign","set","moveExplore","pathText","endIndex","getName","fieldIndex","attr","isOriginal","isCurrent","selectValueRegEx","newAttrsIndex","match","changedAttrsList","optimizeExtension","processed","explore","p","_list","_item","lastItem","k","filterListForAttribute","canRemoveReplace","insertIndex","source","moveIndex","removeIndex","filterListForRemove","customFieldService","getChangedTranslationList","initialList","deletedTranslationList","changedTranslationList","initialItem","deleteConfirmationDialog","setDeleteConfirmationDialog","closeLoader","showAlert","dialog","callbackfn","getDefaultProperties","clearView","removedCustomFields","isTabsPanelEmpty","panelTab","getCustomModelFields","propertyValues","Set","formProperties","getFormProperties","isGenerateMenu","menuBuilderTitle","parentMenu","menuBuilderParent","reload","errorMessage","exemptAttributes","isCreatedFromStudio","viewSearch","patch","generateView","processXML","json2xml","fetchResult","metaView","originalSchema","generateViewFromJson","getXML","isAttrsChanged","conditionalValues","isTranslationChanged","getExistingExtension","json","handleNew","customWidgets","fromEntries","entries","isPanelTab","extraProps","failedRes","r","customFieldHasChanges","handleConfirmationClose","deleteView","handleRemoveConfirmation","handleSidePanelToggle","sidePanel","dangerouslySetInnerHTML","__html","renderDialog","past","future","toolbarWrapper","panelContainer","mainPanel","createTheme","typography","fontFamily","AppContent","isResponsive","gridRef","App","DndProvider","backend","Backend","ThemeProvider","ReactDOM","render","getElementById","lastCookieString","headers","Accept","lastCookies","readCookie","cookieString","cookie","reduce","parts","joinURL","subURL","services","this","baseURL","url","method","axios","request","credential","localStorage","getItem","username","password","login","interceptor","resolve","catch","relogin","setItem","removeItem","post","_subURL","records","logout","get","StoreContext","useStoreState","StoreProvider","setState","produce","useMutableState","hoverAttr","getAllChildrenIds","widgetType","collectIds","concat","onExtension","moveIds","generateExtension","generateHistory","isCustomField","extendList","setErrorList","caseConverter","isExtensionView","keyReplacer","valueConverter","parentId","x","Math","child","panelId","setPresent","object","original","destination","resolver","isMoved","_widgets","isNew","checkExclusive","isDrop","_extendList","_attrs","dragWidgetProps","extraAttr","_eWidgetAttr","_attrsWidgetAttr","hoverPanel","reorderGrid","checkGridEmptyCells","validateParentPanelItems","allWidgets","tabId","onRemove","widgetItems","unshift","isPanel","childrenIds","arrangeItems","arrangeGrid","validateOnRemove","getItemType","itemId","isFirstLevel","hasSameNameInParentItems","originalName","getSameItemIndex","getTypeWiseItemIndex","getWidgetType","isUniquePanel","canStopParentLink","findRoot","widgetIds","_widget","itemPath","itemIndex","word","str","toUpperCase","isCamelCase","convertedText","camelCase","textToConvert","slice","charAt","_t","getSpacer","other","isDummy","isDummyWidget","getGrid","trackElement","ind","span","fillRow","start","indices","modelFieldType","removeIds","emptyColumns","cell","every","removeWidget","isLastItemRemove","columnCells","rowCells","meta","gridRow","findCol","deleteItem","isDummyItem","$id","otherProps","targetWidget","validate","dragWidgetItems","_items","destinationItems","hoverCellRowIndex","relatedColSpan","hoverType","existingColspan","newIds","widgetIndex","beforeWidgets","afterWidgets","cellIndex","rowIndex","isSpacer","lastItemIndex","collectWidgets","isRemovedFromSameList","sourcePanel","sourceItems","sourceItemIndex","isLastItem","isLastItemInSamePanel","hoverParent","horizontal","ceil","hoverPath","newWidgetIds","hoverWidgetParentItems","hoverWidgetId","actualHoverWidget","shouldInsertInParent","hoverPathInfo","targetInfo","isCreateWidget","shouldAdd","processMoves","exclusive","getColSpan","defaultColspan","getCols","_panelId","typeLateral","formType","formItems","tabItems","_ID","isTab","replacer","minSize","maxSize","camelToDashCase","editorKeyReplacer","_keyIndex","isDummyField","types","getCustomWidget","exempt","exemptedAttrs","isAttrHasDefaultValue","parentValue","shouldCheckParent","_obj","caseString","g","isDefaultValue","targetSplit","getElementToWidget","itemList","fieldTarget","itemTarget","_key","elementType","getElementName","TYPE_REPLACER","getElementTypes","autoTitle","getTitle","getSpecialType","getXMLToViewItems","exclude","getExtensionElements","chars","floor","random","randomString","isForm","isJson","modelString","viewName","dasherize","xmlString","indent","format","getWidgetAttrs","isModelField","squareIndex","additionalProps","countSequence","sequence","except","formWidth","getPatchList","xmlJson","filterFormPatch","patchList","getCurrentFormAttributes","mergeFormAttributes","formPatch","targetIndex","remove","isSamePositionInOriginal","hoverItemIndex","defaultType","getReferenceProperty","checkTarget","checkString","which","getChangeList","extensionXml","elems","moveElement","col","parentItemSpan","DEFAULTS","GridContainer","useGridWidget","WidgetComponent","setWidgetComponent","module","default","gridSize","columns","isStackLayout","spacerWidth","colWidth","rows","useMemo","cellIndice","isStack","getItemColspan","$cell","dummy","dummyPanel","addRow","fillColspan","addItem","occupiedSpan","remainSpan","fullGrid","draggable","upRow","midRow","addCell","$row","j","getFullGrid","c","columnIndex","gridRows","arr","cellPadding","cellSpacing","indice","isSeparator","colIndex","panelColumns","canRemove","inline","setAttributeOnNewWidget","inserted","_inserted","exemptedAttributes","attrIndex","cleatVirtualAction","generateNestedView","_subItems","getWidgetObject","getExtendJson2","insertOnNewPanel","lst","addErrorMessage","RegExp","fontAwesome","stringOption","existsCheck","uiOptions","conditions","valueExpr","roles","integerOption","decimalOption","booleanOption","datetimeOption","panelOption","panelStackOption","panelTabOption","buttonOption","fontAwesomeList","seperatorOption","spacerOption","labelOption","viewerOption","manyToOneOption","manyToManyAndOneToManyOption","customRelationOption","formOption","actions","commonOption","dummyOption","viewOption","gridOption","panelDashletOption","menuItemOption","dividerOption","menuOption","panelRelatedOption","panelIncludeOption","hiliteOption","openMenu","setOpenMenu","handleToggleMenu","stopPropagation","Registery","dump_field","Panel","Menu","CardSource","canDrag","WIDGET_TYPE","beginDrag","endDrag","monitor","didDrop","newProps","isDragging","CardTarget","hover","dragIndex","dragPanelId","dragId","dragAttrs","hoverIndex","hoverPanelId","hoverId","hoverAttrs","panelSet","maxIndex","gridTab","rowCount","stateItems","widgetKey","isOver","shallow","parentWidgetAttrs","dragAttrsWidgetAttrs","canDrop","connectDragSource","connectDropTarget","highlighted","hovered","DefaultWidgetComponent","visible","registryField","Registry","componentProps","isFormField","isEdit","isTabWidget","isTabWidgetContent","showRemove","isExist","edit","active","SimpleWidget","DraggableWidget","compose","DropTarget","connect","dropTarget","DragSource","dragSource","FormComponent","rootPanel","mainItems","excludedUITypes","showInGrid","visibleInGrid","RelationalFieldGridView","targetJsonModel","gridItems","setGridItems","gridTitle","setGridTitle","actionResult","jsonFields","jsonAttrs","displayFields","allFields","TextInput","MultiTextInput","Spacer","Separator","MenuItem","Hilite","strong","DefaultWidget","alt","src","getWidgetAttrsObject","itemSource","uiFields","subViews","panelAttrs","TabPanelComponent","getTabAttributes","activeTabIndex"],"mappings":"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BACA,YACA,eACA,yCACA,YACA,aACA,eACA,uBACA,uBACA,wBACA,qBACA,gBACA,gBACA,iBACA,cACA,WACA,aACA,gBACA,uBACA,uBACA,yBACA,yBACA,0BACA,uBACA,wBACA,qBACA,gBACA,gBACA,iBACA,cACA,YACA,gBACA,cACA,cACA,sBACA,iCACA,cACA,QACA,uBACA,gBACA,cACA,mBACA,SACA,cACA,UACA,eACA,iBACA,aACA,UACA,UACA,aACA,aACA,eACA,eACA,eACA,eACA,eACA,mBACA,kBACA,kBACA,qBACA,4BACA,SACA,UACA,aACA,oBACA,UACA,YACA,gBACA,kBACA,aACA,gBACA,mBACA,eACA,sBACA,aACA,eACA,WACA,eACA,iBACA,UACA,UACA,UACA,UACA,cACA,gBACA,aACA,eACA,SACA,SACA,cACA,gBACA,cACA,cACA,SACA,gBACA,SACA,gBACA,cACA,sBACA,sBACA,gBACA,qBACA,sBACA,YACA,kBACA,SACA,gBACA,gBACA,iBACA,yBACA,yBACA,0BACA,uBACA,cACA,qBACA,eACA,QACA,aACA,oBACA,iBACA,YACA,mBACA,eACA,eACA,aACA,iBACA,WACA,kBACA,WACA,kBACA,oBACA,kBACA,oBACA,yBACA,yBACA,0BACA,uBACA,kBACA,kBACA,mBACA,gBACA,WACA,YACA,YACA,cACA,oBACA,iBACA,eACA,aACA,WACA,WACA,WACA,oBACA,kBACA,SACA,UACA,eACA,aACA,cACA,YACA,SACA,UACA,aACA,aACA,eACA,gBACA,kBACA,cACA,gBACA,aACA,cACA,oBACA,YACA,UACA,eACA,sBACA,iBACA,qBACA,UACA,gBACA,UACA,UACA,WACA,SACA,aACA,eACA,cACA,cACA,UACA,cACA,YACA,eACA,aACA,gBACA,aACA,UACA,YACA,kBACA,cACA,cACA,qBACA,uBACA,aACA,YACA,UACA,UACA,aACA,WACA,gBACA,gBACA,YACA,cACA,gBACA,mBACA,qBACA,qBACA,YACA,YACA,UACA,SACA,UACA,cACA,iBACA,wBACA,0BACA,YACA,kBACA,mBACA,0BACA,SACA,eACA,gBACA,QACA,cACA,gBACA,uBACA,qBACA,mBACA,kBACA,SACA,UACA,YACA,iBACA,UACA,oBACA,kBACA,iBACA,kBACA,kBACA,kBACA,YACA,gBACA,kBACA,oBACA,uBACA,kBACA,eACA,iBACA,kBACA,iBACA,gBACA,aACA,UACA,YACA,UACA,uBACA,aACA,iBACA,UACA,oBACA,YACA,WACA,WACA,YACA,cACA,YACA,cACA,iBACA,mBACA,UACA,kBACA,eACA,kBACA,cACA,aACA,gBACA,oBACA,aACA,cACA,aACA,WACA,SACA,QACA,UACA,WACA,gBACA,gBACA,QACA,eACA,UACA,SACA,gBACA,YACA,gBACA,mBACA,YACA,YACA,WACA,WACA,aACA,WACA,YACA,iBACA,wBACA,0BACA,wBACA,mBACA,oBACA,cACA,UACA,WACA,cACA,iBACA,iBACA,mBACA,iBACA,iBACA,kBACA,eACA,kBACA,kBACA,oBACA,iBACA,qBACA,kBACA,iBACA,iBACA,qBACA,aACA,WACA,YACA,gBACA,WACA,aACA,eACA,aACA,UACA,gBACA,WACA,eACA,iBACA,iBACA,iBACA,mBACA,oBACA,iBACA,qBACA,WACA,WACA,cACA,cACA,aACA,eACA,SACA,WACA,UACA,WACA,YACA,cACA,UACA,iBACA,SACA,eACA,iBACA,uBACA,cACA,aACA,YACA,YACA,SACA,cACA,SACA,gBACA,SACA,cACA,YACA,YACA,mBACA,UACA,aACA,WACA,aACA,gBACA,cACA,eACA,eACA,eACA,gBACA,iBACA,gBACA,UACA,cACA,qBACA,YACA,WACA,UACA,cACA,aACA,aACA,oBACA,UACA,qBACA,qBACA,sBACA,mBACA,gBACA,WACA,YACA,kBACA,gBACA,oBACA,UACA,SACA,gBACA,WACA,aACA,eACA,UACA,iBACA,iBACA,mBACA,mBACA,YACA,cACA,YACA,YACA,YACA,WACA,aACA,eACA,gBACA,sBACA,WACA,kBACA,kBACA,oBACA,cACA,YACA,kBACA,UACA,WACA,YACA,kBACA,gBACA,mBACA,WACA,aACA,YACA,iBACA,kBACA,oBACA,mBACA,0BACA,cACA,YACA,WACA,mBACA,aACA,eACA,iBACA,iBACA,mBACA,eACA,eACA,WACA,WACA,kBACA,oBACA,SACA,YACA,YACA,mBACA,qBACA,aACA,WACA,kBACA,WACA,eACA,eACA,gBACA,oBACA,mBACA,eACA,iBACA,sBACA,WACA,UACA,iBACA,mBACA,UACA,UACA,iBACA,iBACA,mBACA,aACA,eACA,WACA,kBACA,kBACA,QACA,YACA,cACA,qBACA,uBACA,WACA,gBACA,iBACA,QACA,YACA,aACA,WACA,aACA,YACA,kBACA,mBACA,aACA,gBACA,YACA,YACA,aACA,YACA,WACA,eACA,gBACA,aACA,SACA,UACA,YACA,iBACA,kBACA,YACA,SACA,gBACA,SACA,WACA,WACA,SACA,YACA,UACA,cACA,YACA,YACA,kBACA,iBACA,YACA,UACA,YACA,YACA,WACA,eACA,sBACA,kBACA,oBACA,YACA,YACA,YACA,UACA,kBACA,kBACA,qBACA,mBACA,YACA,aACA,mBACA,cACA,YACA,aACA,iBACA,aACA,cACA,WACA,WACA,aACA,gBACA,aACA,cACA,oBACA,qBACA,iBACA,mBACA,UACA,oBACA,qBACA,qBACA,sBACA,cACA,eACA,eACA,sBACA,uBACA,aACA,gBACA,mBACA,aACA,WACA,aACA,YACA,cACA,oBACA,oBACA,UACA,eACA,qBACA,oBACA,iBACA,YACA,WACA,kBACA,mBACA,kBACA,iBACA,iBACA,mBACA,UACA,iBACA,mBACA,iBACA,mBACA,iBACA,wBACA,eACA,YACA,cACA,WACA,iBACA,iBACA,aACA,WACA,YACA,gBACA,SACA,UACA,WACA,UACA,cACA,gBACA,mBACA,cACA,iBACA,gBACA,QACA,cACA,aACA,eACA,iBACA,mBACA,mBACA,mBACA,mBACA,mBACA,uBACA,sBACA,sBACA,yBACA,gCACA,gBACA,iBACA,mBACA,iBACA,eACA,YACA,WACA,kBACA,oBACA,qBACA,uBACA,UACA,iBACA,iBACA,gBACA,eACA,kBACA,eACA,eACA,WACA,iBACA,qBACA,WACA,aACA,UACA,YACA,iBACA,YACA,WACA,SACA,SACA,YACA,mBACA,kBACA,QACA,YACA,aACA,oBACA,cACA,eACA,UACA,sBACA,gBACA,YACA,YACA,gBACA,cACA,YACA,SACA,SACA,UACA,iBACA,mBACA,aACA,YACA,eACA,iBACA,gBACA,WACA,WACA,aACA,WACA,kBACA,gBACA,aACA,YACA,mBACA,kBACA,WACA,kBACA,UACA,QACA,0BACA,iBACA,gBACA,eACA,aACA,YACA,WACA,YACA,cACA,gBACA,oBACA,UACA,iBACA,kBACA,oBACA,qBACA,qBACA,oBACA,aACA,SACA,eACA,gBACA,gBACA,aACA,YACA,UACA,iBACA,kBACA,yBACA,WACA,QACA,eACA,UACA,SACA,WACA,aACA,kBACA,qB,uDCpsBD,IAAMC,EAAe,CACpBxoB,SAAU,CACTpoB,YAAK,CAAE6wC,aAAa,IACpBxvC,KACAe,KACAE,IACAE,IACAG,IACAC,KAEDylB,aAAc,CACbjlB,IACAH,KACAU,IACAoB,IACAjB,KACAE,IACAI,IACAC,IACAnE,YAAY,CAAEC,KAAM,QAASoC,gBAAiBxB,IAAWE,SACzDgE,MAED6rC,UAAW,CACV1qC,IACAG,IACArD,YAAa,CACZ/C,KAAM,YACNC,MAAO,cACPmC,gBAAiBxB,IAAWE,SAE7BuF,IACAC,KACAH,IACAW,KAED8pC,WAAY,CAACrqC,IAAQC,IAAQE,IAAYC,IAAYC,IAAWC,MAChEgqC,UAAW,CAAChuC,MACZiuC,MAAO,CAACnuC,KACRwlB,iBAAkB,CACjBnhB,IACA0B,IACA3F,YAAa,CACZ/C,KAAM,YACN2E,YAAa,cACbhE,UAAWC,IAAWE,OACtBsB,gBAAiBxB,IAAWE,WAKzBiwC,EAAgB,CACrB9oB,SAAU,CACTpoB,YAAK,CAAE6wC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","file":"static/js/main.b77eaf3d.chunk.js","sourcesContent":["const selectWidget = [\n\t\"NavSelect\",\n\t\"CheckboxSelect\",\n\t\"RadioSelect\",\n\t\"MultiSelect\",\n\t\"ImageSelect\",\n];\nconst data = {\n\tboolean: [\n\t\t\"InlineCheckbox\",\n\t\t\"Toggle\",\n\t\t\"BooleanSelect\",\n\t\t\"BooleanRadio\",\n\t\t\"BooleanSwitch\",\n\t\t...selectWidget,\n\t],\n\tinteger: [\n\t\t\"RelativeTime\",\n\t\t\"Duration\",\n\t\t\"Progress\",\n\t\t\"SelectProgress\",\n\t\t...selectWidget,\n\t],\n\tstring: [\n\t\t\"Email\",\n\t\t\"Url\",\n\t\t\"Password\",\n\t\t\"Html\",\n\t\t\"CodeEditor\",\n\t\t\"ImageLine\",\n\t\t...selectWidget,\n\t],\n\ttext: [\"Html\", \"CodeEditor\", ...selectWidget],\n\t\"many-to-one\": [\"SuggestBox\", \"Image\", \"binary-link\"],\n\t\"json-many-to-one\": [\"SuggestBox\", \"Image\", \"binary-link\"],\n\t\"one-to-one\": [\"SuggestBox\", \"Image\"],\n\t\"json-one-to-one\": [\"SuggestBox\", \"Image\"],\n\t\"many-to-many\": [\"TagSelect\"],\n\t\"json-many-to-many\": [\"TagSelect\"],\n\tbinary: [\"Image\", \"BinaryLink\", ...selectWidget],\n\tdate: [...selectWidget],\n\tdatetime: [...selectWidget],\n\ttime: [...selectWidget],\n\tbutton: [\"Button\", \"InfoButton\", \"ToolButton\"],\n\tdecimal: [\n\t\t\"RelativeTime\",\n\t\t\"Duration\",\n\t\t\"Progress\",\n\t\t\"SelectProgress\",\n\t\t...selectWidget,\n\t],\n};\n\nexport default data;\n","import {\n\tStringField,\n\tObjectSelectionField,\n\tIntegerField,\n\tSelectField,\n\tStaticSelectField,\n\tBooleanField,\n} from \"./fieldTypes\";\nimport widgetList from \"./widgetList\";\nimport { MODEL_TYPE, DataTypes, relationalFields, TYPE } from \"../constants\";\nimport { getMenuBuilderTitle } from \"./properties.helper\";\n\n/** Overview Fields */\nexport const Name = ({ ...props } = {}) =>\n\tStringField({\n\t\tname: \"name\",\n\t\ttitle: \"Name\",\n\t\trequired: true,\n\t\treadOnly: true,\n\t\tregex: /^[a-z]/i,\n\t\tregexErrorMessage: \"First Letter of the name should always be alphabet\",\n\t\tunique: true,\n\t\tisDisabled: ({ properties, metaFieldStore, editWidgetType, modelType }) => {\n\t\t\tif (modelType === MODEL_TYPE.BASE && editWidgetType !== \"customField\") {\n\t\t\t\t// const name = properties['name'];\n\t\t\t\t// const index = metaFieldStore.findIndex(field => field.name === name);\n\t\t\t\t// return index !== -1 ? true : false;\n\t\t\t\treturn true;\n\t\t\t}\n\t\t\tif (\n\t\t\t\tmodelType === MODEL_TYPE.CUSTOM &&\n\t\t\t\tproperties &&\n\t\t\t\tproperties.id &&\n\t\t\t\tproperties.type === \"form\"\n\t\t\t) {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t\treturn false;\n\t\t},\n\t\trequiredFor: [\n\t\t\t\"button\",\n\t\t\t\"label\",\n\t\t\t\"panel\",\n\t\t\t\"string\",\n\t\t\t\"panel-dashlet\",\n\t\t\t\"separator\",\n\t\t\t\"panel-stack\",\n\t\t\t\"integer\",\n\t\t\t\"date\",\n\t\t\t\"time\",\n\t\t\t\"datetime\",\n\t\t\t\"decimal\",\n\t\t\t\"one-to-many\",\n\t\t\t\"many-to-many\",\n\t\t\t\"boolean\",\n\t\t\t\"label\",\n\t\t\t\"viewer\",\n\t\t\t\"editor\",\n\t\t\t\"one-to-one\",\n\t\t\t\"spacer\",\n\t\t\t\"long\",\n\t\t\t\"hilite\",\n\t\t],\n\t\t...props,\n\t});\n\nexport const Type = StringField({\n\tname: \"type\",\n\tcolumn: \"type_name\",\n\ttitle: \"Type\",\n\trequired: true,\n\tselection: \"json.field.type\",\n\treadOnly: \"true\",\n\tformatter: (value, properties) => {\n\t\tif (properties.tab) {\n\t\t\treturn \"panel-tabs\";\n\t\t}\n\t\tconst entityIndex = value.indexOf(\"entity\");\n\t\tif (entityIndex !== -1) {\n\t\t\treturn value.substring(0, entityIndex);\n\t\t}\n\t\treturn value;\n\t},\n});\n\nexport const SelectableType = StaticSelectField({\n\tname: \"type\",\n\ttitle: \"Type\",\n\tcolumn: \"type_name\",\n\trequired: true,\n\tdata: [\"string\", \"integer\"],\n\tdefaultOption: false,\n\tdisableClearable: true,\n\tisDisabled: ({ properties, metaFieldStore, editWidgetType, modelType }) => {\n\t\tif (modelType === MODEL_TYPE.BASE && editWidgetType !== \"customField\") {\n\t\t\treturn true;\n\t\t}\n\t},\n});\n\nexport const DummyType = StaticSelectField({\n\tname: \"dummyType\",\n\ttitle: \"Type\",\n\tdata: [...DataTypes],\n});\n\nexport const Title = StringField({\n\tname: \"title\",\n\ttitle: \"Title\",\n\ttranslationView: false,\n});\n\nexport const DefaultValue = StringField({\n\tname: \"defaultValue\",\n\tdependModelType: MODEL_TYPE.CUSTOM,\n\ttitle: \"Default value\",\n});\n\nexport const AppBuilder = ObjectSelectionField({\n\tname: \"appBuilder\",\n\ttitle: \"App name\",\n\tref: \"com.axelor.studio.db.AppBuilder\",\n\tdependModelType: MODEL_TYPE.CUSTOM,\n});\n\nexport const Help = StringField({\n\tname: \"help\",\n\ttitle: \"Help\",\n\tdependModelType: MODEL_TYPE.CUSTOM,\n});\n\nexport const Sequence = IntegerField({\n\tname: \"sequence\",\n\ttitle: \"Sequence\",\n\tdependModelType: MODEL_TYPE.CUSTOM,\n});\n\n/** Roles Fields */\nexport const Roles = ObjectSelectionField({\n\tname: \"roles\",\n\ttitle: \"Roles\",\n\tref: \"com.axelor.auth.db.Role\",\n\tmultiple: true,\n\tdependModelType: MODEL_TYPE.CUSTOM,\n});\n\n/** ValueExpr Fields */\nexport const ValueExpression = {\n\tname: \"valueExpr\",\n\ttitle: \"Value expr\",\n\ttype: \"text\",\n\tdependModelType: MODEL_TYPE.CUSTOM,\n};\n\n/** Field Options Fields */\nexport const UpdateSelection = BooleanField({\n\tname: \"updateSelection\",\n\tdependModelType: MODEL_TYPE.CUSTOM,\n\ttitle: \"New selection\",\n\tuncheckDialog: true,\n});\n\nexport const Selection = SelectField({\n\tname: \"selection\",\n\ttitle: \"Selection\",\n\tref: \"com.axelor.meta.db.MetaSelect\",\n\tvalueField: \"name\",\n\tdependModelType: MODEL_TYPE.CUSTOM,\n\trequiredWhen: UpdateSelection.name,\n\trequiredNegation: true,\n\tisDisabled: (property, editWidgetType, modelType) => {\n\t\treturn property.updateSelection;\n\t},\n});\n\nexport const SelectionText = StringField({\n\tname: \"selectionText\",\n\ttype: \"text\",\n\tdepends: \"updateSelection\",\n\tdependValue: true,\n\tdependModelType: MODEL_TYPE.CUSTOM,\n\trequiredWhen: UpdateSelection.name,\n\ttitle: \"Select options\",\n});\n\nexport const Widget = StaticSelectField({\n\tname: \"widget\",\n\tdata: widgetList,\n\ttitle: \"Widget\",\n\tdependModelType: MODEL_TYPE.CUSTOM,\n});\n\nexport const OnChange = SelectField({\n\tname: \"onChange\",\n\tref: \"com.axelor.meta.db.MetaAction\",\n\tdependModelType: MODEL_TYPE.CUSTOM,\n\ttitle: \"On change\",\n\tmultiple: true,\n\tcanAddNew: true,\n\tcommaSeparated: true,\n});\n\nexport const OnNew = SelectField({\n\ttitle: \"On new\",\n\tname: \"onNew\",\n\tref: \"com.axelor.meta.db.MetaAction\",\n\tdependModelType: MODEL_TYPE.CUSTOM,\n\tmultiple: true,\n\tcommaSeparated: true,\n\tcanAddNew: true,\n});\n\nexport const OnLoad = SelectField({\n\ttitle: \"On load\",\n\tname: \"onLoad\",\n\tref: \"com.axelor.meta.db.MetaAction\",\n\tmultiple: true,\n\tcommaSeparated: true,\n\tcanAddNew: true,\n});\n\nexport const OnSave = SelectField({\n\tname: \"onSave\",\n\tref: \"com.axelor.meta.db.MetaAction\",\n\tmultiple: true,\n\tcommaSeparated: true,\n\ttitle: \"On save\",\n\tcanAddNew: true,\n});\n\nexport const Min = IntegerField({\n\tname: \"minSize\",\n\ttitle: \"Min\",\n\tdependModelType: MODEL_TYPE.CUSTOM,\n});\n\nexport const Max = IntegerField({\n\tname: \"maxSize\",\n\ttitle: \"Max\",\n\tdependModelType: MODEL_TYPE.CUSTOM,\n});\n\nexport const JsonRelationalField = BooleanField({\n\tname: \"isJsonRelationalField\",\n\ttitle: \"Is json relational field\",\n\tdependModelType: MODEL_TYPE.CUSTOM,\n\tgetValue: (properties) => {\n\t\tconst type = properties[\"type\"];\n\t\tif (type) {\n\t\t\tconst hasJSONField = type.indexOf(\"json\") === 0;\n\t\t\tif (hasJSONField) {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\t\treturn false;\n\t},\n\tchange: (value, properties) => {\n\t\tconst type = properties[\"type\"];\n\t\tif (value === true) {\n\t\t\tconst has = type.indexOf(\"json\") === 0;\n\t\t\tif (!has) {\n\t\t\t\tconst _type = `json-${type}`;\n\t\t\t\treturn {\n\t\t\t\t\ttype: _type,\n\t\t\t\t\tserverType: _type,\n\t\t\t\t};\n\t\t\t}\n\t\t} else if (value === false) {\n\t\t\tconst has = type.indexOf(\"json\") === 0;\n\t\t\tif (has) {\n\t\t\t\tconst _type = type.substring(\"json-\".length);\n\t\t\t\treturn {\n\t\t\t\t\ttype: _type,\n\t\t\t\t\tserverType: _type,\n\t\t\t\t};\n\t\t\t}\n\t\t}\n\t\treturn {};\n\t},\n});\n\nexport const Domain = StringField({\n\tname: \"domain\",\n\ttitle: \"Domain\",\n});\n\nexport const Prompt = StringField({\n\tname: \"prompt\",\n\ttitle: \"Prompt\",\n\tparentField: \"widgetAttrs\",\n});\n\nexport const SelectionIn = StringField({\n\tname: \"selection-in\",\n\tdependModelType: MODEL_TYPE.BASE,\n\tshowInCustomField: false,\n\ttitle: \"Selection in\",\n});\n\nexport const Value = StringField({\n\tname: \"value\",\n\ttitle: \"Value\",\n\tdependModelType: MODEL_TYPE.BASE,\n\tshowInCustomField: false,\n});\n\nexport const ValueAdd = StringField({\n\tname: \"value:add\",\n\ttitle: \"Value:add\",\n\tdependModelType: MODEL_TYPE.BASE,\n\tshowInCustomField: false,\n});\n\nexport const ValueDel = StringField({\n\tname: \"value:del\",\n\ttitle: \"Value:del\",\n\tdependModelType: MODEL_TYPE.BASE,\n\tshowInCustomField: false,\n});\n\nexport const Refresh = BooleanField({\n\tname: \"refresh\",\n\ttitle: \"Refresh\",\n\tdependModelType: MODEL_TYPE.BASE,\n\tshowInCustomField: false,\n});\n\nexport const Active = BooleanField({\n\tname: \"active\",\n\ttitle: \"Active\",\n\tdependModelType: MODEL_TYPE.BASE,\n\tshowInCustomField: false,\n\tshouldRender: (list) => {\n\t\treturn list.xPath && list.xPath.includes(\"panel-tabs\");\n\t},\n});\n\nexport const TargetJsonModel = ObjectSelectionField({\n\tname: \"targetJsonModel\",\n\trequired: true,\n\tref: \"com.axelor.meta.db.MetaJsonModel\",\n\tdisplayField: \"title\",\n\tdependModelType: MODEL_TYPE.CUSTOM,\n\ttitle: \"Target json model\",\n});\n\nexport const TargetModel = SelectField({\n\tname: \"targetModel\",\n\ttitle: \"Target model\",\n\trequired: true,\n\tref: \"com.axelor.meta.db.MetaModel\",\n\tvalueField: \"fullName\",\n\tcanAddNew: false,\n\tisDisabled: (property, editWidgetType, modelType) => {\n\t\treturn (\n\t\t\teditWidgetType !== \"customField\" &&\n\t\t\tproperty.serverType !== \"field\" &&\n\t\t\tmodelType !== MODEL_TYPE.CUSTOM\n\t\t);\n\t},\n});\n\nexport const GridView = SelectField({\n\tname: \"gridView\",\n\ttitle: \"Grid view\",\n\tref: \"com.axelor.meta.db.MetaView\",\n\tvalueField: \"name\",\n\tdependModelType: MODEL_TYPE.CUSTOM,\n\tneedsTargetModel: [\n\t\trelationalFields.OneToMany,\n\t\trelationalFields.ManyToMany,\n\t\trelationalFields.ManyToOne,\n\t],\n});\n\nexport const FormView = SelectField({\n\tname: \"formView\",\n\ttitle: \"Form view\",\n\tref: \"com.axelor.meta.db.MetaView\",\n\tvalueField: \"name\",\n\tdependModelType: MODEL_TYPE.CUSTOM,\n\tneedsTargetModel: [\n\t\trelationalFields.OneToMany,\n\t\trelationalFields.ManyToMany,\n\t\trelationalFields.ManyToOne,\n\t],\n});\n\n/** Ui options fields */\nexport const Required = BooleanField({\n\tname: \"required\",\n\ttitle: \"Required\",\n\tdefaultValue: \"false\",\n\tisDisabled: ({ properties, metaFieldStore, editWidgetType, modelType }) => {\n\t\tif (modelType === MODEL_TYPE.BASE && editWidgetType !== \"customField\") {\n\t\t\tif (properties[\"requiredIf\"] && properties[\"requiredIf\"].length) {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\t\treturn false;\n\t},\n});\n\nexport const ColumnSequence = IntegerField({\n\tname: \"columnSequence\",\n\ttitle: \"Column sequence\",\n\tdependModelType: MODEL_TYPE.CUSTOM,\n});\n\nexport const ReadOnly = BooleanField({\n\tname: \"readonly\",\n\ttitle: \"Readonly\",\n\tisDisabled: ({ properties, metaFieldStore, editWidgetType, modelType }) => {\n\t\tif (modelType === MODEL_TYPE.BASE && editWidgetType !== \"customField\") {\n\t\t\tif (properties[\"readonlyIf\"] && properties[\"readonlyIf\"].length) {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\t\treturn false;\n\t},\n});\n\nexport const Hidden = BooleanField({\n\tname: \"hidden\",\n\ttitle: \"Hidden\",\n\tisDisabled: ({ properties }) => {\n\t\tif (properties[\"hideIf\"] && properties[\"hideIf\"].length) {\n\t\t\treturn true;\n\t\t}\n\t\treturn false;\n\t},\n});\n\nexport const VisibleInGrid = BooleanField({\n\tname: \"visibleInGrid\",\n\ttitle: \"Visible in grid\",\n\tdependModelType: MODEL_TYPE.CUSTOM,\n});\n\n/** Conditions Fields*/\nexport const ShowIf = StringField({\n\tname: \"showIf\",\n\ttitle: \"Show if\",\n\tdependModelType: MODEL_TYPE.CUSTOM,\n});\n\nexport const HideIf = StringField({\n\tname: \"hideIf\",\n\ttitle: \"Hide if\",\n\tisDisabled: ({ properties }) => {\n\t\tif (properties[\"hidden\"]) {\n\t\t\treturn true;\n\t\t}\n\t\treturn false;\n\t},\n});\n\nexport const If = StringField({\n\tname: \"if\",\n\ttitle: \"If\",\n\tdependModelType: MODEL_TYPE.CUSTOM,\n});\n\nexport const RequiredIf = StringField({\n\tname: \"requiredIf\",\n\ttitle: \"Required if\",\n\tisDisabled: ({ properties, metaFieldStore, editWidgetType, modelType }) => {\n\t\tif (modelType === MODEL_TYPE.BASE && editWidgetType !== \"customField\") {\n\t\t\tif (properties[\"required\"]) {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\t\treturn false;\n\t},\n});\n\nexport const ReadOnlyIf = StringField({\n\tname: \"readonlyIf\",\n\ttitle: \"Readonly if\",\n\tisDisabled: ({ properties, metaFieldStore, editWidgetType, modelType }) => {\n\t\tif (modelType === MODEL_TYPE.BASE && editWidgetType !== \"customField\") {\n\t\t\tif (properties[\"readonly\"]) {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\t\treturn false;\n\t},\n});\n\nexport const IncludeIf = StringField({\n\tname: \"includeIf\",\n\ttitle: \"Include if\",\n\tdependModelType: MODEL_TYPE.CUSTOM,\n});\n\nexport const ValidIf = StringField({\n\tname: \"validIf\",\n\ttitle: \"Valid if\",\n\tparentField: \"widgetAttrs\",\n\tmodelType: MODEL_TYPE.CUSTOM,\n\tdependModelType: MODEL_TYPE.CUSTOM,\n});\n\nexport const CanSave = StringField({\n\tname: \"canSave\",\n\tdependModelType: MODEL_TYPE.CUSTOM,\n\ttitle: \"Can save\",\n});\n\nexport const Css = StringField({\n\tname: \"css\",\n\ttitle: \"Css\",\n\tparentField: \"widgetAttrs\",\n\tmodelType: MODEL_TYPE.CUSTOM,\n\t// dependModelType: MODEL_TYPE.BASE,\n});\n\nexport const Editable = BooleanField({\n\tname: \"editable\",\n\ttitle: \"Editable\",\n\tdependModelType: MODEL_TYPE.CUSTOM,\n});\n\n/** Widget Fields*/\nexport const ColSpan = StaticSelectField({\n\tname: \"colSpan\",\n\ttitle: \"Colspan\",\n\tparentField: \"widgetAttrs\",\n\tdata: [\n\t\t\"\",\n\t\t...Array(12)\n\t\t\t.fill()\n\t\t\t.map((_, i) => (i + 1).toString()),\n\t],\n\tmodelType: MODEL_TYPE.CUSTOM,\n\tdependModelType: MODEL_TYPE.CUSTOM,\n\tgetOptionLabel: (option) => {\n\t\treturn option ? option.toString() : \"\";\n\t},\n\tisDisabled: ({ properties, parentPanel }) => {\n\t\tif (parentPanel) {\n\t\t\tif ([TYPE.toolbar, TYPE.menubar].includes(parentPanel.serverType)) {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\t\treturn false;\n\t},\n});\n\nexport const ItemSpan = StaticSelectField({\n\tname: \"itemSpan\",\n\ttitle: \"Itemspan\",\n\tparentField: \"widgetAttrs\",\n\tdata: [\n\t\t\"\",\n\t\t...Array(12)\n\t\t\t.fill()\n\t\t\t.map((_, i) => (i + 1).toString()),\n\t],\n\tmodelType: MODEL_TYPE.CUSTOM,\n\tdependModelType: MODEL_TYPE.CUSTOM,\n\tgetOptionLabel: (option) => {\n\t\treturn option ? option.toString() : \"\";\n\t},\n\tisDisabled: ({ properties, parentPanel }) => {\n\t\tif (\n\t\t\tparentPanel &&\n\t\t\t[TYPE.toolbar, TYPE.menubar].includes(parentPanel.serverType)\n\t\t) {\n\t\t\treturn true;\n\t\t}\n\t\treturn false;\n\t},\n});\n\nexport const IsGenerateMenu = BooleanField({\n\tname: \"isGenerateMenu\",\n\ttitle: \"Generate menu\",\n});\n\nexport const MenuBuilderTitle = StringField({\n\tname: \"menuBuilderTitle\",\n\ttitle: \"Menu title\",\n\tdepends: \"isGenerateMenu\",\n\tdependValue: true,\n\trequiredWhen: IsGenerateMenu.name,\n});\n\nexport const MenuBuilderParent = ObjectSelectionField({\n\tname: \"menuBuilderParent\",\n\tref: \"com.axelor.meta.db.MetaMenu\",\n\ttitle: \"Parent\",\n\tdepends: \"isGenerateMenu\",\n\tdependValue: true,\n\tvalueField: \"id\",\n\tdisplayField: \"title\",\n\tshouldFetchInStart: true,\n\tlimit: null,\n\tgetOptionLabel: (option, data) => {\n\t\treturn getMenuBuilderTitle(option, data);\n\t},\n});\n\nexport const ShowTitle = BooleanField({\n\tname: \"showTitle\",\n\tparentField: \"widgetAttrs\",\n\tdefaultValue: true,\n\tmodelType: MODEL_TYPE.CUSTOM,\n\tdependModelType: MODEL_TYPE.CUSTOM,\n\ttitle: \"Show title\",\n});\n\nexport const CanSearch = BooleanField({\n\tname: \"canSearch\",\n\tdependModelType: MODEL_TYPE.CUSTOM,\n\ttitle: \"Can search\",\n});\n\nexport const IfModule = StringField({\n\tname: \"if-module\",\n\ttitle: \"If-module\",\n\tdependModelType: MODEL_TYPE.CUSTOM,\n});\n\nexport const Height = StringField({\n\tname: \"height\",\n\tdependModelType: MODEL_TYPE.CUSTOM,\n});\n\nexport const Action = SelectField({\n\tname: \"action\",\n\ttitle: \"Action\",\n\tref: \"com.axelor.meta.db.MetaAction\",\n\trequiredFor: [\"panel-dashlet\", \"item\"],\n\tdependModelType: MODEL_TYPE.CUSTOM,\n\tmultiple: true,\n\tcommaSeparated: true,\n\tcanAddNew: true,\n});\n\nexport const Field = StringField({\n\tname: \"field\",\n\ttitle: \"Field\",\n\trequired: true,\n\trequiredFor: [\"panel-related\"],\n\tdependModelType: MODEL_TYPE.CUSTOM,\n});\n\nexport const CanMove = BooleanField({\n\tname: \"canMove\",\n\tdependModelType: MODEL_TYPE.CUSTOM,\n\ttitle: \"Can move\",\n});\n\nexport const OrderBy = StringField({\n\tname: \"orderBy\",\n\tdependModelType: MODEL_TYPE.CUSTOM,\n\ttitle: \"Order by\",\n});\n\nexport const IncludeView = SelectField({\n\tname: \"view\",\n\ttitle: \"View\",\n\tref: \"com.axelor.meta.db.MetaView\",\n\tvalueField: \"name\",\n\trequiredFor: [\"panel-include\"],\n\tdependModelType: MODEL_TYPE.CUSTOM,\n});\n\nexport const IncludeFrom = StringField({\n\tname: \"from\",\n\ttitle: \"From\",\n});\n\nexport const Sidebar = BooleanField({\n\tname: \"sidebar\",\n\ttitle: \"Sidebar\",\n\tparentField: \"widgetAttrs\",\n\tmodelType: MODEL_TYPE.CUSTOM,\n\tdependModelType: MODEL_TYPE.CUSTOM,\n\tshowInCustomField: false,\n});\n\nexport const Password = BooleanField({\n\tname: \"password\",\n\ttitle: \"Password\",\n});\n\nexport const Model = SelectField({\n\tname: \"model\",\n\ttitle: \"Model\",\n\trequired: true,\n\tref: \"com.axelor.meta.db.MetaModel\",\n\tvalueField: \"fullName\",\n});\n\nexport const Color = StaticSelectField({\n\tname: \"color\",\n\ttitle: \"Color\",\n\tdata: [\"default\", \"primary\", \"warning\", \"success\", \"danger\", \"info\"],\n});\n\nexport const Background = StaticSelectField({\n\tname: \"background\",\n\ttitle: \"Background\",\n\tdata: [\"default\", \"primary\", \"warning\", \"success\", \"danger\", \"info\"],\n});\n\nexport const Strong = BooleanField({\n\tname: \"strong\",\n\ttitle: \"Strong\",\n\tdependModelType: MODEL_TYPE.BASE,\n});\n\nexport default {\n\tName,\n\tType,\n\tTitle,\n\tDefaultValue,\n\tAppBuilder,\n\tHelp,\n\tSequence,\n\tRoles,\n\tValueExpression,\n\tSelection,\n\tWidget,\n\tOnChange,\n\tMin,\n\tMax,\n\tJsonRelationalField,\n\tDomain,\n\tTargetJsonModel,\n\tTargetModel,\n\tGridView,\n\tFormView,\n\tRequired,\n\tColumnSequence,\n\tReadOnly,\n\tHidden,\n\tVisibleInGrid,\n\tShowIf,\n\tHideIf,\n\tRequiredIf,\n\tReadOnlyIf,\n\tIncludeIf,\n\tValidIf,\n\tColSpan,\n\tShowTitle,\n\tOnNew,\n\tOnLoad,\n\tOnSave,\n\tEditable,\n\tDummyType,\n\tIfModule,\n\tAction,\n\tHeight,\n\tCanSearch,\n\tField,\n\tCanMove,\n\tOrderBy,\n\tIncludeFrom,\n\tIncludeView,\n\tPassword,\n\tImage,\n\tIsGenerateMenu,\n\tMenuBuilderParent,\n\tMenuBuilderTitle,\n\tModel,\n\tColor,\n\tStrong,\n\tBackground,\n\tItemSpan,\n\tCss,\n};\n","export const getMenuBuilderTitle = (option, data) => {\n\tlet text = option.title || \"\";\n\tif (option.parent) {\n\t\tconst parent = data.find((item) => item.id === option.parent.id);\n\t\tif (parent) {\n\t\t\tconst parentText = getMenuBuilderTitle(\n\t\t\t\tparent,\n\t\t\t\t(data && data.filter((f) => f.id !== parent.id)) || []\n\t\t\t);\n\t\t\tif (parentText) {\n\t\t\t\ttext = `${parentText} > ${text}`;\n\t\t\t}\n\t\t}\n\t}\n\treturn text;\n};\n","// TYPE define all elements\nexport const TYPE = {\n\tpanel: \"panel\",\n\ttabs: \"panel-tabs\",\n\tfield: \"field\",\n\tdumpField: \"dump_field\",\n\tform: \"form\",\n\tpanelStack: \"panel-stack\",\n\tpanelDashlet: \"panel-dashlet\",\n\tpanelRelated: \"panel-related\",\n\tpanelInclude: \"panel-include\",\n\tmenu: \"menu\",\n\tmenuItem: \"item\",\n\tdivider: \"divider\",\n\tmenubar: \"menubar\",\n\ttoolbar: \"toolbar\",\n};\n\nexport const ItemTypes = {\n\tCONTAINER: \"panel\",\n\tROOTCONTAINER: \"root-container\",\n\tITEM: \"item\",\n\tDUMMY: \"dummy\",\n};\n\n// FIELD_TYPE define all field types(manage on server end)\nexport const FIELD_TYPE = {\n\tstring: \"string\",\n\tnumber: \"number\",\n\tbutton: \"button\",\n\tspacer: \"spacer\",\n\tboolean: \"boolean\",\n\tseparator: \"separator\",\n\thilite: \"hilite\",\n};\n\n// Panel Container Types\nexport const PANEL_TYPE = {\n\tstack: \"stack\",\n\tflow: \"flow\",\n\tgrid: \"grid\",\n\tcustom: \"custom\",\n};\n\n// define Grid Size constants\nexport const GRID_SIZE = {\n\tmax: 12,\n};\n\n// contains all unique ids for special widgets\nexport const IDS = {\n\tcreateWidgets: {\n\t\ttabs: Symbol(),\n\t\tpanel: Symbol(),\n\t\tfield: Symbol(),\n\t},\n\tform: -1,\n\tcustomForm: -2,\n\tdumpField: 0,\n};\n\nexport const PANEL_PROPS = {\n\tcolSpan: 12,\n\tcols: 12,\n\tid: IDS.createWidgets.panel,\n\timage: \"panel.png\",\n\titems: [],\n\tlayout: \"grid\",\n\tmappedBy: undefined,\n\tmodel: \"com.axelor.meta.db.MetaJsonRecord\",\n\tmodelField: \"attrs\",\n\trelationship: undefined,\n\ttitle: undefined,\n\ttype: ItemTypes.CONTAINER,\n\twidgetAttrs: JSON.stringify({\n\t\tshowTitle: \"false\",\n\t\tcolSpan: 12,\n\t\titemSpan: 6,\n\t}),\n};\n\nexport const relationalFields = {\n\tOneToMany: \"one-to-many\",\n\tManyToMany: \"many-to-many\",\n\tManyToOne: \"many-to-one\",\n\tOneToOne: \"one-to-one\",\n};\n\nexport const typeReplacer = {\n\tinclude: TYPE.panelInclude,\n\tMANY_TO_MANY: \"many-to-many\",\n\tMANY_TO_ONE: \"many-to-one\",\n\tONE_TO_ONE: \"one-to-one\",\n\tONE_TO_MANY: \"one-to-many\",\n};\n\nexport const MODEL_TYPE = {\n\tBASE: \"BASE\",\n\tCUSTOM: \"CUSTOM\",\n};\n\nexport const ENTITY_TYPE = {\n\tMETA: \"META\",\n};\n\nexport const DEFAULT_VALUE = {\n\tshowTitle: true,\n\treadonly: false,\n\trequired: false,\n\thidden: false,\n\tsidebar: false,\n\tcanCollapse: false,\n\tstacked: false,\n\tcanMove: false,\n\tcanSearch: false,\n\tmultiline: false,\n};\n\nexport const DataTypes = [\n\t\"string\",\n\t\"integer\",\n\t\"decimal\",\n\t\"boolean\",\n\t\"datetime\",\n\t\"date\",\n\t\"time\",\n\t\"many-to-one\",\n\t\"one-to-many\",\n\t\"many-to-many\",\n];\n\nexport const conditionProperties = {\n\treadonlyIf: \"readonly\",\n\trequiredIf: \"required\",\n\thideIf: \"hidden\",\n\tcollapseIf: \"canCollapse\",\n};\n\nexport const otherNoQuoteProps = [\n\t\"value:add\",\n\t\"value:del\",\n\t\"refresh\",\n\t\"active\",\n];\n","import { conditionProperties } from \"../constants\";\nimport AxelorService from \"./../services/axelor.rest\";\nimport Utils, { generateCustomModelSchema, getMenuBuilder } from \"./../utils\";\n\nexport const metaJsonFieldService = new AxelorService({\n\tmodel: \"com.axelor.meta.db.MetaJsonField\",\n});\nexport const metaModelService = new AxelorService({\n\tmodel: \"com.axelor.meta.db.MetaJsonModel\",\n});\nconst appBpmService = new AxelorService({\n\tmodel: \"com.axelor.apps.base.db.AppBpm\",\n});\nconst appUserService = new AxelorService({ model: \"com.axelor.auth.db.User\" });\n\nconst metaViewService = new AxelorService({\n\tmodel: \"com.axelor.meta.db.MetaView\",\n});\nexport const modelService = new AxelorService({\n\tmodel: \"com.axelor.meta.db.MetaModel\",\n});\n\nexport const metaAttrsService = new AxelorService({\n\tmodel: \"com.axelor.meta.db.MetaAttrs\",\n});\n\nexport const metaSelectService = new AxelorService({\n\tmodel: \"com.axelor.meta.db.MetaSelect\",\n});\n\nexport const selectionBuilderService = new AxelorService({\n\tmodel: \"com.axelor.studio.db.SelectionBuilder\",\n});\n\nexport const metaTranslationService = new AxelorService({\n\tmodel: \"com.axelor.meta.db.MetaTranslation\",\n});\n\nexport function fetchCustomFields(modelField, model) {\n\tconst _domain = `self.jsonModel = null and self.modelField='${modelField.name}' and self.model='${model.fullName}'`;\n\treturn metaJsonFieldService.search({\n\t\tdata: { _domain },\n\t\tsortBy: [\"sequence\"],\n\t});\n}\n\n/**\n * selection fields are needs to be save seperately to save selections\n */\nexport async function saveCustomModel(model) {\n\tif (!model) return;\n\tconst res = await metaModelService.save(model);\n\tconst { data, status } = res || {};\n\tif (status === -1) {\n\t\treturn res;\n\t}\n\tconst { fields } = (data && data[0]) || {};\n\tconst getFields = (all) => {\n\t\tconst fields = all\n\t\t\t.map((res) => {\n\t\t\t\tconst { data = [] } = res;\n\t\t\t\tif (data[0]) {\n\t\t\t\t\treturn { id: data[0].id, $version: data[0].version };\n\t\t\t\t}\n\t\t\t\treturn undefined;\n\t\t\t})\n\t\t\t.filter((e) => e);\n\t\treturn fields;\n\t};\n\tconst response = await Promise.all(\n\t\tmodel.fields.map((field) => {\n\t\t\tconst updatedField = fields && fields.find((f) => f.name === field.name);\n\t\t\treturn metaJsonFieldService.save({\n\t\t\t\t...field,\n\t\t\t\tid: updatedField?.id,\n\t\t\t\tversion: updatedField?.version,\n\t\t\t});\n\t\t})\n\t);\n\tconst updatedFields = getFields(response);\n\treturn {\n\t\tdata: [\n\t\t\t{\n\t\t\t\t...((data && data[0]) || {}),\n\t\t\t\tfields: updatedFields,\n\t\t\t},\n\t\t],\n\t};\n}\n\nexport function fetchJSONFields(ids, update, record = {}) {\n\tconst criteria = [];\n\tif (ids.length) {\n\t\tcriteria.push({ fieldName: \"id\", operator: \"in\", value: ids });\n\n\t\tconst data = {\n\t\t\tcriteria,\n\t\t};\n\t\tmetaJsonFieldService.search({ data, sortBy: [\"sequence\"] }).then((res) => {\n\t\t\tif (res.data) {\n\t\t\t\tconst list = res.data || [];\n\t\t\t\tconst schema = generateCustomModelSchema(list, record);\n\t\t\t\tupdate((draft) => {\n\t\t\t\t\tdraft.items = list.filter((l) => l.type === \"panel\").map((e) => e.id);\n\t\t\t\t\tdraft.widgets = {\n\t\t\t\t\t\t...schema.widgets,\n\t\t\t\t\t};\n\t\t\t\t\tdraft.items = schema.items;\n\t\t\t\t});\n\t\t\t}\n\t\t});\n\t} else {\n\t\tupdate((draft) => {\n\t\t\tdraft.widgets = {\n\t\t\t\t\"-1\": {\n\t\t\t\t\ttype: \"form\",\n\t\t\t\t\t...record,\n\t\t\t\t\t...getMenuBuilder(record ? record.menuBuilder : undefined),\n\t\t\t\t},\n\t\t\t\t0: { type: \"dump_field\", name: \"\" },\n\t\t\t};\n\t\t\tdraft.items = [];\n\t\t\tdraft.loader = false;\n\t\t});\n\t}\n}\n\nexport function removeCustomModel(model) {\n\treturn metaModelService.removeAll([model]);\n}\n\nexport async function getEnableAppBuilder() {\n\tconst payload = {\n\t\tdata: {\n\t\t\t_domain: \"self.app.code = :code\",\n\t\t\t_domainContext: { code: \"bpm\" },\n\t\t},\n\t\tfields: [\"enableAppBuilder\"],\n\t\tlimit: 1,\n\t\toffset: 0,\n\t};\n\tconst bpmResult = await appBpmService.search({ ...payload });\n\tif (Array.isArray(bpmResult && bpmResult.data) && bpmResult.data[0]) {\n\t\treturn bpmResult.data[0].enableAppBuilder;\n\t}\n\treturn false;\n}\n\nexport async function generateMenuChange(customModel) {\n\tconst _context = {\n\t\t_model: \"com.axelor.meta.db.MetaJsonModel\",\n\t\t_id: null,\n\t\t...customModel,\n\t};\n\tconst changeAction =\n\t\t\"action-studio-json-model-method-isgeneratemenu-onchange\";\n\tconst data = {\n\t\taction: changeAction,\n\t\tmodel: \"com.axelor.meta.db.MetaJsonModel\",\n\t\tdata: {\n\t\t\tcontext: _context,\n\t\t},\n\t};\n\treturn await metaModelService.action(data);\n}\n\nexport async function fetchCustomModel(modelId, handleError = () => {}) {\n\tconst result = await metaModelService.fetch(modelId, {\n\t\trelated: {\n\t\t\tmenuBuilder: [\"title\", \"parentMenu\"],\n\t\t},\n\t});\n\tif (result?.status === -1) {\n\t\thandleError(result.data || {});\n\t\treturn;\n\t}\n\tconst { data = [] } = result || {};\n\treturn data[0];\n}\n\nexport async function fetchViews(view) {\n\tconst viewCriteria = {\n\t\toperator: \"and\",\n\t\tcriteria: [{ fieldName: \"name\", operator: \"=\", value: `${view.name}` }],\n\t};\n\tconst viewList = await metaViewService.search({ data: viewCriteria });\n\tlet views;\n\tif (viewList.data) {\n\t\tviews = Utils.getViews(viewList.data, view.name);\n\t}\n\treturn views;\n}\n\nexport async function fetchModelFields(model) {\n\tif (!model || (model && (!model.packageName || !model.name))) return [];\n\tlet fields = [];\n\tconst _data = {\n\t\t_domain: `self.packageName = '${model.packageName}' and self.name = '${model.name}'`,\n\t};\n\tconst result = await modelService.search({ data: _data });\n\tif (result.data && result.data[0]) {\n\t\tconst record = result.data[0];\n\t\tconst data = {\n\t\t\tfields: [\"metaFields\"],\n\t\t\trelated: {\n\t\t\t\tmetaFields: [\n\t\t\t\t\t\"typeName\",\n\t\t\t\t\t\"label\",\n\t\t\t\t\t\"mappedBy\",\n\t\t\t\t\t\"relationship\",\n\t\t\t\t\t\"name\",\n\t\t\t\t\t\"packageName\",\n\t\t\t\t\t\"typeName\",\n\t\t\t\t],\n\t\t\t},\n\t\t};\n\t\tconst modelData = await modelService.fetch(record.id, data);\n\n\t\tif (modelData && modelData.data[0]) {\n\t\t\tfields = modelData.data[0].metaFields;\n\t\t\treturn fields;\n\t\t}\n\t}\n\treturn fields;\n}\n\nexport async function fetchAttrsList({ model, view }) {\n\tconst criteria = [\n\t\t{ fieldName: \"model\", operator: \"=\", value: model },\n\t\t{ fieldName: \"view\", operator: \"=\", value: view },\n\t];\n\tconst result = await metaAttrsService.search({\n\t\tdata: { criteria },\n\t\tlimit: null,\n\t});\n\tif (result.data && Array.isArray(result.data)) {\n\t\tconst conditionPropertiesKeys = Object.keys(conditionProperties);\n\t\tconst conditionPropertiesValues = Object.values(conditionProperties);\n\n\t\tconst data = [...result.data].map((item) => {\n\t\t\tif (conditionPropertiesValues.includes(item.name)) {\n\t\t\t\tif (item.value.startsWith('\"') && item.value.endsWith('\"')) {\n\t\t\t\t\titem.value = item.value.replace(`\"`, \"\");\n\t\t\t\t\titem.value = item.value.replace(`\"`, \"\");\n\t\t\t\t} else {\n\t\t\t\t\tif (![\"true\", \"false\"].includes(item.value)) {\n\t\t\t\t\t\titem.name =\n\t\t\t\t\t\t\tconditionPropertiesKeys[\n\t\t\t\t\t\t\t\tconditionPropertiesValues.indexOf(item.name)\n\t\t\t\t\t\t\t];\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\titem.value = item.value.replace(`\"`, \"\");\n\t\t\t\titem.value = item.value.replace(`\"`, \"\");\n\t\t\t}\n\t\t\treturn item;\n\t\t});\n\t\treturn data;\n\t}\n\treturn [];\n}\n\nexport async function saveAttrsList(list, handleError = () => {}) {\n\tconst result = await metaAttrsService.saveAll([...list]);\n\n\tif (result?.status === -1) {\n\t\thandleError(result.data || {});\n\t\treturn [];\n\t}\n\tif (result.data && Array.isArray(result.data)) {\n\t\treturn result.data;\n\t}\n\treturn [];\n}\n\nexport async function deleteAttrsList(list, handleError = () => {}) {\n\tconst result = await metaAttrsService.removeAll(list);\n\tif (result?.status === -1) {\n\t\thandleError(result.data || {});\n\t\treturn [];\n\t}\n\tif (result.data && Array.isArray(result.data)) {\n\t\treturn result.data;\n\t}\n\treturn [];\n}\n\nexport async function fetchLanguages() {\n\tconst criteria = [\n\t\t{ fieldName: \"name\", operator: \"=\", value: \"select.language\" },\n\t];\n\tconst result = await metaSelectService.search({\n\t\tdata: { criteria },\n\t\tfields: [\"items.value\", \"items.title\"],\n\t});\n\tif (result && result.data && Array.isArray(result.data)) {\n\t\treturn result.data.map((d) => {\n\t\t\treturn { title: d[\"items.title\"], value: d[\"items.value\"] };\n\t\t});\n\t}\n\treturn [];\n}\n\nexport async function getTranslationList(keyList) {\n\tconst criteria = [{ fieldName: \"key\", operator: \"in\", value: keyList }];\n\tconst result = await metaTranslationService.search({ data: { criteria } });\n\tif (result.data && Array.isArray(result.data)) {\n\t\treturn result.data;\n\t}\n\treturn [];\n}\n\nexport async function saveTranslationList(list, handleError = () => {}) {\n\tconst result = await metaTranslationService.saveAll([...list]);\n\tif (result?.status === -1) {\n\t\thandleError(result.data || {});\n\t\treturn [];\n\t}\n\tif (result.data && Array.isArray(result.data)) {\n\t\treturn result.data;\n\t}\n\treturn [];\n}\n\nexport async function deleteTranslationList(list, handleError = () => {}) {\n\tconst result = await metaTranslationService.removeAll(list);\n\tif (result?.status === -1) {\n\t\thandleError(result.data || {});\n\t\treturn [];\n\t}\n\tif (result.data && Array.isArray(result.data)) {\n\t\treturn result.data;\n\t}\n\treturn [];\n}\n\nexport async function fetchUserPreferences() {\n\tconst userInfo = await appUserService.info();\n\tif (userInfo && userInfo[\"user.id\"]) {\n\t\tconst userResponse = await appUserService.fetch(userInfo[\"user.id\"], {\n\t\t\tfields: [\"theme\"],\n\t\t});\n\t\tif (userResponse && userResponse.data && userResponse.data[0]) {\n\t\t\treturn userResponse.data[0];\n\t\t}\n\t}\n\treturn null;\n}\n\nexport async function getSelectionText(metaSelect) {\n\tlet selectionText = \"\";\n\tif (metaSelect) {\n\t\tconst context = {\n\t\t\tmetaSelect: {\n\t\t\t\t...metaSelect,\n\t\t\t},\n\t\t};\n\t\tconst payloadData = {\n\t\t\tdata: { context },\n\t\t\taction: \"action-selection-builder-method-fill-selection-text\",\n\t\t\tmodel: \"com.axelor.studio.db.SelectionBuilder\",\n\t\t};\n\t\tconst actionResponse = await selectionBuilderService.action(payloadData);\n\t\tconst { data = [] } = actionResponse;\n\t\tif (data[0]) {\n\t\t\tconst _properties = data[0].values || {};\n\t\t\tif (_properties.selectionText) {\n\t\t\t\tselectionText = _properties.selectionText;\n\t\t\t}\n\t\t}\n\t}\n\treturn selectionText;\n}\n","import React from \"react\";\nimport { Grid, Typography, Tooltip } from \"@material-ui/core\";\nimport { makeStyles } from \"@material-ui/core/styles\";\n\nimport { translate, camleCaseString } from \"../utils\";\n\nconst useStyles = makeStyles({\n\tfieldsContainer: {\n\t\tdisplay: \"flex\",\n\t\tjustifyContent: \"center\",\n\t\talignItems: \"center\",\n\t\tbackground: \"#e7eaec\",\n\t\tborderRadius: 5,\n\t},\n\tfieldImage: {\n\t\tdisplay: \"flex\",\n\t\tjustifyContent: \"center\",\n\t\talignItems: \"center\",\n\t\tpadding: 15,\n\t},\n\tfieldLabel: {\n\t\tfontWeight: \"600\",\n\t},\n\ticon: {\n\t\twidth: 20,\n\t\theight: 20,\n\t\tbackgroundRepeat: \"no-repeat\",\n\t\tbackgroundSize: \"contain\",\n\t\tbackgroundPosition: \"center\",\n\t\tposition: \"absolute\",\n\t},\n\tgridContainer: {\n\t\tdisplay: \"flex\",\n\t\talignItems: \"center\",\n    flexWrap: 'nowrap',\n\t},\n\tlabelContainer: {\n\t\twhiteSpace: \"nowrap\",\n\t\toverflow: \"hidden\",\n\t\ttextOverflow: \"ellipsis\",\n\t\tdisplay: \"flex\",\n\t\talignItems: \"center\",\n\t},\n});\n\nconst getImageURL = (widget) => {\n\tconst type = widget.serverType || widget.type;\n\tif (type && type.indexOf(\"datetime\") !== -1) {\n\t\treturn \"datetime.png\";\n\t}\n\tif (type && type.indexOf(\"date\") !== -1) {\n\t\treturn \"date.png\";\n\t}\n\tif (type && type.indexOf(\"time\") !== -1) {\n\t\treturn \"time.png\";\n\t}\n\tif (type && type.indexOf(\"decimal\") !== -1) {\n\t\treturn \"decimal.png\";\n\t}\n\tif (widget.image) {\n\t\treturn widget.image;\n\t}\n\treturn `${type}.png`;\n};\n\nexport function FieldComponent(props) {\n\tconst classes = useStyles();\n\tconst { attrs, targetName } = props;\n\treturn (\n\t\t<div className={classes.fieldsContainer}>\n\t\t\t<Tooltip\n\t\t\t\tarrow\n\t\t\t\ttitle={translate(attrs.title || attrs[targetName] || attrs[\"name\"])}\n\t\t\t\tplacement=\"top\"\n\t\t\t>\n\t\t\t\t<Grid container className={classes.gridContainer}>\n\t\t\t\t\t<Grid xs={4} item className={classes.fieldImage}>\n\t\t\t\t\t\t<div\n\t\t\t\t\t\t\tclassName={classes.icon}\n\t\t\t\t\t\t\tstyle={{\n\t\t\t\t\t\t\t\tbackgroundImage: `url(./images/${getImageURL(attrs)})`,\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</Grid>\n\t\t\t\t\t<Grid xs={8} item className={classes.labelContainer}>\n\t\t\t\t\t\t<Typography variant=\"caption\" className={classes.fieldLabel}>\n\t\t\t\t\t\t\t{translate(camleCaseString(attrs.title || attrs[targetName] || attrs[\"name\"]))}\n\t\t\t\t\t\t</Typography>\n\t\t\t\t\t</Grid>\n\t\t\t\t</Grid>\n\t\t\t</Tooltip>\n\t\t</div>\n\t);\n}\n\nexport default FieldComponent;\n","import React from 'react'\nimport { makeStyles } from '@material-ui/core/styles'\nimport classNames from 'classnames'\n\nconst useStyles = makeStyles((theme) => ({\n  field: {\n    width: 'calc(50% - 10px)',\n    padding: 5,\n    [theme.breakpoints.down('sm')]: {\n      width: '100%',\n    },\n  },\n}))\n\nexport default function Field(props) {\n  const classes = useStyles()\n  return (\n    <div {...props} className={classNames(classes.field, props.className)} />\n  )\n}\n","import React from \"react\";\nimport { Grid, Typography } from \"@material-ui/core\";\nimport { makeStyles } from \"@material-ui/core/styles\";\n\nimport { fieldTypes, modelFields } from \"../../fields\";\nimport FieldComponent from \"../../components/FieldComponent\";\nimport Widget from \"./../../components/Widget\";\nimport Field from \"./Field\";\nimport { useStore } from \"../../store/context\";\nimport { MODEL_TYPE, TYPE } from \"../../constants\";\nimport { translate } from \"../../utils\";\n\nconst useStyles = makeStyles({\n\tcontainer: {\n\t\tpadding: \"0 10px\",\n\t\tdisplay: \"flex\",\n\t\tflexWrap: \"wrap\",\n\t\talignItems: \"center\",\n\t\tjustifyContent: \"space-between\",\n\t},\n\tfieldGroupTitle: {\n\t\tpadding: \"25px 25px 0px 25px\",\n\t\tcolor: \"white\",\n\t},\n});\n\nexport default React.memo(function AddPanelView() {\n\tconst classes = useStyles();\n\tconst { state } = useStore();\n\tconst fields = [...fieldTypes, ...modelFields].filter((e) => {\n\t\tif (e.name === \"Menu\" && state.modelType === MODEL_TYPE.CUSTOM) {\n\t\t\treturn false;\n\t\t}\n\t\treturn true;\n\t});\n\n\tconst showField = (field) => {\n\t\tif ([TYPE.menubar, TYPE.toolbar].includes(field.type) && state.widgets) {\n\t\t\tconst index = Object.values(state.widgets).findIndex(\n\t\t\t\t(w) => w.type === field.type\n\t\t\t);\n\t\t\treturn index === -1;\n\t\t}\n\t\treturn true;\n\t};\n\treturn (\n\t\t<>\n\t\t\t{fields.map((fieldType, index) => (\n\t\t\t\t<React.Fragment key={index}>\n\t\t\t\t\t<Typography variant=\"body1\" className={classes.fieldGroupTitle}>\n\t\t\t\t\t\t{translate(fieldType.name)}\n\t\t\t\t\t</Typography>\n\t\t\t\t\t<Grid className={classes.container}>\n\t\t\t\t\t\t{fieldType.value &&\n\t\t\t\t\t\t\tfieldType.value.map((field, i) => {\n\t\t\t\t\t\t\t\tif (\n\t\t\t\t\t\t\t\t\tfield.editorType &&\n\t\t\t\t\t\t\t\t\t!field.editorType.includes(state.modelType)\n\t\t\t\t\t\t\t\t) {\n\t\t\t\t\t\t\t\t\treturn null;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tif (!showField(field)) {\n\t\t\t\t\t\t\t\t\treturn null;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t\t<Field key={i}>\n\t\t\t\t\t\t\t\t\t\t<Widget\n\t\t\t\t\t\t\t\t\t\t\tid={field.id}\n\t\t\t\t\t\t\t\t\t\t\tattrs={field}\n\t\t\t\t\t\t\t\t\t\t\tdesign={true}\n\t\t\t\t\t\t\t\t\t\t\tcomponent={FieldComponent}\n\t\t\t\t\t\t\t\t\t\t\tisCoreField={true}\n\t\t\t\t\t\t\t\t\t\t\tisPalleteField={true}\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t</Field>\n\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t})}\n\t\t\t\t\t</Grid>\n\t\t\t\t</React.Fragment>\n\t\t\t))}\n\t\t\t{/* {state.metaFields && state.metaFields.length > 0 && (\n\t\t\t\t<Grid>\n\t\t\t\t\t<Typography variant=\"body1\" className={classes.fieldGroupTitle}>\n\t\t\t\t\t\tExisting Fields\n\t\t\t\t\t</Typography>\n\t\t\t\t\t<ExistingFieldsView />\n\t\t\t\t</Grid>\n\t\t\t)} */}\n\t\t</>\n\t);\n});\n","import React from \"react\";\n\nexport function useDebounceEffect(handler, interval) {\n\tconst isMounted = React.useRef(false);\n\tReact.useEffect(() => {\n\t\tif (isMounted.current) {\n\t\t\tconst timer = setTimeout(() => handler(), interval);\n\t\t\treturn () => clearTimeout(timer);\n\t\t}\n\t\tisMounted.current = true;\n\t}, [handler, interval]);\n}\n","import React from \"react\";\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport Button from \"@material-ui/core/Button\";\nimport Grid from \"@material-ui/core/Grid\";\nimport Input from \"@material-ui/core/Input\";\nimport ChevronLeft from \"@material-ui/icons/ChevronLeft\";\nimport ChevronRight from \"@material-ui/icons/ChevronRight\";\nimport Typography from \"@material-ui/core/Typography\";\nimport Dialog from \"@material-ui/core/Dialog\";\nimport DialogActions from \"@material-ui/core/DialogActions\";\nimport DialogContent from \"@material-ui/core/DialogContent\";\nimport DialogTitle from \"@material-ui/core/DialogTitle\";\nimport useMediaQuery from \"@material-ui/core/useMediaQuery\";\nimport List from \"@material-ui/core/List\";\nimport ListItem from \"@material-ui/core/ListItem\";\nimport ListItemText from \"@material-ui/core/ListItemText\";\nimport { useTheme } from \"@material-ui/core/styles\";\nimport IconButton from \"@material-ui/core/IconButton\";\n\nconst useStyles = makeStyles((theme) => ({\n\troot: {\n\t\twidth: \"100%\",\n\t\tbackgroundColor: theme.palette.background.paper,\n\t\tmaxHeight: 300,\n\t\toverflow: \"auto\",\n\t},\n\tinput: {\n\t\twidth: \"80%\",\n\t\tmarginRight: 10,\n\t},\n\ttitleHeader: {\n\t\tborderBottom: \"0.5px solid #ddd\",\n\t},\n\tlistItem: {\n\t\tborderBottom: \"1px solid #ddd\",\n\t\tpaddingTop: 10,\n\t\tpaddingBottom: 10,\n\t},\n\tcloseText: {\n\t\ttextTransform: \"capitalize\",\n\t},\n}));\n\nexport default function ResponsiveDialog(props) {\n\tconst {\n\t\tlist = [],\n\t\tonChange,\n\t\thandleClose,\n\t\toffset,\n\t\ttotal,\n\t\tdisplayField,\n\t\tgetOptionLabel,\n\t} = props;\n\tconst theme = useTheme();\n\tconst classes = useStyles();\n\tconst fullScreen = useMediaQuery(theme.breakpoints.down(\"sm\"));\n\n\tconst handleItemClick = React.useCallback(\n\t\t(item) => {\n\t\t\tonChange(item);\n\t\t\thandleClose();\n\t\t},\n\t\t[onChange, handleClose]\n\t);\n\n\tconst canNext = offset + list.length < total;\n\tconst canPrev = offset > 0;\n\n\tconst getLabel = (item) => {\n\t\treturn getOptionLabel ? getOptionLabel(item) : item[displayField || \"name\"];\n\t};\n\n\treturn (\n\t\t<div>\n\t\t\t<Dialog\n\t\t\t\tfullScreen={fullScreen}\n\t\t\t\tmaxWidth=\"sm\"\n\t\t\t\tfullWidth={true}\n\t\t\t\topen={props.open}\n\t\t\t\tonClose={props.handleClose}\n\t\t\t\taria-labelledby=\"responsive-dialog-title\"\n\t\t\t>\n\t\t\t\t<DialogTitle\n\t\t\t\t\tid=\"responsive-dialog-title\"\n\t\t\t\t\tclassName={classes.titleHeader}\n\t\t\t\t>{`Search ${props.title || \"item\"}`}</DialogTitle>\n\t\t\t\t<DialogContent>\n\t\t\t\t\t<Grid container>\n\t\t\t\t\t\t<Input\n\t\t\t\t\t\t\tclassName={classes.input}\n\t\t\t\t\t\t\tvalue={props.searchText}\n\t\t\t\t\t\t\tonChange={(e) => props.setSearchText(e.target.value)}\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t<IconButton onClick={props.onPrevious} disabled={!canPrev}>\n\t\t\t\t\t\t\t<ChevronLeft />\n\t\t\t\t\t\t</IconButton>\n\t\t\t\t\t\t<IconButton onClick={props.onNext} disabled={!canNext}>\n\t\t\t\t\t\t\t<ChevronRight />\n\t\t\t\t\t\t</IconButton>\n\t\t\t\t\t</Grid>\n\t\t\t\t\t<List className={classes.root}>\n\t\t\t\t\t\t{list.map((item, i) => (\n\t\t\t\t\t\t\t<ListItem\n\t\t\t\t\t\t\t\tclassName={classes.listItem}\n\t\t\t\t\t\t\t\tkey={i}\n\t\t\t\t\t\t\t\trole={undefined}\n\t\t\t\t\t\t\t\tdense\n\t\t\t\t\t\t\t\tbutton\n\t\t\t\t\t\t\t\tonClick={() => handleItemClick(item)}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<ListItemText id={i} primary={getLabel(item)} />\n\t\t\t\t\t\t\t</ListItem>\n\t\t\t\t\t\t))}\n\t\t\t\t\t</List>\n\t\t\t\t</DialogContent>\n\t\t\t\t<DialogActions>\n\t\t\t\t\t<Button autoFocus onClick={props.handleClose} color=\"primary\">\n\t\t\t\t\t\t<Typography className={classes.closeText}>Close</Typography>\n\t\t\t\t\t</Button>\n\t\t\t\t</DialogActions>\n\t\t\t</Dialog>\n\t\t</div>\n\t);\n}\n","import React, { useState, useEffect, useCallback } from \"react\";\nimport AutoComplete, {\n\tcreateFilterOptions,\n} from \"@material-ui/lab/Autocomplete\";\nimport _ from \"lodash\";\nimport { TextField, Typography } from \"@material-ui/core\";\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport AxelorService from \"../services/axelor.rest\";\nimport { camleCaseString, getDefaultGridFormName, translate } from \"../utils\";\nimport { useDebounceEffect } from \"./../common.func\";\nimport SearchView from \"./SearchView\";\nconst filter = createFilterOptions();\nconst useStyles = makeStyles({\n\tautoComplete: {\n\t\tbackgroundColor: \"#293846\",\n\t\tmarginTop: 15,\n\t\t\".modern-dark &\": {\n\t\t\tbackgroundColor: \"#323232\",\n\t\t},\n\t},\n\tlabel: {\n\t\tcolor: \"#e7eaec !important\",\n\t\tfontSize: 12,\n\t},\n\tpopperAutoComplete: {\n\t\t\"& ul, .MuiAutocomplete-noOptions\": {\n\t\t\tbackgroundColor: \"rgb(41, 56, 70) !important\",\n\t\t\t\".modern-dark &\": {\n\t\t\t\tbackgroundColor: \"#1b1b1b !important\",\n\t\t\t},\n\t\t},\n\t\t\"& li, .MuiAutocomplete-noOptions\": {\n\t\t\tcolor: \"#e7eaec !important\",\n\t\t\tbackgroundColor: \"rgb(41, 56, 70) !important\",\n\t\t\t\".modern-dark &\": {\n\t\t\t\tbackgroundColor: \"#1b1b1b !important\",\n\t\t\t},\n\t\t},\n\t\t\"& li:hover, .MuiAutocomplete-noOptions\": {\n\t\t\tcolor: \"#e7eaec !important\",\n\t\t\tbackgroundColor: \"#2f4050 !important\",\n\t\t\t\".modern-dark &\": {\n\t\t\t\tbackgroundColor: \"#323232 !important\",\n\t\t\t},\n\t\t},\n\t},\n\tinput: {\n\t\tcolor: \"#e7eaec\",\n\t\tfontSize: 13,\n\t},\n\troot: {\n\t\tcolor: \"#e7eaec\",\n\t},\n\terror: {\n\t\tcolor: \"red\",\n\t\tmarginBottom: 5,\n\t\tfontSize: 13,\n\t},\n\toption: {\n\t\tfontSize: 13,\n\t},\n\tdisabled: {\n\t\tcolor: \"#a3a3a3 !important\",\n\t\tfontSize: 12,\n\t},\n});\n\nexport default function SelectComponent(_props) {\n\tconst {\n\t\tname,\n\t\tref,\n\t\ttitle,\n\t\tvalueField = \"id\",\n\t\ttype,\n\t\tmultiple = false,\n\t\tcommaSeparated,\n\t\tdisplayField = \"name\",\n\t\tlimit = 10,\n\t\tdata: preData = [],\n\t\tisDisabled,\n\t\tneedsTargetModel,\n\t\tcanAddNew = false,\n\t\tgetOptionLabel,\n\t\tshouldFetchInStart = false,\n\t} = _props.field;\n\tconst { props, error } = _props;\n\tconst { propertyList, setPropertyList, onChange, editWidgetType, modelType } =\n\t\tprops;\n\tlet value = propertyList[name] || \"\";\n\tif (commaSeparated && type === \"select\") {\n\t\tconst values = value ? value.split(\",\") : [];\n\t\tvalue = values.map((val) => {\n\t\t\treturn { [valueField]: val };\n\t\t});\n\t}\n\tconst [data, setData] = useState([...preData]);\n\tconst [searchText, setsearchText] = useState(\"\");\n\tconst isMounted = React.useRef(true);\n\tconst [moreDialog, setMoreDialog] = useState(false);\n\tconst [offset, setOffset] = useState(0);\n\tconst [total, setTotal] = useState(0);\n\tconst [initialFetch, setInitialFetch] = useState(false);\n\tconst { targetModel } = propertyList;\n\tconst classes = useStyles();\n\tconst disabled = isDisabled\n\t\t? isDisabled(propertyList, editWidgetType, modelType)\n\t\t: false;\n\n\tconst handleInputChange = useCallback(\n\t\t(e, value, reason) => {\n\t\t\tif (reason !== \"reset\") {\n\t\t\t\tif (type === \"objectSelection\" && typeof value === \"object\") {\n\t\t\t\t\tsetsearchText(value[displayField]);\n\t\t\t\t} else {\n\t\t\t\t\tsetsearchText(value);\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\t[type, displayField]\n\t);\n\n\tconst getSelectValue = useCallback(\n\t\t(value = []) => {\n\t\t\tif (commaSeparated) {\n\t\t\t\treturn value ? value.map((e) => e.name).join(\",\") : \"\";\n\t\t\t}\n\t\t\treturn ref ? value[valueField] : value;\n\t\t},\n\t\t[valueField, commaSeparated, ref]\n\t);\n\n\tconst fetchOptions = useCallback(\n\t\t(searchText = \"\", offset = 0) => {\n\t\t\tconst criteria = [];\n\t\t\tif (searchText) {\n\t\t\t\tcriteria.push({\n\t\t\t\t\tfieldName: \"name\",\n\t\t\t\t\toperator: \"like\",\n\t\t\t\t\tvalue: searchText,\n\t\t\t\t});\n\t\t\t}\n\t\t\tif (\n\t\t\t\t(name === \"gridView\" || name === \"formView\") &&\n\t\t\t\tneedsTargetModel.includes(props.type)\n\t\t\t) {\n\t\t\t\tif (!targetModel) return;\n\t\t\t}\n\t\t\tif (name === \"gridView\") {\n\t\t\t\tneedsTargetModel.includes(props.type) &&\n\t\t\t\t\tcriteria.push({\n\t\t\t\t\t\tfieldName: \"model\",\n\t\t\t\t\t\toperator: \"=\",\n\t\t\t\t\t\tvalue: targetModel,\n\t\t\t\t\t});\n\t\t\t\tcriteria.push({ fieldName: \"type\", operator: \"=\", value: \"grid\" });\n\t\t\t}\n\t\t\tif (name === \"formView\") {\n\t\t\t\tneedsTargetModel.includes(props.type) &&\n\t\t\t\t\tcriteria.push({\n\t\t\t\t\t\tfieldName: \"model\",\n\t\t\t\t\t\toperator: \"=\",\n\t\t\t\t\t\tvalue: targetModel,\n\t\t\t\t\t});\n\t\t\t\tcriteria.push({ fieldName: \"type\", operator: \"=\", value: \"form\" });\n\t\t\t}\n\t\t\tconst data = {\n\t\t\t\tcriteria,\n\t\t\t\toperator: \"and\",\n\t\t\t};\n\t\t\tconst fields = [\n\t\t\t\t\"name\",\n\t\t\t\t\"fullName\",\n\t\t\t\tvalueField,\n\t\t\t\tdisplayField,\n\t\t\t\t\"parent\",\n\t\t\t].filter((e) => e);\n\t\t\tif (shouldFetchInStart && initialFetch) {\n\t\t\t\t// setData(data);\n\t\t\t} else {\n\t\t\t\treturn new AxelorService({ model: ref })\n\t\t\t\t\t.search({ fields, data, limit, offset })\n\t\t\t\t\t.then(({ data, total } = {}) => {\n\t\t\t\t\t\tsetInitialFetch(true);\n\t\t\t\t\t\tif (data && data.length) {\n\t\t\t\t\t\t\tif (isMounted.current) {\n\t\t\t\t\t\t\t\t!moreDialog &&\n\t\t\t\t\t\t\t\t\t!shouldFetchInStart &&\n\t\t\t\t\t\t\t\t\ttotal > limit &&\n\t\t\t\t\t\t\t\t\tdata.push({\n\t\t\t\t\t\t\t\t\t\tname: translate(\"Show more...\"),\n\t\t\t\t\t\t\t\t\t\tid: \"studio_show_More_View\",\n\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\tsetTotal(total);\n\t\t\t\t\t\t\t\tconst uniqueData = _.uniqBy(data, displayField);\n\t\t\t\t\t\t\t\tsetData(uniqueData);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t}\n\t\t},\n\t\t[\n\t\t\tname,\n\t\t\tref,\n\t\t\ttargetModel,\n\t\t\tvalueField,\n\t\t\tdisplayField,\n\t\t\tlimit,\n\t\t\tneedsTargetModel,\n\t\t\tprops.type,\n\t\t\tmoreDialog,\n\t\t\tinitialFetch,\n\t\t\tshouldFetchInStart,\n\t\t]\n\t);\n\n\tconst optionDebounceHandler = React.useCallback(() => {\n\t\tref && fetchOptions(searchText);\n\t}, [fetchOptions, searchText, ref]);\n\n\tconst getValue = (value) => {\n\t\treturn typeof value === \"string\" && ref ? { [valueField]: value } : value;\n\t};\n\n\tconst getInputAsOption = React.useCallback(\n\t\t(value) => {\n\t\t\tif (value && typeof value === \"string\" && ref) {\n\t\t\t\tvalue = { [valueField]: value };\n\t\t\t}\n\t\t\treturn value;\n\t\t},\n\t\t[ref, valueField]\n\t);\n\n\tconst handleSearch = React.useCallback((value) => {\n\t\tsetsearchText(value);\n\t\tsetOffset(0);\n\t}, []);\n\n\tconst handleNext = React.useCallback(() => {\n\t\tconst newOffset = offset + limit;\n\t\tif (newOffset <= total) {\n\t\t\tsetOffset(newOffset);\n\t\t\tfetchOptions(searchText, newOffset);\n\t\t}\n\t}, [limit, total, offset, fetchOptions, searchText]);\n\n\tconst handlePrevious = React.useCallback(() => {\n\t\tlet newOffset = offset - limit;\n\t\tnewOffset = newOffset > 0 ? newOffset : 0;\n\t\tsetOffset(newOffset);\n\t\tfetchOptions(searchText, newOffset);\n\t}, [offset, limit, searchText, fetchOptions]);\n\n\tconst handleClose = React.useCallback(() => {\n\t\tsetMoreDialog(false);\n\t\tsetOffset(0);\n\t}, []);\n\n\tconst handleChange = React.useCallback(\n\t\t(e, _value) => {\n\t\t\tif (_value?.id === \"studio_show_More_View\") {\n\t\t\t\tsetMoreDialog(true);\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tif (multiple) {\n\t\t\t\thandleSearch(\"\");\n\t\t\t\tif (e.fromDialog) {\n\t\t\t\t\t_value = [...value, _value];\n\t\t\t\t} else {\n\t\t\t\t\tconst hasMoreView =\n\t\t\t\t\t\t_value.findIndex((v) => v?.id === \"studio_show_More_View\") !== -1;\n\t\t\t\t\tif (hasMoreView) {\n\t\t\t\t\t\tsetMoreDialog(true);\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\t_value = _value\n\t\t\t\t\t.map((val) => {\n\t\t\t\t\t\tif (val?.id !== \"studio_show_More_View\") {\n\t\t\t\t\t\t\treturn getInputAsOption(val);\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn undefined;\n\t\t\t\t\t})\n\t\t\t\t\t.filter((e) => e);\n\t\t\t} else {\n\t\t\t\tif (_value && _value.inputValue && _value.inputValue.length && ref) {\n\t\t\t\t\t_value[valueField] = _value.inputValue;\n\t\t\t\t}\n\t\t\t}\n\t\t\tconst updatedValue = {\n\t\t\t\t...propertyList,\n\t\t\t\t[name]:\n\t\t\t\t\ttype === \"objectSelection\"\n\t\t\t\t\t\t? _value\n\t\t\t\t\t\t: _value && getSelectValue(_value),\n\t\t\t};\n\t\t\tlet payload = {};\n\t\t\tif (name === \"targetModel\") {\n\t\t\t\tconst { targetModel } = updatedValue || {};\n\t\t\t\tpayload = {\n\t\t\t\t\tgridView: _value ? getDefaultGridFormName(targetModel) : null,\n\t\t\t\t\tformView: _value ? getDefaultGridFormName(targetModel, true) : null,\n\t\t\t\t};\n\t\t\t}\n\t\t\tsetPropertyList({ ...(updatedValue || {}), ...payload });\n\t\t\tonChange(\n\t\t\t\t{ ...(updatedValue || {}), ...payload },\n\t\t\t\tname !== \"selection\" ? name : undefined\n\t\t\t);\n\t\t},\n\t\t[\n\t\t\tgetSelectValue,\n\t\t\tmultiple,\n\t\t\tname,\n\t\t\tonChange,\n\t\t\tsetPropertyList,\n\t\t\tpropertyList,\n\t\t\tvalue,\n\t\t\ttype,\n\t\t\tref,\n\t\t\tgetInputAsOption,\n\t\t\tvalueField,\n\t\t\thandleSearch,\n\t\t]\n\t);\n\n\tuseDebounceEffect(optionDebounceHandler, 500);\n\n\tuseEffect(() => {\n\t\tisMounted.current = true;\n\t\tfetchOptions();\n\t\treturn () => {\n\t\t\tisMounted.current = false;\n\t\t};\n\t}, [fetchOptions]);\n\n\tuseEffect(() => {\n\t\tif (!multiple) {\n\t\t\tif (typeof value === \"object\") {\n\t\t\t\tsetsearchText(value[displayField]);\n\t\t\t} else {\n\t\t\t\tsetsearchText(value);\n\t\t\t}\n\t\t}\n\t}, [multiple, value, displayField, type]);\n\treturn (\n\t\t<React.Fragment>\n\t\t\t<AutoComplete\n\t\t\t\tclasses={{\n\t\t\t\t\tinputFocused: disabled ? classes.disabled : classes.input,\n\t\t\t\t\tclearIndicator: classes.input,\n\t\t\t\t\tpopupIndicator: disabled ? classes.disabled : classes.input,\n\t\t\t\t\tpopper: classes.popperAutoComplete,\n\t\t\t\t\toption: classes.option,\n\t\t\t\t\tnoOptions: classes.option,\n\t\t\t\t}}\n\t\t\t\tclassName={classes.autoComplete}\n\t\t\t\tdisabled={disabled}\n\t\t\t\tmultiple={multiple}\n\t\t\t\toptions={data}\n\t\t\t\tforcePopupIcon={true}\n\t\t\t\tfreeSolo={type !== \"objectSelection\"}\n\t\t\t\tvalue={multiple ? value || [] : getValue(value)}\n\t\t\t\tinputValue={searchText || \"\"}\n\t\t\t\tsize=\"small\"\n\t\t\t\tonInputChange={handleInputChange}\n\t\t\t\t{...{\n\t\t\t\t\tfilterOptions: (options, params) => {\n\t\t\t\t\t\tconst filtered = filter(options, params);\n\t\t\t\t\t\t// Suggest the creation of a new value\n\t\t\t\t\t\tif (searchText !== \"\" && canAddNew) {\n\t\t\t\t\t\t\tfiltered.splice(0, 0, {\n\t\t\t\t\t\t\t\tinputValue: searchText,\n\t\t\t\t\t\t\t\tname: searchText,\n\t\t\t\t\t\t\t\ttitle: `Add \"${searchText}\"`,\n\t\t\t\t\t\t\t\ttype: \"canAddNew\",\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\t\t\t\t\t\tconst showMore = options.find(\n\t\t\t\t\t\t\t(o) => o.id === \"studio_show_More_View\"\n\t\t\t\t\t\t);\n\t\t\t\t\t\tif (\n\t\t\t\t\t\t\tshowMore &&\n\t\t\t\t\t\t\t![\"\", null, undefined].includes(params.inputValue)\n\t\t\t\t\t\t) {\n\t\t\t\t\t\t\tconst hasShowMore =\n\t\t\t\t\t\t\t\tfiltered.findIndex((o) => o.id === \"studio_show_More_View\") !==\n\t\t\t\t\t\t\t\t-1;\n\n\t\t\t\t\t\t\t!hasShowMore && filtered.push({ ...showMore });\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\treturn filtered;\n\t\t\t\t\t},\n\t\t\t\t}}\n\t\t\t\tonChange={handleChange}\n\t\t\t\trenderInput={(params) => (\n\t\t\t\t\t<TextField\n\t\t\t\t\t\t{...params}\n\t\t\t\t\t\tautoComplete=\"off\"\n\t\t\t\t\t\tvariant=\"outlined\"\n\t\t\t\t\t\tlabel={translate(camleCaseString(title || name))}\n\t\t\t\t\t\tInputLabelProps={{\n\t\t\t\t\t\t\tclassName: disabled ? classes.disabled : classes.label,\n\t\t\t\t\t\t}}\n\t\t\t\t\t/>\n\t\t\t\t)}\n\t\t\t\tgetOptionLabel={(option) => {\n\t\t\t\t\tif (getOptionLabel) {\n\t\t\t\t\t\treturn getOptionLabel(option, data);\n\t\t\t\t\t}\n\t\t\t\t\treturn option.type === \"canAddNew\"\n\t\t\t\t\t\t? option[\"title\"]\n\t\t\t\t\t\t: typeof option === \"string\"\n\t\t\t\t\t\t? option\n\t\t\t\t\t\t: option[displayField] || \"\";\n\t\t\t\t}}\n\t\t\t/>\n\t\t\t{error && <Typography className={classes.error}>{error}</Typography>}\n\t\t\t{moreDialog && (\n\t\t\t\t<SearchView\n\t\t\t\t\tsearchText={searchText}\n\t\t\t\t\tlist={data}\n\t\t\t\t\ttotal={total}\n\t\t\t\t\toffset={offset}\n\t\t\t\t\tdisplayField={displayField}\n\t\t\t\t\topen={moreDialog}\n\t\t\t\t\tonNext={handleNext}\n\t\t\t\t\tonPrevious={handlePrevious}\n\t\t\t\t\thandleClose={handleClose}\n\t\t\t\t\tsetSearchText={handleSearch}\n\t\t\t\t\ttitle={translate(camleCaseString(title || name))}\n\t\t\t\t\tonChange={(value) => handleChange({ fromDialog: true }, value)}\n\t\t\t\t/>\n\t\t\t)}\n\t\t</React.Fragment>\n\t);\n}\n","import React from \"react\";\nimport { TextField, Typography } from \"@material-ui/core\";\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport { useStore } from \"../store/context\";\nconst useStyles = makeStyles({\n\tcontainer: {\n\t\tmarginBottom: 15,\n\t},\n\trow: {\n\t\tdisplay: \"flex\",\n\t},\n\tlanguageText: {\n\t\twidth: \"15%\",\n\t\tmarginTop: 8,\n\t\ttextTransform: \"capitalize\",\n\t\ttextAlign: \"center\",\n\t},\n});\n\nfunction TranslationGrid(props) {\n\tconst classes = useStyles();\n\tconst { state, update } = useStore();\n\tconst { keyValue, ...rest } = props;\n\tconst { translationList } = state;\n\tconst [translations, setTranslations] = React.useState([]);\n\n\tconst handleTranslationChange = React.useCallback(\n\t\t({ key, message, language }) => {\n\t\t\tsetTranslations((_translations) => {\n\t\t\t\tlet newList = [..._translations];\n\t\t\t\tconst translationIndex = newList.findIndex(\n\t\t\t\t\t(e) => e.key === key && e.language === language\n\t\t\t\t);\n\n\t\t\t\tif (translationIndex !== -1) {\n\t\t\t\t\tnewList[translationIndex] = { ...newList[translationIndex], message };\n\t\t\t\t} else {\n\t\t\t\t\tnewList.push({ key, message, language });\n\t\t\t\t}\n\t\t\t\treturn [...newList];\n\t\t\t});\n\t\t},\n\t\t[]\n\t);\n\n\tconst handleTranslationUpdate = React.useCallback(\n\t\t({ key, message, language }) => {\n\t\t\tupdate((draft) => {\n\t\t\t\tconst translationIndex = draft.translationList.findIndex(\n\t\t\t\t\t(e) => e.key === key && e.language === language\n\t\t\t\t);\n\n\t\t\t\tif (translationIndex !== -1) {\n\t\t\t\t\tdraft.translationList[translationIndex].message = message;\n\t\t\t\t} else {\n\t\t\t\t\tdraft.translationList.push({ key, message, language });\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\t\t[update]\n\t);\n\n\tReact.useEffect(() => {\n\t\tsetTranslations([...translationList]);\n\t}, [translationList]);\n\n\treturn (\n\t\t<div className={classes.container}>\n\t\t\t{state.languageList.map((lang, i) => (\n\t\t\t\t<div key={i} className={classes.row}>\n\t\t\t\t\t<Typography classes={{ root: classes.languageText }}>\n\t\t\t\t\t\t{lang.value}\n\t\t\t\t\t</Typography>\n\t\t\t\t\t<TextField\n\t\t\t\t\t\tvariant=\"outlined\"\n\t\t\t\t\t\t{...rest}\n\t\t\t\t\t\tvalue={\n\t\t\t\t\t\t\ttranslations.find(\n\t\t\t\t\t\t\t\t(e) => e.key === keyValue && e.language === lang.value\n\t\t\t\t\t\t\t)?.message || \"\"\n\t\t\t\t\t\t}\n\t\t\t\t\t\tonChange={(e) =>\n\t\t\t\t\t\t\thandleTranslationChange({\n\t\t\t\t\t\t\t\tkey: keyValue,\n\t\t\t\t\t\t\t\tmessage: e.target.value,\n\t\t\t\t\t\t\t\tlanguage: lang.value,\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t}\n\t\t\t\t\t\tonBlur={(e) =>\n\t\t\t\t\t\t\te.target.value &&\n\t\t\t\t\t\t\thandleTranslationUpdate({\n\t\t\t\t\t\t\t\tkey: keyValue,\n\t\t\t\t\t\t\t\tmessage: e.target.value,\n\t\t\t\t\t\t\t\tlanguage: lang.value,\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t}\n\t\t\t\t\t/>\n\t\t\t\t</div>\n\t\t\t))}\n\t\t</div>\n\t);\n}\n\nexport default TranslationGrid;\n","import React from \"react\";\nimport Button from \"@material-ui/core/Button\";\nimport Dialog from \"@material-ui/core/Dialog\";\nimport DialogActions from \"@material-ui/core/DialogActions\";\nimport DialogContent from \"@material-ui/core/DialogContent\";\nimport DialogContentText from \"@material-ui/core/DialogContentText\";\nimport DialogTitle from \"@material-ui/core/DialogTitle\";\nimport { makeStyles } from \"@material-ui/core/styles\";\n\nimport { translate } from \"../utils\";\n\nconst useStyles = makeStyles({\n\tpaper: {\n\t\tminWidth: 300,\n\t},\n});\n\nexport default function DeleteConfirmation({\n\tonOk,\n\tonClose,\n\topen,\n\tmessage,\n\ttitle = \"Delete Confirmation\",\n}) {\n\tconst classes = useStyles();\n\treturn (\n\t\t<Dialog\n\t\t\topen={open}\n\t\t\tonClose={onClose}\n\t\t\taria-labelledby=\"alert-dialog-title\"\n\t\t\taria-describedby=\"alert-dialog-description\"\n\t\t\tclasses={{\n\t\t\t\tpaper: classes.paper,\n\t\t\t}}\n\t\t>\n\t\t\t<DialogTitle id=\"alert-dialog-title\">{translate(title)}</DialogTitle>\n\t\t\t<DialogContent>\n\t\t\t\t<DialogContentText id=\"alert-dialog-description\">\n\t\t\t\t\t{translate(message)}\n\t\t\t\t</DialogContentText>\n\t\t\t</DialogContent>\n\t\t\t<DialogActions>\n\t\t\t\t<Button onClick={onOk} color=\"primary\">\n\t\t\t\t\t{translate(\"Yes\")}\n\t\t\t\t</Button>\n\t\t\t\t<Button onClick={onClose} color=\"primary\" autoFocus>\n\t\t\t\t\t{translate(\"No\")}\n\t\t\t\t</Button>\n\t\t\t</DialogActions>\n\t\t</Dialog>\n\t);\n}\n","import React, { useState } from \"react\";\nimport {\n\tTextField,\n\tGrid,\n\tTypography,\n\tFormControlLabel,\n\tSwitch,\n\tIconButton,\n} from \"@material-ui/core\";\nimport AutoComplete from \"@material-ui/lab/Autocomplete\";\nimport classNames from \"classnames\";\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport { options } from \"./list\";\nimport {\n\tcamleCaseString,\n\ttranslate,\n\tgetProperty,\n\tgetPropertyValue,\n\tgenerateFieldUniqueTitle,\n\tcapitalizeFirst,\n} from \"../utils\";\nimport SelectComponent from \"../components/SelectComponent\";\nimport { MODEL_TYPE, TYPE, typeReplacer, ENTITY_TYPE } from \"../constants\";\nimport { useStore } from \"../store/context\";\nimport {\n\tFormView,\n\tGridView,\n\tJsonRelationalField,\n\tSelectableType,\n\tTargetJsonModel,\n\tTargetModel,\n} from \"./propertyFields\";\nimport TranslationGrid from \"../components/TranslationGrid\";\nimport TranslateIcon from \"@material-ui/icons/Translate\";\nimport CloseIcon from \"@material-ui/icons/Delete\";\nimport ClearIcon from \"@material-ui/icons/Close\";\nimport { getSelectionText } from \"../Toolbar/api\";\n\nimport DialogConfirmation from \"../Toolbar/DeleteConfirmation\";\n\nconst useStyles = makeStyles({\n\tinput: {\n\t\tbackgroundColor: \"#293846\",\n\t\tmarginTop: 15,\n\t\t\".modern-dark &\": {\n\t\t\tbackgroundColor: \"#323232\",\n\t\t},\n\t},\n\ttranslationInput: {\n\t\tpaddingTop: 10,\n\t\tpaddingBottom: 10,\n\t},\n\ttranslationInputView: {\n\t\tbackgroundColor: \"#293846\",\n\t\tmarginBottom: 5,\n\t\t\".modern-dark &\": {\n\t\t\tbackgroundColor: \"#323232\",\n\t\t},\n\t},\n\tlabel: {\n\t\tcolor: \"#f7f7f7\",\n\t\tfontSize: 12,\n\t\t\"&#outlined-basic-label\": {\n\t\t\tcolor: \"#f7f7f7\",\n\t\t},\n\t\t\"&.MuiInputLabel-shrink\": {\n\t\t\ttop: \"1px !important\",\n\t\t},\n\t},\n\toutlinedRoot: {\n\t\tcolor: \"#ffffff\",\n\t\t\"&:hover $notchedOutline\": {\n\t\t\tborderColor: \"#ffffff\",\n\t\t},\n\t\t\"&$focused $notchedOutline\": {\n\t\t\tborderColor: \"white\",\n\t\t\tborderWidth: 1,\n\t\t},\n\t},\n\tnotchedOutline: {},\n\tfocused: {\n\t\tcolor: \"#ffffff\",\n\t},\n\tswitchBase: {\n\t\t\"&$checked\": {\n\t\t\tcolor: \"#ffffff\",\n\t\t},\n\t\t\"&$checked + $track\": {\n\t\t\tbackgroundColor: \"#ffffff\",\n\t\t},\n\t},\n\tchecked: {},\n\ttrack: {},\n\tselection: {\n\t\tcolor: \"#ffffff\",\n\t\tbackgroundColor: \"#293846\",\n\t\t\".modern-dark &\": {\n\t\t\tbackgroundColor: \"#323232\",\n\t\t},\n\t},\n\ticonOutlined: {\n\t\tcolor: \"#ffffff\",\n\t},\n\tpanelTitle: {\n\t\tcolor: \"white\",\n\t\tfontWeight: \"600\",\n\t},\n\tpanelMargin: {\n\t\tmargin: \"25px 0px 0px 0px\",\n\t},\n\tdisableInput: {\n\t\tcolor: \"#a3a3a3 !important\",\n\t},\n\tunique: {\n\t\tcolor: \"#0275d8\",\n\t},\n\trequired: {\n\t\tcolor: \"red\",\n\t},\n\ttranslateButton: {\n\t\tcolor: \"#ffffff\",\n\t\tpadding: \"10px 12px\",\n\t\t\"& > span > svg\": {\n\t\t\tfontSize: \"1.1rem\",\n\t\t},\n\t},\n\tstaticSelectMenuItem: {\n\t\tcolor: \"#ffffff\",\n\t\tbackgroundColor: \"rgb(41, 56, 70) !important\",\n\t\t\"&:hover\": {\n\t\t\tbackgroundColor: \"#293846 !important\",\n\t\t},\n\t},\n\tautoComplete: {\n\t\twidth: \"100%\",\n\t\tmarginTop: 15,\n\t\tbackgroundColor: \"#293846\",\n\t\t\"& > div > label\": {\n\t\t\tcolor: \"#ffffff !important\",\n\t\t\tfontSize: 13,\n\t\t},\n\t\t\".modern-dark &\": {\n\t\t\tbackgroundColor: \"#323232\",\n\t\t},\n\t},\n\tautoCompleteInput: {\n\t\tcolor: \"#ffffff\",\n\t\tfontSize: 13,\n\t},\n\tautoCompleteOption: {\n\t\tfontSize: 13,\n\t\t\"& ul, .MuiAutocomplete-noOptions\": {\n\t\t\tbackgroundColor: \"rgb(41, 56, 70) !important\",\n\t\t\t\".modern-dark &\": {\n\t\t\t\tbackgroundColor: \"#1b1b1b !important\",\n\t\t\t},\n\t\t},\n\t\t\"& li, .MuiAutocomplete-noOptions\": {\n\t\t\tcolor: \"#ffffff !important\",\n\t\t\tbackgroundColor: \"rgb(41, 56, 70) !important\",\n\t\t\t\".modern-dark &\": {\n\t\t\t\tbackgroundColor: \"#1b1b1b !important\",\n\t\t\t},\n\t\t},\n\t\t\"& li:hover, .MuiAutocomplete-noOptions\": {\n\t\t\tcolor: \"#ffffff !important\",\n\t\t\tbackgroundColor: \"#2f4050 !important\",\n\t\t\t\".modern-dark &\": {\n\t\t\t\tbackgroundColor: \"#323232 !important\",\n\t\t\t},\n\t\t},\n\t},\n\ttextFieldInput: {\n\t\t// padding: \"10px 14px !important\",\n\t\tfontSize: 13,\n\t},\n\tbooleanInputLabel: {\n\t\tfontSize: 12,\n\t},\n\tdisabled: {\n\t\tcolor: \"#a3a3a3 !important\",\n\t\tfontSize: 12,\n\t},\n});\n\nconst PropertiesContext = React.createContext();\n\nfunction Label(text, field) {\n\tconst classes = useStyles();\n\treturn (\n\t\t<span>\n\t\t\t<span>{text}</span>\n\t\t\t{field.unique && <span className={classes.unique}> (unique) </span>}\n\t\t\t{field.required && <span className={classes.required}> * </span>}\n\t\t</span>\n\t);\n}\n\nconst isValueGenerated = (value) => {\n\treturn value.includes(\"studio:\");\n};\n\nconst hasPropertyToShow = (list, type) => {\n\treturn (\n\t\tlist.filter(\n\t\t\t(item) => !item.dependModelType || item.dependModelType === type\n\t\t).length > 0\n\t);\n};\n\nfunction StringInput(_props) {\n\tconst {\n\t\tindex,\n\t\tmultiline = false,\n\t\terror,\n\t\tparentPanel,\n\t\tonTranslationRemove,\n\t\tclearable = false,\n\t} = _props;\n\tconst classes = useStyles();\n\tconst [confirm, setConfirm] = React.useState(false);\n\tconst {\n\t\ttitle,\n\t\tname,\n\t\ttype,\n\t\trequired,\n\t\treadOnly,\n\t\tmax,\n\t\tmin,\n\t\tparentField,\n\t\ttranslationView,\n\t\t...rest\n\t} = _props.field;\n\tconst props = React.useContext(PropertiesContext);\n\tconst {\n\t\tpropertyList,\n\t\tsetPropertyList,\n\t\tonChange,\n\t\tmodelType,\n\t\tmetaFieldStore,\n\t\teditWidgetType,\n\t} = props;\n\tlet label = Label(translate(camleCaseString(title || name)), _props.field);\n\tlet placeholder = translate(camleCaseString(title || name));\n\tif (name === \"showIf\" || name === \"requiredIf\") {\n\t\tplaceholder = \"id == 1\";\n\t} else if (name === \"hideIf\") {\n\t\tplaceholder = \"id == null\";\n\t} else if (name === \"readOnlyIf\") {\n\t\tplaceholder = \"id != null\";\n\t}\n\tlet value = propertyList[name] || \"\";\n\tif (\n\t\t(modelType === rest.modelType || props.editWidgetType === \"customField\") &&\n\t\tparentField\n\t) {\n\t\tconst field = propertyList[parentField]\n\t\t\t? JSON.parse(propertyList[parentField])\n\t\t\t: {};\n\t\tvalue = field[name] || \"\";\n\t}\n\tif (rest.formatter) {\n\t\tvalue = rest.formatter(value, propertyList);\n\t}\n\tlet disabled = Boolean(readOnly);\n\tif (rest.isDisabled) {\n\t\tdisabled = rest.isDisabled({\n\t\t\tproperties: propertyList,\n\t\t\tmetaFieldStore,\n\t\t\teditWidgetType,\n\t\t\tmodelType,\n\t\t\tparentPanel,\n\t\t});\n\t}\n\n\tconst handleTranslationClick = React.useCallback(() => {\n\t\tif (isValueGenerated(value)) {\n\t\t\treturn;\n\t\t}\n\t\tconst newValue = generateFieldUniqueTitle({\n\t\t\tname,\n\t\t\tfieldName: propertyList[name] || type,\n\t\t});\n\t\tonChange(\n\t\t\t{\n\t\t\t\t...(propertyList || {}),\n\t\t\t\t...getProperty(\n\t\t\t\t\tname,\n\t\t\t\t\tnewValue,\n\t\t\t\t\tparentField,\n\t\t\t\t\tpropertyList[parentField],\n\t\t\t\t\t!(modelType === rest.modelType) || editWidgetType === \"customField\"\n\t\t\t\t),\n\t\t\t},\n\t\t\tname\n\t\t);\n\t}, [\n\t\tpropertyList,\n\t\tname,\n\t\ttype,\n\t\tvalue,\n\t\tonChange,\n\t\trest.modelType,\n\t\tmodelType,\n\t\tparentField,\n\t\teditWidgetType,\n\t]);\n\n\tconst handleTranslationRemove = React.useCallback(() => {\n\t\tsetConfirm(false);\n\t\tonChange(\n\t\t\t{\n\t\t\t\t...(propertyList || {}),\n\t\t\t\t...getProperty(\n\t\t\t\t\tname,\n\t\t\t\t\t\"\",\n\t\t\t\t\tparentField,\n\t\t\t\t\tpropertyList[parentField],\n\t\t\t\t\t!(modelType === rest.modelType)\n\t\t\t\t),\n\t\t\t},\n\t\t\tname\n\t\t);\n\t\tonTranslationRemove(value);\n\t}, [\n\t\tonTranslationRemove,\n\t\tvalue,\n\t\tname,\n\t\tparentField,\n\t\tmodelType,\n\t\tonChange,\n\t\tpropertyList,\n\t\trest.modelType,\n\t]);\n\n\tconst removeTranslation = React.useCallback(() => {\n\t\tsetConfirm(true);\n\t}, []);\n\n\tconst onClose = React.useCallback(() => {\n\t\tsetConfirm(false);\n\t}, []);\n\n\tconst savedValue = React.useRef(value);\n\treturn (\n\t\t<React.Fragment>\n\t\t\t<TextField\n\t\t\t\terror={Boolean(error)}\n\t\t\t\thelperText={error}\n\t\t\t\tInputLabelProps={{\n\t\t\t\t\tclassName: disabled ? classes.disabled : classes.label,\n\t\t\t\t}}\n\t\t\t\tsize=\"small\"\n\t\t\t\tInputProps={{\n\t\t\t\t\tclasses: {\n\t\t\t\t\t\troot: classes && disabled ? \"\" : classes.outlinedRoot,\n\t\t\t\t\t\tnotchedOutline: classes && classes.notchedOutline,\n\t\t\t\t\t\tfocused: classes && classes.focused,\n\t\t\t\t\t\tdisabled: classes && classes.disableInput,\n\t\t\t\t\t\tinput: classes && classes.textFieldInput,\n\t\t\t\t\t},\n\t\t\t\t\tendAdornment: translationView ? (\n\t\t\t\t\t\tisValueGenerated(value) ? (\n\t\t\t\t\t\t\t<IconButton\n\t\t\t\t\t\t\t\tclassName={classes.translateButton}\n\t\t\t\t\t\t\t\tonClick={removeTranslation}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<CloseIcon />\n\t\t\t\t\t\t\t</IconButton>\n\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\t<IconButton\n\t\t\t\t\t\t\t\tclassName={classes.translateButton}\n\t\t\t\t\t\t\t\tonClick={handleTranslationClick}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<TranslateIcon />\n\t\t\t\t\t\t\t</IconButton>\n\t\t\t\t\t\t)\n\t\t\t\t\t) : clearable ? (\n\t\t\t\t\t\t<IconButton\n\t\t\t\t\t\t\tclassName={classes.translateButton}\n\t\t\t\t\t\t\tonClick={() => {\n\t\t\t\t\t\t\t\tlet value = \"\";\n\t\t\t\t\t\t\t\tlet flag = true;\n\t\t\t\t\t\t\t\tif (\n\t\t\t\t\t\t\t\t\trest.modelType === MODEL_TYPE.BASE &&\n\t\t\t\t\t\t\t\t\tprops.editWidgetType !== \"customField\"\n\t\t\t\t\t\t\t\t) {\n\t\t\t\t\t\t\t\t\tflag =\n\t\t\t\t\t\t\t\t\t\tvalue === \"\"\n\t\t\t\t\t\t\t\t\t\t\t? propertyList[name] !== undefined\n\t\t\t\t\t\t\t\t\t\t\t\t? true\n\t\t\t\t\t\t\t\t\t\t\t\t: false\n\t\t\t\t\t\t\t\t\t\t\t: true;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tif (\n\t\t\t\t\t\t\t\t\trest.modelType === MODEL_TYPE.CUSTOM &&\n\t\t\t\t\t\t\t\t\tprops.editWidgetType === \"customField\"\n\t\t\t\t\t\t\t\t) {\n\t\t\t\t\t\t\t\t\t// set null value when value is negative for custom view & custom fields\n\t\t\t\t\t\t\t\t\tvalue = value || null;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tif (flag) {\n\t\t\t\t\t\t\t\t\tonChange(\n\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\t...(propertyList || {}),\n\t\t\t\t\t\t\t\t\t\t\t...getProperty(\n\t\t\t\t\t\t\t\t\t\t\t\tname,\n\t\t\t\t\t\t\t\t\t\t\t\tvalue,\n\t\t\t\t\t\t\t\t\t\t\t\tparentField,\n\t\t\t\t\t\t\t\t\t\t\t\tpropertyList[parentField],\n\t\t\t\t\t\t\t\t\t\t\t\t!(modelType === rest.modelType) ||\n\t\t\t\t\t\t\t\t\t\t\t\t\teditWidgetType === \"customField\"\n\t\t\t\t\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t\tname\n\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<ClearIcon />\n\t\t\t\t\t\t</IconButton>\n\t\t\t\t\t) : null,\n\t\t\t\t}}\n\t\t\t\tinputProps={{ min: min, max: max }}\n\t\t\t\tkey={index}\n\t\t\t\tclassName={classes && classes.input}\n\t\t\t\tid=\"outlined-basic\"\n\t\t\t\tmultiline={multiline}\n\t\t\t\ttype={type === \"integer\" ? \"number\" : type}\n\t\t\t\tlabel={label}\n\t\t\t\tplaceholder={placeholder}\n\t\t\t\tvariant=\"outlined\"\n\t\t\t\tdisabled={disabled || (translationView && isValueGenerated(value))}\n\t\t\t\tvalue={value}\n\t\t\t\tminRows={3}\n\t\t\t\tonFocus={() => {\n\t\t\t\t\tsavedValue.current = value;\n\t\t\t\t}}\n\t\t\t\tautoComplete=\"off\"\n\t\t\t\tonChange={(e) => {\n\t\t\t\t\tif (type === \"integer\" && isNaN(Number(e.target.value))) {\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t\tif (min && max) {\n\t\t\t\t\t\tconst value = Number(e.target.value);\n\t\t\t\t\t\tif (value < min || value > max) {\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tlet value = e.target.value;\n\t\t\t\t\tsetPropertyList({\n\t\t\t\t\t\t...(propertyList || {}),\n\t\t\t\t\t\t...getProperty(\n\t\t\t\t\t\t\tname,\n\t\t\t\t\t\t\tvalue,\n\t\t\t\t\t\t\tparentField,\n\t\t\t\t\t\t\tpropertyList[parentField],\n\t\t\t\t\t\t\t!(modelType !== rest.modelType) ||\n\t\t\t\t\t\t\t\teditWidgetType === \"customField\"\n\t\t\t\t\t\t),\n\t\t\t\t\t});\n\t\t\t\t}}\n\t\t\t\tonBlur={(e) => {\n\t\t\t\t\tif (savedValue.current === value) return;\n\t\t\t\t\tif (type === \"integer\" && isNaN(Number(e.target.value))) {\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t\tif (min && max) {\n\t\t\t\t\t\tconst value = Number(e.target.value);\n\t\t\t\t\t\tif (value < min || value > max) {\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tlet _value = e.target.value;\n\t\t\t\t\tlet flag = true;\n\t\t\t\t\tif (\n\t\t\t\t\t\trest.modelType === MODEL_TYPE.BASE &&\n\t\t\t\t\t\tprops.editWidgetType !== \"customField\"\n\t\t\t\t\t) {\n\t\t\t\t\t\tflag =\n\t\t\t\t\t\t\t_value === \"\"\n\t\t\t\t\t\t\t\t? propertyList[name] !== undefined\n\t\t\t\t\t\t\t\t\t? true\n\t\t\t\t\t\t\t\t\t: false\n\t\t\t\t\t\t\t\t: true;\n\t\t\t\t\t}\n\t\t\t\t\tif (\n\t\t\t\t\t\trest.modelType === MODEL_TYPE.CUSTOM &&\n\t\t\t\t\t\tprops.editWidgetType === \"customField\"\n\t\t\t\t\t) {\n\t\t\t\t\t\t// set null value when value is negative for custom view & custom fields\n\t\t\t\t\t\t_value = _value || null;\n\t\t\t\t\t}\n\t\t\t\t\tif (flag) {\n\t\t\t\t\t\tonChange(\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t...(propertyList || {}),\n\t\t\t\t\t\t\t\t...getProperty(\n\t\t\t\t\t\t\t\t\tname,\n\t\t\t\t\t\t\t\t\t_value && (name === \"name\" || _value?.trim() === \"\")\n\t\t\t\t\t\t\t\t\t\t? _value.trim()\n\t\t\t\t\t\t\t\t\t\t: _value,\n\t\t\t\t\t\t\t\t\tparentField,\n\t\t\t\t\t\t\t\t\tpropertyList[parentField],\n\t\t\t\t\t\t\t\t\t!(modelType === rest.modelType) ||\n\t\t\t\t\t\t\t\t\t\teditWidgetType === \"customField\"\n\t\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\tname\n\t\t\t\t\t\t);\n\t\t\t\t\t}\n\t\t\t\t}}\n\t\t\t/>\n\t\t\t{translationView && isValueGenerated(value) && (\n\t\t\t\t<TranslationGrid\n\t\t\t\t\tInputProps={{\n\t\t\t\t\t\tclasses: {\n\t\t\t\t\t\t\troot: classes && classes.outlinedRoot,\n\t\t\t\t\t\t\tnotchedOutline: classes && classes.notchedOutline,\n\t\t\t\t\t\t\tfocused: classes && classes.focused,\n\t\t\t\t\t\t\tdisabled: classes && classes.disableInput,\n\t\t\t\t\t\t\tinput: classes && classes.translationInput,\n\t\t\t\t\t\t},\n\t\t\t\t\t}}\n\t\t\t\t\tInputLabelProps={{\n\t\t\t\t\t\tclassName: disabled ? classes.disabled : classes.label,\n\t\t\t\t\t}}\n\t\t\t\t\tclassName={classes && classes.translationInputView}\n\t\t\t\t\tkeyValue={value}\n\t\t\t\t/>\n\t\t\t)}\n\t\t\t{confirm && (\n\t\t\t\t<DialogConfirmation\n\t\t\t\t\topen={confirm}\n\t\t\t\t\tmessage=\"Are you sure, do you want to delete translations?\"\n\t\t\t\t\tonClose={onClose}\n\t\t\t\t\tonOk={handleTranslationRemove}\n\t\t\t\t/>\n\t\t\t)}\n\t\t</React.Fragment>\n\t);\n}\n\nfunction BooleanField(_props) {\n\tconst [openAlert, setAlertOpen] = useState(false);\n\tconst { index } = _props;\n\tlet { name, title, parentField, defaultValue, uncheckDialog, ...rest } =\n\t\t_props.field;\n\tconst props = React.useContext(PropertiesContext);\n\tconst {\n\t\tpropertyList,\n\t\tsetPropertyList,\n\t\tonChange,\n\t\tmodelType,\n\t\teditWidgetType,\n\t\tmetaFieldStore,\n\t} = props;\n\tlet _value = getPropertyValue(\n\t\tpropertyList,\n\t\tname,\n\t\tparentField,\n\t\tdefaultValue,\n\t\t!(modelType !== rest.modelType) || editWidgetType === \"customField\"\n\t);\n\tlet fieldValue = Boolean(_value ? !(_value === \"false\") : _value);\n\tconst classes = useStyles();\n\tif (rest.getValue) {\n\t\tfieldValue = rest.getValue(propertyList);\n\t}\n\tlet disabled = false;\n\tif (rest.isDisabled) {\n\t\tdisabled = rest.isDisabled({\n\t\t\tproperties: propertyList,\n\t\t\tmetaFieldStore,\n\t\t\teditWidgetType,\n\t\t\tmodelType,\n\t\t});\n\t}\n\ttitle = translate(camleCaseString(title || name));\n\n\tconst handleOnChange = () => {\n\t\tif (uncheckDialog) {\n\t\t\tsetAlertOpen(false);\n\t\t}\n\t\tsetPropertyList({\n\t\t\t...propertyList,\n\t\t\t...(rest.change ? rest.change(!fieldValue, propertyList) : {}),\n\t\t\t...getProperty(\n\t\t\t\tname,\n\t\t\t\t!fieldValue,\n\t\t\t\tparentField,\n\t\t\t\tpropertyList[parentField],\n\t\t\t\t!(modelType !== rest.modelType) || editWidgetType === \"customField\"\n\t\t\t),\n\t\t});\n\t\tonChange(\n\t\t\t{\n\t\t\t\t...propertyList,\n\t\t\t\t...(rest.change ? rest.change(!fieldValue, propertyList) : {}),\n\t\t\t\t...getProperty(\n\t\t\t\t\tname,\n\t\t\t\t\t!fieldValue,\n\t\t\t\t\tparentField,\n\t\t\t\t\tpropertyList[parentField],\n\t\t\t\t\t!(modelType !== rest.modelType) || editWidgetType === \"customField\"\n\t\t\t\t),\n\t\t\t},\n\t\t\tname\n\t\t);\n\t};\n\treturn (\n\t\t<React.Fragment>\n\t\t\t<FormControlLabel\n\t\t\t\tstyle={{ marginTop: 15 }}\n\t\t\t\tkey={index}\n\t\t\t\tclasses={{\n\t\t\t\t\tlabel: classes && classes.booleanInputLabel,\n\t\t\t\t\tdisabled: classes.disabled,\n\t\t\t\t}}\n\t\t\t\tcontrol={\n\t\t\t\t\t<Switch\n\t\t\t\t\t\tclasses={{\n\t\t\t\t\t\t\tswitchBase: classes && classes.switchBase,\n\t\t\t\t\t\t\ttrack: classes && classes.track,\n\t\t\t\t\t\t\tchecked: classes && classes.checked,\n\t\t\t\t\t\t}}\n\t\t\t\t\t\tchecked={fieldValue}\n\t\t\t\t\t\tdisabled={disabled}\n\t\t\t\t\t\tonChange={() => {\n\t\t\t\t\t\t\tif (\n\t\t\t\t\t\t\t\tuncheckDialog &&\n\t\t\t\t\t\t\t\tfieldValue &&\n\t\t\t\t\t\t\t\tpropertyList &&\n\t\t\t\t\t\t\t\tpropertyList.selectionText\n\t\t\t\t\t\t\t) {\n\t\t\t\t\t\t\t\tsetAlertOpen(true);\n\t\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\thandleOnChange();\n\t\t\t\t\t\t}}\n\t\t\t\t\t\tvalue={propertyList[name]}\n\t\t\t\t\t/>\n\t\t\t\t}\n\t\t\t\tlabel={translate(camleCaseString(title || name))}\n\t\t\t/>\n\t\t\t{openAlert && (\n\t\t\t\t<DialogConfirmation\n\t\t\t\t\topen={openAlert}\n\t\t\t\t\tmessage=\"Are you sure?\"\n\t\t\t\t\tonClose={() => setAlertOpen(false)}\n\t\t\t\t\tonOk={handleOnChange}\n\t\t\t\t\ttitle=\"Confirm\"\n\t\t\t\t/>\n\t\t\t)}\n\t\t</React.Fragment>\n\t);\n}\n\nfunction StaticSelection(_props) {\n\tconst { index } = _props;\n\tlet {\n\t\tname,\n\t\trequired,\n\t\tdata,\n\t\thelper,\n\t\ttitle,\n\t\tcolor,\n\t\tdisableClearable = false,\n\t\tparentField,\n\t\tparentPanel,\n\t\tgetOptionLabel,\n\t\t...rest\n\t} = _props.field;\n\tconst props = React.useContext(PropertiesContext);\n\tconst {\n\t\tpropertyList,\n\t\tsetPropertyList,\n\t\ttype,\n\t\tonChange,\n\t\tmodelType,\n\t\tmetaFieldStore,\n\t\teditWidgetType,\n\t} = props;\n\tconst classes = useStyles();\n\n\tif (typeof data === \"object\" && !Array.isArray(data)) {\n\t\tdata = data[(typeReplacer[type] || type).toLowerCase()] || [];\n\t}\n\ttitle = translate(camleCaseString(title || name));\n\n\tconst ColorTag = ({ color }) => (\n\t\t<div style={{ width: 15, height: 15, backgroundColor: color }}></div>\n\t);\n\tlet value = propertyList[name] || \"\";\n\tif (\n\t\t(modelType === rest.modelType || props.editWidgetType === \"customField\") &&\n\t\tparentField\n\t) {\n\t\tconst field = propertyList[parentField]\n\t\t\t? JSON.parse(propertyList[parentField])\n\t\t\t: {};\n\t\tvalue = field[name] || \"\";\n\t}\n\tlet disabled = false;\n\tif (rest.isDisabled) {\n\t\tdisabled = rest.isDisabled({\n\t\t\tproperties: propertyList,\n\t\t\tmetaFieldStore,\n\t\t\teditWidgetType,\n\t\t\tmodelType,\n\t\t});\n\t}\n\treturn (\n\t\t<AutoComplete\n\t\t\toptions={data}\n\t\t\tclasses={{\n\t\t\t\troot: classes.selection,\n\t\t\t\tinputFocused: disabled ? classes.disabled : classes.autoCompleteInput,\n\t\t\t\tclearIndicator: classes.autoCompleteInput,\n\t\t\t\tpopupIndicator: disabled ? classes.disabled : classes.autoCompleteInput,\n\t\t\t\toption: classes.autoCompleteOption,\n\t\t\t\tgroupLabel: classes.autoCompleteOption,\n\t\t\t\tpopper: classes.autoCompleteOption,\n\t\t\t\tnoOptions: classes.autoCompleteOption,\n\t\t\t}}\n\t\t\tdisableClearable={disableClearable}\n\t\t\tsize=\"small\"\n\t\t\tclassName={classes.autoComplete}\n\t\t\tautoHighlight\n\t\t\tdisabled={disabled}\n\t\t\tonChange={(e, _value) => {\n\t\t\t\tconst value = {\n\t\t\t\t\t...propertyList,\n\t\t\t\t\t...getProperty(\n\t\t\t\t\t\tname,\n\t\t\t\t\t\t_value,\n\t\t\t\t\t\tparentField,\n\t\t\t\t\t\tpropertyList[parentField],\n\t\t\t\t\t\tmodelType === rest.modelType ||\n\t\t\t\t\t\t\tprops.editWidgetType === \"customField\"\n\t\t\t\t\t),\n\t\t\t\t};\n\t\t\t\tif (name === \"colSpan\") {\n\t\t\t\t\tvalue.colSpan = _value;\n\t\t\t\t}\n\t\t\t\tsetPropertyList(value);\n\t\t\t\tonChange(value, name);\n\t\t\t}}\n\t\t\tgetOptionLabel={(option) =>\n\t\t\t\tgetOptionLabel\n\t\t\t\t\t? getOptionLabel(option)\n\t\t\t\t\t: typeof option === \"object\"\n\t\t\t\t\t? option.text\n\t\t\t\t\t: option\n\t\t\t}\n\t\t\trenderOption={(option) =>\n\t\t\t\ttypeof option === \"object\" ? (\n\t\t\t\t\t<div key={index} value={option.value}>\n\t\t\t\t\t\t<i className={`fa ${option}`} style={{ marginRight: 4 }} />\n\t\t\t\t\t\t{translate(option.text)}\n\t\t\t\t\t</div>\n\t\t\t\t) : (\n\t\t\t\t\t<div key={index} value={option}>\n\t\t\t\t\t\t{color && <ColorTag color={option} />}\n\t\t\t\t\t\t<i className={`fa ${option}`} style={{ marginRight: 4 }} />\n\t\t\t\t\t\t<span>{translate(option)}</span>\n\t\t\t\t\t</div>\n\t\t\t\t)\n\t\t\t}\n\t\t\tvalue={value}\n\t\t\trenderInput={(params) => (\n\t\t\t\t<TextField\n\t\t\t\t\t{...params}\n\t\t\t\t\tlabel={translate(camleCaseString(title || name))}\n\t\t\t\t\tvariant=\"outlined\"\n\t\t\t\t\tclasses={{\n\t\t\t\t\t\troot: classes.selection,\n\t\t\t\t\t}}\n\t\t\t\t\tautoComplete=\"off\"\n\t\t\t\t\tinputProps={{\n\t\t\t\t\t\t...params.inputProps,\n\t\t\t\t\t\tautoComplete: \"new-password\", // disable autocomplete and autofill\n\t\t\t\t\t}}\n\t\t\t\t/>\n\t\t\t)}\n\t\t/>\n\t);\n}\n\nfunction checkDepend(field, propertyList) {\n\tif (field.depends) {\n\t\tconst value = propertyList[field.depends];\n\t\tif (field.dependValue !== value) {\n\t\t\treturn false;\n\t\t}\n\t\treturn true;\n\t}\n\treturn;\n}\n\nfunction checkModel(field, modelType, editWidgetType, propertyList) {\n\tif (field.dependModelType && field.dependModelType !== modelType) {\n\t\tif (editWidgetType !== \"customField\") {\n\t\t\treturn false;\n\t\t}\n\t}\n\tif (editWidgetType === \"customField\" && field.showInCustomField === false) {\n\t\treturn false;\n\t}\n\tif (field.shouldRender && !field.shouldRender(propertyList)) {\n\t\treturn false;\n\t}\n\treturn true;\n}\n\nfunction RenderPropertyField() {\n\tconst props = React.useContext(PropertiesContext);\n\tconst {\n\t\telements,\n\t\tid,\n\t\tpropertyList,\n\t\tenableAppBuilder,\n\t\tmodelType,\n\t\teditWidgetType,\n\t\terrors,\n\t\tentityType,\n\t\tactualType,\n\t\tparentPanel,\n\t\tonTranslationRemove,\n\t} = props;\n\treturn (\n\t\t<>\n\t\t\t{elements.map((field, index) => {\n\t\t\t\tconst depend = checkDepend(field, propertyList);\n\t\t\t\tif (depend === false) {\n\t\t\t\t\treturn null;\n\t\t\t\t}\n\t\t\t\tif (!checkModel(field, modelType, editWidgetType, propertyList)) {\n\t\t\t\t\treturn null;\n\t\t\t\t}\n\t\t\t\tif (field.name === \"appBuilder\" && !enableAppBuilder) {\n\t\t\t\t\treturn null;\n\t\t\t\t}\n\t\t\t\tif (\n\t\t\t\t\t[actualType, entityType].includes(ENTITY_TYPE.META) &&\n\t\t\t\t\tfield.name === \"packageName\"\n\t\t\t\t) {\n\t\t\t\t\treturn null;\n\t\t\t\t}\n\t\t\t\tconst key = `${index}_${id}`;\n\t\t\t\tswitch (field.type) {\n\t\t\t\t\tcase \"string\":\n\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t<StringInput\n\t\t\t\t\t\t\t\tfield={field}\n\t\t\t\t\t\t\t\tkey={key}\n\t\t\t\t\t\t\t\tindex={key}\n\t\t\t\t\t\t\t\tmultiline={false}\n\t\t\t\t\t\t\t\terror={errors[field.name]}\n\t\t\t\t\t\t\t\tonTranslationRemove={onTranslationRemove}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t);\n\t\t\t\t\tcase \"integer\":\n\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t<StringInput\n\t\t\t\t\t\t\t\tfield={field}\n\t\t\t\t\t\t\t\tkey={key}\n\t\t\t\t\t\t\t\tindex={key}\n\t\t\t\t\t\t\t\tmultiline={false}\n\t\t\t\t\t\t\t\terror={errors[field.name]}\n\t\t\t\t\t\t\t\tparentPanel={parentPanel}\n\t\t\t\t\t\t\t\tclearable={true}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t);\n\t\t\t\t\tcase \"boolean\":\n\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t<BooleanField\n\t\t\t\t\t\t\t\tfield={field}\n\t\t\t\t\t\t\t\tkey={key}\n\t\t\t\t\t\t\t\tindex={key}\n\t\t\t\t\t\t\t\terror={errors[field.name]}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t);\n\t\t\t\t\tcase \"select\":\n\t\t\t\t\tcase \"objectSelection\":\n\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t<SelectComponent\n\t\t\t\t\t\t\t\tfield={field}\n\t\t\t\t\t\t\t\tkey={key}\n\t\t\t\t\t\t\t\tindex={key}\n\t\t\t\t\t\t\t\tprops={props}\n\t\t\t\t\t\t\t\terror={errors[field.name]}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t);\n\t\t\t\t\tcase \"staticSelect\":\n\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t<StaticSelection\n\t\t\t\t\t\t\t\tfield={field}\n\t\t\t\t\t\t\t\tkey={key}\n\t\t\t\t\t\t\t\tindex={key}\n\t\t\t\t\t\t\t\terror={errors[field.name]}\n\t\t\t\t\t\t\t\tparentPanel={parentPanel}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t);\n\t\t\t\t\tcase \"text\":\n\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t<StringInput\n\t\t\t\t\t\t\t\tfield={field}\n\t\t\t\t\t\t\t\tkey={key}\n\t\t\t\t\t\t\t\tindex={key}\n\t\t\t\t\t\t\t\tmultiline={true}\n\t\t\t\t\t\t\t\terror={errors[field.name]}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t);\n\t\t\t\t\tdefault:\n\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t<StringInput\n\t\t\t\t\t\t\t\tfield={field}\n\t\t\t\t\t\t\t\tkey={key}\n\t\t\t\t\t\t\t\tindex={key}\n\t\t\t\t\t\t\t\terror={errors[field.name]}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t})}\n\t\t</>\n\t);\n}\n\nfunction PropertiesProvider({ children, ...value }) {\n\treturn (\n\t\t<PropertiesContext.Provider value={value}>\n\t\t\t{children}\n\t\t</PropertiesContext.Provider>\n\t);\n}\n\nexport default function Properties(props) {\n\tconst { state, onWidgetChange, onTranslationRemove } = useStore();\n\tconst {\n\t\twidgets,\n\t\teditWidget,\n\t\teditWidgetType,\n\t\tcustomFieldWidgets,\n\t\tmodelType,\n\t\tenableAppBuilder,\n\t\tmetaFieldStore = [],\n\t\terrorList = {},\n\t\tentityType,\n\t\tactualType,\n\t} = state;\n\tlet widget = null;\n\tif (editWidget) {\n\t\tif (editWidgetType === \"customField\" && customFieldWidgets) {\n\t\t\twidget = customFieldWidgets[editWidget];\n\t\t} else if (editWidgetType !== \"customField\" && widgets) {\n\t\t\twidget = widgets[editWidget];\n\t\t}\n\t}\n\tconst { serverType, isSelectionField } = widget || {};\n\tlet { type } = widget || {};\n\tlet selectedType =\n\t\tserverType === \"field\" ? type || \"string\" : serverType || type;\n\tselectedType = selectedType && selectedType.toLowerCase().replace(/_/g, \"-\");\n\tif (selectedType === \"datetime\") {\n\t\tconst field = metaFieldStore?.find((f) => f.name === widget.name);\n\t\tif (field && `${field.tz}` === \"true\") {\n\t\t\tselectedType = \"zoneddatetime\";\n\t\t}\n\t}\n\tconst [propertyList, setPropertyList] = useState({});\n\tlet property = options.find((option) => option.type === selectedType);\n\tif (selectedType === \"form\") {\n\t\tif (state.modelType === MODEL_TYPE.CUSTOM) {\n\t\t\tproperty = options.find((option) => option.type === \"modelForm\");\n\t\t}\n\t}\n\tif (isSelectionField) {\n\t\tselectedType = [\"string\", \"integer\"].includes(widget && widget.type)\n\t\t\t? widget.type\n\t\t\t: selectedType;\n\t\tif (property && property.value) {\n\t\t\tconst typeFieldIndex = property.value.overview.findIndex(\n\t\t\t\t(item) => item.name === \"type\"\n\t\t\t);\n\t\t\tproperty.value.overview.splice(typeFieldIndex, 1, SelectableType);\n\t\t\tconst { fieldOptions, widgetAttributes } =\n\t\t\t\t(property && property.value) || {};\n\t\t\tproperty = {\n\t\t\t\t...(property || {}),\n\t\t\t\tvalue: {\n\t\t\t\t\t...(property.value || {}),\n\t\t\t\t\tfieldOptions: (fieldOptions || []).filter(\n\t\t\t\t\t\t(f) => ![\"minSize\", \"maxSize\", \"regex\"].includes(f.name)\n\t\t\t\t\t),\n\t\t\t\t\twidgetAttributes: (widgetAttributes || []).filter(\n\t\t\t\t\t\t(f) => ![\"multiline\"].includes(f.name)\n\t\t\t\t\t),\n\t\t\t\t},\n\t\t\t};\n\t\t}\n\t}\n\tconst classes = useStyles();\n\tconst inputLabel = React.useRef(null);\n\tconst [labelWidth, setLabelWidth] = React.useState(0);\n\tReact.useEffect(() => {\n\t\tsetPropertyList({\n\t\t\t...(widget || {}),\n\t\t\ttype: selectedType,\n\t\t});\n\t\tsetLabelWidth(\n\t\t\tinputLabel && inputLabel.current && inputLabel.current.offsetWidth\n\t\t);\n\t}, [widget, selectedType]);\n\n\tasync function onChange(props, changedPropertyName) {\n\t\tconst newProperties = { ...props };\n\t\tif (changedPropertyName === JsonRelationalField.name) {\n\t\t\t// when isJsonRelationalField changes\n\t\t\tnewProperties[TargetJsonModel.name] = null;\n\t\t\tnewProperties[TargetModel.name] = null;\n\t\t\tnewProperties[GridView.name] = null;\n\t\t\tnewProperties[FormView.name] = null;\n\t\t}\n\t\tif (\n\t\t\tchangedPropertyName !== JsonRelationalField.name &&\n\t\t\tchangedPropertyName !== \"type\"\n\t\t) {\n\t\t\tnewProperties.type = widget.type;\n\t\t}\n\t\t/* selectionText implementation starts here */\n\t\tif (\n\t\t\tchangedPropertyName === \"updateSelection\" &&\n\t\t\t!newProperties.updateSelection\n\t\t) {\n\t\t\tnewProperties.selection = null;\n\t\t}\n\t\tif (!newProperties.updateSelection) {\n\t\t\tnewProperties.selectionText = \"\";\n\t\t} else {\n\t\t\tconst obj = { name: newProperties.selection };\n\t\t\tconst text = await getSelectionText(obj);\n\t\t\tnewProperties.selectionText = newProperties.selectionText || text;\n\t\t}\n\t\tif (\n\t\t\tnewProperties.selection &&\n\t\t\tnewProperties.updateSelection &&\n\t\t\t!changedPropertyName\n\t\t) {\n\t\t\tconst obj = { name: newProperties.selection };\n\t\t\tconst text = await getSelectionText(obj);\n\t\t\tnewProperties.selectionText = newProperties.selectionText || text;\n\t\t}\n\t\tif (\n\t\t\tnewProperties.selection &&\n\t\t\ttypeof newProperties.selection === \"object\"\n\t\t) {\n\t\t\tnewProperties.selection = newProperties.selection.name;\n\t\t}\n\t\t/* selectionText implementation ends here */\n\t\tonWidgetChange({ id: editWidget, props: { ...newProperties } });\n\t}\n\n\ttype = selectedType;\n\tlet errors = {};\n\tif (editWidget && errorList) {\n\t\terrors = errorList[editWidget] || {};\n\t}\n\tconst parentPanel = Object.values(widgets || {}).find(\n\t\t(w) => w.items && w.items.indexOf(editWidget) !== -1\n\t);\n\tif (widget?.type === \"panel-tabs\" && editWidgetType === \"customField\") {\n\t\treturn null;\n\t}\n\tif (\n\t\tproperty?.dependModelType &&\n\t\t`${widget?.tab}` === \"true\" &&\n\t\tproperty?.dependModelType !== modelType\n\t) {\n\t\treturn null;\n\t}\n\treturn (\n\t\t<Grid style={{ padding: 20 }}>\n\t\t\t{type &&\n\t\t\t\tproperty &&\n\t\t\t\t!(\n\t\t\t\t\tstate.modelType === MODEL_TYPE.CUSTOM && property.type === TYPE.tabs\n\t\t\t\t) &&\n\t\t\t\tObject.keys(property.value).map((panel, i) => (\n\t\t\t\t\t<Grid key={i}>\n\t\t\t\t\t\t<Typography\n\t\t\t\t\t\t\tvariant=\"body1\"\n\t\t\t\t\t\t\tclassName={classNames(\n\t\t\t\t\t\t\t\tclasses.panelTitle,\n\t\t\t\t\t\t\t\ti !== 0 && classes.panelMargin\n\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{hasPropertyToShow(property.value[panel], modelType) &&\n\t\t\t\t\t\t\t\ttranslate(capitalizeFirst(panel))}\n\t\t\t\t\t\t</Typography>\n\t\t\t\t\t\t<Grid\n\t\t\t\t\t\t\tstyle={{ display: \"flex\", flexDirection: \"column\", width: \"90%\" }}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<PropertiesProvider\n\t\t\t\t\t\t\t\tkey={editWidget}\n\t\t\t\t\t\t\t\telements={property.value[panel]}\n\t\t\t\t\t\t\t\tpropertyList={propertyList}\n\t\t\t\t\t\t\t\tsetPropertyList={setPropertyList}\n\t\t\t\t\t\t\t\tlabelWidth={labelWidth}\n\t\t\t\t\t\t\t\tinputLabel={inputLabel}\n\t\t\t\t\t\t\t\ttype={type}\n\t\t\t\t\t\t\t\tonWidgetChange={onWidgetChange}\n\t\t\t\t\t\t\t\tid={editWidget}\n\t\t\t\t\t\t\t\tonChange={onChange}\n\t\t\t\t\t\t\t\tmodelType={modelType}\n\t\t\t\t\t\t\t\tenableAppBuilder={enableAppBuilder}\n\t\t\t\t\t\t\t\teditWidgetType={editWidgetType}\n\t\t\t\t\t\t\t\tmetaFieldStore={metaFieldStore}\n\t\t\t\t\t\t\t\terrors={errors}\n\t\t\t\t\t\t\t\tentityType={entityType}\n\t\t\t\t\t\t\t\tactualType={actualType}\n\t\t\t\t\t\t\t\tparentPanel={parentPanel}\n\t\t\t\t\t\t\t\tonTranslationRemove={onTranslationRemove}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<RenderPropertyField />\n\t\t\t\t\t\t\t</PropertiesProvider>\n\t\t\t\t\t\t</Grid>\n\t\t\t\t\t</Grid>\n\t\t\t\t))}\n\t\t</Grid>\n\t);\n}\n","import React from \"react\";\nimport Properties from \"../../Properties\";\n\nexport default React.memo(function PropertiesView() {\n\treturn (\n\t\t<div style={{ color: \"#fff\" }}>\n\t\t\t<Properties />\n\t\t</div>\n\t);\n});\n","import React from \"react\";\nimport { Tabs, Tab, Paper, Grid } from \"@material-ui/core\";\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport { ListAlt, PlaylistAdd } from \"@material-ui/icons\";\nimport classNames from \"classnames\";\n\nimport AddPanelView from \"./Tabs/AddPanelView\";\nimport PropertiesView from \"./Tabs/PropertiesView\";\nimport { useStore } from \"../store/context\";\nimport { translate } from \"../utils\";\n\nconst useStyles = makeStyles({\n\troot: {\n\t\tboxShadow: \"1px 2px 8px 0px rgb(1 1 1 / 75%) !important\",\n\t\tbackgroundColor: \"#2f4050\",\n\t\t\".modern-dark &\": {\n\t\t\tbackgroundColor: \"#1b1b1b\",\n\t\t},\n\t\theight: '100%',\n\t\twidth: '100%',\n    borderTop: '1px solid #2f4050',\n\t},\n\ttab: {\n\t\tminHeight: \"fit-content\",\n\t\tminWidth: \"fit-content\",\n\t\ttextTransform: \"none\",\n\t\tcolor: \"#fff\",\n\t\tfontWeight: \"600\",\n\t\tbackgroundColor: \"#293846\",\n\t\t\".modern-dark &\": {\n\t\t\tcolor: \"#fff\",\n\t\t\tbackgroundColor: \"#1b1b1b\",\n\t\t},\n\t\t\"&>span\": {\n\t\t\tflexDirection: \"row\",\n\t\t\t\"& > svg\": {\n\t\t\t\tmarginBottom: \"0px !important\",\n\t\t\t\tmarginRight: 5,\n\t\t\t},\n\t\t},\n\t},\n\ttabs: {\n\t\tbackgroundColor: \"#293846\",\n\t\tminHeight: \"42px !important\",\n\t\tborderTopRightRadius: 5,\n\t\t\".modern-dark &\": {\n\t\t\tbackgroundColor: \"#1b1b1b\",\n\t\t},\n\t},\n\tcontainer: {\n\t\tbackgroundColor: \"#2f4050\",\n\t\theight: `calc(100% - 42px)`,\n\t\toverflow: \"auto\",\n\t\tscrollbarWidth: \"thin\",\n\t\tborderBottomRightRadius: 5,\n\t\t\".modern-dark &\": {\n\t\t\tbackgroundColor: \"#1b1b1b\",\n\t\t},\n\t},\n\tactiveTab: {\n\t\tbackgroundColor: \"#2f4050\",\n\t\tborderBottom: \"2px solid #fff\",\n\t\t\".modern-dark &\": {\n\t\t\tbackgroundColor: \"#323232\",\n\t\t},\n\t},\n});\n\nconst tabs = [\n\t{ label: \"Properties\", icon: <ListAlt />, view: <PropertiesView /> },\n\t{ label: \"Attributes\", icon: <PlaylistAdd />, view: <AddPanelView /> },\n];\n\nconst TabPanel = React.memo(function TabPanel(props) {\n\tconst { children } = props;\n\tconst classes = useStyles();\n\n\treturn (\n\t\t<Grid className={classes.container}>\n\t\t\t<Grid style={{ color: \"#000\", height: \"100%\" }}>{children}</Grid>\n\t\t</Grid>\n\t);\n});\n\nexport default React.memo(function SidePanel() {\n\tconst classes = useStyles();\n\tconst { state, update } = useStore();\n\tconst { tabIndex, editWidget } = state;\n\n\tconst onTabChange = (event, newValue) => {\n\t\tif (newValue === 0 && !editWidget) {\n\t\t\treturn;\n\t\t}\n\t\tupdate((draft) => {\n\t\t\tdraft.tabIndex = newValue;\n\t\t});\n\t};\n\n\treturn (\n\t\t<Paper square className={classes.root}>\n\t\t\t<Tabs\n\t\t\t\tvalue={tabIndex}\n\t\t\t\tonChange={onTabChange}\n\t\t\t\tvariant=\"fullWidth\"\n\t\t\t\tclassName={classes.tabs}\n\t\t\t\tTabIndicatorProps={{\n\t\t\t\t\tstyle: {\n\t\t\t\t\t\tdisplay: \"none\",\n\t\t\t\t\t},\n\t\t\t\t}}\n\t\t\t>\n\t\t\t\t{tabs.map((tab, i) => (\n\t\t\t\t\t<Tab\n\t\t\t\t\t\tkey={i}\n\t\t\t\t\t\tclassName={classNames(classes.tab, {\n\t\t\t\t\t\t\t[classes.activeTab]: tabIndex === i,\n\t\t\t\t\t\t})}\n\t\t\t\t\t\ticon={tab.icon}\n\t\t\t\t\t\tlabel={translate(tab.label)}\n\t\t\t\t\t\tstyle={{\n\t\t\t\t\t\t\tcolor: i === 1 && !editWidget ? \"#a6a6a6\" : \"#fff\",\n\t\t\t\t\t\t}}\n\t\t\t\t\t/>\n\t\t\t\t))}\n\t\t\t</Tabs>\n\t\t\t{tabs.map(\n\t\t\t\t(tab, i) => tabIndex === i && <TabPanel key={i}>{tab.view}</TabPanel>\n\t\t\t)}\n\t\t</Paper>\n\t);\n});\n","export function getScrollParent(element, includeHidden = false) {\n\tvar style = getComputedStyle(element);\n\tvar excludeStaticParent = style.position === \"absolute\";\n\tvar overflowRegex = includeHidden ? /(auto|scroll|hidden)/ : /(auto|scroll)/;\n\n\tif (style.position === \"fixed\") return document.body;\n\tfor (var parent = element; (parent = parent.parentElement); ) {\n\t\tstyle = getComputedStyle(parent);\n\t\tif (excludeStaticParent && style.position === \"static\") {\n\t\t\tcontinue;\n\t\t}\n\t\tif (overflowRegex.test(style.overflow + style.overflowY + style.overflowX))\n\t\t\treturn parent;\n\t}\n\n\treturn document.body;\n}\n\nexport function customScrollTo(element) {\n\tconst scrollableParent = getScrollParent(element);\n\tif (scrollableParent) {\n\t\twindow.requestAnimationFrame(() => {\n\t\t\tscrollableParent.scrollTo({\n\t\t\t\ttop: element.offsetTop + 14, //14 is top padding of div\n\t\t\t\tbehavior: \"smooth\",\n\t\t\t});\n\t\t});\n\t}\n}\n","import React from \"react\";\nimport CircularProgress from \"@material-ui/core/CircularProgress\";\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport classNames from \"classnames\";\n\nimport { Widget, Form } from \"../components\";\nimport { IDS, MODEL_TYPE } from \"../constants\";\nimport { useStore } from \"../store/context\";\nimport { customScrollTo } from \"./utils\";\n\nconst useStyles = makeStyles({\n\tuiContainer: {\n\t\tdisplay: \"flex\",\n\t\tflexDirection: \"column\",\n\t},\n\tcontainer: {\n\t\tdisplay: \"flex\",\n\t\tflexDirection: \"column\",\n\t\theight: \"fit-content\",\n\t\tposition: \"relative\",\n\t},\n\tloaderContainer: {\n\t\tdisplay: \"flex\",\n\t\tflexDirection: \"column\",\n\t\tjustifyContent: \"center\",\n\t\theight: \"100%\",\n\t\tposition: \"absolute\",\n\t\tzIndex: 1000,\n\t\tborder: \"0px\",\n\t\tbackgroundColor: \"rgba(0,0,0,0.05)\",\n\t\tbottom: 0,\n\t\ttop: 0,\n\t\tleft: 0,\n\t\tright: 0,\n\t\talignItems: \"center\",\n\t},\n\temptyFormInfo: {\n\t\tminHeight: \"24vh !important\",\n\t},\n});\n// Render Main Form UI View\nfunction FormViewUI({ design }) {\n\tconst store = useStore();\n\tconst classes = useStyles();\n\tconst customPanelRef = React.createRef();\n\tconst {\n\t\twidgets,\n\t\tcustomFieldWidgets,\n\t\tloader,\n\t\terrorList,\n\t\tmodelField,\n\t\tmodelType,\n\t} = store.state;\n\tconst formInfo = (store.state.widgets || [])[-1];\n\n\tReact.useEffect(() => {\n\t\tconst grid = customPanelRef.current;\n\t\tif (grid) {\n\t\t\tcustomScrollTo(grid);\n\t\t\tgrid && grid.focus();\n\t\t}\n\t}, [customPanelRef]);\n\n\treturn (\n\t\t<div className={classNames(classes.uiContainer)}>\n\t\t\t<div\n\t\t\t\tid=\"form-view\"\n\t\t\t\tclassName={classNames(classes.container, {\n\t\t\t\t\t[classes.emptyFormInfo]: !formInfo && !customFieldWidgets,\n\t\t\t\t})}\n\t\t\t>\n\t\t\t\t{loader && (\n\t\t\t\t\t<div className={classNames(classes.loaderContainer)}>\n\t\t\t\t\t\t<CircularProgress />\n\t\t\t\t\t</div>\n\t\t\t\t)}\n\t\t\t\t{widgets && (\n\t\t\t\t\t<Widget\n\t\t\t\t\t\tindex={0}\n\t\t\t\t\t\tid={IDS.form}\n\t\t\t\t\t\tattrs={store.state.widgets[IDS.form]}\n\t\t\t\t\t\tonSelect={store.onSelect}\n\t\t\t\t\t\t{...{\n\t\t\t\t\t\t\titems: store.state.items,\n\t\t\t\t\t\t\tdragWidget: store.state.dragWidget,\n\t\t\t\t\t\t\thoverWidget: store.state.hoverWidget,\n\t\t\t\t\t\t\teditWidget: store.state.editWidget,\n\t\t\t\t\t\t\twidgets: store.state.widgets,\n\t\t\t\t\t\t\tonSelect: store.onSelect,\n\t\t\t\t\t\t\tonMove: store.onMove,\n\t\t\t\t\t\t\tonDrag: store.onDrag,\n\t\t\t\t\t\t\tonHover: store.onHover,\n\t\t\t\t\t\t\tonWidgetChange: store.onWidgetChange,\n\t\t\t\t\t\t\tsetHoverAttr: store.setHoverAttr,\n\t\t\t\t\t\t\taddTabPanel: store.addTabPanel,\n\t\t\t\t\t\t\tcanRemove: modelType === MODEL_TYPE.BASE ? false : true,\n\t\t\t\t\t\t\terrorList,\n\t\t\t\t\t\t}}\n\t\t\t\t\t\tdesign={design}\n\t\t\t\t\t\tcomponent={Form}\n\t\t\t\t\t/>\n\t\t\t\t)}\n\t\t\t\t{customFieldWidgets && (\n\t\t\t\t\t<div\n\t\t\t\t\t\tclassName=\"custom-field-pallett-view\"\n\t\t\t\t\t\tref={customPanelRef}\n\t\t\t\t\t\ttabIndex={1}\n\t\t\t\t\t>\n\t\t\t\t\t\t<div className=\"custom-field-view-header\">\n\t\t\t\t\t\t\t{modelField?.name || \"attrs\"}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<Widget\n\t\t\t\t\t\t\t_type=\"customField\"\n\t\t\t\t\t\t\tindex={0}\n\t\t\t\t\t\t\tid={IDS.customForm}\n\t\t\t\t\t\t\tattrs={store.state.customFieldWidgets[IDS.customForm]}\n\t\t\t\t\t\t\tonSelect={store.onSelect}\n\t\t\t\t\t\t\t{...{\n\t\t\t\t\t\t\t\titems: store.state.customFieldItems,\n\t\t\t\t\t\t\t\tdragWidget: store.state.dragWidget,\n\t\t\t\t\t\t\t\thoverWidget: store.state.hoverWidget,\n\t\t\t\t\t\t\t\teditWidget: store.state.editWidget,\n\t\t\t\t\t\t\t\twidgets: store.state.customFieldWidgets,\n\t\t\t\t\t\t\t\tonSelect: store.onSelect,\n\t\t\t\t\t\t\t\tonMove: store.onMove,\n\t\t\t\t\t\t\t\tonDrag: store.onDrag,\n\t\t\t\t\t\t\t\taddTabPanel: store.addTabPanel,\n\t\t\t\t\t\t\t\tonHover: store.onHover,\n\t\t\t\t\t\t\t\tonWidgetChange: store.onWidgetChange,\n\t\t\t\t\t\t\t\tsetHoverAttr: store.setHoverAttr,\n\t\t\t\t\t\t\t\terrorList,\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\tdesign={design}\n\t\t\t\t\t\t\tcomponent={Form}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</div>\n\t\t\t\t)}\n\t\t\t</div>\n\t\t</div>\n\t);\n}\n\nexport default FormViewUI;\n","import React from \"react\";\nimport classNames from \"classnames\";\nimport Editor from \"./../Editor\";\n\nexport default React.memo(function MainPanel() {\n\tconst [design] = React.useState(true);\n\treturn (\n\t\t<div\n\t\t\tclassName={classNames(\"form-layout-container\", {\n\t\t\t\t\"form-layout-design\": design,\n\t\t\t})}\n\t\t\tstyle={{\n\t\t\t\tdisplay: \"flex\",\n\t\t\t\twidth: \"100%\",\n\t\t\t\theight: \"100%\",\n\t\t\t\tjustifyContent: \"center\",\n\t\t\t\toverflow: \"auto\",\n\t\t\t\tposition: \"relative\",\n\t\t\t}}\n\t\t>\n\t\t\t<Editor design={design} />\n\t\t</div>\n\t);\n});\n","import React, { useState, useEffect } from \"react\";\nimport { TextField } from \"@material-ui/core\";\nimport AutoComplete from \"@material-ui/lab/Autocomplete\";\nimport _ from \"lodash\";\nimport { makeStyles } from \"@material-ui/core/styles\";\n\nimport AxelorService from \"./../services/axelor.rest\";\nimport { useDebounceEffect } from \"./../common.func\";\nimport SearchView from \"../components/SearchView\";\nimport { translate } from \"../utils\";\nconst useStyles = makeStyles({\n\tautoComplete: {\n\t\t\"& > div > label\": {\n\t\t\tcolor: \"#e7eaec !important\",\n\t\t\tfontSize: 12,\n\t\t},\n\t},\n\tautoCompleteRoot: {\n\t\twidth: 200,\n\t\tmarginLeft: 10,\n\t\tcolor: \"#e7eaec\",\n\t},\n\tinputView: {\n\t\tcolor: \"#fff\",\n\t\tfontSize: 13,\n\t\t\"& > *\": {\n\t\t\tcolor: \"#fff\",\n\t\t},\n\t},\n\tpopperView: {\n\t\t\"& ul, .MuiAutocomplete-noOptions\": {\n\t\t\tbackgroundColor: \"rgb(41, 56, 70) !important\",\n\t\t\t\".modern-dark &\": {\n\t\t\t\tbackgroundColor: \"#1b1b1b !important\",\n\t\t\t},\n\t\t},\n\t\t\"& li, .MuiAutocomplete-noOptions\": {\n\t\t\tcolor: \"#e7eaec !important\",\n\t\t\tbackgroundColor: \"rgb(41, 56, 70) !important\",\n\t\t\t\".modern-dark &\": {\n\t\t\t\tbackgroundColor: \"#1b1b1b !important\",\n\t\t\t},\n\t\t},\n\t\t\"& li:hover, .MuiAutocomplete-noOptions\": {\n\t\t\tcolor: \"#e7eaec !important\",\n\t\t\tbackgroundColor: \"#2f4050 !important\",\n\t\t\t\".modern-dark &\": {\n\t\t\t\tbackgroundColor: \"#323232 !important\",\n\t\t\t},\n\t\t},\n\t},\n\toption: {\n\t\tfontSize: 13,\n\t},\n});\n\nfunction Select({\n\tvalue,\n\tlabel,\n\tmodel,\n\tsearchFilter,\n\tonChange,\n\toptions,\n\tfilterData,\n\tlimit = 10,\n\tonSearch,\n\tmodelType,\n\t...props\n}) {\n\tconst classes = useStyles();\n\tconst [searchText, setSearchText] = useState(\"\");\n\tconst [loading, setLoading] = useState(false);\n\tconst [list, setList] = useState([...(options ? options : [])]);\n\tconst [searchMore, setSearchMore] = useState(false);\n\tconst [offset, setOffset] = useState(0);\n\tconst [total, setTotal] = useState(0);\n\n\tconst search = React.useCallback(\n\t\tasync (searchText = \"\") => {\n\t\t\tif (onSearch) {\n\t\t\t\tsetLoading(true);\n\t\t\t\tconst { models, total } = await onSearch({\n\t\t\t\t\tlimit,\n\t\t\t\t\tsearchText,\n\t\t\t\t\tsearchFilter,\n\t\t\t\t\tfilterData,\n\t\t\t\t\tmodelType,\n\t\t\t\t\toffset,\n\t\t\t\t});\n\t\t\t\t!searchMore &&\n\t\t\t\t\ttotal > limit &&\n\t\t\t\t\tmodels.push({\n\t\t\t\t\t\tname: translate(\"Show more...\"),\n\t\t\t\t\t\tid: \"studio_show_More_View\",\n\t\t\t\t\t});\n\t\t\t\tconst uniqueList = _.uniqBy(models, \"name\");\n\t\t\t\tsetList(uniqueList);\n\t\t\t\tsetLoading(false);\n\t\t\t\tsetTotal(total);\n\t\t\t} else {\n\t\t\t\tconst service = new AxelorService({ model });\n\t\t\t\tsetLoading(true);\n\t\t\t\tconst _data = searchFilter(searchText) || {};\n\t\t\t\tconst criteria = [];\n\t\t\t\tif (searchText) {\n\t\t\t\t\tcriteria.push({\n\t\t\t\t\t\tfieldName: \"name\",\n\t\t\t\t\t\toperator: \"like\",\n\t\t\t\t\t\tvalue: searchText,\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\tconst data = {\n\t\t\t\t\t...(_data._domain && { _domain: _data._domain }),\n\t\t\t\t\t...(_data._domainContext && { _domainContext: _data._domainContext }),\n\t\t\t\t\tcriteria: [...criteria, ...(_data.criteria || [])],\n\t\t\t\t\toperator: \"and\",\n\t\t\t\t};\n\t\t\t\tconst fields = _data.fields || [];\n\t\t\t\tservice\n\t\t\t\t\t.search({ fields, data, limit, offset: offset })\n\t\t\t\t\t.then((response = {}) => {\n\t\t\t\t\t\tconst { data = [], total } = response;\n\t\t\t\t\t\tsetLoading(false);\n\t\t\t\t\t\tconst list = filterData ? filterData([...data]) : [...data];\n\t\t\t\t\t\t!searchMore &&\n\t\t\t\t\t\t\ttotal > limit &&\n\t\t\t\t\t\t\tlist.push({\n\t\t\t\t\t\t\t\tname: translate(\"Show more...\"),\n\t\t\t\t\t\t\t\tid: \"studio_show_More_View\",\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\tsetTotal(total);\n\t\t\t\t\t\tconst uniqueList = _.uniqBy(list, \"name\");\n\t\t\t\t\t\tsetList(uniqueList);\n\t\t\t\t\t});\n\t\t\t}\n\t\t},\n\t\t[\n\t\t\tsearchFilter,\n\t\t\tmodel,\n\t\t\tfilterData,\n\t\t\tsearchMore,\n\t\t\tlimit,\n\t\t\tonSearch,\n\t\t\tmodelType,\n\t\t\toffset,\n\t\t]\n\t);\n\n\tconst handleNext = React.useCallback(() => {\n\t\tconst newOffset = offset + limit;\n\t\tif (newOffset <= total) {\n\t\t\tsetOffset(newOffset);\n\t\t}\n\t}, [limit, total, offset]);\n\n\tconst handlePrevious = React.useCallback(() => {\n\t\tsetOffset((offset) => {\n\t\t\tconst newOffset = offset - limit;\n\t\t\treturn newOffset > 0 ? newOffset : 0;\n\t\t});\n\t}, [limit]);\n\n\tconst debounceHandler = React.useCallback(() => {\n\t\t!options && search(searchText);\n\t}, [searchText, search, options]);\n\n\tconst handleChange = React.useCallback(\n\t\t(e, value) => {\n\t\t\tif (value?.id === \"studio_show_More_View\") {\n\t\t\t\tsetSearchMore(true);\n\t\t\t} else {\n\t\t\t\tonChange(value);\n\t\t\t}\n\t\t},\n\t\t[onChange]\n\t);\n\n\tconst handleTextChange = React.useCallback((value) => {\n\t\tsetSearchText(value);\n\t\tsetOffset(0);\n\t}, []);\n\n\tconst handleClose = React.useCallback(() => {\n\t\tsetSearchMore(false);\n\t\tsetOffset(0);\n\t}, []);\n\n\tuseDebounceEffect(debounceHandler, 500);\n\n\tuseEffect(() => {\n\t\t!options && search();\n\t}, [search, options, model]);\n\n\tuseEffect(() => {\n\t\tif (!value) {\n\t\t\tsetSearchText(\"\");\n\t\t}\n\t}, [value]);\n\treturn (\n\t\t<React.Fragment>\n\t\t\t<AutoComplete\n\t\t\t\tclearOnEscape\n\t\t\t\tautoComplete\n\t\t\t\tclasses={{\n\t\t\t\t\troot: classes.autoCompleteRoot,\n\t\t\t\t\tinputFocused: classes.input,\n\t\t\t\t\tclearIndicator: classes.input,\n\t\t\t\t\tpopupIndicator: classes.input,\n\t\t\t\t\tinput: classes.inputView,\n\t\t\t\t\tendAdornment: classes.inputView,\n\t\t\t\t\tpopper: classes.popperView,\n\t\t\t\t\toption: classes.option,\n\t\t\t\t\tnoOptions: classes.option,\n\t\t\t\t}}\n\t\t\t\tsize=\"small\"\n\t\t\t\tclassName={classes.autoComplete}\n\t\t\t\tonInputChange={(e, value) => setSearchText(value)}\n\t\t\t\trenderInput={(params) => {\n\t\t\t\t\tparams.inputProps.value = searchText;\n\t\t\t\t\treturn (\n\t\t\t\t\t\t<TextField {...params} placeholder={translate(label)} fullWidth />\n\t\t\t\t\t);\n\t\t\t\t}}\n\t\t\t\toptions={[...list]}\n\t\t\t\tloading={loading}\n\t\t\t\tgetOptionLabel={(option) =>\n\t\t\t\t\ttypeof option === \"string\"\n\t\t\t\t\t\t? option\n\t\t\t\t\t\t: props.getOptionLabel\n\t\t\t\t\t\t? props.getOptionLabel(option)\n\t\t\t\t\t\t: option.name\n\t\t\t\t}\n\t\t\t\tonChange={handleChange}\n\t\t\t\tfilterOptions={(options) => options}\n\t\t\t\tvalue={value || null}\n\t\t\t\tgetOptionSelected={(option, value) => option.name === value.name}\n\t\t\t\t{...props}\n\t\t\t/>\n\t\t\t<SearchView\n\t\t\t\tsearchText={searchText}\n\t\t\t\tlist={list}\n\t\t\t\tmodel={model}\n\t\t\t\ttotal={total}\n\t\t\t\toffset={offset}\n\t\t\t\topen={searchMore}\n\t\t\t\tonNext={handleNext}\n\t\t\t\tonPrevious={handlePrevious}\n\t\t\t\thandleClose={handleClose}\n\t\t\t\tsetSearchText={handleTextChange}\n\t\t\t\tonChange={onChange}\n\t\t\t\ttitle={translate(label)}\n\t\t\t\tgetOptionLabel={props.getOptionLabel}\n\t\t\t/>\n\t\t</React.Fragment>\n\t);\n}\n\nexport default React.memo(Select);\n","import { modelService, metaModelService } from \"./api\";\nimport { ENTITY_TYPE, MODEL_TYPE } from \"../constants\";\n\nexport async function modelSearch({\n\tsearchFilter,\n\tlimit,\n\tsearchText,\n\tmodelType,\n\toffset,\n}) {\n\tconst _data = searchFilter(searchText) || {};\n\tconst criteria = [];\n\tif (searchText) {\n\t\tcriteria.push({\n\t\t\tfieldName: \"name\",\n\t\t\toperator: \"like\",\n\t\t\tvalue: searchText,\n\t\t});\n\t}\n\tconst data = {\n\t\t...(_data._domain && { _domain: _data._domain }),\n\t\t...(_data._domainContext && { _domainContext: _data._domainContext }),\n\t\tcriteria: [...criteria, ...(_data.criteria || [])],\n\t\toperator: \"and\",\n\t};\n\tconst fields = _data.fields || [];\n\tconst service =\n\t\tmodelType === MODEL_TYPE.CUSTOM ? metaModelService : modelService;\n\tconst modelResult = await service.search({ fields, data, limit, offset });\n\tconst models = [];\n\tif (modelResult && modelResult.data && Array.isArray(modelResult.data)) {\n\t\tconst list = modelResult.data\n\t\t\t.map((record) => {\n\t\t\t\tconst modelIndex = models.findIndex(\n\t\t\t\t\t(m) => m.name === record.name && m.packageName === record.packageName\n\t\t\t\t);\n\t\t\t\tif (modelIndex === -1 || modelType === MODEL_TYPE.BASE) {\n\t\t\t\t\tif (modelType === MODEL_TYPE.BASE && modelIndex !== -1) {\n\t\t\t\t\t\tmodels.splice(modelIndex, 1);\n\t\t\t\t\t}\n\t\t\t\t\treturn { ...record, entityType: ENTITY_TYPE.META };\n\t\t\t\t} else {\n\t\t\t\t\tmodels.splice(modelIndex, 1, {\n\t\t\t\t\t\t...models[modelIndex],\n\t\t\t\t\t\tactualType: ENTITY_TYPE.META,\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\treturn undefined;\n\t\t\t})\n\t\t\t.filter((e) => e);\n\t\tmodels.push(...list);\n\t}\n\treturn { models, total: modelResult && modelResult.total };\n}\n","import React from \"react\";\n\nimport AxelorService from \"./../services/axelor.rest\";\nimport Utils, { generateCustomModelSchema, translate } from \"./../utils\";\nimport Select from \"./Select\";\nimport { relationalFields, MODEL_TYPE, PANEL_PROPS } from \"./../constants\";\nimport {\n\tfetchCustomFields,\n\tgetEnableAppBuilder,\n\tfetchViews,\n\tfetchAttrsList,\n\tgetTranslationList,\n\tmetaJsonFieldService,\n} from \"./api\";\nimport { modelSearch } from \"./customModelSearch\";\nimport { generateXpath } from \"./../store/xpathGenerator\";\nimport convert from \"xml-js\";\nimport _ from \"lodash\";\n\nconst metaViewService = new AxelorService({\n\tmodel: \"com.axelor.meta.db.MetaView\",\n});\n\nconst modelTypes = [\n\t{ name: translate(\"View\"), value: MODEL_TYPE.BASE },\n\t{ name: translate(\"Custom\"), value: MODEL_TYPE.CUSTOM },\n];\n\nfunction ViewSelection({\n\tmodel,\n\tupdate,\n\tmodelType,\n\tmodelField,\n\tstartLoader,\n\tentityType,\n\tmetaFieldStore,\n\tclearHistory,\n\treset,\n\t...props\n}) {\n\tconst modelName = `com.axelor.meta.db.${\n\t\tmodelType !== MODEL_TYPE.CUSTOM ? \"MetaModel\" : \"MetaJsonModel\"\n\t}`;\n\n\tconst fetchJSONFields = React.useCallback(\n\t\t(ids, record) => {\n\t\t\tconst criteria = [];\n\t\t\tif (ids.length) {\n\t\t\t\tcriteria.push({ fieldName: \"id\", operator: \"in\", value: ids });\n\t\t\t\tconst data = {\n\t\t\t\t\tcriteria,\n\t\t\t\t};\n\t\t\t\tmetaJsonFieldService\n\t\t\t\t\t.search({ data, sortBy: [\"sequence\"] })\n\t\t\t\t\t.then((res) => {\n\t\t\t\t\t\tif (res.data) {\n\t\t\t\t\t\t\tconst list = res.data || [];\n\t\t\t\t\t\t\tconst schema = generateCustomModelSchema(list, record);\n\t\t\t\t\t\t\tupdate((draft) => {\n\t\t\t\t\t\t\t\tdraft.widgets = {\n\t\t\t\t\t\t\t\t\t...schema.widgets,\n\t\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\t\tdraft.items = schema.items;\n\t\t\t\t\t\t\t\tdraft.loader = false;\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tupdate((draft) => {\n\t\t\t\t\t\t\t\tdraft.loader = false;\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t} else {\n\t\t\t\tconst schema = generateCustomModelSchema([], record);\n\t\t\t\tupdate((draft) => {\n\t\t\t\t\tdraft.widgets = {\n\t\t\t\t\t\t...schema.widgets,\n\t\t\t\t\t};\n\t\t\t\t\tdraft.items = schema.items;\n\t\t\t\t\tdraft.loader = false;\n\t\t\t\t\tdraft.model = record;\n\t\t\t\t\tdraft.customModel = record;\n\t\t\t\t\tdraft.editWidget = -1;\n\t\t\t\t\tdraft.editWidgetType = null;\n\t\t\t\t});\n\t\t\t}\n\t\t},\n\t\t[update]\n\t);\n\n\tconst handleModelSelect = React.useCallback(\n\t\tasync (model) => {\n\t\t\tconst metaModelService = new AxelorService({ model: modelName });\n\t\t\tif (!model) {\n\t\t\t\tif (modelType === MODEL_TYPE.CUSTOM) {\n\t\t\t\t\treset();\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tupdate((draft) => {\n\t\t\t\t\tclearHistory(draft);\n\t\t\t\t\tdraft.model = null;\n\t\t\t\t\tdraft.customModel = null;\n\t\t\t\t\tdraft.items = [];\n\t\t\t\t\tdraft.exView = null;\n\t\t\t\t\tdraft.view = null;\n\t\t\t\t\tdraft.widgets = null;\n\t\t\t\t\tdraft.initialItems = null;\n\t\t\t\t\tdraft.initialWidgets = null;\n\t\t\t\t\tdraft.customFieldWidgets = null;\n\t\t\t\t\tdraft.customFieldItems = null;\n\t\t\t\t\tdraft.customFields = [];\n\t\t\t\t\tdraft.modelField = null;\n\t\t\t\t\tdraft.extensionXML = null;\n\t\t\t\t\tdraft.extensionView = null;\n\t\t\t\t\tdraft.originalXML = null;\n\t\t\t\t\tdraft.selectedView = null;\n\t\t\t\t\tdraft.metaFields = [];\n\t\t\t\t\tdraft.metaFieldStore = [];\n\t\t\t\t\tdraft.extensionMoves = [];\n\t\t\t\t\tdraft.errorList = {};\n\t\t\t\t\tdraft.attrsList = [];\n\t\t\t\t\tdraft.translationList = [];\n\t\t\t\t\tdraft.initialTranslationList = [];\n\t\t\t\t\tdraft.removedTranslationList = [];\n\t\t\t\t});\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tlet data = {\n\t\t\t\tfields: [\"metaFields\", \"packageName\", \"name\", \"fullName\"],\n\t\t\t\trelated: {\n\t\t\t\t\tmetaFields: [\n\t\t\t\t\t\t\"typeName\",\n\t\t\t\t\t\t\"label\",\n\t\t\t\t\t\t\"mappedBy\",\n\t\t\t\t\t\t\"relationship\",\n\t\t\t\t\t\t\"name\",\n\t\t\t\t\t\t\"packageName\",\n\t\t\t\t\t],\n\t\t\t\t},\n\t\t\t};\n\t\t\tif (modelType === MODEL_TYPE.CUSTOM) {\n\t\t\t\tupdate((draft) => {\n\t\t\t\t\tdraft.loader = true;\n\t\t\t\t});\n\t\t\t\tdata = {\n\t\t\t\t\trelated: {\n\t\t\t\t\t\tmenuBuilder: [\"title\", \"parentMenu\"],\n\t\t\t\t\t},\n\t\t\t\t};\n\t\t\t}\n\t\t\tmetaModelService.fetch(model.id, data).then((res) => {\n\t\t\t\tif (res.data) {\n\t\t\t\t\tconst record = res.data[0];\n\t\t\t\t\tconst { fields = [], ...rest } = record;\n\t\t\t\t\tupdate((draft) => {\n\t\t\t\t\t\tclearHistory(draft);\n\t\t\t\t\t\tdraft.model = model;\n\t\t\t\t\t\tdraft.entityType = model.entityType;\n\t\t\t\t\t\tdraft.widgets = null;\n\t\t\t\t\t\tdraft.initialWidgets = null;\n\t\t\t\t\t\tdraft.items = [];\n\t\t\t\t\t\tdraft.initialItems = null;\n\t\t\t\t\t\tdraft.view = null;\n\t\t\t\t\t\tdraft.exView = null;\n\t\t\t\t\t\tdraft.modelField = null;\n\t\t\t\t\t\tdraft.customFields = [];\n\t\t\t\t\t\tdraft.customFieldWidgets = null;\n\t\t\t\t\t\tdraft.originalXML = null;\n\t\t\t\t\t\tdraft.extensionXML = null;\n\t\t\t\t\t\tdraft.extensionView = null;\n\t\t\t\t\t\tdraft.extensionMoves = [];\n\t\t\t\t\t\tdraft.errorList = {};\n\t\t\t\t\t\tdraft.attrsList = [];\n\t\t\t\t\t\tdraft.translationList = [];\n\t\t\t\t\t\tdraft.initialTranslationList = [];\n\t\t\t\t\t\tdraft.removedTranslationList = [];\n\t\t\t\t\t\tdraft.selectedView = null;\n\t\t\t\t\t\tdraft.editWidget = -1;\n\t\t\t\t\t\tdraft.editWidgetType = null;\n\t\t\t\t\t\tdraft.tabIndex = 0;\n\t\t\t\t\t\tconst _fields = (record.metaFields || []).map((f) => {\n\t\t\t\t\t\t\treturn JSON.parse(\n\t\t\t\t\t\t\t\tJSON.stringify({\n\t\t\t\t\t\t\t\t\t...f,\n\t\t\t\t\t\t\t\t\ttype:\n\t\t\t\t\t\t\t\t\t\trelationalFields[f.relationship] ||\n\t\t\t\t\t\t\t\t\t\t(f.typeName || \"\").toLowerCase(),\n\t\t\t\t\t\t\t\t\t...(f.relationship && {\n\t\t\t\t\t\t\t\t\t\ttargetModel: `${f.packageName}.${f.typeName}`,\n\t\t\t\t\t\t\t\t\t}),\n\t\t\t\t\t\t\t\t\tpackageName: undefined,\n\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t});\n\t\t\t\t\t\tif (modelType === MODEL_TYPE.BASE) {\n\t\t\t\t\t\t\tdraft.metaFieldStore = [..._fields];\n\t\t\t\t\t\t\tdraft.metaFields = [..._fields];\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tfetchJSONFields(\n\t\t\t\t\t\t\t\tfields.map((f) => f.id),\n\t\t\t\t\t\t\t\trest\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\tdraft.customModel = record;\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\t\t[update, modelName, modelType, fetchJSONFields, clearHistory, reset]\n\t);\n\n\tconst handleViewSelect = React.useCallback(\n\t\tasync (view) => {\n\t\t\tstartLoader();\n\t\t\tif (!view) {\n\t\t\t\tupdate((draft) => {\n\t\t\t\t\tclearHistory(draft);\n\t\t\t\t\tdraft.items = [];\n\t\t\t\t\tdraft.exView = null;\n\t\t\t\t\tdraft.view = null;\n\t\t\t\t\tdraft.widgets = null;\n\t\t\t\t\tdraft.initialItems = null;\n\t\t\t\t\tdraft.initialWidgets = null;\n\t\t\t\t\tdraft.customFieldWidgets = null;\n\t\t\t\t\tdraft.customFieldItems = null;\n\t\t\t\t\tdraft.customFields = [];\n\t\t\t\t\tdraft.modelField = null;\n\t\t\t\t\tdraft.extensionXML = null;\n\t\t\t\t\tdraft.extensionView = null;\n\t\t\t\t\tdraft.originalXML = null;\n\t\t\t\t\tdraft.loader = false;\n\t\t\t\t\tdraft.metaFields = draft.metaFieldStore;\n\t\t\t\t\tdraft.selectedView = null;\n\t\t\t\t\tdraft.extensionMoves = [];\n\t\t\t\t\tdraft.errorList = {};\n\t\t\t\t\tdraft.attrsList = [];\n\t\t\t\t\tdraft.translationList = [];\n\t\t\t\t\tdraft.initialTranslationList = [];\n\t\t\t\t\tdraft.removedTranslationList = [];\n\t\t\t\t});\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tconst views = await fetchViews(view);\n\t\t\tconst attrsList = await fetchAttrsList({\n\t\t\t\tmodel: model.name,\n\t\t\t\tview: view.name,\n\t\t\t});\n\t\t\tconst schema = Utils.generateXMLToViewSchema({\n\t\t\t\tview: views.view,\n\t\t\t\tfields: metaFieldStore,\n\t\t\t\textensionXML: views.extensionXML,\n\t\t\t\tattrsList,\n\t\t\t});\n\t\t\tconst translationNames = Object.values(schema.widgets)\n\t\t\t\t.filter((widget) => widget.title && widget.title.startsWith(\"studio:\"))\n\t\t\t\t.map((widget) => widget.title);\n\t\t\tconst translationList = await getTranslationList(translationNames);\n\t\t\tconst originalViewData = {\n\t\t\t\toperator: \"and\",\n\t\t\t\tcriteria: [\n\t\t\t\t\t{\n\t\t\t\t\t\toperator: \"or\",\n\t\t\t\t\t\tcriteria: [\n\t\t\t\t\t\t\t{ fieldName: \"computed\", operator: \"=\", value: false },\n\t\t\t\t\t\t\t{ fieldName: \"computed\", operator: \"isNull\" },\n\t\t\t\t\t\t],\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\toperator: \"or\",\n\t\t\t\t\t\tcriteria: [\n\t\t\t\t\t\t\t{ fieldName: \"extension\", operator: \"=\", value: false },\n\t\t\t\t\t\t\t{ fieldName: \"extension\", operator: \"isNull\" },\n\t\t\t\t\t\t],\n\t\t\t\t\t},\n\t\t\t\t\t{ fieldName: \"name\", operator: \"=\", value: `${view.name}` },\n\t\t\t\t],\n\t\t\t};\n\t\t\tmetaViewService.search({ data: originalViewData }).then((res) => {\n\t\t\t\tconst { data = [] } = res;\n\t\t\t\tif (data[0]) {\n\t\t\t\t\tupdate((draft) => {\n\t\t\t\t\t\tdraft.originalXML = JSON.parse(\n\t\t\t\t\t\t\tconvert.xml2json(data[0].xml, {\n\t\t\t\t\t\t\t\tcompact: false,\n\t\t\t\t\t\t\t\tfullTagEmptyElement: false,\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t);\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t});\n\t\t\t// fetch studio extension view\n\t\t\tconst _viewSearch = {\n\t\t\t\t_domain: `self.xmlId = 'studio-${view.name}' and self.extension = true`,\n\t\t\t};\n\t\t\tconst res = await metaViewService.search({ data: _viewSearch });\n\t\t\tconst { data: resData = [] } = res;\n\t\t\tconst record = resData[0];\n\t\t\tif (record) {\n\t\t\t\tupdate((draft) => {\n\t\t\t\t\tdraft.extensionView = record;\n\t\t\t\t\tdraft.extensionXML = JSON.parse(\n\t\t\t\t\t\tconvert.xml2json(record.xml, {\n\t\t\t\t\t\t\tcompact: false,\n\t\t\t\t\t\t\tfullTagEmptyElement: false,\n\t\t\t\t\t\t})\n\t\t\t\t\t);\n\t\t\t\t});\n\t\t\t}\n\t\t\tupdate((draft) => {\n\t\t\t\tclearHistory(draft);\n\t\t\t\tdraft.attrsList = attrsList;\n\t\t\t\tdraft.translationList = translationList;\n\t\t\t\tdraft.initialTranslationList = translationList;\n\t\t\t\tdraft.removedTranslationList = [];\n\t\t\t\tif (schema) {\n\t\t\t\t\tdraft.widgets = schema.widgets;\n\t\t\t\t\tdraft.initialWidgets = schema.widgets;\n\t\t\t\t\tdraft.items = schema.items;\n\t\t\t\t\tdraft.initialItems = schema.items;\n\t\t\t\t\tdraft.metaFields = [...draft.metaFieldStore].filter(\n\t\t\t\t\t\t(field) =>\n\t\t\t\t\t\t\tschema.fieldList.findIndex((f) => f.name === field.name) === -1\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t\tdraft.selectedView = view;\n\t\t\t\tif (views.view) {\n\t\t\t\t\tdraft.view = { fields: draft.metaFields, view: views.view };\n\t\t\t\t\tdraft.exView = views.view;\n\t\t\t\t}\n\t\t\t\tdraft.customFields = [];\n\t\t\t\tdraft.customFieldWidgets = null;\n\t\t\t\tdraft.customFieldItems = null;\n\t\t\t\tdraft.modelField = null;\n\t\t\t\tdraft.loader = false;\n\t\t\t\tdraft.extensionMoves = [];\n\t\t\t\tdraft.errorList = {};\n\t\t\t\tgenerateXpath(draft);\n\t\t\t});\n\t\t},\n\t\t[update, startLoader, metaFieldStore, clearHistory, model]\n\t);\n\n\tconst viewFilter = React.useCallback(() => {\n\t\tlet _domain = `self.type='form'`;\n\t\tlet _model = `${model ? model.fullName : \"\"}`;\n\t\t_domain = `${_domain} and self.model='${_model}' and (self.computed = true OR self.name NOT IN (select meta.name from MetaView meta where meta.computed = true))`;\n\t\treturn {\n\t\t\t_domain,\n\t\t\tfields: [\n\t\t\t\t\"name\",\n\t\t\t\t\"model\",\n\t\t\t\t\"title\",\n\t\t\t\t\"type\",\n\t\t\t\t\"extension\",\n\t\t\t\t\"xmlId\",\n\t\t\t\t\"computed\",\n\t\t\t\t\"xml\",\n\t\t\t],\n\t\t};\n\t}, [model]);\n\n\tconst modelFilter = React.useCallback(() => {\n\t\treturn {\n\t\t\tfields: [\"name\", \"fullName\", \"packageName\"],\n\t\t};\n\t}, []);\n\n\tconst metaFieldFilter = React.useCallback(() => {\n\t\tconst _domain = `self.json = true and self.metaModel.id='${\n\t\t\tmodel ? model.id : -1\n\t\t}'`;\n\t\treturn {\n\t\t\t_domain,\n\t\t\tfields: [\"name\"],\n\t\t};\n\t}, [model]);\n\n\tconst handleMetaFieldSelect = React.useCallback(\n\t\t(field) => {\n\t\t\tif (field) {\n\t\t\t\tfetchCustomFields(field, model).then((res) => {\n\t\t\t\t\tconst { data = [] } = res;\n\t\t\t\t\tconst schema = generateCustomModelSchema(\n\t\t\t\t\t\tdata,\n\t\t\t\t\t\tundefined,\n\t\t\t\t\t\t\"\",\n\t\t\t\t\t\t\"customForm\"\n\t\t\t\t\t);\n\t\t\t\t\tupdate((draft) => {\n\t\t\t\t\t\tconst newId = _.uniqueId();\n\t\t\t\t\t\tdraft.customFieldWidgets =\n\t\t\t\t\t\t\tObject.keys(schema.widgets)?.length > 2\n\t\t\t\t\t\t\t\t? schema.widgets\n\t\t\t\t\t\t\t\t: {\n\t\t\t\t\t\t\t\t\t\t...schema.widgets,\n\t\t\t\t\t\t\t\t\t\t[newId]: {\n\t\t\t\t\t\t\t\t\t\t\tname: `panel${newId}`,\n\t\t\t\t\t\t\t\t\t\t\t...PANEL_PROPS,\n\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t  };\n\t\t\t\t\t\tdraft.customFieldItems =\n\t\t\t\t\t\t\tschema.items?.length > 0 ? schema.items : [`${newId}`];\n\t\t\t\t\t\tdraft.customFields = data;\n\t\t\t\t\t\tdraft.modelField = field;\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\tupdate((draft) => {\n\t\t\t\t\tdraft.customFieldWidgets = null;\n\t\t\t\t\tdraft.customFieldItems = null;\n\t\t\t\t\tdraft.customFields = [];\n\t\t\t\t\tdraft.modelField = field;\n\t\t\t\t});\n\t\t\t}\n\t\t},\n\t\t[model, update]\n\t);\n\n\tconst handleTypeSelect = React.useCallback(\n\t\t(type) => {\n\t\t\tconst { value } = type;\n\t\t\tif ([MODEL_TYPE.CUSTOM, MODEL_TYPE.BASE].includes(value)) {\n\t\t\t\tgetEnableAppBuilder().then((res) => {\n\t\t\t\t\tupdate((draft) => {\n\t\t\t\t\t\tdraft.enableAppBuilder = res;\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t\t}\n\t\t\tconst updater = (draft) => {\n\t\t\t\tdraft.modelType = type ? type.value : null;\n\t\t\t\tdraft.entityType = null;\n\t\t\t\tdraft.initialWidgets = null;\n\t\t\t\tdraft.initialItems = null;\n\t\t\t\tdraft.modelField = null;\n\t\t\t\tdraft.customFields = [];\n\t\t\t\tdraft.customFieldWidgets = null;\n\t\t\t\tdraft.metaFieldStore = [];\n\t\t\t\tdraft.extensionMoves = [];\n\t\t\t\tdraft.removedTranslationList = [];\n\t\t\t};\n\t\t\tif (value === MODEL_TYPE.CUSTOM) {\n\t\t\t\treset(updater);\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tupdate((draft) => {\n\t\t\t\tclearHistory(draft);\n\t\t\t\tupdater(draft);\n\t\t\t\tdraft.model = null;\n\t\t\t\tdraft.customModel = null;\n\t\t\t\tdraft.widgets = null;\n\t\t\t\tdraft.items = [];\n\t\t\t\tdraft.view = null;\n\t\t\t\tdraft.exView = null;\n\t\t\t\tdraft.metaFields = [];\n\t\t\t\tdraft.metaFields = [];\n\t\t\t\tdraft.selectedView = null;\n\t\t\t\tdraft.errorList = {};\n\t\t\t\tdraft.attrsList = [];\n\t\t\t\tdraft.translationList = [];\n\t\t\t\tdraft.initialTranslationList = [];\n\t\t\t});\n\t\t},\n\t\t[update, reset, clearHistory]\n\t);\n\n\tconst handleViewFilterData = React.useCallback((list) => {\n\t\tconst newList = list.filter((view) => {\n\t\t\tif (!view.computed) {\n\t\t\t\tconst index = list.findIndex((e) => e.name === view.name && e.computed);\n\t\t\t\tif (index !== -1) {\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (view.extension === true) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\treturn true;\n\t\t});\n\t\treturn newList;\n\t}, []);\n\n\tconst getOptionLabel = (option) => {\n\t\tif (option.extension === true) {\n\t\t\treturn `${option.name} (Extension)`;\n\t\t}\n\t\tif (option.computed === true) {\n\t\t\treturn `${option.name} (Computed)`;\n\t\t}\n\t\treturn option.name;\n\t};\n\treturn (\n\t\t<>\n\t\t\t<Select\n\t\t\t\toptions={modelTypes}\n\t\t\t\tvalue={modelTypes.find((e) => e.value === modelType) || null}\n\t\t\t\tfilterSelectedOptions={true}\n\t\t\t\tlabel=\"Type\"\n\t\t\t\tonChange={handleTypeSelect}\n\t\t\t\tdisableClearable\n\t\t\t/>\n\t\t\t<Select\n\t\t\t\tonChange={handleModelSelect}\n\t\t\t\tlabel=\"Model\"\n\t\t\t\tmodel={modelName}\n\t\t\t\tsearchFilter={modelFilter}\n\t\t\t\tvalue={model || null}\n\t\t\t\tonSearch={modelSearch}\n\t\t\t\tmodelType={modelType}\n\t\t\t/>\n\t\t\t{modelType === MODEL_TYPE.BASE && (\n\t\t\t\t<React.Fragment>\n\t\t\t\t\t<Select\n\t\t\t\t\t\tonChange={handleViewSelect}\n\t\t\t\t\t\tlabel=\"View\"\n\t\t\t\t\t\tmodel=\"com.axelor.meta.db.MetaView\"\n\t\t\t\t\t\tsearchFilter={viewFilter}\n\t\t\t\t\t\tgetOptionLabel={getOptionLabel}\n\t\t\t\t\t\tvalue={props.selectedView || null}\n\t\t\t\t\t\tfilterData={handleViewFilterData}\n\t\t\t\t\t/>\n\t\t\t\t\t<Select\n\t\t\t\t\t\tlabel=\"Custom fields\"\n\t\t\t\t\t\tmodel=\"com.axelor.meta.db.MetaField\"\n\t\t\t\t\t\tsearchFilter={metaFieldFilter}\n\t\t\t\t\t\tonChange={handleMetaFieldSelect}\n\t\t\t\t\t\tvalue={modelField || null}\n\t\t\t\t\t/>\n\t\t\t\t</React.Fragment>\n\t\t\t)}\n\t\t</>\n\t);\n}\n\nexport default React.memo(ViewSelection);\n","import React from \"react\";\nimport { IconButton } from \"@material-ui/core\";\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport classnames from \"classnames\";\nimport ViewSelection from \"./ViewSelection\";\nimport { MODEL_TYPE } from \"./../constants\";\nimport { useKeyPress } from \"../custom-hooks/useKeyPress\";\n\nconst useStyles = makeStyles({\n\ttoolbarContainer: {\n\t\tdisplay: \"flex\",\n\t\tflexWrap: \"wrap\",\n\t\twidth: \"100%\",\n\t\theight: \"inherit\",\n\t\tbackgroundColor: \"rgb(41, 56, 70)\",\n\t\tpadding: \"0.5rem 0.75rem\",\n\t\t\".modern-dark &\": {\n\t\t\tbackgroundColor: \"#323232\",\n\t\t},\n\t},\n\ttoolItemView: {\n\t\tcolor: \"#fff\",\n\t\tpadding: \"5px 10px\",\n\t},\n\tcrudIcon: {\n\t\theight: \"1em\",\n\t\twidth: \"1em\",\n\t\tfontSize: 14,\n\t\tcursor: \"pointer\",\n\t},\n\tselectionContainer: {\n\t\tflex: 1,\n\t\tdisplay: \"flex\",\n\t\talignItems: \"center\",\n\t\tflexWrap: \"wrap\",\n\t},\n\ttoolbarActions: {\n\t\tdisplay: \"flex\",\n\t\talignItems: \"center\",\n\t},\n\tdisableBtn: {\n\t\tcolor: \"#555 !important\",\n\t},\n});\n\nfunction isStudioView(view) {\n\tif (view && view.xmlId && view.xmlId.indexOf(\"studio-\") === 0) {\n\t\treturn true;\n\t}\n\treturn false;\n}\n\nfunction ToolbarButton(props) {\n\tconst classes = useStyles();\n\treturn (\n\t\t<IconButton\n\t\t\tclassName={classes.toolItemView}\n\t\t\tclasses={{ disabled: classes.disableBtn }}\n\t\t\t{...props}\n\t\t/>\n\t);\n}\n\nfunction Toolbar({\n\tupdate,\n\tsaveView,\n\tmodelType,\n\tsaveCustomFieldView,\n\tremoveView,\n\tmodel,\n\tonNew,\n\treset,\n\t...props\n}) {\n\tconst classes = useStyles();\n\tconst save = React.useCallback(() => {\n\t\tsaveView();\n\t\tif (modelType === MODEL_TYPE.BASE) {\n\t\t\tsaveCustomFieldView();\n\t\t}\n\t}, [saveView, saveCustomFieldView, modelType]);\n\tconst isRemoveDisabled = !(\n\t\tprops.extensionView ||\n\t\tisStudioView(props.selectedView) ||\n\t\t(modelType === MODEL_TYPE.CUSTOM && Boolean(props.customModel))\n\t);\n\tconst isNewDisabled = modelType === MODEL_TYPE.BASE && !model;\n\tconst isSaveDisabled = Object.keys(props.errorList).length > 0;\n\n\tuseKeyPress([\"s\"], save);\n\n\treturn (\n\t\t<div className={classes.toolbarContainer}>\n\t\t\t<div className={classes.toolbarActions}>\n\t\t\t\t<ToolbarButton\n\t\t\t\t\tclassName={classes.toolItemView}\n\t\t\t\t\tonClick={props.onSidePanelToggle}\n\t\t\t\t>\n\t\t\t\t\t<i className={classnames(\"fa fa-bars\", classes.crudIcon)} />\n\t\t\t\t</ToolbarButton>\n\t\t\t\t{modelType !== MODEL_TYPE.BASE && (\n\t\t\t\t\t<ToolbarButton\n\t\t\t\t\t\tclassName={classes.toolItemView}\n\t\t\t\t\t\tonClick={onNew}\n\t\t\t\t\t\tdisabled={isNewDisabled}\n\t\t\t\t\t>\n\t\t\t\t\t\t<i className={classnames(\"fa fa-plus\", classes.crudIcon)} />\n\t\t\t\t\t</ToolbarButton>\n\t\t\t\t)}\n\t\t\t\t<ToolbarButton\n\t\t\t\t\tclassName={classes.toolItemView}\n\t\t\t\t\tonClick={save}\n\t\t\t\t\tdisabled={isSaveDisabled}\n\t\t\t\t>\n\t\t\t\t\t<i className={classnames(\"fa fa-floppy-o\", classes.crudIcon)} />\n\t\t\t\t</ToolbarButton>\n\t\t\t\t{modelType === MODEL_TYPE.CUSTOM && (\n\t\t\t\t\t<ToolbarButton\n\t\t\t\t\t\tclassName={classes.toolItemView}\n\t\t\t\t\t\tonClick={removeView}\n\t\t\t\t\t\tdisabled={isRemoveDisabled}\n\t\t\t\t\t>\n\t\t\t\t\t\t<i className={classnames(\"fa fa-trash-o\", classes.crudIcon)} />\n\t\t\t\t\t</ToolbarButton>\n\t\t\t\t)}\n\t\t\t</div>\n\t\t\t<div className={classes.selectionContainer}>\n\t\t\t\t<ViewSelection\n\t\t\t\t\tmodel={model}\n\t\t\t\t\tupdate={update}\n\t\t\t\t\tmodelType={modelType}\n\t\t\t\t\treset={reset}\n\t\t\t\t\t{...props}\n\t\t\t\t/>\n\t\t\t</div>\n\t\t\t<div className={classes.toolbarActions}>\n\t\t\t\t<ToolbarButton\n\t\t\t\t\tclassName={classes.toolItemView}\n\t\t\t\t\tonClick={() => props.refresh()}\n\t\t\t\t\tdisabled={!props.customModel && !model}\n\t\t\t\t>\n\t\t\t\t\t<i className={classnames(\"fa fa-refresh\", classes.crudIcon)} />\n\t\t\t\t</ToolbarButton>\n\t\t\t\t<ToolbarButton\n\t\t\t\t\tclassName={classes.toolItemView}\n\t\t\t\t\tonClick={() => props.undo()}\n\t\t\t\t\tdisabled={props.pastLength <= 0}\n\t\t\t\t>\n\t\t\t\t\t<i className={classnames(\"fa fa-reply\", classes.crudIcon)} />\n\t\t\t\t</ToolbarButton>\n\t\t\t\t<ToolbarButton\n\t\t\t\t\tonClick={() => props.redo()}\n\t\t\t\t\tdisabled={props.futureLength <= 0}\n\t\t\t\t>\n\t\t\t\t\t<i className={classnames(\"fa fa-share\", classes.crudIcon)} />\n\t\t\t\t</ToolbarButton>\n\t\t\t</div>\n\t\t</div>\n\t);\n}\n\nexport default React.memo(Toolbar);\n","import { useEffect, useRef, useLayoutEffect, useCallback } from \"react\";\n\nexport const useKeyPress = (keys, callback, node = null) => {\n\t// implement the callback ref pattern\n\tconst callbackRef = useRef(callback);\n\tuseLayoutEffect(() => {\n\t\tcallbackRef.current = callback;\n\t});\n\n\t// handle what happens on key press\n\tconst handleKeyPress = useCallback(\n\t\t(event) => {\n\t\t\t// check if one of the key is part of the ones we want\n\t\t\tif (keys.some((key) => event.key === key && event.ctrlKey)) {\n\t\t\t\tevent.preventDefault();\n\t\t\t\tcallbackRef.current(event);\n\t\t\t}\n\t\t},\n\t\t[keys]\n\t);\n\n\tuseEffect(() => {\n\t\t// target is either the provided node or the document\n\t\tconst targetNode = node ?? document;\n\t\t// attach the event listener\n\t\ttargetNode && targetNode.addEventListener(\"keydown\", handleKeyPress);\n\n\t\t// remove the event listener\n\t\treturn () =>\n\t\t\ttargetNode && targetNode.removeEventListener(\"keydown\", handleKeyPress);\n\t}, [handleKeyPress, node]);\n};\n","import Utils from \"../utils\";\nimport { DEFAULT_VALUE, conditionProperties } from \"../constants\";\nimport { eGeneratePath } from \"./../store/xpathGenerator\";\n\nfunction hasIndex(path) {\n\treturn path.split(\"[\").length - 1 > 1;\n}\n\nfunction convertConditionName(name) {\n\tconst propertyName = conditionProperties[name];\n\treturn propertyName;\n}\n\nconst getWidgets = ({ widgets, items }) => {\n\tObject.keys(widgets).forEach((widgetId) => {\n\t\tconst path = eGeneratePath(widgets, items, widgetId);\n\t\twidgets[widgetId].xPath = path;\n\t});\n\treturn widgets;\n};\n\nfunction getName({ self, parent }) {\n\tlet name = \"\";\n\tconst pathText = self || parent;\n\tif (pathText) {\n\t\tconst finder = \"@name='\";\n\t\tconst index = pathText.indexOf(finder) + finder.length;\n\t\tconst endIndex = pathText.indexOf(\"']\");\n\t\tname = pathText.substring(index, endIndex);\n\t}\n\treturn name;\n}\n\nconst isSameAsOriginal = (item, originalWidgets) => {\n\tif (item) {\n\t\tconst { attributes } = item;\n\t\tconst itemExplore = Utils.exploreTarget(item.target);\n\t\tconst widget = Object.values(originalWidgets).find((widget) => {\n\t\t\tconst widgetExplore = Utils.exploreTarget(widget.xPath);\n\t\t\tif (widgetExplore.self || itemExplore.self) {\n\t\t\t\treturn widgetExplore.self === itemExplore.self;\n\t\t\t} else if (widgetExplore.parent || itemExplore.parent) {\n\t\t\t\treturn widgetExplore.parent === itemExplore.parent;\n\t\t\t}\n\t\t\treturn false;\n\t\t});\n\t\tconst attributeName = Utils.dashToCamelCase(attributes.name);\n\t\tif (widget) {\n\t\t\tlet widgetValue = widget[attributeName];\n\t\t\tlet maskedValue = widget[attributes.maskName];\n\t\t\tif (maskedValue === undefined) {\n\t\t\t\tmaskedValue = \"\";\n\t\t\t}\n\t\t\tif (widgetValue === undefined) {\n\t\t\t\twidgetValue = false;\n\t\t\t}\n\t\t\tif (attributes.maskName !== attributes.name) {\n\t\t\t\tif (`${maskedValue}` === `${attributes.value}`) {\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t} else if (`${widgetValue}` === `${attributes.value}`) {\n\t\t\t\treturn true;\n\t\t\t} else if (\n\t\t\t\t[\"\", undefined, null].includes(widget[attributeName]) &&\n\t\t\t\t[\"\", undefined, null].includes(attributes.value)\n\t\t\t) {\n\t\t\t\treturn true;\n\t\t\t} else if (\n\t\t\t\tattributes.maskName !== attributes.name &&\n\t\t\t\t[\"\", undefined, null].includes(widget[attributes.maskName]) &&\n\t\t\t\t[\"\", undefined, null].includes(attributes.value)\n\t\t\t) {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\t}\n\treturn false;\n};\n\nexport function getUpdatedAttrsList(state, originalWidgets) {\n\tconst newAttrsList = [];\n\tconst removedAttrsList = [];\n\tconst { attrsList = [] } = state;\n\tconst moves = state.extensionMoves.filter((m) => m.name === \"attribute\");\n\tconst view = state.selectedView;\n\tconst model = state.model;\n\tconst movesMap = new Map();\n\tconst currentSchema = Utils.generateXMLToViewSchema({\n\t\tview: state.view.view,\n\t\tfields: state.metaFieldStore,\n\t\tattrsList: state.attrsList,\n\t});\n\tconst currentWidgets = getWidgets(currentSchema);\n\n\tmoves.forEach((move) => {\n\t\tconst convertedName = convertConditionName(move.attributes.name);\n\t\tconst name = convertedName || move.attributes.name;\n\t\tconst id = move.id;\n\t\tconst value = move.attributes.value;\n\t\tconst newMove = Object.assign(\n\t\t\t{},\n\t\t\t{\n\t\t\t\t...move,\n\t\t\t\tattributes: {\n\t\t\t\t\t...move.attributes,\n\t\t\t\t\tname,\n\t\t\t\t\tvalue,\n\t\t\t\t\tmaskName: move.attributes.name,\n\t\t\t\t},\n\t\t\t}\n\t\t);\n\t\tmovesMap.set(name + id, newMove);\n\t});\n\tmovesMap.forEach((value) => {\n\t\tconst move = value;\n\t\tconst moveExplore = Utils.exploreTarget(move.target);\n\t\tconst { attributes } = move;\n\t\tconst fieldName = getName(moveExplore);\n\t\tconst fieldIndex = attrsList.findIndex(\n\t\t\t(attr) =>\n\t\t\t\tfieldName.includes(attr.field) &&\n\t\t\t\t(attr.name === attributes.name ||\n\t\t\t\t\tconditionProperties[attr.name] === attributes.name)\n\t\t);\n\t\tconst field = attrsList[fieldIndex];\n\t\tconst isOriginal = isSameAsOriginal(move, originalWidgets);\n\t\tconst isCurrent = isSameAsOriginal(move, currentWidgets);\n\t\tconst selectValueRegEx = /(['\"])(?:(?!\\1|\\\\).|\\\\.)*\\1/;\n\t\tconst newAttrsIndex = newAttrsList.findIndex(\n\t\t\t(attr) =>\n\t\t\t\tmoveExplore.self &&\n\t\t\t\tmoveExplore.self.match(selectValueRegEx)?.[0].includes(attr.field) &&\n\t\t\t\tattr.name === attributes.name\n\t\t);\n\t\tlet defaultValue = DEFAULT_VALUE[attributes.name];\n\t\tif (isOriginal || isCurrent) {\n\t\t\tif (newAttrsIndex !== -1) {\n\t\t\t\tnewAttrsList.splice(newAttrsIndex, 1);\n\t\t\t} else if (field && field.id) {\n\t\t\t\tremovedAttrsList.push({ id: field.id, version: field.version });\n\t\t\t}\n\t\t} else {\n\t\t\tif (field) {\n\t\t\t\tif ([null, undefined].includes(attributes.value)) {\n\t\t\t\t\tif (defaultValue) {\n\t\t\t\t\t\tif (defaultValue === attributes.value) {\n\t\t\t\t\t\t\tremovedAttrsList.push({ id: field.id, version: field.version });\n\t\t\t\t\t\t}\n\t\t\t\t\t} else {\n\t\t\t\t\t\tremovedAttrsList.push({ id: field.id, version: field.version });\n\t\t\t\t\t}\n\t\t\t\t} else if (field.value !== attributes.value) {\n\t\t\t\t\tif (defaultValue) {\n\t\t\t\t\t\tif (defaultValue === attributes.value) {\n\t\t\t\t\t\t\tremovedAttrsList.push({ id: field.id, version: field.version });\n\t\t\t\t\t\t}\n\t\t\t\t\t} else {\n\t\t\t\t\t\tif (newAttrsIndex === -1) {\n\t\t\t\t\t\t\tnewAttrsList.push({\n\t\t\t\t\t\t\t\t...field,\n\t\t\t\t\t\t\t\tname: attributes.name,\n\t\t\t\t\t\t\t\tvalue: attributes.value,\n\t\t\t\t\t\t\t\tmaskName: attributes.maskName,\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tnewAttrsList[newAttrsIndex].value = attributes.value;\n\t\t\t\t\t\t\tnewAttrsList[newAttrsIndex].maskName = attributes.maskName;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tif (fieldName) {\n\t\t\t\t\t// const hasInAttrsList = attrsList.find(attr => )\n\t\t\t\t\t// if(defaultValue !== attributes.value) {\n\t\t\t\t\tif (newAttrsIndex === -1) {\n\t\t\t\t\t\tnewAttrsList.push({\n\t\t\t\t\t\t\tview: view.name,\n\t\t\t\t\t\t\tmodel: model.fullName,\n\t\t\t\t\t\t\tname: attributes.name,\n\t\t\t\t\t\t\tmaskName: attributes.maskName,\n\t\t\t\t\t\t\tvalue: attributes.value,\n\t\t\t\t\t\t\tfield: fieldName,\n\t\t\t\t\t\t});\n\t\t\t\t\t} else {\n\t\t\t\t\t\tnewAttrsList[newAttrsIndex].value = attributes.value;\n\t\t\t\t\t\tnewAttrsList[newAttrsIndex].maskName = attributes.maskName;\n\t\t\t\t\t}\n\t\t\t\t\t// } else if(newAttrsIndex !== -1) {\n\t\t\t\t\t// \tnewAttrsList.splice(newAttrsIndex, 1);\n\t\t\t\t\t// }\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t});\n\treturn { changedAttrsList: newAttrsList, removedAttrsList };\n}\n\nexport function optimizeExtension(state, originalWidgets) {\n\tconst processed = [];\n\tconst moves = state.extensionMoves.filter((m) => m.name !== \"attribute\");\n\tlet list = [...moves];\n\tconst filterListForAttribute = (move) => {\n\t\tif (\n\t\t\tprocessed.findIndex(\n\t\t\t\t(p) => p.target === move.target && p.name === move.attributes.name\n\t\t\t) === -1\n\t\t) {\n\t\t\tconst _list = list\n\t\t\t\t.map((_item, i) => {\n\t\t\t\t\tif (\n\t\t\t\t\t\t_item.target === move.target &&\n\t\t\t\t\t\t_item.attributes &&\n\t\t\t\t\t\tmove.attributes.name === _item.attributes.name\n\t\t\t\t\t) {\n\t\t\t\t\t\treturn i;\n\t\t\t\t\t}\n\t\t\t\t\treturn undefined;\n\t\t\t\t})\n\t\t\t\t.filter((e) => e !== undefined);\n\t\t\tconst lastItem = _list[_list.length - 1];\n\t\t\tprocessed.push({ target: move.target, name: move.attributes.name });\n\t\t\tlist = list.filter((item, k) => {\n\t\t\t\tif (item.target === move.target) {\n\t\t\t\t\tif (\n\t\t\t\t\t\tmove.attributes &&\n\t\t\t\t\t\titem.attributes &&\n\t\t\t\t\t\tmove.attributes.name === item.attributes.name\n\t\t\t\t\t) {\n\t\t\t\t\t\treturn lastItem === k ? true : false;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\treturn true;\n\t\t\t});\n\t\t}\n\t};\n\n\tconst filterListForRemove = (move) => {\n\t\tlet canRemoveReplace = false;\n\t\tconst explore = Utils.exploreTarget(move.target);\n\t\t// check for insert nodes\n\t\tconst insertIndex = list.findIndex((item) => {\n\t\t\tif (item.name === \"insert\") {\n\t\t\t\treturn item.elements && item.elements[0] && explore.self\n\t\t\t\t\t? explore.self.includes(`'${item.elements[0].name}'`)\n\t\t\t\t\t: explore.parent && explore.parent.includes(item.elements[0].name);\n\t\t\t}\n\t\t\treturn false;\n\t\t});\n\t\tconst depends = list.filter((item) => {\n\t\t\tif (item.target) {\n\t\t\t\tconst itemExplore = Utils.exploreTarget(item.target);\n\t\t\t\treturn (\n\t\t\t\t\t[\"insert\", \"move\"].includes(item.name) &&\n\t\t\t\t\titemExplore.self &&\n\t\t\t\t\titemExplore.self.includes(explore.self)\n\t\t\t\t);\n\t\t\t}\n\t\t\treturn false;\n\t\t});\n\t\tif (insertIndex !== -1 && !depends.length) {\n\t\t\tcanRemoveReplace = true;\n\t\t\tlist.splice(insertIndex, 1);\n\t\t\t// check for move\n\t\t\t[...list].forEach((item) => {\n\t\t\t\tif (\n\t\t\t\t\titem.name === \"move\" &&\n\t\t\t\t\titem.source &&\n\t\t\t\t\titem.source === move.target\n\t\t\t\t) {\n\t\t\t\t\tconst moveIndex = list.findIndex(\n\t\t\t\t\t\t(_item) =>\n\t\t\t\t\t\t\t_item.name === \"move\" &&\n\t\t\t\t\t\t\t_item.source &&\n\t\t\t\t\t\t\t_item.source === move.target\n\t\t\t\t\t);\n\t\t\t\t\tif (moveIndex !== -1) {\n\t\t\t\t\t\tlist.splice(moveIndex, 1);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t\t// remove attribute changes\n\t\tlist = list.filter((item) => {\n\t\t\tif (item.name === \"attribute\" && item.target === move.target) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\treturn true;\n\t\t});\n\t\tif (canRemoveReplace) {\n\t\t\tconst removeIndex = list.findIndex(\n\t\t\t\t(item) => item.name === \"replace\" && item.target === move.target\n\t\t\t);\n\t\t\tif (removeIndex !== -1) {\n\t\t\t\tlist.splice(removeIndex, 1);\n\t\t\t}\n\t\t}\n\t};\n\n\tmoves.forEach((move, i) => {\n\t\tif (move.target) {\n\t\t\tconst explore = Utils.exploreTarget(move.target);\n\t\t\tlet flag = true;\n\t\t\tif (explore.self && hasIndex(explore.self)) {\n\t\t\t\tflag = false;\n\t\t\t}\n\t\t\tif (explore.parent && hasIndex(explore.parent)) {\n\t\t\t\tflag = false;\n\t\t\t}\n\t\t\tif (move.name === \"attribute\" && flag) {\n\t\t\t\tfilterListForAttribute(move);\n\t\t\t}\n\t\t\tif (move.name === \"replace\" && flag) {\n\t\t\t\tif (\n\t\t\t\t\t!(\n\t\t\t\t\t\t(explore?.self && explore.self.includes(\"panel\")) ||\n\t\t\t\t\t\t(!explore?.self && explore?.parent.includes(\"panel\"))\n\t\t\t\t\t)\n\t\t\t\t) {\n\t\t\t\t\tfilterListForRemove(move);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t});\n\treturn list;\n}\n","import React from \"react\";\nimport convert from \"xml-js\";\nimport {\n\tDialog,\n\tDialogTitle,\n\tDialogContent,\n\tDialogActions,\n\tButton,\n} from \"@material-ui/core\";\nimport _ from \"lodash\";\n\nimport Toolbar from \"./Toolbar\";\nimport { useStore } from \"../store/context\";\nimport { generateView } from \"../store/extensionGenerator\";\nimport AxelorService from \"./../services/axelor.rest\";\nimport Utils, {\n\tgenerateCustomModelSchema,\n\ttranslate,\n\tisPanelTab,\n} from \"../utils\";\nimport {\n\tMODEL_TYPE,\n\tconditionProperties,\n\totherNoQuoteProps,\n\tItemTypes,\n\tPANEL_PROPS,\n\tTYPE,\n} from \"../constants\";\nimport {\n\tsaveCustomModel,\n\tfetchJSONFields,\n\tremoveCustomModel,\n\tgenerateMenuChange,\n\tfetchCustomModel,\n\tfetchCustomFields,\n\tfetchViews,\n\tsaveAttrsList,\n\tfetchAttrsList,\n\tsaveTranslationList,\n\tgetTranslationList,\n\tdeleteAttrsList,\n\tdeleteTranslationList,\n} from \"./api\";\nimport DeleteConfirmation from \"./DeleteConfirmation\";\nimport { getXML } from \"./../store/computeXML\";\nimport { generateXpath, eGeneratePath } from \"./../store/xpathGenerator\";\nimport {\n\toptimizeExtension,\n\tgetUpdatedAttrsList,\n} from \"../store/optimizeExtension\";\n\nconst metaViewService = new AxelorService({\n\tmodel: \"com.axelor.meta.db.MetaView\",\n});\nconst customFieldService = new AxelorService({\n\tmodel: \"com.axelor.meta.db.MetaJsonField\",\n});\n\nconst getWidgets = ({ widgets, items }) => {\n\tObject.keys(widgets).forEach((widgetId) => {\n\t\tconst path = eGeneratePath(widgets, items, widgetId);\n\t\twidgets[widgetId].xPath = path;\n\t});\n\treturn widgets;\n};\n\nconst getChangedTranslationList = (\n\tlist,\n\tinitialList,\n\tremovedTranslationList\n) => {\n\tconst deletedTranslationList = [];\n\tconst changedTranslationList = list.filter((item) => {\n\t\tif (removedTranslationList.indexOf(item.key) !== -1) {\n\t\t\titem.id &&\n\t\t\t\tdeletedTranslationList.push({ id: item.id, version: item.version });\n\t\t\treturn false;\n\t\t}\n\t\tif (item.id) {\n\t\t\tconst initialItem = initialList.find(\n\t\t\t\t(i) => i.language === item.language && i.key === item.key\n\t\t\t);\n\t\t\tif (initialItem && initialItem.message !== item.message) {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t\treturn false;\n\t\t}\n\t\treturn true;\n\t});\n\treturn { changedTranslationList, deletedTranslationList };\n};\n\nfunction ToolbarContainer(props) {\n\tconst { state, update, startLoader, undo, redo, clearHistory } = useStore();\n\tconst [deleteConfirmationDialog, setDeleteConfirmationDialog] =\n\t\tReact.useState(false);\n\tconst { customFieldWidgets, widgets, modelType } = state;\n\tconst closeLoader = React.useCallback(() => {\n\t\tupdate((draft) => {\n\t\t\tdraft.loader = false;\n\t\t});\n\t}, [update]);\n\n\tconst showAlert = React.useCallback(\n\t\t(message, title) => {\n\t\t\tconst dialog = {\n\t\t\t\tmessage: translate(message) || translate(\"Some error occurred\"),\n\t\t\t\t...(title ? { title: translate(title) } : {}),\n\t\t\t\ttype: \"alert\",\n\t\t\t};\n\t\t\tupdate((draft) => {\n\t\t\t\tdraft.loader = false;\n\t\t\t\tdraft.dialog = dialog;\n\t\t\t});\n\t\t},\n\t\t[update]\n\t);\n\n\tconst reset = React.useCallback(\n\t\t(updater, draft) => {\n\t\t\tconst callbackfn = (draft) => {\n\t\t\t\tupdater && updater(draft);\n\t\t\t\tdraft.errorList = {};\n\t\t\t\tdraft.customModel = null;\n\t\t\t\tdraft.exView = null;\n\t\t\t\tdraft.view = null;\n\t\t\t\tdraft.extensionXML = null;\n\t\t\t\tdraft.extensionView = null;\n\t\t\t\tdraft.loader = false;\n\t\t\t\tdraft.metaFields = draft.metaFieldStore || [];\n\t\t\t\tdraft.selectedView = null;\n\t\t\t\tdraft.translationList = [];\n\t\t\t\tdraft.initialTranslationList = [];\n\t\t\t\tdraft.attrsList = [];\n\t\t\t\tdraft.model = null;\n\t\t\t\tconst newId = _.uniqueId();\n\t\t\t\tdraft.widgets = {\n\t\t\t\t\t\"-1\": {\n\t\t\t\t\t\ttype: \"form\",\n\t\t\t\t\t\tcols: 12,\n\t\t\t\t\t\textension: false,\n\t\t\t\t\t\t...Utils.getDefaultProperties(draft.modelType),\n\t\t\t\t\t},\n\t\t\t\t\t0: { type: \"dump_field\", name: \"\" },\n\t\t\t\t\t[newId]: {\n\t\t\t\t\t\tname: `panel${newId}`,\n\t\t\t\t\t\t...PANEL_PROPS,\n\t\t\t\t\t},\n\t\t\t\t};\n\t\t\t\tdraft.items = [`${newId}`];\n\t\t\t\tdraft.editWidget = -1;\n\t\t\t\tdraft.editWidgetType = null;\n\t\t\t\tdraft.tabIndex = 0;\n\t\t\t};\n\t\t\tif (draft) {\n\t\t\t\tcallbackfn(draft);\n\t\t\t} else {\n\t\t\t\tupdate(callbackfn);\n\t\t\t}\n\t\t},\n\t\t[update]\n\t);\n\n\tconst removeView = React.useCallback(\n\t\tfunction removeView() {\n\t\t\tstartLoader();\n\t\t\tconst clearView = (dialog) => {\n\t\t\t\tupdate((draft) => {\n\t\t\t\t\tclearHistory(draft);\n\t\t\t\t\tdraft.customModel = null;\n\t\t\t\t\tdraft.dialog = dialog;\n\t\t\t\t\tdraft.widgets = null;\n\t\t\t\t\tdraft.initialItems = null;\n\t\t\t\t\tdraft.initialWidgets = null;\n\t\t\t\t\tdraft.items = [];\n\t\t\t\t\tdraft.view = null;\n\t\t\t\t\tdraft.metaFields = [];\n\t\t\t\t\tdraft.selectedView = null;\n\t\t\t\t\tdraft.originalXML = null;\n\t\t\t\t\tdraft.extensionXML = null;\n\t\t\t\t\tdraft.selectedView = null;\n\t\t\t\t\tdraft.loader = false;\n\t\t\t\t\tdraft.extensionView = null;\n\t\t\t\t\tdraft.errorList = {};\n\t\t\t\t\tif (draft.modelType === MODEL_TYPE.CUSTOM) {\n\t\t\t\t\t\treset(null, draft);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t};\n\t\t\tif (state.modelType === MODEL_TYPE.CUSTOM) {\n\t\t\t\tif (state.model || state.customModel) {\n\t\t\t\t\tremoveCustomModel(state.model || state.customModel).then((res) => {\n\t\t\t\t\t\tconst { data, status } = res || {};\n\t\t\t\t\t\tif (status === -1) {\n\t\t\t\t\t\t\tconst { message = \"\" } = data || {};\n\t\t\t\t\t\t\tshowAlert(message);\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tclearView(null);\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tlet record;\n\t\t\t\tif (state.extensionView) {\n\t\t\t\t\trecord = {\n\t\t\t\t\t\tid: state.extensionView.id,\n\t\t\t\t\t\tversion: state.extensionView.version,\n\t\t\t\t\t};\n\t\t\t\t} else if (\n\t\t\t\t\tstate.selectedView &&\n\t\t\t\t\tstate.selectedView.xmlId &&\n\t\t\t\t\tstate.selectedView.xmlId.indexOf(\"studio-\") === 0\n\t\t\t\t) {\n\t\t\t\t\trecord = {\n\t\t\t\t\t\tid: state.selectedView.id,\n\t\t\t\t\t\tversion: state.selectedView.version,\n\t\t\t\t\t};\n\t\t\t\t}\n\t\t\t\tif (record) {\n\t\t\t\t\tmetaViewService.removeAll([record]).then((e) => {\n\t\t\t\t\t\tclearView(null);\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\t[update, state, startLoader, clearHistory, reset, showAlert]\n\t);\n\n\tconst refresh = React.useCallback(async () => {\n\t\tif (state.modelType === MODEL_TYPE.CUSTOM) {\n\t\t\tconst { customModel } = state;\n\t\t\tif (!customModel) return;\n\t\t\tconst record =\n\t\t\t\t(await fetchCustomModel(customModel.id, (error) => {\n\t\t\t\t\tshowAlert(error?.message, error?.title);\n\t\t\t\t})) || {};\n\t\t\tconst { fields = [], ...rest } = record;\n\t\t\tif (rest.menuBuilder) {\n\t\t\t\trest.menuBuilder = {\n\t\t\t\t\t...customModel.menuBuilder,\n\t\t\t\t\t...rest.menuBuilder,\n\t\t\t\t};\n\t\t\t}\n\t\t\tfetchJSONFields(\n\t\t\t\tfields.map((f) => f.id),\n\t\t\t\tupdate,\n\t\t\t\trest\n\t\t\t);\n\t\t\tupdate((draft) => {\n\t\t\t\tdraft.customModel = {\n\t\t\t\t\t...(record || {}),\n\t\t\t\t\tmenuBuilder: rest?.menuBuilder,\n\t\t\t\t};\n\t\t\t\tdraft.model = record;\n\t\t\t\tdraft.loader = false;\n\t\t\t\tdraft.removedCustomFields = [];\n\t\t\t\tclearHistory(draft);\n\t\t\t});\n\t\t} else {\n\t\t\tif (state.widgets) {\n\t\t\t\tconst { view } = state;\n\t\t\t\tconst res = await metaViewService.fetch(view?.view?.id);\n\t\t\t\tif (res && res.status === -1) {\n\t\t\t\t\tconst { message, title } = res.data || {};\n\t\t\t\t\tshowAlert(message, title);\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tconst record = res && res.data && res.data[0];\n\t\t\t\tconst attrsList = await fetchAttrsList({\n\t\t\t\t\tmodel: state.model.fullName,\n\t\t\t\t\tview: state.selectedView.name,\n\t\t\t\t});\n\t\t\t\tupdate((draft) => {\n\t\t\t\t\tdraft.loader = false;\n\t\t\t\t\tconst views = draft.view;\n\t\t\t\t\tconst schema = Utils.generateXMLToViewSchema({\n\t\t\t\t\t\tview: record,\n\t\t\t\t\t\tfields: draft.metaFieldStore,\n\t\t\t\t\t\textensionXML: views.extensionXML,\n\t\t\t\t\t\tattrsList: attrsList || [],\n\t\t\t\t\t});\n\t\t\t\t\tdraft.widgets = schema.widgets;\n\t\t\t\t\tdraft.initialWidgets = schema.widgets;\n\t\t\t\t\tdraft.items = schema.items;\n\t\t\t\t\tdraft.initialItems = schema.items;\n\t\t\t\t\tdraft.extensionMoves = [];\n\t\t\t\t\tdraft.attrsList = attrsList || [];\n\t\t\t\t\tgenerateXpath(draft);\n\t\t\t\t\tclearHistory(draft);\n\t\t\t\t});\n\t\t\t}\n\t\t\tif (\n\t\t\t\t(state.customFieldItems || state.removedCustomFields.length) &&\n\t\t\t\tstate.modelField?.name\n\t\t\t) {\n\t\t\t\tstartLoader();\n\t\t\t\tfetchCustomFields(state.modelField, state.model).then((res) => {\n\t\t\t\t\tif (res && res.status === -1) {\n\t\t\t\t\t\tconst { message, title } = res.data || {};\n\t\t\t\t\t\tshowAlert(message, title);\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t\tconst { data = [] } = res;\n\t\t\t\t\tconst schema = generateCustomModelSchema(\n\t\t\t\t\t\tdata,\n\t\t\t\t\t\tundefined,\n\t\t\t\t\t\t\"\",\n\t\t\t\t\t\t\"customForm\"\n\t\t\t\t\t);\n\t\t\t\t\tupdate((draft) => {\n\t\t\t\t\t\tconst newId = _.uniqueId();\n\t\t\t\t\t\tdraft.customFieldWidgets =\n\t\t\t\t\t\t\tObject.keys(schema.widgets)?.length > 2\n\t\t\t\t\t\t\t\t? schema.widgets\n\t\t\t\t\t\t\t\t: {\n\t\t\t\t\t\t\t\t\t\t...schema.widgets,\n\t\t\t\t\t\t\t\t\t\t[newId]: {\n\t\t\t\t\t\t\t\t\t\t\tname: `panel${newId}`,\n\t\t\t\t\t\t\t\t\t\t\t...PANEL_PROPS,\n\t\t\t\t\t\t\t\t\t\t\tmodel: draft.model.fullName,\n\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t  };\n\t\t\t\t\t\tdraft.customFieldItems =\n\t\t\t\t\t\t\tschema.items?.length > 0 ? schema.items : [`${newId}`];\n\t\t\t\t\t\tdraft.customFields = data;\n\t\t\t\t\t\tdraft.loader = false;\n\t\t\t\t\t\tdraft.removedCustomFields = [];\n\t\t\t\t\t\tclearHistory(draft);\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\tcloseLoader();\n\t\t\t}\n\t\t}\n\t}, [update, state, closeLoader, startLoader, showAlert, clearHistory]);\n\n\tconst isTabsPanelEmpty = React.useCallback(() => {\n\t\tconst propertyValues =\n\t\t\tObject.values(\n\t\t\t\t(modelType === MODEL_TYPE.BASE ? customFieldWidgets : widgets) || {}\n\t\t\t) || [];\n\t\tconst panelTab = propertyValues.find((v) => v.type === TYPE.tabs);\n\t\tif (panelTab && !panelTab?.items?.length) {\n\t\t\tshowAlert(\"Tabs should have atleast one panel\");\n\t\t\treturn false;\n\t\t} else {\n\t\t\treturn true;\n\t\t}\n\t}, [customFieldWidgets, widgets, modelType, showAlert]);\n\n\tconst saveView = React.useCallback(async () => {\n\t\tif (!state.widgets) {\n\t\t\treturn;\n\t\t}\n\t\tif (!isTabsPanelEmpty()) return;\n\t\tstartLoader();\n\t\tif (state.modelType === MODEL_TYPE.CUSTOM) {\n\t\t\tconst { fields } = Utils.getCustomModelFields(\n\t\t\t\tstate.items,\n\t\t\t\tstate.widgets,\n\t\t\t\tnull,\n\t\t\t\ttrue\n\t\t\t);\n\t\t\tconst propertyValues = Object.values(state.widgets || {}) || [];\n\t\t\tconst uniqueValues = new Set(propertyValues.map((v) => v.name)) || [];\n\t\t\tif (uniqueValues.size < propertyValues.length) {\n\t\t\t\tshowAlert(\"Field name should be unique\");\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tconst formProperties = state.widgets[-1];\n\t\t\tif (!formProperties.name || !formProperties.title) {\n\t\t\t\tshowAlert(\"Please enter form name and title\");\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tif (state.removedCustomFields.length) {\n\t\t\t\tconst res = await customFieldService.removeAll(\n\t\t\t\t\tstate.removedCustomFields\n\t\t\t\t);\n\t\t\t\tif (res && res.status === -1) {\n\t\t\t\t\tconst { message, title } = res.data || {};\n\t\t\t\t\tshowAlert(message, title);\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t}\n\t\t\tlet customModel = {\n\t\t\t\t...state.customModel,\n\t\t\t\t...Utils.getFormProperties(formProperties),\n\t\t\t\tfields,\n\t\t\t\t...(state.customModel && { version: state.customModel.version }),\n\t\t\t};\n\t\t\tif (formProperties.isGenerateMenu === true) {\n\t\t\t\tcustomModel[\"menuBuilder\"] = {\n\t\t\t\t\t...(state.customModel || {}).menuBuilder,\n\t\t\t\t\ttitle: formProperties.menuBuilderTitle,\n\t\t\t\t\tparentMenu: formProperties.menuBuilderParent,\n\t\t\t\t\tversion: ((state.customModel || {}).menuBuilder || {}).$version,\n\t\t\t\t};\n\t\t\t}\n\t\t\tconst { isGenerateMenu } = state.customModel || {};\n\t\t\tif (formProperties.isGenerateMenu !== isGenerateMenu) {\n\t\t\t\tconst res = await generateMenuChange(customModel);\n\t\t\t\tconst { data = [] } = res;\n\t\t\t\tif (data[0] && data[0].reload) {\n\t\t\t\t\tconst modelResult = await fetchCustomModel(\n\t\t\t\t\t\tcustomModel.id,\n\t\t\t\t\t\t(error) => {\n\t\t\t\t\t\t\tshowAlert(error?.message, error?.title);\n\t\t\t\t\t\t}\n\t\t\t\t\t);\n\t\t\t\t\tif (!modelResult) return;\n\t\t\t\t\tcustomModel = {\n\t\t\t\t\t\t...customModel,\n\t\t\t\t\t\tmenuBuilder: null,\n\t\t\t\t\t\tversion: modelResult.version,\n\t\t\t\t\t};\n\t\t\t\t}\n\t\t\t}\n\t\t\tsaveCustomModel(customModel).then((res) => {\n\t\t\t\tconst { data, status } = res || {};\n\t\t\t\tif (status === -1) {\n\t\t\t\t\tconst { message = \"\", title } = data || {};\n\t\t\t\t\tlet errorMessage = message;\n\t\t\t\t\tif (\n\t\t\t\t\t\ttitle &&\n\t\t\t\t\t\ttitle.includes(translate(\"Unique constraint violation\"))\n\t\t\t\t\t) {\n\t\t\t\t\t\terrorMessage = translate(\"Model name should be unique\");\n\t\t\t\t\t\tif (message.includes(\"com.axelor.meta.db.MetaJsonRecord\")) {\n\t\t\t\t\t\t\terrorMessage = translate(\"Field name should be unique\");\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tshowAlert(errorMessage);\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tconst record = data && data[0];\n\t\t\t\tconst { fields = [], ...rest } = record;\n\t\t\t\tif (rest.menuBuilder) {\n\t\t\t\t\trest.menuBuilder = {\n\t\t\t\t\t\t...customModel.menuBuilder,\n\t\t\t\t\t\t...rest.menuBuilder,\n\t\t\t\t\t};\n\t\t\t\t}\n\t\t\t\tfetchJSONFields(\n\t\t\t\t\tfields.map((f) => f.id),\n\t\t\t\t\tupdate,\n\t\t\t\t\trest\n\t\t\t\t);\n\t\t\t\tupdate((draft) => {\n\t\t\t\t\tdraft.customModel = record;\n\t\t\t\t\tdraft.model = record;\n\t\t\t\t\tdraft.loader = false;\n\t\t\t\t\tdraft.removedCustomFields = [];\n\t\t\t\t\tclearHistory(draft);\n\t\t\t\t});\n\t\t\t});\n\t\t} else {\n\t\t\tif (state.widgets) {\n\t\t\t\tconst exemptAttributes = [\n\t\t\t\t\t\"viewId\",\n\t\t\t\t\t\"modelId\",\n\t\t\t\t\t\"version\",\n\t\t\t\t\t\"helpOverride\",\n\t\t\t\t\t\"menubar\",\n\t\t\t\t\t\"xml\",\n\t\t\t\t\t\"computed\",\n\t\t\t\t\t\"xmlId\",\n\t\t\t\t\t\"type\",\n\t\t\t\t\t\"cols\",\n\t\t\t\t\t\"colSpan\",\n\t\t\t\t\t\"serverType\",\n\t\t\t\t];\n\t\t\t\tif (!state.exView || Utils.isCreatedFromStudio(state.exView)) {\n\t\t\t\t\tconst formProperties = state.widgets[-1];\n\t\t\t\t\tif (!formProperties.name || !formProperties.title) {\n\t\t\t\t\t\tshowAlert(\"Please enter form name and title\");\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t\tconst viewSearch = await metaViewService.search({\n\t\t\t\t\t\tdata: { _domain: `self.name = '${formProperties.name}'` },\n\t\t\t\t\t});\n\t\t\t\t\tif (\n\t\t\t\t\t\tviewSearch &&\n\t\t\t\t\t\tviewSearch.total &&\n\t\t\t\t\t\tviewSearch.total > 0 &&\n\t\t\t\t\t\t!state.exView?.id\n\t\t\t\t\t) {\n\t\t\t\t\t\tshowAlert(\"View name already exists\");\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t\tconst patch = generateView(\n\t\t\t\t\t\tstate.widgets,\n\t\t\t\t\t\tstate.items,\n\t\t\t\t\t\tstate.modelType\n\t\t\t\t\t);\n\t\t\t\t\tconst model = state.model.fullName;\n\t\t\t\t\tconst form = {\n\t\t\t\t\t\telements: [\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tname: \"form\",\n\t\t\t\t\t\t\t\ttype: \"element\",\n\t\t\t\t\t\t\t\tattributes: {\n\t\t\t\t\t\t\t\t\tmodel,\n\t\t\t\t\t\t\t\t\t...Utils.getFormProperties(formProperties, [\n\t\t\t\t\t\t\t\t\t\t...exemptAttributes,\n\t\t\t\t\t\t\t\t\t\t\"extension\",\n\t\t\t\t\t\t\t\t\t\t\"id\",\n\t\t\t\t\t\t\t\t\t]),\n\t\t\t\t\t\t\t\t\tid:\n\t\t\t\t\t\t\t\t\t\tstate.exView && state.exView.xmlId\n\t\t\t\t\t\t\t\t\t\t\t? state.exView.xmlId\n\t\t\t\t\t\t\t\t\t\t\t: `studio-${formProperties.name}`,\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\telements: [...patch],\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t],\n\t\t\t\t\t};\n\t\t\t\t\tconst xml = Utils.processXML(\n\t\t\t\t\t\tconvert.json2xml(form, {\n\t\t\t\t\t\t\tcompact: false,\n\t\t\t\t\t\t\tfullTagEmptyElement: false,\n\t\t\t\t\t\t})\n\t\t\t\t\t);\n\t\t\t\t\tlet data = {\n\t\t\t\t\t\txml,\n\t\t\t\t\t\textension: formProperties.extension,\n\t\t\t\t\t\ttype: \"form\",\n\t\t\t\t\t\tname: formProperties.name,\n\t\t\t\t\t\ttitle: formProperties.title,\n\t\t\t\t\t\tmodel,\n\t\t\t\t\t\txmlId: `studio-${formProperties.name}`,\n\t\t\t\t\t};\n\t\t\t\t\tif (state.exView && state.exView.id) {\n\t\t\t\t\t\tdata[\"id\"] = state.exView.id;\n\t\t\t\t\t\tdata[\"version\"] = state.exView.version;\n\t\t\t\t\t\tdata[\"xmlId\"] = state.exView.xmlId || data.xmlId;\n\t\t\t\t\t}\n\t\t\t\t\tmetaViewService.save(data).then(async (res) => {\n\t\t\t\t\t\tif (res.status === -1) {\n\t\t\t\t\t\t\tconst error = res.data;\n\t\t\t\t\t\t\tshowAlert(error?.string || error?.message, error?.title);\n\t\t\t\t\t\t} else if (res.data && res.data[0]) {\n\t\t\t\t\t\t\tconst fetchResult = await metaViewService.fetch(res.data[0].id);\n\t\t\t\t\t\t\tif (fetchResult.data && fetchResult.data[0]) {\n\t\t\t\t\t\t\t\tconst record = fetchResult.data[0];\n\t\t\t\t\t\t\t\tupdate((draft) => {\n\t\t\t\t\t\t\t\t\tconst schema = Utils.generateXMLToViewSchema({\n\t\t\t\t\t\t\t\t\t\tview: record,\n\t\t\t\t\t\t\t\t\t\tfields: draft.metaFieldStore,\n\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t\tdraft.widgets = schema.widgets;\n\t\t\t\t\t\t\t\t\tdraft.initialWidgets = schema.widgets;\n\t\t\t\t\t\t\t\t\tdraft.items = schema.items;\n\t\t\t\t\t\t\t\t\tdraft.initialItems = schema.items;\n\t\t\t\t\t\t\t\t\tdraft.metaView = record;\n\t\t\t\t\t\t\t\t\tdraft.exView = record;\n\t\t\t\t\t\t\t\t\tdraft.selectedView = { ...record };\n\t\t\t\t\t\t\t\t\tdraft.loader = false;\n\t\t\t\t\t\t\t\t\tclearHistory(draft);\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t} else {\n\t\t\t\t\tconst { view } = state.view;\n\t\t\t\t\tconst model = state.model.fullName;\n\t\t\t\t\tconst originalSchema = Utils.generateViewFromJson({\n\t\t\t\t\t\tview: state.originalXML,\n\t\t\t\t\t\tfields: state.metaFieldStore,\n\t\t\t\t\t});\n\t\t\t\t\tconst widgets = getWidgets(originalSchema);\n\t\t\t\t\tconst moves = optimizeExtension(state, widgets);\n\t\t\t\t\tconst { changedAttrsList, removedAttrsList } = getUpdatedAttrsList(\n\t\t\t\t\t\tstate,\n\t\t\t\t\t\twidgets\n\t\t\t\t\t);\n\t\t\t\t\tconst extension = getXML(moves, state);\n\t\t\t\t\tlet isAttrsChanged = false;\n\t\t\t\t\tlet attrsList = [];\n\t\t\t\t\tif (changedAttrsList.length) {\n\t\t\t\t\t\tisAttrsChanged = true;\n\t\t\t\t\t\tconst conditionalValues = Object.values(conditionProperties);\n\t\t\t\t\t\tconst list = changedAttrsList.map((attr) => {\n\t\t\t\t\t\t\tif (\n\t\t\t\t\t\t\t\t[...conditionalValues, ...otherNoQuoteProps].includes(attr.name)\n\t\t\t\t\t\t\t) {\n\t\t\t\t\t\t\t\treturn attr;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\treturn { ...attr, value: `\"${attr.value}\"` };\n\t\t\t\t\t\t});\n\t\t\t\t\t\tawait saveAttrsList(list, (error) => {\n\t\t\t\t\t\t\tshowAlert(error?.message, error?.title);\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t\tif (removedAttrsList.length) {\n\t\t\t\t\t\tisAttrsChanged = true;\n\t\t\t\t\t\tawait deleteAttrsList(removedAttrsList, (error) => {\n\t\t\t\t\t\t\tshowAlert(error?.message, error?.title);\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t\tif (isAttrsChanged) {\n\t\t\t\t\t\tattrsList = await fetchAttrsList({\n\t\t\t\t\t\t\tmodel: state.model.fullName,\n\t\t\t\t\t\t\tview: state.selectedView.name,\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t\tconst { changedTranslationList, deletedTranslationList } =\n\t\t\t\t\t\tgetChangedTranslationList(\n\t\t\t\t\t\t\tstate.translationList,\n\t\t\t\t\t\t\tstate.initialTranslationList,\n\t\t\t\t\t\t\tstate.removedTranslationList\n\t\t\t\t\t\t);\n\t\t\t\t\tlet translationList = [];\n\t\t\t\t\tlet isTranslationChanged = false;\n\t\t\t\t\tif (changedTranslationList.length) {\n\t\t\t\t\t\tisTranslationChanged = true;\n\t\t\t\t\t\tawait saveTranslationList(changedTranslationList, (error) => {\n\t\t\t\t\t\t\tshowAlert(error?.message, error?.title);\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t\tif (deletedTranslationList.length) {\n\t\t\t\t\t\tisTranslationChanged = true;\n\t\t\t\t\t\tawait deleteTranslationList(deletedTranslationList, (error) => {\n\t\t\t\t\t\t\tshowAlert(error?.message, error?.title);\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t\tif (isTranslationChanged) {\n\t\t\t\t\t\tconst translationNames = Object.values(state.widgets)\n\t\t\t\t\t\t\t.filter(\n\t\t\t\t\t\t\t\t(widget) => widget.title && widget.title.startsWith(\"studio:\")\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t.map((widget) => widget.title);\n\t\t\t\t\t\ttranslationList = await getTranslationList(translationNames);\n\t\t\t\t\t\tupdate((draft) => {\n\t\t\t\t\t\t\tdraft.translationList = translationList;\n\t\t\t\t\t\t\tdraft.initialTranslationList = translationList;\n\t\t\t\t\t\t\tdraft.removedTranslationList = [];\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t\tif (!extension.length && !state.extensionXML) {\n\t\t\t\t\t\tif (state.extensionView) {\n\t\t\t\t\t\t\tremoveView();\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tupdate((draft) => {\n\t\t\t\t\t\t\t\tdraft.loader = false;\n\t\t\t\t\t\t\t\tconst views = draft.view;\n\t\t\t\t\t\t\t\tif (isAttrsChanged) {\n\t\t\t\t\t\t\t\t\tconst schema = Utils.generateXMLToViewSchema({\n\t\t\t\t\t\t\t\t\t\tview: views.view,\n\t\t\t\t\t\t\t\t\t\tfields: draft.metaFieldStore,\n\t\t\t\t\t\t\t\t\t\textensionXML: views.extensionXML,\n\t\t\t\t\t\t\t\t\t\tattrsList,\n\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t\tdraft.widgets = schema.widgets;\n\t\t\t\t\t\t\t\t\tdraft.initialWidgets = schema.widgets;\n\t\t\t\t\t\t\t\t\tdraft.items = schema.items;\n\t\t\t\t\t\t\t\t\tdraft.initialItems = schema.items;\n\t\t\t\t\t\t\t\t\tdraft.extensionMoves = [];\n\t\t\t\t\t\t\t\t\tdraft.attrsList = attrsList;\n\t\t\t\t\t\t\t\t\tgenerateXpath(draft);\n\t\t\t\t\t\t\t\t\tclearHistory(draft);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t\tconst getExistingExtension = (json) => {\n\t\t\t\t\t\tif (!json) {\n\t\t\t\t\t\t\treturn [];\n\t\t\t\t\t\t}\n\t\t\t\t\t\tconst { elements } = json;\n\t\t\t\t\t\tif (elements[0] && elements[0].elements) {\n\t\t\t\t\t\t\treturn elements[0].elements;\n\t\t\t\t\t\t}\n\t\t\t\t\t};\n\t\t\t\t\tconst form = {\n\t\t\t\t\t\telements: [\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\ttype: \"element\",\n\t\t\t\t\t\t\t\tname: state.widgets[-1].type,\n\t\t\t\t\t\t\t\tattributes: {\n\t\t\t\t\t\t\t\t\tmodel,\n\t\t\t\t\t\t\t\t\tid: `studio-${view.name}`,\n\t\t\t\t\t\t\t\t\ttitle: state.widgets[-1].title,\n\t\t\t\t\t\t\t\t\tname: view.name,\n\t\t\t\t\t\t\t\t\textension: \"true\",\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\telements: [\n\t\t\t\t\t\t\t\t\t...getExistingExtension(state.extensionXML),\n\t\t\t\t\t\t\t\t\t...extension,\n\t\t\t\t\t\t\t\t],\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t],\n\t\t\t\t\t};\n\t\t\t\t\tconst xml = Utils.processXML(\n\t\t\t\t\t\tconvert.json2xml(form, {\n\t\t\t\t\t\t\tcompact: false,\n\t\t\t\t\t\t\tfullTagEmptyElement: false,\n\t\t\t\t\t\t})\n\t\t\t\t\t);\n\t\t\t\t\tlet data = {\n\t\t\t\t\t\txml,\n\t\t\t\t\t\textension: true,\n\t\t\t\t\t\ttype: state.widgets[-1].type,\n\t\t\t\t\t};\n\t\t\t\t\tif (state.extensionView) {\n\t\t\t\t\t\tdata = {\n\t\t\t\t\t\t\t...data,\n\t\t\t\t\t\t\tid: state.extensionView.id,\n\t\t\t\t\t\t\tversion: state.extensionView.version,\n\t\t\t\t\t\t};\n\t\t\t\t\t} else {\n\t\t\t\t\t\tdata = {\n\t\t\t\t\t\t\t...data,\n\t\t\t\t\t\t\tmodel,\n\t\t\t\t\t\t\tname: view.name,\n\t\t\t\t\t\t\ttitle: view.title,\n\t\t\t\t\t\t\txmlId: `studio-${view.name}`,\n\t\t\t\t\t\t};\n\t\t\t\t\t}\n\t\t\t\t\tif (state.extensionView) {\n\t\t\t\t\t\tif (state.extensionView.xml === data.xml) {\n\t\t\t\t\t\t\tupdate((draft) => {\n\t\t\t\t\t\t\t\tdraft.loader = false;\n\t\t\t\t\t\t\t\tif (isAttrsChanged) {\n\t\t\t\t\t\t\t\t\tupdate((draft) => {\n\t\t\t\t\t\t\t\t\t\tdraft.loader = false;\n\t\t\t\t\t\t\t\t\t\tconst views = draft.view;\n\t\t\t\t\t\t\t\t\t\tconst schema = Utils.generateXMLToViewSchema({\n\t\t\t\t\t\t\t\t\t\t\tview: views.view,\n\t\t\t\t\t\t\t\t\t\t\tfields: draft.metaFieldStore,\n\t\t\t\t\t\t\t\t\t\t\textensionXML: views.extensionXML,\n\t\t\t\t\t\t\t\t\t\t\tattrsList,\n\t\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t\t\tdraft.widgets = schema.widgets;\n\t\t\t\t\t\t\t\t\t\tdraft.initialWidgets = schema.widgets;\n\t\t\t\t\t\t\t\t\t\tdraft.items = schema.items;\n\t\t\t\t\t\t\t\t\t\tdraft.initialItems = schema.items;\n\t\t\t\t\t\t\t\t\t\tif (isAttrsChanged) {\n\t\t\t\t\t\t\t\t\t\t\tdraft.attrsList = attrsList;\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\tgenerateXpath(draft);\n\t\t\t\t\t\t\t\t\t\tclearHistory(draft);\n\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tmetaViewService.save(data).then(async (res) => {\n\t\t\t\t\t\tif (res.status === -1) {\n\t\t\t\t\t\t\tshowAlert(res.data?.string);\n\t\t\t\t\t\t} else if (res.data && res.data[0]) {\n\t\t\t\t\t\t\tconst record = res.data[0];\n\t\t\t\t\t\t\tconst { view } = state.view;\n\t\t\t\t\t\t\tconst views = await fetchViews(view);\n\t\t\t\t\t\t\tupdate((draft) => {\n\t\t\t\t\t\t\t\tconst schema = Utils.generateXMLToViewSchema({\n\t\t\t\t\t\t\t\t\tview: views.view,\n\t\t\t\t\t\t\t\t\tfields: draft.metaFieldStore,\n\t\t\t\t\t\t\t\t\textensionXML: views.extensionXML,\n\t\t\t\t\t\t\t\t\tattrsList,\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\tdraft.widgets = schema.widgets;\n\t\t\t\t\t\t\t\tdraft.initialWidgets = schema.widgets;\n\t\t\t\t\t\t\t\tdraft.items = schema.items;\n\t\t\t\t\t\t\t\tdraft.initialItems = schema.items;\n\t\t\t\t\t\t\t\tdraft.exView = res.data[0];\n\t\t\t\t\t\t\t\tdraft.extensionMoves = [];\n\t\t\t\t\t\t\t\tdraft.loader = false;\n\t\t\t\t\t\t\t\tif (isAttrsChanged) {\n\t\t\t\t\t\t\t\t\tdraft.attrsList = attrsList;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tdraft.extensionView = {\n\t\t\t\t\t\t\t\t\t...draft.extensionView,\n\t\t\t\t\t\t\t\t\t...record,\n\t\t\t\t\t\t\t\t\tversion:\n\t\t\t\t\t\t\t\t\t\tviews.extensionXML.id === record.id\n\t\t\t\t\t\t\t\t\t\t\t? views.extensionXML.version\n\t\t\t\t\t\t\t\t\t\t\t: record.version,\n\t\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\t\tgenerateXpath(draft);\n\t\t\t\t\t\t\t\tclearHistory(draft);\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}, [\n\t\tstate,\n\t\tupdate,\n\t\tstartLoader,\n\t\tisTabsPanelEmpty,\n\t\tremoveView,\n\t\tclearHistory,\n\t\tshowAlert,\n\t]);\n\n\tconst handleClose = React.useCallback(() => {\n\t\tupdate((draft) => {\n\t\t\tdraft.dialog = null;\n\t\t});\n\t}, [update]);\n\n\tconst handleNew = React.useCallback(() => {\n\t\tstartLoader();\n\t\treset((draft) => {\n\t\t\tclearHistory(draft);\n\t\t});\n\t}, [reset, startLoader, clearHistory]);\n\n\tReact.useEffect(() => {\n\t\treset((draft) => {\n\t\t\tdraft.modelType = MODEL_TYPE.CUSTOM;\n\t\t});\n\t}, [reset]);\n\n\tconst saveCustomFieldView = React.useCallback(async () => {\n\t\tif (\n\t\t\t(state.customFieldItems || state.removedCustomFields.length) &&\n\t\t\tstate.modelField?.name\n\t\t) {\n\t\t\tif (!isTabsPanelEmpty()) return;\n\t\t\tconst customWidgets = Object.fromEntries(\n\t\t\t\tObject.entries(state.customFieldWidgets).filter(\n\t\t\t\t\t([, value]) =>\n\t\t\t\t\t\t(value.type === ItemTypes.CONTAINER && value.items?.length > 0) ||\n\t\t\t\t\t\tisPanelTab(value) || //allowing empty panel tab\n\t\t\t\t\t\tvalue.type !== ItemTypes.CONTAINER ||\n\t\t\t\t\t\ttypeof value.id === \"number\"\n\t\t\t\t)\n\t\t\t);\n\t\t\tconst propertyValues = Object.values(customWidgets || {}) || [];\n\t\t\tconst uniqueValues = new Set(propertyValues.map((v) => v.name)) || [];\n\t\t\tif (\n\t\t\t\tuniqueValues.size <\n\t\t\t\t(\n\t\t\t\t\t(propertyValues &&\n\t\t\t\t\t\tpropertyValues.filter((f) => f.type !== \"customForm\")) ||\n\t\t\t\t\t[]\n\t\t\t\t).length\n\t\t\t) {\n\t\t\t\tshowAlert(\"Field name should be unique\");\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tstartLoader();\n\t\t\tconst extraProps = {\n\t\t\t\tmodelField: state.modelField.name,\n\t\t\t\tmodel: state.model.fullName,\n\t\t\t};\n\t\t\tconst { fields } = Utils.getCustomModelFields(\n\t\t\t\tstate.customFieldItems,\n\t\t\t\tcustomWidgets,\n\t\t\t\textraProps,\n\t\t\t\ttrue\n\t\t\t);\n\t\t\tif (fields.length || state.removedCustomFields.length) {\n\t\t\t\tif (state.removedCustomFields.length) {\n\t\t\t\t\tconst res = await customFieldService.removeAll(\n\t\t\t\t\t\tstate.removedCustomFields\n\t\t\t\t\t);\n\t\t\t\t\tif (res && res.status === -1) {\n\t\t\t\t\t\tconst { message, title } = res.data || {};\n\t\t\t\t\t\tshowAlert(message, title);\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tconst all = fields.map((field) => customFieldService.save(field));\n\t\t\t\tconst res = await Promise.all(all);\n\t\t\t\tconst failedRes = res && res.find((r) => r.status === -1);\n\t\t\t\tif (failedRes && failedRes.data) {\n\t\t\t\t\tconst { title, message } = failedRes.data || {};\n\t\t\t\t\tlet errorMessage = message;\n\t\t\t\t\tif (\n\t\t\t\t\t\ttitle &&\n\t\t\t\t\t\ttitle.includes(translate(\"Unique constraint violation\"))\n\t\t\t\t\t) {\n\t\t\t\t\t\terrorMessage = \"Field name should be unique\";\n\t\t\t\t\t}\n\t\t\t\t\tshowAlert(errorMessage);\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tfetchCustomFields(state.modelField, state.model).then((res) => {\n\t\t\t\t\tconst { data = [] } = res;\n\t\t\t\t\tconst schema = generateCustomModelSchema(\n\t\t\t\t\t\tdata,\n\t\t\t\t\t\tundefined,\n\t\t\t\t\t\t\"\",\n\t\t\t\t\t\t\"customForm\"\n\t\t\t\t\t);\n\t\t\t\t\tupdate((draft) => {\n\t\t\t\t\t\tconst newId = _.uniqueId();\n\t\t\t\t\t\tdraft.customFieldWidgets =\n\t\t\t\t\t\t\tObject.keys(schema.widgets)?.length > 2\n\t\t\t\t\t\t\t\t? schema.widgets\n\t\t\t\t\t\t\t\t: {\n\t\t\t\t\t\t\t\t\t\t...schema.widgets,\n\t\t\t\t\t\t\t\t\t\t[newId]: {\n\t\t\t\t\t\t\t\t\t\t\tname: `panel${newId}`,\n\t\t\t\t\t\t\t\t\t\t\t...PANEL_PROPS,\n\t\t\t\t\t\t\t\t\t\t\tmodel: draft.model.fullName,\n\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t  };\n\t\t\t\t\t\tdraft.customFieldItems =\n\t\t\t\t\t\t\tschema.items?.length > 0 ? schema.items : [`${newId}`];\n\t\t\t\t\t\tdraft.customFields = data;\n\t\t\t\t\t\tdraft.loader = false;\n\t\t\t\t\t\tdraft.removedCustomFields = [];\n\t\t\t\t\t\tclearHistory(draft);\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\tcloseLoader();\n\t\t\t\tconst schema = generateCustomModelSchema(\n\t\t\t\t\t[],\n\t\t\t\t\tundefined,\n\t\t\t\t\t\"\",\n\t\t\t\t\t\"customForm\"\n\t\t\t\t);\n\t\t\t\tconst newId = _.uniqueId();\n\t\t\t\tupdate((draft) => {\n\t\t\t\t\tdraft.customFieldWidgets = {\n\t\t\t\t\t\t...schema.widgets,\n\t\t\t\t\t\t[newId]: {\n\t\t\t\t\t\t\tname: `panel${newId}`,\n\t\t\t\t\t\t\t...PANEL_PROPS,\n\t\t\t\t\t\t\tmodel: draft.model.fullName,\n\t\t\t\t\t\t},\n\t\t\t\t\t};\n\t\t\t\t\tdraft.customFieldItems = [`${newId}`];\n\t\t\t\t\tdraft.customFieldHasChanges = false;\n\t\t\t\t\tclearHistory(draft);\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t}, [\n\t\tupdate,\n\t\tcloseLoader,\n\t\tstate,\n\t\tstartLoader,\n\t\tisTabsPanelEmpty,\n\t\tclearHistory,\n\t\tshowAlert,\n\t]);\n\n\tconst handleConfirmationClose = React.useCallback(() => {\n\t\tsetDeleteConfirmationDialog(false);\n\t}, []);\n\n\tconst deleteView = React.useCallback(() => {\n\t\tsetDeleteConfirmationDialog(true);\n\t}, []);\n\n\tconst handleRemoveConfirmation = React.useCallback(() => {\n\t\thandleConfirmationClose();\n\t\tremoveView();\n\t}, [removeView, handleConfirmationClose]);\n\n\tconst handleSidePanelToggle = React.useCallback(() => {\n\t\tupdate((draft) => {\n\t\t\tdraft.sidePanel = !draft.sidePanel;\n\t\t});\n\t}, [update]);\n\n\tfunction renderDialog() {\n\t\tconst { dialog } = state;\n\t\treturn (\n\t\t\tdialog && (\n\t\t\t\t<Dialog open={Boolean(translate(dialog.message))}>\n\t\t\t\t\t<DialogTitle>{translate(dialog.title || \"Alert\")}</DialogTitle>\n\t\t\t\t\t<DialogContent>\n\t\t\t\t\t\t<div\n\t\t\t\t\t\t\tdangerouslySetInnerHTML={{ __html: translate(dialog.message) }}\n\t\t\t\t\t\t></div>\n\t\t\t\t\t</DialogContent>\n\t\t\t\t\t<DialogActions>\n\t\t\t\t\t\t<Button onClick={handleClose} color=\"primary\" autoFocus>\n\t\t\t\t\t\t\tOK\n\t\t\t\t\t\t</Button>\n\t\t\t\t\t</DialogActions>\n\t\t\t\t</Dialog>\n\t\t\t)\n\t\t);\n\t}\n\n\treturn (\n\t\t<React.Fragment>\n\t\t\t{renderDialog()}\n\t\t\t<Toolbar\n\t\t\t\tupdate={update}\n\t\t\t\tsaveView={saveView}\n\t\t\t\tsaveCustomFieldView={saveCustomFieldView}\n\t\t\t\tremoveView={deleteView}\n\t\t\t\tmodel={state.model}\n\t\t\t\textensionView={state.extensionView}\n\t\t\t\tmodelType={state.modelType}\n\t\t\t\tonNew={handleNew}\n\t\t\t\tmodelField={state.modelField}\n\t\t\t\tcustomModel={state.customModel}\n\t\t\t\tselectedView={state.selectedView}\n\t\t\t\tstartLoader={startLoader}\n\t\t\t\terrorList={state.errorList}\n\t\t\t\tentityType={state.entityType}\n\t\t\t\tmetaFieldStore={state.metaFieldStore}\n\t\t\t\tundo={undo}\n\t\t\t\tredo={redo}\n\t\t\t\trefresh={refresh}\n\t\t\t\tpastLength={state.past.length}\n\t\t\t\tfutureLength={state.future.length}\n\t\t\t\tclearHistory={clearHistory}\n\t\t\t\tonSidePanelToggle={handleSidePanelToggle}\n\t\t\t\treset={reset}\n\t\t\t/>\n\t\t\t<DeleteConfirmation\n\t\t\t\topen={deleteConfirmationDialog}\n\t\t\t\tonClose={handleConfirmationClose}\n\t\t\t\tonOk={handleRemoveConfirmation}\n\t\t\t\tmessage=\"Are you sure? Do you want to delete it?\"\n\t\t\t/>\n\t\t</React.Fragment>\n\t);\n}\n\nexport default React.memo(ToolbarContainer);\n","import React from \"react\";\nimport { Grid, useMediaQuery, useTheme } from \"@material-ui/core\";\nimport {\n\tmakeStyles,\n\tcreateTheme,\n\tThemeProvider,\n} from \"@material-ui/core/styles\";\nimport { DndProvider } from \"react-dnd\";\nimport Backend from \"react-dnd-html5-backend\";\n\nimport SidePanel from \"./Panels/SidePanel\";\nimport MainPanel from \"./Panels/MainPanel\";\nimport Toolbar from \"./Toolbar/ToolbarContainer\";\nimport StudioProvider, { useStore } from \"./store/context\";\nimport {\n\tfetchLanguages,\n\tfetchUserPreferences,\n\tgetEnableAppBuilder,\n} from \"./Toolbar/api\";\n\nconst useStyles = makeStyles({\n\tcontainer: {\n\t\tdisplay: \"flex\",\n\t\theight: \"100%\",\n\t\tflexDirection: \"column\",\n\t\tflexWrap: \"nowrap\",\n\t},\n\ttoolbarWrapper: {\n\t\tflex: 0,\n\t\tdisplay: \"flex\",\n\t\tflexWrap: \"wrap\",\n\t},\n\tpanelContainer: {\n\t\tdisplay: \"flex\",\n\t\tflex: 1,\n\t\toverflow: \"hidden\",\n\t},\n\tsidePanel: {\n\t\theight: \"100%\",\n\t\t\".modern-dark &\": {\n\t\t\tbackgroundColor: \"#202124\",\n\t\t},\n\t},\n\tmainPanel: {\n\t\theight: \"100%\",\n\t\toverflow: \"auto\",\n\t\t\".modern-dark &\": {\n\t\t\tbackgroundColor: \"#202124\",\n\t\t},\n\t},\n});\n\nconst theme = createTheme({\n\ttypography: {\n\t\tfontFamily: '\"Open Sans\", \"Helvetica Neue\", Helvetica, Arial, sans-serif',\n\t},\n});\n\nfunction AppContent() {\n\tconst classes = useStyles();\n\tconst theme = useTheme();\n\tconst { state, update } = useStore();\n\tconst { sidePanel = true } = state;\n\tconst isResponsive = useMediaQuery(theme.breakpoints.down(\"sm\"));\n\tconst gridRef = React.useRef();\n\n\tReact.useEffect(() => {\n\t\tfetchLanguages().then((result) => {\n\t\t\tupdate((draft) => {\n\t\t\t\tdraft.languageList = [...result];\n\t\t\t});\n\t\t});\n\t\tfetchUserPreferences().then((result) => {\n\t\t\tif ((result?.theme || \"\").includes(\"dark\")) {\n\t\t\t\tdocument.body.className = result?.theme;\n\t\t\t}\n\t\t});\n\n\t\tgetEnableAppBuilder().then((res) => {\n\t\t\tupdate((draft) => {\n\t\t\t\tdraft.enableAppBuilder = res;\n\t\t\t});\n\t\t});\n\t}, [update]);\n\n\tReact.useEffect(() => {\n\t\tupdate((draft) => {\n\t\t\tdraft.sidePanel = !isResponsive;\n\t\t});\n\t}, [isResponsive, update]);\n\n\tReact.useEffect(() => {\n\t\tconst grid = gridRef.current;\n\t\tgrid && grid.focus();\n\t}, []);\n\n\treturn (\n\t\t<Grid container className={classes.container} tabIndex={0} ref={gridRef}>\n\t\t\t<Grid item xs={12} className={classes.toolbarWrapper}>\n\t\t\t\t<Toolbar />\n\t\t\t</Grid>\n\t\t\t<Grid container className={classes.panelContainer}>\n\t\t\t\t{sidePanel && (\n\t\t\t\t\t<Grid item xs={isResponsive ? 4 : 3} className={classes.sidePanel}>\n\t\t\t\t\t\t<SidePanel />\n\t\t\t\t\t</Grid>\n\t\t\t\t)}\n\t\t\t\t<Grid\n\t\t\t\t\titem\n\t\t\t\t\txs={sidePanel ? (isResponsive ? 8 : 9) : 12}\n\t\t\t\t\tclassName={classes.mainPanel}\n\t\t\t\t>\n\t\t\t\t\t<MainPanel />\n\t\t\t\t</Grid>\n\t\t\t</Grid>\n\t\t</Grid>\n\t);\n}\n\nexport default function App() {\n\treturn (\n\t\t<StudioProvider>\n\t\t\t<DndProvider backend={Backend}>\n\t\t\t\t<ThemeProvider theme={theme}>\n\t\t\t\t\t<AppContent />\n\t\t\t\t</ThemeProvider>\n\t\t\t</DndProvider>\n\t\t</StudioProvider>\n\t);\n}\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport \"./index.css\";\nimport \"./theme.css\";\nimport App from \"./App\";\n\nReactDOM.render(<App />, document.getElementById(\"root\"));\n","import axios from \"axios\";\n\nconst headers = {\n\t\"X-Requested-With\": \"XMLHttpRequest\",\n\t\"Content-Type\": \"application/json\",\n\tAccept: \"application/json\",\n};\nlet lastCookieString;\nlet lastCookies = {};\n\nfunction readCookie(name) {\n\tlet cookieString = document.cookie || \"\";\n\tif (cookieString !== lastCookieString) {\n\t\tlastCookieString = cookieString;\n\t\tlastCookies = cookieString.split(\"; \").reduce((obj, value) => {\n\t\t\tlet parts = value.split(\"=\");\n\t\t\tobj[parts[0]] = parts[1];\n\t\t\treturn obj;\n\t\t}, {});\n\t}\n\treturn lastCookies[name];\n}\n\nclass service {\n\tconstructor(props) {\n\t\tthis.baseURL =\n\t\t\tprocess.env.NODE_ENV === \"production\" ? \"../../\" : \"/axelor-erp/\";\n\t}\n\n\trequest(url, method, data) {\n\t\tlet options = {};\n\t\tif (method !== \"get\") {\n\t\t\toptions[\"data\"] = data;\n\t\t}\n\t\treturn axios({\n\t\t\tmethod: method,\n\t\t\tbaseURL: this.baseURL,\n\t\t\theaders: {\n\t\t\t\t...headers,\n\t\t\t\t\"X-CSRF-Token\": readCookie(\"CSRF-TOKEN\"),\n\t\t\t},\n\t\t\turl,\n\t\t\t...options,\n\t\t});\n\t}\n\n\tinterceptor(url, method, data) {\n\t\treturn this.request(url, method, data)\n\t\t\t.then((result) => {\n\t\t\t\tif (result.status === 200) {\n\t\t\t\t\treturn result.data || { status: result.status };\n\t\t\t\t} else if (result.status === 401) {\n\t\t\t\t\tconst credential = localStorage.getItem(\"credential\");\n\t\t\t\t\tif (credential) {\n\t\t\t\t\t\tconst { username, password } = JSON.parse(credential);\n\t\t\t\t\t\treturn this.login(username, password).then((res) => {\n\t\t\t\t\t\t\tif (res.status === 200) {\n\t\t\t\t\t\t\t\treturn this.interceptor(url, method, data);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\treturn Promise.resolve(\"Error\");\n\t\t\t})\n\t\t\t.catch((e) => {\n\t\t\t\tif (e.response && e.response.status === 401) {\n\t\t\t\t\treturn this.relogin(url, method, data);\n\t\t\t\t}\n\t\t\t});\n\t}\n\n\trelogin(url, method, data) {\n\t\tconst credential = localStorage.getItem(\"credential\");\n\t\tif (credential) {\n\t\t\tconst { username, password } = JSON.parse(credential);\n\t\t\treturn this.login(username, password).then((res) => {\n\t\t\t\tif (res.status === 200) {\n\t\t\t\t\treturn this.interceptor(url, method, data);\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t}\n\n\tget(url) {\n\t\treturn this.interceptor(url, \"get\");\n\t}\n\n\tpost(url, data = {}) {\n\t\treturn this.interceptor(url, \"post\", data);\n\t}\n\n\tdelete(url, data) {\n\t\treturn this.interceptor(url, \"delete\", data);\n\t}\n\n\tlogin(username, password) {\n\t\tconst data = { username, password };\n\t\treturn this.interceptor(\"login.jsp\", \"post\", data).then((res) => {\n\t\t\tif (res.status === 200) {\n\t\t\t\tlocalStorage.setItem(\n\t\t\t\t\t\"credential\",\n\t\t\t\t\tJSON.stringify({ username, password })\n\t\t\t\t);\n\t\t\t}\n\t\t\treturn { status: res.status };\n\t\t});\n\t}\n\n\tlogout() {\n\t\treturn this.interceptor(\"logout\").then(() => {\n\t\t\tlocalStorage.removeItem(\"credential\");\n\t\t});\n\t}\n}\n\nexport default service;\n","import httpService from \"./http\";\n\nconst joinURL = (model, subURL) => {\n\treturn `ws/rest/${model}/${subURL}`;\n};\n\nconst services = new httpService();\n\nclass AxelorService {\n\tconstructor(props) {\n\t\tthis.model = props.model;\n\t}\n\n\tsearch({ fields, sortBy, data, limit, offset }) {\n\t\tconst _subURL = `search`;\n\t\tconst url = joinURL(this.model, _subURL);\n\t\treturn services.post(url, { fields, sortBy, data, limit, offset });\n\t}\n\n\tfetch(id, data) {\n\t\tconst _subURL = `${id}/fetch`;\n\t\tconst url = joinURL(this.model, _subURL);\n\t\treturn services.post(url, data);\n\t}\n\n\tview(data) {\n\t\tconst url = \"/ws/meta/view\";\n\t\treturn services.post(url, data);\n\t}\n\n\tsave(data) {\n\t\tconst url = joinURL(this.model, \"\");\n\t\treturn services.post(url, { data });\n\t}\n\n\tsaveAll(data) {\n\t\tconst url = joinURL(this.model, \"\");\n\t\treturn services.post(url, { records: data });\n\t}\n\n\tremoveAll(records) {\n\t\tconst url = joinURL(this.model, \"removeAll\");\n\t\treturn services.post(url, { records });\n\t}\n\n\tlogin(username, password) {\n\t\treturn services.login(username, password);\n\t}\n\n\tlogout() {\n\t\treturn services.logout();\n\t}\n\n\taction(data) {\n\t\tconst url = \"ws/action\";\n\t\treturn services.post(url, data);\n\t}\n\n\tinfo() {\n\t\tconst url = \"ws/app/info\";\n\t\treturn services.get(url);\n\t}\n}\n\nexport default AxelorService;\n","import React from \"react\";\nimport produce from \"immer\";\nimport _ from \"lodash\";\n\nimport {\n\tTYPE,\n\tIDS,\n\tPANEL_TYPE,\n\tMODEL_TYPE,\n\tENTITY_TYPE,\n\tPANEL_PROPS,\n} from \"../constants\";\nimport {\n\treorderGrid,\n\tcheckExclusive,\n\tarrangeGrid,\n\tcheckGridEmptyCells,\n\tsetErrorList,\n\tcaseConverter,\n} from \"../utils\";\nimport { original } from \"immer\";\nimport { generateExtension } from \"./computeXML\";\nimport { generateXpath } from \"./xpathGenerator\";\nimport { validateParentPanelItems, validateOnRemove } from \"./validation\";\nimport Utils, { isExtensionView, translate } from \"./../utils\";\n\nconst StoreContext = React.createContext();\n\nfunction useMutableState(defaultValue) {\n\tconst [state, setState] = React.useState(defaultValue);\n\treturn [\n\t\tstate,\n\t\tReact.useCallback((updater) => setState(produce(updater)), [setState]),\n\t];\n}\n\nfunction StoreProvider({ children }) {\n\t/*\n\tWARNING: Never nest two setState calls(windows-all_browsers/firefox-linux bugs),\n\tEx: funtion NeverDoIt(){\n\t\tsetState((draft)=>{\n\t\t\t...some code...\n\t\t\tonRemove()   <-- this function calls setState within it\n\t\t})\n\t}\n\t*/\n\tconst [state, setState] = useMutableState({\n\t\tfuture: [],\n\t\tpast: [],\n\t\ttitle: \"\",\n\t\titems: [],\n\t\twidgets: null,\n\t\tdragWidget: null,\n\t\teditWidget: null,\n\t\thoverWidget: null,\n\t\tinitialWidgets: null,\n\t\tinitialItems: null,\n\t\ttabIndex: 0,\n\t\tmodelType: \"BASE\",\n\t\tcustomFields: [],\n\t\tcustomFieldItems: [],\n\t\tcustomFieldWidgets: null,\n\t\tmodelField: null,\n\t\thoverAttr: {},\n\t\tloader: false,\n\t\tremovedCustomFields: [],\n\t\terrorList: {},\n\t\tentityType: ENTITY_TYPE.META,\n\t\tactualType: null,\n\t\textensionMoves: [],\n\t\tsidePanel: true,\n\t\tattrsList: [],\n\t\tremovedTranslationList: [],\n\t});\n\tconst { widgets } = state;\n\n\tfunction getAllChildrenIds(id, widgetType) {\n\t\tconst widgets =\n\t\t\twidgetType === \"customField\" ? state.customFieldWidgets : state.widgets;\n\t\tconst collectIds = (parent) => {\n\t\t\tconst { items = [] } = widgets[parent];\n\t\t\treturn items.reduce(\n\t\t\t\t(all, item) => all.concat(collectIds(item)),\n\t\t\t\t[parent]\n\t\t\t);\n\t\t};\n\t\treturn collectIds(id);\n\t}\n\n\tfunction onExtension(moveIds, state) {\n\t\tif (state.exView && !Utils.isCreatedFromStudio(state.exView)) {\n\t\t\tgenerateExtension(moveIds, state);\n\t\t}\n\t}\n\n\t// update widget properties\n\t// pass draft if calling from inside another immer setState\n\tfunction onWidgetChange({ id, props, reset = false }, draft) {\n\t\tconst callbackfn = (draft) => {\n\t\t\tgenerateHistory(draft);\n\t\t\tconst isCustomField = draft.editWidgetType === \"customField\";\n\t\t\tconst extendList = [];\n\t\t\tsetErrorList(props, draft, id, isCustomField);\n\t\t\tconst widgets =\n\t\t\t\tdraft.editWidgetType === \"customField\"\n\t\t\t\t\t? draft.customFieldWidgets\n\t\t\t\t\t: draft.widgets;\n\t\t\tif (reset) {\n\t\t\t\twidgets[id] = {};\n\t\t\t}\n\t\t\tconst widget =\n\t\t\t\tdraft.editWidgetType === \"customField\" && draft.customFieldWidgets\n\t\t\t\t\t? draft.customFieldWidgets[id]\n\t\t\t\t\t: draft.widgets[id];\n\t\t\tif (widget) {\n\t\t\t\tObject.keys(props).forEach((key) => {\n\t\t\t\t\tlet value = props[key];\n\t\t\t\t\tif (/^[a-z]/i.test(widget[\"name\"])) {\n\t\t\t\t\t\twidget[\"name\"] = caseConverter(\n\t\t\t\t\t\t\twidget[\"name\"],\n\t\t\t\t\t\t\t!(props[\"type\"] === TYPE.form)\n\t\t\t\t\t\t);\n\t\t\t\t\t}\n\t\t\t\t\tlet doChange = true;\n\t\t\t\t\t// add change in move\n\t\t\t\t\tconst _value = widget[key] === undefined ? \"\" : widget[key];\n\t\t\t\t\tif (_value !== value) {\n\t\t\t\t\t\tconst xPath = id === -1 ? \"/\" : widgets[id].xPath;\n\t\t\t\t\t\tlet _value = [undefined, null].includes(value) ? \"\" : value;\n\n\t\t\t\t\t\tisExtensionView(state) &&\n\t\t\t\t\t\t\textendList.push({\n\t\t\t\t\t\t\t\tname: \"attribute\",\n\t\t\t\t\t\t\t\ttarget: xPath,\n\t\t\t\t\t\t\t\tattributes: {\n\t\t\t\t\t\t\t\t\tname: Utils.keyReplacer(key, MODEL_TYPE.BASE),\n\t\t\t\t\t\t\t\t\tvalue: Utils.valueConverter(_value, key),\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\tid,\n\t\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t\tif (key === \"colSpan\") {\n\t\t\t\t\t\tconst parentId = Object.keys(widgets).find(\n\t\t\t\t\t\t\t(x) => (widgets[x].items || []).indexOf(id) > -1\n\t\t\t\t\t\t);\n\t\t\t\t\t\tvalue = Math.min(\n\t\t\t\t\t\t\tNumber((widgets[parentId] && widgets[parentId].cols) || value),\n\t\t\t\t\t\t\tvalue\n\t\t\t\t\t\t);\n\t\t\t\t\t\tif (widgets && parentId && widgets[parentId].type === TYPE.panel) {\n\t\t\t\t\t\t\tconst { itemSpan } = JSON.parse(\n\t\t\t\t\t\t\t\t(widgets[parentId] || {}).widgetAttrs || \"{}\"\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\tvalue = itemSpan || value;\n\t\t\t\t\t\t}\n\t\t\t\t\t} else if (key === \"cols\" && value) {\n\t\t\t\t\t\tvalue = Math.min(12, Number(value));\n\t\t\t\t\t} else if (key === \"widgetAttrs\") {\n\t\t\t\t\t\tconst newValue = JSON.parse(value || \"{}\");\n\t\t\t\t\t\tconst items = widgets[id].items;\n\t\t\t\t\t\titems &&\n\t\t\t\t\t\t\titems.forEach((item) => {\n\t\t\t\t\t\t\t\tconst child = widgets[item];\n\t\t\t\t\t\t\t\tlet widgetAttrs = JSON.parse(child.widgetAttrs || \"{}\");\n\t\t\t\t\t\t\t\tif (!widgetAttrs[\"colSpan\"]) {\n\t\t\t\t\t\t\t\t\tchild.colSpan = newValue.itemSpan;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t\tif (doChange) {\n\t\t\t\t\t\twidget[key] = value;\n\t\t\t\t\t\tkey === \"layout\" &&\n\t\t\t\t\t\t\tvalue === PANEL_TYPE.stack &&\n\t\t\t\t\t\t\t(widget.cols = 12);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t\tif (\n\t\t\t\tdraft.editWidgetType !== \"customField\" &&\n\t\t\t\tdraft.modelType === MODEL_TYPE.BASE\n\t\t\t) {\n\t\t\t\tonExtension(extendList, draft);\n\t\t\t\tgenerateXpath(draft);\n\t\t\t}\n\t\t};\n\n\t\tif (draft) {\n\t\t\tcallbackfn(draft);\n\t\t} else {\n\t\t\tsetState(callbackfn);\n\t\t}\n\t}\n\n\t// remove widget\n\tfunction onRemove(panelId, index, id, widgetType) {\n\t\tconst extendList = [];\n\t\tconst isCustomField = widgetType === \"customField\";\n\t\tlet result = window.confirm(translate(\"Sure want to delete?\"));\n\t\tif (!result) return;\n\t\tsetState((draft) => {\n\t\t\tgenerateHistory(draft);\n\t\t\tconst widgets =\n\t\t\t\twidgetType === \"customField\" ? draft.customFieldWidgets : draft.widgets;\n\t\t\tconst widgetItems =\n\t\t\t\twidgetType === \"customField\" ? \"customFieldItems\" : \"items\";\n\t\t\tconst widget = widgets[id];\n\n\t\t\tif (!isCustomField && draft.modelType === MODEL_TYPE.BASE) {\n\t\t\t\tconst index = draft.metaFieldStore.findIndex(\n\t\t\t\t\t(f) =>\n\t\t\t\t\t\t(f.typeName === widget.typeName || widget.type === \"field\") &&\n\t\t\t\t\t\tf.name === widget.name\n\t\t\t\t);\n\t\t\t\tif (index !== -1) {\n\t\t\t\t\tdraft.metaFields.unshift(draft.metaFieldStore[index]);\n\t\t\t\t}\n\t\t\t}\n\t\t\tconst isPanel = panelId && IDS.form !== panelId;\n\t\t\tindex = (isPanel ? widgets[panelId].items : draft[widgetItems]).findIndex(\n\t\t\t\t(x) => `${x}` === `${id}`\n\t\t\t);\n\t\t\tif (index > -1 && widgets[id]) {\n\t\t\t\tlet ids = getAllChildrenIds(id, widgetType);\n\t\t\t\tids.forEach((id) => {\n\t\t\t\t\tif (isCustomField || state.modelType === MODEL_TYPE.CUSTOM) {\n\t\t\t\t\t\tconst widget = widgets[id];\n\t\t\t\t\t\tif (widget.id && typeof widget.id !== \"symbol\") {\n\t\t\t\t\t\t\tdraft.removedCustomFields.push({\n\t\t\t\t\t\t\t\tid: widget.id,\n\t\t\t\t\t\t\t\tversion: widget.version,\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\tconst childrenIds = [...ids];\n\t\t\t\tif (isPanel) {\n\t\t\t\t\tif (\n\t\t\t\t\t\twidgets[panelId].layout === PANEL_TYPE.grid &&\n\t\t\t\t\t\t![TYPE.menubar, TYPE.toolbar].includes(widgets[panelId].type)\n\t\t\t\t\t) {\n\t\t\t\t\t\tconst arrangeItems = arrangeGrid(\n\t\t\t\t\t\t\tdraft,\n\t\t\t\t\t\t\t{ panelId, index, id },\n\t\t\t\t\t\t\twidgetType\n\t\t\t\t\t\t);\n\t\t\t\t\t\tids = ids.concat(arrangeItems.ids);\n\t\t\t\t\t\tisExtensionView(state) &&\n\t\t\t\t\t\t\textendList.push(...arrangeItems.extendList);\n\t\t\t\t\t} else {\n\t\t\t\t\t\twidgets[panelId].items.splice(index, 1);\n\t\t\t\t\t}\n\t\t\t\t\t// draft.widgets[panelId].items.splice(index, 1);\n\t\t\t\t} else {\n\t\t\t\t\tdraft[widgetItems].splice(index, 1);\n\t\t\t\t}\n\t\t\t\tif (widgets[id]) {\n\t\t\t\t\tisExtensionView(state) &&\n\t\t\t\t\t\textendList.push({ name: \"replace\", target: widgets[id].xPath });\n\t\t\t\t}\n\t\t\t\tids.forEach((id) => {\n\t\t\t\t\tif (widgets[id]) {\n\t\t\t\t\t\tif (!childrenIds.includes(id)) {\n\t\t\t\t\t\t\tisExtensionView(state) &&\n\t\t\t\t\t\t\t\textendList.push({ name: \"replace\", target: widgets[id].xPath });\n\t\t\t\t\t\t}\n\t\t\t\t\t\tdelete widgets[id];\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\tif (ids.indexOf(draft.editWidget) > -1) {\n\t\t\t\t\tdraft.editWidget = null;\n\t\t\t\t}\n\t\t\t}\n\t\t\tvalidateOnRemove(draft, id);\n\t\t\tif (!isCustomField && draft.modelType === MODEL_TYPE.BASE) {\n\t\t\t\tvalidateParentPanelItems(draft, panelId);\n\t\t\t\tonExtension(extendList, draft);\n\t\t\t\tgenerateXpath(draft);\n\t\t\t}\n\t\t});\n\t}\n\n\t// select widget, to open properties editor\n\t// pass draft if calling from inside another immer setState\n\tfunction onSelect({ id = null, type = null }, draft) {\n\t\tconst callbackfn = (draft) => {\n\t\t\tdraft.editWidget = id;\n\t\t\tdraft.tabIndex = 0;\n\t\t\tdraft.editWidgetType = type;\n\t\t};\n\t\tif (draft) {\n\t\t\tcallbackfn(draft);\n\t\t} else {\n\t\t\tsetState(callbackfn);\n\t\t}\n\t}\n\n\t// pass draft if calling from inside another immer setState\n\tfunction addTabPanel({ attrs, id }, draft) {\n\t\tconst panelId = _.uniqueId();\n\t\tconst callbackfn = (draft) => {\n\t\t\tconst widgets =\n\t\t\t\tdraft.modelType === MODEL_TYPE.BASE ? \"customFieldWidgets\" : \"widgets\";\n\t\t\tdraft[widgets][id] = {\n\t\t\t\t...attrs,\n\t\t\t\titems: [...(attrs.items || []), panelId],\n\t\t\t};\n\t\t\tdraft[widgets][panelId] = {\n\t\t\t\t...PANEL_PROPS,\n\t\t\t\tname: `panel${panelId}`,\n\t\t\t\ttitle: \"Tab\",\n\t\t\t\twidgetAttrs: JSON.stringify({ tab: \"true\" }),\n\t\t\t};\n\t\t};\n\t\tif (draft) {\n\t\t\tcallbackfn(draft);\n\t\t} else {\n\t\t\tsetState(callbackfn);\n\t\t}\n\t\tonWidgetChange(\n\t\t\t{\n\t\t\t\tid,\n\t\t\t\tprops: {\n\t\t\t\t\tcurrent: panelId,\n\t\t\t\t},\n\t\t\t},\n\t\t\tdraft\n\t\t);\n\t}\n\n\t// set current dragging widget\n\tfunction onDrag(id = null, { props, isDrop } = {}) {\n\t\tsetState((draft) => {\n\t\t\tconst _extendList = [];\n\t\t\tconst { attrs = {} } = props;\n\t\t\tconst _attrs = {\n\t\t\t\ttype: attrs.type,\n\t\t\t\ttitle: attrs.label,\n\t\t\t\tname: attrs.name,\n\t\t\t\trelationship: attrs.relationship,\n\t\t\t\tmappedBy: attrs.mappedBy,\n\t\t\t\t...attrs,\n\t\t\t};\n\t\t\tif (attrs && attrs.name === \"string\") {\n\t\t\t\t_attrs[\"visibleInGrid\"] = true;\n\t\t\t}\n\t\t\tif (attrs && attrs.name === \"selection\") {\n\t\t\t\t_attrs[\"updateSelection\"] = true;\n\t\t\t}\n\t\t\tconst {\n\t\t\t\tdragWidget,\n\t\t\t\thoverWidget,\n\t\t\t\teditWidget,\n\t\t\t\tdragWidgetProps,\n\t\t\t\twidgets,\n\t\t\t\tcustomFieldWidgets,\n\t\t\t} = draft;\n\t\t\tdraft.dragWidget = null;\n\t\t\tdraft.hoverWidget = null;\n\t\t\tconst extraAttr = { ...draft.hoverAttr };\n\t\t\tif (_attrs.widgetAttrs && extraAttr.widgetAttrs) {\n\t\t\t\tconst _eWidgetAttr = JSON.parse(extraAttr.widgetAttrs || \"{}\");\n\t\t\t\tconst _attrsWidgetAttr = JSON.parse(_attrs.widgetAttrs || \"{}\");\n\t\t\t\textraAttr.widgetAttrs = JSON.stringify({\n\t\t\t\t\t..._attrsWidgetAttr,\n\t\t\t\t\t..._eWidgetAttr,\n\t\t\t\t});\n\t\t\t}\n\t\t\tdraft.dragWidgetProps = Object.assign({}, props, {\n\t\t\t\tattrs: { ..._attrs, ...extraAttr },\n\t\t\t});\n\n\t\t\tif (editWidget && editWidget === dragWidget) {\n\t\t\t\tdraft.editWidget = null;\n\t\t\t}\n\t\t\tif (isDrop) {\n\t\t\t\tif (!hoverWidget || !dragWidgetProps) return;\n\t\t\t\tgenerateHistory(draft);\n\t\t\t\tconst index = draft.metaFields.findIndex(\n\t\t\t\t\t(f) =>\n\t\t\t\t\t\tf.typeName === dragWidgetProps.attrs.typeName &&\n\t\t\t\t\t\tf.name === dragWidgetProps.attrs.name\n\t\t\t\t);\n\t\t\t\tif (index !== -1) {\n\t\t\t\t\tdraft.metaFields.splice(index, 1);\n\t\t\t\t}\n\t\t\t\tdragWidgetProps.attrs = {\n\t\t\t\t\t...dragWidgetProps.attrs,\n\t\t\t\t\t...draft.hoverAttr,\n\t\t\t\t};\n\t\t\t\tconst { extendList, newId } = reorderGrid({\n\t\t\t\t\thoverWidget,\n\t\t\t\t\tdragWidgetProps,\n\t\t\t\t})(draft);\n\t\t\t\t_extendList.push(...extendList);\n\t\t\t\tlet hoverPanel;\n\t\t\t\tif (hoverWidget._type !== \"customField\") {\n\t\t\t\t\thoverPanel = draft.widgets[hoverWidget.panelId];\n\t\t\t\t}\n\t\t\t\tif (\n\t\t\t\t\thoverWidget.panelId &&\n\t\t\t\t\t![TYPE.menubar, TYPE.toolbar].includes(hoverPanel?.type)\n\t\t\t\t) {\n\t\t\t\t\tconst { extendList = [] } = checkGridEmptyCells(\n\t\t\t\t\t\tdraft,\n\t\t\t\t\t\thoverWidget.panelId,\n\t\t\t\t\t\thoverWidget._type\n\t\t\t\t\t);\n\t\t\t\t\t_extendList.push(...extendList);\n\t\t\t\t}\n\t\t\t\tif (\n\t\t\t\t\tdragWidgetProps.panelId &&\n\t\t\t\t\thoverWidget.panelId !== dragWidgetProps.panelId &&\n\t\t\t\t\t![TYPE.menubar, TYPE.toolbar].includes(hoverPanel?.type)\n\t\t\t\t) {\n\t\t\t\t\tconst { extendList = [] } = checkGridEmptyCells(\n\t\t\t\t\t\tdraft,\n\t\t\t\t\t\tdragWidgetProps.panelId,\n\t\t\t\t\t\thoverWidget._type\n\t\t\t\t\t);\n\t\t\t\t\t_extendList.push(...extendList);\n\t\t\t\t}\n\t\t\t\tif (\n\t\t\t\t\thoverWidget._type !== \"customField\" &&\n\t\t\t\t\tdraft.modelType === MODEL_TYPE.BASE\n\t\t\t\t) {\n\t\t\t\t\tvalidateParentPanelItems(draft, dragWidgetProps.panelId);\n\t\t\t\t\tvalidateParentPanelItems(draft, hoverWidget.panelId);\n\t\t\t\t\tonExtension(_extendList, draft);\n\t\t\t\t\tgenerateXpath(draft);\n\t\t\t\t}\n\t\t\t\tdraft.hoverAttr = {};\n\t\t\t\t/**\n\t\t\t\t * While adding panel tabs add default tab panel\n\t\t\t\t */\n\t\t\t\tif (\n\t\t\t\t\tdragWidgetProps?.attrs?.type === TYPE.tabs &&\n\t\t\t\t\t!dragWidgetProps?.attrs?.items?.length\n\t\t\t\t) {\n\t\t\t\t\tconst allWidgets =\n\t\t\t\t\t\tdraft.modelType === MODEL_TYPE.BASE ? customFieldWidgets : widgets;\n\t\t\t\t\tconst tabId = Object.keys(allWidgets || {})?.find(\n\t\t\t\t\t\t(key) => allWidgets[key]?.type === TYPE.tabs\n\t\t\t\t\t);\n\t\t\t\t\taddTabPanel(\n\t\t\t\t\t\t{ attrs: state.dragWidgetProps?.attrs, id: tabId },\n\t\t\t\t\t\tdraft\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t\tif (newId) {\n\t\t\t\t\tonSelect({ id: newId, type: hoverWidget?._type }, draft);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tdraft.dragWidget = id;\n\t\t\t}\n\t\t});\n\t}\n\n\tfunction onTranslationRemove(key) {\n\t\tsetState((draft) => {\n\t\t\tdraft.removedTranslationList.push(key);\n\t\t});\n\t}\n\n\tfunction onHover(hoverWidget) {\n\t\tsetState((draft) => {\n\t\t\tdraft.hoverWidget = hoverWidget;\n\t\t});\n\t}\n\n\t// move widget in form\n\tfunction onMove({ source, destination }, flag, _type) {\n\t\tconst resolver = (isMoved) => ({ isMoved });\n\n\t\tif (\n\t\t\t// avoid drop target of form itself\n\t\t\t!source ||\n\t\t\t!destination ||\n\t\t\t(destination.id === IDS.form && state.items.length > 1)\n\t\t) {\n\t\t\treturn resolver(false);\n\t\t}\n\n\t\t// on create widget case\n\t\tif (Object.values(IDS.createWidgets).indexOf(source.id) > -1) {\n\t\t\treturn resolver(true);\n\t\t}\n\n\t\tconst _widgets =\n\t\t\t_type === \"customField\" ? state.customFieldWidgets : widgets;\n\t\tif (\n\t\t\t// case for create new widget\n\t\t\t// special case for exclusive\n\t\t\t(!source.attrs.isNew && checkExclusive(_widgets, source, destination)) ||\n\t\t\t// avoid to drag panel on its one of children element\n\t\t\t([TYPE.panel, TYPE.tabs].includes(source.attrs.type) &&\n\t\t\t\tgetAllChildrenIds(source.id, _type).indexOf(\n\t\t\t\t\tdestination.id === IDS.dumpField\n\t\t\t\t\t\t? destination.panelId\n\t\t\t\t\t\t: destination.id\n\t\t\t\t) > -1)\n\t\t) {\n\t\t\treturn resolver(false);\n\t\t}\n\n\t\treturn resolver(true);\n\t}\n\n\tfunction setHoverAttr(attr) {\n\t\tsetState((draft) => {\n\t\t\tdraft.hoverAttr = attr;\n\t\t});\n\t}\n\n\tconst startLoader = React.useCallback(\n\t\tfunction startLoader() {\n\t\t\tsetState((draft) => {\n\t\t\t\tdraft.loader = true;\n\t\t\t});\n\t\t},\n\t\t[setState]\n\t);\n\n\tfunction undo() {\n\t\tsetState((draft) => {\n\t\t\tif (draft.past.length) {\n\t\t\t\tdraft.future.unshift({\n\t\t\t\t\twidgets: original(draft.widgets),\n\t\t\t\t\titems: original(draft.items),\n\t\t\t\t\textensionMoves: original(draft.extensionMoves),\n\t\t\t\t\tcustomFieldWidgets: original(draft.customFieldWidgets),\n\t\t\t\t\tcustomFields: original(draft.customFields),\n\t\t\t\t\tcustomFieldItems: original(draft.customFieldItems),\n\t\t\t\t\tmetaFields: original(draft.metaFields),\n\t\t\t\t\tremovedCustomFields: original(draft.removedCustomFields),\n\t\t\t\t\terrorList: original(draft.errorList),\n\t\t\t\t\tselectedView: original(draft.selectedView),\n\t\t\t\t\tmodelField: original(draft.modelField),\n\t\t\t\t});\n\t\t\t\tsetPresent(draft.past[draft.past.length - 1], draft);\n\t\t\t\tdraft.past.splice(draft.past.length - 1, 1);\n\t\t\t}\n\t\t});\n\t}\n\n\tfunction redo() {\n\t\tsetState((draft) => {\n\t\t\tif (draft.future.length) {\n\t\t\t\tdraft.past.push({\n\t\t\t\t\twidgets: original(draft.widgets),\n\t\t\t\t\titems: original(draft.items),\n\t\t\t\t\textensionMoves: original(draft.extensionMoves),\n\t\t\t\t\tcustomFieldWidgets: original(draft.customFieldWidgets),\n\t\t\t\t\tcustomFieldItems: original(draft.customFieldItems),\n\t\t\t\t\tmetaFields: original(draft.metaFields),\n\t\t\t\t\tcustomFields: original(draft.customFields),\n\t\t\t\t\tremovedCustomFields: original(draft.removedCustomFields),\n\t\t\t\t\terrorList: original(draft.errorList),\n\t\t\t\t\tselectedView: original(draft.selectedView),\n\t\t\t\t\tmodelField: original(draft.modelField),\n\t\t\t\t});\n\t\t\t\tsetPresent(draft.future[0], draft);\n\t\t\t\tdraft.future.splice(0, 1);\n\t\t\t}\n\t\t});\n\t}\n\n\tfunction setPresent(object, draft) {\n\t\tObject.keys(object).forEach((key) => {\n\t\t\tdraft[key] = original(object[key]);\n\t\t});\n\t}\n\n\tfunction generateHistory(draft) {\n\t\tdraft.past.push({\n\t\t\twidgets: original(draft.widgets),\n\t\t\titems: original(draft.items),\n\t\t\textensionMoves: original(draft.extensionMoves),\n\t\t\tcustomFieldWidgets: original(draft.customFieldWidgets),\n\t\t\tcustomFields: original(draft.customFields),\n\t\t\tcustomFieldItems: original(draft.customFieldItems),\n\t\t\tmetaFields: original(draft.metaFields),\n\t\t\tremovedCustomFields: original(draft.removedCustomFields),\n\t\t\terrorList: original(draft.errorList),\n\t\t\tselectedView: original(draft.selectedView),\n\t\t\tmodelField: original(draft.modelField),\n\t\t});\n\t\tif (draft.future.length) {\n\t\t\tdraft.future = [];\n\t\t}\n\t}\n\n\tfunction clearHistory(draft) {\n\t\tdraft.future = [];\n\t\tdraft.past = [];\n\t}\n\n\tconst value = {\n\t\tonWidgetChange,\n\t\tonMove,\n\t\tonDrag,\n\t\tonRemove,\n\t\tonHover,\n\t\tonSelect,\n\t\tstate,\n\t\tupdate: setState,\n\t\tsetHoverAttr,\n\t\tstartLoader,\n\t\tundo,\n\t\tredo,\n\t\tclearHistory,\n\t\tonTranslationRemove,\n\t\taddTabPanel,\n\t};\n\treturn (\n\t\t<StoreContext.Provider value={value}>{children}</StoreContext.Provider>\n\t);\n}\n\nexport function useStore() {\n\treturn React.useContext(StoreContext);\n}\n\nexport function useStoreState() {\n\tconst { state } = React.useContext(StoreContext);\n\treturn state;\n}\n\nexport function useWidget(id) {\n\tconst { widgets } = useStore();\n\treturn widgets[id];\n}\n\nexport default StoreProvider;\n","import Utils from \"./../utils\";\nimport { TYPE } from \"./../constants\";\n\nconst getItemType = (type) => {\n\tconst types = [\"viewer\", \"editor\", \"hilite\"];\n\treturn types.includes(type) ? \"field\" : type;\n};\n\nexport function eGeneratePath(widgets, items = [], itemId, path = \"\") {\n\tif (itemId === -1) {\n\t\treturn \"\";\n\t}\n\tconst isFirstLevel = path === \"\";\n\tconst hasSameNameInParentItems = (items, itemId) => {\n\t\tconst widget = widgets[itemId];\n\t\tconst sameWidgets = items.filter(\n\t\t\t(item) =>\n\t\t\t\titem !== itemId &&\n\t\t\t\twidgets[item] &&\n\t\t\t\t[widgets[item].name, widgets[item].originalName].includes(widget.name)\n\t\t);\n\t\treturn sameWidgets.length > 0;\n\t};\n\n\tconst getSameItemIndex = (items, itemId) => {\n\t\tconst widget = widgets[itemId];\n\t\tconst sameWidgets = items.filter(\n\t\t\t(item) =>\n\t\t\t\twidgets[item] &&\n\t\t\t\t[widgets[item].name, widgets[item].originalName].includes(widget.name)\n\t\t);\n\t\treturn sameWidgets.indexOf(itemId) + 1;\n\t};\n\n\tconst getTypeWiseItemIndex = (items, type, itemId) => {\n\t\tconst sameWidgets = items.filter(\n\t\t\t(item) =>\n\t\t\t\twidgets[item] &&\n\t\t\t\tgetItemType(Utils.getWidgetType(widgets[item], \"field\")) === type\n\t\t);\n\t\treturn sameWidgets.indexOf(itemId) + 1;\n\t};\n\n\tconst isUniquePanel = () => {\n\t\tconst widget = widgets[itemId];\n\t\tif (!widget.name) {\n\t\t\treturn false;\n\t\t}\n\t\tconst widgetList = Object.values(widgets);\n\t\tconst sameWidgets = widgetList.filter((w) => w.name === widget.name);\n\t\treturn sameWidgets.length === 1;\n\t};\n\n\tconst canStopParentLink = () => {\n\t\tif (isFirstLevel) {\n\t\t\treturn false;\n\t\t}\n\t\tif (!isUniquePanel()) {\n\t\t\treturn false;\n\t\t}\n\t\treturn true;\n\t};\n\n\tlet findRoot = true;\n\tconst widgetList = Object.values(widgets);\n\tconst widgetIds = Object.keys(widgets);\n\twidgetList.forEach((widget, i) => {\n\t\tif (widget.items) {\n\t\t\tconst index = widget.items.findIndex((e) => e === itemId);\n\t\t\tif (index !== -1) {\n\t\t\t\tfindRoot = false;\n\t\t\t\tconst _widget = widgets[itemId];\n\t\t\t\tconst widgetType = getItemType(Utils.getWidgetType(_widget, \"field\"));\n\t\t\t\tif (_widget.name) {\n\t\t\t\t\tlet itemPath = `/${widgetType}[@name='${_widget.name}']`;\n\t\t\t\t\tif (hasSameNameInParentItems(widget.items, itemId)) {\n\t\t\t\t\t\tconst itemIndex = getSameItemIndex(widget.items, itemId);\n\t\t\t\t\t\tif (itemIndex > 0) {\n\t\t\t\t\t\t\titemPath = `${itemPath}[${itemIndex}]`;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tpath = `${itemPath}${path}`;\n\t\t\t\t} else {\n\t\t\t\t\tconst itemIndex = getTypeWiseItemIndex(\n\t\t\t\t\t\twidget.items,\n\t\t\t\t\t\twidgetType,\n\t\t\t\t\t\titemId\n\t\t\t\t\t);\n\t\t\t\t\tpath = `/${widgetType}[${itemIndex}]${path}`;\n\t\t\t\t}\n\t\t\t\tif (!canStopParentLink()) {\n\t\t\t\t\tpath = eGeneratePath(widgets, items, widgetIds[i], path);\n\t\t\t\t} else {\n\t\t\t\t\tpath = `/${path}`;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t});\n\tif (findRoot) {\n\t\tconst index = items.findIndex((e) => e === itemId);\n\t\tif (index !== -1) {\n\t\t\tconst _widget = widgets[itemId];\n\t\t\tif (_widget.name) {\n\t\t\t\tlet itemPath = `//${_widget.type}[@name='${_widget.name}']`;\n\t\t\t\tif ([TYPE.menubar, TYPE.toolbar, TYPE.divider].includes(_widget.type)) {\n\t\t\t\t\titemPath = `//${_widget.type}`;\n\t\t\t\t}\n\t\t\t\tif (hasSameNameInParentItems(items, itemId)) {\n\t\t\t\t\tconst itemIndex = getSameItemIndex(items, itemId);\n\t\t\t\t\tif (itemIndex > 0) {\n\t\t\t\t\t\titemPath = `${itemPath}[${itemIndex}]`;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tpath = `${itemPath}${path}`;\n\t\t\t} else {\n\t\t\t\tconst itemIndex = getTypeWiseItemIndex(items, _widget.type, itemId);\n\t\t\t\tpath = `//${_widget.type}[${itemIndex}]${path}`;\n\n\t\t\t\t// path = `/*[${index + 1}]${path}`;\n\t\t\t}\n\t\t}\n\t}\n\treturn path;\n}\n\n// generate xpath for all widgets\nexport function generateXpath(draft) {\n\tObject.keys(draft.widgets).forEach((widgetId) => {\n\t\tconst path = eGeneratePath(draft.widgets, draft.items, widgetId);\n\t\tdraft.widgets[widgetId].xPath = path;\n\t});\n}\n","import _, { camelCase } from \"lodash\";\nimport {\n\tTYPE,\n\tFIELD_TYPE,\n\tPANEL_TYPE,\n\tIDS,\n\tMODEL_TYPE,\n\tDEFAULT_VALUE,\n\ttypeReplacer as TYPE_REPLACER,\n} from \"./constants\";\nimport { modelFields } from \"./fields\";\nimport convert from \"xml-js\";\nimport { validate } from \"./store/validation\";\nimport format from \"xml-beautifier\";\nimport { eGeneratePath } from \"./store/xpathGenerator\";\nimport { processMoves } from \"./store/computeXML\";\nimport dasherize from \"dasherize\";\n\nexport function camleCaseString(word) {\n\tlet string =\n\t\tword &&\n\t\tword.replace(/([A-Z])/g, \" $1\").replace(/^./, function (str) {\n\t\t\treturn str.toUpperCase();\n\t\t});\n\treturn string;\n}\n\nexport const caseConverter = (value, isCamelCase = true) => {\n\tif (!value) return;\n\tvalue = value.trim();\n\tlet convertedText;\n\tif (isCamelCase) {\n\t\tconvertedText = camelCase(value);\n\t} else {\n\t\tlet textToConvert = camelCase(value);\n\t\tconvertedText = textToConvert[0].toUpperCase() + textToConvert.slice(1);\n\t}\n\treturn convertedText;\n};\n\nexport const capitalizeFirst = (value) => {\n\tlet result = value.replace(/([A-Z])/g, \" $1\");\n\tlet finalResult =\n\t\tresult && result.charAt(0).toUpperCase() + result.slice(1).toLowerCase();\n\treturn finalResult;\n};\n\nexport function translate(str) {\n\tif (window && window.top && window.top._t && typeof str === \"string\") {\n\t\treturn window.top._t(str);\n\t}\n\treturn str;\n}\n\nconst getSpacer = ({ widget, id, ...other }) => ({\n\tcolSpan: widget.colSpan || 1,\n\tserverType: FIELD_TYPE.spacer,\n\ttype: TYPE.field,\n\tisDummy: true,\n\tname: `spacer${id}`,\n\ttitle: \"Spacer\",\n\t...other,\n});\n\nconst isDummyWidget = (state, id, isCustomField = false) => {\n\tconst widgets = isCustomField ? state.customFieldWidgets : state.widgets;\n\treturn id === true || (widgets[id] && widgets[id].isDummy);\n};\n\nexport const getGrid = (\n\tstate,\n\t{ cols = 12, items },\n\ttrackElement,\n\tisCustomField = false\n) => {\n\tconst widgets = isCustomField ? state.customFieldWidgets : state.widgets;\n\tconst grid = [];\n\tlet ind = 0;\n\tlet span = 0;\n\tlet row = [];\n\n\tlet fillRow = (start) => {\n\t\tfor (let i = start; i < cols; i++) {\n\t\t\trow.push({ index: i, item: true, colSpan: 1, indices: [i] });\n\t\t}\n\t};\n\n\titems.forEach((item) => {\n\t\tlet colSpan = Number(widgets[item].colSpan || 1);\n\t\tspan += colSpan;\n\t\t//next row\n\t\tif (span > cols) {\n\t\t\tfillRow(ind);\n\t\t\tind = 0;\n\t\t\tspan = colSpan;\n\t\t\tgrid.push(row);\n\t\t\trow = [];\n\t\t}\n\t\ttrackElement &&\n\t\t\ttrackElement(item, {\n\t\t\t\tcolumn: ind,\n\t\t\t\trow: grid.length,\n\t\t\t});\n\t\trow.push({\n\t\t\tindex: ind,\n\t\t\titem,\n\t\t\tcolSpan,\n\t\t\tindices: new Array(colSpan).fill(0).map((x, i) => ind + i),\n\t\t});\n\t\tind += colSpan;\n\t});\n\n\tfillRow(ind);\n\tgrid.push(row);\n\treturn grid;\n};\n\nexport const checkGridEmptyCells = (state, panelId, modelFieldType) => {\n\tconst extendList = [];\n\tconst isCustomField = modelFieldType === \"customField\";\n\tconst widgets = isCustomField ? state.customFieldWidgets : state.widgets;\n\n\tconst panel = widgets[panelId];\n\tif (panel.layout !== PANEL_TYPE.grid) return {};\n\tconst { cols = 12, items } = panel;\n\tconst grid = getGrid(\n\t\tstate,\n\t\t{\n\t\t\tcols,\n\t\t\titems,\n\t\t},\n\t\tnull,\n\t\tisCustomField\n\t);\n\tlet removeIds = [];\n\tlet emptyColumns = {};\n\tgrid.forEach((row) => {\n\t\trow.forEach((cell, i) => {\n\t\t\tif (isDummyWidget(state, cell.item, isCustomField)) {\n\t\t\t\tlet target = emptyColumns[cell.index] || [];\n\t\t\t\ttarget.push(cell);\n\t\t\t\temptyColumns[cell.index] = target;\n\t\t\t}\n\t\t});\n\t\tif (row.every((cell) => isDummyWidget(state, cell.item, isCustomField))) {\n\t\t\tremoveIds = removeIds.concat(row.map((x) => x.item));\n\t\t}\n\t});\n\n\t// Object.values(emptyColumns)\n\t// \t.filter((arr) => arr.length === grid.length)\n\t// \t.forEach((row) => {\n\t// \t\tremoveIds = removeIds.concat(row.map((x) => x.item));\n\t// \t\t// panel.cols = Number(panel.cols || 12) - 1;\n\t// \t});\n\n\tif (removeIds.length) {\n\t\tpanel.items = panel.items.filter((x) => removeIds.indexOf(x) === -1);\n\t\tremoveIds.forEach((x) => {\n\t\t\tif (widgets[x]) {\n\t\t\t\tisExtensionView(state) &&\n\t\t\t\t\textendList.push({ name: \"replace\", target: widgets[x].xPath, id: x });\n\t\t\t\twidgets[x] && delete widgets[x];\n\t\t\t}\n\t\t});\n\t}\n\treturn { extendList };\n};\n\nexport const arrangeGrid = (state, { id, index, panelId }, widgetType) => {\n\tconst extendList = [];\n\tconst isCustomField = widgetType === \"customField\";\n\tconst widgets = isCustomField ? state.customFieldWidgets : state.widgets;\n\tconst panel = widgets[panelId];\n\tconst removeWidget = widgets[id] || { colSpan: 1 };\n\tconst { cols = 12, items } = panel;\n\tconst isLastItemRemove = panel.items[panel.items.length - 1] === id;\n\tlet removeItem = { column: null, row: null };\n\tlet ids = [];\n\tlet columnCells = [];\n\tlet rowCells = [];\n\n\tconst grid = getGrid(\n\t\tstate,\n\t\t{ cols, items },\n\t\t(item, meta) => {\n\t\t\tif (item === id) {\n\t\t\t\tremoveItem = meta;\n\t\t\t}\n\t\t},\n\t\tisCustomField\n\t);\n\n\tgrid.forEach((gridRow, i) => {\n\t\tif (removeItem.row === i) {\n\t\t\tcolumnCells = gridRow.map((x) => x.item);\n\t\t}\n\t\tconst findCol = gridRow.find((x) => x.index === removeItem.column);\n\t\tif (findCol) {\n\t\t\trowCells.push(findCol.item);\n\t\t}\n\t});\n\n\tconst deleteItem = panel.items.splice(index, 1);\n\tconst isDummyItem = ($id) =>\n\t\t$id === id || isDummyWidget(state, $id, isCustomField);\n\n\tif (columnCells.every(isDummyItem)) {\n\t\tpanel.items = panel.items.filter((x) => !columnCells.includes(x));\n\t\tids = ids.concat(columnCells);\n\t}\n\n\tif (grid.length - 1 === rowCells.length && rowCells.every(isDummyItem)) {\n\t\tpanel.items = panel.items.filter((x) => !rowCells.includes(x));\n\t\t// panel.cols = Number(panel.cols) - removeWidget.colSpan;\n\n\t\tids = ids.concat(rowCells);\n\t}\n\n\tif (ids.length === 0 && !widgets[deleteItem].isDummy && !isLastItemRemove) {\n\t\tlet newId = _.uniqueId();\n\t\tlet otherProps = {};\n\t\tif (state.modelType === MODEL_TYPE.CUSTOM) {\n\t\t\totherProps = {\n\t\t\t\tmodel: removeWidget.model,\n\t\t\t\tmodelField: removeWidget.modelField,\n\t\t\t};\n\t\t}\n\t\twidgets[newId] = getSpacer({\n\t\t\twidget: {},\n\t\t\tid: newId,\n\t\t\tcolSpan: removeWidget.colSpan,\n\t\t\t...otherProps,\n\t\t});\n\t\tconst targetWidget = widgets[panel.items[index]];\n\t\tisExtensionView(state) &&\n\t\t\textendList.push({\n\t\t\t\tname: \"insert\",\n\t\t\t\tposition: \"before\",\n\t\t\t\telements: [widgets[newId]],\n\t\t\t\ttarget: targetWidget.xPath,\n\t\t\t});\n\t\tpanel.items.splice(index, 0, newId);\n\t}\n\treturn { ids: [...ids, id], extendList };\n};\n\nconst collectWidgets = ({ grid, items, widgetIndex, hoverCellRowIndex }) => {\n\tlet beforeWidgets = [];\n\tlet afterWidgets = [];\n\tlet flag = true;\n\tlet itemIndex = 0;\n\tif (grid.length) {\n\t\tgrid.forEach((cell, cellIndex) => {\n\t\t\tcell.colSpan = Number(cell.colSpan || 1);\n\t\t\t// once any valid id cell find, take its index as default value\n\t\t\tif (cell.id && flag && cellIndex < widgetIndex) {\n\t\t\t\titemIndex = items.indexOf(cell.id) + 1;\n\t\t\t}\n\t\t\t// consider hover row cells\n\t\t\tif (!cell.separator && cell.rowIndex <= hoverCellRowIndex) {\n\t\t\t\t// before hover widget\n\t\t\t\tif (cellIndex < widgetIndex) {\n\t\t\t\t\t// reset before row if you find valid cell with id\n\t\t\t\t\tif (cell.id) {\n\t\t\t\t\t\tbeforeWidgets = [];\n\t\t\t\t\t\titemIndex = items.indexOf(cell.id) + 1;\n\t\t\t\t\t} else if (items.length) {\n\t\t\t\t\t\tbeforeWidgets.push({\n\t\t\t\t\t\t\t...cell,\n\t\t\t\t\t\t\tcolSpan: cell.colSpan || 6,\n\t\t\t\t\t\t\tisSpacer: true,\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t\t// after hover widget\n\t\t\t\t} else if (flag && cellIndex > widgetIndex) {\n\t\t\t\t\tif (cell.id) {\n\t\t\t\t\t\titemIndex = items.indexOf(cell.id);\n\t\t\t\t\t\tflag = false;\n\t\t\t\t\t} else if (items.length) {\n\t\t\t\t\t\tafterWidgets.push({ ...cell, isSpacer: true });\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t\tif (items.length) {\n\t\t\t// find last item index\n\t\t\tconst lastItem = items[items.length - 1];\n\t\t\tconst lastItemIndex = grid.findIndex((x) => `${x.id}` === `${lastItem}`);\n\t\t\t// if drop at end of list then fill only one widget so empty after widgets\n\t\t\tif (widgetIndex > lastItemIndex && lastItemIndex !== -1) {\n\t\t\t\tafterWidgets = [];\n\t\t\t\titemIndex = items.length + 1;\n\t\t\t}\n\t\t}\n\t}\n\treturn { afterWidgets, beforeWidgets, itemIndex };\n};\n\nexport const setErrorList = (attrs, state, id, isCustomField) => {\n\tconst errors = validate(attrs, state.modelType, isCustomField);\n\tif (Object.keys(errors).length) {\n\t\tstate.errorList[id] = errors;\n\t} else if (state.errorList[id]) {\n\t\tdelete state.errorList[id];\n\t}\n};\n\nexport function isExtensionView(state) {\n\treturn state.exView && !isCreatedFromStudio(state.exView);\n}\n\n// reorder widgets based on dummy widgets\nexport const reorderGrid =\n\t({ hoverWidget, dragWidgetProps }) =>\n\t(state) => {\n\t\tconst extendList = [];\n\t\tconst isCustomField = hoverWidget._type === \"customField\";\n\t\tconst dragWidgetItems =\n\t\t\thoverWidget._type === \"customField\" && !dragWidgetProps.panelId\n\t\t\t\t? \"customFieldItems\"\n\t\t\t\t: \"items\";\n\t\tconst _items =\n\t\t\thoverWidget._type === \"customField\" && !hoverWidget.panelId\n\t\t\t\t? \"customFieldItems\"\n\t\t\t\t: \"items\";\n\t\tconst _widgets =\n\t\t\thoverWidget._type === \"customField\"\n\t\t\t\t? state.customFieldWidgets\n\t\t\t\t: state.widgets;\n\t\tconst destinationItems = (\n\t\t\t(hoverWidget.panelId ? _widgets[hoverWidget.panelId] : state)[_items] ||\n\t\t\t[]\n\t\t).slice();\n\t\tconst {\n\t\t\tcolSpan,\n\t\t\tgrid = [],\n\t\t\trow: hoverCellRowIndex,\n\t\t\trelatedColSpan,\n\t\t} = hoverWidget.meta;\n\t\t// remove isNew attribute\n\t\tif (dragWidgetProps.attrs && dragWidgetProps.attrs.isNew !== undefined) {\n\t\t\tdelete dragWidgetProps.attrs.isNew;\n\t\t}\n\t\t// clone colSpan of hover widget\n\t\tconst parentPanel = _widgets[hoverWidget.panelId];\n\t\tconst hoverType = parentPanel?.serverType;\n\t\tif (dragWidgetProps.attrs && !dragWidgetProps.attrs.colSpan) {\n\t\t\tif (\n\t\t\t\tcolSpan &&\n\t\t\t\tdragWidgetProps.attrs &&\n\t\t\t\t![TYPE.menu, TYPE.menuItem, TYPE.divider].includes(\n\t\t\t\t\tdragWidgetProps.attrs.type\n\t\t\t\t) &&\n\t\t\t\t![TYPE.toolbar, TYPE.menubar].includes(hoverType)\n\t\t\t) {\n\t\t\t\tconst existingColspan = dragWidgetProps.attrs.colSpan;\n\t\t\t\t// set itemSpan if exists\n\t\t\t\tif (hoverType === TYPE.panel && Number(parentPanel.itemSpan)) {\n\t\t\t\t\tdragWidgetProps.attrs.colSpan = Number(parentPanel.itemSpan);\n\t\t\t\t} else {\n\t\t\t\t\tdragWidgetProps.attrs.colSpan = relatedColSpan || colSpan;\n\t\t\t\t}\n\t\t\t\tif (isCustomField) {\n\t\t\t\t\t// set colSpan in widgetAttrs for custom field\n\t\t\t\t\tconst widgetAttrs = { colSpan: relatedColSpan || colSpan };\n\t\t\t\t\tdragWidgetProps.attrs.widgetAttrs = JSON.stringify(widgetAttrs);\n\t\t\t\t}\n\t\t\t\tif (`${dragWidgetProps.attrs.colSpan}` !== `${existingColspan}`) {\n\t\t\t\t\tif (state.modelType === MODEL_TYPE.CUSTOM) {\n\t\t\t\t\t\t// change widgetAttrs for colSpan\n\t\t\t\t\t\tconst widgetAttrs = JSON.parse(\n\t\t\t\t\t\t\tdragWidgetProps.attrs.widgetAttrs || \"{}\"\n\t\t\t\t\t\t);\n\t\t\t\t\t\twidgetAttrs.colSpan = relatedColSpan || colSpan;\n\t\t\t\t\t\tdragWidgetProps.attrs.widgetAttrs = JSON.stringify(widgetAttrs);\n\t\t\t\t\t}\n\t\t\t\t\tisExtensionView(state) &&\n\t\t\t\t\t\textendList.push({\n\t\t\t\t\t\t\tname: \"attribute\",\n\t\t\t\t\t\t\ttarget: dragWidgetProps.attrs.xPath,\n\t\t\t\t\t\t\tattributes: {\n\t\t\t\t\t\t\t\tname: \"colSpan\",\n\t\t\t\t\t\t\t\tvalue: dragWidgetProps.attrs.colSpan,\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\tif (state.modelType === MODEL_TYPE.CUSTOM) {\n\t\t\t\t\tconst widgetAttrs = JSON.parse(\n\t\t\t\t\t\tdragWidgetProps.attrs.widgetAttrs || \"{}\"\n\t\t\t\t\t);\n\t\t\t\t\twidgetAttrs.colSpan = 6;\n\t\t\t\t\tdragWidgetProps.attrs.widgetAttrs = JSON.stringify(widgetAttrs);\n\t\t\t\t}\n\t\t\t} else if (\n\t\t\t\tdragWidgetProps.attrs &&\n\t\t\t\tstate.modelType === MODEL_TYPE.CUSTOM\n\t\t\t) {\n\t\t\t\tconst widgetAttrs = JSON.parse(\n\t\t\t\t\tdragWidgetProps.attrs.widgetAttrs || \"{}\"\n\t\t\t\t);\n\t\t\t\twidgetAttrs.colSpan = relatedColSpan || colSpan;\n\t\t\t\tdragWidgetProps.attrs.colSpan = relatedColSpan || colSpan;\n\t\t\t\tdragWidgetProps.attrs.widgetAttrs = JSON.stringify(widgetAttrs);\n\t\t\t}\n\t\t}\n\t\tconst newIds = [];\n\t\tlet widgetIndex = Number(hoverWidget.index);\n\t\tlet {\n\t\t\tbeforeWidgets,\n\t\t\tafterWidgets,\n\t\t\titemIndex = 0,\n\t\t} = collectWidgets({\n\t\t\tgrid,\n\t\t\titems: destinationItems,\n\t\t\twidgetIndex,\n\t\t\thoverCellRowIndex,\n\t\t});\n\n\t\tlet isRemovedFromSameList = false;\n\t\t// if drag widget is existing one then remove it from its panel\n\t\tif (dragWidgetProps.id && _widgets[dragWidgetProps.id]) {\n\t\t\tconst sourcePanel = dragWidgetProps.panelId\n\t\t\t\t? _widgets[dragWidgetProps.panelId]\n\t\t\t\t: state;\n\t\t\tconst sourceItems = sourcePanel[dragWidgetItems];\n\t\t\tconst sourceItemIndex = sourceItems.indexOf(dragWidgetProps.id);\n\t\t\tif ([PANEL_TYPE.grid].includes(sourcePanel.layout)) {\n\t\t\t\tlet newId = _.uniqueId();\n\t\t\t\tconst isLastItem =\n\t\t\t\t\tsourceItems[sourceItems.length - 1] === dragWidgetProps.id;\n\t\t\t\tlet isLastItemInSamePanel = false;\n\t\t\t\tif (dragWidgetProps.panelId === hoverWidget.panelId) {\n\t\t\t\t\tif (dragWidgetProps.index < hoverWidget.index) {\n\t\t\t\t\t\tisLastItemInSamePanel = true;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tconst hoverParent = dragWidgetProps.panelId\n\t\t\t\t\t? _widgets[dragWidgetProps.panelId]\n\t\t\t\t\t: null;\n\t\t\t\tlet isPanelTab = false;\n\t\t\t\tif (\n\t\t\t\t\thoverParent &&\n\t\t\t\t\t[TYPE.tabs, TYPE.panelStack].includes(hoverParent.type)\n\t\t\t\t) {\n\t\t\t\t\tisPanelTab = true;\n\t\t\t\t}\n\t\t\t\tif (\n\t\t\t\t\t(isLastItem && !isLastItemInSamePanel) ||\n\t\t\t\t\tisPanelTab ||\n\t\t\t\t\t[TYPE.menubar, TYPE.toolbar].includes(hoverType)\n\t\t\t\t) {\n\t\t\t\t\tsourceItems.splice(sourceItemIndex, 1);\n\t\t\t\t} else {\n\t\t\t\t\tlet attrs = {\n\t\t\t\t\t\tcolSpan: _widgets[dragWidgetProps.id].colSpan || 1,\n\t\t\t\t\t\tserverType: FIELD_TYPE.spacer,\n\t\t\t\t\t\ttype: TYPE.field,\n\t\t\t\t\t\tisDummy: true,\n\t\t\t\t\t\tname: `spacer${newId}`,\n\t\t\t\t\t\ttitle: \"Spacer\",\n\t\t\t\t\t};\n\t\t\t\t\tif (state.modelType === MODEL_TYPE.CUSTOM) {\n\t\t\t\t\t\tattrs[\"model\"] = dragWidgetProps.attrs.model;\n\t\t\t\t\t\tattrs[\"modelField\"] = dragWidgetProps.attrs.modelField;\n\t\t\t\t\t\tattrs[\"widgetAttrs\"] = JSON.stringify({ colSpan: attrs.colSpan });\n\t\t\t\t\t}\n\t\t\t\t\tif (isCustomField) {\n\t\t\t\t\t\tattrs[\"widgetAttrs\"] = JSON.stringify({ colSpan: attrs.colSpan });\n\t\t\t\t\t}\n\t\t\t\t\t_widgets[newId] = Object.assign({}, attrs);\n\t\t\t\t\tisExtensionView(state) &&\n\t\t\t\t\t\textendList.push({\n\t\t\t\t\t\t\tname: \"insert\",\n\t\t\t\t\t\t\tposition: \"before\",\n\t\t\t\t\t\t\ttarget: dragWidgetProps.attrs.xPath,\n\t\t\t\t\t\t\telements: [attrs],\n\t\t\t\t\t\t\tid: newId,\n\t\t\t\t\t\t});\n\t\t\t\t\tsourceItems.splice(sourceItemIndex, 1, newId);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\t// if same panel, drag widget is before hover widget\n\t\t\t\tif (dragWidgetProps.panelId === hoverWidget.panelId) {\n\t\t\t\t\tif (dragWidgetProps.index < hoverWidget.index) {\n\t\t\t\t\t\tisRemovedFromSameList = true;\n\t\t\t\t\t\titemIndex--;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tsourceItems.splice(sourceItemIndex, 1);\n\t\t\t}\n\t\t}\n\n\t\t// remove dummy widget if spacer created automatically\n\t\tif (hoverWidget.attrs.isDummy) {\n\t\t\tlet isNew =\n\t\t\t\t!dragWidgetProps.id ||\n\t\t\t\tObject.values(IDS.createWidgets).indexOf(dragWidgetProps.id) > -1;\n\t\t\tlet newId = isNew ? _.uniqueId() : dragWidgetProps.id;\n\t\t\tlet attrs = Object.assign({}, dragWidgetProps.attrs || {});\n\t\t\tif (isNew && attrs.isCoreField !== false && attrs.name) {\n\t\t\t\tattrs.name = `${attrs.name}${newId}`;\n\t\t\t}\n\t\t\tsetErrorList(attrs, state, newId, isCustomField);\n\t\t\tif (isNew) {\n\t\t\t\t_widgets[newId] = Object.assign({}, attrs);\n\t\t\t\tisExtensionView(state) &&\n\t\t\t\t\textendList.push({\n\t\t\t\t\t\tname: \"insert\",\n\t\t\t\t\t\tposition: \"before\",\n\t\t\t\t\t\ttarget: hoverWidget.attrs.xPath,\n\t\t\t\t\t\telements: [attrs],\n\t\t\t\t\t\tid: newId,\n\t\t\t\t\t});\n\t\t\t} else {\n\t\t\t\tisExtensionView(state) &&\n\t\t\t\t\textendList.push({\n\t\t\t\t\t\tname: \"move\",\n\t\t\t\t\t\tsource: dragWidgetProps.attrs.xPath,\n\t\t\t\t\t\tposition: \"before\",\n\t\t\t\t\t\ttarget: hoverWidget.attrs.xPath,\n\t\t\t\t\t});\n\t\t\t\t_widgets[dragWidgetProps.id] = Object.assign(\n\t\t\t\t\t{ ..._widgets[dragWidgetProps.id] },\n\t\t\t\t\tattrs\n\t\t\t\t);\n\t\t\t}\n\t\t\t(hoverWidget.panelId ? _widgets[hoverWidget.panelId] : state)[\n\t\t\t\t_items\n\t\t\t].splice(\n\t\t\t\tdestinationItems.indexOf(hoverWidget.id) -\n\t\t\t\t\t(isRemovedFromSameList ? 1 : 0),\n\t\t\t\t1,\n\t\t\t\tnewId\n\t\t\t);\n\t\t\tisExtensionView(state) &&\n\t\t\t\textendList.push({ name: \"replace\", target: hoverWidget.attrs.xPath });\n\t\t\treturn { extendList, newId };\n\t\t}\n\n\t\t// cell placement is horizontal special case for Tabs widget\n\t\tif (hoverWidget.meta && hoverWidget.meta.horizontal) {\n\t\t\tlet index = Number(hoverWidget.index);\n\t\t\tif (\n\t\t\t\tdragWidgetProps.panelId === hoverWidget.panelId &&\n\t\t\t\tdragWidgetProps.index < hoverWidget.index\n\t\t\t) {\n\t\t\t\tindex = index - 2;\n\t\t\t}\n\t\t\t// calculate item position\n\t\t\titemIndex = Math.ceil(Number(index / 2));\n\t\t}\n\n\t\t// remove all dummy cells for flow layout\n\t\tconst destinationPanel = hoverWidget.panelId\n\t\t\t? _widgets[hoverWidget.panelId]\n\t\t\t: state;\n\t\tif ((destinationPanel.layout || PANEL_TYPE.flow) === PANEL_TYPE.flow) {\n\t\t\tbeforeWidgets = [];\n\t\t\tafterWidgets = [];\n\t\t}\n\t\t// fill all widgets in panel\n\t\tconst newWidgetIds = [];\n\t\tconst hoverWidgetParentItems =\n\t\t\t(hoverWidget.panelId ? _widgets[hoverWidget.panelId] : state)[_items] ||\n\t\t\t[];\n\t\tlet hoverWidgetId = hoverWidgetParentItems[itemIndex];\n\t\tlet hoverPath;\n\t\tlet actualHoverWidget = _widgets[hoverWidgetParentItems[itemIndex]];\n\t\tlet position = \"before\";\n\t\tif (!actualHoverWidget && hoverWidgetParentItems.length <= itemIndex) {\n\t\t\thoverWidgetId = hoverWidgetParentItems[hoverWidgetParentItems.length - 1];\n\t\t\tactualHoverWidget =\n\t\t\t\t_widgets[hoverWidgetParentItems[hoverWidgetParentItems.length - 1]];\n\t\t\tposition = \"after\";\n\t\t}\n\t\t// check for sidebar widget\n\t\tif (actualHoverWidget && `${actualHoverWidget.sidebar}` === \"true\") {\n\t\t\tdragWidgetProps.attrs.sidebar = \"true\";\n\t\t\tisExtensionView(state) &&\n\t\t\t\textendList.push({\n\t\t\t\t\tname: \"attribute\",\n\t\t\t\t\ttarget: dragWidgetProps.attrs.xPath,\n\t\t\t\t\tattributes: { name: \"sidebar\", value: \"true\" },\n\t\t\t\t});\n\t\t}\n\t\tif (actualHoverWidget) {\n\t\t\thoverPath =\n\t\t\t\tactualHoverWidget.xPath ||\n\t\t\t\teGeneratePath(_widgets, state[_items], hoverWidgetId);\n\t\t}\n\t\tconst shouldInsertInParent = (dragWidget, hoverWidget) => {\n\t\t\tconst hoverPathInfo = exploreTarget(hoverWidget.xPath);\n\t\t\tconst list = state.extensionMoves.filter((m) => {\n\t\t\t\tif (m.target) {\n\t\t\t\t\tconst targetInfo = exploreTarget(m.target);\n\t\t\t\t\tif (m.name === \"replace\") {\n\t\t\t\t\t\tif (hoverPathInfo.self) {\n\t\t\t\t\t\t\tif (targetInfo.parent.indexOf(hoverPathInfo.self) >= 0) {\n\t\t\t\t\t\t\t\treturn true;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t} else if (targetInfo.parent.indexOf(hoverPathInfo.parent) >= 0) {\n\t\t\t\t\t\t\treturn true;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\treturn false;\n\t\t\t});\n\t\t\tif (\n\t\t\t\t[TYPE.menu, FIELD_TYPE.button, TYPE.menuItem].includes(\n\t\t\t\t\tdragWidget.attrs.type\n\t\t\t\t) &&\n\t\t\t\t[TYPE.menubar, TYPE.toolbar, TYPE.menu].includes(hoverWidget.type)\n\t\t\t) {\n\t\t\t\t// hoverwidget should not have any child remove\n\t\t\t\tif (hoverWidget.items.length === 0 && !list.length) {\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn false;\n\t\t};\n\t\tconst list = [];\n\t\tbeforeWidgets\n\t\t\t.concat([dragWidgetProps])\n\t\t\t.concat(afterWidgets)\n\t\t\t.forEach((widget) => {\n\t\t\t\tlet attrs = Object.assign({}, widget.attrs || {});\n\t\t\t\tlet newId = widget.id;\n\t\t\t\tconst isCreateWidget = typeof newId === \"symbol\";\n\t\t\t\tconst isNew = !newId || isCreateWidget;\n\t\t\t\tlet shouldAdd = true;\n\t\t\t\t// new drag widgets\n\t\t\t\tif (\n\t\t\t\t\t[TYPE.menubar, TYPE.toolbar].includes(hoverType) &&\n\t\t\t\t\twidget.isSpacer\n\t\t\t\t) {\n\t\t\t\t\tshouldAdd = false;\n\t\t\t\t}\n\t\t\t\tif (shouldAdd) {\n\t\t\t\t\tif (isNew) {\n\t\t\t\t\t\tnewId = _.uniqueId();\n\t\t\t\t\t\tif (attrs.isCoreField !== false) {\n\t\t\t\t\t\t\tif (attrs && Object.keys(attrs).length) {\n\t\t\t\t\t\t\t\tsetErrorList(attrs, state, newId, isCustomField);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tif (attrs.name) {\n\t\t\t\t\t\t\t\tattrs.name = `${attrs.name}${newId}`;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\t// set new drag widget as edit widget\n\t\t\t\t\t\tif (isCreateWidget) {\n\t\t\t\t\t\t\tstate.editWidget = newId;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tif (widget.isSpacer)\n\t\t\t\t\t\tif (widget.isSpacer) {\n\t\t\t\t\t\t\t// if its spacer widgets\n\t\t\t\t\t\t\tconst _attrs = dragWidgetProps.attrs || {};\n\t\t\t\t\t\t\tattrs = getSpacer({\n\t\t\t\t\t\t\t\twidget,\n\t\t\t\t\t\t\t\tid: newId,\n\t\t\t\t\t\t\t\tmodel: _attrs.model,\n\t\t\t\t\t\t\t\tmodelField: _attrs.modelField,\n\t\t\t\t\t\t\t\twidgetAttrs: JSON.stringify({ colSpan: widget.colSpan || 6 }),\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\t\t\t\t\t// add new widget\n\t\t\t\t\tif (isNew) {\n\t\t\t\t\t\tif (isExtensionView(state) && !isCustomField) {\n\t\t\t\t\t\t\tif (actualHoverWidget) {\n\t\t\t\t\t\t\t\tisExtensionView(state) &&\n\t\t\t\t\t\t\t\t\tlist[position === \"after\" ? \"unshift\" : \"push\"]({\n\t\t\t\t\t\t\t\t\t\tname: \"insert\",\n\t\t\t\t\t\t\t\t\t\tposition,\n\t\t\t\t\t\t\t\t\t\ttarget: hoverPath,\n\t\t\t\t\t\t\t\t\t\telements: [attrs],\n\t\t\t\t\t\t\t\t\t\tid: newId,\n\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tconst widget = _widgets[hoverWidget.panelId];\n\t\t\t\t\t\t\t\tif (shouldInsertInParent(dragWidgetProps, widget)) {\n\t\t\t\t\t\t\t\t\tprocessMoves(state, attrs, newId, hoverWidget.panelId);\n\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\tlist[position === \"after\" ? \"unshift\" : \"push\"]({\n\t\t\t\t\t\t\t\t\t\tname: \"insert\",\n\t\t\t\t\t\t\t\t\t\tposition: \"inside\",\n\t\t\t\t\t\t\t\t\t\ttarget: widget.xPath,\n\t\t\t\t\t\t\t\t\t\telements: [attrs],\n\t\t\t\t\t\t\t\t\t\tid: newId,\n\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t// processMoves(state, attrs, newId, hoverWidget.panelId);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tnewWidgetIds.push(newId);\n\t\t\t\t\t\t_widgets[newId] = Object.assign({}, attrs);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tif (isExtensionView(state) && !isCustomField) {\n\t\t\t\t\t\t\tif (actualHoverWidget) {\n\t\t\t\t\t\t\t\tisExtensionView(state) &&\n\t\t\t\t\t\t\t\t\tlist[position === \"after\" ? \"unshift\" : \"push\"]({\n\t\t\t\t\t\t\t\t\t\tname: \"move\",\n\t\t\t\t\t\t\t\t\t\tsource: dragWidgetProps.attrs.xPath,\n\t\t\t\t\t\t\t\t\t\tposition,\n\t\t\t\t\t\t\t\t\t\ttarget: hoverPath,\n\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tconst widget = _widgets[hoverWidget.panelId];\n\t\t\t\t\t\t\t\tif (shouldInsertInParent(dragWidgetProps, widget)) {\n\t\t\t\t\t\t\t\t\tprocessMoves(\n\t\t\t\t\t\t\t\t\t\tstate,\n\t\t\t\t\t\t\t\t\t\tdragWidgetProps.attrs,\n\t\t\t\t\t\t\t\t\t\tdragWidgetProps.id,\n\t\t\t\t\t\t\t\t\t\thoverWidget.panelId\n\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\tisExtensionView(state) &&\n\t\t\t\t\t\t\t\t\t\tlist[position === \"after\" ? \"unshift\" : \"push\"]({\n\t\t\t\t\t\t\t\t\t\t\tname: \"move\",\n\t\t\t\t\t\t\t\t\t\t\tsource: dragWidgetProps.attrs.xPath,\n\t\t\t\t\t\t\t\t\t\t\tposition: \"inside\",\n\t\t\t\t\t\t\t\t\t\t\ttarget: widget.xPath,\n\t\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t// const tempList = processMoves(state, dragWidgetProps.attrs, dragWidgetProps.id, hoverWidget.panelId);\n\t\t\t\t\t\t\t\t// if(tempList.length) {\n\t\t\t\t\t\t\t\t// \tconst index = extendList.findIndex(l => l.name === 'attribute');\n\t\t\t\t\t\t\t\t// \tif(index !== -1) {\n\t\t\t\t\t\t\t\t// \t\textendList.splice(index, 1);\n\t\t\t\t\t\t\t\t// \t}\n\t\t\t\t\t\t\t\t// }\n\t\t\t\t\t\t\t\t// list.push(...tempList);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t_widgets[dragWidgetProps.id] = Object.assign(\n\t\t\t\t\t\t\t{ ..._widgets[dragWidgetProps.id] },\n\t\t\t\t\t\t\tattrs\n\t\t\t\t\t\t);\n\t\t\t\t\t}\n\t\t\t\t\tnewIds.push(newId);\n\t\t\t\t}\n\t\t\t});\n\t\textendList.push(...list);\n\t\t// put all new widgets into panel\n\t\t(\n\t\t\t(hoverWidget.panelId ? _widgets[hoverWidget.panelId] : state)[_items] ||\n\t\t\t[]\n\t\t).splice(itemIndex, 0, ...newIds);\n\t\treturn { extendList, newId: newIds && newIds[newIds.length - 1] };\n\t};\n\nconst getWidgetType = (widgetAttrs, defaultType) => {\n\tconst uiFields = [\"spacer\", \"label\", \"button\"];\n\tlet _type =\n\t\twidgetAttrs.isModelField ||\n\t\twidgetAttrs.isCoreField === false ||\n\t\twidgetAttrs.serverType === \"field\"\n\t\t\t? \"field\"\n\t\t\t: widgetAttrs.type\n\t\t\t? widgetAttrs.type.toLowerCase()\n\t\t\t: defaultType;\n\t_type = uiFields.includes(widgetAttrs.serverType)\n\t\t? widgetAttrs.serverType\n\t\t: _type;\n\treturn _type;\n};\n\n// check source or destination panel is exclusive or not\nexport const checkExclusive = (widgets, source, destination) => {\n\t// special case for exclusive\n\tif (widgets[source.id]) {\n\t\tif (widgets[source.panelId]) {\n\t\t\tlet sourcePanelAttrs = widgets[source.panelId];\n\t\t\tif (\n\t\t\t\tsourcePanelAttrs.exclusive &&\n\t\t\t\tdestination.panelId !== source.panelId\n\t\t\t) {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\t}\n\tif (widgets[destination.id]) {\n\t\tif (widgets[destination.panelId]) {\n\t\t\tlet destinationPanelAttrs = widgets[destination.panelId];\n\t\t\tif (\n\t\t\t\tdestinationPanelAttrs.exclusive &&\n\t\t\t\tsource.panelId !== destination.panelId\n\t\t\t) {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\t}\n\treturn false;\n};\n\nconst isSamePositionInOriginal = (elements, panel, widget, hoverItemIndex) => {\n\tconst field = widget.attrs || widget || {};\n\tlet flag = false;\n\t(elements || []).forEach((element) => {\n\t\tif (element.elements) {\n\t\t\tif (\n\t\t\t\telement.attributes &&\n\t\t\t\tpanel &&\n\t\t\t\telement.attributes.name === panel.name\n\t\t\t) {\n\t\t\t\tconst item = element.elements[hoverItemIndex];\n\t\t\t\tif (\n\t\t\t\t\titem &&\n\t\t\t\t\titem.attributes &&\n\t\t\t\t\tfield &&\n\t\t\t\t\titem.attributes.name === field.name\n\t\t\t\t) {\n\t\t\t\t\tflag = true;\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (!flag && element.elements && element.elements.length) {\n\t\t\t\tconst result = isSamePositionInOriginal(\n\t\t\t\t\telement.elements,\n\t\t\t\t\tpanel,\n\t\t\t\t\twidget,\n\t\t\t\t\thoverItemIndex\n\t\t\t\t);\n\t\t\t\tif (result === true) {\n\t\t\t\t\tflag = true;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t});\n\treturn flag;\n};\n\nconst getTarget = (fieldTarget, itemTarget) => {\n\treturn fieldTarget || itemTarget;\n};\n\nexport const isPanelTab = (field) => {\n\tconst { type, widgetAttrs } = field;\n\tif (type === TYPE.panel && widgetAttrs) {\n\t\tconst attrs = JSON.parse(widgetAttrs || \"{}\");\n\t\tif (attrs.tab === \"true\") {\n\t\t\treturn true;\n\t\t}\n\t}\n\treturn false;\n};\n\nconst getColSpan = (widget) => {\n\tconst attrs = JSON.parse(widget.widgetAttrs || \"{}\");\n\tconst defaultColspan = widget.type === TYPE.panel ? 12 : 6;\n\treturn attrs.colSpan || defaultColspan;\n};\n\nconst getCols = (widget) => {\n\tif ([TYPE.panel, TYPE.tabs].includes(widget.type)) {\n\t\treturn { cols: 12 };\n\t}\n\treturn {};\n};\n\nexport const getMenuBuilder = (menuBuilder) => {\n\tif (menuBuilder) {\n\t\treturn {\n\t\t\tmenuBuilderTitle: menuBuilder.title,\n\t\t\tmenuBuilderParent: menuBuilder.parentMenu,\n\t\t};\n\t}\n\treturn {};\n};\n\nexport const generateCustomModelSchema = (\n\tfields = [],\n\trecord,\n\ttypeLateral = \"\",\n\tformType = \"form\"\n) => {\n\tlet flag = false;\n\tconst _widgets = {};\n\tconst formItems = [];\n\tconst tabItems = [];\n\tlet _panelId;\n\tfields &&\n\t\tfields.length &&\n\t\tfields.forEach((f) => {\n\t\t\tconst _ID = _.uniqueId();\n\t\t\tconst isTab = isPanelTab(f);\n\t\t\tif ([TYPE.panel, TYPE.tabs].includes(f.type)) {\n\t\t\t\tflag = true;\n\t\t\t\t_panelId = _ID;\n\t\t\t\tf[\"items\"] = [];\n\t\t\t\tf[\"layout\"] = \"grid\";\n\t\t\t} else if (!flag) {\n\t\t\t\tconst _item = _widgets[_panelId];\n\t\t\t\tif (_item) {\n\t\t\t\t\t_item.items.push(_ID);\n\t\t\t\t\t_widgets[_panelId] = {\n\t\t\t\t\t\t..._widgets[_panelId],\n\t\t\t\t\t\titems: [..._item.items],\n\t\t\t\t\t};\n\t\t\t\t} else {\n\t\t\t\t\tflag = true;\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (flag) {\n\t\t\t\tflag = false;\n\t\t\t\tif (isTab) {\n\t\t\t\t\ttabItems.push(_ID);\n\t\t\t\t} else {\n\t\t\t\t\tformItems.push(_ID);\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (f.selectionText && f.selectionText.length) {\n\t\t\t\tf.updateSelection = true;\n\t\t\t}\n\t\t\t_widgets[_ID] = {\n\t\t\t\t...f,\n\t\t\t\tcolSpan: getColSpan(f),\n\t\t\t\t...getCols(f),\n\t\t\t\ttype: `${f.type}${typeLateral}`,\n\t\t\t};\n\t\t});\n\t// add tab panel if tabItems has length\n\tif (tabItems.length) {\n\t\tconst _ID = _.uniqueId();\n\t\tconst field = {\n\t\t\titems: [...tabItems],\n\t\t\ttype: TYPE.tabs,\n\t\t\ttitle: \"Tab Panel\",\n\t\t};\n\t\tformItems.push(_ID);\n\t\t_widgets[_ID] = { ...field };\n\t}\n\tconst form = formType === \"customForm\" ? IDS.customForm : IDS.form;\n\tconst schema = {\n\t\twidgets: {\n\t\t\t[form]: {\n\t\t\t\ttype: formType,\n\t\t\t\tcols: 12,\n\t\t\t\t...record,\n\t\t\t\t...getMenuBuilder(record ? record.menuBuilder : undefined),\n\t\t\t},\n\t\t\t[IDS.dumpField]: {\n\t\t\t\ttype: TYPE.dumpField,\n\t\t\t\tname: \"\",\n\t\t\t},\n\t\t\t..._widgets,\n\t\t},\n\t\titems: [...formItems],\n\t};\n\treturn schema;\n};\n\nfunction processXML(xmlString, indent) {\n\treturn format(xmlString);\n}\n\nconst replacer = (key, modelType) => {\n\tconst camelToDash = [\"formView\", \"gridView\", \"minSize\", \"maxSize\"];\n\tconst xField = [\"bind\"];\n\tif (modelType === MODEL_TYPE.BASE) {\n\t\tconst keyReplacer = {\n\t\t\ttargetModel: \"target\",\n\t\t\tminSize: \"min\",\n\t\t\tmaxSize: \"max\",\n\t\t};\n\t\tkey = keyReplacer[key] || key;\n\t\tif (camelToDash.includes(key)) {\n\t\t\tkey = camelToDashCase(key);\n\t\t}\n\t\tif (xField.includes(key)) {\n\t\t\tkey = `x-${camelToDashCase(key)}`;\n\t\t}\n\t}\n\treturn key;\n};\n\nconst editorKeyReplacer = (key, modelType) => {\n\tconst keyReplacer = {\n\t\ttargetModel: \"target\",\n\t\tminSize: \"min\",\n\t\tmaxSize: \"max\",\n\t};\n\tif (modelType === MODEL_TYPE.BASE) {\n\t\tconst _keyIndex = Object.values(keyReplacer).findIndex((v) => v === key);\n\t\tif (_keyIndex !== -1) {\n\t\t\tkey = Object.keys(keyReplacer)[_keyIndex];\n\t\t}\n\t}\n\treturn key;\n};\n\nfunction isDummyField(widget) {\n\tconst modelTypes = [];\n\tmodelFields.forEach((f) => {\n\t\tconst { value = [] } = f;\n\t\tconst types = value.map((v) => v.serverType);\n\t\tmodelTypes.push(...types);\n\t});\n\treturn widget.serverType === \"field\" && modelTypes.includes(widget.type);\n}\n\nfunction valueConverter(value, key) {\n\tconst ltKeys = [\"title\", \"text\"];\n\tif (value && ltKeys.includes(key)) {\n\t\tvalue = value.replace(/</g, \"&lt;\");\n\t}\n\treturn value;\n}\n\nconst getWidgetAttrs = (attrs, exempt = [], modelType) => {\n\tconst widgetAttrs = {};\n\tconst exemptedAttrs = [\n\t\t\"version\",\n\t\t\"type\",\n\t\t\"typeName\",\n\t\t\"label\",\n\t\t\"items\",\n\t\t\"serverType\",\n\t\t\"layout\",\n\t\t\"cols\",\n\t\t\"isCoreField\",\n\t\t\"isModelField\",\n\t\t\"relationship\",\n\t\t\"current\",\n\t\t\"autoTitle\",\n\t\t\"metaModel\",\n\t\t\"targetSearch\",\n\t\t\"editorType\",\n\t\t\"appBuilder\",\n\t\t...exempt,\n\t];\n\tif (attrs.serverType !== \"field\") {\n\t\texemptedAttrs.push(\"targetModel\", \"targetName\", \"target\");\n\t}\n\tObject.keys(attrs).forEach((key) => {\n\t\tif (!exemptedAttrs.includes(key) && attrs[key] !== \"\") {\n\t\t\tlet flag = true;\n\t\t\tif (modelType === MODEL_TYPE.BASE && isDefaultValue(key, attrs[key])) {\n\t\t\t\tflag = false;\n\t\t\t}\n\t\t\tif (flag) {\n\t\t\t\tif (key === \"dummyType\") {\n\t\t\t\t\twidgetAttrs[\"type\"] = attrs[key];\n\t\t\t\t} else {\n\t\t\t\t\twidgetAttrs[replacer(key, modelType)] = valueConverter(\n\t\t\t\t\t\tattrs[key],\n\t\t\t\t\t\tkey\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t});\n\t// check for dummy model field\n\tif (attrs.type === TYPE.panelInclude) {\n\t\tif (typeof attrs.view === \"object\") {\n\t\t\twidgetAttrs.view = attrs.view.name;\n\t\t}\n\t}\n\tif (attrs.isModelField || isDummyField(attrs)) {\n\t\twidgetAttrs[\"type\"] = attrs.type;\n\t}\n\tif (attrs.type === TYPE.panelRelated) {\n\t\twidgetAttrs[\"name\"] = attrs.field;\n\t}\n\tif (widgetAttrs.name) {\n\t\t// change array field index\n\t\tconst squareIndex = widgetAttrs.name.indexOf(\"[\");\n\t\tif (squareIndex !== -1) {\n\t\t\twidgetAttrs.name = widgetAttrs.name.substring(0, squareIndex);\n\t\t}\n\t}\n\treturn widgetAttrs;\n};\n\nconst getCustomWidget = (widget, exempt = []) => {\n\tconst _widget = {};\n\tconst exemptedAttrs = [\n\t\t\"image\",\n\t\t\"serverType\",\n\t\t\"isModelField\",\n\t\t\"isCoreField\",\n\t\t\"current\",\n\t\t...exempt,\n\t];\n\tObject.keys(widget).forEach((key) => {\n\t\tif (!exemptedAttrs.includes(key)) {\n\t\t\tif (key === \"type\" && [\"item\", \"field\"].includes(widget[key])) {\n\t\t\t\t_widget[key] = widget[\"serverType\"];\n\t\t\t} else {\n\t\t\t\t_widget[key] = widget[key] === \"\" ? null : widget[key];\n\t\t\t}\n\t\t}\n\t});\n\treturn _widget;\n};\n\nconst getCustomModelFields = (\n\titems = [],\n\twidgets,\n\tadditionalProps = {},\n\tcountSequence = false,\n\tsequence = 0\n) => {\n\tconst fields = [];\n\titems.forEach((item) => {\n\t\tif (widgets[item]) {\n\t\t\tlet _widget = { ...widgets[item] };\n\t\t\tconst exempt = [];\n\t\t\tif (![\"dump_field\", \"form\"].includes(_widget.type)) {\n\t\t\t\tif (_widget.type !== TYPE.tabs) {\n\t\t\t\t\tif (typeof _widget.id === \"symbol\") {\n\t\t\t\t\t\tdelete _widget.id;\n\t\t\t\t\t}\n\t\t\t\t\tif (_widget.showTitle !== \"false\") {\n\t\t\t\t\t\tdelete _widget.showTitle;\n\t\t\t\t\t}\n\t\t\t\t\tif (countSequence) {\n\t\t\t\t\t\t_widget.sequence = sequence;\n\t\t\t\t\t\tsequence++;\n\t\t\t\t\t}\n\t\t\t\t\tif (_widget.serverType === \"spacer\") {\n\t\t\t\t\t\texempt.push(\"title\");\n\t\t\t\t\t}\n\t\t\t\t\tfields.push({\n\t\t\t\t\t\t...getCustomWidget(_widget, exempt),\n\t\t\t\t\t\t...additionalProps,\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\tif (_widget.items && _widget.items.length) {\n\t\t\t\t\tconst modelFields = getCustomModelFields(\n\t\t\t\t\t\t_widget.items,\n\t\t\t\t\t\twidgets,\n\t\t\t\t\t\tadditionalProps,\n\t\t\t\t\t\tcountSequence,\n\t\t\t\t\t\tsequence\n\t\t\t\t\t);\n\t\t\t\t\tfields.push(...modelFields.fields);\n\t\t\t\t\tsequence = modelFields.sequence;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t});\n\treturn { fields, sequence };\n};\n\nconst isCreatedFromStudio = ({ xmlId = null, extension }) => {\n\tif (xmlId && !extension) {\n\t\tconst index = xmlId.indexOf(\"studio-\");\n\t\tif (index === 0) {\n\t\t\treturn true;\n\t\t}\n\t}\n\treturn false;\n};\n\nconst getFormProperties = (form, exempt = []) => {\n\tconst except = [\"type\", \"cols\", \"items\", ...exempt];\n\tconst properties = {};\n\tObject.keys(form).forEach((key) => {\n\t\tif (!except.includes(key)) {\n\t\t\tproperties[key] = form[key] === \"\" ? null : form[key];\n\t\t}\n\t});\n\treturn properties;\n};\n\n/**\n * Checks whether value is same as default value or not\n * for given property name.\n * Returns boolean true/false\n * @param {string} name\n * @param {string} value\n */\nconst isAttrHasDefaultValue = (name, value) => {\n\tconst defaultValue = DEFAULT_VALUE[name];\n\tif (defaultValue !== undefined && `${defaultValue}` === `${value}`) {\n\t\treturn true;\n\t}\n\treturn false;\n};\n\nexport const getProperty = (\n\tname,\n\tvalue,\n\tparentField,\n\tparentValue,\n\tshouldCheckParent = true\n) => {\n\tconst obj = { [name]: value };\n\tif (shouldCheckParent) {\n\t\tconst _value =\n\t\t\ttypeof parentValue === \"string\"\n\t\t\t\t? JSON.parse(parentValue)\n\t\t\t\t: parentValue || {};\n\t\tif (parentField && ![undefined, \"\", null].includes(value)) {\n\t\t\t// check for default value\n\t\t\tif (isAttrHasDefaultValue(name, value)) {\n\t\t\t\tdelete _value[name];\n\t\t\t\treturn { [parentField]: JSON.stringify({ ..._value }) };\n\t\t\t}\n\t\t\tconst _obj = { [name]: `${value}` };\n\t\t\treturn { [parentField]: JSON.stringify({ ..._value, ..._obj }) };\n\t\t} else if (parentField && (!value || value === \"\")) {\n\t\t\tdelete _value[name];\n\t\t\treturn { [parentField]: JSON.stringify({ ..._value }) };\n\t\t}\n\t}\n\tif (name === \"showTitle\" && value === true) {\n\t\treturn { showTitle: undefined };\n\t}\n\treturn obj;\n};\n\nexport const getPropertyValue = (\n\tlist,\n\tname,\n\tparentField,\n\tdefaultValue,\n\tshouldCheckParent = true\n) => {\n\tif (shouldCheckParent && parentField) {\n\t\tif (list[parentField]) {\n\t\t\tconst field = JSON.parse(list[parentField]);\n\t\t\treturn [undefined, null].includes(field[name])\n\t\t\t\t? defaultValue\n\t\t\t\t: field[name];\n\t\t}\n\t\treturn defaultValue || null;\n\t}\n\treturn [undefined, null].includes(list[name]) ? defaultValue : list[name];\n};\n\nconst getDefaultProperties = (modelType) => {\n\tswitch (modelType) {\n\t\tcase MODEL_TYPE.CUSTOM:\n\t\t\treturn { formWidth: \"large\" };\n\t\tcase MODEL_TYPE.BASE: {\n\t\t\treturn { width: \"large\" };\n\t\t}\n\t\tdefault:\n\t\t\treturn {};\n\t}\n};\n\nconst getPatchList = (xmlJson) => {\n\tif (xmlJson) {\n\t\tconst { elements = [] } = xmlJson;\n\t\tif (elements[0]) {\n\t\t\treturn elements[0].elements || [];\n\t\t}\n\t}\n\treturn [];\n};\n\nconst filterFormPatch = (patchList) => {\n\treturn patchList.filter((element) => element.attributes.target === \"/\");\n};\n\nconst getCurrentFormAttributes = (xml) => {\n\tconst { elements = [] } = xml;\n\treturn elements[0].attributes || {};\n};\n\nconst mergeFormAttributes = (patchList, formPatch) => {\n\tconst index = patchList.findIndex(\n\t\t(element) => element.attributes.target === \"/\"\n\t);\n\tconst targetIndex = index === -1 ? 0 : index;\n\tconst remove = index === -1 ? 0 : 1;\n\tif (Object.keys(formPatch).length) {\n\t\tpatchList.splice(targetIndex, remove, { ...formPatch });\n\t} else if (index !== -1) {\n\t\tpatchList.splice(index, 1);\n\t}\n\treturn patchList;\n};\n\nconst camelToDashCase = (string, caseString = \"-\") => {\n\treturn string.replace(/[A-Z]/g, (m) => caseString + m.toLowerCase());\n};\n\nconst dashToCamelCase = (string) => {\n\treturn string.replace(/-([a-z])/g, function (g) {\n\t\treturn g[1].toUpperCase();\n\t});\n};\n\nconst isDefaultValue = (field, value) => {\n\tconst fieldValue = DEFAULT_VALUE[field];\n\tif ([true, false].includes(fieldValue) && `${value}` === `${fieldValue}`) {\n\t\treturn true;\n\t}\n\treturn false;\n};\n\nconst getReferenceProperty = (widgetType) => {\n\tconst referenceProperty = {\n\t\t[TYPE.panelInclude]: \"view\",\n\t};\n\tconst refProp = referenceProperty[widgetType];\n\treturn refProp || \"name\";\n};\n\nconst checkTarget = (target, checkString, which) => {\n\t// 2 for parent check and 3 for itself/child element check\n\tconst targetSplit = target.split(\"/\");\n\tif (which) {\n\t\tif (targetSplit[which] === checkString) {\n\t\t\treturn true;\n\t\t}\n\t\treturn false;\n\t}\n\treturn target === checkString;\n};\n\nconst exploreTarget = (target, which = 3) => {\n\t// 2 for parent check and 3 for itself/child element check\n\tconst targetSplit = target.split(\"/\");\n\tconst length = targetSplit.length;\n\tlet parent = length > 3 ? targetSplit[length - 2] : targetSplit[length - 1];\n\tlet self = length > 3 ? targetSplit[length - 1] : undefined;\n\treturn { parent, self };\n};\n\nconst getViews = (list, viewName) => {\n\tlet view = list.find((v) => v.computed === true);\n\tlet originalXML = list.find(\n\t\t(v) => v.computed !== true && v.extension !== true\n\t);\n\tconst extensionXML = list.find(\n\t\t(v) => v.extension === true && v.xmlId === `studio-${viewName}`\n\t);\n\treturn {\n\t\tview: view || originalXML,\n\t\toriginalXML,\n\t\textensionXML,\n\t};\n};\n\nconst getElementTypes = (name, field, _type) => {\n\tlet serverType;\n\tlet type;\n\tif (field) {\n\t\tserverType = field.type.toLowerCase();\n\t\ttype = name;\n\t} else {\n\t\tserverType = name;\n\t\ttype = _type ? _type : name === \"field\" ? undefined : name; // if element is field then set default type string\n\t}\n\treturn {\n\t\tserverType: TYPE_REPLACER[serverType] || serverType,\n\t\ttype: TYPE_REPLACER[type] || type,\n\t};\n};\n\nconst getTitle = (attributes, field) => {\n\tif (attributes.title) {\n\t\treturn { title: attributes.title };\n\t}\n\tif (field?.label) {\n\t\treturn { autoTitle: field.label };\n\t}\n\tif (attributes.name) {\n\t\treturn { autoTitle: camelToDashCase(attributes.name, \" \") };\n\t}\n\treturn {};\n};\n\nconst generateViewFromJson = ({\n\tview,\n\tfields,\n\toriginal,\n\textensionXML,\n\tattrsList,\n}) => {\n\tconst { elements } = view;\n\n\tconst getElementName = (attributes, parent, itemList, elementType) => {\n\t\tconst nameObj = { name: attributes.name };\n\t\treturn nameObj;\n\t};\n\n\tconst getElementToWidget = (element, fields, parent, itemList) => {\n\t\tlet widget = {};\n\t\tlet field;\n\t\tif (element) {\n\t\t\tconst { type, ...attributes } = element.attributes || {};\n\t\t\tif (element.name.indexOf(\"panel\") === -1) {\n\t\t\t\tfield = fields.find((f) => f.name === attributes.name);\n\t\t\t}\n\t\t\tconst attrs = {};\n\t\t\tObject.keys(attributes).map((key) => {\n\t\t\t\tlet _key = key;\n\t\t\t\tif (key.indexOf(\"x-\") === 0) {\n\t\t\t\t\t_key = key.substring(2);\n\t\t\t\t}\n\t\t\t\tattrs[editorKeyReplacer(dashToCamelCase(_key), MODEL_TYPE.BASE)] =\n\t\t\t\t\tattributes[key];\n\t\t\t\treturn undefined;\n\t\t\t});\n\t\t\tconst targetModel = getTarget(\n\t\t\t\tfield?.target || field?.targetModel,\n\t\t\t\tattributes.target\n\t\t\t);\n\t\t\twidget = {\n\t\t\t\t...attrs,\n\t\t\t\tcolSpan: Number(attributes.colSpan || 6),\n\t\t\t\t...getElementName(attributes, parent, itemList, element.name),\n\t\t\t\t...getElementTypes(element.name, field, type),\n\t\t\t\t...getTitle(attributes, field),\n\t\t\t};\n\t\t\tif (targetModel) {\n\t\t\t\twidget.targetModel = targetModel;\n\t\t\t}\n\t\t\tif (\n\t\t\t\telement.name &&\n\t\t\t\t(element.name.indexOf(TYPE.panel) >= 0 ||\n\t\t\t\t\t[TYPE.menubar, TYPE.toolbar].includes(element.name))\n\t\t\t) {\n\t\t\t\twidget.colSpan = Number(attributes.colSpan || 12);\n\t\t\t\twidget.cols = 12;\n\t\t\t\twidget.layout = \"grid\";\n\t\t\t\twidget.serverType =\n\t\t\t\t\twidget.type === \"panel\" && widget.tab === true\n\t\t\t\t\t\t? TYPE.tabs\n\t\t\t\t\t\t: widget.serverType || widget.type;\n\t\t\t}\n\t\t\t// widget.type =\n\t\t}\n\t\treturn { widget, field };\n\t};\n\n\tconst getSpecialType = (element) => {\n\t\treturn element.name;\n\t};\n\tconst getXMLToViewItems = (elements = [], fields, parent) => {\n\t\tconst exclude = [\"panel-mail\"];\n\t\tlet _widgets = {};\n\t\tconst itemList = [];\n\t\tconst fieldList = [];\n\t\telements.forEach((element) => {\n\t\t\tif (element.attributes && `${element.attributes.json}` === \"true\") {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tif (!exclude.includes(element.name) && element.type !== \"cdata\") {\n\t\t\t\tconst _ID = _.uniqueId();\n\t\t\t\tconst { widget, field } = getElementToWidget(\n\t\t\t\t\telement,\n\t\t\t\t\tfields,\n\t\t\t\t\tparent,\n\t\t\t\t\titemList\n\t\t\t\t);\n\t\t\t\tif (field) {\n\t\t\t\t\tfieldList.push(field);\n\t\t\t\t}\n\t\t\t\titemList.push(_ID);\n\t\t\t\tif (element.name && element.name.indexOf(TYPE.panel) >= 0) {\n\t\t\t\t\twidget.items = [];\n\t\t\t\t}\n\t\t\t\tif (element.elements && element.name !== \"field\") {\n\t\t\t\t\tconst items = getXMLToViewItems(\n\t\t\t\t\t\telement.elements,\n\t\t\t\t\t\tfields,\n\t\t\t\t\t\telement.attributes\n\t\t\t\t\t);\n\t\t\t\t\t_widgets = { ..._widgets, ...items._widgets };\n\t\t\t\t\twidget.items = [...items.itemList];\n\t\t\t\t\tfieldList.push(...items.fieldList);\n\t\t\t\t}\n\t\t\t\tif (element.elements && element.name === \"field\") {\n\t\t\t\t\t// check for viewer\n\t\t\t\t\tconst type = getSpecialType(element.elements[0]);\n\t\t\t\t\tif (type) {\n\t\t\t\t\t\twidget.type = type;\n\t\t\t\t\t\twidget.elements = element.elements;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\t// override with meta attrs list\n\t\t\t\tif (widget.name) {\n\t\t\t\t\tconst list = (attrsList || []).filter(\n\t\t\t\t\t\t(attr) => attr.field === widget.name\n\t\t\t\t\t);\n\t\t\t\t\tlist.forEach((attr) => {\n\t\t\t\t\t\tif ([\"selection-in\"].includes(attr.name)) {\n\t\t\t\t\t\t\twidget[attr.name] = attr.value;\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\twidget[\n\t\t\t\t\t\t\t\teditorKeyReplacer(dashToCamelCase(attr.name), MODEL_TYPE.BASE)\n\t\t\t\t\t\t\t] = attr.value;\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\t_widgets[_ID] = { ...widget };\n\t\t\t}\n\t\t});\n\t\treturn { _widgets, itemList, fieldList };\n\t};\n\n\tconst { itemList, _widgets, fieldList } = getXMLToViewItems(elements, fields);\n\tconst form = _widgets[itemList[0]];\n\tconst items = form.items || [];\n\tdelete _widgets[itemList[0]];\n\t// const { items, ...rest } = view;\n\tconst schema = {\n\t\twidgets: {\n\t\t\t[IDS.form]: {\n\t\t\t\ttype: TYPE.form,\n\t\t\t\tcols: 12,\n\t\t\t\t...form,\n\t\t\t\titems: undefined,\n\t\t\t},\n\t\t\t[IDS.dumpField]: {\n\t\t\t\ttype: TYPE.dumpField,\n\t\t\t\tname: \"\",\n\t\t\t},\n\t\t\t..._widgets,\n\t\t},\n\t\titems,\n\t\tfieldList,\n\t};\n\treturn schema;\n};\n\nconst generateXMLToViewSchema = ({\n\tview,\n\tfields,\n\toriginal = false,\n\textensionXML,\n\tattrsList,\n}) => {\n\tconst { elements } = JSON.parse(\n\t\tconvert.xml2json(view.xml, {\n\t\t\tcompact: false,\n\t\t\tfullTagEmptyElement: false,\n\t\t})\n\t);\n\treturn generateViewFromJson({\n\t\tview: { elements },\n\t\tfields,\n\t\toriginal,\n\t\textensionXML,\n\t\tattrsList,\n\t});\n};\n\nconst getChangeList = (schema, extensionXml) => {\n\tconst list = [];\n\tconst { widgets } = schema;\n\tconst elems = getExtensionElements(extensionXml);\n\tconst widgetList = Object.values(widgets);\n\tconst widgetIds = Object.keys(widgets);\n\telems.forEach((json) => {\n\t\tconst { elements = [] } = json;\n\t\t// const object =\n\t\tconst moveElement = elements[0];\n\t\tif (moveElement && moveElement.attributes && moveElement.name === \"move\") {\n\t\t\tconst source = exploreTarget(moveElement.attributes.source);\n\t\t\tif (source.self) {\n\t\t\t\tconst index = source.self\n\t\t\t\t\t? widgetList.findIndex(\n\t\t\t\t\t\t\t(w) => `${w.type}[@name='${w.name}']` === source.self\n\t\t\t\t\t  )\n\t\t\t\t\t: widgetList.findIndex(\n\t\t\t\t\t\t\t(w) => `${w.type}[@name='${w.name}']` === source.parent\n\t\t\t\t\t  );\n\t\t\t\tif (widgetIds[index]) {\n\t\t\t\t\tlist.push(widgetIds[index]);\n\t\t\t\t}\n\t\t\t}\n\t\t\t// return {\n\t\t\t// \ttarget: attributes.target,\n\t\t\t// \tsource: moveElement.attributes.source,\n\t\t\t// \tposition: moveElement.attributes.position,\n\t\t\t// }\n\t\t}\n\t});\n\treturn list;\n};\n\nconst getExtensionElements = (xml) => {\n\tconst extensionJson = JSON.parse(\n\t\tconvert.xml2json(xml, {\n\t\t\tcompact: false,\n\t\t\tfullTagEmptyElement: false,\n\t\t})\n\t);\n\tconst elems = extensionJson.elements[0].elements;\n\treturn elems;\n};\n\nfunction randomString(length) {\n\tconst chars =\n\t\t\"0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ\";\n\tvar result = \"\";\n\tfor (var i = length; i > 0; --i)\n\t\tresult += chars[Math.floor(Math.random() * chars.length)];\n\treturn result;\n}\n\nexport const generateFieldUniqueTitle = ({ name, fieldName }) => {\n\tconst text = randomString(6);\n\treturn `studio:${text}:${fieldName}:${name}`;\n};\n\nexport function getDefaultGridFormName(str, isForm = false, isJson = false) {\n\tif (!str) return;\n\tif (isJson) {\n\t\treturn `custom-model-${str.name}-${isForm ? \"form\" : \"grid\"}`;\n\t}\n\tconst models = str.split(\".\");\n\tconst modelString = models[models.length - 1];\n\tif (!modelString) return;\n\tconst viewName = dasherize(modelString);\n\treturn `${viewName.toLowerCase()}-${isForm ? \"form\" : \"grid\"}`;\n}\n\nexport default {\n\tcamleCaseString,\n\ttranslate,\n\tprocessXML,\n\tgetWidgetAttrs,\n\tgetCustomModelFields,\n\tisCreatedFromStudio,\n\tgetFormProperties,\n\tgetDefaultProperties,\n\tgetPatchList,\n\tkeyReplacer: replacer,\n\tvalueConverter,\n\tfilterFormPatch,\n\tgetCurrentFormAttributes,\n\tmergeFormAttributes,\n\tcamelToDashCase,\n\tdashToCamelCase,\n\tisSamePositionInOriginal,\n\tgetWidgetType,\n\tisDefaultValue,\n\tgetReferenceProperty,\n\tcheckTarget,\n\texploreTarget,\n\tgetViews,\n\tgenerateXMLToViewSchema,\n\tgenerateViewFromJson,\n\tgetChangeList,\n\tgetDefaultGridFormName,\n\tisPanelTab,\n};\n","import React from \"react\";\nimport classNames from \"classnames\";\nimport { GRID_SIZE, PANEL_TYPE, TYPE } from \"../constants\";\nimport { useStore } from \"../store/context\";\n\nconst getColSpan = (col, parentItemSpan) => {\n\tconst widgetAttrs = col.widgetAttrs ? JSON.parse(col.widgetAttrs) : {};\n\tif (widgetAttrs.colSpan) {\n\t\treturn Number(widgetAttrs.colSpan);\n\t} else {\n\t\treturn parentItemSpan || col.colSpan || 6;\n\t}\n};\n\n// get Column cell CSS according to colSpan and Container size\nexport const getColumnCss = (columns, colSpan) => {\n\tconst [n, span] = [Number(columns), Number(colSpan)];\n\tif (n > GRID_SIZE.max) return \"\";\n\treturn `col-span col-${\n\t\tspan > n ? GRID_SIZE.max : Math.floor((GRID_SIZE.max * span) / n)\n\t}`;\n};\n\nconst DEFAULTS = {\n\tITEM_COLSPAN: 1,\n\tMAX_SIZE: 12,\n};\n\nconst getFullGrid = (\n\titems,\n\tsize = DEFAULTS.MAX_SIZE,\n\tisStackLayout,\n\tparentItemSpan\n) => {\n\tconst grid = [];\n\tconst isStack = size === 1 || isStackLayout;\n\tconst gridSize = isStack ? DEFAULTS.MAX_SIZE : size;\n\tlet row = [];\n\tlet span = 0;\n\n\tconst getItemColspan = (colSpan) => {\n\t\t// if(Number(parentItemSpan)) {\n\t\t// \treturn Number(parentItemSpan)\n\t\t// }\n\t\treturn Number(colSpan);\n\t};\n\n\tif (!items.length) {\n\t\tconst $cell = { id: 0, separator: true };\n\t\tconst dummy = {\n\t\t\tid: 0,\n\t\t\tdummy: true,\n\t\t\tdummyPanel: true,\n\t\t\tcolSpan: isStack ? 12 : 6,\n\t\t};\n\t\treturn [[$cell, dummy, $cell].concat(isStack ? [] : [dummy, $cell])];\n\t}\n\n\tconst addRow = ({ item, overflow = false } = {}) => {\n\t\tif (overflow) {\n\t\t\tconst fillColspan = gridSize - (span - getItemColspan(item.colSpan));\n\t\t\trow.push({\n\t\t\t\tid: 0,\n\t\t\t\tdummy: true,\n\t\t\t\tcolSpan: fillColspan,\n\t\t\t});\n\t\t}\n\t\tgrid.push(row);\n\t\trow = [];\n\t\tspan = 0;\n\t};\n\n\tconst addItem = (item) => row.push(item);\n\n\tfor (let i = 0; i < items.length; i++) {\n\t\tconst item = Object.assign(\n\t\t\titems[i],\n\t\t\tisStack\n\t\t\t\t? { colSpan: DEFAULTS.MAX_SIZE }\n\t\t\t\t: { colSpan: getItemColspan(getColSpan(items[i], parentItemSpan)) }\n\t\t);\n\t\tconst { colSpan: itemSpan = DEFAULTS.ITEM_COLSPAN } = item;\n\t\tconst isLastItem = i === items.length - 1;\n\t\tspan += getItemColspan(itemSpan);\n\t\tif (span > gridSize) {\n\t\t\taddRow({ item, overflow: true });\n\t\t\tspan = itemSpan;\n\t\t\taddItem(item);\n\t\t} else if (span === gridSize) {\n\t\t\trow.push(item);\n\t\t\taddRow({ item });\n\t\t} else {\n\t\t\trow.push(item);\n\t\t}\n\n\t\tif (isLastItem && row.length) {\n\t\t\tconst occupiedSpan = row.reduce(\n\t\t\t\t(total, { colSpan = DEFAULTS.ITEM_COLSPAN }) => total + colSpan,\n\t\t\t\t0\n\t\t\t);\n\t\t\tconst remainSpan = gridSize - occupiedSpan;\n\t\t\tif (remainSpan > 0) {\n\t\t\t\trow.push({\n\t\t\t\t\tid: 0,\n\t\t\t\t\tdummy: true,\n\t\t\t\t\tcolSpan: remainSpan,\n\t\t\t\t});\n\t\t\t}\n\t\t\tgrid.push(row);\n\t\t}\n\t}\n\n\tconst fullGrid = [];\n\tfor (let i = 0; i < grid.length; i++) {\n\t\tconst row = grid[i];\n\t\tconst draggable = ![TYPE.menubar, TYPE.toolbar].includes(row[0]?.type);\n\t\tconst upRow = [];\n\t\tconst midRow = [];\n\t\tconst addCell = ($row, options = { separator: true }) =>\n\t\t\t$row.push({\n\t\t\t\tid: 0,\n\t\t\t\tcolSpan: 1,\n\t\t\t\t...options,\n\t\t\t});\n\t\taddCell(upRow);\n\n\t\tdraggable &&\n\t\t\taddCell(midRow, {\n\t\t\t\trelatedColSpan: getColSpan(row[0], parentItemSpan),\n\t\t\t\tseparator: true,\n\t\t\t});\n\n\t\tfor (let j = 0; j < row.length; j++) {\n\t\t\tconst col = row[j];\n\t\t\tconst colSpan = getColSpan(col, parentItemSpan);\n\t\t\taddCell(upRow, { dummy: true, colSpan });\n\t\t\taddCell(midRow, col);\n\n\t\t\taddCell(upRow, { relatedColSpan: colSpan, separator: true });\n\t\t\tdraggable &&\n\t\t\t\taddCell(midRow, { relatedColSpan: colSpan, separator: true });\n\t\t}\n\n\t\tdraggable ? fullGrid.push(upRow) : fullGrid.push([]);\n\t\tfullGrid.push(midRow);\n\n\t\tif (i === grid.length - 1) {\n\t\t\tfullGrid.push(upRow);\n\t\t}\n\t}\n\treturn fullGrid;\n};\n\n// Grid Container embeds grid cell\nexport const GridContainer = ({ className, attrs, children, ...rest }) => (\n\t<div\n\t\tclassName={classNames(\n\t\t\tclassName,\n\t\t\tattrs.cols ? `grid-span grid-${attrs.cols}` : \"\"\n\t\t)}\n\t\t{...rest}\n\t>\n\t\t{children}\n\t</div>\n);\n\nexport function useGridWidget() {\n\tconst [WidgetComponent, setWidgetComponent] = React.useState(() => null);\n\n\tReact.useEffect(() => {\n\t\timport(\"./Widget\").then((module) =>\n\t\t\tsetWidgetComponent(() => module.default)\n\t\t);\n\t}, []);\n\n\treturn WidgetComponent;\n}\n\n/**\n * Grid Component handle layout of Container Components like panels\n */\nfunction Grid(props) {\n\tconst WidgetComponent = useGridWidget();\n\tconst {\n\t\tstate: { widgets: _widgets, customFieldWidgets },\n\t} = useStore();\n\tconst { className, items, attrs = {}, panelId, design } = props;\n\tlet widgets = props._type === \"customField\" ? customFieldWidgets : _widgets;\n\tconst widgetAttrs = JSON.parse(attrs.widgetAttrs || \"{}\");\n\tconst gridSize = Number(attrs.cols || 1);\n\tconst columns = gridSize * 2 + 1;\n\tconst isStackLayout = attrs.layout === PANEL_TYPE.stack;\n\tconst spacers = columns === 1 ? 0 : columns / 2 + 1;\n\tconst spacerWidth = design ? 1 : 0; //%\n\tconst cols = (columns - 1) / 2;\n\tconst colWidth = (100 - spacers * spacerWidth) / cols;\n\tconst itemSpan = widgetAttrs?.itemSpan;\n\tconst rows = React.useMemo(() => {\n\t\tlet cellIndice = 0;\n\t\tconst childs = items.map((x) =>\n\t\t\tObject.assign({}, widgets[x] || {}, { id: x })\n\t\t);\n\t\treturn getFullGrid(childs, gridSize, isStackLayout, itemSpan).map(\n\t\t\t(columns, rowIndex) => {\n\t\t\t\tlet span = 0;\n\t\t\t\treturn columns.map((c) => {\n\t\t\t\t\tlet columnIndex = span;\n\t\t\t\t\tspan += c.separator ? 0 : Number(c.colSpan || 1);\n\t\t\t\t\treturn { ...c, rowIndex, columnIndex, cellIndice: cellIndice++ };\n\t\t\t\t});\n\t\t\t}\n\t\t);\n\t}, [items, widgets, gridSize, isStackLayout, itemSpan]);\n\n\tconst gridRows = rows.reduce((arr, row) => arr.concat(row), []);\n\treturn (\n\t\t<GridContainer {...{ attrs, className }}>\n\t\t\t<table cellPadding=\"0\" cellSpacing=\"0\">\n\t\t\t\t{design && (\n\t\t\t\t\t<colgroup>\n\t\t\t\t\t\t{isStackLayout ? (\n\t\t\t\t\t\t\t<col width={\"100%\"} />\n\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\tnew Array(columns)\n\t\t\t\t\t\t\t\t.fill(0)\n\t\t\t\t\t\t\t\t.map((col, i) => (\n\t\t\t\t\t\t\t\t\t<col\n\t\t\t\t\t\t\t\t\t\tkey={i}\n\t\t\t\t\t\t\t\t\t\twidth={`${i % 2 === 1 ? colWidth : spacerWidth}%`}\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t))\n\t\t\t\t\t\t)}\n\t\t\t\t\t</colgroup>\n\t\t\t\t)}\n\t\t\t\t<tbody>\n\t\t\t\t\t{rows.map((cols, rowIndex) => (\n\t\t\t\t\t\t<tr\n\t\t\t\t\t\t\tclassName={rowIndex % 2 === 0 ? \"empty-row\" : \"fill-row\"}\n\t\t\t\t\t\t\tkey={rowIndex}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{cols.map(\n\t\t\t\t\t\t\t\t(\n\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\tid,\n\t\t\t\t\t\t\t\t\t\tcolSpan,\n\t\t\t\t\t\t\t\t\t\tcellIndice: indice,\n\t\t\t\t\t\t\t\t\t\tcolumnIndex,\n\t\t\t\t\t\t\t\t\t\tseparator,\n\t\t\t\t\t\t\t\t\t\trelatedColSpan,\n\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\ti\n\t\t\t\t\t\t\t\t) => {\n\t\t\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t\t\t<td\n\t\t\t\t\t\t\t\t\t\t\tclassName={separator ? \"separator\" : \"\"}\n\t\t\t\t\t\t\t\t\t\t\tkey={indice}\n\t\t\t\t\t\t\t\t\t\t\tcolSpan={colSpan > 1 ? colSpan * 2 - 1 : colSpan}\n\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t{WidgetComponent && (\n\t\t\t\t\t\t\t\t\t\t\t\t<WidgetComponent\n\t\t\t\t\t\t\t\t\t\t\t\t\tdesign={design}\n\t\t\t\t\t\t\t\t\t\t\t\t\tmeta={{\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tisSeparator: Boolean(separator),\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tcolSpan,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\trow: rowIndex,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tcol: i,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tcolIndex: columnIndex,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tgrid: gridRows,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\ttotal: columns,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\trelatedColSpan: relatedColSpan,\n\t\t\t\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\t\t\t\tpanelId={panelId}\n\t\t\t\t\t\t\t\t\t\t\t\t\tkey={indice}\n\t\t\t\t\t\t\t\t\t\t\t\t\tid={id}\n\t\t\t\t\t\t\t\t\t\t\t\t\tindex={indice}\n\t\t\t\t\t\t\t\t\t\t\t\t\tpanelColumns={attrs.cols}\n\t\t\t\t\t\t\t\t\t\t\t\t\t_type={props._type}\n\t\t\t\t\t\t\t\t\t\t\t\t\terrorList={props.errorList}\n\t\t\t\t\t\t\t\t\t\t\t\t\tcanRemove={props.canRemove}\n\t\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t</tr>\n\t\t\t\t\t))}\n\t\t\t\t</tbody>\n\t\t\t</table>\n\t\t</GridContainer>\n\t);\n}\n\nexport default Grid;\n","import React from \"react\";\nimport classNames from \"classnames\";\nimport Grid from \"./Grid\";\nimport { TYPE } from \"../constants\";\nimport { translate } from \"../utils\";\n\n/**\n * Panel Component\n * Used As Container to group Field Component like form group\n */\nfunction PanelComponent({ id, attrs, design, isTab = false, ...rest }) {\n\tconst errors = rest.errorList[id] || {};\n\treturn (\n\t\t<React.Fragment>\n\t\t\t{(attrs.title ||\n\t\t\t\t[TYPE.toolbar, TYPE.menubar].includes(attrs.serverType)) && (\n\t\t\t\t<div\n\t\t\t\t\tclassName={classNames(\"panel-header\", {\n\t\t\t\t\t\tinline: isTab,\n\t\t\t\t\t})}\n\t\t\t\t>\n\t\t\t\t\t{translate(attrs.title || attrs.autoTitle)}\n\t\t\t\t\t{attrs.serverType === TYPE.toolbar && (\n\t\t\t\t\t\t<i className=\"fa fa-wrench\" title=\"toolbar\" />\n\t\t\t\t\t)}\n\t\t\t\t\t{attrs.serverType === TYPE.menubar && (\n\t\t\t\t\t\t<i className=\"fa fa-bars\" title=\"menubar\" />\n\t\t\t\t\t)}\n\t\t\t\t</div>\n\t\t\t)}\n\t\t\t{errors.items && !isTab && (\n\t\t\t\t<div className={classNames(\"panel-children-error\")}>{errors.items}</div>\n\t\t\t)}\n\t\t\t{!isTab && (\n\t\t\t\t<Grid\n\t\t\t\t\tdesign={design}\n\t\t\t\t\tclassName=\"panel-body\"\n\t\t\t\t\titems={attrs.items || []}\n\t\t\t\t\tattrs={attrs}\n\t\t\t\t\tpanelId={id}\n\t\t\t\t\t_type={rest._type}\n\t\t\t\t\terrorList={rest.errorList}\n\t\t\t\t\tcanRemove={rest.canRemove}\n\t\t\t\t/>\n\t\t\t)}\n\t\t</React.Fragment>\n\t);\n}\n\nexport default React.memo(PanelComponent);\n","import { getExtendJson2, getWidgetObject } from \"./extensionGenerator\";\nimport { MODEL_TYPE } from \"./../constants\";\nimport Utils from \"./../utils\";\n\nfunction setAttributeOnNewWidget(items, widget, widgetId, state) {\n\tconst widgets = state.widgets;\n\tlet inserted = false;\n\tconst getWidgetName = () => widgets[widgetId] && widgets[widgetId].name;\n\tfor (let i = 0; i < items.length; i++) {\n\t\tconst item = items[i];\n\t\tif (item.name === getWidgetName()) {\n\t\t\titem[widget.attributes.name] = widget.attributes.value;\n\t\t\tinserted = true;\n\t\t}\n\t\tif (inserted) {\n\t\t\tbreak;\n\t\t}\n\t\tif (item.items && item.items.length) {\n\t\t\tconst _inserted = setAttributeOnNewWidget(\n\t\t\t\titem.items,\n\t\t\t\twidget,\n\t\t\t\twidgetId,\n\t\t\t\tstate\n\t\t\t);\n\t\t\tif (_inserted) {\n\t\t\t\tinserted = _inserted;\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t}\n\treturn inserted;\n}\n\nexport function generateExtension(list, state) {\n\tconst cleatVirtualAction = () => {\n\t\tconst exemptedAttributes = [\n\t\t\t\"widgetAttrs\",\n\t\t\t\"items\",\n\t\t\t\"current\",\n\t\t\t\"elements\",\n\t\t\t\"tz\",\n\t\t\t\"targetModel\",\n\t\t\t\"_type\",\n\t\t];\n\t\t[...list].forEach((item, i) => {\n\t\t\tif (item.name === \"insert\") {\n\t\t\t\tconst id = item.id;\n\t\t\t\tconst removeIndex = list.findIndex(\n\t\t\t\t\t(item) => item.name === \"replace\" && item.id === id && !item.target\n\t\t\t\t);\n\t\t\t\tconst insertIndex = list.findIndex(\n\t\t\t\t\t(item) => item.id === id && item.name === \"insert\"\n\t\t\t\t);\n\t\t\t\tif (removeIndex !== -1) {\n\t\t\t\t\tlist.splice(removeIndex, 1);\n\t\t\t\t\tlist.splice(insertIndex, 1);\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (item.name === \"attribute\") {\n\t\t\t\tconst id = item.id;\n\t\t\t\t// set blank values for default value\n\t\t\t\tif (\n\t\t\t\t\titem.attributes &&\n\t\t\t\t\tUtils.isDefaultValue(item.attributes.name, item.attributes.value)\n\t\t\t\t) {\n\t\t\t\t\tconst attrIndex = list.findIndex(\n\t\t\t\t\t\t(e) =>\n\t\t\t\t\t\t\te.id === id &&\n\t\t\t\t\t\t\te.name === \"attribute\" &&\n\t\t\t\t\t\t\te.attributes.name === item.attributes.name\n\t\t\t\t\t);\n\t\t\t\t\tlist.splice(attrIndex, 1, {\n\t\t\t\t\t\t...list[attrIndex],\n\t\t\t\t\t\tattributes: {\n\t\t\t\t\t\t\t...list[attrIndex].attributes,\n\t\t\t\t\t\t\tvalue: item.attributes.value,\n\t\t\t\t\t\t},\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\tif (\n\t\t\t\t\titem.attributes &&\n\t\t\t\t\texemptedAttributes.includes(item.attributes.name)\n\t\t\t\t) {\n\t\t\t\t\tconst attrIndex = list.findIndex(\n\t\t\t\t\t\t(item) =>\n\t\t\t\t\t\t\titem.id === id &&\n\t\t\t\t\t\t\titem.name === \"attribute\" &&\n\t\t\t\t\t\t\texemptedAttributes.includes(item.attributes.name)\n\t\t\t\t\t);\n\t\t\t\t\tlist.splice(attrIndex, 1);\n\t\t\t\t} else {\n\t\t\t\t\tlet processed = false;\n\t\t\t\t\tconst getWidgetName = () =>\n\t\t\t\t\t\tstate.widgets[id] && state.widgets[id].name;\n\t\t\t\t\tfor (let k = 0; k < state.extensionMoves.length; k++) {\n\t\t\t\t\t\tconst move = state.extensionMoves[k];\n\t\t\t\t\t\tif (move.name === \"insert\") {\n\t\t\t\t\t\t\tconst { elements } = move;\n\t\t\t\t\t\t\tfor (let j = 0; j < elements.length; j++) {\n\t\t\t\t\t\t\t\tconst element = elements[j];\n\t\t\t\t\t\t\t\tif (element.name === getWidgetName()) {\n\t\t\t\t\t\t\t\t\tstate.extensionMoves[k].elements[j][item.attributes.name] =\n\t\t\t\t\t\t\t\t\t\titem.attributes.value;\n\t\t\t\t\t\t\t\t\tprocessed = true;\n\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tif (element.items && element.items.length) {\n\t\t\t\t\t\t\t\t\tlet inserted = setAttributeOnNewWidget(\n\t\t\t\t\t\t\t\t\t\telement.items,\n\t\t\t\t\t\t\t\t\t\titem,\n\t\t\t\t\t\t\t\t\t\tid,\n\t\t\t\t\t\t\t\t\t\tstate\n\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\tif (inserted) {\n\t\t\t\t\t\t\t\t\t\tprocessed = true;\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (processed) {\n\t\t\t\t\t\t\tconst attrIndex = list.findIndex(\n\t\t\t\t\t\t\t\t(item) => item.id === id && item.name === \"attribute\"\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\tlist.splice(attrIndex, 1);\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t};\n\tcleatVirtualAction();\n\tstate.extensionMoves.push(...list);\n}\n\nconst generateNestedView = (items) => {\n\tconst _items = items.map((item) => {\n\t\tlet _subItems = [];\n\t\tif (item.items) {\n\t\t\t_subItems = generateNestedView(item.items);\n\t\t}\n\t\treturn getWidgetObject(\n\t\t\t{ ...item, elements: _subItems },\n\t\t\t[],\n\t\t\tnull,\n\t\t\tMODEL_TYPE.BASE\n\t\t);\n\t});\n\n\treturn _items;\n};\n\nexport function getXML(extensionMoves, state) {\n\tconst patches = extensionMoves\n\t\t.map((move) => {\n\t\t\tlet fields;\n\t\t\tif (move.name === \"insert\") {\n\t\t\t\tfields = move.elements\n\t\t\t\t\t.map((field) => {\n\t\t\t\t\t\tif (field && field.items && field.items.length) {\n\t\t\t\t\t\t\tconst f = { ...field };\n\t\t\t\t\t\t\tf.elements = generateNestedView(field.items);\n\t\t\t\t\t\t\treturn f;\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn field;\n\t\t\t\t\t})\n\t\t\t\t\t.filter((e) => e);\n\t\t\t}\n\t\t\tif (!move.target) {\n\t\t\t\treturn undefined;\n\t\t\t}\n\t\t\treturn getExtendJson2({\n\t\t\t\ttarget: move.target,\n\t\t\t\tposition: move.position,\n\t\t\t\tsource: move.source,\n\t\t\t\ttype: move.name,\n\t\t\t\twidgetAttrs: fields,\n\t\t\t\t...move.attributes,\n\t\t\t});\n\t\t})\n\t\t.filter((e) => e);\n\treturn patches;\n}\n\nfunction insertOnNewPanel(items, widget, panelId, state) {\n\tconst widgets = state.widgets;\n\tlet inserted = false;\n\tconst getPanelName = () => widgets[panelId].name;\n\tfor (let i = 0; i < items.length; i++) {\n\t\tconst item = items[i];\n\t\tif (item.name === getPanelName()) {\n\t\t\tif (item.items) {\n\t\t\t\titem.items.push(widget);\n\t\t\t} else {\n\t\t\t\titem.items = [widget];\n\t\t\t}\n\t\t\tinserted = true;\n\t\t}\n\t\tif (inserted) {\n\t\t\tbreak;\n\t\t}\n\t\tif (item.items && item.items.length) {\n\t\t\tconst _inserted = insertOnNewPanel(item.items, widget, panelId, state);\n\t\t\tif (_inserted) {\n\t\t\t\tinserted = _inserted;\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t}\n\treturn inserted;\n}\n\nexport function processMoves(state, widget, id, panelId) {\n\tconst list = [];\n\tlet processed = false;\n\tconst widgets = state.widgets;\n\tconst getPanelName = () => widgets[panelId].name;\n\tfor (let i = 0; i < state.extensionMoves.length; i++) {\n\t\tconst move = state.extensionMoves[i];\n\t\tif (move.name === \"insert\") {\n\t\t\tconst { elements } = move;\n\t\t\tfor (let j = 0; j < elements.length; j++) {\n\t\t\t\tconst element = elements[j];\n\t\t\t\tif (\n\t\t\t\t\telement.name === getPanelName() &&\n\t\t\t\t\telement.items &&\n\t\t\t\t\telement.items.length === 0\n\t\t\t\t) {\n\t\t\t\t\tstate.extensionMoves[i].elements[j].items.push(widget);\n\t\t\t\t\tprocessed = true;\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t\tif (element.items && element.items.length) {\n\t\t\t\t\tlet inserted = insertOnNewPanel(\n\t\t\t\t\t\telement.items,\n\t\t\t\t\t\twidget,\n\t\t\t\t\t\tpanelId,\n\t\t\t\t\t\tstate\n\t\t\t\t\t);\n\t\t\t\t\tif (inserted) {\n\t\t\t\t\t\tprocessed = true;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tif (processed) {\n\t\t\tbreak;\n\t\t}\n\t}\n\tif (processed) {\n\t\tif (widget.xPath) {\n\t\t\tlist.push({ name: \"replace\", target: widget.xPath });\n\t\t}\n\t}\n\treturn list;\n}\n","import properties from \"./../Properties/list\";\nimport { MODEL_TYPE, TYPE } from \"./../constants\";\nimport { translate } from \"../utils\";\n\nexport function validate(field, modelType, isCustomField = false) {\n\tconst errors = {};\n\tlet selectedType =\n\t\tfield.serverType === \"field\" ? field.type : field.serverType || field.type;\n\tselectedType = selectedType && selectedType.toLowerCase().replace(/_/g, \"-\");\n\tlet property = properties.find((option) => option.type === selectedType);\n\tif (selectedType === \"form\") {\n\t\tif (modelType === MODEL_TYPE.CUSTOM) {\n\t\t\tproperty = properties.find((option) => option.type === \"modelForm\");\n\t\t}\n\t}\n\tif (\n\t\t!isCustomField &&\n\t\tmodelType === MODEL_TYPE.BASE &&\n\t\t[\n\t\t\tTYPE.panel,\n\t\t\tTYPE.panelStack,\n\t\t\tTYPE.tabs,\n\t\t\tTYPE.menu,\n\t\t\tTYPE.menubar,\n\t\t\tTYPE.toolbar,\n\t\t].includes(selectedType)\n\t) {\n\t\tif (field.items && field.items.length === 0) {\n\t\t\tconst message =\n\t\t\t\tselectedType === TYPE.menu\n\t\t\t\t\t? translate(\"Atleast one menu item required\")\n\t\t\t\t\t: translate(\"Atleast one children required\");\n\t\t\terrors[\"items\"] = message;\n\t\t}\n\t}\n\tif (!property) {\n\t\treturn errors;\n\t}\n\tconst propertyList = Object.keys(property.value).reduce((lst = [], key) => {\n\t\treturn [...lst, ...property.value[key]];\n\t}, []);\n\tpropertyList.forEach((property) => {\n\t\tconst addErrorMessage = () => {\n\t\t\terrors[property.name] = `${translate(\n\t\t\t\tproperty.title || property.name\n\t\t\t)} ${translate(\"required\")}`;\n\t\t};\n\t\tif (\n\t\t\t(property.requiredFor &&\n\t\t\t\tproperty.requiredFor.includes(selectedType) &&\n\t\t\t\t!field[property.name]) ||\n\t\t\t(property.required && !field[property.name])\n\t\t) {\n\t\t\taddErrorMessage();\n\t\t}\n\t\tif (\n\t\t\tproperty.requiredWhen &&\n\t\t\t(property.requiredNegation\n\t\t\t\t? !field[property.requiredWhen]\n\t\t\t\t: field[property.requiredWhen]) &&\n\t\t\t!field[property.name]\n\t\t) {\n\t\t\tif (field.isSelectionField) {\n\t\t\t\taddErrorMessage();\n\t\t\t} else if ([\"menuBuilderTitle\"].includes(property.name)) {\n\t\t\t\taddErrorMessage();\n\t\t\t} else if (\n\t\t\t\t[\"selectionText\"].includes(property.name) &&\n\t\t\t\tfield.updateSelection\n\t\t\t) {\n\t\t\t\taddErrorMessage();\n\t\t\t}\n\t\t}\n\t\tif (property.regex) {\n\t\t\tconst re = new RegExp(property.regex);\n\t\t\tif (!re.test(field[property.name]) && !errors[property.name]) {\n\t\t\t\terrors[property.name] = translate(property.regexErrorMessage);\n\t\t\t}\n\t\t}\n\t});\n\treturn errors;\n}\n\nexport function validateParentPanelItems(state, panelId) {\n\tconst panel = state.widgets[panelId];\n\tconst errors = state.errorList[panelId] || {};\n\tif (panel) {\n\t\tif (panel.items && panel.items.length > 0) {\n\t\t\tif (errors.items) {\n\t\t\t\tdelete errors.items;\n\t\t\t}\n\t\t} else {\n\t\t\terrors.items = translate(\"Atleast one children required\");\n\t\t}\n\t\tif (Object.keys(errors).length) {\n\t\t\tstate.errorList[panelId] = errors;\n\t\t} else {\n\t\t\tdelete state.errorList[panelId];\n\t\t}\n\t}\n}\n\nexport function validateOnRemove(state, id) {\n\tconst errors = state.errorList[id];\n\tif (errors) {\n\t\tdelete state.errorList[id];\n\t}\n}\n","const fontAwesome = [\n\t\"fa-500px\",\n\t\"fa-address-book\",\n\t\"fa-address-book-o\",\n\t\"fa-address-card\",\n\t\"fa-address-card-o\",\n\t\"fa-adjust\",\n\t\"fa-adn\",\n\t\"fa-align-center\",\n\t\"fa-align-justify\",\n\t\"fa-align-left\",\n\t\"fa-align-right\",\n\t\"fa-amazon\",\n\t\"fa-ambulance\",\n\t\"fa-american-sign-language-interpreting\",\n\t\"fa-anchor\",\n\t\"fa-android\",\n\t\"fa-angellist\",\n\t\"fa-angle-double-down\",\n\t\"fa-angle-double-left\",\n\t\"fa-angle-double-right\",\n\t\"fa-angle-double-up\",\n\t\"fa-angle-down\",\n\t\"fa-angle-left\",\n\t\"fa-angle-right\",\n\t\"fa-angle-up\",\n\t\"fa-apple\",\n\t\"fa-archive\",\n\t\"fa-area-chart\",\n\t\"fa-arrow-circle-down\",\n\t\"fa-arrow-circle-left\",\n\t\"fa-arrow-circle-o-down\",\n\t\"fa-arrow-circle-o-left\",\n\t\"fa-arrow-circle-o-right\",\n\t\"fa-arrow-circle-o-up\",\n\t\"fa-arrow-circle-right\",\n\t\"fa-arrow-circle-up\",\n\t\"fa-arrow-down\",\n\t\"fa-arrow-left\",\n\t\"fa-arrow-right\",\n\t\"fa-arrow-up\",\n\t\"fa-arrows\",\n\t\"fa-arrows-alt\",\n\t\"fa-arrows-h\",\n\t\"fa-arrows-v\",\n\t\"fa-asl-interpreting\",\n\t\"fa-assistive-listening-systems\",\n\t\"fa-asterisk\",\n\t\"fa-at\",\n\t\"fa-audio-description\",\n\t\"fa-automobile\",\n\t\"fa-backward\",\n\t\"fa-balance-scale\",\n\t\"fa-ban\",\n\t\"fa-bandcamp\",\n\t\"fa-bank\",\n\t\"fa-bar-chart\",\n\t\"fa-bar-chart-o\",\n\t\"fa-barcode\",\n\t\"fa-bars\",\n\t\"fa-bath\",\n\t\"fa-bathtub\",\n\t\"fa-battery\",\n\t\"fa-battery-0\",\n\t\"fa-battery-1\",\n\t\"fa-battery-2\",\n\t\"fa-battery-3\",\n\t\"fa-battery-4\",\n\t\"fa-battery-empty\",\n\t\"fa-battery-full\",\n\t\"fa-battery-half\",\n\t\"fa-battery-quarter\",\n\t\"fa-battery-three-quarters\",\n\t\"fa-bed\",\n\t\"fa-beer\",\n\t\"fa-behance\",\n\t\"fa-behance-square\",\n\t\"fa-bell\",\n\t\"fa-bell-o\",\n\t\"fa-bell-slash\",\n\t\"fa-bell-slash-o\",\n\t\"fa-bicycle\",\n\t\"fa-binoculars\",\n\t\"fa-birthday-cake\",\n\t\"fa-bitbucket\",\n\t\"fa-bitbucket-square\",\n\t\"fa-bitcoin\",\n\t\"fa-black-tie\",\n\t\"fa-blind\",\n\t\"fa-bluetooth\",\n\t\"fa-bluetooth-b\",\n\t\"fa-bold\",\n\t\"fa-bolt\",\n\t\"fa-bomb\",\n\t\"fa-book\",\n\t\"fa-bookmark\",\n\t\"fa-bookmark-o\",\n\t\"fa-braille\",\n\t\"fa-briefcase\",\n\t\"fa-btc\",\n\t\"fa-bug\",\n\t\"fa-building\",\n\t\"fa-building-o\",\n\t\"fa-bullhorn\",\n\t\"fa-bullseye\",\n\t\"fa-bus\",\n\t\"fa-buysellads\",\n\t\"fa-cab\",\n\t\"fa-calculator\",\n\t\"fa-calendar\",\n\t\"fa-calendar-check-o\",\n\t\"fa-calendar-minus-o\",\n\t\"fa-calendar-o\",\n\t\"fa-calendar-plus-o\",\n\t\"fa-calendar-times-o\",\n\t\"fa-camera\",\n\t\"fa-camera-retro\",\n\t\"fa-car\",\n\t\"fa-caret-down\",\n\t\"fa-caret-left\",\n\t\"fa-caret-right\",\n\t\"fa-caret-square-o-down\",\n\t\"fa-caret-square-o-left\",\n\t\"fa-caret-square-o-right\",\n\t\"fa-caret-square-o-up\",\n\t\"fa-caret-up\",\n\t\"fa-cart-arrow-down\",\n\t\"fa-cart-plus\",\n\t\"fa-cc\",\n\t\"fa-cc-amex\",\n\t\"fa-cc-diners-club\",\n\t\"fa-cc-discover\",\n\t\"fa-cc-jcb\",\n\t\"fa-cc-mastercard\",\n\t\"fa-cc-paypal\",\n\t\"fa-cc-stripe\",\n\t\"fa-cc-visa\",\n\t\"fa-certificate\",\n\t\"fa-chain\",\n\t\"fa-chain-broken\",\n\t\"fa-check\",\n\t\"fa-check-circle\",\n\t\"fa-check-circle-o\",\n\t\"fa-check-square\",\n\t\"fa-check-square-o\",\n\t\"fa-chevron-circle-down\",\n\t\"fa-chevron-circle-left\",\n\t\"fa-chevron-circle-right\",\n\t\"fa-chevron-circle-up\",\n\t\"fa-chevron-down\",\n\t\"fa-chevron-left\",\n\t\"fa-chevron-right\",\n\t\"fa-chevron-up\",\n\t\"fa-child\",\n\t\"fa-chrome\",\n\t\"fa-circle\",\n\t\"fa-circle-o\",\n\t\"fa-circle-o-notch\",\n\t\"fa-circle-thin\",\n\t\"fa-clipboard\",\n\t\"fa-clock-o\",\n\t\"fa-clone\",\n\t\"fa-close\",\n\t\"fa-cloud\",\n\t\"fa-cloud-download\",\n\t\"fa-cloud-upload\",\n\t\"fa-cny\",\n\t\"fa-code\",\n\t\"fa-code-fork\",\n\t\"fa-codepen\",\n\t\"fa-codiepie\",\n\t\"fa-coffee\",\n\t\"fa-cog\",\n\t\"fa-cogs\",\n\t\"fa-columns\",\n\t\"fa-comment\",\n\t\"fa-comment-o\",\n\t\"fa-commenting\",\n\t\"fa-commenting-o\",\n\t\"fa-comments\",\n\t\"fa-comments-o\",\n\t\"fa-compass\",\n\t\"fa-compress\",\n\t\"fa-connectdevelop\",\n\t\"fa-contao\",\n\t\"fa-copy\",\n\t\"fa-copyright\",\n\t\"fa-creative-commons\",\n\t\"fa-credit-card\",\n\t\"fa-credit-card-alt\",\n\t\"fa-crop\",\n\t\"fa-crosshairs\",\n\t\"fa-css3\",\n\t\"fa-cube\",\n\t\"fa-cubes\",\n\t\"fa-cut\",\n\t\"fa-cutlery\",\n\t\"fa-dashboard\",\n\t\"fa-dashcube\",\n\t\"fa-database\",\n\t\"fa-deaf\",\n\t\"fa-deafness\",\n\t\"fa-dedent\",\n\t\"fa-delicious\",\n\t\"fa-desktop\",\n\t\"fa-deviantart\",\n\t\"fa-diamond\",\n\t\"fa-digg\",\n\t\"fa-dollar\",\n\t\"fa-dot-circle-o\",\n\t\"fa-download\",\n\t\"fa-dribbble\",\n\t\"fa-drivers-license\",\n\t\"fa-drivers-license-o\",\n\t\"fa-dropbox\",\n\t\"fa-drupal\",\n\t\"fa-edge\",\n\t\"fa-edit\",\n\t\"fa-eercast\",\n\t\"fa-eject\",\n\t\"fa-ellipsis-h\",\n\t\"fa-ellipsis-v\",\n\t\"fa-empire\",\n\t\"fa-envelope\",\n\t\"fa-envelope-o\",\n\t\"fa-envelope-open\",\n\t\"fa-envelope-open-o\",\n\t\"fa-envelope-square\",\n\t\"fa-envira\",\n\t\"fa-eraser\",\n\t\"fa-etsy\",\n\t\"fa-eur\",\n\t\"fa-euro\",\n\t\"fa-exchange\",\n\t\"fa-exclamation\",\n\t\"fa-exclamation-circle\",\n\t\"fa-exclamation-triangle\",\n\t\"fa-expand\",\n\t\"fa-expeditedssl\",\n\t\"fa-external-link\",\n\t\"fa-external-link-square\",\n\t\"fa-eye\",\n\t\"fa-eye-slash\",\n\t\"fa-eyedropper\",\n\t\"fa-fa\",\n\t\"fa-facebook\",\n\t\"fa-facebook-f\",\n\t\"fa-facebook-official\",\n\t\"fa-facebook-square\",\n\t\"fa-fast-backward\",\n\t\"fa-fast-forward\",\n\t\"fa-fax\",\n\t\"fa-feed\",\n\t\"fa-female\",\n\t\"fa-fighter-jet\",\n\t\"fa-file\",\n\t\"fa-file-archive-o\",\n\t\"fa-file-audio-o\",\n\t\"fa-file-code-o\",\n\t\"fa-file-excel-o\",\n\t\"fa-file-image-o\",\n\t\"fa-file-movie-o\",\n\t\"fa-file-o\",\n\t\"fa-file-pdf-o\",\n\t\"fa-file-photo-o\",\n\t\"fa-file-picture-o\",\n\t\"fa-file-powerpoint-o\",\n\t\"fa-file-sound-o\",\n\t\"fa-file-text\",\n\t\"fa-file-text-o\",\n\t\"fa-file-video-o\",\n\t\"fa-file-word-o\",\n\t\"fa-file-zip-o\",\n\t\"fa-files-o\",\n\t\"fa-film\",\n\t\"fa-filter\",\n\t\"fa-fire\",\n\t\"fa-fire-extinguisher\",\n\t\"fa-firefox\",\n\t\"fa-first-order\",\n\t\"fa-flag\",\n\t\"fa-flag-checkered\",\n\t\"fa-flag-o\",\n\t\"fa-flash\",\n\t\"fa-flask\",\n\t\"fa-flickr\",\n\t\"fa-floppy-o\",\n\t\"fa-folder\",\n\t\"fa-folder-o\",\n\t\"fa-folder-open\",\n\t\"fa-folder-open-o\",\n\t\"fa-font\",\n\t\"fa-font-awesome\",\n\t\"fa-fonticons\",\n\t\"fa-fort-awesome\",\n\t\"fa-forumbee\",\n\t\"fa-forward\",\n\t\"fa-foursquare\",\n\t\"fa-free-code-camp\",\n\t\"fa-frown-o\",\n\t\"fa-futbol-o\",\n\t\"fa-gamepad\",\n\t\"fa-gavel\",\n\t\"fa-gbp\",\n\t\"fa-ge\",\n\t\"fa-gear\",\n\t\"fa-gears\",\n\t\"fa-genderless\",\n\t\"fa-get-pocket\",\n\t\"fa-gg\",\n\t\"fa-gg-circle\",\n\t\"fa-gift\",\n\t\"fa-git\",\n\t\"fa-git-square\",\n\t\"fa-github\",\n\t\"fa-github-alt\",\n\t\"fa-github-square\",\n\t\"fa-gitlab\",\n\t\"fa-gittip\",\n\t\"fa-glass\",\n\t\"fa-glide\",\n\t\"fa-glide-g\",\n\t\"fa-globe\",\n\t\"fa-google\",\n\t\"fa-google-plus\",\n\t\"fa-google-plus-circle\",\n\t\"fa-google-plus-official\",\n\t\"fa-google-plus-square\",\n\t\"fa-google-wallet\",\n\t\"fa-graduation-cap\",\n\t\"fa-gratipay\",\n\t\"fa-grav\",\n\t\"fa-group\",\n\t\"fa-h-square\",\n\t\"fa-hacker-news\",\n\t\"fa-hand-grab-o\",\n\t\"fa-hand-lizard-o\",\n\t\"fa-hand-o-down\",\n\t\"fa-hand-o-left\",\n\t\"fa-hand-o-right\",\n\t\"fa-hand-o-up\",\n\t\"fa-hand-paper-o\",\n\t\"fa-hand-peace-o\",\n\t\"fa-hand-pointer-o\",\n\t\"fa-hand-rock-o\",\n\t\"fa-hand-scissors-o\",\n\t\"fa-hand-spock-o\",\n\t\"fa-hand-stop-o\",\n\t\"fa-handshake-o\",\n\t\"fa-hard-of-hearing\",\n\t\"fa-hashtag\",\n\t\"fa-hdd-o\",\n\t\"fa-header\",\n\t\"fa-headphones\",\n\t\"fa-heart\",\n\t\"fa-heart-o\",\n\t\"fa-heartbeat\",\n\t\"fa-history\",\n\t\"fa-home\",\n\t\"fa-hospital-o\",\n\t\"fa-hotel\",\n\t\"fa-hourglass\",\n\t\"fa-hourglass-1\",\n\t\"fa-hourglass-2\",\n\t\"fa-hourglass-3\",\n\t\"fa-hourglass-end\",\n\t\"fa-hourglass-half\",\n\t\"fa-hourglass-o\",\n\t\"fa-hourglass-start\",\n\t\"fa-houzz\",\n\t\"fa-html5\",\n\t\"fa-i-cursor\",\n\t\"fa-id-badge\",\n\t\"fa-id-card\",\n\t\"fa-id-card-o\",\n\t\"fa-ils\",\n\t\"fa-image\",\n\t\"fa-imdb\",\n\t\"fa-inbox\",\n\t\"fa-indent\",\n\t\"fa-industry\",\n\t\"fa-info\",\n\t\"fa-info-circle\",\n\t\"fa-inr\",\n\t\"fa-instagram\",\n\t\"fa-institution\",\n\t\"fa-internet-explorer\",\n\t\"fa-intersex\",\n\t\"fa-ioxhost\",\n\t\"fa-italic\",\n\t\"fa-joomla\",\n\t\"fa-jpy\",\n\t\"fa-jsfiddle\",\n\t\"fa-key\",\n\t\"fa-keyboard-o\",\n\t\"fa-krw\",\n\t\"fa-language\",\n\t\"fa-laptop\",\n\t\"fa-lastfm\",\n\t\"fa-lastfm-square\",\n\t\"fa-leaf\",\n\t\"fa-leanpub\",\n\t\"fa-legal\",\n\t\"fa-lemon-o\",\n\t\"fa-level-down\",\n\t\"fa-level-up\",\n\t\"fa-life-bouy\",\n\t\"fa-life-buoy\",\n\t\"fa-life-ring\",\n\t\"fa-life-saver\",\n\t\"fa-lightbulb-o\",\n\t\"fa-line-chart\",\n\t\"fa-link\",\n\t\"fa-linkedin\",\n\t\"fa-linkedin-square\",\n\t\"fa-linode\",\n\t\"fa-linux\",\n\t\"fa-list\",\n\t\"fa-list-alt\",\n\t\"fa-list-ol\",\n\t\"fa-list-ul\",\n\t\"fa-location-arrow\",\n\t\"fa-lock\",\n\t\"fa-long-arrow-down\",\n\t\"fa-long-arrow-left\",\n\t\"fa-long-arrow-right\",\n\t\"fa-long-arrow-up\",\n\t\"fa-low-vision\",\n\t\"fa-magic\",\n\t\"fa-magnet\",\n\t\"fa-mail-forward\",\n\t\"fa-mail-reply\",\n\t\"fa-mail-reply-all\",\n\t\"fa-male\",\n\t\"fa-map\",\n\t\"fa-map-marker\",\n\t\"fa-map-o\",\n\t\"fa-map-pin\",\n\t\"fa-map-signs\",\n\t\"fa-mars\",\n\t\"fa-mars-double\",\n\t\"fa-mars-stroke\",\n\t\"fa-mars-stroke-h\",\n\t\"fa-mars-stroke-v\",\n\t\"fa-maxcdn\",\n\t\"fa-meanpath\",\n\t\"fa-medium\",\n\t\"fa-medkit\",\n\t\"fa-meetup\",\n\t\"fa-meh-o\",\n\t\"fa-mercury\",\n\t\"fa-microchip\",\n\t\"fa-microphone\",\n\t\"fa-microphone-slash\",\n\t\"fa-minus\",\n\t\"fa-minus-circle\",\n\t\"fa-minus-square\",\n\t\"fa-minus-square-o\",\n\t\"fa-mixcloud\",\n\t\"fa-mobile\",\n\t\"fa-mobile-phone\",\n\t\"fa-modx\",\n\t\"fa-money\",\n\t\"fa-moon-o\",\n\t\"fa-mortar-board\",\n\t\"fa-motorcycle\",\n\t\"fa-mouse-pointer\",\n\t\"fa-music\",\n\t\"fa-navicon\",\n\t\"fa-neuter\",\n\t\"fa-newspaper-o\",\n\t\"fa-object-group\",\n\t\"fa-object-ungroup\",\n\t\"fa-odnoklassniki\",\n\t\"fa-odnoklassniki-square\",\n\t\"fa-opencart\",\n\t\"fa-openid\",\n\t\"fa-opera\",\n\t\"fa-optin-monster\",\n\t\"fa-outdent\",\n\t\"fa-pagelines\",\n\t\"fa-paint-brush\",\n\t\"fa-paper-plane\",\n\t\"fa-paper-plane-o\",\n\t\"fa-paperclip\",\n\t\"fa-paragraph\",\n\t\"fa-paste\",\n\t\"fa-pause\",\n\t\"fa-pause-circle\",\n\t\"fa-pause-circle-o\",\n\t\"fa-paw\",\n\t\"fa-paypal\",\n\t\"fa-pencil\",\n\t\"fa-pencil-square\",\n\t\"fa-pencil-square-o\",\n\t\"fa-percent\",\n\t\"fa-phone\",\n\t\"fa-phone-square\",\n\t\"fa-photo\",\n\t\"fa-picture-o\",\n\t\"fa-pie-chart\",\n\t\"fa-pied-piper\",\n\t\"fa-pied-piper-alt\",\n\t\"fa-pied-piper-pp\",\n\t\"fa-pinterest\",\n\t\"fa-pinterest-p\",\n\t\"fa-pinterest-square\",\n\t\"fa-plane\",\n\t\"fa-play\",\n\t\"fa-play-circle\",\n\t\"fa-play-circle-o\",\n\t\"fa-plug\",\n\t\"fa-plus\",\n\t\"fa-plus-circle\",\n\t\"fa-plus-square\",\n\t\"fa-plus-square-o\",\n\t\"fa-podcast\",\n\t\"fa-power-off\",\n\t\"fa-print\",\n\t\"fa-product-hunt\",\n\t\"fa-puzzle-piece\",\n\t\"fa-qq\",\n\t\"fa-qrcode\",\n\t\"fa-question\",\n\t\"fa-question-circle\",\n\t\"fa-question-circle-o\",\n\t\"fa-quora\",\n\t\"fa-quote-left\",\n\t\"fa-quote-right\",\n\t\"fa-ra\",\n\t\"fa-random\",\n\t\"fa-ravelry\",\n\t\"fa-rebel\",\n\t\"fa-recycle\",\n\t\"fa-reddit\",\n\t\"fa-reddit-alien\",\n\t\"fa-reddit-square\",\n\t\"fa-refresh\",\n\t\"fa-registered\",\n\t\"fa-remove\",\n\t\"fa-renren\",\n\t\"fa-reorder\",\n\t\"fa-repeat\",\n\t\"fa-reply\",\n\t\"fa-reply-all\",\n\t\"fa-resistance\",\n\t\"fa-retweet\",\n\t\"fa-rmb\",\n\t\"fa-road\",\n\t\"fa-rocket\",\n\t\"fa-rotate-left\",\n\t\"fa-rotate-right\",\n\t\"fa-rouble\",\n\t\"fa-rss\",\n\t\"fa-rss-square\",\n\t\"fa-rub\",\n\t\"fa-ruble\",\n\t\"fa-rupee\",\n\t\"fa-s15\",\n\t\"fa-safari\",\n\t\"fa-save\",\n\t\"fa-scissors\",\n\t\"fa-scribd\",\n\t\"fa-search\",\n\t\"fa-search-minus\",\n\t\"fa-search-plus\",\n\t\"fa-sellsy\",\n\t\"fa-send\",\n\t\"fa-send-o\",\n\t\"fa-server\",\n\t\"fa-share\",\n\t\"fa-share-alt\",\n\t\"fa-share-alt-square\",\n\t\"fa-share-square\",\n\t\"fa-share-square-o\",\n\t\"fa-shekel\",\n\t\"fa-sheqel\",\n\t\"fa-shield\",\n\t\"fa-ship\",\n\t\"fa-shirtsinbulk\",\n\t\"fa-shopping-bag\",\n\t\"fa-shopping-basket\",\n\t\"fa-shopping-cart\",\n\t\"fa-shower\",\n\t\"fa-sign-in\",\n\t\"fa-sign-language\",\n\t\"fa-sign-out\",\n\t\"fa-signal\",\n\t\"fa-signing\",\n\t\"fa-simplybuilt\",\n\t\"fa-sitemap\",\n\t\"fa-skyatlas\",\n\t\"fa-skype\",\n\t\"fa-slack\",\n\t\"fa-sliders\",\n\t\"fa-slideshare\",\n\t\"fa-smile-o\",\n\t\"fa-snapchat\",\n\t\"fa-snapchat-ghost\",\n\t\"fa-snapchat-square\",\n\t\"fa-snowflake-o\",\n\t\"fa-soccer-ball-o\",\n\t\"fa-sort\",\n\t\"fa-sort-alpha-asc\",\n\t\"fa-sort-alpha-desc\",\n\t\"fa-sort-amount-asc\",\n\t\"fa-sort-amount-desc\",\n\t\"fa-sort-asc\",\n\t\"fa-sort-desc\",\n\t\"fa-sort-down\",\n\t\"fa-sort-numeric-asc\",\n\t\"fa-sort-numeric-desc\",\n\t\"fa-sort-up\",\n\t\"fa-soundcloud\",\n\t\"fa-space-shuttle\",\n\t\"fa-spinner\",\n\t\"fa-spoon\",\n\t\"fa-spotify\",\n\t\"fa-square\",\n\t\"fa-square-o\",\n\t\"fa-stack-exchange\",\n\t\"fa-stack-overflow\",\n\t\"fa-star\",\n\t\"fa-star-half\",\n\t\"fa-star-half-empty\",\n\t\"fa-star-half-full\",\n\t\"fa-star-half-o\",\n\t\"fa-star-o\",\n\t\"fa-steam\",\n\t\"fa-steam-square\",\n\t\"fa-step-backward\",\n\t\"fa-step-forward\",\n\t\"fa-stethoscope\",\n\t\"fa-sticky-note\",\n\t\"fa-sticky-note-o\",\n\t\"fa-stop\",\n\t\"fa-stop-circle\",\n\t\"fa-stop-circle-o\",\n\t\"fa-street-view\",\n\t\"fa-strikethrough\",\n\t\"fa-stumbleupon\",\n\t\"fa-stumbleupon-circle\",\n\t\"fa-subscript\",\n\t\"fa-subway\",\n\t\"fa-suitcase\",\n\t\"fa-sun-o\",\n\t\"fa-superpowers\",\n\t\"fa-superscript\",\n\t\"fa-support\",\n\t\"fa-table\",\n\t\"fa-tablet\",\n\t\"fa-tachometer\",\n\t\"fa-tag\",\n\t\"fa-tags\",\n\t\"fa-tasks\",\n\t\"fa-taxi\",\n\t\"fa-telegram\",\n\t\"fa-television\",\n\t\"fa-tencent-weibo\",\n\t\"fa-terminal\",\n\t\"fa-text-height\",\n\t\"fa-text-width\",\n\t\"fa-th\",\n\t\"fa-th-large\",\n\t\"fa-th-list\",\n\t\"fa-themeisle\",\n\t\"fa-thermometer\",\n\t\"fa-thermometer-0\",\n\t\"fa-thermometer-1\",\n\t\"fa-thermometer-2\",\n\t\"fa-thermometer-3\",\n\t\"fa-thermometer-4\",\n\t\"fa-thermometer-empty\",\n\t\"fa-thermometer-full\",\n\t\"fa-thermometer-half\",\n\t\"fa-thermometer-quarter\",\n\t\"fa-thermometer-three-quarters\",\n\t\"fa-thumb-tack\",\n\t\"fa-thumbs-down\",\n\t\"fa-thumbs-o-down\",\n\t\"fa-thumbs-o-up\",\n\t\"fa-thumbs-up\",\n\t\"fa-ticket\",\n\t\"fa-times\",\n\t\"fa-times-circle\",\n\t\"fa-times-circle-o\",\n\t\"fa-times-rectangle\",\n\t\"fa-times-rectangle-o\",\n\t\"fa-tint\",\n\t\"fa-toggle-down\",\n\t\"fa-toggle-left\",\n\t\"fa-toggle-off\",\n\t\"fa-toggle-on\",\n\t\"fa-toggle-right\",\n\t\"fa-toggle-up\",\n\t\"fa-trademark\",\n\t\"fa-train\",\n\t\"fa-transgender\",\n\t\"fa-transgender-alt\",\n\t\"fa-trash\",\n\t\"fa-trash-o\",\n\t\"fa-tree\",\n\t\"fa-trello\",\n\t\"fa-tripadvisor\",\n\t\"fa-trophy\",\n\t\"fa-truck\",\n\t\"fa-try\",\n\t\"fa-tty\",\n\t\"fa-tumblr\",\n\t\"fa-tumblr-square\",\n\t\"fa-turkish-lira\",\n\t\"fa-tv\",\n\t\"fa-twitch\",\n\t\"fa-twitter\",\n\t\"fa-twitter-square\",\n\t\"fa-umbrella\",\n\t\"fa-underline\",\n\t\"fa-undo\",\n\t\"fa-universal-access\",\n\t\"fa-university\",\n\t\"fa-unlink\",\n\t\"fa-unlock\",\n\t\"fa-unlock-alt\",\n\t\"fa-unsorted\",\n\t\"fa-upload\",\n\t\"fa-usb\",\n\t\"fa-usd\",\n\t\"fa-user\",\n\t\"fa-user-circle\",\n\t\"fa-user-circle-o\",\n\t\"fa-user-md\",\n\t\"fa-user-o\",\n\t\"fa-user-plus\",\n\t\"fa-user-secret\",\n\t\"fa-user-times\",\n\t\"fa-users\",\n\t\"fa-vcard\",\n\t\"fa-vcard-o\",\n\t\"fa-venus\",\n\t\"fa-venus-double\",\n\t\"fa-venus-mars\",\n\t\"fa-viacoin\",\n\t\"fa-viadeo\",\n\t\"fa-viadeo-square\",\n\t\"fa-video-camera\",\n\t\"fa-vimeo\",\n\t\"fa-vimeo-square\",\n\t\"fa-vine\",\n\t\"fa-vk\",\n\t\"fa-volume-control-phone\",\n\t\"fa-volume-down\",\n\t\"fa-volume-off\",\n\t\"fa-volume-up\",\n\t\"fa-warning\",\n\t\"fa-wechat\",\n\t\"fa-weibo\",\n\t\"fa-weixin\",\n\t\"fa-whatsapp\",\n\t\"fa-wheelchair\",\n\t\"fa-wheelchair-alt\",\n\t\"fa-wifi\",\n\t\"fa-wikipedia-w\",\n\t\"fa-window-close\",\n\t\"fa-window-close-o\",\n\t\"fa-window-maximize\",\n\t\"fa-window-minimize\",\n\t\"fa-window-restore\",\n\t\"fa-windows\",\n\t\"fa-won\",\n\t\"fa-wordpress\",\n\t\"fa-wpbeginner\",\n\t\"fa-wpexplorer\",\n\t\"fa-wpforms\",\n\t\"fa-wrench\",\n\t\"fa-xing\",\n\t\"fa-xing-square\",\n\t\"fa-y-combinator\",\n\t\"fa-y-combinator-square\",\n\t\"fa-yahoo\",\n\t\"fa-yc\",\n\t\"fa-yc-square\",\n\t\"fa-yelp\",\n\t\"fa-yen\",\n\t\"fa-yoast\",\n\t\"fa-youtube\",\n\t\"fa-youtube-play\",\n\t\"fa-youtube-square\",\n];\n\nexport default fontAwesome;\n","import fontAwesomeList from \"./fa-icons\";\nimport {\n\tName,\n\tType,\n\tTitle,\n\tDefaultValue,\n\tAppBuilder,\n\tHelp,\n\tSequence,\n\tRoles,\n\tValueExpression,\n\tSelection,\n\tWidget,\n\tOnChange,\n\tMin,\n\tMax,\n\tJsonRelationalField,\n\tDomain,\n\tTargetJsonModel,\n\tTargetModel,\n\tGridView,\n\tFormView,\n\tRequired,\n\tColumnSequence,\n\tReadOnly,\n\tHidden,\n\tVisibleInGrid,\n\tShowIf,\n\tHideIf,\n\tIf,\n\tRequiredIf,\n\tReadOnlyIf,\n\tIncludeIf,\n\tValidIf,\n\tColSpan,\n\tShowTitle,\n\tOnNew,\n\tEditable,\n\tDummyType,\n\tCanSearch,\n\tAction,\n\tIfModule,\n\tHeight,\n\tField,\n\tCanMove,\n\tOrderBy,\n\tIncludeFrom,\n\tIncludeView,\n\tIsGenerateMenu,\n\tMenuBuilderParent,\n\tMenuBuilderTitle,\n\tModel,\n\tStrong,\n\tColor,\n\tBackground,\n\tItemSpan,\n\tCss,\n\tPrompt,\n\tSelectionIn,\n\tValueAdd,\n\tValueDel,\n\tActive,\n\tRefresh,\n\tValue,\n\tSidebar,\n\tSelectionText,\n\tUpdateSelection,\n} from \"./propertyFields\";\nimport {\n\tStringField,\n\tIntegerField,\n\tStaticSelectField,\n\tSelectField,\n\tBooleanField,\n} from \"./fieldTypes\";\nimport { MODEL_TYPE } from \"./../constants\";\n\n/** Options */\nconst stringOption = {\n\toverview: [\n\t\tName({ existsCheck: true }),\n\t\tType,\n\t\tTitle,\n\t\tDefaultValue,\n\t\tAppBuilder,\n\t\tHelp,\n\t\tSequence,\n\t],\n\tfieldOptions: [\n\t\tSelection,\n\t\tUpdateSelection,\n\t\tSelectionText,\n\t\tSelectionIn,\n\t\tWidget,\n\t\tOnChange,\n\t\tMin,\n\t\tMax,\n\t\tStringField({ name: \"regex\", dependModelType: MODEL_TYPE.CUSTOM }),\n\t\tValue,\n\t],\n\tuiOptions: [\n\t\tRequired,\n\t\tReadOnly,\n\t\tBooleanField({\n\t\t\tname: \"nameField\",\n\t\t\ttitle: \"Name column\",\n\t\t\tdependModelType: MODEL_TYPE.CUSTOM,\n\t\t}),\n\t\tHidden,\n\t\tVisibleInGrid,\n\t\tColumnSequence,\n\t\tCss,\n\t],\n\tconditions: [ShowIf, HideIf, RequiredIf, ReadOnlyIf, IncludeIf, ValidIf],\n\tvalueExpr: [ValueExpression],\n\troles: [Roles],\n\twidgetAttributes: [\n\t\tColSpan,\n\t\tShowTitle,\n\t\tBooleanField({\n\t\t\tname: \"multiline\",\n\t\t\tparentField: \"widgetAttrs\",\n\t\t\tmodelType: MODEL_TYPE.CUSTOM,\n\t\t\tdependModelType: MODEL_TYPE.CUSTOM,\n\t\t}),\n\t],\n};\n\nconst integerOption = {\n\toverview: [\n\t\tName({ existsCheck: true }),\n\t\tType,\n\t\tTitle,\n\t\tDefaultValue,\n\t\tAppBuilder,\n\t\tHelp,\n\t\tSequence,\n\t],\n\tfieldOptions: [\n\t\tSelection,\n\t\tUpdateSelection,\n\t\tSelectionText,\n\t\tSelectionIn,\n\t\tWidget,\n\t\tOnChange,\n\t\tMin,\n\t\tMax,\n\t\tValue,\n\t],\n\tuiOptions: [Required, ReadOnly, Hidden, VisibleInGrid, ColumnSequence, Css],\n\tconditions: [ShowIf, HideIf, RequiredIf, ReadOnlyIf, IncludeIf, ValidIf],\n\tvalueExpr: [ValueExpression],\n\troles: [Roles],\n\twidgetAttributes: [ColSpan, ShowTitle],\n};\n\nconst decimalOption = {\n\toverview: [\n\t\tName({ existsCheck: true }),\n\t\tType,\n\t\tTitle,\n\t\tDefaultValue,\n\t\tAppBuilder,\n\t\tHelp,\n\t\tSequence,\n\t],\n\tfieldOptions: [\n\t\tWidget,\n\t\tOnChange,\n\t\tMin,\n\t\tMax,\n\t\tIntegerField({\n\t\t\tname: \"precision\",\n\t\t\tdefault: 6,\n\t\t}),\n\t\tIntegerField({\n\t\t\tname: \"scale\",\n\t\t\tdefault: 2,\n\t\t}),\n\t\tValue,\n\t],\n\tuiOptions: [Required, ReadOnly, Hidden, VisibleInGrid, ColumnSequence, Css],\n\tconditions: [ShowIf, HideIf, RequiredIf, ReadOnlyIf, IncludeIf, ValidIf],\n\tvalueExpr: [ValueExpression],\n\troles: [Roles],\n\twidgetAttributes: [ColSpan, ShowTitle],\n};\n\nconst booleanOption = {\n\toverview: [\n\t\tName({ existsCheck: true }),\n\t\tType,\n\t\tTitle,\n\t\tDefaultValue,\n\t\tAppBuilder,\n\t\tHelp,\n\t\tSequence,\n\t],\n\tfieldOptions: [Widget, OnChange, Value],\n\tuiOptions: [Required, ReadOnly, Hidden, VisibleInGrid, ColumnSequence, Css],\n\tconditions: [ShowIf, HideIf, RequiredIf, ReadOnlyIf, IncludeIf, ValidIf],\n\tvalueExpr: [ValueExpression],\n\troles: [Roles],\n\twidgetAttributes: [ColSpan, ShowTitle],\n};\n\nconst datetimeOption = {\n\toverview: [\n\t\tName({ existsCheck: true }),\n\t\tType,\n\t\tTitle,\n\t\tDefaultValue,\n\t\tAppBuilder,\n\t\tHelp,\n\t\tSequence,\n\t],\n\tfieldOptions: [Widget, OnChange, Value],\n\tuiOptions: [Required, ReadOnly, Hidden, VisibleInGrid, ColumnSequence, Css],\n\tconditions: [ShowIf, HideIf, RequiredIf, ReadOnlyIf, IncludeIf, ValidIf],\n\tvalueExpr: [ValueExpression],\n\troles: [Roles],\n\twidgetAttributes: [ColSpan, ShowTitle],\n};\n\nconst panelOption = {\n\toverview: [Name({ existsCheck: true }), Type, Title, AppBuilder],\n\tuiOptions: [\n\t\tReadOnly,\n\t\tHidden,\n\t\tSidebar,\n\t\tBooleanField({\n\t\t\tname: \"canCollapse\",\n\t\t\tparentField: \"widgetAttrs\",\n\t\t\tmodelType: MODEL_TYPE.CUSTOM,\n\t\t\tdependModelType: MODEL_TYPE.CUSTOM,\n\t\t}),\n\t\tStringField({\n\t\t\tname: \"collapseIf\",\n\t\t\tparentField: \"widgetAttrs\",\n\t\t\tmodelType: MODEL_TYPE.CUSTOM,\n\t\t\tdependModelType: MODEL_TYPE.CUSTOM,\n\t\t}),\n\t\tColumnSequence,\n\t\tCss,\n\t\tActive,\n\t],\n\tconditions: [ShowIf, HideIf, ReadOnlyIf],\n\troles: [Roles],\n\twidgetAttributes: [ColSpan, ItemSpan, ShowTitle],\n};\n\nconst panelStackOption = {\n\toverview: [Name({ existsCheck: true }), Type, AppBuilder],\n\tuiOptions: [\n\t\tReadOnly,\n\t\tHidden,\n\t\tSidebar,\n\t\tBooleanField({\n\t\t\tname: \"canCollapse\",\n\t\t\tparentField: \"widgetAttrs\",\n\t\t\tmodelType: MODEL_TYPE.CUSTOM,\n\t\t\tdependModelType: MODEL_TYPE.CUSTOM,\n\t\t}),\n\t\tStringField({\n\t\t\tname: \"collapseIf\",\n\t\t\tparentField: \"widgetAttrs\",\n\t\t\tmodelType: MODEL_TYPE.CUSTOM,\n\t\t\tdependModelType: MODEL_TYPE.CUSTOM,\n\t\t}),\n\t\tColumnSequence,\n\t\tCss,\n\t],\n\tconditions: [ShowIf, HideIf, ReadOnlyIf],\n\troles: [Roles],\n\twidgetAttributes: [ColSpan],\n};\n\nconst panelTabOption = {\n\toverview: [Name({ existsCheck: true }), Type, Title, AppBuilder],\n\tuiOptions: [ReadOnly, Hidden, ColumnSequence, Css],\n\tconditions: [ShowIf, HideIf, ReadOnlyIf],\n\troles: [Roles],\n\twidgetAttributes: [ShowTitle],\n};\n\nconst buttonOption = {\n\toverview: [\n\t\tName({ existsCheck: true }),\n\t\tType,\n\t\tTitle,\n\t\tAppBuilder,\n\t\tHelp,\n\t\tSequence,\n\t\tPrompt,\n\t],\n\tfieldOptions: [\n\t\tWidget,\n\t\tSelectField({\n\t\t\tname: \"onClick\",\n\t\t\ttitle: \"On click\",\n\t\t\trequired: true,\n\t\t\tref: \"com.axelor.meta.db.MetaAction\",\n\t\t\trequiredFor: [\"button\"],\n\t\t\tdependModelType: MODEL_TYPE.CUSTOM,\n\t\t\tmultiple: true,\n\t\t\tcommaSeparated: true,\n\t\t\tcanAddNew: true,\n\t\t}),\n\t],\n\tuiOptions: [ReadOnly, Hidden, VisibleInGrid, ColumnSequence, Css],\n\tconditions: [ShowIf, HideIf, RequiredIf, ReadOnlyIf, IncludeIf, ValidIf],\n\troles: [Roles],\n\twidgetAttributes: [\n\t\tColSpan,\n\t\tShowTitle,\n\t\tStaticSelectField({\n\t\t\tname: \"icon\",\n\t\t\ttitle: \"Icon\",\n\t\t\tdata: fontAwesomeList,\n\t\t\thelper: \"https://fontawesome.com/cheatsheet\",\n\t\t\tparentField: \"widgetAttrs\",\n\t\t\tmodelType: MODEL_TYPE.CUSTOM,\n\t\t}),\n\t\t// StaticSelectField({\n\t\t// \tname: \"color\",\n\t\t// \tdata: [\n\t\t// \t\t\"btn-default\",\n\t\t// \t\t\"btn-warning\",\n\t\t// \t\t\"btn-info\",\n\t\t// \t\t\"btn-success\",\n\t\t// \t\t\"btn-primary\",\n\t\t// \t\t\"btn-danger\",\n\t\t// \t],\n\t\t// \ttitle: \"Color\",\n\t\t// }),\n\t],\n};\n\nconst seperatorOption = {\n\toverview: [\n\t\tName({ existsCheck: true }),\n\t\tType,\n\t\tTitle,\n\t\tDefaultValue,\n\t\tAppBuilder,\n\t\tHelp,\n\t\tSequence,\n\t],\n\tuiOptions: [Hidden, ColumnSequence, Css],\n\tconditions: [ShowIf, HideIf, RequiredIf, ReadOnlyIf, IncludeIf, ValidIf],\n\troles: [Roles],\n\twidgetAttributes: [ColSpan],\n};\n\nconst spacerOption = {\n\toverview: [Name({ existsCheck: true }), Type, AppBuilder],\n\tfieldOptions: [],\n\tuiOptions: [Hidden, ColumnSequence, Css],\n\tconditions: [ShowIf, HideIf, ValidIf],\n\troles: [Roles],\n\twidgetAttributes: [ColSpan],\n};\n\nconst labelOption = {\n\toverview: [Name({ existsCheck: true }), Type, Title, AppBuilder],\n\tfieldOptions: [Widget],\n\tuiOptions: [Required, Hidden, ColumnSequence, Css],\n\tconditions: [ShowIf, HideIf, RequiredIf, ReadOnlyIf, ValidIf],\n\tvalueExpr: [ValueExpression],\n\troles: [Roles],\n\twidgetAttributes: [ColSpan, ShowTitle],\n};\n\nconst viewerOption = {\n\toverview: [Name({ existsCheck: true }), Type, Title, AppBuilder],\n\tfieldOptions: [Widget],\n\tuiOptions: [Required, Hidden, ReadOnly, ColumnSequence, Css],\n\tconditions: [ShowIf, HideIf, RequiredIf, ReadOnlyIf, ValidIf],\n\tvalueExpr: [ValueExpression],\n\troles: [Roles],\n\twidgetAttributes: [ColSpan, ShowTitle],\n};\n\nconst manyToOneOption = {\n\toverview: [\n\t\tName({ existsCheck: true }),\n\t\tType,\n\t\tTitle,\n\t\tDefaultValue,\n\t\tAppBuilder,\n\t\tHelp,\n\t\tSequence,\n\t],\n\tfieldOptions: [\n\t\tWidget,\n\t\tOnChange,\n\t\tJsonRelationalField,\n\t\tDomain,\n\t\tTargetModel,\n\t\tGridView,\n\t\tFormView,\n\t\tValue,\n\t],\n\tuiOptions: [Required, ReadOnly, Hidden, VisibleInGrid, ColumnSequence, Css],\n\tconditions: [ShowIf, HideIf, RequiredIf, ReadOnlyIf, IncludeIf, ValidIf],\n\tvalueExpr: [ValueExpression],\n\troles: [Roles],\n\twidgetAttributes: [ColSpan, ShowTitle],\n};\n\nconst manyToManyAndOneToManyOption = {\n\toverview: [\n\t\tName({ existsCheck: true }),\n\t\tType,\n\t\tTitle,\n\t\tAppBuilder,\n\t\tHelp,\n\t\tSequence,\n\t],\n\tfieldOptions: [\n\t\tWidget,\n\t\tOnChange,\n\t\tJsonRelationalField,\n\t\tDomain,\n\t\tTargetModel,\n\t\tGridView,\n\t\tFormView,\n\t\tValueAdd,\n\t\tValueDel,\n\t\tValue,\n\t],\n\tuiOptions: [Required, ReadOnly, Hidden, VisibleInGrid, ColumnSequence, Css],\n\tconditions: [ShowIf, HideIf, RequiredIf, ReadOnlyIf, IncludeIf, ValidIf],\n\tvalueExpr: [ValueExpression],\n\troles: [Roles],\n\twidgetAttributes: [ColSpan, ShowTitle],\n};\n\nconst customRelationOption = {\n\toverview: [\n\t\tName({ existsCheck: true }),\n\t\tType,\n\t\tTitle,\n\t\tAppBuilder,\n\t\tHelp,\n\t\tSequence,\n\t],\n\tfieldOptions: [\n\t\tWidget,\n\t\tOnChange,\n\t\tJsonRelationalField,\n\t\tDomain,\n\t\tTargetJsonModel,\n\t\tValue,\n\t],\n\tuiOptions: [Required, ReadOnly, Hidden, VisibleInGrid, ColumnSequence, Css],\n\tconditions: [ShowIf, HideIf, RequiredIf, ReadOnlyIf, IncludeIf, ValidIf],\n\tvalueExpr: [ValueExpression],\n\troles: [Roles],\n\twidgetAttributes: [ColSpan, ShowTitle],\n};\n\nconst formOption = {\n\toverview: [\n\t\tName({ existsCheck: true }),\n\t\t{ ...Title, required: true },\n\t\tAppBuilder,\n\t\tStaticSelectField({\n\t\t\tname: \"formWidth\",\n\t\t\ttitle: \"Form width\",\n\t\t\tdata: [\"large\"],\n\t\t}),\n\t\tStringField({\n\t\t\tname: \"orderBy\",\n\t\t\ttitle: \"Order by\",\n\t\t}),\n\t\tIsGenerateMenu,\n\t\tMenuBuilderParent,\n\t\tMenuBuilderTitle,\n\t],\n\tactions: [\n\t\tSelectField({\n\t\t\ttitle: \"On new\",\n\t\t\tname: \"onNew\",\n\t\t\tref: \"com.axelor.meta.db.MetaAction\",\n\t\t\tdependModelType: MODEL_TYPE.CUSTOM,\n\t\t\tmultiple: true,\n\t\t\tcommaSeparated: true,\n\t\t\tcanAddNew: true,\n\t\t}),\n\t\tSelectField({\n\t\t\ttitle: \"On save\",\n\t\t\tname: \"onSave\",\n\t\t\tref: \"com.axelor.meta.db.MetaAction\",\n\t\t\tdependModelType: MODEL_TYPE.CUSTOM,\n\t\t\tmultiple: true,\n\t\t\tcommaSeparated: true,\n\t\t\tcanAddNew: true,\n\t\t}),\n\t],\n};\n\nconst commonOption = {\n\toverview: [Name(), Type, Title, AppBuilder],\n\tuiOptions: [Hidden, VisibleInGrid, ColumnSequence, Css],\n\tconditions: [ShowIf, HideIf, ReadOnlyIf, IncludeIf, ValidIf],\n\twidgetAttributes: [ColSpan, ShowTitle],\n};\n\nconst dummyOption = {\n\toverview: [Name(), DummyType],\n};\nconst viewOption = {\n\toverview: [\n\t\tName({ existsCheck: true }),\n\t\tType,\n\t\t{ ...Title, readOnly: true, translationView: false },\n\t],\n};\n\nconst gridOption = {\n\toverview: [Name({ existsCheck: true }), Type, Title, Model, Editable],\n};\n\nconst panelDashletOption = {\n\toverview: [\n\t\tName({ existsCheck: true }),\n\t\tType,\n\t\tAction,\n\t\tTitle,\n\t\tCanSearch,\n\t\tIfModule,\n\t],\n\tuiOptions: [ReadOnly, Hidden, Height, Css, Refresh],\n\tconditions: [ShowIf, HideIf, ReadOnlyIf],\n\twidgetAttributes: [ColSpan, ShowTitle],\n};\n\nconst menuItemOption = {\n\toverview: [Name({ existsCheck: true }), Type, Action],\n\t// conditions: [If, ShowIf, HideIf, ReadOnlyIf],\n\twidgetAttributes: [ShowTitle],\n};\n\nconst dividerOption = {\n\toverview: [Name({ existsCheck: true }), Type],\n\tconditions: [If, ShowIf, HideIf, IfModule],\n};\n\nconst menuOption = {\n\toverview: [Name({ existsCheck: true }), Type],\n\twidgetAttributes: [\n\t\tShowTitle,\n\t\t// StaticSelectField({\n\t\t// \tname: \"icon\",\n\t\t// \ttitle: \"Icon\",\n\t\t// \tdata: fontAwesomeList,\n\t\t// \thelper: \"https://fontawesome.com/cheatsheet\",\n\t\t// })\n\t],\n\tconditions: [If, IfModule, IncludeIf],\n};\n\nconst panelRelatedOption = {\n\toverview: [Name({ existsCheck: true }), Type, Title, Field, OnNew, OnChange],\n\tuiOptions: [FormView, GridView, Height, Editable, ReadOnly, Hidden, Css],\n\tconditions: [ShowIf, HideIf, ReadOnlyIf, ValidIf, CanMove, OrderBy],\n\twidgetAttributes: [ColSpan, ShowTitle],\n};\n\nconst panelIncludeOption = {\n\toverview: [Type, IncludeView, IncludeFrom, IfModule],\n\twidgetAttributes: [ShowTitle],\n};\n\nconst hiliteOption = {\n\toverview: [Name({ existsCheck: true }), If, Color, Background, Strong, Css],\n};\n\nexport const options = [\n\t{ type: \"form\", value: viewOption },\n\t{ type: \"grid\", value: gridOption },\n\t{ type: \"modelForm\", value: formOption },\n\t{ type: \"string\", value: stringOption },\n\t{ type: \"byte[]\", value: stringOption },\n\t{ type: \"integer\", value: integerOption },\n\t{ type: \"number\", value: integerOption },\n\t{ type: \"decimal\", value: decimalOption },\n\t{ type: \"bigdecimal\", value: decimalOption },\n\t{ type: \"boolean\", value: booleanOption },\n\t{ type: \"datetime\", value: datetimeOption },\n\t{ type: \"localdatetime\", value: datetimeOption },\n\t{ type: \"zoneddatetime\", value: datetimeOption },\n\t{ type: \"date\", value: datetimeOption },\n\t{ type: \"localdate\", value: datetimeOption },\n\t{ type: \"time\", value: datetimeOption },\n\t{ type: \"panel\", value: panelOption, dependModelType: MODEL_TYPE.BASE },\n\t{ type: \"panel-stack\", value: panelStackOption },\n\t{ type: \"panel-tab\", value: panelTabOption },\n\t{ type: \"button\", value: buttonOption },\n\t{ type: \"separator\", value: seperatorOption },\n\t{ type: \"spacer\", value: spacerOption },\n\t{ type: \"label\", value: labelOption },\n\t{ type: \"many-to-one\", value: manyToOneOption },\n\t{ type: \"many-to-many\", value: manyToManyAndOneToManyOption },\n\t{ type: \"one-to-many\", value: manyToManyAndOneToManyOption },\n\t{ type: \"json-many-to-one\", value: customRelationOption },\n\t{ type: \"json-many-to-many\", value: customRelationOption },\n\t{ type: \"json-one-to-many\", value: customRelationOption },\n\t{ type: \"include\", value: formOption },\n\t{ type: \"panel-tabs\", value: panelTabOption, showInCustomField: false },\n\t{ type: \"panel-dashlet\", value: panelDashletOption },\n\t{ type: \"panel-related\", value: panelRelatedOption },\n\t{ type: \"panel-include\", value: panelIncludeOption },\n\t{ type: \"text\", value: commonOption },\n\t{ type: \"long\", value: decimalOption },\n\t{ type: \"panel-dashlet\", value: commonOption },\n\t{ type: \"dashlet\", value: commonOption },\n\t{ type: \"static\", value: commonOption },\n\t{ type: \"one-to-one\", value: manyToOneOption },\n\t{ type: \"binary\", value: commonOption },\n\t{ type: \"field\", value: commonOption },\n\t{ type: \"dummy\", value: dummyOption },\n\t{ type: \"viewer\", value: viewerOption },\n\t{ type: \"editor\", value: labelOption },\n\t{ type: \"menu\", value: menuOption },\n\t{ type: \"item\", value: menuItemOption },\n\t{ type: \"divider\", value: dividerOption },\n\t{ type: \"hilite\", value: hiliteOption },\n];\n\nexport default options;\n","/** Set field types */\nexport const StringField = ({ ...props }) => ({\n\ttype: \"string\",\n\t...props,\n});\n\nexport const ObjectSelectionField = ({ ...props }) => ({\n\ttype: \"objectSelection\",\n\t...props,\n});\n\nexport const IntegerField = ({ ...props }) => ({\n\ttype: \"integer\",\n\t...props,\n});\n\nexport const SelectField = ({ ...props }) => ({\n\ttype: \"select\",\n\tvalueField: \"name\",\n\t...props,\n});\n\nexport const StaticSelectField = ({ ...props }) => ({\n\ttype: \"staticSelect\",\n\t...props,\n});\n\nexport const BooleanField = ({ ...props }) => ({\n\ttype: \"boolean\",\n\t...props,\n});\n\nexport default {\n\tStringField,\n\tObjectSelectionField,\n\tIntegerField,\n\tSelectField,\n\tStaticSelectField,\n\tBooleanField,\n};\n","import React from \"react\";\nimport classNames from \"classnames\";\nimport Grid from \"./Grid\";\nimport { translate } from \"../utils\";\n\n/**\n * Menu Component\n * Used As Container to group Field Component like form group\n */\nfunction MenuComponent({ id, attrs, design, isTab = true, ...rest }) {\n\tconst errors = rest.errorList[id] || {};\n\tconst [openMenu, setOpenMenu] = React.useState(false);\n\n\tconst handleToggleMenu = React.useCallback((e) => {\n\t\te.stopPropagation();\n\t\tsetOpenMenu((m) => !m);\n\t}, []);\n\n\tconst arrow = openMenu ? \"down\" : \"up\";\n\treturn (\n\t\t<React.Fragment>\n\t\t\t<div\n\t\t\t\tclassName={classNames(\"menu-header\", {\n\t\t\t\t\tinline: isTab,\n\t\t\t\t})}\n\t\t\t>\n\t\t\t\t<div className=\"menu-toggle-button\" onClick={handleToggleMenu}>\n\t\t\t\t\t<i className={`fa fa-chevron-${arrow}`} />\n\t\t\t\t</div>\n\t\t\t\t<span>{translate(attrs.title || attrs.autoTitle)}</span>\n\t\t\t\t<div className=\"menu-toggle-button\" onClick={handleToggleMenu}>\n\t\t\t\t\t<i className={`fa fa-chevron-${arrow}`} />\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t{errors.items && !isTab && (\n\t\t\t\t<div className={classNames(\"panel-children-error\")}>{errors.items}</div>\n\t\t\t)}\n\t\t\t{openMenu && (\n\t\t\t\t<Grid\n\t\t\t\t\tdesign={design}\n\t\t\t\t\tclassName=\"panel-body\"\n\t\t\t\t\titems={attrs.items || []}\n\t\t\t\t\tattrs={attrs}\n\t\t\t\t\tpanelId={id}\n\t\t\t\t\t_type={rest._type}\n\t\t\t\t\terrorList={rest.errorList}\n\t\t\t\t\tcanRemove={rest.canRemove}\n\t\t\t\t/>\n\t\t\t)}\n\t\t</React.Fragment>\n\t);\n}\n\nexport default React.memo(MenuComponent);\n","import Field from \"./Field\";\nimport Panel from \"./Panel\";\nimport TabPanel from \"./TabPanel\";\nimport Form from \"./Form\";\nimport Menu from \"./Menu\";\n\n// common Registery contains all Form Components\nconst Registery = {\n\tfield: { component: Field, props: { className: \"field-container\" } },\n\tdump_field: {\n\t\tcomponent: Field,\n\t\tprops: { className: \"field-container dump\" },\n\t},\n\tpanel: { component: Panel, props: { className: \"panel\" } },\n\tmenubar: { component: Panel, props: { className: \"panel menubar\" } },\n\tmenu: { component: Menu, props: { className: \"panel menu\" } },\n\ttoolbar: { component: Panel, props: { className: \"panel toolbar\" } },\n\t\"panel-stack\": { component: Panel, props: { className: \"panel\" } },\n\t\"panel-include\": { component: Panel, props: { className: \"panel\" } },\n\tform: { component: Form, props: { className: \"form-layout\" } },\n\tcustomForm: { component: Form, props: { className: \"form-layout\" } },\n\t\"panel-tabs\": {\n\t\tcomponent: TabPanel,\n\t\tprops: { className: \"panel tabs-panel\" },\n\t},\n};\n\nexport default Registery;\n","import React from \"react\";\nimport classNames from \"classnames\";\nimport { compose } from \"recompose\";\nimport { DragSource, DropTarget } from \"react-dnd\";\n\nimport { useStore } from \"../store/context\";\nimport { TYPE as WIDGET_TYPE, IDS, MODEL_TYPE, FIELD_TYPE } from \"../constants\";\nimport Registry from \"./Registery\";\nimport { translate } from \"../utils\";\n\n// Unique Type for Widget\nconst TYPE = Symbol();\n\n// DragSource\nconst CardSource = {\n\t// evaluate widget is draggable or not\n\tcanDrag(props) {\n\t\tconst { state } = props;\n\t\tconst isCustomField = props._type === \"customField\";\n\t\t// temporary restrict real view movement\n\t\tif (\n\t\t\tstate.modelType === MODEL_TYPE.BASE &&\n\t\t\t!isCustomField &&\n\t\t\t!props.isPalleteField\n\t\t) {\n\t\t\treturn;\n\t\t}\n\t\treturn !(\n\t\t\tprops.id === IDS.dumpField ||\n\t\t\tprops.attrs.draggable === false ||\n\t\t\tprops.attrs.isDummy ||\n\t\t\tprops.attrs.type === WIDGET_TYPE.form\n\t\t);\n\t},\n\t// event, raise when start dragging widget\n\tbeginDrag(props) {\n\t\tconst _props = { ...props };\n\t\tconst isPanel = _props.attrs.serverType === \"panel\";\n\t\tif (\n\t\t\tprops.state.modelType === MODEL_TYPE.CUSTOM ||\n\t\t\tprops._type === \"customField\"\n\t\t) {\n\t\t\t_props.attrs = {\n\t\t\t\t..._props.attrs,\n\t\t\t\tmodel: \"com.axelor.meta.db.MetaJsonRecord\",\n\t\t\t\tmodelField: \"attrs\",\n\t\t\t\twidgetAttrs: JSON.stringify({\n\t\t\t\t\tcolSpan: JSON.parse(_props.attrs.widgetAttrs || \"{}\").colSpan,\n\t\t\t\t\tshowTitle: isPanel ? \"false\" : true,\n\t\t\t\t}),\n\t\t\t};\n\t\t} else if (props.state.modelType === MODEL_TYPE.BASE) {\n\t\t\tif (_props.attrs.isModelField) {\n\t\t\t\t_props.attrs = {\n\t\t\t\t\t..._props.attrs,\n\t\t\t\t\t...(_props.attrs.serverType !== \"field\" && {\n\t\t\t\t\t\ttype: _props.attrs.serverType,\n\t\t\t\t\t}),\n\t\t\t\t\tserverType: \"field\",\n\t\t\t\t};\n\t\t\t}\n\t\t\t_props.attrs = {\n\t\t\t\t..._props.attrs,\n\t\t\t\twidgetAttrs: JSON.stringify({\n\t\t\t\t\tshowTitle: isPanel ? \"false\" : true,\n\t\t\t\t}),\n\t\t\t};\n\t\t}\n\t\tprops.onDrag(props.id, { props: _props });\n\t\treturn { ...props };\n\t},\n\t// event, raise when dragging widget is droped on target or somewhere else\n\t// reset tasks\n\tendDrag(props, monitor) {\n\t\t// check widget is dropped or not, if not reset back to its position for existing element\n\t\t// for new element, remove it from schema\n\t\tprops.onDrag(null, {\n\t\t\tisDrop: monitor.didDrop(),\n\t\t\tprops: {},\n\t\t\tnewProps: monitor.getItem(),\n\t\t});\n\t},\n\t// currently dragged element, special case for nested drag source\n\tisDragging(props, monitor) {\n\t\treturn props.id === monitor.getItem().id;\n\t},\n};\n\n// DropTarget\nconst CardTarget = {\n\t// event, raised when one widget is hover on another widget\n\n\thover(props, monitor) {\n\t\tlet {\n\t\t\tindex: dragIndex,\n\t\t\tpanelId: dragPanelId,\n\t\t\tid: dragId,\n\t\t\tattrs: dragAttrs,\n\t\t} = monitor.getItem();\n\t\tlet {\n\t\t\tindex: hoverIndex,\n\t\t\tpanelId: hoverPanelId,\n\t\t\tid: hoverId,\n\t\t\tattrs: hoverAttrs,\n\t\t\tstate,\n\t\t\tmeta,\n\t\t\tsetHoverAttr,\n\t\t} = props;\n\t\tconst panelSet = [\n\t\t\tWIDGET_TYPE.panel,\n\t\t\tWIDGET_TYPE.panelDashlet,\n\t\t\tWIDGET_TYPE.panelRelated,\n\t\t\tWIDGET_TYPE.panelInclude,\n\t\t];\n\t\tconst isCustomField = props._type === \"customField\";\n\t\tconst widgets =\n\t\t\tprops._type === \"customField\" ? state.customFieldWidgets : state.widgets;\n\t\tconst parentPanel = props.panelId ? widgets[props.panelId] : null;\n\n\t\t/**\n\t\t * Don't allow tabs to move if in edit state\n\t\t * Don't allow tabs drop in first row or in between panels\n\t\t */\n\t\tif (!meta) return;\n\t\tif (dragAttrs.type === WIDGET_TYPE.tabs) {\n\t\t\tif (meta.row === 0 && !dragAttrs.isNew) return;\n\t\t\tif (meta.grid) {\n\t\t\t\tlet maxIndex = Math.max(...meta.grid.map((o) => o.rowIndex));\n\t\t\t\tif (meta.row < maxIndex) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\t//Don't allow panel after tabs\n\t\tif (dragAttrs.type === WIDGET_TYPE.panel) {\n\t\t\tconst { grid, row } = meta;\n\t\t\tconst gridTab = grid && grid.find((f) => f.type === WIDGET_TYPE.tabs);\n\t\t\tif (gridTab && gridTab.rowIndex < row) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t}\n\n\t\t// temporary restrict real view movement\n\t\tif (state.modelType === MODEL_TYPE.BASE && !isCustomField) {\n\t\t\treturn;\n\t\t}\n\t\tif ([WIDGET_TYPE.menubar, WIDGET_TYPE.toolbar].includes(dragAttrs.type)) {\n\t\t\tconst bar = Object.values(state.widgets || {}).find((w) =>\n\t\t\t\t[WIDGET_TYPE.menubar, WIDGET_TYPE.toolbar].includes(w.type)\n\t\t\t);\n\t\t\tconst rowCount = bar ? 2 : 0;\n\t\t\tif (hoverPanelId) return;\n\t\t\tif (!meta) return;\n\t\t\tif (meta.row > rowCount || meta.col !== 1) return;\n\t\t}\n\t\tif (\n\t\t\t(state.modelType === MODEL_TYPE.CUSTOM || isCustomField) &&\n\t\t\t[WIDGET_TYPE.menubar, WIDGET_TYPE.toolbar].includes(dragAttrs.serverType)\n\t\t) {\n\t\t\treturn;\n\t\t}\n\t\tif (\n\t\t\t![WIDGET_TYPE.menuItem, WIDGET_TYPE.menu, WIDGET_TYPE.divider].includes(\n\t\t\t\tdragAttrs.serverType\n\t\t\t) &&\n\t\t\tparentPanel &&\n\t\t\tparentPanel.type === WIDGET_TYPE.menu\n\t\t) {\n\t\t\treturn;\n\t\t}\n\t\tif (\n\t\t\t[WIDGET_TYPE.menuItem, WIDGET_TYPE.divider].includes(\n\t\t\t\tdragAttrs.serverType\n\t\t\t) &&\n\t\t\t(!parentPanel || parentPanel.type !== WIDGET_TYPE.menu)\n\t\t) {\n\t\t\treturn;\n\t\t}\n\t\tif (\n\t\t\t[WIDGET_TYPE.menu].includes(dragAttrs.serverType) &&\n\t\t\t(!parentPanel ||\n\t\t\t\t![WIDGET_TYPE.menu, WIDGET_TYPE.menubar].includes(parentPanel.type))\n\t\t) {\n\t\t\treturn;\n\t\t}\n\t\tif (\n\t\t\tparentPanel &&\n\t\t\tparentPanel.type === WIDGET_TYPE.menubar &&\n\t\t\tdragAttrs.type !== WIDGET_TYPE.menu\n\t\t) {\n\t\t\treturn;\n\t\t}\n\t\tif (\n\t\t\tparentPanel &&\n\t\t\tparentPanel.type === WIDGET_TYPE.toolbar &&\n\t\t\tdragAttrs.type !== FIELD_TYPE.button\n\t\t) {\n\t\t\treturn;\n\t\t}\n\t\tif (\n\t\t\t!parentPanel &&\n\t\t\t![\n\t\t\t\t...panelSet,\n\t\t\t\tWIDGET_TYPE.tabs,\n\t\t\t\tWIDGET_TYPE.panelStack,\n\t\t\t\tWIDGET_TYPE.menubar,\n\t\t\t\tWIDGET_TYPE.toolbar,\n\t\t\t].includes(dragAttrs.type)\n\t\t) {\n\t\t\treturn;\n\t\t}\n\t\t// when stacked is true do not allow to drop field except specified panel types.\n\t\tif (\n\t\t\tparentPanel &&\n\t\t\tparentPanel.type === WIDGET_TYPE.panelStack &&\n\t\t\t!panelSet.includes(dragAttrs.type)\n\t\t) {\n\t\t\treturn;\n\t\t}\n\t\tif (\n\t\t\tparentPanel &&\n\t\t\tparentPanel.type === WIDGET_TYPE.tabs &&\n\t\t\t!panelSet.includes(dragAttrs.type)\n\t\t) {\n\t\t\treturn;\n\t\t}\n\t\tif (\n\t\t\tstate.modelType === MODEL_TYPE.CUSTOM ||\n\t\t\tprops._type === \"customField\"\n\t\t) {\n\t\t\t// let hasPanel = false;\n\t\t\tif (\n\t\t\t\t[\n\t\t\t\t\tWIDGET_TYPE.panelDashlet,\n\t\t\t\t\tWIDGET_TYPE.panelInclude,\n\t\t\t\t\tWIDGET_TYPE.panelRelated,\n\t\t\t\t\tWIDGET_TYPE.panelStack,\n\t\t\t\t].includes(dragAttrs.type)\n\t\t\t) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\t// restrict nested panel drop in custom model\n\t\t\tconst widgets =\n\t\t\t\tprops._type === \"customField\"\n\t\t\t\t\t? state.customFieldWidgets\n\t\t\t\t\t: state.widgets;\n\t\t\tconst stateItems =\n\t\t\t\tprops._type === \"customField\" ? state.customFieldItems : state.items;\n\t\t\tconst hasTabPanel =\n\t\t\t\tObject.keys(widgets).findIndex(\n\t\t\t\t\t(widgetKey) => widgets[widgetKey].type === WIDGET_TYPE.tabs\n\t\t\t\t) !== -1;\n\t\t\tif (\n\t\t\t\thasTabPanel &&\n\t\t\t\tdragAttrs.type === WIDGET_TYPE.tabs &&\n\t\t\t\tdragAttrs.isNew\n\t\t\t) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tif (\n\t\t\t\t[WIDGET_TYPE.panel, WIDGET_TYPE.tabs].includes(dragAttrs.type) &&\n\t\t\t\tprops.panelId &&\n\t\t\t\t!stateItems.includes(props.panelId)\n\t\t\t) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\t// paneltab can drop inside panel tab\n\t\t\tif (\n\t\t\t\tparentPanel &&\n\t\t\t\tdragAttrs.type === WIDGET_TYPE.panel &&\n\t\t\t\tparentPanel.type !== WIDGET_TYPE.tabs\n\t\t\t) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tif (\n\t\t\t\tparentPanel &&\n\t\t\t\tdragAttrs.type === WIDGET_TYPE.tabs &&\n\t\t\t\tparentPanel.type === WIDGET_TYPE.panel\n\t\t\t) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tconst { hoverAttr } = state;\n\t\t\tconst { widgetAttrs = \"{}\" } = hoverAttr;\n\t\t\tconst _attrs = JSON.parse(widgetAttrs);\n\n\t\t\tif (\n\t\t\t\tparentPanel &&\n\t\t\t\tdragAttrs.type === WIDGET_TYPE.panel &&\n\t\t\t\tparentPanel.type === WIDGET_TYPE.tabs &&\n\t\t\t\t!_attrs.tab\n\t\t\t) {\n\t\t\t\tsetHoverAttr({\n\t\t\t\t\ttitle: dragAttrs.title || translate(\"Tab\"),\n\t\t\t\t\twidgetAttrs: JSON.stringify({ tab: \"true\" }),\n\t\t\t\t});\n\t\t\t} else if (\n\t\t\t\t!parentPanel &&\n\t\t\t\tdragAttrs.type === WIDGET_TYPE.panel &&\n\t\t\t\t_attrs.tab\n\t\t\t) {\n\t\t\t\tconst attrs = JSON.parse(dragAttrs.widgetAttrs || \"{}\");\n\t\t\t\tsetHoverAttr({\n\t\t\t\t\ttitle: dragAttrs.title,\n\t\t\t\t\twidgetAttrs: JSON.stringify({ ...attrs, tab: \"false\" }),\n\t\t\t\t});\n\t\t\t}\n\t\t} else {\n\t\t\tif (props.panelId) {\n\t\t\t\tconst parentPanel = widgets[props.panelId];\n\t\t\t\tif (\n\t\t\t\t\tparentPanel &&\n\t\t\t\t\t[WIDGET_TYPE.tabs, WIDGET_TYPE.panelStack].includes(dragAttrs.type)\n\t\t\t\t) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tif (\n\t\t\t\t\t[\n\t\t\t\t\t\tWIDGET_TYPE.panelDashlet,\n\t\t\t\t\t\tWIDGET_TYPE.panelRelated,\n\t\t\t\t\t\tWIDGET_TYPE.panelInclude,\n\t\t\t\t\t].includes(parentPanel.type)\n\t\t\t\t) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tif (dragAttrs.isCoreField === false && props._type === \"customField\") {\n\t\t\treturn;\n\t\t}\n\t\t// skip for same item drag n drop\n\t\t// skip for dragging widget in same panel\n\t\t// skip for other hover elements(monitor.isOver) specially for nested target\n\t\t// skip for dragging field directly on form\n\t\tif (\n\t\t\t(hoverIndex === dragIndex && dragPanelId === hoverPanelId) ||\n\t\t\t((hoverAttrs.type !== \"form\" && hoverAttrs.id) || []).indexOf(dragId) >\n\t\t\t\t-1 ||\n\t\t\t(dragAttrs.items || []).indexOf(hoverId) > -1 ||\n\t\t\t!monitor.isOver({ shallow: true }) ||\n\t\t\t(dragAttrs.type === WIDGET_TYPE.field &&\n\t\t\t\thoverAttrs.type === WIDGET_TYPE.form) ||\n\t\t\t(dragAttrs.type === WIDGET_TYPE.field && props.tabId !== undefined) ||\n\t\t\t(props.state.hoverWidget &&\n\t\t\t\tprops.state.hoverWidget.id === hoverId &&\n\t\t\t\tprops.state.hoverWidget.index === hoverIndex &&\n\t\t\t\tprops.state.hoverWidget.panelId === hoverPanelId)\n\t\t) {\n\t\t\treturn;\n\t\t}\n\n\t\t// Only for current dragging widget\n\t\tif (dragId === props.state.dragWidget) {\n\t\t\ttry {\n\t\t\t\tif (dragId && !dragAttrs.isNew && dragPanelId === hoverPanelId) {\n\t\t\t\t\tif (dragIndex + 1 === hoverIndex || dragIndex - 1 === hoverIndex) {\n\t\t\t\t\t\tprops.state.hoverWidget && props.onHover(null);\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tconst { isMoved } = props.onMove(\n\t\t\t\t\t{\n\t\t\t\t\t\tsource: {\n\t\t\t\t\t\t\tpanelId: dragPanelId,\n\t\t\t\t\t\t\tindex: dragIndex,\n\t\t\t\t\t\t\tid: dragId,\n\t\t\t\t\t\t\tattrs: dragAttrs,\n\t\t\t\t\t\t},\n\t\t\t\t\t\tdestination: {\n\t\t\t\t\t\t\tpanelId: hoverPanelId,\n\t\t\t\t\t\t\tindex: hoverIndex,\n\t\t\t\t\t\t\tid: hoverId,\n\t\t\t\t\t\t\tattrs: hoverAttrs,\n\t\t\t\t\t\t\t_type: props._type,\n\t\t\t\t\t\t},\n\t\t\t\t\t},\n\t\t\t\t\ttrue,\n\t\t\t\t\tprops._type\n\t\t\t\t);\n\t\t\t\tif (isMoved && props.onHover) {\n\t\t\t\t\tprops.onHover({\n\t\t\t\t\t\tmeta: props.meta || {},\n\t\t\t\t\t\tid: hoverId,\n\t\t\t\t\t\tindex: hoverIndex,\n\t\t\t\t\t\tpanelId: hoverPanelId,\n\t\t\t\t\t\tposition:\n\t\t\t\t\t\t\tprops.panelColumns &&\n\t\t\t\t\t\t\t(`${props.panelColumns}` === \"1\" ||\n\t\t\t\t\t\t\t\t`${props.panelColumns}` === `${dragAttrs.colSpan}`) &&\n\t\t\t\t\t\t\tprops.tabId === undefined\n\t\t\t\t\t\t\t\t? \"top\"\n\t\t\t\t\t\t\t\t: \"default\",\n\t\t\t\t\t\tattrs: hoverAttrs,\n\t\t\t\t\t\t_type: props._type,\n\t\t\t\t\t});\n\t\t\t\t} else {\n\t\t\t\t\tprops.state.hoverWidget && props.onHover(null);\n\t\t\t\t}\n\t\t\t} catch (e) {}\n\t\t}\n\n\t\tif (parentPanel && parentPanel.widgetAttrs) {\n\t\t\tlet parentWidgetAttrs = JSON.parse(parentPanel.widgetAttrs || \"{}\");\n\t\t\tlet dragAttrsWidgetAttrs = JSON.parse(dragAttrs.widgetAttrs || \"{}\");\n\t\t\tif (parentWidgetAttrs.itemSpan && !dragAttrsWidgetAttrs.colSpan) {\n\t\t\t\tsetHoverAttr({\n\t\t\t\t\tcolSpan: parentWidgetAttrs.itemSpan,\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t},\n\tcanDrop(props, monitor) {\n\t\tif (props?.attrs?.type === \"form\") return false;\n\t\treturn true;\n\t},\n};\n\nfunction Widget(props) {\n\tlet {\n\t\tid,\n\t\tisDragging,\n\t\tconnectDragSource,\n\t\tconnectDropTarget,\n\t\thighlighted,\n\t\thovered,\n\t\ttabId,\n\t\tclassName,\n\t\tcomponent: DefaultWidgetComponent,\n\t\tattrs,\n\t\tstate,\n\t\tupdate,\n\t\tonWidgetChange,\n\t\terrorList = {},\n\t\t...rest\n\t} = props;\n\tconst { dragWidget } = state;\n\tconst _widgets =\n\t\trest._type === \"customField\" ? state.customFieldWidgets : state.widgets;\n\t// special case for new element\n\t// hide/remove element from schema, if it drag outside form container(id=1)\n\tReact.useEffect(() => {\n\t\tupdate((draft) => {\n\t\t\tdraft.hoverWidget && (draft.hoverWidget.visible = hovered);\n\t\t});\n\t}, [update, hovered, id, dragWidget, attrs]);\n\n\tlet registryField = Registry[attrs.type] || Registry.field;\n\n\tif (rest.isTab && !Registry[attrs.type]) {\n\t\tregistryField = Registry[\"panel\"];\n\t}\n\n\tlet { component: WidgetComponent, props: componentProps = {} } =\n\t\tregistryField;\n\n\tif (DefaultWidgetComponent) {\n\t\tWidgetComponent = DefaultWidgetComponent;\n\t}\n\n\tlet isFormField = true;\n\tif (Object.values(IDS.createWidgets).indexOf(id) > -1) {\n\t\tisFormField = false;\n\t\tconnectDropTarget = (e) => e;\n\t}\n\tconst isEdit = isFormField && state.editWidget === id;\n\tconst isTabWidget = tabId !== undefined;\n\tconst isTabWidgetContent = isTabWidget ? !rest.isTab : false;\n\tconst showRemove =\n\t\tisFormField &&\n\t\tNumber(id) > 0 &&\n\t\t!isTabWidgetContent &&\n\t\trest.design &&\n\t\trest.canRemove !== false;\n\tif (\n\t\tisTabWidgetContent ||\n\t\t(id && id !== IDS.form && typeof id !== \"symbol\" && !attrs.isDummy)\n\t) {\n\t\tconnectDropTarget = (e) => e;\n\t}\n\tif (attrs.isExist === false || (!rest.design && IDS.dumpField)) return null;\n\treturn (\n\t\t<React.Fragment>\n\t\t\t{connectDragSource(\n\t\t\t\tconnectDropTarget(\n\t\t\t\t\t<div\n\t\t\t\t\t\t{...componentProps}\n\t\t\t\t\t\tclassName={classNames(\n\t\t\t\t\t\t\tclassName,\n\t\t\t\t\t\t\t\"widget\",\n\t\t\t\t\t\t\tcomponentProps.className,\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\"dummy-widget\": attrs.isDummy,\n\t\t\t\t\t\t\t\tedit: isEdit,\n\t\t\t\t\t\t\t\thighlighted: highlighted,\n\t\t\t\t\t\t\t\thovered: hovered,\n\t\t\t\t\t\t\t\tactive: isFormField && isDragging,\n\t\t\t\t\t\t\t\t\"form-field\": isFormField,\n\t\t\t\t\t\t\t\t\"panel-field\": attrs.type === \"panel\",\n\t\t\t\t\t\t\t\t\"non-title-panel\":\n\t\t\t\t\t\t\t\t\tattrs.type === \"panel\" && !rest.isTab && !attrs.title,\n\t\t\t\t\t\t\t\t// \"dummy-field\": attrs.serverType === \"field\",\n\t\t\t\t\t\t\t\t\"error-field\": Boolean(errorList[id]),\n\t\t\t\t\t\t\t\t\"pallete-field\": rest.isPalleteField,\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t)}\n\t\t\t\t\t\t_type={rest._type}\n\t\t\t\t\t\tonClick={(e) => {\n\t\t\t\t\t\t\tif (isFormField && rest.onSelect) {\n\t\t\t\t\t\t\t\te.stopPropagation();\n\t\t\t\t\t\t\t\tid !== IDS.dumpField && rest.onSelect({ id, type: rest._type });\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tif (isTabWidget) {\n\t\t\t\t\t\t\t\te.stopPropagation();\n\t\t\t\t\t\t\t\tif (id !== IDS.dumpField && _widgets[tabId]) {\n\t\t\t\t\t\t\t\t\tonWidgetChange({\n\t\t\t\t\t\t\t\t\t\tid: tabId,\n\t\t\t\t\t\t\t\t\t\tprops: {\n\t\t\t\t\t\t\t\t\t\t\tcurrent: id,\n\t\t\t\t\t\t\t\t\t\t\t_type: rest._type,\n\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}}\n\t\t\t\t\t>\n\t\t\t\t\t\t{!isTabWidgetContent &&\n\t\t\t\t\t\t\tstate.hoverWidget &&\n\t\t\t\t\t\t\ttypeof id !== \"symbol\" &&\n\t\t\t\t\t\t\tNumber(id) >= 0 &&\n\t\t\t\t\t\t\tstate.hoverWidget.index === rest.index &&\n\t\t\t\t\t\t\tstate.hoverWidget.visible !== false &&\n\t\t\t\t\t\t\tstate.hoverWidget.panelId === rest.panelId && (\n\t\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\t\tclassName={classNames(\n\t\t\t\t\t\t\t\t\t\t\"hover-liner\",\n\t\t\t\t\t\t\t\t\t\t{ \"dummy-widget\": attrs.isDummy || id === 0 },\n\t\t\t\t\t\t\t\t\t\tstate.hoverWidget.position\n\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t{WidgetComponent && (\n\t\t\t\t\t\t\t<WidgetComponent\n\t\t\t\t\t\t\t\tid={id}\n\t\t\t\t\t\t\t\tisDragging={state.dragWidget === id}\n\t\t\t\t\t\t\t\tattrs={attrs}\n\t\t\t\t\t\t\t\t_type={rest._type}\n\t\t\t\t\t\t\t\terrorList={errorList}\n\t\t\t\t\t\t\t\tcanRemove={rest.canRemove}\n\t\t\t\t\t\t\t\tdraggable={attrs.type !== WIDGET_TYPE.menubar}\n\t\t\t\t\t\t\t\t{...rest}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t)}\n\t\t\t\t\t\t{showRemove && !state.dragWidget && (\n\t\t\t\t\t\t\t<span\n\t\t\t\t\t\t\t\tonClick={(e) => {\n\t\t\t\t\t\t\t\t\tif (rest.onRemove) {\n\t\t\t\t\t\t\t\t\t\te.stopPropagation();\n\t\t\t\t\t\t\t\t\t\trest.onRemove(rest.panelId, rest.index, id, rest._type);\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\tclassName=\"widget-remove\"\n\t\t\t\t\t\t\t\ttitle={translate(\"Remove Widget\")}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<i className=\"fa fa-remove\" />\n\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t)}\n\t\t\t\t\t</div>\n\t\t\t\t)\n\t\t\t)}\n\t\t</React.Fragment>\n\t);\n}\n\nconst SimpleWidget = (props) => (\n\t<Widget\n\t\t{...props}\n\t\tconnectDropTarget={(e) => e}\n\t\tconnectDragSource={(e) => e}\n\t/>\n);\n\nconst DraggableWidget = compose(\n\tDropTarget(TYPE, CardTarget, (connect, monitor) => ({\n\t\thighlighted: false,\n\t\thovered: monitor.isOver(),\n\t\tconnectDropTarget: connect.dropTarget(),\n\t})),\n\tDragSource(TYPE, CardSource, (connect, monitor) => ({\n\t\tconnectDragSource: connect.dragSource(),\n\t\tisDragging: monitor.isDragging(),\n\t}))\n)(Widget);\n\nexport const WidgetComponent = (props) => {\n\tconst store = useStore();\n\tconst { state } = store;\n\tconst _widgets =\n\t\tprops._type === \"customField\" ? state.customFieldWidgets : state.widgets;\n\tconst attrs =\n\t\t_widgets && _widgets[props.id] ? _widgets[props.id] : props.attrs || {};\n\tconst _props = { ...store, attrs };\n\tconst draggable = attrs.type !== WIDGET_TYPE.menubar;\n\n\tif (props.design || draggable)\n\t\treturn <DraggableWidget {..._props} {...props} />;\n\treturn <SimpleWidget {..._props} {...props} />;\n};\n\nexport default React.memo(WidgetComponent);\n","import React from \"react\";\nimport Grid from \"./Grid\";\nimport { PANEL_TYPE } from \"../constants\";\n\n/**\n * Form Component\n * Used As Main Container i.e. <form />\n */\nfunction FormComponent({ attrs = {}, items = [], design, widgets, ...rest }) {\n\t// render top level items as Widgets using Context FormConsumer\n\tconst rootPanel = React.useMemo(() => {\n\t\tconst sidebar = items.filter(\n\t\t\t(k) => widgets[k] && [\"true\", true].includes(widgets[k].sidebar)\n\t\t);\n\t\tconst mainItems = items.filter(\n\t\t\t(k) => widgets[k] && ![\"true\", true].includes(widgets[k].sidebar)\n\t\t);\n\t\tconst hasSidebar = sidebar.length > 0;\n\n\t\treturn hasSidebar\n\t\t\t? {\n\t\t\t\t\titems: [\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tlayout: PANEL_TYPE.grid,\n\t\t\t\t\t\t\titems: mainItems,\n\t\t\t\t\t\t\tcolSpan: 9,\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tlayout: PANEL_TYPE.grid,\n\t\t\t\t\t\t\titems: sidebar,\n\t\t\t\t\t\t\tcolSpan: 3,\n\t\t\t\t\t\t},\n\t\t\t\t\t],\n\t\t\t  }\n\t\t\t: {\n\t\t\t\t\titems: [\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tlayout: PANEL_TYPE.grid,\n\t\t\t\t\t\t\titems: mainItems,\n\t\t\t\t\t\t\tcolSpan: 12,\n\t\t\t\t\t\t},\n\t\t\t\t\t],\n\t\t\t  };\n\t}, [items, widgets]);\n\n\treturn (\n\t\t<div className=\"flex-container\">\n\t\t\t{rootPanel.items.map(({ items, colSpan, ...attrs }, i) => (\n\t\t\t\t<div className={`flex-item span-${colSpan}`} key={i}>\n\t\t\t\t\t<Grid\n\t\t\t\t\t\tkey={i}\n\t\t\t\t\t\tdesign={design}\n\t\t\t\t\t\tclassName=\"form-body\"\n\t\t\t\t\t\titems={items}\n\t\t\t\t\t\tattrs={attrs}\n\t\t\t\t\t\t_type={rest._type}\n\t\t\t\t\t\twidgets={widgets}\n\t\t\t\t\t\terrorList={rest.errorList}\n\t\t\t\t\t\tcanRemove={rest.canRemove}\n\t\t\t\t\t/>\n\t\t\t\t</div>\n\t\t\t))}\n\t\t</div>\n\t);\n}\n\nexport default FormComponent;\n","import React, { useState, useEffect } from \"react\";\nimport AxelorService from \"../services/axelor.rest\";\nimport { fetchCustomModel } from \"../Toolbar/api\";\nimport { translate, getDefaultGridFormName } from \"../utils\";\n\nconst metaViewService = new AxelorService({\n\tmodel: \"com.axelor.meta.db.MetaView\",\n});\nconst excludedUITypes = [\"panel\", \"label\", \"spacer\", \"button\"];\n\nconst showInGrid = (item) => {\n\treturn (\n\t\t!excludedUITypes.includes(item.type) && item.visibleInGrid && !item.hidden\n\t);\n};\n\nfunction RelationalFieldGridView({ attrs, id }) {\n\tconst {\n\t\tgridView,\n\t\ttargetModel: target,\n\t\ttitle,\n\t\tautoTitle,\n\t\taction,\n\t\ttargetJsonModel,\n\t} = attrs || {};\n\tconst [gridItems, setGridItems] = useState([]);\n\tconst [gridTitle, setGridTitle] = useState(null);\n\n\tuseEffect(() => {\n\t\tasync function getGrid() {\n\t\t\tlet viewName = gridView;\n\t\t\tif (action) {\n\t\t\t\tconst _context = {\n\t\t\t\t\t_id: null,\n\t\t\t\t};\n\t\t\t\tconst data = {\n\t\t\t\t\taction,\n\t\t\t\t\tmodel: \"com.axelor.meta.db.MetaAction\",\n\t\t\t\t\tdata: {\n\t\t\t\t\t\tcontext: _context,\n\t\t\t\t\t},\n\t\t\t\t};\n\n\t\t\t\tconst actionResult = await metaViewService.action(data);\n\t\t\t\tif (\n\t\t\t\t\tactionResult.data &&\n\t\t\t\t\tactionResult.data[0] &&\n\t\t\t\t\tactionResult.data[0].view &&\n\t\t\t\t\tactionResult.data[0].view.views\n\t\t\t\t) {\n\t\t\t\t\tconst view = actionResult.data[0].view.views.find(\n\t\t\t\t\t\t(v) => v.type === \"grid\"\n\t\t\t\t\t);\n\t\t\t\t\tif (view) {\n\t\t\t\t\t\tviewName = view.name;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (targetJsonModel) {\n\t\t\t\tlet model;\n\t\t\t\tif (!targetJsonModel.name && targetJsonModel.id) {\n\t\t\t\t\tmodel = await fetchCustomModel(targetJsonModel.id);\n\t\t\t\t}\n\t\t\t\tviewName = getDefaultGridFormName(\n\t\t\t\t\tmodel || targetJsonModel,\n\t\t\t\t\tfalse,\n\t\t\t\t\ttrue\n\t\t\t\t);\n\t\t\t}\n\t\t\tconst payload = {\n\t\t\t\tmodel: target,\n\t\t\t\tdata: {\n\t\t\t\t\ttype: \"grid\",\n\t\t\t\t\tname: viewName,\n\t\t\t\t},\n\t\t\t};\n\t\t\tif (viewName) {\n\t\t\t\tmetaViewService.view(payload).then((res) => {\n\t\t\t\t\tif (res.data && res.data.view) {\n\t\t\t\t\t\tconst { items = [], title } = res.data.view;\n\t\t\t\t\t\tsetGridTitle(title);\n\t\t\t\t\t\tif (targetJsonModel) {\n\t\t\t\t\t\t\tconst gridItems = [];\n\t\t\t\t\t\t\titems.forEach((item) => {\n\t\t\t\t\t\t\t\tconst { jsonFields = [] } = item;\n\t\t\t\t\t\t\t\tjsonFields.forEach((i) => {\n\t\t\t\t\t\t\t\t\tif (showInGrid(i)) {\n\t\t\t\t\t\t\t\t\t\tgridItems.push(i);\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\tsetGridItems(() => [...(gridItems || [])]);\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tconst { fields = [], jsonAttrs = [] } = res.data;\n\t\t\t\t\t\tlet displayFields = {};\n\t\t\t\t\t\tfields.forEach((field) => {\n\t\t\t\t\t\t\tdisplayFields[field.name] = field.title;\n\t\t\t\t\t\t});\n\t\t\t\t\t\tconst allFields = items.map((i) => {\n\t\t\t\t\t\t\treturn { ...i, title: displayFields[i.name] };\n\t\t\t\t\t\t});\n\n\t\t\t\t\t\tif (jsonAttrs && jsonAttrs.length > 0) {\n\t\t\t\t\t\t\tjsonAttrs.forEach((i) => {\n\t\t\t\t\t\t\t\tif (showInGrid(i)) {\n\t\t\t\t\t\t\t\t\tallFields.push(i);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\t\t\t\t\t\tsetGridItems(allFields);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\tsetGridItems([]);\n\t\t\t}\n\t\t}\n\t\tgetGrid();\n\t}, [gridView, target, targetJsonModel, id, action]);\n\n\treturn (\n\t\t<div>\n\t\t\t<div className=\"one-to-many-header\">\n\t\t\t\t<span>{translate(title || gridTitle || autoTitle)}</span>\n\t\t\t</div>\n\t\t\t<table>\n\t\t\t\t<tbody className=\"one-to-many-row\">\n\t\t\t\t\t{[...Array(3)].map((e, index) => (\n\t\t\t\t\t\t<tr style={{ display: \"flex\" }} key={`row_${index}`}>\n\t\t\t\t\t\t\t{gridItems.map((item, i) => (\n\t\t\t\t\t\t\t\t<td\n\t\t\t\t\t\t\t\t\tclassName=\"one-to-many-col one-to-many-col-border\"\n\t\t\t\t\t\t\t\t\tkey={`td_${i}`}\n\t\t\t\t\t\t\t\t\tstyle={{ borderBottom: index === 0 ? \"1px solid #ddd\" : \"\" }}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t{index === 0 && item\n\t\t\t\t\t\t\t\t\t\t? translate(item.title || item.autoTitle)\n\t\t\t\t\t\t\t\t\t\t: \"\"}\n\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t))}\n\t\t\t\t\t\t</tr>\n\t\t\t\t\t))}\n\t\t\t\t</tbody>\n\t\t\t</table>\n\t\t</div>\n\t);\n}\n\nexport default RelationalFieldGridView;\n","import React from \"react\";\nimport classNames from \"classnames\";\nimport { IDS, FIELD_TYPE, TYPE } from \"../constants\";\nimport RelationalFieldGridView from \"./RelationalFieldGridView\";\nimport { translate } from \"../utils\";\n\n// filter html(tags) compatible attributes\nconst filterInputProps = (props) => {\n\tconst allowed = [\n\t\t\"name\",\n\t\t\"title\",\n\t\t\"defaultValue\",\n\t\t\"placeholder\",\n\t\t\"readOnly\",\n\t\t\"checked\",\n\t\t\"disabled\",\n\t\t\"rows\",\n\t\t\"required\",\n\t];\n\t// return valid object with values\n\treturn allowed.reduce((obj, attr) => {\n\t\tif (props[attr] !== undefined) obj[attr] = props[attr];\n\t\tif (attr === \"required\") {\n\t\t\tobj[attr] = props[attr] === \"true\";\n\t\t}\n\t\treturn obj;\n\t}, {});\n};\n\n// Plain Textbox\nexport const TextInput = (props) => {\n\treturn (\n\t\t<input type=\"text\" autoComplete=\"off\" {...props} className=\"text-input\" />\n\t);\n};\n\n// Multiline Textbox i.e. Textarea\nexport const MultiTextInput = (props) => {\n\treturn <textarea rows={6} {...props} />;\n};\n\n// Blank Spacer to fill up space between two cells of Grid\nexport const Spacer = (props) => <div className=\"spacer\" />;\n\nexport const Separator = (props) => (\n\t<div className=\"spacer\">\n\t\t<hr className=\"separator-field\" />\n\t</div>\n);\n\nexport const Boolean = ({ inputProps, ...props }) => (\n\t<div className=\"boolean-wrapper\">\n\t\t<input {...inputProps} type=\"checkbox\" />\n\t\t<span className=\"boolean-text\" title={translate(props.title || props.name)}>\n\t\t\t{translate(props.title || props.name)}\n\t\t</span>\n\t</div>\n);\n\n// Button component\nexport const Button = ({ title, ...props }) => (\n\t<div className=\"button-container\">\n\t\t<button {...props} className=\"button-view\" title={translate(title)}>\n\t\t\t{translate(title)}\n\t\t</button>\n\t</div>\n);\n\nexport const MenuItem = ({ title, ...props }) => (\n\t<div className=\"menu-item-container\">{translate(title)}</div>\n);\n\nexport const Hilite = ({ color, background, strong }) => {\n\treturn (\n\t\t<div\n\t\t\tclassName={classNames(\n\t\t\t\t`hilite hilite hilite-background-${background} hilite-text-${color}`,\n\t\t\t\t{ \"hilite-strong\": strong }\n\t\t\t)}\n\t\t>\n\t\t\thilite\n\t\t</div>\n\t);\n};\n\n/**\n * Form \"Field\" Component\n * Used For User Inputs\n */\nfunction FieldComponent({ id, attrs }) {\n\t// check for dump field for empty panels\n\tif (id === IDS.dumpField) {\n\t\treturn <div className=\"dump-field\" />;\n\t}\n\n\tconst { name, title, serverType, multiline, type, autoTitle, widget } = attrs;\n\tconst inputProps = filterInputProps(attrs);\n\tlet _type =\n\t\tserverType && serverType !== \"field\" ? serverType.toLowerCase() : type;\n\tconst DefaultWidget = () => (\n\t\t<React.Fragment>\n\t\t\t{\n\t\t\t\t<label\n\t\t\t\t\tclassName=\"widget label\"\n\t\t\t\t\ttitle={translate(title || attrs.autoTitle || name)}\n\t\t\t\t>\n\t\t\t\t\t{translate(title || attrs.autoTitle || name)}\n\t\t\t\t</label>\n\t\t\t}\n\t\t\t{multiline ? (\n\t\t\t\t<MultiTextInput {...inputProps} />\n\t\t\t) : attrs.widget === \"Image\" ? (\n\t\t\t\t<img\n\t\t\t\t\talt={title || attrs.autoTitle || name}\n\t\t\t\t\tsrc=\"./images/not_found.png\"\n\t\t\t\t\tclassName=\"image-widget\"\n\t\t\t\t/>\n\t\t\t) : (\n\t\t\t\t<TextInput\n\t\t\t\t\ttype={serverType === FIELD_TYPE.number ? \"number\" : \"text\"}\n\t\t\t\t\t{...inputProps}\n\t\t\t\t/>\n\t\t\t)}\n\t\t</React.Fragment>\n\t);\n\n\tswitch (_type?.toLowerCase()) {\n\t\tcase FIELD_TYPE.boolean:\n\t\t\treturn (\n\t\t\t\t<Boolean\n\t\t\t\t\ttitle={title || autoTitle}\n\t\t\t\t\tname={name}\n\t\t\t\t\tinputProps={inputProps}\n\t\t\t\t/>\n\t\t\t);\n\t\tcase FIELD_TYPE.spacer:\n\t\t\treturn <Spacer />;\n\t\tcase FIELD_TYPE.hilite:\n\t\t\treturn <Hilite {...attrs} />;\n\t\tcase FIELD_TYPE.separator:\n\t\tcase TYPE.divider:\n\t\t\treturn <Separator />;\n\t\tcase TYPE.menuItem:\n\t\t\treturn <MenuItem title={title} />;\n\t\tcase FIELD_TYPE.button:\n\t\t\treturn <Button {...inputProps} title={title || name} />;\n\t\tcase \"selection\":\n\t\tcase \"label\": {\n\t\t\treturn <span dangerouslySetInnerHTML={{ __html: title }} />;\n\t\t}\n\t\tcase \"panel-dashlet\":\n\t\tcase \"panel-related\":\n\t\tcase \"one-to-many\":\n\t\tcase \"json-one-to-many\":\n\t\t\treturn <RelationalFieldGridView attrs={attrs} id={id} />;\n\t\tcase \"many-to-many\":\n\t\tcase \"json-many-to-many\":\n\t\t\treturn widget !== \"TagSelect\" ? (\n\t\t\t\t<RelationalFieldGridView attrs={attrs} id={id} />\n\t\t\t) : (\n\t\t\t\t<DefaultWidget />\n\t\t\t);\n\t\tdefault:\n\t\t\treturn <DefaultWidget />;\n\t}\n}\n\nexport default FieldComponent;\n","import { TYPE, IDS, ItemTypes } from \"./constants\";\n\nexport const fieldTypes = [\n\t{\n\t\tname: \"Common\",\n\t\tvalue: [\n\t\t\t{\n\t\t\t\tname: \"label\",\n\t\t\t\ttitle: \"Label\",\n\t\t\t\ttype: \"label\",\n\t\t\t\timage: \"label.png\",\n\t\t\t\tid: IDS.createWidgets.field,\n\t\t\t\tserverType: \"label\",\n\t\t\t\tcolSpan: 6,\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: \"button\",\n\t\t\t\ttype: \"button\",\n\t\t\t\ttitle: \"Button\",\n\t\t\t\timage: \"button.png\",\n\t\t\t\tid: IDS.createWidgets.field,\n\t\t\t\tserverType: \"button\",\n\t\t\t\tcolSpan: 6,\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: \"separator\",\n\t\t\t\ttype: \"separator\",\n\t\t\t\ttitle: \"Separator\",\n\t\t\t\timage: \"seperator.png\",\n\t\t\t\tid: IDS.createWidgets.field,\n\t\t\t\tserverType: \"separator\",\n\t\t\t\tcolSpan: 6,\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: \"spacer\",\n\t\t\t\ttype: \"spacer\",\n\t\t\t\ttitle: \"Spacer\",\n\t\t\t\tserverType: \"spacer\",\n\t\t\t\timage: \"line_spacing.png\",\n\t\t\t\tid: IDS.createWidgets.field,\n\t\t\t\tcolSpan: 6,\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: \"selection\",\n\t\t\t\ttitle: \"Selection\",\n\t\t\t\ttype: ItemTypes.ITEM,\n\t\t\t\timage: \"integer.png\",\n\t\t\t\tid: IDS.createWidgets.field,\n\t\t\t\tserverType: \"string\",\n\t\t\t\tisSelectionField: true,\n\t\t\t\tcolSpan: 6,\n\t\t\t},\n\t\t],\n\t},\n\t{\n\t\tname: \"Panels\",\n\t\tvalue: [\n\t\t\t{\n\t\t\t\tname: \"panel\",\n\t\t\t\ttype: ItemTypes.CONTAINER,\n\t\t\t\titems: [],\n\t\t\t\timage: \"panel.png\",\n\t\t\t\tid: IDS.createWidgets.panel,\n\t\t\t\tserverType: TYPE.panel,\n\t\t\t\tcols: 12,\n\t\t\t\tlayout: \"grid\",\n\t\t\t\tcolSpan: 12,\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: \"Tabs\",\n\t\t\t\ttype: TYPE.tabs,\n\t\t\t\timage: \"panel_tabs.png\",\n\t\t\t\ttab: true,\n\t\t\t\titems: [],\n\t\t\t\tid: IDS.createWidgets.tabs,\n\t\t\t\tserverType: TYPE.panel,\n\t\t\t\tisNew: true,\n\t\t\t\tcolSpan: 12,\n\t\t\t\ttitle: \"Tabs\",\n\t\t\t\tcurrent: null,\n\t\t\t\tlayout: \"grid\",\n\t\t\t},\n\t\t],\n\t},\n];\n\nexport const modelFields = [\n\t{\n\t\tname: \"Fields\",\n\t\tvalue: [\n\t\t\t{\n\t\t\t\tname: \"string\",\n\t\t\t\ttype: ItemTypes.ITEM,\n\t\t\t\ttitle: \"String\",\n\t\t\t\timage: \"string.png\",\n\t\t\t\tid: IDS.createWidgets.field,\n\t\t\t\tisModelField: true,\n\t\t\t\tserverType: \"string\",\n\t\t\t\tcolSpan: 6,\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: \"integer\",\n\t\t\t\ttype: ItemTypes.ITEM,\n\t\t\t\ttitle: \"Integer\",\n\t\t\t\timage: \"integer.png\",\n\t\t\t\tid: IDS.createWidgets.field,\n\t\t\t\tisModelField: true,\n\t\t\t\tserverType: \"integer\",\n\t\t\t\tcolSpan: 6,\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: \"decimal\",\n\t\t\t\ttype: ItemTypes.ITEM,\n\t\t\t\ttitle: \"Decimal\",\n\t\t\t\timage: \"decimal.png\",\n\t\t\t\tid: IDS.createWidgets.field,\n\t\t\t\tisModelField: true,\n\t\t\t\tserverType: \"decimal\",\n\t\t\t\tcolSpan: 6,\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: \"boolean\",\n\t\t\t\ttype: ItemTypes.ITEM,\n\t\t\t\ttitle: \"Boolean\",\n\t\t\t\timage: \"boolean.png\",\n\t\t\t\tid: IDS.createWidgets.field,\n\t\t\t\tisModelField: true,\n\t\t\t\tserverType: \"boolean\",\n\t\t\t\tcolSpan: 6,\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: \"datetime\",\n\t\t\t\ttype: ItemTypes.ITEM,\n\t\t\t\ttitle: \"Date time\",\n\t\t\t\timage: \"datetime.png\",\n\t\t\t\tid: IDS.createWidgets.field,\n\t\t\t\tisModelField: true,\n\t\t\t\tserverType: \"datetime\",\n\t\t\t\tcolSpan: 6,\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: \"date\",\n\t\t\t\ttype: ItemTypes.ITEM,\n\t\t\t\ttitle: \"Date\",\n\t\t\t\timage: \"date.png\",\n\t\t\t\tid: IDS.createWidgets.field,\n\t\t\t\tisModelField: true,\n\t\t\t\tserverType: \"date\",\n\t\t\t\tcolSpan: 6,\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: \"time\",\n\t\t\t\ttype: ItemTypes.ITEM,\n\t\t\t\ttitle: \"Time\",\n\t\t\t\timage: \"time.png\",\n\t\t\t\tid: IDS.createWidgets.field,\n\t\t\t\tisModelField: true,\n\t\t\t\tserverType: \"time\",\n\t\t\t\tcolSpan: 6,\n\t\t\t},\n\t\t],\n\t},\n\t{\n\t\tname: \"Relational fields\",\n\t\tvalue: [\n\t\t\t{\n\t\t\t\tname: \"manyToOne\",\n\t\t\t\ttype: ItemTypes.ITEM,\n\t\t\t\ttitle: \"Many to one\",\n\t\t\t\timage: \"many-to-one.png\",\n\t\t\t\tid: IDS.createWidgets.field,\n\t\t\t\tisModelField: true,\n\t\t\t\tserverType: \"many-to-one\",\n\t\t\t\tcolSpan: 6,\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: \"oneToMany\",\n\t\t\t\ttype: ItemTypes.ITEM,\n\t\t\t\ttitle: \"One to many\",\n\t\t\t\timage: \"one-to-many.png\",\n\t\t\t\tid: IDS.createWidgets.field,\n\t\t\t\tisModelField: true,\n\t\t\t\tserverType: \"one-to-many\",\n\t\t\t\tcolSpan: 6,\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: \"manyToMany\",\n\t\t\t\ttype: ItemTypes.ITEM,\n\t\t\t\ttitle: \"Many to many\",\n\t\t\t\timage: \"many-to-many.png\",\n\t\t\t\tid: IDS.createWidgets.field,\n\t\t\t\tisModelField: true,\n\t\t\t\tserverType: \"many-to-many\",\n\t\t\t\tcolSpan: 6,\n\t\t\t},\n\t\t],\n\t},\n];\n","import Utils from \"./../utils\";\nimport { MODEL_TYPE, TYPE } from \"./../constants\";\n\nconst exemptedAttrs = [\n\t\"items\",\n\t\"cols\",\n\t\"serverType\",\n\t\"version\",\n\t\"type\",\n\t\"widgetAttrs\",\n\t\"current\",\n\t\"selectionList\",\n\t\"autoTitle\",\n\t\"isModelField\",\n\t\"elements\",\n\t\"relationship\",\n\t\"isDummy\",\n\t\"metaModel\",\n\t\"targetSearch\",\n\t\"layout\",\n\t\"massUpdate\",\n\t\"xPath\",\n\t\"tz\",\n];\n\nexport function getExtensionAttribute(patchList, target, keyName) {\n\tlet extend;\n\tfor (let i = 0; i < patchList.length; i++) {\n\t\tconst { elements = [], attributes: patchAttributes } = patchList[i];\n\t\tconst element = elements[0];\n\t\tif (element.name === \"attribute\" && patchAttributes.target === target) {\n\t\t\tconst attributes = element.attributes || {};\n\t\t\tif (attributes.name === keyName) {\n\t\t\t\textend = { ...patchList[i] };\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t}\n\treturn extend;\n}\n\nfunction checkTarget(target, string, check) {\n\tconst splitTarget = Utils.exploreTarget(target);\n\tif (check) {\n\t\tconst newTarget = splitTarget[check];\n\t\tif (newTarget && newTarget === string) {\n\t\t\treturn true;\n\t\t}\n\t\treturn false;\n\t}\n\treturn target === string;\n}\n\nexport function isExtensionRemove(patchList, target, check) {\n\tlet flag = false;\n\tfor (let i = 0; i < patchList.length; i++) {\n\t\tconst { attributes, elements = [] } = patchList[i];\n\t\tconst element = elements[0];\n\t\tif (\n\t\t\telement.name === \"replace\" &&\n\t\t\tattributes &&\n\t\t\tcheckTarget(attributes.target, target, check)\n\t\t) {\n\t\t\tflag = true;\n\t\t\tbreak;\n\t\t}\n\t}\n\treturn flag;\n}\n\nexport function isExtensionMove(patchList, widget, parentWidget) {\n\tlet flag = false;\n\tfor (let i = 0; i < patchList.length; i++) {\n\t\tconst { elements = [] } = patchList[i];\n\t\tconst element = elements[0];\n\t\tlet sourceName = `/${Utils.getWidgetType(widget)}[@name='${widget.name}']`;\n\t\tif (parentWidget && parentWidget.name) {\n\t\t\tsourceName = `//${Utils.getWidgetType(parentWidget)}[@name='${\n\t\t\t\tparentWidget.name\n\t\t\t}']${sourceName}`;\n\t\t}\n\t\tif (\n\t\t\telement.name === \"move\" &&\n\t\t\telement.attributes &&\n\t\t\telement.attributes.source === sourceName\n\t\t) {\n\t\t\tflag = true;\n\t\t\tbreak;\n\t\t}\n\t}\n\treturn flag;\n}\n\nfunction getWidgetAttrsObject(widget, modelType = MODEL_TYPE.BASE) {\n\treturn getWidgetObject(widget, [], null, modelType);\n}\n\nexport function getExtendJson2({\n\ttarget,\n\ttype,\n\tposition,\n\tsource,\n\tname,\n\tvalue,\n\twidgetAttrs,\n\titemSource,\n\t...rest\n}) {\n\tconst attributes = { target };\n\tlet elements = [];\n\tif (widgetAttrs && ![\"replace\", \"attribute\", \"move\"].includes(type)) {\n\t\tif (Array.isArray(widgetAttrs)) {\n\t\t\telements = widgetAttrs\n\t\t\t\t.map((widget) => {\n\t\t\t\t\treturn getWidgetAttrsObject(widget);\n\t\t\t\t})\n\t\t\t\t.filter((e) => e);\n\t\t} else {\n\t\t\telements.push(getWidgetAttrsObject(widgetAttrs));\n\t\t}\n\t}\n\tif (elements.length || [\"replace\", \"attribute\", \"move\"].includes(type)) {\n\t\tconst object = {\n\t\t\tattributes,\n\t\t\ttype: \"element\",\n\t\t\tname: \"extend\",\n\t\t\telements: [\n\t\t\t\t{\n\t\t\t\t\ttype: \"element\",\n\t\t\t\t\tname: type,\n\t\t\t\t\tattributes: {\n\t\t\t\t\t\tposition,\n\t\t\t\t\t\tsource,\n\t\t\t\t\t\tname,\n\t\t\t\t\t\tvalue,\n\t\t\t\t\t},\n\t\t\t\t\telements,\n\t\t\t\t},\n\t\t\t],\n\t\t};\n\t\treturn JSON.parse(JSON.stringify(object));\n\t}\n\treturn;\n}\n\nexport function getWidgetObject(widget, other = [], view, modelType) {\n\tconst { id, image, elements = [], ...attributes } = widget;\n\tconst uiFields = [\n\t\t\"panel\",\n\t\t\"panel-related\",\n\t\t\"panel-dashlet\",\n\t\t\"panel-tabs\",\n\t\t\"panel-stack\",\n\t\t\"panel-include\",\n\t\t\"button\",\n\t\t\"label\",\n\t\t\"spacer\",\n\t\t\"separator\",\n\t\t\"menu\",\n\t\t\"item\",\n\t\t\"toolbar\",\n\t\t\"menubar\",\n\t\t\"divider\",\n\t];\n\tlet exempt = [...exemptedAttrs];\n\tlet field = uiFields.includes(attributes.type) ? attributes.type : \"field\";\n\tfield = uiFields.includes(attributes.serverType)\n\t\t? attributes.serverType\n\t\t: field;\n\tfield = widget.tab ? \"panel-tabs\" : field;\n\tif (attributes.type === TYPE.panelInclude) {\n\t\texempt = [...exempt, \"title\", \"colSpan\"];\n\t}\n\tif (field === TYPE.tabs) {\n\t\texempt = [...exempt, \"tab\", \"title\"];\n\t}\n\tif (field === \"spacer\") {\n\t\texempt = [...exempt, \"title\", \"isDummy\"];\n\t}\n\tif (field === TYPE.panelInclude) {\n\t\texempt = [...exempt, \"module\", \"name\"];\n\t}\n\tif ([TYPE.menu, TYPE.menuItem, TYPE.toolbar, TYPE.menubar].includes(field)) {\n\t\texempt = [...exempt, \"colSpan\"];\n\t}\n\tif ([TYPE.toolbar, TYPE.menubar].includes(field)) {\n\t\texempt = [...exempt, \"colSpan\", \"name\", \"title\"];\n\t}\n\tif ([TYPE.divider].includes(field)) {\n\t\texempt = [...exempt, \"colSpan\", \"title\"];\n\t}\n\tlet object = {};\n\tobject = {\n\t\tattributes: {\n\t\t\t...Utils.getWidgetAttrs(attributes, exempt, modelType),\n\t\t},\n\t\ttype: \"element\",\n\t\tname: field,\n\t\telements: [...other, ...elements],\n\t};\n\treturn object;\n}\n\nexport function generateView(widgets, items, modelType) {\n\tlet view = {};\n\tlet elements = [];\n\tif (items.length) {\n\t\titems.forEach((item) => {\n\t\t\tconst widget = widgets[item];\n\t\t\tlet subViews = [];\n\t\t\tif (widget) {\n\t\t\t\tif (widget.items && widget.items.length) {\n\t\t\t\t\tsubViews = generateView(widgets, widget.items, modelType);\n\t\t\t\t}\n\t\t\t\telements.push({\n\t\t\t\t\t...getWidgetObject(widget, subViews, view, modelType),\n\t\t\t\t});\n\t\t\t}\n\t\t});\n\t}\n\treturn elements;\n}\n","import React from \"react\";\nimport classNames from \"classnames\";\nimport Tooltip from \"@material-ui/core/Tooltip\";\nimport AddIcon from \"@material-ui/icons/Add\";\n\nimport { GridContainer, useGridWidget } from \"./Grid\";\nimport { translate } from \"../utils\";\nimport { useStoreState } from \"../store/context\";\nimport { MODEL_TYPE } from \"../constants\";\n\nconst panelAttrs = { cols: 1 };\n\n/**\n * Panel Component\n * Used As Container to group Field Component like form group\n */\nfunction TabPanelComponent(props) {\n\tconst WidgetComponent = useGridWidget();\n\tconst { modelType } = useStoreState();\n\tconst { id, attrs, isDragging, isTab = false, addTabPanel, ...rest } = props;\n\tconst { title, items = [] } = attrs;\n\tlet { current } = attrs;\n\tconst tabs = [...items.slice()].reduce(\n\t\t(all, tab) => all.concat([tab, 0]),\n\t\t[0]\n\t);\n\t// reuse common tab attributes\n\tconst getTabAttributes = (id, index) => ({\n\t\tkey: !id ? `${id}${index}` : id,\n\t\tid,\n\t\tmeta: {\n\t\t\thorizontal: true,\n\t\t},\n\t\tindex,\n\t\tpanelId: props.id,\n\t\tpanelColumns: attrs.cols,\n\t\ttabId: props.id,\n\t});\n\tlet activeTabIndex = items.indexOf(current);\n\t// if active tab index not found, take first element as active one\n\tif (activeTabIndex === -1) {\n\t\tactiveTabIndex = 0;\n\t\tcurrent = items.length ? items[0] : 0;\n\t}\n\n\treturn (\n\t\t<React.Fragment>\n\t\t\t{title && (\n\t\t\t\t<div\n\t\t\t\t\tclassName={classNames(\"panel-header panel-tab-header\", {\n\t\t\t\t\t\tinline: isTab,\n\t\t\t\t\t})}\n\t\t\t\t>\n\t\t\t\t\t{title}\n\t\t\t\t</div>\n\t\t\t)}\n\t\t\t{!isTab && (\n\t\t\t\t<GridContainer className={\"panel-body\"} attrs={panelAttrs}>\n\t\t\t\t\t<div className={classNames(\"tabs\")}>\n\t\t\t\t\t\t{tabs.map(\n\t\t\t\t\t\t\t(tab, i) =>\n\t\t\t\t\t\t\t\tWidgetComponent && (\n\t\t\t\t\t\t\t\t\t<WidgetComponent\n\t\t\t\t\t\t\t\t\t\t{...rest}\n\t\t\t\t\t\t\t\t\t\t{...getTabAttributes(tab, i)}\n\t\t\t\t\t\t\t\t\t\tisTab={true}\n\t\t\t\t\t\t\t\t\t\tclassName={current === tab ? \"active-tab\" : \"\"}\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t)}\n\t\t\t\t\t\t{!(\n\t\t\t\t\t\t\tmodelType === MODEL_TYPE.BASE && props._type !== \"customField\"\n\t\t\t\t\t\t) && (\n\t\t\t\t\t\t\t<div style={{ display: \"flex\", alignItems: \"center\" }}>\n\t\t\t\t\t\t\t\t<Tooltip title={translate(\"Add tab\")} arrow>\n\t\t\t\t\t\t\t\t\t<AddIcon onClick={() => addTabPanel({ attrs, id })} />\n\t\t\t\t\t\t\t\t</Tooltip>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t)}\n\t\t\t\t\t</div>\n\t\t\t\t\t{items.length > 0 && WidgetComponent && (\n\t\t\t\t\t\t<WidgetComponent\n\t\t\t\t\t\t\t{...rest}\n\t\t\t\t\t\t\t{...getTabAttributes(current, activeTabIndex)}\n\t\t\t\t\t\t/>\n\t\t\t\t\t)}\n\t\t\t\t</GridContainer>\n\t\t\t)}\n\t\t</React.Fragment>\n\t);\n}\n\n//panel tabs-panel\nexport default TabPanelComponent;\n"],"sourceRoot":""}