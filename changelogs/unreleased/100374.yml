---
title: "Accounting report type: fixed company sync between M2O and M2M fields."
module: axelor-account
developer: |
  For AccountingReportTypes with `typeSelect != 3000`, the company M2O field is now synced
  into the company M2M field. Existing inconsistent data should be corrected using the script below. 
  -- Cleanup existing M2M entries for typeSelect != 3000
  DELETE FROM account_accounting_report_type_company_set
  WHERE account_accounting_report_type IN (
      SELECT id FROM account_accounting_report_type
      WHERE type_select != 3000
  );
  -- Insert new M2M entries based on the M2O value
  INSERT INTO account_accounting_report_type_company_set (account_accounting_report_type, company_set)
  SELECT art.id AS account_accounting_report_type, art.company AS company_set
  FROM account_accounting_report_type art
  WHERE art.type_select != 3000
    AND art.company IS NOT NULL;
