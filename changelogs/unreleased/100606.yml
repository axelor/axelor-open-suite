---
title: "API Siren: Fix current obsolete version."
module: axelor-base
developer: |
  ALTER TABLE studio_app_base DROP COLUMN IF EXISTS sirene_token_generator_url
  ALTER TABLE studio_app_base DROP COLUMN IF EXISTS sirene_key
  ALTER TABLE studio_app_base DROP COLUMN IF EXISTS sirene_secret
  ALTER TABLE studio_app_base DROP COLUMN IF EXISTS sirene_access_token

  DELETE from meta_field
  WHERE name IN ('sireneTokenGeneratorUrl', 'sireneKey', 'sireneSecret', 'sireneAccessToken')
    AND meta_model = (SELECT id FROM meta_model mm WHERE mm.full_name = 'com.axelor.studio.db.Base');

  ALTER TABLE studio_app_base ADD COLUMN IF NOT EXISTS sirene_api_key VARCHAR(255);

  UPDATE studio_app_base SET sirene_url = 'https://api.insee.fr/api-sirene/3.11';