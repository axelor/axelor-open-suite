<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<object-views xmlns="http://axelor.com/xml/ns/object-views"
  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
  xsi:schemaLocation="http://axelor.com/xml/ns/object-views http://axelor.com/xml/ns/object-views/object-views_7.4.xsd">

  <form id="business-project-product-form" name="product-form" title="Product"
    model="com.axelor.apps.base.db.Product" extension="true">

    <extend target="//panel[@name='variantsPanel']">
      <insert position="after">
        <panel name="taskPanel" title="Task templates"
          if="__config__.app.isApp('business-project') &amp;&amp; __config__.app.getApp('business-project').enableTaskTemplatesByProduct"
          if-module="axelor-business-project">
          <field name="taskTemplateSet" widget="TagSelect" colSpan="12"
            domain="self.parentTaskTemplate = null or self.parentTaskTemplate in :taskTemplateSet"/>
        </panel>
      </insert>
    </extend>

  </form>

  <grid name="product-project-hold-back-grid" title="Products"
    model="com.axelor.apps.base.db.Product" orderBy="code,name" x-row-height="80">
    <field name="code" x-bind="{{code|unaccent|uppercase}}" width="120"/>
    <field name="name" width="300"/>
    <field name="productCategory" form-view="product-category-form"
      grid-view="product-category-grid"/>
    <field name="productFamily" form-view="product-family-form"
      grid-view="product-family-grid"/>
  </grid>

  <search-filters id="business-project-products-filters" name="products-filters"
    model="com.axelor.apps.base.db.Product" title="Products filters">
    <field name="purchaseProductMultipleQtyList" title="Multiple quantities of purchase"
      hidden="true"
      if="!(__config__.app.isApp('purchase') &amp;&amp; __config__.app.getApp('purchase')?.getManageMultiplePurchaseQuantity())"/>
    <field name="allowToForcePurchaseQty" hidden="true"
      if="!(__config__.app.isApp('purchase') &amp;&amp; __config__.app.getApp('purchase')?.getManageMultiplePurchaseQuantity())"/>
    <field name="saleProductMultipleQtyList" title="Multiple quantities of sale" hidden="true"
      if="!(__config__.app.isApp('sale') &amp;&amp; __config__.app.getApp('sale')?.getManageMultipleSaleQuantity())"/>
    <field name="serialNumber" hidden="true"
      if="!__config__.app.getApp('base')?.getActivateBarCodeGeneration()"/>
    <field name="barcodeTypeConfig" hidden="true"
      if="!(__config__.app.getApp('base')?.getActivateBarCodeGeneration() &amp;&amp; __config__.app.getApp('base')?.getEditProductBarcodeType())"/>
    <field name="salesUnit" hidden="true"
      if="!(__config__.app.isApp('sale') &amp;&amp; __config__.app.getApp('sale')?.getManageSalesUnits())"/>
    <field name="purchasesUnit" hidden="true"
      if="!(__config__.app.isApp('purchase') &amp;&amp; __config__.app.getApp('purchase')?.getManagePurchasesUnits())"/>
    <field name="configurator" hidden="true"
      if="!(__config__.app.isApp('sale') &amp;&amp; __config__.app.getApp('sale')?.getEnableConfigurator())"/>
    <field name="allowToForceSaleQty" hidden="true"
      if="!(__config__.app.isApp('sale') &amp;&amp; __config__.app.getApp('sale')?.getManageMultipleSaleQuantity())"/>
    <field name="costSheetGroup" hidden="true"
      if="!(__config__.app.isApp('production') &amp;&amp; __config__.app.getApp('production')?.getManageCostSheetGroup())"/>
    <field name="customerCatalogList" hidden="true"
      if="!(__config__.app.isApp('sale') &amp;&amp; __config__.app.getApp('sale')?.getEnableCustomerCatalogMgt())"/>
    <field name="supplierCatalogList" hidden="true"
      if="!(__config__.app.isApp('purchase') &amp;&amp; __config__.app.getApp('purchase')?.getManageSupplierCatalog())"/>
    <field name="productVariantConfig" hidden="true"
      if="!__config__.app.getApp('base')?.getManageProductVariants()"/>
    <field name="manageVariantPrice" hidden="true"
      if="!__config__.app.getApp('base')?.getManageProductVariants()"/>
    <field name="taskTemplateSet" hidden="true"
      if="!(__config__.app.isApp('business-project') &amp;&amp; __config__.app.getApp('business-project').enableTaskTemplatesByProduct)"/>
    <field name="productSubTypeSelect" hidden="true" if="!__config__.app.isApp('production')"/>
    <field name="isActivity" hidden="true" if="!__config__.app.isApp('employee')"/>
    <field name="standardDelay" hidden="true" if="!__config__.app.isApp('supplychain')"/>
    <field name="productSynchronizedInPrestashop" hidden="true"
      if="!__config__.app.isApp('prestashop')"/>
    <field name="shippingCoef" hidden="true" if="!__config__.app.isApp('purchase')"/>
    <field name="defShipCoefByPartner" hidden="true" if="!__config__.app.isApp('purchase')"/>
    <field name="isAnalyticCapture" hidden="true" if="!__config__.app.isApp('account')"/>
    <field name="excludeFromMrp" hidden="true" if="!__config__.app.isApp('supplychain')"/>
    <field name="stockManaged" hidden="true" if="!__config__.app.isApp('supplychain')"/>
    <field name="mrpFamily" hidden="true" if="!__config__.app.isApp('supplychain')"/>
    <field name="inventoryTypeSelect" hidden="true" if="!__config__.app.isApp('supplychain')"/>
    <field name="productStandard" hidden="true" if="!__config__.app.isApp('production')"/>
    <field name="productApproval" hidden="true" if="!__config__.app.isApp('production')"/>
    <field name="controlOnReceipt" hidden="true" if="!__config__.app.isApp('supplychain')"/>
    <field name="avgPrice" hidden="true" if="!__config__.app.isApp('supplychain')"/>
    <field name="economicManufOrderQty" hidden="true" if="!__config__.app.isApp('production')"/>
    <field name="trackingNumberConfiguration" hidden="true"
      if="!__config__.app.isApp('stock')"/>
    <field name="usedInDEB" hidden="true" if="!__config__.app.isApp('stock')"/>
    <field name="customsCodeNomenclature" hidden="true" if="!__config__.app.isApp('stock')"/>
    <field name="countryOfOrigin" hidden="true" if="!__config__.app.isApp('stock')"/>
    <filter name="products-filters-current-products" title="Current Products">
      <domain>self.endDate IS NULL or CURRENT_DATE &lt; self.endDate</domain>
    </filter>
    <filter name="products-filters-storable-products" title="Storable Products">
      <domain>(self.endDate IS NULL or CURRENT_DATE &lt; self.endDate) and self.productTypeSelect =
        'storable'</domain>
    </filter>
    <filter name="products-filters-service-products" title="Service Products">
      <domain>(self.endDate IS NULL or CURRENT_DATE &lt; self.endDate) and self.productTypeSelect =
        'service'</domain>
    </filter>
    <filter name="products-filters-products-with-variant" title="Products With Variant">
      <domain>self.productVariantConfig != null</domain>
    </filter>
    <filter name="products-filters-define-sub-bill-of-material"
      title="Define sub bill of material">
      <domain>self.productSubTypeSelect = 3</domain>
    </filter>
    <filter name="products-filters-obsolete-products" title="Obsolete Products">
      <domain>CURRENT_DATE &gt; self.endDate</domain>
    </filter>
    <filter name="products-filters-classic-products" title="Classic products">
      <domain>self.configurator IS NULL</domain>
    </filter>
    <filter name="products-filters-customised-products" title="Customised products">
      <domain>self.configurator IS NOT NULL</domain>
    </filter>
  </search-filters>

</object-views>
