<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<object-views xmlns="http://axelor.com/xml/ns/object-views" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" 
	xsi:schemaLocation="http://axelor.com/xml/ns/object-views http://axelor.com/xml/ns/object-views/object-views_5.2.xsd">

    <form name="timesheet-line-timesheet-teamtask-form" title="Timesheet Line" model="com.axelor.apps.hr.db.TimesheetLine" onNew="action-team-task-attrs-default-timesheet-line,action-timesheet-line-method-set-timesheet" onSave="action-team-task-validate-check-timesheet-line-date">
		<panel name="overviewPanel" title="Overview">
			<field name="project" readonly="true" form-view="project-form" grid-view="project-grid"/>
			<field name="teamTask" form-view="team-task-form" grid-view="team-task-grid" readonly="true"/>
			<field name="date" onChange="action-timesheet-line-method-set-timesheet"/>
			<field name="product" requiredIf="toInvoice" canEdit="false" onSelect="action-hr-timesheet-line-attrs-domain-product" widget="SuggestBox" form-view="product-activity-form" grid-view="product-activity-grid"/>
			<field name="duration" width="62%" colSpan="3" onChange="action-timesheet-line-method-set-stored-duration" min="0.01"/>
			<label name="durationLabel" colSpan="3"/>	
			<field name="durationForCustomer" colSpan="5" if-module="axelor-business-project" if="__config__.app.isApp('business-project')"/>
    		<label name="durationLabel" colSpan="1" if-module="axelor-business-project" if="__config__.app.isApp('business-project')"/>	
    		<field name="user" readonly="false" onSelect="action-timesheet-line-attrs-domain-user" form-view="user-form" grid-view="user-grid" canNew="false" canEdit="false" canView="false"/>	
			<field name="toInvoice" if-module="axelor-business-project" if="__config__.app.isApp('business-project')" />
			<field name="timesheet" form-view="timesheet-form" />
			<field name="enableEditor" />
			<field name="comments" />
			<field name="hoursDuration" hidden="true" />
		</panel>
	</form>
    
    <action-attrs name="action-timesheet-line-attrs-domain-project" id="business-project-action-timesheet-line-attrs-domain-project">
		<attribute name="domain" for="project" expr="eval: &quot; self.imputable = true AND (${__user__.id} MEMBER OF self.membersUserSet OR self.assignedTo.id = ${__user__.id}) &quot;"/>
	</action-attrs>
	
	<action-method name="action-timesheet-line-method-set-default-to-invoice">
		<call class="com.axelor.apps.businessproject.web.TimesheetLineBusinessController" method="setDefaultToInvoice"/>
	</action-method>
	
	<action-method name="action-timesheet-line-method-set-timesheet">
		<call class="com.axelor.apps.businessproject.web.TimesheetLineBusinessController" method="setTimesheet"/>
	</action-method>
	
</object-views>
