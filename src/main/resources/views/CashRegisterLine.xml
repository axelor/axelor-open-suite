<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<object-views xmlns="http://apps.axelor.com/xml/ns/object-views"
	xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
	xsi:schemaLocation="http://apps.axelor.com/xml/ns/object-views http://apps.axelor.com/xml/ns/object-views/object-views_3.0.xsd">
    
    <grid name="cash-register-line-grid" title="Cash register closing" model="com.axelor.apps.account.db.CashRegisterLine">
        <field name="user"/>
        <field name="cashRegister"/>
        <field name="createDateTime"/>
        <field name="cashRegisterDate"/>
        <field name="cashRegisterAmount"/>
        <field name="depositedAmount"/>
        <field name="statusSelect"/>
    </grid>
    
	<form name="cash-register-line-form" title="Cash register closing" model="com.axelor.apps.account.db.CashRegisterLine"   
	onNew="action-cash-register-line-record-new">
	 
		<panel  readonlyIf="emailSentOk">
			<field name="statusSelect"/>
			<field name="user"/>
			<field name="createDateTime"/>
			<field name="cashRegister"/>
			<field name="cashRegisterDate"/>
		</panel> 
		
		<panel title="Amounts to register"  readonlyIf="emailSentOk">
			<field name="cashRegisterAmount"/>
			<field name="depositedAmount"/>
		</panel>
		
		<panel title="Follow-up" >
			<field name="emailSentOk"/>
		</panel>
		
		<panel sidebar="true" title="Actions" showIf="!emailSentOk">
			<button name="closeCashRegister" title="Close cashier" onClick="save,action-group-account-cash-registerline-close,save" showIf="statusSelect != 1" colSpan="12"/>
			<button name="openCashRegister" title="Open cashier" onClick="save,action-method-account-cash-registerline-open,save" showIf="statusSelect != 0" colSpan="12"/>
		</panel>
		
	</form>
    
    <action-method name="action-method-account-cash-registerline-close">
    	<call class="com.axelor.apps.account.web.CashRegisterController" method="closeCashRegister"/>
    </action-method>
    
    <action-method name="action-method-account-cash-registerline-open">
    	<call class="com.axelor.apps.account.web.CashRegisterController" method="openCashRegister"/>
    </action-method>

    <action-record name="action-cash-register-line-record-new" model="com.axelor.apps.account.db.CashRegisterLine">
    	<field name="user" expr="eval:__user__"/>
    	<field name="cashRegister"   expr="eval:__user__.activeCashRegister"/>
    	<field name="createDateTime" expr="call:com.axelor.apps.base.service.administration.GeneralService:getTodayDateTime()"/>
    	<field name="cashRegisterDate" expr="call:com.axelor.apps.base.service.administration.GeneralService:getTodayDate()"/>
    </action-record>

</object-views>