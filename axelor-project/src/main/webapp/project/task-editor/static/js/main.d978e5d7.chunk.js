/*
 * Axelor Business Solutions
 *
 * Copyright (C) 2021 Axelor (<http://axelor.com>).
 *
 * This program is free software: you can redistribute it and/or  modify
 * it under the terms of the GNU Affero General Public License, version 3,
 * as published by the Free Software Foundation.
 *
 * This program is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 * GNU Affero General Public License for more details.
 *
 * You should have received a copy of the GNU Affero General Public License
 * along with this program.  If not, see <http://www.gnu.org/licenses/>.
 */
(this["webpackJsonpaos-task-view"]=this["webpackJsonpaos-task-view"]||[]).push([[0],{244:function(e,t,a){e.exports=a.p+"static/media/user.5d75554d.jpg"},378:function(e,t,a){},507:function(e,t,a){e.exports=a(800)},626:function(e,t){},627:function(e,t){},628:function(e,t){},629:function(e,t){},630:function(e,t){},631:function(e,t){},633:function(e,t){},673:function(e,t){},674:function(e,t){},798:function(e,t,a){},799:function(e,t,a){},800:function(e,t,a){"use strict";a.r(t);var n,r=a(0),c=a.n(r),o=a(35),l=a.n(o),i=a(239),s=a(55),u=a(5),d=a(23),m=a(69),p=a(438),f=a.n(p),b=a(897),v=a(853),g=a(888),h=a(485),E=a(442),k=a.n(E),j=a(443),y=a.n(j),O=a(854),x=Object(m.b)({plugins:[].concat(Object(d.a)(Object(g.a)().plugins),[f()()])});function C(e){var t=e.direction,a=e.palette,o=e.children;Object(r.useEffect)((function(){t?document.body.dir=t:document.body.removeAttribute("dir")}));var l=function(e){var t=e.direction,a=void 0===t?"ltr":t,r=e.palette;return void 0===n&&(n=document.body.dir||document.dir),a=a||n,Object(h.a)({direction:a,layout:{cols:12},header:{height:64},palette:Object(u.a)({primary:k.a,secondary:y.a},r),typography:{useNextVariants:!0}})}({direction:t,palette:a});return c.a.createElement(b.b,{jss:x},c.a.createElement(v.a,{theme:l},c.a.createElement(O.a,null),o))}var w,S=a(9),N=a(8),T=a.n(N),I=a(18),D=a(38),P=a(22),F=a(30),M=a.n(F),z=a(24),B=a.n(z),L=a(94),A=a.n(L),H=a(902),R=a(268),V=a(488),W=a(893),Y=a(116),q=a(444),_=a(445),U=a(261),X=a(260),G=a(262),K=a(856),J=a(857),$=a(259),Q=a(258),Z=a(858),ee=a(859),te=[{name:"description",label:Ce("Task Description")},{name:"parentTask",label:Ce("Parent Task")},{name:"attachments",label:Ce("Attachements")},{name:"projectTaskSection",label:Ce("Section")},{name:"taskDate",label:Ce("TaskEditor.taskDate")},{name:"taskEndDate",label:Ce("Task end")},{name:"priority",label:Ce("Priority")},{name:"status",label:Ce("Status")},{name:"progressSelect",label:Ce("Progress")},{name:"projectTaskCategory",label:Ce("Category")}],ae={low:4,normal:3,high:2,urgent:1},ne=[{value:"low",label:"Low",color:"lightblue"},{value:"normal",label:"Normal",color:"#428bca"},{value:"high",label:"High",color:"orange"},{value:"urgent",label:"Urgent",color:"#d9534f"}],re=[{value:"new",label:"New",color:"#4186E0"},{value:"in-progress",label:"In Progress",color:"#8DA3A6"},{value:"closed",label:"Closed",color:"#61B85C"},{value:"canceled",label:"Canceled",color:"#E8384F"}],ce=[{code:"allTasks",value:Ce("All tasks")},{code:"incompleteTasks",value:Ce("Incomplete tasks")},{code:"completedTasks",value:Ce("Completed tasks"),items:[{code:"allCompletedTasks",value:Ce("All completed tasks")},{code:"today",value:Ce("Today"),label:Ce("All completed tasks")},{code:"yesterday",value:Ce("Yesterday"),label:Ce("All completed tasks")},{code:"oneweek",value:Ce("1 week"),label:Ce("All completed tasks")},{code:"twoWeeks",value:Ce("2 weeks"),label:Ce("All completed tasks")},{code:"threeWeeks",value:Ce("3 weeks"),label:Ce("All completed tasks")}]}],oe=[{code:"sequence",name:Ce("TaskEditor.none"),sortFunction:me},{code:"name",name:Ce("Alphabetical"),sortFunction:me},{code:"assignedTo",name:Ce("Assignee"),sortFunction:fe,fieldName:"fullName"},{code:"taskEndDate",name:Ce("Due Date"),sortFunction:pe},{code:"taskDate",name:Ce("TaskEditor.taskDate"),sortFunction:pe},{code:"priority",name:Ce("Priority"),sortFunction:me},{code:"status",name:Ce("Status"),sortFunction:me},{code:"progressSelect",name:Ce("Progress"),sortFunction:me},{code:"projectTaskCategory",name:Ce("Category"),sortFunction:fe,fieldName:"name"}],le=["toInvoice","productSet","taskCustomFields","id","synchronize","parentProject","attrs","fromDate","sequence","clientPartner","name","code","description","assignedTo","projectFolderSet","company","currency","contactPartner","membersUserSet","toDate","isBusinessProject","fullName","projectTaskCategorySet"],ie=["project","projectTaskSection","status","parentTask","name","metaFile","description","assignedTo","taskEndDate","taskDate","taskDeadline","priority","fullName","progressSelect","attrs","statusBeforeComplete","sequence","projectTaskCategory"],se=[U.a[600],X.a[600],G.a[600],K.a[600],J.a[600],$.a[600],Q.a[600],Z.a[600],ee.a[600],U.a[700],X.a[700],G.a[700],K.a[700],J.a[700],$.a[700],Q.a[700],Z.a[700],ee.a[700],U.a[800],X.a[800],G.a[800],K.a[800],$.a[800],J.a[800],Q.a[800],Z.a[800],ee.a[800],U.a[900],X.a[900],G.a[900],K.a[900],J.a[900],$.a[900],Q.a[900],Z.a[900],ee.a[900],U.a[500],X.a[500],G.a[500],K.a[500],J.a[500],$.a[500],Q.a[500],Z.a[500],ee.a[500]],ue={};function de(e){var t=document.cookie||"";return t!==w&&(w=t,ue=t.split("; ").reduce((function(e,t){var a=t.split("=");return e[a[0]]=a[1],e}),{})),ue[e]}function me(e,t){var a=function(e,t){return e.sort((function(e,a){var n=e[t],r=a[t];return n<r?-1:n>r?1:0}))}(e,"name"),n="priority"===t;return a.sort((function(e,a){var r=n?ae[e[t]]:e[t],c=n?ae[a[t]]:a[t];return r<c?-1:r>c?1:0}))}function pe(e,t){return e.sort((function(e,a){var n=new Date(e[t]),r=new Date(a[t]);return n<r?-1:n>r?1:0}))}function fe(e,t,a){return e.sort((function(e,n){var r=e[t]&&e[t][a],c=n[t]&&n[t][a];return""!==r&&c?""!==c&&r?r<c?-1:r>c?1:0:1:-1}))}function be(e,t){return Array.prototype.slice.call(e).slice(0,t).map((function(e,t){return{file:e,index:t,progress:0,cancelled:!1,completed:!1,chunkProgress:new Array(Math.floor(e.size/524288)+1).fill(0),error:!1,totalUploaded:0}}))}function ve(e,t){if(!e||e.length)return me(e&&(e.filter((function(e){return e.projectTaskSection&&e.projectTaskSection.id===t.id}))||[]),"sequence")}function ge(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],a=[{id:-1,sequence:0,records:e&&e.length&&me((e||[]).filter((function(e){return!e.projectTaskSection})),"sequence")}];return t&&t.length&&t.forEach((function(t){a.push(Object(u.a)(Object(u.a)({},t),{},{records:ve(e,t)}))})),me(a,"sequence")}function he(e){return e.title||e.autoTitle||e.name}function Ee(e,t){var a=t.modelField||e.name,n=t.type||t.jsonType,r="::".concat(t.jsonType||"text");return t.target&&t.targetName&&(r=""),Object(u.a)(Object(u.a)({},t),{},{title:"".concat(he(t)," ").concat(he(e)&&"(".concat(he(e),")")),name:"".concat(a,".").concat(t.name).concat(r),type:n.replace(/-/g,"_").toUpperCase()})}function ke(e,t,a){var n=Array.from(e),r=n.splice(t,1),c=Object(S.a)(r,1)[0];return n.splice(a,0,c),n}function je(e){if(e)return M()(e).format("YYYY-MM-DD")}function ye(e){return e.file}function Oe(e,t){var a=e.file;if(a){var n={"X-File-Name":a.name,"X-File-Offset":t,"X-File-Size":a.size,"X-File-Type":a.type,"X-CSRF-Token":de("CSRF-TOKEN")};return e.id&&(n["X-File-Id"]=e.id),n}}var xe=function(e){if(e)return"closed"===e.status};function Ce(e){return window._t&&"string"===typeof e?window._t(e):e}var we=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",a="".concat(e).lastIndexOf("/")===e.length-1?"":"/";return"".concat(e).concat(a).concat(t)},Se=new(function(){function e(){Object(q.a)(this,e);var t=new Headers;t.append("Accept","application/json"),t.append("Content-Type","application/json"),t.append("X-Requested-With","XMLHttpRequest"),t.append("X-CSRF-Token",de("CSRF-TOKEN")),this.baseURL="../..",this.headers=t}return Object(_.a)(e,[{key:"fetch",value:function(e){function t(t,a,n){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(e,t,a){return fetch(e,a).then((function(e){return-1!==["head"].indexOf(t.toLowerCase())?e:e.headers.get("content-type").includes("application/json")?e.json():e})).catch((function(e){}))}))},{key:"request",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=Object.assign({method:"POST",credentials:"include",headers:this.headers,mode:"cors",body:JSON.stringify(a)},t);return"GET"===t.method&&delete n.body,this.fetch("".concat(this.baseURL).concat(0===e.indexOf("/")?e:"/".concat(e)),t.method,n)}},{key:"post",value:function(e,t){return this.request(e,{method:"POST"},t)}},{key:"get",value:function(e){return this.request(e,{method:"GET"})}},{key:"add",value:function(e,t){var a={data:t},n="ws/rest/".concat(e);return this.post(n,a)}},{key:"fetchId",value:function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n="ws/rest/".concat(e,"/").concat(t,"/fetch");return this.post(n,a)}},{key:"delete",value:function(e,t){var a="ws/rest/".concat(e,"/").concat(t);return this.request(a,{method:"DELETE"})}},{key:"search",value:function(e,t){var a=Object(u.a)({offset:0},t),n="ws/rest/".concat(e,"/search");return this.post(n,a)}},{key:"upload",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){return!0},r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return new Promise((function(c,o){var l=e.baseURL,i=new XMLHttpRequest,s=we(e.baseURL,"ws/files/upload"),u=function(){return a["X-File-Id"]?e.intercept((function(){return e.http.delete(we(e.baseURL,"ws/files/upload/"+a["X-File-Id"]))})):Promise.resolve(!0)};i.open("POST",s,!0),Object.keys(a).forEach((function(e){i.setRequestHeader(e,a[e])})),i.withCredentials=!0,i.overrideMimeType("application/octet-stream"),i.setRequestHeader("Content-Type","application/octet-stream"),i.setRequestHeader("X-Requested-With","XMLHttpRequest"),i.onload=function(){n(100)},r.abort=function(){return i.abort(),u()},i.onreadystatechange=function(){if(4===i.readyState)switch(i.status){case 401:throw this.callbackInterceptor(),new Error("Unauthorized");case 200:try{var e=JSON.parse(i.responseText);c({result:e,url:"".concat(l,"ws/rest/com.axelor.meta.db.MetaFile/").concat(e.id,"/content/download?v=0")})}catch(t){c(i.responseText)}break;default:u(),o({status:i.status})}},i.upload.onprogress=function(e){var t=a["X-File-Size"],c=parseFloat(a["X-File-Offset"])+e.loaded,o=Math.round(c/t*100);r.progress=o>95?"95%":o+"%",r.transfer=function(e,t){var a=function(e){return e>1e9?parseFloat(e/1e9).toFixed(2)+" GB":e>1e6?parseFloat(e/1e6).toFixed(2)+" MB":e>=1e3?parseFloat(e/1e3).toFixed(2)+" KB":e+" B"};return a(e||0)+"/"+a(t)}(c,t),r.loaded=c===t,e.lengthComputable&&n(e.loaded/e.total*100,r)},i.send(t)}))}},{key:"download",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],a="".concat(this.baseURL,"/ws/dms/download/").concat(e.id);return new Promise((function(n,r){var c=new XMLHttpRequest;c.open("GET",a,!0),c.responseType="blob",c.onload=function(a){var r=c.response;if(t)n(r);else{var o=document.createElement("a");o.href=window.URL.createObjectURL(r),o.download=e.isDirectory?"".concat(e.fileName,".zip"):e.fileName,o.click(),n()}},c.send()}))}}]),e}());function Ne(){return(Ne=Object(I.a)(T.a.mark((function e(t){var a;return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Se.search("com.axelor.apps.project.db.ProjectTask",Object(u.a)({},t));case 2:if(!(a=e.sent)||!a.data){e.next=5;break}return e.abrupt("return",a.data);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Te(e){return Ie.apply(this,arguments)}function Ie(){return(Ie=Object(I.a)(T.a.mark((function e(t){var a;return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Se.add("com.axelor.apps.project.db.Project",Object(u.a)({},t));case 2:if(!((a=e.sent)&&a.data&&a.data[0])){e.next=5;break}return e.abrupt("return",a.data[0]);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function De(e){return Pe.apply(this,arguments)}function Pe(){return(Pe=Object(I.a)(T.a.mark((function e(t){var a;return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Se.add("com.axelor.apps.project.db.ProjectTask",Object(u.a)({},t));case 2:if(!((a=e.sent)&&a.data&&a.data[0])){e.next=5;break}return e.abrupt("return",a.data[0]);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Fe(e){return Me.apply(this,arguments)}function Me(){return(Me=Object(I.a)(T.a.mark((function e(t){var a,n,r=arguments;return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=r.length>1&&void 0!==r[1]&&r[1],e.next=3,Se.add("com.axelor.apps.project.db.ProjectTask",Object(u.a)({},t));case 3:if(n=e.sent,!a){e.next=6;break}return e.abrupt("return",n);case 6:if(!(n&&n.data&&n.data[0])){e.next=8;break}return e.abrupt("return",n.data[0]);case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ze(e){return Be.apply(this,arguments)}function Be(){return(Be=Object(I.a)(T.a.mark((function e(t){var a;return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Se.delete("com.axelor.apps.project.db.ProjectTask",t);case 2:return a=e.sent,e.abrupt("return",a);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Le(e){return Ae.apply(this,arguments)}function Ae(){return(Ae=Object(I.a)(T.a.mark((function e(t){var a;return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Se.search("com.axelor.apps.project.db.ProjectTaskSection",Object(u.a)({},t));case 2:if(!(a=e.sent)||!a.data){e.next=5;break}return e.abrupt("return",a.data);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function He(e){return Re.apply(this,arguments)}function Re(){return(Re=Object(I.a)(T.a.mark((function e(t){var a;return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Se.add("com.axelor.apps.project.db.ProjectTaskSection",Object(u.a)({},t));case 2:if(!((a=e.sent)&&a.data&&a.data[0])){e.next=5;break}return e.abrupt("return",a.data[0]);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ve(e){return We.apply(this,arguments)}function We(){return(We=Object(I.a)(T.a.mark((function e(t){var a,n,r=arguments;return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=r.length>1&&void 0!==r[1]&&r[1],e.next=3,Se.add("com.axelor.apps.project.db.ProjectTaskSection",Object(u.a)({},t));case 3:if(n=e.sent,!a){e.next=6;break}return e.abrupt("return",n);case 6:if(!(n&&n.data&&n.data[0])){e.next=8;break}return e.abrupt("return",n.data[0]);case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ye(e){return qe.apply(this,arguments)}function qe(){return(qe=Object(I.a)(T.a.mark((function e(t){var a;return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Se.delete("com.axelor.apps.project.db.ProjectTaskSection",t);case 2:return a=e.sent,e.abrupt("return",a);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function _e(){return Ue.apply(this,arguments)}function Ue(){return(Ue=Object(I.a)(T.a.mark((function e(){var t,a,n,r,c,o,l,i,s=arguments;return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=s.length>0&&void 0!==s[0]?s[0]:{},a=t.id,n=t.offset,r=void 0===n?0:n,c=t.limit,o=void 0===c?4:c,l=t.relatedModel,e.next=3,Se.get("ws/rest/com.axelor.mail.db.MailMessage/messages?limit=".concat(o,"&offset=").concat(r,"&relatedId=").concat(a,"&relatedModel=").concat(l));case 3:if(!(i=e.sent)||!i.data){e.next=6;break}return e.abrupt("return",{comments:i.data,offset:i.offset,total:i.total});case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Xe(e){return Ge.apply(this,arguments)}function Ge(){return(Ge=Object(I.a)(T.a.mark((function e(t){var a;return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Se.post("ws/rest/com.axelor.mail.db.MailMessage/".concat(t.id,"/remove"),{data:t});case 2:if(!((a=e.sent)&&a.data&&a.data[0])){e.next=5;break}return e.abrupt("return",a.data[0]);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ke(){return Je.apply(this,arguments)}function Je(){return(Je=Object(I.a)(T.a.mark((function e(){var t,a,n,r,c,o,l,i,s=arguments;return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=s.length>0&&void 0!==s[0]?s[0]:{},a=t.id,n=t.body,r=void 0===n?"":n,c=t.files,o=void 0===c?[]:c,l=t.entityModel,e.next=3,Se.post("ws/rest/".concat(l,"/").concat(a,"/message"),{data:{body:r,files:o,type:"comment"}});case 3:if(!((i=e.sent)&&i.data&&i.data[0])){e.next=6;break}return e.abrupt("return",i.data[0]);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function $e(){return Qe.apply(this,arguments)}function Qe(){return(Qe=Object(I.a)(T.a.mark((function e(){var t;return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Se.get("ws/app/info");case 2:if(!(t=e.sent)){e.next=5;break}return e.abrupt("return",t);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ze(){return et.apply(this,arguments)}function et(){return(et=Object(I.a)(T.a.mark((function e(){var t,a,n;return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"com.axelor.meta.web.MetaFilterController:findFilters",a={data:{model:t="com.axelor.meta.db.MetaFilter",domain:null,context:{filterView:"task-filters",_model:t}}},e.next=5,Se.post("/ws/action/".concat("com.axelor.meta.web.MetaFilterController:findFilters"),a);case 5:if(!(n=e.sent)||!n.data){e.next=8;break}return e.abrupt("return",n.data);case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function tt(e){return at.apply(this,arguments)}function at(){return(at=Object(I.a)(T.a.mark((function e(t){var a,n;return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"com.axelor.meta.web.MetaFilterController:saveFilter",n={model:a="com.axelor.meta.db.MetaFilter",data:{model:a,domain:null,context:Object(u.a)(Object(u.a)(Object(u.a)({},t),t.name&&{name:t.name}),{},{filterView:"task-filters",filters:""})}},e.abrupt("return",Se.post("/ws/action/".concat("com.axelor.meta.web.MetaFilterController:saveFilter"),n).then((function(e){return e.data})));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function nt(e){return rt.apply(this,arguments)}function rt(){return(rt=Object(I.a)(T.a.mark((function e(t){var a,n;return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"com.axelor.meta.web.MetaFilterController:removeFilter",n={model:a="com.axelor.meta.db.MetaFilter",data:{model:a,domain:null,context:{name:t.name,filterView:"task-filters"}}},e.abrupt("return",Se.post("/ws/action/".concat("com.axelor.meta.web.MetaFilterController:removeFilter"),n));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ct(e){return ot.apply(this,arguments)}function ot(){return(ot=Object(I.a)(T.a.mark((function e(t){var a;return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Se.get("/ws/meta/fields/".concat(t,"?limit=10"));case 2:if(!((a=e.sent)&&a.data&&a.data.fields)){e.next=5;break}return e.abrupt("return",a.data);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function lt(e){return it.apply(this,arguments)}function it(){return(it=Object(I.a)(T.a.mark((function e(t){var a;return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Se.add("com.axelor.dms.db.DMSFile",t);case 2:if(!(a=e.sent)||!a.data){e.next=5;break}return e.abrupt("return",a.data);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function st(e,t){return ut.apply(this,arguments)}function ut(){return(ut=Object(I.a)(T.a.mark((function e(t,a){var n;return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Se.upload(t,a);case 2:if(!(n=e.sent)||!n.result){e.next=5;break}return e.abrupt("return",n.result);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function dt(e){return mt.apply(this,arguments)}function mt(){return(mt=Object(I.a)(T.a.mark((function e(t){var a,n,r=arguments;return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=r.length>1&&void 0!==r[1]?r[1]:"com.axelor.apps.project.db.ProjectTask",e.next=3,Se.search("com.axelor.dms.db.DMSFile",{fields:["fileName","relatedModel","relatedId"],data:{_domain:"self.isDirectory = false AND self.relatedId = ".concat(t," AND self.relatedModel = '").concat(a,"'"),_domainContext:{rid:t,rmodel:a}}});case 3:if(!(n=e.sent)||!n.data){e.next=6;break}return e.abrupt("return",n.data);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function pt(e){return ft.apply(this,arguments)}function ft(){return(ft=Object(I.a)(T.a.mark((function e(t){var a;return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Se.post("ws/rest/com.axelor.dms.db.DMSFile/removeAll",{records:t});case 2:if(!(a=e.sent)||!a.data){e.next=5;break}return e.abrupt("return",a.data);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function bt(){return(bt=Object(I.a)(T.a.mark((function e(t){var a,n=arguments;return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=n.length>1&&void 0!==n[1]&&n[1],e.abrupt("return",Se.download(t,a));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function vt(e,t){return gt.apply(this,arguments)}function gt(){return(gt=Object(I.a)(T.a.mark((function e(t,a){var n;return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Se.fetchId("com.axelor.apps.project.db.Project",t,a);case 2:if(!((n=e.sent)&&n.data&&n.data[0])){e.next=5;break}return e.abrupt("return",n.data[0]);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var ht=a(879),Et=a(125),kt=a(864),jt=a(890),yt=a(88),Ot=a(156),xt=a.n(Ot),Ct=a(254),wt=a.n(Ct),St=a(249),Nt=a.n(St),Tt=a(446),It=a.n(Tt),Dt=a(447),Pt=a.n(Dt),Ft=a(154),Mt=a(448),zt=(a(378),a(379),Object(Y.a)((function(){return{editorClass:{minHeight:100,border:"1px solid #eee",marginTop:-7,borderTop:"none",padding:10}}})));function Bt(e){var t=e.onContentChange,a=e.content,n=e.onDescriptionChange,o=e.rest,l=Object(r.useState)(Ft.EditorState.createEmpty()),i=Object(S.a)(l,2),s=i[0],u=i[1],d=Object(r.useState)(a),m=Object(S.a)(d,2),p=m[0],f=m[1],b=zt();Object(r.useEffect)((function(){v(a)}),[a]);var v=function(e){if(!e)return null;var t=Pt()(e),a=t.contentBlocks,n=t.entityMap,r=Ft.ContentState.createFromBlockArray(a,n),c=Ft.EditorState.createWithContent(r);u(c)};return c.a.createElement("div",o,c.a.createElement(Mt.Editor,{editorState:s,editorClassName:b.editorClass,onEditorStateChange:function(e){u(e),f(function(e){return It()(Object(Ft.convertToRaw)(e.getCurrentContent()))}(e)),t(p)},toolbar:{options:["inline","link","emoji","colorPicker","list","textAlign"],inline:{inDropdown:!0},list:{inDropdown:!0},textAlign:{inDropdown:!0}},onBlur:function(e){e.stopPropagation(),p!==a&&n(p)}}))}Bt.Viewer=function(e){var t=e.html;return c.a.createElement("div",{className:"ax-base-draft-editor-viewer",dangerouslySetInnerHTML:{__html:t}})};var Lt=Bt,At=a(449),Ht=a.n(At),Rt=a(898),Vt=a(860),Wt=a(244),Yt=a.n(Wt),qt=Object(Y.a)((function(){return{commentTag:{borderRadius:"50%",padding:"10px 15px 10px 15px",display:"flex",justifyContent:"center",alignItems:"center",fontWeight:"bold",color:"white",fontSize:15,height:25,width:15},commentContainer:{display:"flex",lineHeight:"20px",padding:"15px 0 15px 0",fontWeight:" normal",overflowX:"auto"},commentLoad:{display:"inline-block","-ms-flex-pack":"center",justifyContent:"center",backgroundColor:"gray",padding:"5px 20px 5px 20px",borderRadius:"20px",color:"white",cursor:"pointer"},cardView:{padding:"0px 15px",background:"#F6F8F9"},loadMore:{display:"flex",justifyContent:"center",padding:"10px 0px"}}}));var _t=function(e){var t=e.comments,a=void 0===t?[]:t,n=e.limit,r=e.total,o=e.offset,l=e.userId,i=qt();return c.a.createElement("div",{className:i.cardView},a&&a.map((function(t,a){var n="notification"===t.type?JSON.parse(t.body):"";return c.a.createElement("div",{key:a},c.a.createElement("div",{className:i.commentContainer},c.a.createElement(Rt.a,{alt:"User",src:Yt.a}),c.a.createElement("span",{style:{display:"flex",flex:1,flexDirection:"column",paddingLeft:20}},c.a.createElement("div",{style:{display:"flex"}},c.a.createElement("div",{style:{display:"flex",flex:1}},c.a.createElement("span",null,t.$author&&t.$author.fullName),c.a.createElement("span",{style:{color:"#D3D3D3",paddingLeft:"5px"}},"- ",M()(t.$eventTime).format("DD/MM HH:mm"))),Number(t.$author.id)===Number(l)&&c.a.createElement("div",{style:{display:"flex",alignItems:"center"}},c.a.createElement("span",{style:{fontSize:"14px",marginTop:"-5px"},onClick:function(){return e.removeComment(t)}},c.a.createElement(Ht.a,null)))),n?c.a.createElement(c.a.Fragment,null,c.a.createElement("span",{style:{fontWeight:600,textAlign:"left"}},Ce(n.title)),c.a.createElement("ul",{style:{paddingLeft:20,display:n.tracks.length>0?"flex":"none",flexDirection:"column",textAlign:"left"}},n.tracks.map((function(e,t){return c.a.createElement("li",{key:t},e.displayValue?c.a.createElement("div",null,c.a.createElement("span",{style:{fontWeight:600}},Ce(e.title)," : "),c.a.createElement("span",null,e.oldDisplayValue&&Ce(e.oldDisplayValue)+" \xbb "," ",Ce(e.displayValue))):c.a.createElement("div",null,c.a.createElement("span",{style:{fontWeight:600}},Ce(e.title)," : "),c.a.createElement("span",null,e.oldValue&&Ce(e.oldValue)+" \xbb "," ",Ce(e.value))))})))):c.a.createElement("span",{style:{textOverflow:"ellipsis",wordBreak:"break-word"}},t.body))),c.a.createElement(Vt.a,null))})),n+o<r&&c.a.createElement("div",{className:i.loadMore},c.a.createElement("span",{className:i.commentLoad,onClick:function(){return e.loadComment()}},Ce("Load more"))))},Ut=a(7),Xt=a(895);var Gt=Object(Y.a)({autoComplete:{"& > div > label":{fontSize:14}},input:{fontSize:14,color:"black"},label:{fontSize:14}});function Kt(e){var t=e.name,a=e.model,n=e.optionLabel,o=void 0===n?"name":n,l=e.multiple,i=void 0!==l&&l,s=e.required,m=e.index,p=e.value,f=e.update,b=e.disabled,v=e.criteriaIds,g=e.type,h=e.operator,E=void 0===h?"and":h,k=e.classes,j=void 0===k?{}:k,y=e.className,O=e.size,x=e.disableClearable,C=e.TextFieldProps,w=void 0===C?{}:C,N=e.options,T=e.criteria,I=e.label,D=c.a.useState(!1),F=Object(S.a)(D,2),M=F[0],z=F[1],B=Object(r.useState)([]),L=Object(S.a)(B,2),A=L[0],H=L[1],R=Object(r.useState)(null),V=Object(S.a)(R,2),Y=V[0],q=V[1],_=Gt(),U=Object(r.useCallback)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=[];e&&t.push({fieldName:o,operator:"like",value:e}),T&&T&&T.map((function(e){return t.push(e)}));var n={criteria:t,operator:E};return Se.search(a,{fields:["name","fullName"],data:n,limit:10,offset:0}).then((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.data;t&&t.length&&H(t)}))}),[a,E,o,T]);return function(e,t){var a=c.a.useRef(!1);c.a.useEffect((function(){if(a.current){var n=setTimeout((function(){return e()}),t);return function(){return clearTimeout(n)}}a.current=!0}),[e,t])}(c.a.useCallback((function(){Y&&U(Y)}),[U,Y]),500),Object(r.useEffect)((function(){M||H([])}),[M]),Object(r.useEffect)((function(){M&&(N&&N.length>0?H(Object(d.a)(N)):U(null,v))}),[U,M,v,N]),c.a.createElement(Xt.a,{classes:Object(u.a)({inputFocused:_.input,clearIndicator:_.input,popupIndicator:_.input,disabled:_.disabled},j),size:O,key:m,open:M,onOpen:function(e){e&&e.stopPropagation(),z(!0)},onClose:function(e){e&&e.stopPropagation(),z(!1)},onClick:function(e){return e&&e.stopPropagation()},disableClearable:x,clearOnEscape:!0,autoComplete:!0,className:Object(Ut.a)(_.autoComplete,y),options:A,multiple:i,required:s,value:p||{},getOptionSelected:function(e,t){return e.id===t.id},onChange:function(e,a){var n=a;"multiple"===g&&(n=a&&a.filter((function(e,t,a){return t===a.findIndex((function(t){return t.id===e.id}))}))),f(Object(P.a)({},t,n),e)},name:t,disabled:b,onInputChange:function(e,t){return q(t)},renderInput:function(e){return c.a.createElement(W.a,Object.assign({variant:"outlined",fullWidth:!0},w,e,{InputProps:Object(u.a)(Object(u.a)(Object(u.a)({},w.InputProps||{}),e.InputProps||{}),{},{onClick:function(e){return e&&e.stopPropagation()}}),inputProps:Object(u.a)(Object(u.a)({},e.inputProps||{}),{},{onClick:function(t){t&&t.stopPropagation(),e.inputProps&&e.inputProps.onClick&&e.inputProps.onClick(t)}}),InputLabelProps:{className:_&&_.label},className:y,label:I}))},getOptionLabel:function(e){return e[o]||""}})}var Jt=a(901),$t=a(892);function Qt(e){return c.a.createElement($t.a,Object.assign({elevation:6,variant:"filled"},e))}var Zt=Object(Y.a)((function(e){return{root:{width:"100%","& > * + *":{marginTop:e.spacing(2)}},actionButton:{textTransform:"none"}}}));function ea(e){var t=Zt(),a=e.open,n=e.severity,r=void 0===n?"success":n,o=e.closeSnackbar,l=e.message,i=e.isAction,s=e.onActionClick,u=e.autoHideDuration,d=function(e,t){o()};return c.a.createElement("div",{className:t.root},c.a.createElement(Jt.a,{anchorOrigin:{vertical:"bottom",horizontal:"left"},open:a,autoHideDuration:u||1e3,onClose:d},c.a.createElement(Qt,{onClose:d,severity:r,action:i&&c.a.createElement(R.a,{size:"small",variant:"outlined",color:"inherit",className:t.actionButton,onClick:function(){s(),d()}},Ce("TaskEditor.undo"))},Ce(l))))}var ta=a(454),aa=a.n(ta),na=a(453),ra=a.n(na),ca=a(248),oa=a.n(ca),la=a(866);var ia=function(e){var t=e.files,a=e.maxFiles,n=e.removeAttachment,r=e.downloadAttachment,o="",l=[];if(t)return l=Array.prototype.slice.call(t).slice(0,a),c.a.createElement("div",{className:"attachment-list-container"},l.map((function(e,t){switch(e.fileType){case"image/png":case"image/jpeg":o=c.a.createElement(ra.a,null);break;case"application/pdf":o=c.a.createElement(aa.a,null);break;default:o=c.a.createElement(oa.a,null)}return c.a.createElement("div",{className:"attachment-list-item",key:t},c.a.createElement("span",{style:{paddingBottom:15,display:"flex",alignItems:"center"}},c.a.createElement("span",{style:{padding:5}},o),c.a.createElement("span",{style:{paddingLeft:5}},e.fileName),c.a.createElement(V.a,{onClick:function(){return n(e)}},c.a.createElement(Nt.a,null)),c.a.createElement(V.a,{onClick:function(){return r(e)}},c.a.createElement(la.a,null))))})))},sa=Object(Y.a)((function(e){return{select:Object(P.a)({marginBottom:0,minWidth:200},e.breakpoints.only("xs"),{minWidth:150}),paper:Object(P.a)({width:200},e.breakpoints.only("xs"),{width:150}),root:{margin:0}}}));function ua(e){var t=e.value,a=e.onChange,n=e.model,o=e.title,l=e.name,i=e.optionLabel,s=e.options,d=e.criteria,m=e.label,p=sa(),f=c.a.useState(Object(u.a)({},t)),b=Object(S.a)(f,2),v=b[0],g=b[1];return Object(r.useEffect)((function(){g(Object(u.a)({},t))}),[t]),c.a.createElement(Kt,{model:n,title:o,value:v,optionLabel:i,name:l,data:v,update:function(e,t){a(e[l],t),g(e[l])},size:"small",className:B()(p.select,p.root),disableClearable:!0,options:s,criteria:d,label:m,classes:{paper:p.paper},TextFieldProps:{margin:"dense",variant:"outlined"}})}ua.defaultProps={value:{},onChange:function(){}};var da=ua,ma=a(809),pa=a(867),fa=a(811),ba=a(868),va=a(812);function ga(e){var t=e.open,a=e.onClose,n=e.onConfirm,r=e.title,o=e.content,l=e.disabled;return c.a.createElement(ma.a,{open:t,onClose:a,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description"},c.a.createElement(pa.a,{id:"alert-dialog-title"},Ce(r)),c.a.createElement(fa.a,null,c.a.createElement(ba.a,{id:"alert-dialog-description"},Ce(o))),c.a.createElement(va.a,null,c.a.createElement(R.a,{onClick:a,color:"primary",size:"small"},Ce("Cancel")),c.a.createElement(R.a,{onClick:n,color:"primary",size:"small",autoFocus:!0,disabled:l},Ce("Confirm"))))}ga.defaultProps={onClose:function(){},onConfirm:function(){},open:!1,title:Ce("TaskEditor.deleteRecord"),content:Ce("TaskEditor.deleteRecordConfirm"),disabled:!1};var ha=ga,Ea=a(869),ka=Object(Y.a)((function(e){return{root:{minWidth:200,border:"1px solid lightgray",height:"fit-content",padding:"2px 10px",borderRadius:4}}}));function ja(e){var t=e.value,a=e.onChange,n=e.className,o=e.inputClassName,l=c.a.useState(t),i=Object(S.a)(l,2),s=i[0],u=i[1],d=ka(),m=function(e){a(e),u(e)};return Object(r.useEffect)((function(){u(t)}),[t]),c.a.createElement(Ea.a,{className:B()(d.root,n),disableToolbar:!0,autoOk:!0,variant:"inline",format:"DD/MM/YYYY",classes:{root:o},InputProps:{disableUnderline:!0},value:s?M()(s):null,onChange:function(e){return m(e)}})}ja.defaultProps={value:null,onChange:function(){}};var ya=ja,Oa=a(899),xa=a(872),Ca=Object(Y.a)((function(e){return{select:Object(P.a)({marginBottom:0,minWidth:200,textAlign:"left"},e.breakpoints.only("xs"),{minWidth:150}),selectPadding:{padding:10},formControl:Object(P.a)({minWidth:200},e.breakpoints.only("xs"),{minWidth:150}),valueChip:{height:20,color:"white"},listChip:{height:25,color:"white",marginLeft:10},iconSelected:{fontSize:20}}}));function wa(e){var t=e.value,a=e.onChange,n=e.options,o=void 0===n?[]:n,l=e.name,i=e.className,s=e.selectClassName,u=Ca(),d=c.a.useState(t),m=Object(S.a)(d,2),p=m[0],f=m[1];return Object(r.useEffect)((function(){f(t)}),[t]),c.a.createElement(kt.a,{variant:"outlined",className:B()(u.formControl,i)},c.a.createElement(jt.a,{className:u.select,value:p||"",onChange:function(e){a(e.target.value,e),f(e.target.value)},renderValue:function(e){var t=o.find((function(t){return t.value===e}));return c.a.createElement(Oa.a,{label:t&&Ce(t.label),className:u.valueChip,style:{background:t&&t.color}})},inputProps:{name:"".concat(l),id:"outlined-".concat(l,"-native-simple")},classes:{select:B()(u.selectPadding,s)}},o&&o.map((function(e){return c.a.createElement(xa.a,{value:e.value,key:e.value},c.a.createElement(A.a,{className:u.iconSelected,style:{visibility:e.value===p?"visible":"hidden"}}),c.a.createElement(Oa.a,{key:e&&e.value,label:e&&Ce(e.label),className:u.listChip,style:{background:e&&e.color}}))}))))}wa.defaultProps={value:"",onChange:function(){}};var Sa=wa,Na=a(813),Ta=a(808),Ia=a(871),Da=a(861),Pa=a(487),Fa=a(873),Ma=a(874),za=a(880),Ba=Object(Y.a)((function(e){return{root:{display:"flex",borderBottom:"solid 1px rgba(0, 0, 0, 0.54)",marginBottom:"7px"},chip:{margin:"4px",height:30},list:{display:"flex",padding:"0 !important"},listItem:{padding:"0 !important"},divider:{width:1,height:28,margin:4},buttonContainer:{display:"flex",width:"100%",justifyContent:"flex-end",alignItems:"center",position:"relative",bottom:-3},inputIconBtn:{margin:0,padding:0,color:"#bbb"}}}));function La(e){var t=e.value,a=e.onDelete,n=e.filters,r=e.handleClick,o=(Object(D.a)(e,["value","onDelete","filters","handleClick"]),Ba()),l="";if(t.length>1)l="Filters ".concat(t.length);else if(t.length){var i=n.find((function(e){return e.id===t[0]}));l=i?i.title:"Custom"}return c.a.createElement("div",{className:o.root},c.a.createElement(Ta.a,{className:o.list},c.a.createElement(Oa.a,{label:l,onDelete:function(){return a(t)},className:o.chip})),c.a.createElement("div",{className:o.buttonContainer},c.a.createElement(V.a,{"aria-label":"open",onClick:r,className:o.inputIconBtn},c.a.createElement(Fa.a,null)),c.a.createElement(V.a,{"aria-label":"refresh",className:o.inputIconBtn},c.a.createElement(Ma.a,null))))}var Aa=a(455),Ha=a(199),Ra=a(456),Va=a(457),Wa=a(458);Ha.b.add(Ra.a,Va.a,Wa.a);var Ya=Aa.a,qa=a(862),_a=a(875),Ua=Object(Y.a)((function(e){return{container:{display:"flex",justifyContent:"center",flexDirection:"column"},subtitle1:{fontSize:12},chip:{margin:e.spacing(.5,.25)},link:{cursor:"pointer"}}}));function Xa(e){var t=e.title,a=e.value,n=Ua();return c.a.createElement("div",{className:n.container},c.a.createElement(Et.a,{variant:"subtitle1",className:n.subtitle1},t),c.a.createElement(Et.a,null,a))}function Ga(e){var t=e.title,a=e.value,n=e.optionLabelKey,r=e.viewRecord,o=Ua();function l(e){var t=e&&e[n];return t&&c.a.createElement(_a.a,{className:o.link,onClick:function(){return r&&r(e)}},t)}return Array.isArray(a)?c.a.createElement("div",null,c.a.createElement(Et.a,{variant:"subtitle1",className:o.subtitle1},t),a.map((function(e,t){return c.a.createElement(Oa.a,{key:t,label:l(e),className:o.chip})}))):c.a.createElement("div",null,c.a.createElement(Et.a,{variant:"subtitle1",className:o.subtitle1},t),a&&l(a))}function Ka(e){var t=e.title,a=e.value,n=e.customRender;return"object"!==typeof a||n?c.a.createElement(Xa,{title:t,value:a}):c.a.createElement(Ga,e)}function Ja(e){var t=e.name,a=e.title,n=e.autoTitle,r=e.value,o=void 0===r?"":r,l=e.onChange,i=e.onBlur,s=e.readOnly,d=e.inline,m=e.InputProps,p=e.style,f=e.isControlled,b=void 0===f||f,v=Object(D.a)(e,["name","title","autoTitle","value","onChange","onBlur","readOnly","inline","InputProps","style","isControlled"]),g=c.a.useState(o),h=Object(S.a)(g,2),E=h[0],k=h[1];function j(e){l(E),i&&i(e)}function y(e){var t=e.target.value;b?k(t):l(t)}return c.a.useEffect((function(){k(o)}),[o]),d?s?c.a.createElement(Ka,{value:E}):c.a.createElement(qa.a,Object.assign({style:Object(u.a)({width:"100%"},p),placeholder:a,inputProps:{"aria-label":a},name:t,onChange:y,onBlur:j,autoComplete:"off",readOnly:s,disabled:s,value:E||""},v)):s?c.a.createElement(Ka,{title:a,value:E}):c.a.createElement(W.a,Object.assign({id:"filled-".concat(t),label:a||n,name:t,style:Object(u.a)({width:"100%"},p),onChange:y,onBlur:j,autoComplete:"off",fullWidth:!0,InputProps:Object(u.a)({readOnly:s},m),value:E||"",className:v.className},v))}Ja.defaultProps={rows:3,readOnly:!1};var $a=Ja,Qa=a(263),Za=a(876),en=a(877),tn=a(891),an=a(894);function nn(e){var t=e.title,a=e.className,n=e.onClick,r=Object(D.a)(e,["title","className","onClick"]);return t&&c.a.createElement(_a.a,Object.assign({component:"button",variant:"body2",onClick:n,className:a},r),t)}function rn(e){var t=e.name,a=e.className,n=e.onChange,r=e.value,o=e.classes,l=e.data;return c.a.createElement(Za.a,{"aria-label":t,name:t,className:a,value:r,onChange:function(e){return n(e)}},l.map((function(e,t){var a=e.value,n=e.label;return c.a.createElement(en.a,{key:t,value:a,control:c.a.createElement(tn.a,null),label:n,classes:{label:o&&o.label}})})))}function cn(e){var t=e.name,a=e.value,n=e.onChange,r=e.title,o=e.inline,l=void 0!==o&&o,i=e.isDisabled,s=e.classes,u=Object(D.a)(e,["name","value","onChange","title","inline","isDisabled","classes"]);return l?c.a.createElement(an.a,Object.assign({checked:Boolean(a),onChange:function(e){var t=e.target.checked;return n(t)},value:t,name:t,disabled:i},u)):c.a.createElement(en.a,{control:c.a.createElement(an.a,{checked:Boolean(a),onChange:function(e){var a=e.target.checked;return n({name:t,checked:a})},value:t}),label:r,classes:{label:s&&s.label}})}function on(e){var t=e.classes,a=e.onClick,n=e.title,r=e.hide,o=e.className,l=Object(D.a)(e,["classes","onClick","title","hide","className"]);return c.a.createElement(R.a,Object.assign({variant:"contained",color:"primary",className:B()(t.button,o),onClick:a},l,{style:r?{display:"none"}:{}}),n)}function ln(e){var t=e.name,a=e.value,n=void 0===a?"":a,r=e.onChange,o=e.options,l=Object(D.a)(e,["name","value","onChange","options"]),i={options:o,getOptionLabel:function(e){return e.title||""}};return c.a.createElement(Xt.a,Object.assign({},i,{value:o.find((function(e){return e.name===n})),onChange:function(e,t){t&&r(t.name)},name:t,style:{marginRight:8,width:150}},l,{renderInput:function(e){return c.a.createElement(W.a,e)}}))}var sn=a(460),un=a(889),dn=a(461),mn=a.n(dn),pn=a(484);var fn=Object(un.a)((function(e){return{formControl:{width:"100%",position:"relative","&.inline":{marginTop:3},".inline &":{paddingBottom:3}},inputRoot:{"& > div":{marginTop:"12px"}},root:{flexGrow:1},inputWrapper:{".inline & > *":{paddingBottom:3}},input:{display:"flex",padding:0,textOverflow:"ellipsis",position:"relative",whiteSpace:"nowrap",height:36,".single":{height:36},".inline &":{height:26}},valueContainer:{position:"relative",display:"flex",flexWrap:"wrap",flex:1,alignItems:"center",overflow:"hidden",".single > &":{flexWrap:"nowrap"},".inline &":{flexWrap:"nowrap"}},chip:{margin:e.spacing(.5,.25)},chipFocused:{backgroundColor:Object(sn.emphasize)("light"===e.palette.type?e.palette.grey[300]:e.palette.grey[700],.08)},noOptionsMessage:{padding:e.spacing(1,2)},singleValue:{fontSize:16,textOverflow:"ellipsis",overflow:"hidden"},placeholder:{position:"absolute",left:2,bottom:6,fontSize:16,".inline &":{bottom:1}},divider:{height:e.spacing(2)},viewIcon:{display:"flex",justifyContent:"center",alignItems:"center",position:"absolute",right:70,bottom:8,zIndex:1,cursor:"pointer","& svg":{fontSize:20,color:"#ddd","&:hover":{color:"#555"}}}}}));function bn(e){var t=e.inputRef,a=Object(D.a)(e,["inputRef"]);return c.a.createElement("div",Object.assign({ref:t},a))}var vn={Control:function(e){var t=e.children,a=e.innerProps,n=e.innerRef,r=e.selectProps,o=r.classes,l=r.isMulti,i=r.TextFieldProps,s=r.InputProps;return c.a.createElement(W.a,Object.assign({className:o.inputWrapper,fullWidth:!0,classes:Object(u.a)({},i&&i.label&&{root:o.inputRoot}),InputProps:Object(u.a)(Object(u.a)({},s),{},{inputComponent:bn,inputProps:Object(u.a)({className:B()(o.input,{single:!l}),ref:n,children:t},a)})},i))},MultiValue:function(e){var t={};return e.isDisabled||(t.onDelete=e.removeProps.onClick),c.a.createElement(Oa.a,Object.assign({tabIndex:-1,label:e.children,className:Object(Ut.a)(e.selectProps.classes.chip,Object(P.a)({},e.selectProps.classes.chipFocused,e.isFocused)),deleteIcon:c.a.createElement(mn.a,e.removeProps)},t))},NoOptionsMessage:function(e){return c.a.createElement(Et.a,Object.assign({color:"textSecondary",className:e.selectProps.classes.noOptionsMessage},e.innerProps),e.children)},Option:function(e){return c.a.createElement(xa.a,Object.assign({ref:e.innerRef,selected:e.isFocused,component:"div",style:{fontWeight:e.isSelected?500:400}},e.innerProps,{className:"menu-item"}),e.children)},Placeholder:function(e){return c.a.createElement(Et.a,Object.assign({color:"textSecondary",className:e.selectProps.classes.placeholder},e.innerProps),e.children)},SingleValue:function(e){return c.a.createElement(Et.a,Object.assign({className:e.selectProps.classes.singleValue},e.innerProps),e.children)},ValueContainer:function(e){return c.a.createElement("div",{className:B()(e.selectProps.classes.valueContainer,e.selectProps.valueContainerClassName)},e.children)}};function gn(e){var t=fn(),a=Object(r.useState)(e.options||[]),n=Object(S.a)(a,2),o=n[0],l=n[1],i=Object(r.useState)(!1),s=Object(S.a)(i,2),d=s[0],m=s[1],p=c.a.useState(null),f=Object(S.a)(p,2),b=f[0],v=f[1],g=e.name,h=e.title,E=void 0===h?"":h,k=e.onChange,j=e.value,y=e.error,O=e.readOnly,x=void 0!==O&&O,C=e.isMulti,w=void 0!==C&&C,N=e.isSearchable,P=void 0!==N&&N,F=e.optionValueKey,M=void 0===F?"id":F,z=e.optionLabelKey,L=void 0===z?"title":z,A=e.fetchAPI,H=e.beforeFetchAPI,R=e.isPortal,V=e.inline,W=e.autoFocus,Y=e.onFocus,q=e.InputProps,_=e.formControlStyle,U=e.clearIndicatorStyle,X=e.onView,G=Object(D.a)(e,["name","title","onChange","value","error","readOnly","isMulti","isSearchable","optionValueKey","optionLabelKey","fetchAPI","beforeFetchAPI","isPortal","inline","autoFocus","onFocus","InputProps","formControlStyle","clearIndicatorStyle","onView"]),K=c.a.useCallback((function(t){return e.options.find((function(e){return e[M]===t}))}),[e.options,M]);function J(){return $.apply(this,arguments)}function $(){return($=Object(I.a)(T.a.mark((function t(){var a,n,r=arguments;return T.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a=r.length>0&&void 0!==r[0]?r[0]:"",m(!0),!H){t.next=5;break}return t.next=5,H();case 5:if(!A){t.next=12;break}return t.next=8,A({search:a});case 8:n=t.sent,l(n),t.next=13;break;case 12:l(e.options);case 13:m(!1);case 14:case"end":return t.stop()}}),t)})))).apply(this,arguments)}c.a.useEffect((function(){if("object"!==typeof j){var e=j.split(",");v(1===e.length?K(e[0].trim()):e.map((function(e){return K(e.trim())})))}else v(j)}),[j,K]);var Q=function(e,t){var a=c.a.useRef(null),n=function(){return a.current&&clearTimeout(a.current)},r=function(e){return a.current=setTimeout(e,t)};return c.a.useEffect((function(){return function(){return n()}}),[]),function(){for(var t=arguments.length,a=new Array(t),c=0;c<t;c++)a[c]=arguments[c];n(),r((function(){return e.apply(void 0,a)}))}}(J,400);return x?c.a.createElement(Ka,{title:E,value:function(e){var t=o.find((function(t){return"".concat(t.value)==="".concat(e)}));return t&&t[L]||e}(j)}):c.a.createElement(kt.a,{className:B()(t.formControl,{inline:V}),style:_},c.a.createElement(pn.a,Object.assign({autoFocus:W,name:g,InputProps:q,TextFieldProps:Object(u.a)(Object(u.a)({},V?{}:{label:E,InputLabelProps:{shrink:!0}}),{},{error:y}),isLoading:d,onFocus:function(){Y&&Y(),J()},isClearable:!0,options:d?[]:o,onInputChange:function(e,t){"input-change"===t.action&&(m(!0),Q(e))},onChange:function(e){k("object"!==typeof j?w?e.map((function(e){return e[M]})).join(","):e&&e[M]:e)},value:b,placeholder:P?"Search ".concat(E):"Select ".concat(E),classes:t,components:vn,isDisabled:x,isMulti:w,isSearchable:P,getOptionLabel:function(e){return e[L]},getOptionValue:function(e){return e[M]},blurInputOnSelect:!0,menuShouldBlockScroll:!0,menuPlacement:"auto",styles:{menuPortal:function(e){return Object(u.a)(Object(u.a)({},e),{},{zIndex:1500})},container:function(e){return{width:"100%"}},clearIndicator:function(e){return Object(u.a)(Object(u.a)({},e),U)},menu:function(e){return Object(u.a)(Object(u.a)({},e),{},{marginTop:0,borderRadius:0})}}},G.options?{}:{filterOption:function(){return!0}},R?{menuPortalTarget:document.body}:{},G)),j&&X&&c.a.createElement("div",{onClick:function(e){e.stopPropagation(),X(j)},className:t.viewIcon},c.a.createElement(oa.a,null)))}gn.defaultProps={isPortal:!0};var hn=gn,En=a(878),kn=a(887),jn={date:Ea.a,time:En.a,datetime:kn.a},yn={date:"DD/MM/YYYY",time:"LT",datetime:"DD/MM/YYYY h:mm a"};var On=function(e){var t=e.inline,a=e.type,n=void 0===a?"date":a,o=Object(D.a)(e,["inline","type"]),l=Object(r.useState)(!1),d=Object(S.a)(l,2),m=d[0],p=d[1],f=c.a.useRef(),b=(o.name,o.title),v=o.format,g=o.readOnly,h=void 0!==g&&g,E=(o.error,o.onChange),k=Object(D.a)(o,["name","title","format","readOnly","error","onChange"]);if(h){var j=o.value?M()(o.value).format(v||yn[n]):"";return c.a.createElement(Ka,{title:b,value:j})}var y=jn[n];return c.a.createElement(s.a,{utils:i.a,moment:M.a},c.a.createElement(y,Object.assign({autoOk:!0,open:m,onChange:function(e){f.current=e},PopoverProps:{anchorOrigin:{vertical:"bottom",horizontal:"left"},transformOrigin:{vertical:"top",horizontal:"left"}},disableToolbar:!0,variant:"inline"},t?{invalidDateMessage:""}:{},{style:Object(u.a)({width:"100%"},t?{margin:0}:{}),label:t?"":b,format:v||yn[n]},"time"!==n?{animateYearScrolling:!1}:{},k,{onKeyDown:function(e){40===e.keyCode&&p(!0)},onClose:function(){E(f.current),p(!1)},onOpen:function(){return p(!0)}})))},xn=a(462);function Cn(e){var t=e.inputRef,a=(e.onChange,e.thousandSeparator),n=void 0===a||a,r=Object(D.a)(e,["inputRef","onChange","thousandSeparator"]);return c.a.createElement(xn.a,Object.assign({getInputRef:t,thousandSeparator:n},r))}function wn(e){var t=e.type,a=void 0===t?"integer":t,n=e.title,o=e.onChange,l=e.value,i=void 0===l?0:l,s=e.readOnly,u=e.scale,d=void 0===u?2:u,m=e.customeFormat,p=e.onBlur,f=Object(D.a)(e,["type","title","onChange","value","readOnly","scale","customeFormat","onBlur"]),b=Object(r.useState)(i),v=Object(S.a)(b,2),g=v[0],h=v[1],E=Object(r.useCallback)((function(e){return Number(Number(e).toFixed("integer"===a?0:d))}),[a,d]);return c.a.useEffect((function(){h(E(i))}),[i,h,E]),s?c.a.createElement(Ka,{title:n,value:c.a.createElement(Cn,Object.assign({},m,{value:i,displayType:"text"})),customRender:!0}):c.a.createElement($a,Object.assign({onChange:h,title:n,type:"number",value:"".concat(g),onBlur:function(e){o(E(e.target.value)),h(E(e.target.value)),p&&p(e)}},f))}wn.defaultProps={readOnly:!1};var Sn=wn,Nn={enum:["=","!=","isNull","notNull"],text:["like","notLike","isNull","notNull"],string:["=","!=","like","notLike","isNull","notNull"],integer:["=","!=",">=","<=",">","<","between","notBetween","isNull","notNull"],boolean:["isTrue","isFalse"]},Tn=[{name:"=",title:"equals"},{name:"!=",title:"not equal"},{name:">",title:"greater than"},{name:">=",title:"greater or equal"},{name:"<",title:"less than"},{name:"<=",title:"less or equal"},{name:"in",title:"in"},{name:"between",title:"between"},{name:"notBetween",title:"not Between"},{name:"notIn",title:"not in"},{name:"isNull",title:"is null"},{name:"notNull",title:"is not null"},{name:"like",title:"contains"},{name:"notLike",title:"doesn't contain"},{name:"isTrue",title:"true"},{name:"isFalse",title:"false"}];function In(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=[{name:e.targetName}];return e.targetSearch&&(n=e.targetSearch.map((function(e){return{name:e}}))),Se.search(e.target,Object(u.a)(Object(u.a)({},a),{},{limit:10,offset:0,fields:n.map((function(e){return e.name})),data:t?n.reduce((function(e,a){return Object(u.a)(Object(u.a)({},e),{},Object(P.a)({},a.name,t))}),{criteria:void 0,operator:void 0}):{}}))}var Dn=Object(Y.a)((function(e){return{group:{margin:"0px 8px",flexDirection:"row"},button:{margin:e.spacing(1)},label:{fontSize:"0.875rem"},list:{width:"100%",padding:0},listItem:{paddingLeft:0,paddingTop:0,paddingBottom:0},link:{margin:e.spacing(1)},textField:{margin:e.spacing(1),flexBasis:200},divider:{width:1,height:28,margin:4},criteriaValue:{width:"250px !important",alignItems:"normal"}}})),Pn={title:"",operator:"and",isArchived:!1,isShare:!1,criteria:[{}],selected:!1},Fn=function(e,t){e.map((function(e){return Nn[e]=t}))};function Mn(e,t,a){var n=a.onChange,r=a.value,o=a.value2,l=a.classes,i=a.style,s=Object(D.a)(a,["onChange","value","value2","classes","style"]);return["=","!=",">",">=","<","<=","like","notLike"].includes(t)?c.a.createElement(e,Object.assign({name:"value",className:l.criteriaValue,onChange:function(e){return n({name:"value",value:e})},value:r},s)):["between","notBetween"].includes(t)?c.a.createElement(c.a.Fragment,null,c.a.createElement(e,Object.assign({name:"value",style:Object(u.a)({marginRight:8},i),className:l.criteriaValue,onChange:function(e){return n({name:"value",value:"".concat(e)})},value:r},s)),c.a.createElement(e,Object.assign({name:"value2",className:l.criteriaValue,onChange:function(e){return n({name:"value2",value:"".concat(e)})},value:o},s))):void 0}function zn(e){var t=e.type,a=e.operator,n=e.onChange,r=e.value,o=e.classes,l=Object(D.a)(e,["type","operator","onChange","value","classes"]),i=Object(u.a)({value:r.value,value2:r.value2,onChange:n},l);switch(t){case"one_to_one":case"many_to_one":case"many_to_many":case"one_to_many":return function(e,t){var a=t.onChange,n=Object(D.a)(t,["onChange"]);if(["like","notLike","notIn"].includes(e))return c.a.createElement($a,Object.assign({name:"value",onChange:function(e){return a({name:"value",value:e})},margin:"none",style:{width:250}},n));if(["in"].includes(e)){var r=n.field,o=n.value,l=r.targetName,i=function(){var e=Object(I.a)(T.a.mark((function e(t){var a,n,c;return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.search,e.next=3,In(r,a);case 3:return n=e.sent,c=n.data,e.abrupt("return",c);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return c.a.createElement(hn,{placeholder:"",fetchAPI:i,isSearchable:!0,optionLabelKey:l,optionValueKey:"id",name:"value",value:o,isMulti:!0,formControlStyle:{marginBottom:"5px",width:250},clearIndicatorStyle:{paddingLeft:"0 !important"},closeMenuOnScroll:!1,onChange:function(e){return a({name:"value",value:Array.isArray(e)?e.map((function(e){return Object(P.a)({id:e.id},l,e[l])})):e&&Object(P.a)({id:e.id},l,e[l])})}})}}(a,Object(u.a)({},i));case"date":case"time":case"dateTime":return Mn(On,a,Object(u.a)(Object(u.a)({type:t},i),{},{format:"DD/MM/YYYY",margin:"none",classes:o}));case"integer":case"long":case"decimal":return Mn(Sn,a,Object(u.a)(Object(u.a)({type:t},i),{},{margin:"none",classes:o}));case"enum":var s=l.field.selectionList.map((function(e){var t=e.title,a=e.value,n=e.data;return{name:n&&n.value||a,title:t}}));return Mn(ln,a,Object(u.a)({options:s,classes:o},i));default:return Mn($a,a,Object(u.a)(Object(u.a)({classes:o},i),{},{margin:"none"}))}}function Bn(e){var t=e.className,a=e.onRemove,n=e.onChange,r=e.value,o=e.fields,l=e.classes,i=o.find((function(e){return e.name===r.fieldName})),s=(i&&i.type||"").toLowerCase();i&&i.selectionList&&(s="enum");var d=Tn.filter((function(e){return(Nn[s]||[]).includes(e.name)}));function m(e){var t=e.name,a=e.options,o=Object(D.a)(e,["name","options"]);return c.a.createElement(ln,Object.assign({name:t,onChange:function(e){return n({name:t,value:e})},value:r[t],options:a},o))}return c.a.createElement("div",null,c.a.createElement(V.a,{"aria-label":"close",className:t,onClick:a},c.a.createElement(za.a,null)),c.a.createElement(m,{name:"fieldName",options:o,className:"fieldName"}),c.a.createElement(m,{name:"operator",options:d,className:"operator"}),r.operator&&zn(Object(u.a)({type:s,operator:r.operator,value:r,onChange:n,classes:l},{field:i})))}function Ln(e){var t=e.customCriteria,a=e.setCustomCriteria,n=e.fields,r=e.clearFilters,o=e.applyFiltersClick,l=e.filterView,i=e.onSave,s=e.onDelete,d=Dn(),m=c.a.useState(!1),p=Object(S.a)(m,2),f=p[0],b=p[1],v=t.id,g=t.operator,h=t.isArchived,E=t.criteria,k=t.title,j=t.isShare;function y(e){var n=e.target,r=n.name,c=n.value;a(Object(u.a)(Object(u.a)({},t),{},Object(P.a)({},r,c)))}function O(e,t,r){t instanceof M.a&&(t=M()(t).format("YYYY-MM-DD")),a(Object(Qa.a)((function(a){a.criteria[r][e]=t,"fieldName"===e&&(a.criteria[r].operator="",a.criteria[r].value=function(e){var t=n.find((function(t){return t.name===e})).type.toLowerCase();return["one_to_one","many_to_one","many_to_many","one_to_many"].includes(t)?null:["integer","long","decimal"].includes(t)?0:["date","time","dateTime"].includes(t)?null:""}(t))})))}function x(){var e=t.id,a=t.version,n=t.title,r=t.isShare,c=t.operator,o=t.criteria,s={shared:r||!1,title:n,filterCustom:JSON.stringify({operator:c,criteria:o}),filterView:l};e?(s.id=e,s.version=a):s.name=n.replace(" ","_").toLowerCase(),i(s)}return c.a.createElement(c.a.Fragment,null,c.a.createElement("div",null,c.a.createElement(rn,{name:"operator",onChange:function(e){return y(e)},value:g,classes:d,className:d.group,data:[{label:"and",value:"and"},{label:"or",value:"or"}]}),c.a.createElement(cn,{name:"isArchived",title:"Show Archived",value:h,onChange:function(e){var t=e.name;return y({target:{value:e.checked,name:t}})},classes:d,className:"archived"})),c.a.createElement("div",null,c.a.createElement(Ta.a,{className:d.list},E.map((function(e,t){return c.a.createElement(Na.a,{className:d.listItem,key:t},c.a.createElement(Bn,{className:d.buttonLink,id:t,value:e,fields:n,onRemove:function(){return function(e){a(Object(Qa.a)((function(t){1===t.criteria.length?t.criteria=[{}]:t.criteria.splice(e,1)})))}(t)},onChange:function(e){return O(e.name,e.value,t)},classes:d}))})))),c.a.createElement("div",{className:d.buttonLink},c.a.createElement(nn,{title:"Add filter",className:B()(d.link,"add-filter"),onClick:function(){a(Object(Qa.a)((function(e){e.criteria[e.criteria.length-1].operator&&e.criteria.push({})})))}}),c.a.createElement(Vt.a,{className:d.divider}),c.a.createElement(nn,{title:"Clear",className:B()(d.link,"clear"),onClick:function(){r(),a(Pn)}}),c.a.createElement(Vt.a,{className:d.divider}),c.a.createElement(nn,{title:"Export",className:d.link}),c.a.createElement(Vt.a,{className:d.divider}),c.a.createElement(nn,{title:"Export full",className:d.link}),c.a.createElement(Vt.a,{className:d.divider}),c.a.createElement(nn,{title:"Apply",className:B()(d.link,"apply-filter"),onClick:function(){return o(t)}})),c.a.createElement(Vt.a,{style:{marginTop:8}}),c.a.createElement("div",null,c.a.createElement($a,{name:"title",value:k,onChange:function(e){return y({target:{value:e,name:"title"}})},className:B()(d.textField,"title")}),c.a.createElement(cn,{title:"share",name:"isShare",value:j,onChange:function(e){var t=e.name;return y({target:{value:e.checked,name:t}})},className:"share"})),c.a.createElement("div",null,c.a.createElement(on,{classes:d,onClick:x,title:"Save",hide:""===k||null===k||void 0!==v,className:"save"}),c.a.createElement(on,{classes:d,onClick:x,title:"Update",hide:""===v||void 0===v||null===v}),c.a.createElement(on,{classes:d,onClick:function(){return b(!0)},title:"Delete",hide:""===v||void 0===v||null===v,className:"delete"}),c.a.createElement(ma.a,{open:f,onClose:function(){return b(!1)},"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description"},c.a.createElement(pa.a,{id:"alert-dialog-title"},"Question"),c.a.createElement(fa.a,null,c.a.createElement(ba.a,{id:"alert-dialog-description"},"Would you like to remove the filter?")),c.a.createElement(va.a,null,c.a.createElement(R.a,{onClick:function(){return b(!1)},className:"cancel"},"Cancel"),c.a.createElement(R.a,{onClick:function(){s(t),b(!1)},color:"primary",autoFocus:!0,className:"confirm-delete"},"ok")))))}Fn(["long","decimal","date","time","datetime"],Nn.integer),Fn(["one_to_many"],Nn.text),Fn(["one_to_one","many_to_one","many_to_many"],["like","notLike","in","notIn","isNull"]);var An=Object(Y.a)((function(e){return{container:{width:200,zIndex:900,"& > div:last-child":{zIndex:1}},textField:{margin:e.spacing(1),flexBasis:200},divider:{width:1,height:28,margin:4},typography:{padding:e.spacing(1),fontWeight:600,flex:1},searchContainer:{display:"flex",flexDirection:"column","& div":{display:"flex",alignItems:"center"}},formControl:{margin:e.spacing(1)},group:{margin:"0px 8px",flexDirection:"row"},paper:{minWidth:480,boxShadow:"0 4px 12px rgb(0,0,0,0.4)"},link:{margin:e.spacing(1)},button:{margin:e.spacing(1)},list:{width:"100%",padding:0},listItem:{paddingLeft:0,paddingTop:0,paddingBottom:0},searchFilterContainer:{display:"flex",alignItems:"flex-start !important"},searchFilter:{flexDirection:"column",alignItems:"baseline !important",width:"100%"},filter:{flexDirection:"column",marginLeft:8,alignItems:"baseline !important"},inputIconBtn:{margin:0,padding:0,color:"#bbb"},label:{fontSize:"0.875rem"},filterLabel:{display:"flex",alignItems:"center",margin:"0 8px"},input:{"& input":{paddingTop:8,paddingBottom:8,fontSize:14},borderRadius:16}}}));function Hn(e){try{return JSON.parse(e)}catch(t){return e}}function Rn(e){var t=e.icon,a=e.title,n=e.classes;return c.a.createElement("div",{className:n.filterLabel},c.a.createElement(Ya,{icon:t}),c.a.createElement(Et.a,{className:n.typography},a))}function Vn(e){var t=e.filter,a=e.disabled,n=e.isChecked,r=e.onClick,o=e.onChange,l=e.classes,i=t.title;return c.a.createElement(Na.a,{className:l.listItem},c.a.createElement(cn,{name:i.replace(" ","_").toLowerCase(),value:n,onChange:function(e){o(e,t)},inline:!0,isDisabled:a}),c.a.createElement(nn,{title:i,onClick:function(){return(!a||n)&&r(t,!n)},style:a&&!n?{color:"rgba(0, 0, 0, 0.54)"}:{}}))}function Wn(e){var t=e.active,a=void 0===t?[]:t,n=e.data,r=void 0===n?[]:n,o=e.disabled,l=e.onClick,i=e.onChange,s=e.classes;return c.a.createElement("div",{className:s.filter},c.a.createElement(Ta.a,{className:s.list},r.map((function(e){return c.a.createElement(Vn,{key:e.id,filter:e,isChecked:a.includes(e.id),disabled:o,onClick:l,onChange:i,classes:s})}))))}function Yn(e){var t=e.filters,a=e.value,n=void 0===a?[]:a,o=e.onOpen,l=e.onDelete,i=e.classes,s=e.onContentSearch,u=Object(r.useState)(""),d=Object(S.a)(u,2),m=d[0],p=d[1],f=c.a.useCallback((function(e){var t=e.target.value;s(t||m)}),[s,m]);return n.length>0?c.a.createElement(La,{handleClick:o,value:n,onDelete:l,filters:t}):c.a.createElement($a,{name:"search",margin:"none",placeholder:Ce("Search"),onChange:p,onKeyPress:function(e){return"Enter"===e.key&&f(e)},value:m,variant:"outlined",size:"small",InputProps:{className:i.input,endAdornment:c.a.createElement(Ia.a,{position:"end"},c.a.createElement(V.a,{"aria-label":"open",onClick:o,className:i.inputIconBtn},c.a.createElement(Fa.a,null)),c.a.createElement(V.a,{"aria-label":"refresh",className:i.inputIconBtn,onClick:f},c.a.createElement(Ma.a,null)))}})}function qn(e){var t=e.name,a=e.value,n=e.fields,o=e.filters,l=void 0===o?[]:o,i=e.domain,s=void 0===i?[]:i,m=e.onSave,p=e.onDelete,f=e.handleChange,b=e.onContentSearch,v=An(),g=Object(r.useRef)(),h=c.a.useState(!1),E=Object(S.a)(h,2),k=E[0],j=E[1],y=c.a.useState([]),O=Object(S.a)(y,2),x=O[0],C=O[1],w=c.a.useState(!1),N=Object(S.a)(w,2),D=N[0],P=N[1],F=Object(r.useState)(Pn),M=Object(S.a)(F,2),z=M[0],B=M[1],L=D?l.find((function(e){return e.id===x[0]})):null;function A(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=arguments.length>2?arguments[2]:void 0,n=l.filter((function(t){return e.includes(t.id)})),r=s.filter((function(t){return e.includes(t.id)})),c={criteria:[],operator:t.operator||"and"};if(a&&D)c.criteria=t.criteria;else{var o,i;if(n.length)(i=c.criteria).push.apply(i,Object(d.a)(n.map((function(e){var t=Hn(e.filterCustom),a=t.criteria,n=void 0===a?[]:a;return{operator:t.operator,criteria:n}}))));(o=c.criteria).push.apply(o,Object(d.a)(t.criteria||[]))}return r.length&&(c._domains=r.map((function(e){return{title:e.title,domain:e.domain}}))),c}function H(e,t){var a=[];e.length>0&&(a=A(e,t)),f({selected:Object(d.a)(e),query:a})}function R(e,t){var a=!!e.domain,n=t&&e?[e.id]:[];P(!a&&t),C(n),H(n)}function W(e,t){var a=t.id,n=x.findIndex((function(e){return e===a}));n>-1?!e&&x.splice(n,1):e&&x.push(a),C(Object(d.a)(x))}function Y(){f({}),C([]),P(!1),B(Pn)}function q(){return(q=Object(I.a)(T.a.mark((function e(t){return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m(t);case 2:R(e.sent);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(r.useEffect)((function(){if(L){var e=Hn(L.filterCustom),t=e.criteria,a=e.operator;B(Object(u.a)(Object(u.a)({},L),{},{operator:a,criteria:t.map((function(e){return Object(u.a)(Object(u.a)({},e),{},{operator:e.operator})}))}))}else B(Pn)}),[B,L]),c.a.createElement("div",{className:v.container,ref:g},c.a.createElement(Yn,{value:a&&a.selected,filters:l,onOpen:function(){j(!0)},onDelete:Y,classes:v,onContentSearch:b}),c.a.createElement(Da.a,{open:k,anchorEl:g.current,placement:"bottom-start",disablePortal:!0},c.a.createElement(Pa.a,{className:v.paper},c.a.createElement("div",{className:v.searchContainer},c.a.createElement("div",null,c.a.createElement(Et.a,{className:v.typography},Ce("Advanced Search")),c.a.createElement(V.a,{"aria-label":"close",onClick:function(){j(!1)}},c.a.createElement(za.a,null))),c.a.createElement(Vt.a,null),c.a.createElement("div",{className:v.searchFilterContainer},s.length>0&&c.a.createElement("div",{className:v.searchFilter},c.a.createElement(Rn,{icon:"filter",title:"Filters",classes:v}),c.a.createElement(Wn,{data:s,disabled:D,active:x,onClick:R,onChange:W,classes:v})),l.length>0&&c.a.createElement("div",{className:v.searchFilter},c.a.createElement(Rn,{icon:"filter",title:"My Filter",classes:v}),c.a.createElement(Wn,{data:l,disabled:D,active:x,onClick:R,onChange:W,classes:v}))),l.length>=1||s.length?c.a.createElement(Vt.a,{style:{marginTop:8}}):"",c.a.createElement(Ln,{fields:n,clearFilters:Y,applyFiltersClick:function(e){x.length>0?H(x.length?Object(d.a)(x):[null]):e&&e.criteria.length&&function(e){f({selected:[null],query:A(x,e,!0)})}(Object(u.a)(Object(u.a)({},e),{},{criteria:(e.criteria||[]).filter((function(e){return e.fieldName&&e.operator}))})),j(!1)},filterView:t,onSave:function(e){return q.apply(this,arguments)},onDelete:function(e){p(e),Y()},customCriteria:z,setCustomCriteria:B})))))}Object(Y.a)((function(){return{paper:{display:"flex",alignItems:"center"},main:{display:"flex",alignItems:"center",justifyContent:"center"},content:{width:"50%",height:"100%",position:"relative"}}}));Object(Y.a)({input:{fontSize:14,color:"black"},label:{fontSize:14},iconSelected:{fontSize:20},chip:{marginLeft:5},deleteIcon:{color:"white"}});var _n=a(870),Un=a(886),Xn=Object(Y.a)((function(e){return{typography:{fontSize:8,fontWeight:"bold"},circularProgress:{padding:3,color:"#0275D8"}}}));function Gn(e){var t=e.progressNumber,a=void 0===t?0:t,n=Xn();return c.a.createElement(Un.a,{position:"relative",display:"inline-flex"},c.a.createElement(_n.a,{className:n.circularProgress,size:30,variant:"determinate",value:a}),c.a.createElement(Un.a,{top:0,left:0,bottom:0,right:0,position:"absolute",display:"flex",alignItems:"center",justifyContent:"center"},c.a.createElement(Et.a,{className:n.typography,variant:"caption",component:"div",color:"textSecondary"},"".concat(Math.round(a),"%"))))}var Kn=a(881),Jn=a(452),$n=a(253),Qn=a.n($n),Zn=a(172),er=a.n(Zn),tr=a(137),ar=a.n(tr),nr=a(252),rr=a.n(nr),cr=Object(Y.a)((function(e){return{title:{display:"flex",alignItems:"center"},input:{padding:"4px 0px","&:hover":{border:"1px solid #b4b6b8"},border:"1px solid transparent",width:"100%"},checkedIcon:{color:"#b4b6b8","&:hover":{color:"#25e8c8 !important"}},dragHandle:{color:"#b4b6b8",fontSize:"1.2rem",cursor:"grab"},card:{cursor:"pointer","&:hover":{backgroundColor:"#f5f8fa"}},cardTask:Object(P.a)({marginLeft:e.spacing(5),display:"flex",width:"100%",alignItems:"center"},e.breakpoints.only("xs"),{marginLeft:e.spacing(1)}),checkIconButton:{padding:e.spacing(1)},cardItem:{display:"flex",alignItems:"center",justifyContent:"space-between",borderBottom:"1px solid #E8ECEE",borderRadius:0,boxShadow:"none",position:"relative"},stickyElement:{"&:hover":{backgroundColor:"#f5f8fa"},width:"100%",display:"flex",alignItems:"center"},menuPaper:{border:"1px solid #d3d4d5"}}}));function or(e){var t=e.onDelete,a=e.record,n=e.style,o=e.Card,l=e.canDelete,i=(e.canEdit,e.onEdit),s=e.dragHandleProps,d=void 0===s?{}:s,m=Object(D.a)(e,["onDelete","record","style","Card","canDelete","canEdit","onEdit","dragHandleProps"]),p=Object(r.useState)(null),f=Object(S.a)(p,2),b=f[0],v=f[1],g=Object(r.useState)(!1),h=Object(S.a)(g,2),E=h[0],k=h[1],j=c.a.useState(!1),y=Object(S.a)(j,2),O=y[0],x=y[1],C=Object(Kn.a)("(max-width:600px)"),w=cr(),N=function(){v(null)},T=c.a.useCallback((function(e){x(!0)}),[]),I=c.a.useCallback((function(e){e&&e.stopPropagation(),x(!1)}),[]),P=c.a.useCallback((function(e){e.stopPropagation(),I(),t(a)}),[t,a,I]);return c.a.createElement(Pa.a,Object.assign({},m,{className:B()(w.cardItem,w.card),style:Object(u.a)({},n),onMouseEnter:function(){k(!0)},onMouseLeave:function(){k(!1)}}),c.a.createElement("div",{className:w.stickyElement},c.a.createElement("div",{className:w.title},c.a.createElement("div",d,c.a.createElement(er.a,{className:w.dragHandle,style:{visibility:E||C?"visible":"hidden"}})),c.a.createElement("div",{style:{display:"flex",alignItems:"center"}},c.a.createElement(o,{record:a,onEdit:i}),c.a.createElement("div",null,c.a.createElement(V.a,{onClick:function(e){e.stopPropagation(),v(e.currentTarget)},size:"small"},c.a.createElement(Qn.a,{style:{fontSize:15}})),c.a.createElement(Jn.a,{anchorEl:b,open:Boolean(b),onClose:N,classes:{paper:w.menuPaper},elevation:0,getContentAnchorEl:null,anchorOrigin:{vertical:"bottom",horizontal:"center"},transformOrigin:{vertical:"top",horizontal:"center"}},l&&c.a.createElement(xa.a,{onClick:function(e){e.stopPropagation(),N(),T()}},Ce("Delete"))))))),c.a.createElement(ha,{open:O,onClose:I,onConfirm:P,title:Ce("Delete Task")}))}or.defaultProps={onDelete:function(){},record:{},style:{},Card:function(e){var t=e.record,a=e.onEdit,n=cr(),o=Object(r.useState)({name:t.name,status:t.status}),l=Object(S.a)(o,2),i=l[0],s=l[1],d=Object(r.useState)(!1),m=Object(S.a)(d,2),p=m[0],f=m[1],b=c.a.useContext(hc).selectedProject,v=c.a.useCallback((function(e){var t=e.target,a=t.name,n=t.value;e.stopPropagation(),s((function(e){return Object(u.a)(Object(u.a)({},e),{},Object(P.a)({},a,n))}))}),[]),g=c.a.useCallback(function(){var e=Object(I.a)(T.a.mark((function e(n){var r,c;return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n&&n.stopPropagation(),r=p?t.statusBeforeComplete:"closed",s((function(e){return Object(u.a)(Object(u.a)({},e),{},{status:r})})),e.next=5,Fe(Object(u.a)(Object(u.a)({},t),{},{status:r,statusBeforeComplete:t.status}));case 5:(c=e.sent)&&a(Object(u.a)({},c));case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[a,t,p]),h=c.a.useCallback(Object(I.a)(T.a.mark((function e(){var n;return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.name===i.name){e.next=5;break}return e.next=3,Fe(Object(u.a)(Object(u.a)({},t),{},{name:i.name}));case 3:n=e.sent,a(Object(u.a)(Object(u.a)({},n),{},{"priority.technicalTypeSelect":i["priority.technicalTypeSelect"]}));case 5:case"end":return e.stop()}}),e)}))),[i,a,t]);return Object(r.useEffect)((function(){s(t);var e=xe(t);f(e)}),[t,b]),c.a.createElement("div",{className:n.cardTask},c.a.createElement(V.a,{size:"small",onClick:g,className:n.checkIconButton},p?c.a.createElement(rr.a,{fontSize:"small",style:{color:"#25e8c8"},className:n.checkedIcon}):c.a.createElement(ar.a,{fontSize:"small",style:{color:"#b4b6b8"},className:n.checkedIcon})),c.a.createElement(W.a,{onClick:function(e){return e.stopPropagation()},onChange:v,onBlur:h,name:"name",value:i.name,InputProps:{disableUnderline:!0},className:n.input,style:{marginRight:2}},t.name))},canDelete:!0,canEdit:!0,onEdit:function(){}};var lr=Object(Y.a)({input:{fontSize:14,color:"black"},label:{fontSize:14},iconSelected:{fontSize:"0.75rem",color:"white",margin:"0px 8px",height:28,width:28}});function ir(e){var t=e.model,a=e.optionLabel,n=void 0===a?"name":a,o=e.index,l=e.value,i=void 0===l?[]:l,s=e.update,m=e.criteriaIds,p=e.operator,f=void 0===p?"and":p,b=e.classes,v=void 0===b?{}:b,g=e.className,h=e.disableClearable,E=e.TextFieldProps,k=void 0===E?{}:E,j=e.options,y=e.criteria,O=e.getAvatarColor,x=Object(r.useState)(!1),C=Object(S.a)(x,2),w=C[0],N=C[1],T=Object(r.useState)([]),I=Object(S.a)(T,2),D=I[0],P=I[1],F=Object(r.useState)(null),M=Object(S.a)(F,2),z=M[0],B=M[1],L=lr(),A=Object(r.useCallback)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",a=[];e&&a.push({fieldName:n,operator:"like",value:e}),y&&y&&y.map((function(e){return a.push(e)}));var r={criteria:a,operator:f};return Se.search(t,{fields:["name","fullName"],data:r,limit:10,offset:0}).then((function(e){var t=e.data;t&&t.length&&P(Object(d.a)(t))}))}),[t,f,n,y]);return function(e,t){var a=c.a.useRef(!1);c.a.useEffect((function(){if(a.current){var n=setTimeout((function(){return e()}),t);return function(){return clearTimeout(n)}}a.current=!0}),[e,t])}(c.a.useCallback((function(){z&&A(z,m)}),[A,z,m]),500),Object(r.useEffect)((function(){w||P([])}),[w]),Object(r.useEffect)((function(){w&&(j&&j.length>0?P(Object(d.a)(j)):A(null,m))}),[A,w,m,j]),c.a.createElement(Xt.a,{classes:Object(u.a)({inputFocused:L.input,clearIndicator:L.input,popupIndicator:L.input,disabled:L.disabled},v),className:g,value:i,getOptionSelected:function(e,t){return e.id===t.id},size:"small",key:o,open:w,onOpen:function(e){e&&e.stopPropagation(),N(!0)},onClose:function(e){e&&e.stopPropagation(),N(!1)},options:D,disableCloseOnSelect:!0,disableClearable:h,clearOnEscape:!0,autoComplete:!0,onChange:function(e,t){s(t),N(!1)},getOptionLabel:function(e){return e[n]||""},renderOption:function(e,t){t.selected;return c.a.createElement(c.a.Fragment,null,c.a.createElement(Rt.a,{className:L.iconSelected,style:{backgroundColor:O(e.id),border:"1px solid ".concat(O(e.id))}},e&&(e[n].substring(0,2)||"").toUpperCase()),c.a.createElement(Et.a,{style:{fontSize:14}},e[n]))},onInputChange:function(e,t){return B(t)},renderInput:function(e){return c.a.createElement(W.a,Object.assign({},e,{variant:"outlined",fullWidth:!0},k,e,{InputProps:Object(u.a)(Object(u.a)(Object(u.a)({},k.InputProps||{}),e.InputProps||{}),{},{onClick:function(e){return e&&e.stopPropagation()},startAdornment:i&&c.a.createElement(Ia.a,{position:"start"},c.a.createElement(Rt.a,{className:L.iconSelected,style:{backgroundColor:O(i.id),border:"1px solid ".concat(O(i.id))}},i&&i[n]&&(i[n].substring(0,2)||"").toUpperCase()))}),inputProps:Object(u.a)(Object(u.a)({},e.inputProps||{}),{},{onClick:function(t){t&&t.stopPropagation(),e.inputProps&&e.inputProps.onClick&&e.inputProps.onClick(t)}}),InputLabelProps:{className:L&&L.label},className:g}))}})}var sr=Object(Y.a)((function(e){return{typography:{textAlign:"left",textTransform:"none"},common:{width:"100%",marginBottom:15},drawerFooter:Object(P.a)({display:"flex",alignItems:"center",background:"#F6F8F9",padding:13,justifyContent:"space-between",width:"50%",position:"fixed",border:"1px solid lightgray",bottom:0,zIndex:100},e.breakpoints.only("xs"),{width:"100%"}),commentBtnActive:{backgroundColor:"#14aaf5",color:"white",fontSize:"9pt",fontWeight:600,borderRadius:50,border:"none",marginLeft:10,textTransform:"none","&:hover":{backgroundColor:"#098ccd !important"}},formControl:{width:"100%",marginBottom:15},commentBtnDisable:{backgroundColor:"#14aaf5","&:hover":{backgroundColor:"#098ccd !important"}},select:{padding:"18.5px 14px"},picker:{width:"100%",marginBottom:15,marginTop:0,padding:0},inputClassName:{padding:"4.5px 10.5px 3.5px 10.5px"},materialSelect:{padding:10.5},addSubtaskButton:{width:"fit-content",textTransform:"none",color:"#b4b6b8","&:hover":{color:"#3F51B5 !important"}},undeleteIcon:{"&:hover":{color:"black",border:"1px solid black"},textTransform:"none",padding:"2px 5px",color:"#9CA2A9",border:"1px solid #9CA2A9",marginRight:5},permanentlyDeleteIcon:{"&:hover":{background:"#E8384F",border:"1px solid #E8384F"},textTransform:"none",padding:"2px 5px",background:"#FF5263",border:"1px solid #FF5263",color:"white"},deleteContainer:{background:"#FFEDEF",justifyContent:"space-between",display:"flex",alignItems:"center",padding:12},selectContainer:{background:"#F6F8F9",justifyContent:"space-between",display:"flex",alignItems:"center",flexDirection:"column",padding:12},subtaskContainer:{display:"flex",justifyContent:"space-between",alignItems:"center",width:"100%"},subtaskHint:{color:"#6F7782",fontSize:14},commentInput:{width:"100%","& div":{borderRadius:16},"& input":{fontSize:14}},staticSelect:{width:"100%"}}}));function ur(e){var t=e.task,a=c.a.useContext(hc),n=a.onCardEdit,o=a.userId,l=a.maxFiles,i=a.attachments,s=a.addComment,m=a.removeAttachment,p=a.downloadAttachment,f=a.selectedProject,b=void 0===f?{}:f,v=a.updateSubTasks,g=a.onCardDelete,h=a.addNewSubtask,E=a.isDeleteClicked,k=a.taskIndex,j=a.premanentlyDeleteTask,y=a.undoTaskDelete,O=a.projectId,x=a.closeSubtaskOfClicked,C=a.isSubtaskOfClicked,w=a.getAvatarColor,N=a.tasks,D=Object(r.useState)({name:"",project:{},parentTask:{},assignedTo:{},status:"",priority:"",projectTaskCategory:"",taskDate:null,progressSelect:0,taskEndDate:null,description:""}),F=Object(S.a)(D,2),z=F[0],L=F[1],A=z||{},H=A.name,Y=A.project,q=A.parentTask,_=A.assignedTo,U=A.status,X=A.priority,G=A.taskDate,K=A.progressSelect,J=A.taskEndDate,$=A.description,Q=A.projectTaskCategory,Z=sr(),ee=Object(r.useState)(null),te=Object(S.a)(ee,2)[1],ae=Object(r.useState)({limit:4,total:0,offset:0}),ce=Object(S.a)(ae,2),oe=ce[0],le=ce[1],ie=Object(r.useState)(null),se=Object(S.a)(ie,2),ue=se[0],de=se[1],me=Object(r.useState)({message:"",open:!1,severity:"success"}),pe=Object(S.a)(me,2),fe=pe[0],be=pe[1],ve=Object(r.useState)(""),ge=Object(S.a)(ve,2),he=ge[0],Ee=ge[1],ke=Object(r.useState)([]),je=Object(S.a)(ke,2),ye=je[0],Oe=je[1],xe=Object(r.useState)(null),we=Object(S.a)(xe,2),Se=we[0],Ne=we[1],Te=function(e){var t=e.severity,a=e.message;be({open:!0,severity:t,message:a})},Ie=function(){var e=Object(I.a)(T.a.mark((function e(t){var a;return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Fe(t);case 2:(a=e.sent)&&(n({column:Object(u.a)({},a.projectTaskSection||{}),record:Object(u.a)({},a)}),L(Object(u.a)({},a)));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),De=function(e){L(Object(u.a)(Object(u.a)({},z),{},Object(P.a)({},e.target.name,e.target.value))),"name"!==e.target.name&&Me(e)},Pe=function(e,t){var a=Object(u.a)(Object(u.a)({},z),{},Object(P.a)({},t,"taskDate"!==t&&"taskEndDate"!==t||!e?e:M()(e).format("YYYY-MM-DD")));"status"===t&&(a.statusBeforeComplete=z.status),"priority"===t&&(a["priority.technicalTypeSelect"]=e.technicalTypeSelect),L(a),Ie(a)},Me=function(e){Ie(Object(u.a)(Object(u.a)({},z),{},Object(P.a)({},e.target.name,e.target.value)))},ze=function(){var e=Object(I.a)(T.a.mark((function e(){var a,n,r,c;return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=oe.limit,n=oe.offset,e.next=3,_e({offset:n+4,limit:a,id:t.id,relatedModel:"com.axelor.apps.project.db.ProjectTask"});case 3:(r=e.sent)&&(c=[].concat(Object(d.a)(ue),Object(d.a)(r.comments)),de(c),le(Object(u.a)(Object(u.a)({},oe),{},{offset:r.offset,total:r.total})));case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Be=function(){var e=Object(I.a)(T.a.mark((function e(t){var a,n,r;return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=oe.total,e.next=3,Xe(t);case 3:(n=e.sent)&&n.id?(r=ue.findIndex((function(e){return e.id===n.id})),ue.splice(r,1),le(Object(u.a)(Object(u.a)({},oe),{},{total:a-1})),de(ue),Te({message:"TaskEditor.removeSuccess"})):Te({message:"TaskEditor.error",severity:"error"});case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Le=c.a.useCallback(Object(I.a)(T.a.mark((function e(){var t;return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(he){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,s(he);case 4:(t=e.sent)&&(Ee(""),de((function(e){return[t].concat(Object(d.a)(e))})));case 6:case"end":return e.stop()}}),e)}))),[s,he]);return Object(r.useEffect)((function(){L(Object(u.a)({},t)),function(){var e=Object(I.a)(T.a.mark((function e(){var a;return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,_e({id:t.id,relatedModel:"com.axelor.apps.project.db.ProjectTask"});case 2:(a=e.sent)&&(de(a.comments),le({limit:4,offset:a.offset,total:a.total}));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()()}),[t]),Object(r.useEffect)((function(){var e=N&&N.filter((function(e){return e.parentTask&&e.parentTask.id===t.id}));Oe(Object(d.a)(e||[]))}),[N,t]),c.a.createElement(ht.a,{container:!0},E&&c.a.createElement(ht.a,{item:!0,xs:12,className:Z.deleteContainer},c.a.createElement("div",{style:{display:"flex",alignItems:"center"}},c.a.createElement(wt.a,{style:{color:"#E8384F"}}),c.a.createElement(Et.a,{style:{color:"#E8384F",fontSize:14}},Ce("This task is deleted"))),c.a.createElement("div",null,c.a.createElement(R.a,{variant:"outlined",className:Z.undeleteIcon,onClick:function(){return y(z,k)}},Ce("Undelete")),c.a.createElement(R.a,{variant:"outlined",className:Z.permanentlyDeleteIcon,onClick:j},Ce("Delete Permanently")))),C&&c.a.createElement(ht.a,{item:!0,xs:12,className:Z.selectContainer},c.a.createElement("div",{className:Z.subtaskContainer},c.a.createElement(Et.a,{className:Z.subtaskHint},Ce("Make this task a subtask of another project task.")),c.a.createElement(V.a,{onClick:x},c.a.createElement(Nt.a,null))),c.a.createElement("div",{style:{width:"100%"}},c.a.createElement(da,{model:"com.axelor.apps.project.db.ProjectTask",title:"Parent Task",optionLabel:"fullName",name:"parentTask",value:Se,onChange:function(e){Ne(e),Pe(e,"parentTask"),x()},data:q,label:Ce("Find a task"),criteria:[{fieldName:"id",operator:"!=",value:t.id},{fieldName:"project.id",operator:"!=",value:O}],operator:"and"}))),c.a.createElement(ht.a,{item:!0,container:!0,style:{padding:15}},c.a.createElement(ht.a,{item:!0,xs:12},c.a.createElement(W.a,{style:{width:"100%",marginBottom:15},name:"name",placeholder:Ce("Subject"),variant:"outlined",value:H,onChange:De,onBlur:Me})),c.a.createElement(ht.a,{item:!0,xs:4},c.a.createElement(Et.a,{variant:"overline",className:Z.typography,display:"block",gutterBottom:!0},Ce("Project"))),c.a.createElement(ht.a,{item:!0,xs:8,className:Z.formControl},c.a.createElement(da,{model:"com.axelor.apps.project.db.Project",title:Ce("Project"),name:"project",optionLabel:"fullName",value:Y,onChange:function(e){return Pe(e,"project")}})),c.a.createElement(ht.a,{item:!0,xs:4},c.a.createElement(Et.a,{variant:"overline",className:Z.typography,display:"block",gutterBottom:!0},Ce("Parent Task"))),c.a.createElement(ht.a,{item:!0,xs:8,className:Z.formControl},c.a.createElement(da,{model:"com.axelor.apps.project.db.ProjectTask",title:Ce("Parent Task"),optionLabel:"fullName",name:"parentTask",value:q,onChange:function(e){return Pe(e,"parentTask")},data:q,criteria:[{fieldName:"id",operator:"!=",value:t.id},{fieldName:"project.id",operator:"=",value:O}],operator:"and"})),c.a.createElement(ht.a,{item:!0,xs:4},c.a.createElement(Et.a,{variant:"overline",className:Z.typography,display:"block",gutterBottom:!0},Ce("Assigned To"))),c.a.createElement(ht.a,{item:!0,xs:8,className:Z.formControl},c.a.createElement(ir,{model:"com.axelor.auth.db.User",title:Ce("Assigned To"),optionLabel:"fullName",name:"assignedTo",value:_,update:function(e){Pe(e,"assignedTo")},options:b.membersUserSet,getAvatarColor:w})),c.a.createElement(c.a.Fragment,null,c.a.createElement(ht.a,{item:!0,xs:4},c.a.createElement(Et.a,{variant:"overline",className:Z.typography,display:"block",gutterBottom:!0},Ce("Status"))),c.a.createElement(ht.a,{item:!0,xs:8,className:Z.formControl},c.a.createElement(Sa,{value:U,name:"status",options:re,className:Z.staticSelect,onChange:function(e,t){return De(t)}}))),c.a.createElement(c.a.Fragment,null,c.a.createElement(ht.a,{item:!0,xs:4},c.a.createElement(Et.a,{variant:"overline",className:Z.typography,display:"block",gutterBottom:!0},Ce("Priority"))),c.a.createElement(ht.a,{item:!0,xs:8,className:Z.formControl},c.a.createElement(Sa,{value:X,name:"priority",className:Z.staticSelect,options:ne,onChange:function(e,t){return De(t)}}))),c.a.createElement(c.a.Fragment,null,c.a.createElement(ht.a,{item:!0,xs:4},c.a.createElement(Et.a,{variant:"overline",className:Z.typography,display:"block",gutterBottom:!0},Ce("Category"))),c.a.createElement(ht.a,{item:!0,xs:8,className:Z.formControl},c.a.createElement(da,{name:"projectTaskCategory",optionLabel:"name",options:b.projectTaskCategorySet,value:Q,onChange:function(e,t){return Pe(e,"projectTaskCategory")}}))),c.a.createElement(c.a.Fragment,null,c.a.createElement(ht.a,{item:!0,xs:4},c.a.createElement(Et.a,{variant:"overline",className:Z.typography,display:"block",gutterBottom:!0},Ce("Progress"))),c.a.createElement(ht.a,{item:!0,xs:8},c.a.createElement(kt.a,{variant:"outlined",style:{width:"100%",marginBottom:15}},c.a.createElement(jt.a,{native:!0,value:K,onChange:De,classes:{select:Z.materialSelect},inputProps:{name:"progressSelect",id:"outlined-progressSelect"}},c.a.createElement("option",{"aria-label":Ce("TaskEditor.none"),value:""}),[0,10,20,30,40,50,60,70,80,90,100].map((function(e){return c.a.createElement("option",{key:e,value:e},e," %")})))))),c.a.createElement(ht.a,{item:!0,xs:4},c.a.createElement(Et.a,{variant:"overline",className:Z.typography,display:"block",gutterBottom:!0},Ce("TaskEditor.taskDate"))),c.a.createElement(ht.a,{item:!0,xs:8},c.a.createElement(ya,{className:Z.picker,inputClassName:Z.inputClassName,value:G,name:"taskDate",label:Ce("TaskEditor.taskDate"),onChange:function(e,t){return Pe(e,"taskDate")}})),c.a.createElement(ht.a,{item:!0,xs:4},c.a.createElement(Et.a,{variant:"overline",className:Z.typography,display:"block",gutterBottom:!0},Ce("Task end"))),c.a.createElement(ht.a,{item:!0,xs:8},c.a.createElement(ya,{className:Z.picker,inputClassName:Z.inputClassName,value:J,name:"taskEndDate",label:"Task end",onChange:function(e,t){return Pe(e,"taskEndDate")}})),c.a.createElement(ht.a,{item:!0,xs:4},c.a.createElement(Et.a,{variant:"overline",className:Z.typography,display:"block",gutterBottom:!0},Ce("Description"))),c.a.createElement(ht.a,{item:!0,xs:8,style:{width:"100%",marginBottom:15,border:"1px solid #C4C4C4",borderRadius:4}},c.a.createElement(Lt,{placeholder:"editor",content:$||"",onContentChange:function(e){return function(e){te(e)}(e)},onDescriptionChange:function(e){return function(e){Ie(Object(u.a)(Object(u.a)({},z),{},{description:e}))}(e)}})),i&&i.length>0&&c.a.createElement(c.a.Fragment,null,c.a.createElement(ht.a,{item:!0,xs:12},c.a.createElement(Et.a,{variant:"overline",className:Z.typography,display:"block",gutterBottom:!0},Ce("Attachments"))),c.a.createElement(ht.a,{item:!0,xs:12},c.a.createElement(ia,{files:i,maxFiles:l,removeAttachment:m,downloadAttachment:p}))),ye&&ye.length>0&&c.a.createElement(ht.a,{item:!0,xs:12},c.a.createElement(Et.a,{variant:"overline",className:Z.typography,display:"block",gutterBottom:!0},Ce("Sub Tasks"))),ye&&ye.length>0&&c.a.createElement(ht.a,{item:!0,xs:12},c.a.createElement(yt.a,{onDragEnd:function(e){if(e.destination){var t=function(e,t,a){var n=Array.from(e),r=n.splice(t,1),c=Object(S.a)(r,1)[0];return n.splice(a,0,c),n}(ye,e.source.index,e.destination.index);Oe(t)}}},c.a.createElement(yt.c,{droppableId:"droppable"},(function(e){return c.a.createElement("div",Object.assign({},e.droppableProps,{ref:e.innerRef}),ye.map((function(e,t){return e.parentTask&&e.parentTask.id===z.id&&c.a.createElement(yt.b,{key:e.id,draggableId:"".concat(e.id),index:t},(function(t){return c.a.createElement("div",Object.assign({ref:t.innerRef},t.draggableProps,t.dragHandleProps),c.a.createElement(or,{record:e,onDelete:function(e){return function(e){if(e){var t=Object(d.a)(ye),a=ye.findIndex((function(t){return t.id===e.id}));t.splice(a,1),Oe(Object(d.a)(t)),v(Object(d.a)(t)),g({column:Object(u.a)({},e.projectTaskSection||{}),record:Object(u.a)({},e)})}}(e)},onEdit:function(e){return function(e){n({column:Object(u.a)({},e.projectTaskSection||{}),record:Object(u.a)({},e)});var t=Object(d.a)(ye);t[ye.findIndex((function(t){return t.id===e.id}))]=Object(u.a)({},e),Oe(Object(d.a)(t)),v(Object(d.a)(t))}(e)}}))}))})),e.placeholder)})))),c.a.createElement(ht.a,{item:!0,xs:12,style:{textAlign:"left"}},c.a.createElement(R.a,{startIcon:c.a.createElement(xt.a,null),className:Z.addSubtaskButton,onClick:function(){return h(z)}},Ce("Add Subtask")))),c.a.createElement(ht.a,{item:!0,xs:12},c.a.createElement(_t,{limit:oe.limit,offset:oe.offset,total:oe.total,comments:ue,loadComment:ze,removeComment:function(e){return Be(e)},userId:o})),c.a.createElement(ht.a,{className:Z.drawerFooter},c.a.createElement(ht.a,{style:{flex:1}},c.a.createElement(W.a,{className:Z.commentInput,size:"small",name:"name",placeholder:Ce("TaskEditor.comment"),variant:"outlined",value:he,onChange:function(e){return Ee(e.target.value)}})),c.a.createElement(ht.a,null,c.a.createElement(R.a,{variant:"contained",color:"primary",className:B()(Z.commentBtnActive,Object(P.a)({},Z.commentBtnDisable,!he)),onClick:Le},Ce("Add")))),c.a.createElement(ea,Object.assign({},fe,{closeSnackbar:function(){be(Object(u.a)(Object(u.a)({},fe),{},{open:!1}))}})))}var dr=Object(Y.a)((function(e){return{root:{display:"flex"},paper:{marginRight:e.spacing(2)},icon:{fill:"#6f7782",height:"1em",marginRight:8,width:"1em"},typography:{color:"#151b26",fontSize:14},menuPaper:{border:"1px solid #d3d4d5"}}}));function mr(e){var t=e.anchorEl,a=e.isDialog,n=dr(),r=c.a.useContext(hc),o=r.handleClose,l=r.deleteTask,i=r.task,s=void 0===i?{}:i,u=r.handleFullScreenOpen,d=r.onSubtaskOfClicked,m=r.handleDuplicateTaskDialogOpen,p=r.handleConvertToProjectDialogOpen,f=r.handlePrintPDFDialog;return c.a.createElement("div",{className:n.root},c.a.createElement("div",null,c.a.createElement(Jn.a,{anchorEl:t,open:Boolean(t),onClose:o,classes:{paper:n.menuPaper},elevation:0,getContentAnchorEl:null,anchorOrigin:{vertical:"bottom",horizontal:"center"},transformOrigin:{vertical:"top",horizontal:"center"}},!a&&c.a.createElement(xa.a,{onClick:function(e){o(e),u()}},c.a.createElement("svg",{className:n.icon,focusable:"false",viewBox:"0 0 32 32"},c.a.createElement("path",{d:"M13.7,19.7L5.4,28H13c0.6,0,1,0.4,1,1s-0.4,1-1,1H3c-0.6,0-1-0.4-1-1V19c0-0.6,0.4-1,1-1s1,0.4,1,1v7.6l8.3-8.3c0.4-0.4,1-0.4,1.4,0S14.1,19.3,13.7,19.7z M29,2H19c-0.6,0-1,0.4-1,1s0.4,1,1,1h7.6l-8.3,8.3c-0.4,0.4-0.4,1,0,1.4c0.2,0.2,0.5,0.3,0.7,0.3s0.5-0.1,0.7-0.3L28,5.4V13c0,0.6,0.4,1,1,1s1-0.4,1-1V3C30,2.4,29.6,2,29,2z"})),c.a.createElement(Et.a,{className:n.typography},Ce("Full screen"))),c.a.createElement(xa.a,{onClick:d},c.a.createElement("svg",{className:n.icon,focusable:"false",viewBox:"0 0 32 32"},c.a.createElement("path",{d:"M15,13c0-0.6-0.4-1-1-1H3c-0.6,0-1-0.4-1-1V7c0-0.6,0.4-1,1-1h11c0.6,0,1-0.4,1-1s-0.4-1-1-1H3C1.3,4,0,5.3,0,7v4c0,1.7,1.3,3,3,3h11C14.6,14,15,13.6,15,13z M29,18h-3v-6c0-2.2-1.8-4-4-4h-4.6l2.3-2.3c0.4-0.4,0.4-1,0-1.4s-1-0.4-1.4,0l-4,4c-0.4,0.4-0.4,1,0,1.4c0,0,0,0,0,0l4,4c0.4,0.4,1,0.4,1.4,0c0,0,0,0,0,0c0.4-0.4,0.4-1,0-1.4c0,0,0,0,0,0L17.4,10H22c1.1,0,2,0.9,2,2v6H9c-1.7,0-3,1.3-3,3v4c0,1.7,1.3,3,3,3h20c1.7,0,3-1.3,3-3v-4C32,19.3,30.7,18,29,18z M30,25c0,0.6-0.4,1-1,1H9c-0.6,0-1-0.4-1-1v-4c0-0.6,0.4-1,1-1h20c0.6,0,1,0.4,1,1V25z"})),c.a.createElement(Et.a,{className:n.typography},Ce("Make a subtask of"))),c.a.createElement(Vt.a,null),c.a.createElement(xa.a,{onClick:function(e){o(e),m()}},c.a.createElement(Et.a,{className:n.typography},Ce("Duplicate task"))),c.a.createElement(xa.a,{onClick:function(e){o(e),f()}},c.a.createElement(Et.a,{className:n.typography},Ce("Print"))),c.a.createElement(xa.a,{onClick:function(e){o(e),p()}},c.a.createElement(Et.a,{className:n.typography},Ce("Convert to project"))),c.a.createElement(Vt.a,null),c.a.createElement(xa.a,{onClick:function(e){o(e),l({column:s.projectTaskSection,record:s})}},c.a.createElement(Et.a,{className:n.typography,style:{color:"#ED4F5F"}},Ce("Delete Task"))))))}var pr=Object(Y.a)((function(e){return{paper:{display:"flex",alignItems:"center"},main:{display:"flex",alignItems:"center",justifyContent:"center"},content:Object(P.a)({width:"50%",height:"100%"},e.breakpoints.only("xs"),{width:"100%"}),drawerHeader:Object(u.a)(Object(u.a)({display:"flex",alignItems:"center",padding:e.spacing(0,1)},e.mixins.toolbar),{},{position:"fixed",justifyContent:"space-between",width:"50%",height:50,boxSizing:"border-box",minHeight:"".concat(50,"px !important"),boxShadow:e.shadows[4]}),markComplete:{textTransform:"none",color:"#6F7782","&:hover":{color:"#00bf9c",borderColor:"#00bf9c"}},toolbarIcon:{fill:"#6f7782",height:16,width:16},toolbarIconButton:{padding:10},fullScreenForm:{marginTop:50,height:"100%",boxShadow:"0px 2px 4px -1px rgba(0,0,0,0.2), 0px 4px 5px 0px rgba(0,0,0,0.14), 0px 1px 10px 0px rgba(0,0,0,0.12)"},copyToClipboard:{position:"absolute",opacity:0}}}));function fr(e){var t=e.open,a=e.handleFullScreenClose,n=e.toggleStatus,r=e.isCompleted,o=e.upload,l=e.attachmentList,i=e.addNewSubtask,s=e.getSubTaskIcon,u=e.subTasks,d=e.copyToClipboard,m=e.anchorEl,p=e.handleToggle,f=e.contextTask,b=e.task,v=e.selectFile,g=e.headerClass,h=e.isDialog,E=pr();return c.a.createElement(ma.a,{fullScreen:!0,open:t,onClose:a,classes:{paper:E.paper}},c.a.createElement("div",{className:B()(E.drawerHeader,g)},c.a.createElement("div",null,c.a.createElement(R.a,{variant:"outlined",size:"small",className:E.markComplete,startIcon:c.a.createElement(A.a,null),onClick:n,style:{color:r?"white":"#6F7782",background:r?"#00bf9c":"white"}},Ce(r?"Completed":"Mark Complete"))),c.a.createElement("div",null,c.a.createElement(V.a,{onClick:o,className:E.toolbarIconButton},c.a.createElement("svg",{className:E.toolbarIcon,focusable:"false",viewBox:"0 0 32 32"},c.a.createElement("path",{d:"M19,32c-3.9,0-7-3.1-7-7V10c0-2.2,1.8-4,4-4s4,1.8,4,4v9c0,0.6-0.4,1-1,1s-1-0.4-1-1v-9c0-1.1-0.9-2-2-2s-2,0.9-2,2v15c0,2.8,2.2,5,5,5s5-2.2,5-5V10c0-4.4-3.6-8-8-8s-8,3.6-8,8v5c0,0.6-0.4,1-1,1s-1-0.4-1-1v-5C6,4.5,10.5,0,16,0s10,4.5,10,10v15C26,28.9,22.9,32,19,32z"})),l&&l.length>0&&c.a.createElement("span",{style:{fontSize:10.5,marginBottom:12}},l.length),c.a.createElement("input",{id:"inputFile",type:"file",name:"file",multiple:!0,onChange:v,style:{display:"none"}})),c.a.createElement(V.a,{onClick:function(){return i(b)},className:E.toolbarIconButton},s(),u&&u.length>0&&c.a.createElement("span",{style:{fontSize:10.5,marginBottom:12}},u.length)),c.a.createElement(V.a,{onClick:function(){return d()},className:E.toolbarIconButton},c.a.createElement("svg",{className:E.toolbarIcon,focusable:"false",viewBox:"0 0 32 32"},c.a.createElement("path",{d:"M9,32c-2.3,0-4.6-0.9-6.4-2.6c-3.5-3.5-3.5-9.2,0-12.7l4-4c0.4-0.4,1-0.4,1.4,0c0.4,0.4,0.4,1,0,1.4l-4,4c-2.7,2.7-2.7,7.2,0,9.9s7.2,2.7,9.9,0l4-4c2.7-2.7,2.7-7.2,0-9.9c-0.8-0.8-1.8-1.4-2.9-1.7c-0.5-0.2-0.8-0.7-0.7-1.3c0.2-0.5,0.7-0.8,1.3-0.7c1.4,0.4,2.7,1.2,3.7,2.2c3.5,3.5,3.5,9.2,0,12.7l-4,4C13.6,31.1,11.3,32,9,32z M16.6,21.6c-0.1,0-0.2,0-0.3,0c-1.4-0.4-2.7-1.2-3.7-2.2c-1.7-1.7-2.6-4-2.6-6.4s0.9-4.7,2.6-6.4l4-4c3.5-3.5,9.2-3.5,12.7,0s3.5,9.2,0,12.7l-4,4c-0.4,0.4-1,0.4-1.4,0s-0.4-1,0-1.4l4-4c2.7-2.7,2.7-7.2,0-9.9S20.7,1.3,18,4l-4,4c-1.3,1.4-2,3.1-2,5s0.7,3.6,2.1,5c0.8,0.8,1.8,1.4,2.9,1.7c0.5,0.2,0.8,0.7,0.7,1.3C17.5,21.4,17.1,21.6,16.6,21.6z"}))),c.a.createElement(V.a,{onClick:function(e){return p(e,!0)},className:E.toolbarIconButton},c.a.createElement("svg",{className:E.toolbarIcon,focusable:"false",viewBox:"0 0 32 32"},c.a.createElement("path",{d:"M16,13c1.7,0,3,1.3,3,3s-1.3,3-3,3s-3-1.3-3-3S14.3,13,16,13z M3,13c1.7,0,3,1.3,3,3s-1.3,3-3,3s-3-1.3-3-3S1.3,13,3,13z M29,13c1.7,0,3,1.3,3,3s-1.3,3-3,3s-3-1.3-3-3S27.3,13,29,13z"}))),c.a.createElement(V.a,{onClick:a,className:E.toolbarIconButton},c.a.createElement("svg",{className:E.toolbarIcon,focusable:"false",viewBox:"0 0 32 32"},c.a.createElement("path",{d:"M18.1,16L27,7.1c0.6-0.6,0.6-1.5,0-2.1s-1.5-0.6-2.1,0L16,13.9l-8.9-9C6.5,4.3,5.6,4.3,5,4.9S4.4,6.4,5,7l8.9,8.9L5,24.8c-0.6,0.6-0.6,1.5,0,2.1c0.3,0.3,0.7,0.4,1.1,0.4s0.8-0.1,1.1-0.4l8.9-8.9l8.9,8.9c0.3,0.3,0.7,0.4,1.1,0.4s0.8-0.1,1.1-0.4c0.6-0.6,0.6-1.5,0-2.1L18.1,16z"}))))),c.a.createElement("div",{className:E.main,onClick:a},c.a.createElement("div",{className:E.content,onClick:function(e){return e.stopPropagation()}},c.a.createElement("div",{className:E.fullScreenForm},(f||b)&&c.a.createElement(ur,{task:f||b}),c.a.createElement(mr,{anchorEl:m,isDialog:h})))))}var br=a(814),vr=Object(Y.a)((function(){return{paper:{minWidth:"50%",padding:15}}}));function gr(e){var t=e.open,a=e.handleClose,n=e.updateSubTasks,o=e.subTasks,l=e.task,i=e.attachmentList,s=e.onCardAdd,m=e.setSnackbarProps,p=Object(r.useState)({name:""}),f=Object(S.a)(p,2),b=f[0],v=f[1],g=c.a.useState({description:!1,parentTask:!1,attachments:!1,projectTaskSection:!0,taskEndDate:!1,priority:!1,status:!1,taskDate:!0,progressSelect:!1,projectTaskCategory:!1}),h=Object(S.a)(g,2),E=h[0],k=h[1],j=vr(),y=function(e){k(Object(u.a)(Object(u.a)({},E),{},Object(P.a)({},e.target.name,e.target.checked))),e.target.checked&&v(Object(u.a)(Object(u.a)({},b),{},Object(P.a)({},e.target.name,l[e.target.name])))},O=function(){var e=Object(I.a)(T.a.mark((function e(t,a){var n;return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={fileName:t.fileName,metaFile:{id:t.id},relatedId:a,relatedModel:"com.axelor.apps.project.db.ProjectTask"},e.next=3,lt(n);case 3:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),x=function(){var e=Object(I.a)(T.a.mark((function e(){var t;return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return E.taskDate||v(Object(u.a)(Object(u.a)({},b),{},{taskDate:M()()})),E.projectTaskSection||v(Object(u.a)(Object(u.a)({},b),{},{projectTaskSection:null})),e.next=4,De(Object(u.a)({},b));case 4:(t=e.sent)&&(E.attachments&&i&&i.forEach((function(e){O(e,t.id)})),m({message:"".concat(b.name," ").concat(Ce("TaskEditor.projectCreateSuccess")),severity:"success",open:!0,autoHideDuration:3e3}),s({column:t.projectTaskSection,record:t}),t.parentTask&&n([].concat(Object(d.a)(o),[t]))),a();case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(r.useEffect)((function(){l&&v({name:"(COPY) ".concat(l.name),assignedTo:l.assignedTo,project:l.project,projectTaskSection:l.projectTaskSection,taskDate:l.taskDate})}),[l]),c.a.createElement(ma.a,{open:t,onClose:a,"aria-labelledby":"form-dialog-title",classes:{paper:j.paper}},c.a.createElement(pa.a,{id:"form-dialog-title"},Ce("Duplicate Task")),c.a.createElement(fa.a,null,c.a.createElement(ht.a,null,c.a.createElement(W.a,{style:{width:"100%",marginBottom:15},placeholder:"Task name",variant:"outlined",value:b.name,name:"name",onChange:function(e){v(Object(u.a)(Object(u.a)({},b),{},Object(P.a)({},e.target.name,e.target.value)))}})),c.a.createElement(ht.a,null,c.a.createElement(Et.a,{variant:"caption"},Ce("Include")),c.a.createElement(br.a,null,te.map((function(e,t){return c.a.createElement(en.a,{key:t,control:c.a.createElement(an.a,{color:"primary",checked:E[e.name],onChange:y,name:e.name}),label:e.label})}))))),c.a.createElement(va.a,null,c.a.createElement(R.a,{onClick:x,variant:"outlined",color:"primary",style:{textTransform:"none"}},Ce("Create New Task"))))}var hr=Object(Y.a)((function(){return{paper:{minWidth:"50%",padding:15}}}));function Er(e){var t=e.open,a=e.handleClose,n=e.task,o=e.setSnackbarProps,l=Object(r.useState)({name:"",code:"",projectTypeSelect:1,isProject:!0,statusSelect:1}),i=Object(S.a)(l,2),s=i[0],d=i[1],m=Object(r.useState)({description:!1,assignedTo:!1}),p=Object(S.a)(m,2),f=p[0],b=p[1],v=hr(),g=function(e){b(Object(u.a)(Object(u.a)({},f),{},Object(P.a)({},e.target.name,e.target.checked))),e.target.checked&&d(Object(u.a)(Object(u.a)({},s),{},Object(P.a)({},e.target.name,n[e.target.name])))},h=function(){var e=Object(I.a)(T.a.mark((function e(){var t;return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=Object(u.a)({},s),f.assignedTo&&(t.membersUserSet=[Object(u.a)({},s.assignedTo)]),f.description||(t.description=null),e.next=5,Te(Object(u.a)({},t));case 5:e.sent&&o({message:"".concat(s.name," ").concat(Ce("TaskEditor.projectCreateSuccess")),severity:"success",open:!0,autoHideDuration:3e3}),a();case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(r.useEffect)((function(){n&&d({name:n.name,code:n.name})}),[n]),c.a.createElement(ma.a,{open:t,onClose:a,"aria-labelledby":"form-dialog-title",classes:{paper:v.paper}},c.a.createElement(pa.a,{id:"form-dialog-title"},Ce("Convert Task to Project")),c.a.createElement(fa.a,null,c.a.createElement(ht.a,null,c.a.createElement(W.a,{style:{width:"100%",marginBottom:15},placeholder:Ce("Project name"),variant:"outlined",value:s.name,name:"name",onChange:function(e){var t;d(Object(u.a)(Object(u.a)({},s),{},(t={},Object(P.a)(t,e.target.name,e.target.value),Object(P.a)(t,"code",e.target.value),t)))}})),c.a.createElement(ht.a,null,c.a.createElement(Et.a,{variant:"caption"},Ce("Include")),c.a.createElement(br.a,null,c.a.createElement(en.a,{control:c.a.createElement(an.a,{color:"primary",checked:f.description,onChange:g,name:"description"}),label:Ce("Task Description as Project Description")}),c.a.createElement(en.a,{control:c.a.createElement(an.a,{color:"primary",checked:f.assignedTo,onChange:g,name:"assignedTo"}),label:Ce("Task User as Project Members")})))),c.a.createElement(va.a,null,c.a.createElement(R.a,{onClick:h,variant:"outlined",color:"primary",style:{textTransform:"none"}},Ce("Convert"))))}var kr=a(203),jr=a(25),yr=a(882),Or=a(883),xr=a(884),Cr=Object(Y.a)((function(){return{paper:{minWidth:"50%",width:"100%",height:"100%"},pdfViewer:{width:"100%",height:"100%"},dialogContent:{overflow:"hidden",padding:0},pdfNavigation:{display:"flex",justifyContent:"space-between"},button:{margin:10,color:"#3f51b5",border:"1px solid rgba(63, 81, 181, 0.5)",textTransform:"none"},pdfView:{overflow:"auto",height:"100%",width:"100%",display:"flex",flexDirection:"column",justifyContent:"space-between"}}})),wr=jr.e.create({page:{flexDirection:"column",padding:20,fontSize:14},header:{flexDirection:"row",justifyContent:"space-between",fontSize:14,margin:"5px 0px"},title:{fontSize:30,fontWeight:800},caption:{color:"#8DA3A6",fontSize:14},section:{margin:"5px 0px"},taskName:{fontSize:16},sectionDetails:{margin:"5px 0px",fontSize:12,marginLeft:15},avatar:{width:30,height:30,position:"relative",alignItems:"center",borderRadius:"50%",justifyContent:"center"},img:{color:"transparent",width:"100%",height:"100%",objectFit:"cover",textAlign:"center",textIndent:1e4},commentContainer:{flexDirection:"row",alignItems:"flex-start",marginBottom:10},commentList:{marginLeft:20}});function Sr(e){var t=e.open,a=e.handleClose,n=e.task,o=e.subTasks,l=Cr(),i=Object(r.useState)(null),s=Object(S.a)(i,2),u=s[0],d=s[1],m=Object(r.useState)(1),p=Object(S.a)(m,2),f=p[0],b=p[1],v=Object(r.useState)(1),g=Object(S.a)(v,2),h=g[0],E=g[1],k=Object(r.useState)(!0),j=Object(S.a)(k,2),y=j[0],O=j[1],x=Object(r.useState)(),C=Object(S.a)(x,2),w=C[0],N=C[1],D=Object(Kn.a)("(max-width:600px)"),P=function(e){var t=e.task,a=e.comments;return c.a.createElement(jr.a,null,c.a.createElement(jr.d,{size:"A4",style:wr.page},c.a.createElement(jr.g,{style:wr.header},c.a.createElement(jr.f,null,M()().format("DD/MM/YYYY")),c.a.createElement(jr.f,null,"\u2022 ",t.project.fullName," - ",t.name)),c.a.createElement(jr.g,{style:wr.section},c.a.createElement(jr.f,{style:wr.title},t.name),c.a.createElement(jr.f,{style:wr.caption},Ce("Printed from Axelor open platform"))),c.a.createElement(jr.g,{style:wr.header},c.a.createElement(jr.g,{style:{flexDirection:"row"}},c.a.createElement(jr.f,null,"\u2022"),c.a.createElement(jr.f,{style:[wr.taskName,{marginLeft:10}]},t.assignedTo.fullName," ",t.name)),t.taskEndDate&&c.a.createElement(jr.f,null,Ce("Due Date"),": ",M()(t.taskEndDate).format("DD/MM/YYYY"))),c.a.createElement(jr.g,{style:wr.sectionDetails},t.priority&&c.a.createElement(jr.f,null,Ce("Priotiry"),": ",t.priority.name),t.status&&c.a.createElement(jr.f,null,Ce("Status"),": ",t.status.name),c.a.createElement(jr.f,null,Ce("Section"),": ",t.projectTaskSection&&t.projectTaskSection.name)),t.description&&c.a.createElement(jr.g,{style:wr.section},c.a.createElement(jr.f,null,Ce("Description"),": ",t.description)),c.a.createElement(jr.g,{style:wr.section},o&&o.length>0&&o.map((function(e,t){return c.a.createElement(jr.g,{key:t,style:{flexDirection:"row"}},c.a.createElement(jr.f,{style:[wr.taskName,{marginLeft:10}]},"\u2022"),c.a.createElement(jr.f,{style:[wr.taskName,{marginLeft:15}]},e.name))}))),c.a.createElement(jr.g,{style:wr.section},a&&a.map((function(e,t){var a="notification"===e.type?JSON.parse(e.body):"";return c.a.createElement(jr.g,{key:t,style:wr.commentList},c.a.createElement(jr.g,{style:wr.commentContainer},c.a.createElement(jr.g,{style:wr.avatar},c.a.createElement(jr.b,{style:wr.img,source:"User",src:Yt.a})),c.a.createElement(jr.g,{style:{flexDirection:"column"}},c.a.createElement(jr.g,{style:{flexDirection:"column",paddingLeft:20}},c.a.createElement(jr.g,{style:{flexDirection:"row"}},c.a.createElement(jr.f,null,e.$author&&e.$author.fullName),c.a.createElement(jr.f,{style:{color:"#D3D3D3",paddingLeft:"5px"}}," ","- ",M()(e.$eventTime).format("DD/MM h:mm")," ")),a?c.a.createElement(jr.g,{style:{flexDirection:"column"}},c.a.createElement(jr.f,{style:{fontWeight:600,textAlign:"left"}},a.title),c.a.createElement(jr.g,{style:{paddingLeft:20,display:a.tracks.length>0?"flex":"none",flexDirection:"column",textAlign:"left"}},a.tracks.map((function(e,t){return c.a.createElement(jr.f,{key:t},e.displayValue?c.a.createElement(jr.g,null,c.a.createElement(jr.f,{style:{fontWeight:600}},"\u2022 ",e.title," : "),c.a.createElement(jr.f,null,e.oldDisplayValue&&e.oldDisplayValue+" \xbb "," ",e.displayValue)):c.a.createElement(jr.g,null,c.a.createElement(jr.f,{style:{fontWeight:600}},"\u2022 ",e.title," : "),c.a.createElement(jr.f,null,e.oldValue&&e.oldValue+" \xbb "," ",e.value)))})))):c.a.createElement(jr.f,{style:{textOverflow:"ellipsis",wordBreak:"break-word"}},e.body)))))})))))};return Object(r.useEffect)((function(){n&&function(){var e=Object(I.a)(T.a.mark((function e(){var t;return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,_e({id:n.id,relatedModel:"com.axelor.apps.project.db.ProjectTask",limit:25});case 2:(t=e.sent)&&d(t.comments);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()()}),[n]),Object(r.useEffect)((function(){(function(){var e=Object(I.a)(T.a.mark((function e(){var t;return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return O(!0),e.next=3,Object(jr.h)(c.a.createElement(P,{task:n,comments:u})).toBlob();case 3:t=e.sent,O(!1),N(window.URL.createObjectURL(t));case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[n,u]),c.a.createElement(ma.a,{open:t,onClose:a,"aria-labelledby":"form-dialog-title",classes:{paper:l.paper}},c.a.createElement(pa.a,{id:"form-dialog-title"},Ce("Download")),c.a.createElement(fa.a,{className:l.dialogContent},t&&!y&&w&&(D?c.a.createElement("div",{className:l.pdfView},c.a.createElement(kr.a,{file:w,onLoadSuccess:function(e){return b(e.numPages)},loading:c.a.createElement(_n.a,null)},c.a.createElement(kr.b,{renderMode:"svg",pageNumber:h,width:window.innerWidth-64,height:window.innerHeight-64})),c.a.createElement("div",{className:l.pdfNavigation},c.a.createElement(V.a,{disabled:h<=1,onClick:function(){return E((function(e){return e-1}))}},c.a.createElement(yr.a,null)),c.a.createElement("p",null,Ce("Page")," ",h," of ",f),c.a.createElement(V.a,{disabled:h>=f,onClick:function(){return E((function(e){return e+1}))}},c.a.createElement(Or.a,null)))):c.a.createElement(jr.c,{className:l.pdfViewer},c.a.createElement(P,{task:n,comments:u})))),c.a.createElement(va.a,null,D&&c.a.createElement(R.a,{variant:"outlined",className:l.button,startIcon:c.a.createElement(xr.a,null),onClick:function(){var e=document.createElement("a");e.href=w,e.download="".concat(n&&n.name||"Task",".pdf"),e.dispatchEvent(new MouseEvent("click"))}},Ce("Download")),c.a.createElement(R.a,{variant:"outlined",color:"primary",style:{textTransform:"none"},onClick:a},Ce("Ok"))))}kr.c.GlobalWorkerOptions.workerSrc="//cdnjs.cloudflare.com/ajax/libs/pdf.js/".concat(kr.c.version,"/pdf.worker.js");var Nr=a(486),Tr=a(490),Ir=a(806),Dr=a(865),Pr=a(807),Fr=a(480),Mr=a.n(Fr),zr=a(483),Br=a.n(zr),Lr=a(481),Ar=a.n(Lr),Hr=a(482),Rr=a.n(Hr),Vr=a(101),Wr=a.n(Vr),Yr=a(477),qr=a.n(Yr),_r=a(257),Ur=a.n(_r),Xr=Object(Y.a)((function(e){return{title:{display:"flex",alignItems:"center"},input:Object(P.a)({padding:"4px 0px","&:hover":{border:"1px solid #b4b6b8"},border:"1px solid transparent",width:"100%",minWidth:215},e.breakpoints.only("xs"),{width:"fit-content",minWidth:"fit-content"}),dragHandle:{color:"#b4b6b8",fontSize:"1.2rem",cursor:"grab"},arrowIcon:{color:"black"},section:{minWidth:430,position:"sticky",left:0,width:"fit-content",background:"white",zIndex:200},iconContainer:{display:"flex"},icons:{padding:0,color:"#b4b6b8"}}}));function Gr(e){var t=e.column,a=e.ColumnHeader,n=(e.ColumnCollapsed,e.disabled),o=e.disableColumnCollapse,l=e.disableColumnDelete,i=e.customHeader,s=e.isScroll,d=e.sectionIndex,m=Object(D.a)(e,["column","ColumnHeader","ColumnCollapsed","disabled","disableColumnCollapse","disableColumnDelete","customHeader","isScroll","sectionIndex"]),p=c.a.useContext(hc),f=p.onColumnDelete,b=p.onColumnUpdate,v=p.onColumnToggle,g=(p.selectedProject,p.open),h=p.addNewTask,E=t.name,k=t.collapsed,j=void 0!==k&&k,y=Object(r.useState)(!1),O=Object(S.a)(y,2),x=O[0],C=O[1],w=Object(r.useState)({name:E}),N=Object(S.a)(w,2),F=N[0],M=N[1],z=c.a.useState(!1),L=Object(S.a)(z,2),A=L[0],H=L[1],R=t.records&&t.records.length,Y=g?1:4,q=Object(Kn.a)("(max-width:600px)"),_=c.a.useCallback((function(e){H(!0)}),[]),U=c.a.useCallback((function(e){e&&e.stopPropagation(),H(!1)}),[]),X=c.a.useCallback((function(){U(),f({column:t})}),[f,t,U]),G=Xr(),K=c.a.useCallback((function(e){var t=e.target,a=t.name,n=t.value;M((function(e){return Object(u.a)(Object(u.a)({},e),{},Object(P.a)({},a,n))}))}),[]),J=c.a.useCallback(Object(I.a)(T.a.mark((function e(){var a;return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.name===F.name&&""!==E){e.next=6;break}return""===F.name&&M({name:Ce("Untitled Section")}),e.next=4,Ve(Object(u.a)(Object(u.a)({},t),{},{name:F.name}));case 4:a=e.sent,b({column:Object(u.a)(Object(u.a)({},t),a)});case 6:case"end":return e.stop()}}),e)}))),[F,b,t,E]);return i?c.a.createElement(a,Object.assign({},m,{style:{width:"100%"}})):c.a.createElement(Pa.a,Object.assign({style:{display:"flex",padding:8,alignItems:"center",transition:"transform 0.3s, margin 0.2s",justifyContent:"space-between",boxShadow:"none",width:s?"fit-content":"100%",borderTop:j?"":"1px solid #E8ECEE",borderBottom:j?"":"1px solid #E8ECEE",borderRadius:"0",position:"relative"}},m,{onMouseEnter:function(){C(!0)},onMouseLeave:function(){C(!1)}}),c.a.createElement("div",{className:B()(G.title,G.section)},c.a.createElement(er.a,{className:G.dragHandle,style:{visibility:x||q?"visible":"hidden"}}),!o&&c.a.createElement(V.a,{onClick:function(){return v({column:t})},style:{padding:"0px 12px"}},j?c.a.createElement(Ur.a,{className:G.arrowIcon}):c.a.createElement(Qn.a,{className:G.arrowIcon})),c.a.createElement(W.a,{onChange:K,onBlur:J,name:"name",value:F.name,InputProps:{disableUnderline:!0},className:G.input,placeholder:Ce("Add Section")},E),c.a.createElement("div",{style:{visibility:x||q?"visible":"hidden"},className:G.iconContainer},c.a.createElement(V.a,{onClick:function(e){return h(e,d)},className:G.icons},c.a.createElement(xt.a,null)),!n&&!l&&c.a.createElement(V.a,{onClick:_,className:G.icons},c.a.createElement(qr.a,null)))),c.a.createElement("div",{style:{minWidth:216*Y}}),c.a.createElement(ha,{open:A,onClose:U,title:Ce("Delete Section"),content:Ce(R?"Cannot delete section with tasks":"TaskEditor.deleteRecordConfirm"),onConfirm:X,disabled:Boolean(R)}))}Gr.defaultProps={column:{},customHeader:!1,ColumnHeader:function(e){var t=e.title;return c.a.createElement(Et.a,{variant:"subtitle1",style:{fontSize:"1.08rem"}},c.a.createElement("b",null,t))},ColumnCollapsed:function(e){var t=e.title;return c.a.createElement(Et.a,{variant:"subtitle1",style:{fontSize:"1.08rem"}},c.a.createElement("b",null,t))},disabled:!1,disableColumnCollapse:!1,disableColumnDelete:!1};var Kr=a(266),Jr=a(479),$r=a.n(Jr),Qr=a(478),Zr=a.n(Qr),ec=a(885),tc=Object(Y.a)((function(e){return{input:Object(P.a)({padding:"4px 0px","&:hover":{border:"1px solid #b4b6b8"},border:"1px solid transparent",width:"100%",minWidth:215,marginRight:2},e.breakpoints.only("xs"),{minWidth:"calc(100% - 36px)"}),cardTask:Object(P.a)({marginLeft:e.spacing(5),display:"flex",width:"100%",alignItems:"center"},e.breakpoints.only("xs"),{marginLeft:e.spacing(1)}),checkedIcon:{color:"#b4b6b8","&:hover":{color:"#25e8c8 !important"}},checkIconButton:{padding:e.spacing(1)}}}));function ac(e){var t=e.record,a=e.onEdit,n=tc(),o=Object(r.useState)({name:t.name,status:t.status}),l=Object(S.a)(o,2),i=l[0],s=l[1],d=Object(r.useState)(!1),m=Object(S.a)(d,2),p=m[0],f=m[1],b=c.a.useContext(hc).selectedProject,v=c.a.useCallback((function(e){e.stopPropagation();var t=e.target,a=t.name,n=t.value;s((function(e){return Object(u.a)(Object(u.a)({},e),{},Object(P.a)({},a,n))}))}),[]),g=c.a.useCallback(function(){var e=Object(I.a)(T.a.mark((function e(n){var r,c;return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n&&n.stopPropagation(),r=p?t.statusBeforeComplete:"closed",s((function(e){return Object(u.a)(Object(u.a)({},e),{},{status:r})})),e.next=5,Fe(Object(u.a)(Object(u.a)({},t),{},{status:r,statusBeforeComplete:t.status}));case 5:(c=e.sent)&&a(Object(u.a)(Object(u.a)({},c),{},{"priority.technicalTypeSelect":t["priority.technicalTypeSelect"]}));case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[a,t,p]),h=c.a.useCallback(function(){var e=Object(I.a)(T.a.mark((function e(n){var r;return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.stopPropagation(),t.name===i.name){e.next=6;break}return e.next=4,Fe(Object(u.a)(Object(u.a)({},t),{},{name:i.name}));case 4:r=e.sent,a(Object(u.a)(Object(u.a)({},r),{},{"priority.technicalTypeSelect":i["priority.technicalTypeSelect"]}));case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[i,a,t]);return Object(r.useEffect)((function(){s(t);var e=xe(t);f(e)}),[t,b]),c.a.createElement("div",{className:n.cardTask},c.a.createElement(V.a,{size:"small",onClick:g,className:n.checkIconButton},p?c.a.createElement(rr.a,{fontSize:"small",style:{color:"#25e8c8"},className:n.checkedIcon}):c.a.createElement(ar.a,{fontSize:"small",style:{color:"#b4b6b8"},className:n.checkedIcon})),c.a.createElement(W.a,{onClick:function(e){return e.stopPropagation()},onChange:v,onBlur:h,name:"name",value:i.name,InputProps:{disableUnderline:!0},className:n.input},t.name))}a(798);var nc=Object(Y.a)((function(e){return{title:{display:"flex",alignItems:"center",flex:1},dragHandle:{color:"#b4b6b8",fontSize:"1.2rem",cursor:"grab"},card:{cursor:"pointer","&:hover":{backgroundColor:"#f5f8fa"}},cardItem:{display:"flex",alignItems:"center",justifyContent:"space-between",borderBottom:"1px solid #E8ECEE",borderRadius:0,boxShadow:"none",position:"relative"},spacer:{paddingLeft:8,paddingRight:8},stickyElement:Object(P.a)({"&:hover":{backgroundColor:"#f5f8fa"},minWidth:430,width:"100%",display:"flex",alignItems:"center",position:"sticky",zIndex:300,left:0,padding:"0px 8px",background:"white",justifyContent:"space-between"},e.breakpoints.only("xs"),{minWidth:"100%"}),contextMenuItem:{fontSize:14},contextIcon:{color:"#a7a9ac",marginRight:10},contextSVGIcon:{fill:"#6f7782",height:16,width:16,marginRight:10},selection:{minWidth:200},select:Object(P.a)({marginBottom:0,minWidth:200,textAlign:"left"},e.breakpoints.only("xs"),{minWidth:150}),selectPadding:{padding:10},formControl:Object(P.a)({minWidth:200},e.breakpoints.only("xs"),{minWidth:150}),chip:{height:20,color:"white",maxWidth:55,marginRight:3}}})),rc=c.a.forwardRef((function(e,t){var a=e.onDelete,n=e.record,o=e.style,l=(e.canDelete,e.canEdit,e.onEdit),i=(e.disabled,e.dragHandleProps),s=void 0===i?{}:i,d=Object(D.a)(e,["onDelete","record","style","canDelete","canEdit","onEdit","disabled","dragHandleProps"]),m=Object(r.useState)(!1),p=Object(S.a)(m,2),f=p[0],b=p[1],v=Object(r.useState)(!1),g=Object(S.a)(v,2),h=g[0],E=g[1],k=Object(r.useState)(!1),j=Object(S.a)(k,2),y=j[0],O=j[1],x=c.a.useContext(hc),C=x.getAvatarColor,w=x.selectedProject,N=x.handleDrawerOpen,F=x.project,z=void 0===F?{}:F,L=x.tasks,A=x.open,H=void 0!==A&&A,R=x.task,W=x.copyToClipboard,Y=x.addContextTask,q=L&&L.filter((function(e){return e.parentTask&&e.parentTask.id===n.id})).length,_=nc(),U=Object(Kn.a)("(max-width:600px)"),X=[{name:"markComplete",label:y?"Mark Incomplete":"Mark Complete",icon:ar.a},{name:"viewDetails",label:"View details",icon:Zr.a},{name:"fullScreen",label:"Full screen",iconType:"svg",icon:c.a.createElement("svg",{className:_.contextSVGIcon,focusable:"false",viewBox:"0 0 32 32"},c.a.createElement("path",{d:"M13.7,19.7L5.4,28H13c0.6,0,1,0.4,1,1s-0.4,1-1,1H3c-0.6,0-1-0.4-1-1V19c0-0.6,0.4-1,1-1s1,0.4,1,1v7.6l8.3-8.3c0.4-0.4,1-0.4,1.4,0S14.1,19.3,13.7,19.7z M29,2H19c-0.6,0-1,0.4-1,1s0.4,1,1,1h7.6l-8.3,8.3c-0.4,0.4-0.4,1,0,1.4c0.2,0.2,0.5,0.3,0.7,0.3s0.5-0.1,0.7-0.3L28,5.4V13c0,0.6,0.4,1,1,1s1-0.4,1-1V3C30,2.4,29.6,2,29,2z"}))},{name:"copyTaskLink",label:"Copy task link",iconType:"svg",icon:c.a.createElement("svg",{className:_.contextSVGIcon,focusable:"false",viewBox:"0 0 32 32"},c.a.createElement("path",{d:"M9,32c-2.3,0-4.6-0.9-6.4-2.6c-3.5-3.5-3.5-9.2,0-12.7l4-4c0.4-0.4,1-0.4,1.4,0c0.4,0.4,0.4,1,0,1.4l-4,4c-2.7,2.7-2.7,7.2,0,9.9s7.2,2.7,9.9,0l4-4c2.7-2.7,2.7-7.2,0-9.9c-0.8-0.8-1.8-1.4-2.9-1.7c-0.5-0.2-0.8-0.7-0.7-1.3c0.2-0.5,0.7-0.8,1.3-0.7c1.4,0.4,2.7,1.2,3.7,2.2c3.5,3.5,3.5,9.2,0,12.7l-4,4C13.6,31.1,11.3,32,9,32z M16.6,21.6c-0.1,0-0.2,0-0.3,0c-1.4-0.4-2.7-1.2-3.7-2.2c-1.7-1.7-2.6-4-2.6-6.4s0.9-4.7,2.6-6.4l4-4c3.5-3.5,9.2-3.5,12.7,0s3.5,9.2,0,12.7l-4,4c-0.4,0.4-1,0.4-1.4,0s-0.4-1,0-1.4l4-4c2.7-2.7,2.7-7.2,0-9.9S20.7,1.3,18,4l-4,4c-1.3,1.4-2,3.1-2,5s0.7,3.6,2.1,5c0.8,0.8,1.8,1.4,2.9,1.7c0.5,0.2,0.8,0.7,0.7,1.3C17.5,21.4,17.1,21.6,16.6,21.6z"}))},{name:"duplicateTask",label:"Duplicate task",iconType:"svg",icon:c.a.createElement("svg",{className:_.contextSVGIcon,focusable:"false",viewBox:"0 0 32 32"},c.a.createElement("path",{d:"M27,32H13c-2.8,0-5-2.2-5-5V13c0-2.8,2.2-5,5-5h14c2.8,0,5,2.2,5,5v14C32,29.8,29.8,32,27,32z M13,10c-1.7,0-3,1.3-3,3v14  c0,1.7,1.3,3,3,3h14c1.7,0,3-1.3,3-3V13c0-1.7-1.3-3-3-3H13z M6,23c0-0.6-0.4-1-1-1c-1.7,0-3-1.3-3-3V5c0-1.7,1.3-3,3-3h14  c1.7,0,3,1.3,3,3c0,0.6,0.4,1,1,1s1-0.4,1-1c0-2.8-2.2-5-5-5H5C2.2,0,0,2.2,0,5v14c0,2.8,2.2,5,5,5C5.6,24,6,23.6,6,23z"}))},{name:"copyTaskName",label:"Copy task name",iconType:"svg",icon:c.a.createElement("svg",{className:_.contextSVGIcon,focusable:"false",viewBox:"0 0 32 32"},c.a.createElement("path",{d:"M9,32c-2.3,0-4.6-0.9-6.4-2.6c-3.5-3.5-3.5-9.2,0-12.7l4-4c0.4-0.4,1-0.4,1.4,0c0.4,0.4,0.4,1,0,1.4l-4,4c-2.7,2.7-2.7,7.2,0,9.9s7.2,2.7,9.9,0l4-4c2.7-2.7,2.7-7.2,0-9.9c-0.8-0.8-1.8-1.4-2.9-1.7c-0.5-0.2-0.8-0.7-0.7-1.3c0.2-0.5,0.7-0.8,1.3-0.7c1.4,0.4,2.7,1.2,3.7,2.2c3.5,3.5,3.5,9.2,0,12.7l-4,4C13.6,31.1,11.3,32,9,32z M16.6,21.6c-0.1,0-0.2,0-0.3,0c-1.4-0.4-2.7-1.2-3.7-2.2c-1.7-1.7-2.6-4-2.6-6.4s0.9-4.7,2.6-6.4l4-4c3.5-3.5,9.2-3.5,12.7,0s3.5,9.2,0,12.7l-4,4c-0.4,0.4-1,0.4-1.4,0s-0.4-1,0-1.4l4-4c2.7-2.7,2.7-7.2,0-9.9S20.7,1.3,18,4l-4,4c-1.3,1.4-2,3.1-2,5s0.7,3.6,2.1,5c0.8,0.8,1.8,1.4,2.9,1.7c0.5,0.2,0.8,0.7,0.7,1.3C17.5,21.4,17.1,21.6,16.6,21.6z"}))},{name:"deleteTask",label:"Delete Task",icon:wt.a}],G=c.a.useCallback((function(e){E(!0)}),[]),K=c.a.useCallback((function(e){e&&e.stopPropagation(),E(!1)}),[]),J=c.a.useCallback((function(e){e.stopPropagation(),K(),a()}),[a,K]),$=c.a.useCallback(function(){var e=Object(I.a)(T.a.mark((function e(t,a,r){var c,o;return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=Object(u.a)(Object(u.a)({},n),{},Object(P.a)({},t,a)),e.next=3,Fe(c);case 3:o=e.sent,l(Object(u.a)({},o));case 5:case"end":return e.stop()}}),e)})));return function(t,a,n){return e.apply(this,arguments)}}(),[l,n]),Q=M()().format("YYYY-MM-DD"),Z=R&&R.taskDate&&M()(R.taskDate).format("YYYY-MM-DD"),ee=R&&R.taskEndDate&&M()(R.taskEndDate).format("YYYY-MM-DD"),te=Z===Q||ee===Q?"green":Z>Q||ee>Q?"#707883":"red",ae=c.a.useCallback(function(){var e=Object(I.a)(T.a.mark((function e(t){var a,r;return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t&&t.stopPropagation(),a=y?n.statusBeforeComplete:"closed",e.next=4,Fe(Object(u.a)(Object(u.a)({},n),{},{status:a,statusBeforeComplete:n.status}));case 4:(r=e.sent)&&l(Object(u.a)({},r));case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[l,n,y]);return Object(r.useEffect)((function(){var e=xe(n);O(e)}),[n,w]),c.a.createElement("div",{style:{border:(n&&n.id)===(R&&R.id)?"1px solid #058EE3":"inherit"}},c.a.createElement(Kr.b,{id:"".concat(n.id),name:n.name,holdToDisplay:1e3},c.a.createElement(Pa.a,Object.assign({ref:t},d,{className:B()(_.cardItem,_.card),style:Object(u.a)(Object(u.a)({},o),{},{background:(n&&n.id)===(R&&R.id)?"#EDF8FF":f||U?"#f5f8fa":"white"}),onMouseEnter:function(){b(!0)},onMouseLeave:function(){b(!1)}}),c.a.createElement("div",{className:_.stickyElement,style:{width:H?"50%":"100%",background:(n&&n.id)===(R&&R.id)?"#EDF8FF":f||U?"#f5f8fa":"white"},onClick:function(){return N(n)}},c.a.createElement("div",{className:_.title},c.a.createElement("div",s,c.a.createElement(er.a,{className:_.dragHandle,style:{visibility:f||U?"visible":"hidden"}})),c.a.createElement("div",{style:{display:"flex",alignItems:"center"}},c.a.createElement(ac,{record:n,onEdit:l}),q>0&&c.a.createElement(V.a,{style:{padding:5}},c.a.createElement("span",{style:{fontSize:10.5,color:"#707883"}},q),c.a.createElement("svg",{focusable:"false",viewBox:"0 0 32 32",style:{fill:"#6f7782",height:16,width:16}},c.a.createElement("path",{d:"M25,20c-2.4,0-4.4,1.7-4.9,4H11c-3.9,0-7-3.1-7-7v-5h16.1c0.5,2.3,2.5,4,4.9,4c2.8,0,5-2.2,5-5s-2.2-5-5-5c-2.4,0-4.4,1.7-4.9,4H4V3c0-0.6-0.4-1-1-1S2,2.4,2,3v14c0,5,4,9,9,9h9.1c0.5,2.3,2.5,4,4.9,4c2.8,0,5-2.2,5-5S27.8,20,25,20z M25,8c1.7,0,3,1.3,3,3s-1.3,3-3,3s-3-1.3-3-3S23.3,8,25,8z M25,28c-1.7,0-3-1.3-3-3s1.3-3,3-3s3,1.3,3,3S26.7,28,25,28z"}))))),U&&n&&n["priority.technicalTypeSelect"]&&c.a.createElement(V.a,{size:"small"},c.a.createElement(ec.a,{style:{color:ne[n["priority.technicalTypeSelect"]]}})),U&&n&&n.status&&n.status.name&&c.a.createElement(Oa.a,{label:n.status.name,className:_.chip,style:{background:C(n.status.name)||"lightgray"}}),U&&n&&c.a.createElement(Gn,{progressNumber:n.progressSelect}),c.a.createElement("div",{style:{display:"flex",alignItems:"center"}},c.a.createElement("div",{style:{visibility:f||U?"visible":"hidden",display:"flex",alignItems:"center"}},!U&&c.a.createElement(Et.a,{variant:"caption",style:{color:"#707883"}},Ce("Details")),c.a.createElement($r.a,{className:_.dragHandle})),H&&R&&n&&n.id===R.id&&c.a.createElement("div",{style:{display:"flex"}},c.a.createElement(Et.a,{variant:"caption",style:{display:"flex",alignItems:"center",justifyContent:"center",padding:"0px 5px",whiteSpace:"nowrap",color:te,textTransform:"capitalize"}},R.taskDate&&M()(R.taskDate).format("DD MMM"),R.taskEndDate&&" - ".concat(M()(R.taskEndDate).format("DD MMM"))),R.assignedTo&&c.a.createElement(Et.a,{variant:"caption"},c.a.createElement(Rt.a,{"aria-label":"recipe",style:{backgroundColor:C(n.assignedTo&&n.assignedTo.id),fontSize:"0.75rem",height:25,width:25}},R.assignedTo&&R.assignedTo.fullName&&(R.assignedTo.fullName.substring(0,2)||"").toUpperCase()))))),c.a.createElement("div",{style:{display:"flex",width:"fit-content",alignItems:"center"}},!H&&!U&&c.a.createElement(c.a.Fragment,null,c.a.createElement("div",{className:_.spacer},c.a.createElement(Sa,{value:n.priority,name:"priority",options:ne,onChange:function(e,t){return $("priority",e,t)}})),c.a.createElement("div",{className:_.spacer},c.a.createElement(Sa,{value:n.status,name:"status",options:re,onChange:function(e,t){return $("status",e,t)}})),c.a.createElement("div",{className:_.spacer},c.a.createElement(kt.a,{variant:"outlined",className:_.formControl},c.a.createElement(jt.a,{native:!0,className:_.select,value:n.progressSelect,onChange:function(e){return $("progressSelect",e.target.value,e)},classes:{select:_.selectPadding},inputProps:{name:"progressSelect",id:"outlined-progressSelect"},size:"small"},c.a.createElement("option",{"aria-label":Ce("TaskEditor.none"),value:""}),[0,10,20,30,40,50,60,70,80,90,100].map((function(e){return c.a.createElement("option",{key:e,value:e},e," %")}))))),c.a.createElement("div",{className:_.spacer},c.a.createElement(da,{name:"projectTaskCategory",optionLabel:"name",options:z.projectTaskCategorySet,value:n.projectTaskCategory,onChange:function(e,t){return $("projectTaskCategory",e,t)}})))),c.a.createElement(ha,{open:h,onClose:K,onConfirm:J,title:Ce("Delete Task")}))),!U&&c.a.createElement(Kr.a,{id:"".concat(n.id)},X.map((function(e,t){return c.a.createElement(c.a.Fragment,{key:e.name},c.a.createElement(Kr.c,{onClick:function(t){return function(e,t,a){switch(e.preventDefault(),e.stopPropagation(),a){case"markComplete":return void ae();case"viewDetails":return void N(t);case"fullScreen":return void Y(t,"fullScreen");case"copyTaskLink":return void W();case"duplicateTask":return void Y(t,"duplicateTask");case"copyTaskName":if(!t)return;return void W(t.name,"Task name is copied to clipboard");case"deleteTask":return void G();default:return}}(t,n,e.name)}},"svg"===e.iconType?e.icon:c.a.createElement(e.icon,{fontSize:"small",className:_.contextIcon,style:{color:"deleteTask"===e.name?"red":"#a7a9ac"}}),c.a.createElement(Et.a,{className:_.contextMenuItem,style:{color:"deleteTask"===e.name?"red":"inherit"}},Ce(e.label))),t>3&&c.a.createElement(Vt.a,null))}))))}));rc.defaultProps={onDelete:function(){},record:{},style:{},canDelete:!0,canEdit:!0,onEdit:function(){},disabled:!1};var cc=rc,oc=c.a.memo((function(e){var t=e.disabled,a=e.column,n=e.isScroll,r=c.a.useContext(hc),o=r.onCardEdit,l=r.onCardDelete,i=a.canMove,s=void 0===i||i,d=a.canDelete,m=void 0===d||d,p=a.canEdit,f=void 0===p||p;return a.records?a.records.map((function(e,r){return c.a.createElement(yt.b,{key:"".concat(e.id),draggableId:"task_".concat(e.id),index:r,isDragDisabled:!s||t},(function(r){return c.a.createElement(cc,Object.assign({key:e.id,ref:r.innerRef},r.draggableProps,{dragHandleProps:r.dragHandleProps,canDelete:m,canEdit:f,record:e,disabled:t,style:Object(u.a)(Object(u.a)({},r.draggableProps.style),{},{width:n?"fit-content":"100%"}),onDelete:function(){return l({record:e,column:a})},onEdit:function(e){return o({record:e,column:a})}}))}))})):c.a.createElement(c.a.Fragment,null)}));oc.defaultProps={onCardDelete:function(){},disabled:!1,onCardEdit:function(){},column:{}};var lc=oc;function ic(e){var t=e.disabled,a=e.scrollableColumn,n=e.gutterBottom,r=e.column,o=e.isScroll,l=r.canDrop,i=void 0===l||l;return c.a.createElement(yt.c,{droppableId:"".concat(r.id),isDropDisabled:!i||t},(function(e){return c.a.createElement("div",Object.assign({style:{display:"flex",flexDirection:"column",backgroundColor:-1===r.id?"white":"inherit"}},e.droppableProps),c.a.createElement("div",{style:Object(u.a)({marginBottom:n?60:4,marginTop:4},a?{overflowX:"hidden",overflowY:"auto",padding:8,maxHeight:"".concat(200,"px")}:{}),ref:e.innerRef},c.a.createElement(lc,{disabled:t,column:r,isScroll:o}),e.placeholder))}))}ic.defaultProps={onCardDelete:function(){},disabled:!1,scrollableColumn:!1,gutterBottom:!1,column:{},CardListStyle:{}};var sc=Object(Y.a)((function(e){return{column:Object(P.a)({backgroundColor:"#fafafa",margin:8,position:"relative",boxShadow:"none"},e.breakpoints.only("xs"),{marginLeft:0,marginRight:0})}}));function uc(e){var t=e.index,a=e.column,n=e.isScroll,r=e.customHeader,o=void 0!==r&&r,l=a.collapsed,i=void 0!==l&&l,s=a.id,u=sc();return c.a.createElement(yt.b,{draggableId:"column_".concat(s),index:t},(function(e){return c.a.createElement("div",Object.assign({},e.draggableProps,e.dragHandleProps,{ref:e.innerRef}),c.a.createElement(Pa.a,{className:u.column},c.a.createElement(Gr,Object.assign({column:a},e.dragHandleProps,{customHeader:o,isScroll:n,sectionIndex:t})),!i&&c.a.createElement(Tr.a,{in:!0,timeout:500},c.a.createElement("div",null,c.a.createElement(ic,{column:a,isScroll:n})))))}))}uc.defaultProps={index:null,column:{},isScroll:!1};var dc=Object(Y.a)((function(e){return{toolbar:Object(P.a)({padding:"8px 12px",textAlign:"left",display:"flex",height:50,boxSizing:"border-box",justifyContent:"space-between"},e.breakpoints.down("xs"),{height:100,minHeight:"".concat(100,"px !important"),flexDirection:"column"}),container:Object(P.a)({display:"flex"},e.breakpoints.down("xs"),{justifyContent:"space-between"}),contentWrapper:Object(P.a)({height:"calc(100% - ".concat(50,"px)"),width:"100%",display:"flex",backgroundColor:"white",overflow:"auto",flexDirection:"column"},e.breakpoints.down("xs"),{height:"calc(100% - ".concat(100,"px)"),overflowX:"hidden"}),menuItem:{"&:hover":{backgroundColor:"#e8ecee"}},addTaskButton:{textTransform:"none",borderRadius:0,borderTopLeftRadius:5,borderBottomLeftRadius:5,whiteSpace:"nowrap"},menuButton:{padding:5,borderRadius:0,border:"0.5px solid #9EA7DA",marginLeft:2,marginRight:10,borderTopRightRadius:5,borderBottomRightRadius:5,"&:hover":{border:"0.5px solid #3F51B5"}},addSectionButton:{width:"fit-content",textTransform:"none",color:"#b4b6b8","&:hover":{color:"#3F51B5 !important"}},toolbarHeader:{minWidth:216,borderLeft:"1px solid #E8ECEE",borderTop:"1px solid #E8ECEE",borderBottom:"1px solid #E8ECEE",padding:16,background:"white",textAlign:"left",cursor:"pointer",display:"flex",alignItems:"center"},toolbarSortIcon:{height:16,width:16,marginLeft:10,color:"#232933"},toolbarSortIconOnHover:{"& > .toolbarSortIcon":{height:16,width:16,marginLeft:10,color:"transparent"},"&:hover > .toolbarSortIcon":{color:"#232933"}},taskNameHeader:{minWidth:430,width:"100%",position:"sticky",left:0,background:"white",zIndex:500},parentHeader:Object(P.a)({display:"flex",padding:"0px 8px",position:"sticky",top:0,zIndex:500,width:"100%",background:"white"},e.breakpoints.only("xs"),{padding:0}),btnParent:{minWidth:430,maxWidth:430,position:"sticky",left:0,padding:"0px 16px",textAlign:"left"},contextMenuItem:{fontSize:14},contextSVGIcon:{fill:"#6f7782",height:16,width:16,marginRight:10},toolbarButton:{textTransform:"none",border:"none",color:"#32325d",marginRight:10,"&:hover":{background:"#e8ecee",borderColor:"#e8ecee",color:"#273240"}},iconSelected:{fontSize:20},clearIcon:{height:16,width:16,marginLeft:10},menuTypography:{fontSize:14,marginLeft:10},sortingOptions:{display:"flex",alignItems:"center"},menuPaper:{border:"1px solid #d3d4d5"}}})),mc={vertical:"bottom",horizontal:"center"},pc={vertical:"top",horizontal:"center"};function fc(){var e=c.a.useContext(hc),t=Object(Kn.a)("(max-width:600px)"),a=e.columns,n=e.onCardMove,o=e.onColumnAdd,l=e.onColumnMove,i=e.sections,s=void 0===i?[]:i,m=e.searchFilter,p=e.filters,f=e.handleChangeFilter,b=e.handleSaveFilter,v=e.handleDeleteFilter,g=e.handleContentSearch,h=e.fields,E=void 0===h?[]:h,k=e.addNewTask,j=e.handleSetMenuFilter,y=e.menuFilter,O=e.filter,x=e.handleSetFilter,C=e.sortColumnName,w=e.handleSetSortColumnName,N=e.selectedProject,D=e.open,P=void 0!==D&&D,F=Object(r.useState)(null),M=Object(S.a)(F,2),z=M[0],L=M[1],H=Boolean(z),W=Object(r.useState)(null),Y=Object(S.a)(W,2),q=Y[0],_=Y[1],U=Boolean(q),X=Object(r.useState)(null),G=Object(S.a)(X,2),K=G[0],J=G[1],$=Boolean(K),Q=Object(r.useState)(!1),Z=Object(S.a)(Q,2),ee=Z[0],te=Z[1],ae=Object(r.useState)([]),ne=Object(S.a)(ae,2),re=ne[0],le=ne[1],ie=dc(),se=[{code:"justMyTasks",value:"Just my tasks",icon:c.a.createElement("svg",{className:ie.contextSVGIcon,focusable:"false",viewBox:"0 0 32 32"},c.a.createElement("path",{d:"M16,18c-4.4,0-8-3.6-8-8s3.6-8,8-8s8,3.6,8,8S20.4,18,16,18z M16,4c-3.3,0-6,2.7-6,6s2.7,6,6,6s6-2.7,6-6S19.3,4,16,4z M29,32c-0.6,0-1-0.4-1-1v-4.2c0-2.6-2.2-4.8-4.8-4.8H8.8C6.2,22,4,24.2,4,26.8V31c0,0.6-0.4,1-1,1s-1-0.4-1-1v-4.2C2,23,5,20,8.8,20h14.4c3.7,0,6.8,3,6.8,6.8V31C30,31.6,29.6,32,29,32z"}))},{code:"dueThisWeek",value:"Due this week",icon:c.a.createElement("svg",{className:ie.contextSVGIcon,focusable:"false",viewBox:"0 0 32 32"},c.a.createElement("path",{d:"M24,2V1c0-0.6-0.4-1-1-1s-1,0.4-1,1v1H10V1c0-0.6-0.4-1-1-1S8,0.4,8,1v1C4.7,2,2,4.7,2,8v16c0,3.3,2.7,6,6,6h16c3.3,0,6-2.7,6-6V8C30,4.7,27.3,2,24,2z M28,24c0,2.2-1.8,4-4,4H8c-2.2,0-4-1.8-4-4V8c0-2.2,1.8-4,4-4v1c0,0.6,0.4,1,1,1s1-0.4,1-1V4h12v1c0,0.6,0.4,1,1,1s1-0.4,1-1V4c2.2,0,4,1.8,4,4V24z M12,10h8.8v2.1L15.5,22h-2.8l5.2-9.7H12V10z"}))},{code:"dueNextWeek",value:"Due next week",icon:c.a.createElement("svg",{className:ie.contextSVGIcon,focusable:"false",viewBox:"0 0 32 32"},c.a.createElement("path",{d:"M24,2V1c0-0.6-0.4-1-1-1s-1,0.4-1,1v1H10V1c0-0.6-0.4-1-1-1S8,0.4,8,1v1C4.7,2,2,4.7,2,8v16c0,3.3,2.7,6,6,6h16 c3.3,0,6-2.7,6-6V8C30,4.7,27.3,2,24,2z M28,24c0,2.2-1.8,4-4,4H8c-2.2,0-4-1.8-4-4V8c0-2.2,1.8-4,4-4v1c0,0.6,0.4,1,1,1s1-0.4,1-1 V4h12v1c0,0.6,0.4,1,1,1s1-0.4,1-1V4c2.2,0,4,1.8,4,4V24z M23.8,16.4c0.3,0.4,0.3,0.9,0,1.3l-4.5,5.5c-0.2,0.2-0.5,0.3-0.8,0.3 c-0.2,0-0.5-0.1-0.6-0.2c-0.4-0.4-0.5-1-0.1-1.4l3.1-3.9H10c-0.6,0-1-0.4-1-1s0.4-1,1-1h10.9l-3.1-3.9c-0.4-0.4-0.3-1.1,0.1-1.4 c0.4-0.4,1.1-0.3,1.4,0.1L23.8,16.4z"}))}],ue=function(){_(null)};window.addEventListener("resize",(function(){var e=document.getElementById("BOARD");if(e){var t=e.scrollWidth>e.clientWidth;ee!==t&&te(t)}}));var de=c.a.useCallback((function(e){return a.find((function(t){return Number(t.id)===Number(e)}))}),[a]),pe=c.a.useCallback((function(e){var t=e.source,r=e.destination,c=e.type;if(r&&(t.droppableId!==r.droppableId||t.index!==r.index))if("COLUMN"!==c){var o=de(t.droppableId),i=de(r.droppableId),s=de(t.droppableId).records[t.index];n({column:i,source:o,record:s,index:r.index})}else{if(0===r.index)return;l({column:a[t.index],index:r.index})}}),[a,n,de,l]),be=c.a.useRef(null),ve=Object(r.useState)(!1),ge=Object(S.a)(ve,2),he=ge[0],Ee=ge[1],ke=function(e){be.current&&be.current.contains(e.target)||Ee(!1)},je=function(){var e=Object(I.a)(T.a.mark((function e(){var t,a,n=arguments;return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.length>0&&void 0!==n[0]&&n[0],e.next=3,He({name:Ce("Untitled section"),sequence:s.length+1});case 3:(a=e.sent)&&o({column:Object(u.a)(Object(u.a)({},a),{},{records:[]})},t);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),ye={disableDrag:!0,disableColumnAdd:!0,disableColumnCollapse:!0,disableColumnDelete:!0,customHeader:!0,CardListStyle:{backgroundColor:"white"}};return Object(r.useEffect)((function(){var e=Object(d.a)(oe);le(e)}),[N]),c.a.createElement(yt.a,{onDragEnd:pe},c.a.createElement("div",{className:ie.toolbar},c.a.createElement("div",{className:ie.container},c.a.createElement("div",{style:{display:"flex"}},c.a.createElement(R.a,{variant:"outlined",color:"primary",onClick:k,className:ie.addTaskButton,startIcon:c.a.createElement(xt.a,{size:"small"}),size:"small"},Ce("Add Task")),c.a.createElement(V.a,{ref:be,"aria-controls":he?"menu-list-grow":void 0,"aria-haspopup":"true",onClick:function(){Ee((function(e){return!e}))},className:ie.menuButton,size:"small"},c.a.createElement(Mr.a,{size:"small",style:{color:"#32325d"}}))),c.a.createElement(qn,{fields:E,domain:[],handleChange:f,onSave:b,onDelete:v,filters:p,value:m,onContentSearch:g})),c.a.createElement("div",{className:ie.sortingOptions},c.a.createElement(R.a,{variant:"outlined",onClick:function(e){_(e.currentTarget)},startIcon:c.a.createElement(ar.a,{size:"small"}),size:"small",className:ie.toolbarButton},y&&Ce(y.label||y.value)||Ce("All tasks")),c.a.createElement(R.a,{variant:"outlined",onClick:function(e){return L(e.currentTarget)},startIcon:c.a.createElement(Ar.a,{size:"small"}),size:"small",className:ie.toolbarButton,style:{background:O&&(O.label||O.value)?"#CAEEFF":"inherit",color:O&&(O.label||O.value)?"#2CB3F6":"inherit"}},Ce("TaskEditor.filter")," ",O&&Ce(O.label||O.value),O&&O.value&&c.a.createElement(Rr.a,{size:"small",onClick:function(){return x(null)},className:ie.clearIcon})),c.a.createElement(R.a,{variant:"outlined",onClick:function(e){J(e.currentTarget)},startIcon:c.a.createElement(Br.a,{size:"small"}),size:"small",className:ie.toolbarButton},Ce("TaskEditor.sort"),C&&("sequence"===C.code?"":" : ".concat(Ce(C.name)))),c.a.createElement(Jn.a,{id:"sort-menu",anchorEl:K,keepMounted:!0,open:$,onClose:function(){return J(null)},TransitionComponent:Tr.a,classes:{paper:ie.menuPaper},elevation:0,getContentAnchorEl:null,anchorOrigin:mc,transformOrigin:pc},re&&re.map((function(e){return c.a.createElement(xa.a,{key:e.code,onClick:function(){J(null),w(e)},className:ie.menuItem},c.a.createElement(A.a,{className:ie.iconSelected,style:{visibility:e.code===(C&&C.code)?"visible":"hidden"}}),c.a.createElement(Et.a,{className:ie.menuTypography},e.name))}))),c.a.createElement(Jn.a,{id:"filter-menu",anchorEl:z,keepMounted:!0,open:H,onClose:function(){return L(null)},TransitionComponent:Tr.a,classes:{paper:ie.menuPaper},elevation:0,getContentAnchorEl:null,anchorOrigin:mc,transformOrigin:pc},se.map((function(e){return c.a.createElement(xa.a,{key:e.code,className:ie.menuItem,onClick:function(){L(null),x(e)}},e.icon,c.a.createElement(Et.a,{className:ie.contextMenuItem},Ce(e.value)))}))),c.a.createElement(Jn.a,{id:"fliter-list-menu",anchorEl:q,keepMounted:!0,open:U,onClose:ue,TransitionComponent:Tr.a,classes:{paper:ie.menuPaper},elevation:0,getContentAnchorEl:null,anchorOrigin:mc,transformOrigin:pc},ce.map((function(e){return e.items?c.a.createElement(Nr.a,{parentMenuOpen:U,key:e.code,label:e.value,style:{fontSize:14,marginLeft:28},onClick:function(){ue(),j(e)}},e.items.map((function(e){return c.a.createElement(xa.a,{key:e.code,className:ie.menuItem,onClick:function(){ue(),j(e)}},c.a.createElement(A.a,{className:ie.iconSelected,style:{visibility:e.value===(y&&y.value)?"visible":"hidden"}}),c.a.createElement(Et.a,{className:ie.menuTypography},e.value))}))):c.a.createElement(xa.a,{key:e.code,onClick:function(){ue(),j(e)},className:ie.menuItem},c.a.createElement(A.a,{className:ie.iconSelected,style:{visibility:e.value===(y&&y.value)?"visible":"hidden"}}),c.a.createElement(Et.a,{className:ie.menuTypography},e.value))}))))),c.a.createElement(yt.c,{droppableId:"board",type:"COLUMN",direction:"vertical"},(function(e,n){return c.a.createElement("div",Object.assign({id:"BOARD",ref:e.innerRef},e.droppableProps,{className:ie.contentWrapper}),c.a.createElement("div",{className:ie.parentHeader,style:{width:ee?"fit-content":"100%"}},c.a.createElement("div",{className:B()(ie.toolbarHeader,ie.taskNameHeader,ie.toolbarSortIconOnHover),onClick:function(){return w({code:"name",name:"Alphabetical",sortFunction:me})}},c.a.createElement(Et.a,{className:ie.menuTypography},Ce("Task Name")),C&&"name"===C.code?c.a.createElement(Wr.a,{className:ie.toolbarSortIcon}):c.a.createElement(Wr.a,{className:"toolbarSortIcon"})),!P&&!t&&c.a.createElement(c.a.Fragment,null,c.a.createElement("div",{className:B()(ie.toolbarHeader,ie.toolbarSortIconOnHover),onClick:function(){return w({code:"priority",name:"Priority",sortFunction:me})}},c.a.createElement(Et.a,{className:ie.menuTypography},Ce("Priority")),C&&"priority"===C.code?c.a.createElement(Wr.a,{className:ie.toolbarSortIcon}):c.a.createElement(Wr.a,{className:"toolbarSortIcon"})),c.a.createElement("div",{className:B()(ie.toolbarHeader,ie.toolbarSortIconOnHover),onClick:function(){return w({code:"status",name:"Status",sortFunction:me})}},c.a.createElement(Et.a,{className:ie.menuTypography},Ce("Status")),C&&"status"===C.code?c.a.createElement(Wr.a,{className:ie.toolbarSortIcon}):c.a.createElement(Wr.a,{className:"toolbarSortIcon"})),c.a.createElement("div",{className:B()(ie.toolbarHeader,ie.toolbarSortIconOnHover),onClick:function(){return w({code:"progressSelect",name:"Progress",sortFunction:me})}},c.a.createElement(Et.a,{className:ie.menuTypography},Ce("Progress")),C&&"progressSelect"===C.code?c.a.createElement(Wr.a,{className:ie.toolbarSortIcon}):c.a.createElement(Wr.a,{className:"toolbarSortIcon"})),c.a.createElement("div",{className:B()(ie.toolbarHeader,ie.toolbarSortIconOnHover),onClick:function(){return w({code:"projectTaskCategory",name:"Category",sortFunction:fe,fieldName:"name"})}},c.a.createElement(Et.a,{className:ie.menuTypography},Ce("Category")),C&&"projectTaskCategory"===C.code?c.a.createElement(Wr.a,{className:ie.toolbarSortIcon}):c.a.createElement(Wr.a,{className:"toolbarSortIcon"})))),a.map((function(e,t){return c.a.createElement(uc,Object.assign({key:e.id,index:t,column:e,isScroll:ee},-1===e.id?ye:{}))})),!n.isDraggingOver&&c.a.createElement("div",{className:ie.btnParent},c.a.createElement(R.a,{startIcon:c.a.createElement(xt.a,null),className:ie.addSectionButton,onClick:function(){return je(!0)}},Ce("Add Section"))),e.placeholder)})),c.a.createElement(Da.a,{open:he,anchorEl:be.current,role:void 0,transition:!0,disablePortal:!0,style:{zIndex:900}},(function(e){var t=e.TransitionProps;return c.a.createElement(Ir.a,Object.assign({},t,{style:{transformOrigin:"right bottom"}}),c.a.createElement(Pa.a,null,c.a.createElement(Dr.a,{onClickAway:ke},c.a.createElement(Pr.a,{autoFocusItem:he,id:"menu-list-grow"},c.a.createElement(xa.a,{onClick:function(e){je(),ke(e)}},Ce("Add Section"))))))})))}fc.defaultProps={columns:[]};var bc={},vc=function(e){if(bc[e])return bc[e];var t=function e(){var t=Math.round(10*Math.random())%se.length,a=Object.values(bc)||[];return a.includes(se[t])?a.length===se.length||a.includes("gray")?"gray":void e():se[t]}();return t?bc[e]=t:void 0},gc=Object(Y.a)((function(e){return{root:{height:"100%",overflow:"hidden"},drawer:{flexShrink:0,height:"100%",overflow:"hidden"},drawerPaper:Object(P.a)({width:"50%"},e.breakpoints.only("xs"),{width:"100%"}),drawerHeader:Object(u.a)(Object(u.a)({display:"flex",alignItems:"center",padding:e.spacing(0,1)},e.mixins.toolbar),{},{position:"fixed",justifyContent:"space-between",width:"50%",height:50,boxSizing:"border-box",minHeight:"".concat(50,"px !important"),boxShadow:e.shadows[4]}),markComplete:{textTransform:"none",color:"#6F7782","&:hover":{color:"#00bf9c",borderColor:"#00bf9c"}},fullScreenToolbar:Object(P.a)({zIndex:100,background:"white",width:"50%"},e.breakpoints.only("xs"),{width:"100%"}),formView:{height:"calc(100% - ".concat(50,"px - 66px)"),marginTop:50,overflowY:"auto"},toolbarIcon:{fill:"#6f7782",height:16,width:16},toolbarIconButton:{padding:10},fullScreenForm:{marginTop:50,height:"100%",boxShadow:"0px 2px 4px -1px rgba(0,0,0,0.2), 0px 4px 5px 0px rgba(0,0,0,0.14), 0px 1px 10px 0px rgba(0,0,0,0.12)"},copyToClipboard:{position:"absolute",opacity:0}}})),hc=c.a.createContext();function Ec(e){var t=e.children,a=Object(D.a)(e,["children"]);return c.a.createElement(hc.Provider,{value:a},t)}var kc=function(){return c.a.createElement("svg",{focusable:"false",viewBox:"0 0 32 32",style:{fill:"#6f7782",height:16,width:16}},c.a.createElement("path",{d:"M25,20c-2.4,0-4.4,1.7-4.9,4H11c-3.9,0-7-3.1-7-7v-5h16.1c0.5,2.3,2.5,4,4.9,4c2.8,0,5-2.2,5-5s-2.2-5-5-5c-2.4,0-4.4,1.7-4.9,4H4V3c0-0.6-0.4-1-1-1S2,2.4,2,3v14c0,5,4,9,9,9h9.1c0.5,2.3,2.5,4,4.9,4c2.8,0,5-2.2,5-5S27.8,20,25,20z M25,8c1.7,0,3,1.3,3,3s-1.3,3-3,3s-3-1.3-3-3S23.3,8,25,8z M25,28c-1.7,0-3-1.3-3-3s1.3-3,3-3s3,1.3,3,3S26.7,28,25,28z"}))},jc=function(){var e=Object(I.a)(T.a.mark((function e(){var t,a=arguments;return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.length>0&&void 0!==a[0]?a[0]:[],e.abrupt("return",Promise.all(t.map((function(e){return Fe(e,!0)}))));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),yc=function(){var e=Object(I.a)(T.a.mark((function e(){var t,a=arguments;return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.length>0&&void 0!==a[0]?a[0]:[],e.abrupt("return",Promise.all(t.map((function(e){return Ve(e,!0)}))));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();function Oc(e){return xc.apply(this,arguments)}function xc(){return(xc=Object(I.a)(T.a.mark((function e(t){var a,n,r,c,o,l,i,s,m,p,f,b,v,g,h,E,k,j,y,O,x,C,w,N,I,D,P,F,M;return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=t.columns,n=t.sourceColumn,r=t.destinationColumn,c=t.sourceIndex,o=t.destinationIndex,l=function(e){return a.findIndex((function(t){return t.id===e}))},s=function(e,t){return t.find((function(t){return t.id===e})).sequence},m=function(e,t){return(t.find((function(t){return t.id===e})).projectTaskSection||{}).id},p=function(e){return e.map((function(e,t){return Object(u.a)(Object(u.a)({},e),{},{sequence:t+1})}))},f=function(e,t){var a=e.filter((function(e){return e.sequence!==s(e.id,t)||(e.projectTaskSection||{}).id!==m(e.id,t)}));return[a,a.map((function(e){return e.id}))]},b=function(e,t){return e.map((function(e){return t.includes(e.id)?Object(u.a)(Object(u.a)({},e),{},{version:e.version+1}):e}))},v=(i=function(e){return Object(d.a)(a.find((function(t){return t.id===e})).records||[])})(n.id),g=i(r.id),h=v[c],n.id!==r.id){e.next=18;break}return E=p(ke(v,c,o)),k=f(E,v),j=Object(S.a)(k,2),y=j[0],O=j[1],x=b(E,O),(C=Array.from(a))[l(n.id)].records=x,e.abrupt("return",[C,jc(y)]);case 18:return v.splice(c,1),g.splice(o,0,h),w=p(g).map((function(e,t){return Object(u.a)(Object(u.a)({},e),{},{projectTaskSection:-1===r.id?null:Object(u.a)({},r||{})})})),N=f(w,g),I=Object(S.a)(N,2),D=I[0],P=I[1],F=b(w,P),(M=Array.from(a))[l(n.id)].records=v,M[l(r.id)].records=F,e.abrupt("return",[M,jc(D)]);case 27:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Cc=function(e){var t=Object(r.useState)(Object(u.a)({},e)),a=Object(S.a)(t,2),n=a[0],o=a[1],l=(n||{}).columns,i=void 0===l?[]:l,s=Object(r.useState)(!1),m=Object(S.a)(s,2),p=m[0],f=m[1],b=Object(r.useState)(null),v=Object(S.a)(b,2),g=v[0],h=v[1],E=Object(r.useState)(null),k=Object(S.a)(E,2),j=k[0],y=k[1],O=Object(r.useState)(null),x=Object(S.a)(O,2),C=x[0],w=x[1],N=Object(r.useState)(null),D=Object(S.a)(N,2),P=D[0],F=D[1],z=Object(r.useState)(),L=Object(S.a)(z,2),Y=L[0],q=L[1],_=Object(r.useState)([]),U=Object(S.a)(_,2),X=U[0],G=U[1],K=Object(r.useState)(),J=Object(S.a)(K,2),$=J[0],Q=J[1],Z=Object(r.useState)([]),ee=Object(S.a)(Z,2),te=ee[0],ae=ee[1],ne=Object(r.useState)({message:"",open:!1,severity:"success"}),re=Object(S.a)(ne,2),ce=re[0],oe=re[1],se=Object(r.useState)([]),ue=Object(S.a)(se,2),de=ue[0],pe=ue[1],fe=Object(r.useState)([]),ve=Object(S.a)(fe,2),he=ve[0],we=ve[1],Se=Object(r.useState)(null),Te=Object(S.a)(Se,2),Ie=Te[0],Pe=Te[1],Me=Object(r.useState)([]),Be=Object(S.a)(Me,2),Ae=Be[0],He=Be[1],Re=Object(r.useState)(null),Ve=Object(S.a)(Re,2),We=Ve[0],qe=Ve[1],_e=Object(r.useState)(!1),Ue=Object(S.a)(_e,2),Xe=Ue[0],Ge=Ue[1],Je=Object(r.useState)(-1),Qe=Object(S.a)(Je,2),et=Qe[0],at=Qe[1],rt=Object(r.useState)(!1),ot=Object(S.a)(rt,2),it=ot[0],ut=ot[1],mt=Object(r.useState)(!1),ft=Object(S.a)(mt,2),gt=ft[0],ht=ft[1],Et=Object(r.useState)(!1),kt=Object(S.a)(Et,2),jt=kt[0],yt=kt[1],Ot=Object(r.useState)(!1),xt=Object(S.a)(Ot,2),Ct=xt[0],wt=xt[1],St=Object(r.useState)(!1),Nt=Object(S.a)(St,2),Tt=Nt[0],It=Nt[1],Dt=Object(r.useState)(!1),Pt=Object(S.a)(Dt,2),Ft=Pt[0],Mt=Pt[1],zt=Object(r.useState)(!1),Bt=Object(S.a)(zt,2),Lt=Bt[0],At=Bt[1],Ht=Object(r.useState)(null),Rt=Object(S.a)(Ht,2),Vt=Rt[0],Wt=Rt[1],Yt=Object(r.useState)({code:"incompleteTasks",value:"Incomplete tasks"}),qt=Object(S.a)(Yt,2),_t=qt[0],Ut=qt[1],Xt=Object(r.useState)(null),Gt=Object(S.a)(Xt,2),Kt=Gt[0],Jt=Gt[1],$t=Object(r.useState)(null),Qt=Object(S.a)($t,2),Zt=Qt[0],ta=Qt[1],aa=Object(r.useState)(!1),na=Object(S.a)(aa,2),ra=na[0],ca=na[1],oa=gc(),la=function(){wt(!0)},ia=function(){wt(!1),qe(null),Ge(!1)},sa=c.a.useCallback((function(e){var t=Object(d.a)(e||[]);switch(_t.code){case"allTasks":return t;case"incompleteTasks":return t=t.filter((function(e){return!e.status||"closed"!==e.status}));case"completedTasks":case"allCompletedTasks":return t=t.filter((function(e){return e.status&&"closed"===e.status}));case"yesterday":return t=t.filter((function(e){return e.status&&"closed"===e.status&&je(e.taskEndDate)===je(M()().subtract(1,"days"))}));case"today":return t=t.filter((function(e){return e.status&&"closed"===e.status&&je(e.taskEndDate)===je(M()())}));case"oneweek":return t=t.filter((function(e){return e.status&&"closed"===e.status&&M()(e.taskEndDate).isSame(new Date,"week")}));case"twoWeeks":return t=t.filter((function(e){return e.status&&"closed"===e.status&&M()(e.taskEndDate).isSame(M()().subtract(8,"days"),"week")}));case"threeWeeks":return t=t.filter((function(e){return e.status&&"closed"===e.status&&M()(e.taskEndDate).isSame(M()().subtract(15,"days"),"week")}));default:return t}}),[_t]),ua=c.a.useCallback((function(e){if(_t.code){var t=sa(e);if(!Kt||!Kt.code)return t;switch(Kt.code){case"dueNextWeek":return t=t.filter((function(e){return M()(e.taskEndDate).isSame(M()().add(8,"days"),"week")}));case"justMyTasks":return t=t.filter((function(e){return(e.assignedTo&&e.assignedTo.id)===P["user.id"]}));case"dueThisWeek":return t=t.filter((function(e){return M()(e.taskEndDate).isSame(new Date,"week")}));default:return t}}}),[_t,Kt,sa,P]),da=c.a.useCallback((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"sequence",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:me,a=arguments.length>2?arguments[2]:void 0,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:i,r=n.map((function(n){return Object(u.a)(Object(u.a)({},n),{},{records:t(n.records,e,a)})}));o((function(){return{columns:Object(d.a)(r)}}))}),[i]),ma=function(e){var t=e.severity,a=e.message,n=e.isAction,r=void 0!==n&&n,c=e.onActionClick,o=e.autoHideDuration;oe({open:!0,severity:t,message:a,isAction:r,onActionClick:c,autoHideDuration:void 0===o?1e3:o})},pa=c.a.useCallback((function(e){return q(e)}),[]),fa=c.a.useCallback(function(){var e=Object(I.a)(T.a.mark((function e(t){var a;return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,tt(t);case 2:return a=e.sent,G((function(e){return-1===e.find((function(e){return e.id===a.id}))&&e.push(a),Object(d.a)(e)})),e.abrupt("return",a);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[]),ba=c.a.useCallback(function(){var e=Object(I.a)(T.a.mark((function e(t){return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,nt(t);case 2:G((function(e){var a=e.find((function(e){return e.id===t.id}));return-1!==a&&e.splice(a,1),Object(d.a)(e)}));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[]),va=c.a.useCallback((function(e){Q(e)}),[]),ga=function(){var e=Object(I.a)(T.a.mark((function e(t){var a,n,r;return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return h(Object(u.a)({},t)),t&&(a=Sa(t.id,t.projectTaskSection&&t.projectTaskSection.id),at(a)),n=he.filter((function(e){return e.parentTask&&e.parentTask.id===t.id})),He(n),e.next=6,dt(t.id);case 6:if(e.t0=e.sent,e.t0){e.next=9;break}e.t0=[];case 9:r=e.t0,ae(r),f(!0);case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Ea=function(){var e=Object(I.a)(T.a.mark((function e(t){var a,n,r,c,o,l,i,s=arguments;return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=s.length>1&&void 0!==s[1]?s[1]:0,n=ye(t),c=a+(r=1e5)<n&&n.size?a+r:n&&n.size,o=n&&n.slice(a,c),l=Oe(t,a),e.next=8,st(o,l);case 8:(i=e.sent)&&i.id?ka(i):a<n&&n.size&&(i.fileId&&(t.id=i.fileId),Ea(t,r+a));case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ka=function(){var e=Object(I.a)(T.a.mark((function e(t){var a,n;return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={fileName:t.fileName,metaFile:{id:t.id},relatedId:g.id,relatedModel:"com.axelor.apps.project.db.ProjectTask"},e.next=3,lt(a);case 3:(n=e.sent)&&n.length?(ae((function(e){return[].concat(Object(d.a)(e||[]),[n[0]])})),ma({severity:"success",message:"TaskEditor.uploadSuccess"})):ma({severity:"error",message:"TaskEditor.uploadError"});case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ja=function(){document.getElementById("inputFile").click()},ya=function(t){!function(e){for(var t=0;t<e.length;t++)e[t].id||Ea(e[t])}(te?te.concat(Object(d.a)(be(t.target.files,e.maxFiles))):be(t.target.files))},Oa=function(){var e=Object(I.a)(T.a.mark((function e(t){var a;return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,pt([{id:t.id,version:t.version}]);case 2:e.sent?(a=te.findIndex((function(e){return JSON.stringify(e)===JSON.stringify(t)})),te.splice(a,1),ae(te),ma({severity:"success",message:"TaskEditor.deleteSuccess"})):ma({severity:"error",message:"TaskEditor.error"});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),xa=c.a.useCallback((function(e){!function(e){bt.apply(this,arguments)}(e)}),[]),Ca=function(e){return e.columns.map((function(e){return Object(u.a)(Object(u.a)({},e),{},{records:Object(d.a)(e.records||[])})}))},wa=c.a.useCallback((function(e){return i.findIndex((function(t){return t.id===e}))}),[i]),Sa=c.a.useCallback((function(e,t){var a=he.find((function(t){return t.id===e}))||{};if(t||a.id){var n=i[wa(t)]&&i[wa(t)].records.findIndex((function(t){return t.id===e}));return n<0&&(n=i[wa(t)].records.length),n}}),[i,wa,he]),Na=c.a.useCallback((function(e,t){var a=e.column;-1===wa(a.id)?(o((function(e){var n=Ca(e);return t?n[n.length]=Object(u.a)({},a):n.splice(1,0,Object(u.a)({},a)),we(Object(d.a)(n)),{columns:n}})),y((function(e){return[].concat(Object(d.a)(e||[]),[a])}))):alert("Column with same name already exists.")}),[wa]),Ta=c.a.useCallback(function(){var e=Object(I.a)(T.a.mark((function e(t){var a,n,r,c,l,i,s,u;return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.column,n=t.record,e.next=3,ze(n.id);case 3:if(-1===(r=e.sent).status){e.next=16;break}if(c=wa(a.id),l=Sa(n.id,a.id),!(c<0||l<0)){e.next=9;break}return e.abrupt("return");case 9:o((function(e){var t=Ca(e);t[c].records.splice(l,1);var a=Da(t);return{columns:ge(ua(a),j)||[]}})),i=Object(d.a)(he||[]),(s=i&&i.findIndex((function(e){return e.id===n.id})))>-1&&(i.splice(s,1),we(i),u=i.filter((function(e){return e.parentTask&&e.parentTask.id===e.id})),He(u)),ma({severity:"success",message:"TaskEditor.taskDeleteSuccess"}),e.next=17;break;case 16:ma({severity:"error",message:r&&r.data&&r.data.title});case 17:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[wa,Sa,ua,j,he]),Ia=c.a.useCallback((function(e){var t=e.column,a=e.record;t&&(o((function(e){var n=Ca(e).map((function(e,n){return e.id===t.id?Object(u.a)(Object(u.a)({},e),{},{records:[Object(u.a)({},a||{})].concat(Object(d.a)(e.records||[]))}):e})),r=Da(n),c=ge(ua(r),j)||[];if(!Zt)return{columns:c};var o=Zt.key,l=Zt.sortFunction,i=Zt.fieldName;da(o,l,i,c)})),we([].concat(Object(d.a)(he),[Object(u.a)({},a)])))}),[ua,j,he,da,Zt]),Da=function(e){var t=[];return e.map((function(e){return e.records.map((function(e){return t.push(e)}))})),t},Pa=c.a.useCallback((function(e){var t=e.column,a=e.record,n=wa(t.id),r=Sa(a.id,t.id);if(!(n<0||r<0)){o((function(e){var t=Ca(e);t[n].records[r]=Object(u.a)({},a);var c=Da(t),o=ge(ua(c),j)||[];if(!Zt)return{columns:o};var l=Zt.key,i=Zt.sortFunction,s=Zt.fieldName;da(l,i,s,o)}));var c=Object(d.a)(he),l=c&&c.findIndex((function(e){return e.id===a.id}));if(l>-1&&(c[l]=a,we(c),g)){var i=c.filter((function(e){return e.parentTask&&e.parentTask.id===g.id}));He(i)}(a&&a.id)===(g&&g.id)&&h(Object(u.a)({},a))}}),[wa,Sa,Zt,da,ua,j,g,he]),Fa=c.a.useCallback(function(){var e=Object(I.a)(T.a.mark((function e(t){var a,r,c,l,s,m,p,f,b,v,g;return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.column,r=t.index,c=t.source,l=t.record,s=Ca(n),e.next=4,Oc({columns:i,destinationColumn:a,destinationIndex:r,sourceColumn:c,sourceIndex:Sa(l.id,c.id)});case 4:m=e.sent,p=Object(S.a)(m,2),f=p[0],p[1].then((function(e){return e.some((function(e){return-1===e.status}))})).then((function(e){if(e){o((function(e){return Object(u.a)(Object(u.a)({},e),{},{columns:s})}));var t=Da(s);we(Object(d.a)(t)),ma({severity:"error",message:"TaskEditor.concurrencyError"})}})),o({columns:f}),Zt&&(b=Zt.key,v=Zt.sortFunction,g=Zt.fieldName,da(b,v,g)),h(Object(u.a)({},l));case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[i,Sa,n,da,Zt]),Ma=c.a.useCallback((function(e){var t=e.column,a=e.index,r=Ca(n),c=ke(i,wa(t.id),a).map((function(e,t){return Object(u.a)(Object(u.a)({},e),{},{sequence:0===t?0:t+1})})),l=c.filter((function(e){return e.sequence!==(t=e.id,r.find((function(e){return e.id===t})).sequence);var t}));yc(l).then((function(e){return e.some((function(e){return-1===e.status}))})).then((function(e){e&&(o((function(e){return Object(u.a)(Object(u.a)({},e),{},{columns:r})})),ma({severity:"error",message:"TaskEditor.concurrencyError"}))}));var s=l.map((function(e){return e.id})),d=c.map((function(e){return s.includes(e.id)?Object(u.a)(Object(u.a)({},e),{},{version:e.version+1}):e}));o((function(e){return Object(u.a)(Object(u.a)({},e),{},{columns:d})}))}),[i,wa,n]),za=c.a.useCallback((function(e){var t=e.column,a=wa(t.id);o((function(e){var t=Ca(e);return t[a].collapsed=!t[a].collapsed,{columns:t}}))}),[wa]),Ba=c.a.useCallback((function(e){var t=e.column,a=wa(t.id);o((function(e){var n=Ca(e);return n[a].name=t.name,n[a].version=t.version,{columns:n}}))}),[wa]),La=c.a.useCallback(function(){var e=Object(I.a)(T.a.mark((function e(t){var a,n,r,c;return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.column,e.next=3,Ye(a.id);case 3:-1!==(n=e.sent).status?(o((function(e){var t=Ca(e);return t.splice(wa(a.id),1),{columns:t}})),r=Object(d.a)(j||[]),(c=r.findIndex((function(e){return e.id===a.id})))>-1&&r.splice(c,1),y(r),ma({severity:"success",message:"TaskEditor.sectionDeleteSuccess"})):ma({severity:"error",message:n&&n.data&&n.data.title});case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[wa,j]),Aa=function(){var e=Object(I.a)(T.a.mark((function e(t){return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Ke({id:g.id,entityModel:"com.axelor.apps.project.db.ProjectTask",body:t}));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Ha=function(e){return n.columns&&n.columns[e]},Ra=function(){var e=Object(I.a)(T.a.mark((function e(t){var a,n,r,c=arguments;return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=c.length>1&&void 0!==c[1]?c[1]:1,n=Ha(a)){e.next=4;break}return e.abrupt("return");case 4:return e.prev=4,e.next=7,De({name:Ce("New Task"),sequence:1,project:{id:C},status:"new",priority:"normal",taskDate:M()(),assignedTo:{id:P&&P["user.id"]},projectTaskSection:-1===n.id?null:{id:n.id}});case 7:(r=e.sent)&&(o((function(e){return{columns:e.columns.map((function(e,t){return t===a?Object(u.a)(Object(u.a)({},e),{},{records:[r].concat(Object(d.a)(e.records||[]))}):e}))}})),we([].concat(Object(d.a)(he),[Object(u.a)({},r)])),ma({severity:"success",message:"TaskEditor.taskAddSuccess"})),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(4),ma({severity:"error",message:"TaskEditor.taskAddError"});case 14:case"end":return e.stop()}}),e,null,[[4,11]])})));return function(t){return e.apply(this,arguments)}}(),Va=function(){var e=Object(I.a)(T.a.mark((function e(t){var a;return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,De({name:"New Sub Task",sequence:1,project:{id:Ie.id},status:"new",priority:"normal",taskDate:M()(),assignedTo:{id:P&&P["user.id"]},parentTask:{id:t.id},projectTaskSection:t.projectTaskSection&&t.projectTaskSection.id?{id:t.projectTaskSection.id}:null});case 4:(a=e.sent)&&(He([].concat(Object(d.a)(Ae),[Object(u.a)({},a)])),Ia({column:a.projectTaskSection||{id:-1},record:a}));case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Wa=function(e){He(e)},Ya=function(e,t){e.stopPropagation(),Ge(t),qe(e.currentTarget)},qa=c.a.useCallback((function(e,t){var a=e.projectTaskSection,n=wa(a&&a.id||-1);n<0||t<0||(o((function(a){var r=Ca(a);r[n].records.splice(t,0,Object(u.a)({},e));var c=Da(r);return{columns:ge(ua(c),j)||[]}})),ut(!1))}),[wa,ua,j]),_a=c.a.useCallback(function(){var e=Object(I.a)(T.a.mark((function e(t){var a,n,r,c;return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=t.column,n=t.record,ut(!0),r=wa(a&&a.id||-1),c=Sa(n.id,a&&a.id||-1),!(r<0||c<0)){e.next=6;break}return e.abrupt("return");case 6:o((function(e){var t=Ca(e);t[r].records.splice(c,1);var a=Da(t);return{columns:ge(ua(a),j)||[]}})),ma({severity:"success",message:"TaskEditor.taskDeleteSuccess",isAction:!0,onActionClick:function(){return qa(g,et)},autoHideDuration:1e4});case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[wa,Sa,g,et,qa,ua,j]),Ua=function(){var e=Object(I.a)(T.a.mark((function e(){var t,a,n;return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return yt(!1),ia(),e.next=4,ze(g.id);case 4:-1!==(t=e.sent).status?(h(null),ut(!1),f(!1),a=Object(d.a)(he),n=a.findIndex((function(e){return e.id===g.id})),a.splice(n,1),we(a)):ma({severity:"error",message:t&&t.data&&t.data.title});case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Xa=c.a.useCallback((function(e){e&&e.stopPropagation(),yt(!1)}),[]),Ga=function(){It(!0)},Ka=function(){Mt(!0)},Ja=c.a.useCallback(function(){var e=Object(I.a)(T.a.mark((function e(t){var a,n;return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t&&t.stopPropagation(),a=ra?g.statusBeforeComplete:"closed",e.next=4,Fe(Object(u.a)(Object(u.a)({},g),{},{status:a,statusBeforeComplete:g.status}));case 4:(n=e.sent)&&Pa({column:n.projectTaskSection,record:Object(u.a)(Object(u.a)({},n),{},{"priority.technicalTypeSelect":g["priority.technicalTypeSelect"]})});case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[Pa,ra,g]),$a=function(e,t){var a=document.getElementById("copyText");a&&(a.value=e||window.location.href,a.select(),a.setSelectionRange(0,99999),document.execCommand("copy"),oe({open:!0,message:t||Ce("Copied to clipboard")}))};Object(r.useEffect)((function(){if(g&&Ie){var e=xe(g);ca(e)}}),[g,Ie]),Object(r.useEffect)((function(){Object(I.a)(T.a.mark((function e(){var t,a;return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=function(){for(var e,t=/[?&]id=([^&#]*)/g,a=window.location.href;e=t.exec(a);)return e[1]}(),e.next=4,vt(t,{fields:le});case 4:a=e.sent,w(t),Pe(a);case 7:case"end":return e.stop()}}),e)})))()}),[]),Object(r.useEffect)((function(){Object(I.a)(T.a.mark((function e(){var t,a,n,r,c,o,l,i,s,u;return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Le();case 2:return t=e.sent,e.next=5,$e();case 5:return a=e.sent,e.next=8,Ze();case 8:return n=e.sent,e.next=11,ct("com.axelor.apps.project.db.ProjectTask");case 11:if(e.t0=e.sent,e.t0){e.next=14;break}e.t0={};case 14:r=e.t0,c=r.jsonFields,o=void 0===c?{}:c,l=r.fields,s=(i=void 0===l?[]:l).filter((function(e){return!o[e.name]&&!["id","version"].includes(e.name)})),u=Object.keys(o).reduce((function(e,t){var a=o[t],n=i.find((function(e){return e.name===t}));return[].concat(Object(d.a)(e),Object(d.a)(Object.keys(a).map((function(e){return Ee(n||{name:t},a[e])}))))}),[]),pe([].concat(Object(d.a)(s),Object(d.a)(u))),y(t),F(a),G(n);case 25:case"end":return e.stop()}}),e)})))()}),[]),Object(r.useEffect)((function(){if(de.length>0){var t=[];C&&t.push({fieldName:"project.id",operator:"=",value:C}),Y&&Y.query&&t.push(Object(u.a)({},Y.query)),$&&t.push({fieldName:"name",operator:"like",value:$});var a={},n=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];function a(e){var n=e.criteria,r=e.fieldName,c=e.operator,o=e.value;if(n&&Array.isArray(n))return Object(u.a)(Object(u.a)({},e),{},{criteria:n.map(a)});if(r&&c){var l=t.find((function(e){return e.name===r}));if(l&&l.target){var i=l.targetName,s=function(e){return e&&("object"===typeof e?e.id:e)},d="".concat(r).concat(i?".".concat(i):"");return["in","notin"].includes(c.toLowerCase())&&(d="".concat(r,".id")),Object(u.a)(Object(u.a)({},e),{},{fieldName:d,value:Array.isArray(o)?o.map(s):s(o)})}if(["isTrue","isFalse"].includes(c))return Object(u.a)(Object(u.a)({},e),{},{operator:"=",value:"isTrue"===c?"true":"false"})}return e}return a({criteria:e})}(t,de);n.criteria.length>0&&(a=Object(u.a)(Object(u.a)({},n),{},{operator:"and"})),function(e){return Ne.apply(this,arguments)}({fields:ie,data:a}).then((function(t){we(t);var a=ge(ua(t),j)||[];return o(Object(u.a)({columns:a},e)),a}))}}),[de,Y,$,C,e,j,ua]);var Qa=function(){return c.a.createElement(c.a.Fragment,null,(Vt||g)&&c.a.createElement(ur,{task:Vt||g}),c.a.createElement(mr,{anchorEl:We,isDialog:!1}))};return c.a.createElement(Ec,Object.assign({columns:i,onCardAdd:Ia,onCardEdit:Pa,onCardMove:Fa,onCardDelete:Ta,onColumnAdd:Na,onColumnMove:Ma,onColumnToggle:za,onColumnDelete:La,onColumnUpdate:Ba,handleDrawerOpen:ga,sections:j,searchFilter:Y,filters:X,handleChangeFilter:pa,handleSaveFilter:fa,handleDeleteFilter:ba,handleContentSearch:va,fields:de,addNewTask:Ra,project:Ie,tasks:he,open:p,task:g,copyToClipboard:$a,addContextTask:function(e,t){if(Wt(e),"fullScreen"===t)la();else{if("duplicateTask"!==t)return;Ga()}},handleSetMenuFilter:function(e){Ut(e)},menuFilter:_t,filter:Kt,handleSetFilter:function(e){Jt(e)},sortColumnName:Zt,handleSetSortColumnName:function(e){Zt&&Zt.code===e.code&&(e={code:"sequence",name:Ce("TaskEditor.none"),sortFunction:me}),ta(e),da(e.code,e.sortFunction,e.fieldName)},selectedProject:Ie,addNewSubtask:Va,userId:P&&P["user.id"],language:P&&P["user.lang"],projectId:C,userData:P,attachments:te,addComment:Aa,removeAttachment:Oa,downloadAttachment:xa,subTasks:Ae,updateSubTasks:Wa,isDeleteClicked:it,isSubtaskOfClicked:gt,closeSubtaskOfClicked:function(){ht(!1)},taskIndex:et,premanentlyDeleteTask:function(){yt(!0)},undoTaskDelete:qa,handleListKeyDown:function(e){"Tab"===e.key&&(e.preventDefault(),qe(null))},handleClose:function(){qe(null)},deleteTask:_a,onSubtaskOfClicked:function(){ht(!0),qe(null)},handleFullScreenOpen:la,handleFullScreenClose:ia,handleDuplicateTaskDialogOpen:Ga,handleConvertToProjectDialogOpen:Ka,handlePrintPDFDialog:function(){At(!0)},getAvatarColor:vc},e),c.a.createElement("div",{className:oa.root},Ct&&c.a.createElement(fr,{open:Ct,handleFullScreenClose:ia,toggleStatus:Ja,isCompleted:ra,upload:ja,attachmentList:te,addNewSubtask:Va,getSubTaskIcon:kc,subTasks:Ae,copyToClipboard:$a,anchorEl:We,handleToggle:Ya,contextTask:Vt,task:g,selectFile:ya,headerClass:oa.fullScreenToolbar,isDialog:Xe}),c.a.createElement(fc,null),c.a.createElement(H.a,{className:oa.drawer,variant:"persistent",anchor:"right",open:p,classes:{paper:oa.drawerPaper}},c.a.createElement("div",{className:B()(oa.drawerHeader,oa.fullScreenToolbar)},c.a.createElement("div",null,c.a.createElement(R.a,{variant:"outlined",size:"small",className:oa.markComplete,startIcon:c.a.createElement(A.a,null),onClick:Ja,style:{color:ra?"white":"#6F7782",background:ra?"#00bf9c":"white"}},Ce(ra?"Completed":"Mark Complete"))),c.a.createElement("div",null,c.a.createElement(V.a,{onClick:ja,className:oa.toolbarIconButton},c.a.createElement("svg",{className:oa.toolbarIcon,focusable:"false",viewBox:"0 0 32 32"},c.a.createElement("path",{d:"M19,32c-3.9,0-7-3.1-7-7V10c0-2.2,1.8-4,4-4s4,1.8,4,4v9c0,0.6-0.4,1-1,1s-1-0.4-1-1v-9c0-1.1-0.9-2-2-2s-2,0.9-2,2v15c0,2.8,2.2,5,5,5s5-2.2,5-5V10c0-4.4-3.6-8-8-8s-8,3.6-8,8v5c0,0.6-0.4,1-1,1s-1-0.4-1-1v-5C6,4.5,10.5,0,16,0s10,4.5,10,10v15C26,28.9,22.9,32,19,32z"})),te&&te.length>0&&c.a.createElement("span",{style:{fontSize:10.5,marginBottom:12}},te.length),c.a.createElement("input",{id:"inputFile",type:"file",name:"file",multiple:!0,onChange:ya,style:{display:"none"}})),c.a.createElement(V.a,{onClick:function(){return Va(g)},className:oa.toolbarIconButton},kc(),Ae&&Ae.length>0&&c.a.createElement("span",{style:{fontSize:10.5,marginBottom:12}},Ae.length)),c.a.createElement(V.a,{onClick:function(){return $a()},className:oa.toolbarIconButton},c.a.createElement("svg",{className:oa.toolbarIcon,focusable:"false",viewBox:"0 0 32 32"},c.a.createElement("path",{d:"M9,32c-2.3,0-4.6-0.9-6.4-2.6c-3.5-3.5-3.5-9.2,0-12.7l4-4c0.4-0.4,1-0.4,1.4,0c0.4,0.4,0.4,1,0,1.4l-4,4c-2.7,2.7-2.7,7.2,0,9.9s7.2,2.7,9.9,0l4-4c2.7-2.7,2.7-7.2,0-9.9c-0.8-0.8-1.8-1.4-2.9-1.7c-0.5-0.2-0.8-0.7-0.7-1.3c0.2-0.5,0.7-0.8,1.3-0.7c1.4,0.4,2.7,1.2,3.7,2.2c3.5,3.5,3.5,9.2,0,12.7l-4,4C13.6,31.1,11.3,32,9,32z M16.6,21.6c-0.1,0-0.2,0-0.3,0c-1.4-0.4-2.7-1.2-3.7-2.2c-1.7-1.7-2.6-4-2.6-6.4s0.9-4.7,2.6-6.4l4-4c3.5-3.5,9.2-3.5,12.7,0s3.5,9.2,0,12.7l-4,4c-0.4,0.4-1,0.4-1.4,0s-0.4-1,0-1.4l4-4c2.7-2.7,2.7-7.2,0-9.9S20.7,1.3,18,4l-4,4c-1.3,1.4-2,3.1-2,5s0.7,3.6,2.1,5c0.8,0.8,1.8,1.4,2.9,1.7c0.5,0.2,0.8,0.7,0.7,1.3C17.5,21.4,17.1,21.6,16.6,21.6z"}))),c.a.createElement(V.a,{onClick:function(e){return Ya(e,!1)},className:oa.toolbarIconButton},c.a.createElement("svg",{className:oa.toolbarIcon,focusable:"false",viewBox:"0 0 32 32"},c.a.createElement("path",{d:"M16,13c1.7,0,3,1.3,3,3s-1.3,3-3,3s-3-1.3-3-3S14.3,13,16,13z M3,13c1.7,0,3,1.3,3,3s-1.3,3-3,3s-3-1.3-3-3S1.3,13,3,13z M29,13c1.7,0,3,1.3,3,3s-1.3,3-3,3s-3-1.3-3-3S27.3,13,29,13z"}))),c.a.createElement(V.a,{onClick:function(){it&&Ua(g),o((function(e){var t=Ca(e);return t.map((function(e,a){return e.records.map((function(e,n){return Number(e.project.id)!==Number(C)&&t[a].records.splice(n,1),{columns:t}}))})),{columns:t}})),h(null),ut(!1),f(!1)},className:oa.toolbarIconButton},c.a.createElement("svg",{className:oa.toolbarIcon,focusable:"false",viewBox:"0 0 32 32"},c.a.createElement("path",{d:"M2,14.5h18.4l-7.4-7.4c-0.6-0.6-0.6-1.5,0-2.1c0.6-0.6,1.5-0.6,2.1,0l10,10c0.6,0.6,0.6,1.5,0,2.1l-10,10c-0.3,0.3-0.7,0.4-1.1,0.4c-0.4,0-0.8-0.1-1.1-0.4c-0.6-0.6-0.6-1.5,0-2.1l7.4-7.4H2c-0.8,0-1.5-0.7-1.5-1.5C0.5,15.3,1.2,14.5,2,14.5z M28,3.5C28,2.7,28.7,2,29.5,2S31,2.7,31,3.5v25c0,0.8-0.7,1.5-1.5,1.5S28,29.3,28,28.5V3.5z"}))))),c.a.createElement("div",{className:oa.formView},!Xe&&c.a.createElement(Qa,null)),c.a.createElement(ha,{open:jt,onClose:Xa,onConfirm:Ua,title:Ce("Delete Task")}),(Vt||g)&&c.a.createElement(gr,{open:Tt,handleClickOpen:Ga,handleClose:function(){It(!1)},task:Vt||g,attachmentList:te,onCardAdd:Ia,setSnackbarProps:oe,updateSubTasks:Wa,subTasks:Ae}),g&&c.a.createElement(c.a.Fragment,null,c.a.createElement(Er,{open:Ft,handleClickOpen:Ka,handleClose:function(){Mt(!1)},task:g,setSnackbarProps:oe}),c.a.createElement(Sr,{open:Lt,handleClose:function(){At(!1),qe(null)},task:g,subTasks:Ae}))),c.a.createElement(ea,Object.assign({},ce,{closeSnackbar:function(){oe(Object(u.a)(Object(u.a)({},ce),{},{open:!1}))}})),c.a.createElement(W.a,{value:"",id:"copyText",className:oa.copyToClipboard})))},wc=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.language,a=e.theme,n={};return"ar"!==t&&"he"!==t||(n.direction="rtl"),"dark"===a&&(n.palette={type:"dark"}),n}({}),Sc=wc.direction,Nc=wc.palette;var Tc=function(){return c.a.createElement(C,{direction:Sc,palette:Nc},c.a.createElement(s.a,{utils:i.a},c.a.createElement("div",{className:"app"},c.a.createElement(Cc,null))))};a(799);l.a.render(c.a.createElement(Tc,null),document.getElementById("root"))}},[[507,1,2]]]);