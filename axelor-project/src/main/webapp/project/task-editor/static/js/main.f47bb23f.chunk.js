/*
 * Axelor Business Solutions
 *
 * Copyright (C) 2023 Axelor (<http://axelor.com>).
 *
 * This program is free software: you can redistribute it and/or  modify
 * it under the terms of the GNU Affero General Public License, version 3,
 * as published by the Free Software Foundation.
 *
 * This program is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 * GNU Affero General Public License for more details.
 *
 * You should have received a copy of the GNU Affero General Public License
 * along with this program.  If not, see <http://www.gnu.org/licenses/>.
 */
(this["webpackJsonpaos-task-view"]=this["webpackJsonpaos-task-view"]||[]).push([[0],{245:function(e,t,a){e.exports=a.p+"static/media/user.5d75554d.jpg"},378:function(e,t,a){},508:function(e,t,a){e.exports=a(802)},610:function(e,t,a){},629:function(e,t){},630:function(e,t){},631:function(e,t){},632:function(e,t){},633:function(e,t){},634:function(e,t){},636:function(e,t){},676:function(e,t){},677:function(e,t){},801:function(e,t,a){},802:function(e,t,a){"use strict";a.r(t);var n,r=a(0),o=a.n(r),c=a(36),i=a.n(c),l=a(240),s=a(55),u=a(5),d=a(24),m=a(69),p=a(438),f=a.n(p),b=a(898),v=a(854),g=a(889),h=a(485),k=a(442),E=a.n(k),j=a(443),y=a.n(j),O=a(855),C=Object(m.b)({plugins:[].concat(Object(d.a)(Object(g.a)().plugins),[f()()])});function x(e){var t=e.direction,a=e.palette,c=e.children;Object(r.useEffect)((function(){t?document.body.dir=t:document.body.removeAttribute("dir")}));var i=function(e){var t=e.direction,a=void 0===t?"ltr":t,r=e.palette;return void 0===n&&(n=document.body.dir||document.dir),a=a||n,Object(h.a)({direction:a,layout:{cols:12},header:{height:64},palette:Object(u.a)({primary:E.a,secondary:y.a},r),typography:{useNextVariants:!0}})}({direction:t,palette:a});return o.a.createElement(b.b,{jss:C},o.a.createElement(v.a,{theme:i},o.a.createElement(O.a,null),c))}var w,S=a(10),T=a(8),N=a.n(T),D=a(19),I=a(29),P=a.n(I),F=a(116),M=a(17),B=a(444),z=a(445),A=a(261),L=a(260),R=a(262),H=a(857),V=a(858),W=a(259),Y=a(258),q=a(859),U=a(860),_=[{name:"description",label:me("Task Description")},{name:"parentTask",label:me("Parent Task")},{name:"attachments",label:me("Attachements")},{name:"projectTaskSection",label:me("Section")},{name:"taskDate",label:me("TaskEditor.taskDate")},{name:"taskEndDate",label:me("Task end")},{name:"priority",label:me("Priority")},{name:"status",label:me("Status")},{name:"progressSelect",label:me("Progress")},{name:"projectTaskCategory",label:me("Category")}],X={1:"lightblue",2:"#428bca",3:"orange",4:"#d9534f"},$=[{code:"allTasks",value:me("All tasks")},{code:"incompleteTasks",value:me("Incomplete tasks")},{code:"completedTasks",value:me("Completed tasks"),items:[{code:"allCompletedTasks",value:me("All completed tasks")},{code:"today",value:me("Today"),label:me("All completed tasks")},{code:"yesterday",value:me("Yesterday"),label:me("All completed tasks")},{code:"oneweek",value:me("1 week"),label:me("All completed tasks")},{code:"twoWeeks",value:me("2 weeks"),label:me("All completed tasks")},{code:"threeWeeks",value:me("3 weeks"),label:me("All completed tasks")}]}],G=[{code:"sequence",name:me("TaskEditor.none"),sortFunction:Z},{code:"name",name:me("Alphabetical"),sortFunction:Z},{code:"assignedTo",name:me("Assignee"),sortFunction:te,fieldName:"fullName"},{code:"taskEndDate",name:me("Due Date"),sortFunction:ee},{code:"taskDate",name:me("TaskEditor.taskDate"),sortFunction:ee},{code:"priority",name:me("Priority"),sortFunction:function(e,t,a){return e.sort((function(e,t){var n=e[a],r=t[a];return n>r?-1:n<r?1:0}))},fieldName:"priority.technicalTypeSelect"},{code:"status",name:me("Status"),sortFunction:te,fieldName:"name"},{code:"progressSelect",name:me("Progress"),sortFunction:Z},{code:"projectTaskCategory",name:me("Category"),sortFunction:te,fieldName:"name"}],K=[A.a[600],L.a[600],R.a[600],H.a[600],V.a[600],W.a[600],Y.a[600],q.a[600],U.a[600],A.a[700],L.a[700],R.a[700],H.a[700],V.a[700],W.a[700],Y.a[700],q.a[700],U.a[700],A.a[800],L.a[800],R.a[800],H.a[800],W.a[800],V.a[800],Y.a[800],q.a[800],U.a[800],A.a[900],L.a[900],R.a[900],H.a[900],V.a[900],W.a[900],Y.a[900],q.a[900],U.a[900],A.a[500],L.a[500],R.a[500],H.a[500],V.a[500],W.a[500],Y.a[500],q.a[500],U.a[500]],J={};function Q(e){var t=document.cookie||"";return t!==w&&(w=t,J=t.split("; ").reduce((function(e,t){var a=t.split("=");return e[a[0]]=a[1],e}),{})),J[e]}function Z(e,t){return function(e,t){return e.sort((function(e,a){var n=e[t],r=a[t];return n<r?-1:n>r?1:0}))}(e,"name").sort((function(e,a){var n=e[t],r=a[t];return n<r?-1:n>r?1:0}))}function ee(e,t){return e.sort((function(e,a){var n=new Date(e[t]),r=new Date(a[t]);return n<r?-1:n>r?1:0}))}function te(e,t,a){return e.sort((function(e,n){var r=e[t]&&e[t][a],o=n[t]&&n[t][a];return""!==r&&o?""!==o&&r?r<o?-1:r>o?1:0:1:-1}))}function ae(e,t){return Array.prototype.slice.call(e).slice(0,t).map((function(e,t){return{file:e,index:t,progress:0,cancelled:!1,completed:!1,chunkProgress:new Array(Math.floor(e.size/524288)+1).fill(0),error:!1,totalUploaded:0}}))}function ne(e,t){if(!e||e.length)return Z(e&&(e.filter((function(e){return e.projectTaskSection&&e.projectTaskSection.id===t.id}))||[]),"sequence")}function re(e){return e.title||e.autoTitle||e.name}function oe(e,t){var a=t.modelField||e.name,n=t.type||t.jsonType,r="::".concat(t.jsonType||"text");return t.target&&t.targetName&&(r=""),Object(u.a)(Object(u.a)({},t),{},{title:"".concat(re(t)," ").concat(re(e)&&"(".concat(re(e),")")),name:"".concat(a,".").concat(t.name).concat(r),type:n.replace(/-/g,"_").toUpperCase()})}function ce(e,t,a){var n=Array.from(e),r=n.splice(t,1),o=Object(S.a)(r,1)[0];return n.splice(a,0,o),n}function ie(e){if(e)return P()(e).format("YYYY-MM-DD")}function le(e){return e.file}function se(e,t){var a=e.file;if(a){var n={"X-File-Name":a.name,"X-File-Offset":t,"X-File-Size":a.size,"X-File-Type":a.type,"X-CSRF-Token":Q("CSRF-TOKEN")};return e.id&&(n["X-File-Id"]=e.id),n}}function ue(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e||{},a=t.projectTaskStatusSet,n=void 0===a?[]:a;if(n&&n.length<=0)return{};var r=n&&n.filter((function(e){return!0===e.isDefaultCompleted}));return r&&r[0]||{}}var de=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,a=e.status;if(!a)return!1;var n=ue(t);return!!n&&n.id===a.id};function me(e){return window._t&&"string"===typeof e?window._t(e):e}var pe=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",a="".concat(e).lastIndexOf("/")===e.length-1?"":"/";return"".concat(e).concat(a).concat(t)},fe=new(function(){function e(){Object(B.a)(this,e);var t=new Headers;t.append("Accept","application/json"),t.append("Content-Type","application/json"),t.append("X-Requested-With","XMLHttpRequest"),t.append("X-CSRF-Token",Q("CSRF-TOKEN")),this.baseURL="../..",this.headers=t}return Object(z.a)(e,[{key:"fetch",value:function(e){function t(t,a,n){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(e,t,a){return fetch(e,a).then((function(e){return-1!==["head"].indexOf(t.toLowerCase())?e:e.headers.get("content-type").includes("application/json")?e.json():e})).catch((function(e){}))}))},{key:"request",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=Object.assign({method:"POST",credentials:"include",headers:this.headers,mode:"cors",body:JSON.stringify(a)},t);return"GET"===t.method&&delete n.body,this.fetch("".concat(this.baseURL).concat(0===e.indexOf("/")?e:"/".concat(e)),t.method,n)}},{key:"post",value:function(e,t){return this.request(e,{method:"POST"},t)}},{key:"get",value:function(e){return this.request(e,{method:"GET"})}},{key:"add",value:function(e,t){var a={data:t},n="ws/rest/".concat(e);return this.post(n,a)}},{key:"fetchId",value:function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n="ws/rest/".concat(e,"/").concat(t,"/fetch");return this.post(n,a)}},{key:"delete",value:function(e,t){var a="ws/rest/".concat(e,"/").concat(t);return this.request(a,{method:"DELETE"})}},{key:"search",value:function(e,t){var a=Object(u.a)({offset:0},t),n="ws/rest/".concat(e,"/search");return this.post(n,a)}},{key:"upload",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){return!0},r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return new Promise((function(o,c){var i=e.baseURL,l=new XMLHttpRequest,s=pe(e.baseURL,"ws/files/upload"),u=function(){return a["X-File-Id"]?e.intercept((function(){return e.http.delete(pe(e.baseURL,"ws/files/upload/"+a["X-File-Id"]))})):Promise.resolve(!0)};l.open("POST",s,!0),Object.keys(a).forEach((function(e){l.setRequestHeader(e,a[e])})),l.withCredentials=!0,l.overrideMimeType("application/octet-stream"),l.setRequestHeader("Content-Type","application/octet-stream"),l.setRequestHeader("X-Requested-With","XMLHttpRequest"),l.onload=function(){n(100)},r.abort=function(){return l.abort(),u()},l.onreadystatechange=function(){if(4===l.readyState)switch(l.status){case 401:throw this.callbackInterceptor(),new Error("Unauthorized");case 200:try{var e=JSON.parse(l.responseText);o({result:e,url:"".concat(i,"ws/rest/com.axelor.meta.db.MetaFile/").concat(e.id,"/content/download?v=0")})}catch(t){o(l.responseText)}break;default:u(),c({status:l.status})}},l.upload.onprogress=function(e){var t=a["X-File-Size"],o=parseFloat(a["X-File-Offset"])+e.loaded,c=Math.round(o/t*100);r.progress=c>95?"95%":c+"%",r.transfer=function(e,t){var a=function(e){return e>1e9?parseFloat(e/1e9).toFixed(2)+" GB":e>1e6?parseFloat(e/1e6).toFixed(2)+" MB":e>=1e3?parseFloat(e/1e3).toFixed(2)+" KB":e+" B"};return a(e||0)+"/"+a(t)}(o,t),r.loaded=o===t,e.lengthComputable&&n(e.loaded/e.total*100,r)},l.send(t)}))}},{key:"download",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],a="".concat(this.baseURL,"/ws/dms/download/").concat(e.id);return new Promise((function(n,r){var o=new XMLHttpRequest;o.open("GET",a,!0),o.responseType="blob",o.onload=function(a){var r=o.response;if(t)n(r);else{var c=document.createElement("a");c.href=window.URL.createObjectURL(r),c.download=e.isDirectory?"".concat(e.fileName,".zip"):e.fileName,c.click(),n()}},o.send()}))}}]),e}()),be=["toInvoice","isShowTaskCategory","isShowPlanning","isShowStatus","productSet","isShowProgress","taskCustomFields","isShowSection","id","synchronize","parentProject","attrs","fromDate","sequence","projectTaskPrioritySet","clientPartner","name","code","description","projectTaskStatusSet","assignedTo","isShowPriority","projectFolderSet","company","currency","contactPartner","membersUserSet","toDate","isBusinessProject","fullName","projectStatus","projectTaskCategorySet"],ve=["project","projectTaskSection","status","parentTask","name","metaFile","description","assignedTo","taskEndDate","taskDate","taskDeadline","priority","fullName","status.isCompleted","status.isDefaultCompleted","priority.technicalTypeSelect","progressSelect","attrs","statusBeforeComplete","sequence","projectTaskCategory"];function ge(e,t){return Object.keys(e).filter((function(e){return t.includes(e)})).reduce((function(t,a){return void 0===e[a]?t:Object(u.a)(Object(u.a)({},t),{},Object(M.a)({},a,e[a]))}),{})}function he(){return(he=Object(D.a)(N.a.mark((function e(t){var a;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fe.search("com.axelor.apps.project.db.ProjectTask",Object(u.a)({fields:ve},t));case 2:if(!(a=e.sent)||!a.data){e.next=5;break}return e.abrupt("return",a.data);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ke(e){return Ee.apply(this,arguments)}function Ee(){return(Ee=Object(D.a)(N.a.mark((function e(t){var a;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fe.add("com.axelor.apps.project.db.Project",Object(u.a)({},t));case 2:if(!((a=e.sent)&&a.data&&a.data[0])){e.next=5;break}return e.abrupt("return",a.data[0]);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function je(e){return ye.apply(this,arguments)}function ye(){return(ye=Object(D.a)(N.a.mark((function e(t){var a,n,r=arguments;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=!(r.length>1&&void 0!==r[1])||r[1],e.next=3,fe.add("com.axelor.apps.project.db.ProjectTask",Object(u.a)({},t));case 3:if(!((n=e.sent)&&n.data&&n.data[0])){e.next=8;break}if(!a){e.next=7;break}return e.abrupt("return",ge(n.data[0],[].concat(ve,["id","version"])));case 7:return e.abrupt("return",n.data[0]);case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Oe(e){return Ce.apply(this,arguments)}function Ce(){return(Ce=Object(D.a)(N.a.mark((function e(t){var a,n,r,o=arguments;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=o.length>1&&void 0!==o[1]&&o[1],n=!(o.length>2&&void 0!==o[2])||o[2],e.next=4,fe.add("com.axelor.apps.project.db.ProjectTask",Object(u.a)({},t));case 4:if(!((r=e.sent)&&r.data&&r.data[0])){e.next=9;break}if(n&&(r.data[0]=ge(r.data[0],[].concat(ve,["id","version"]))),a){e.next=9;break}return e.abrupt("return",r.data[0]);case 9:return e.abrupt("return",r);case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function xe(e){return we.apply(this,arguments)}function we(){return(we=Object(D.a)(N.a.mark((function e(t){var a;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fe.delete("com.axelor.apps.project.db.ProjectTask",t);case 2:return a=e.sent,e.abrupt("return",a);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Se(e){return Te.apply(this,arguments)}function Te(){return(Te=Object(D.a)(N.a.mark((function e(t){var a;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fe.search("com.axelor.apps.project.db.ProjectTaskSection",Object(u.a)({fields:["name","sequence","selected"]},t));case 2:if(!(a=e.sent)||!a.data){e.next=5;break}return e.abrupt("return",a.data);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ne(e){return De.apply(this,arguments)}function De(){return(De=Object(D.a)(N.a.mark((function e(t){var a;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fe.add("com.axelor.apps.project.db.ProjectTaskSection",Object(u.a)({},t));case 2:if(!((a=e.sent)&&a.data&&a.data[0])){e.next=5;break}return e.abrupt("return",a.data[0]);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ie(e){return Pe.apply(this,arguments)}function Pe(){return(Pe=Object(D.a)(N.a.mark((function e(t){var a,n,r=arguments;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=r.length>1&&void 0!==r[1]&&r[1],e.next=3,fe.add("com.axelor.apps.project.db.ProjectTaskSection",Object(u.a)({},t));case 3:if(n=e.sent,!a){e.next=6;break}return e.abrupt("return",n);case 6:if(!(n&&n.data&&n.data[0])){e.next=8;break}return e.abrupt("return",n.data[0]);case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Fe(e){return Me.apply(this,arguments)}function Me(){return(Me=Object(D.a)(N.a.mark((function e(t){var a;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fe.delete("com.axelor.apps.project.db.ProjectTaskSection",t);case 2:return a=e.sent,e.abrupt("return",a);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Be(){return ze.apply(this,arguments)}function ze(){return(ze=Object(D.a)(N.a.mark((function e(){var t,a,n,r,o,c,i,l,s=arguments;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=s.length>0&&void 0!==s[0]?s[0]:{},a=t.id,n=t.offset,r=void 0===n?0:n,o=t.limit,c=void 0===o?4:o,i=t.relatedModel,e.next=3,fe.get("ws/rest/com.axelor.mail.db.MailMessage/messages?limit=".concat(c,"&offset=").concat(r,"&relatedId=").concat(a,"&relatedModel=").concat(i));case 3:if(!(l=e.sent)||!l.data){e.next=6;break}return e.abrupt("return",{comments:l.data,offset:l.offset,total:l.total});case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ae(e){return Le.apply(this,arguments)}function Le(){return(Le=Object(D.a)(N.a.mark((function e(t){var a;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fe.post("ws/rest/com.axelor.mail.db.MailMessage/".concat(t.id,"/remove"),{data:t});case 2:if(!((a=e.sent)&&a.data&&a.data[0])){e.next=5;break}return e.abrupt("return",a.data[0]);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Re(){return He.apply(this,arguments)}function He(){return(He=Object(D.a)(N.a.mark((function e(){var t,a,n,r,o,c,i,l,s=arguments;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=s.length>0&&void 0!==s[0]?s[0]:{},a=t.id,n=t.body,r=void 0===n?"":n,o=t.files,c=void 0===o?[]:o,i=t.entityModel,e.next=3,fe.post("ws/rest/".concat(i,"/").concat(a,"/message"),{data:{body:r,files:c,type:"comment"}});case 3:if(!((l=e.sent)&&l.data&&l.data[0])){e.next=6;break}return e.abrupt("return",l.data[0]);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ve(){return We.apply(this,arguments)}function We(){return(We=Object(D.a)(N.a.mark((function e(){var t;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fe.get("ws/app/info");case 2:if(!(t=e.sent)){e.next=5;break}return e.abrupt("return",t);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ye(){return qe.apply(this,arguments)}function qe(){return(qe=Object(D.a)(N.a.mark((function e(){var t,a,n;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"com.axelor.meta.web.MetaFilterController:findFilters",a={data:{model:t="com.axelor.meta.db.MetaFilter",domain:null,context:{filterView:"task-filters",_model:t}}},e.next=5,fe.post("/ws/action/".concat("com.axelor.meta.web.MetaFilterController:findFilters"),a);case 5:if(!(n=e.sent)||!n.data){e.next=8;break}return e.abrupt("return",n.data);case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ue(e){return _e.apply(this,arguments)}function _e(){return(_e=Object(D.a)(N.a.mark((function e(t){var a,n;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"com.axelor.meta.web.MetaFilterController:saveFilter",n={model:a="com.axelor.meta.db.MetaFilter",data:{model:a,domain:null,context:Object(u.a)(Object(u.a)(Object(u.a)({},t),t.name&&{name:t.name}),{},{filterView:"task-filters",filters:""})}},e.abrupt("return",fe.post("/ws/action/".concat("com.axelor.meta.web.MetaFilterController:saveFilter"),n).then((function(e){return e.data})));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Xe(e){return $e.apply(this,arguments)}function $e(){return($e=Object(D.a)(N.a.mark((function e(t){var a,n;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"com.axelor.meta.web.MetaFilterController:removeFilter",n={model:a="com.axelor.meta.db.MetaFilter",data:{model:a,domain:null,context:{name:t.name,filterView:"task-filters"}}},e.abrupt("return",fe.post("/ws/action/".concat("com.axelor.meta.web.MetaFilterController:removeFilter"),n));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ge(e){return Ke.apply(this,arguments)}function Ke(){return(Ke=Object(D.a)(N.a.mark((function e(t){var a;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fe.get("/ws/meta/fields/".concat(t,"?limit=10"));case 2:if(!((a=e.sent)&&a.data&&a.data.fields)){e.next=5;break}return e.abrupt("return",a.data);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Je(e){return Qe.apply(this,arguments)}function Qe(){return(Qe=Object(D.a)(N.a.mark((function e(t){var a;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fe.add("com.axelor.dms.db.DMSFile",t);case 2:if(!(a=e.sent)||!a.data){e.next=5;break}return e.abrupt("return",a.data);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ze(e,t){return et.apply(this,arguments)}function et(){return(et=Object(D.a)(N.a.mark((function e(t,a){var n;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fe.upload(t,a);case 2:if(!(n=e.sent)||!n.result){e.next=5;break}return e.abrupt("return",n.result);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function tt(e){return at.apply(this,arguments)}function at(){return(at=Object(D.a)(N.a.mark((function e(t){var a,n,r=arguments;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=r.length>1&&void 0!==r[1]?r[1]:"com.axelor.apps.project.db.ProjectTask",e.next=3,fe.search("com.axelor.dms.db.DMSFile",{fields:["fileName","relatedModel","relatedId","metaFile"],data:{_domain:"self.isDirectory = false AND self.relatedId = ".concat(t," AND self.relatedModel = '").concat(a,"'"),_domainContext:{rid:t,rmodel:a}}});case 3:if(!(n=e.sent)||!n.data){e.next=6;break}return e.abrupt("return",n.data);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function nt(e){return rt.apply(this,arguments)}function rt(){return(rt=Object(D.a)(N.a.mark((function e(t){var a;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fe.post("ws/rest/com.axelor.dms.db.DMSFile/removeAll",{records:t});case 2:if(!(a=e.sent)||!a.data){e.next=5;break}return e.abrupt("return",a.data);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ot(){return(ot=Object(D.a)(N.a.mark((function e(t){var a,n=arguments;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=n.length>1&&void 0!==n[1]&&n[1],e.abrupt("return",fe.download(t,a));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ct(e,t){return it.apply(this,arguments)}function it(){return(it=Object(D.a)(N.a.mark((function e(t,a){var n;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,fe.fetchId("com.axelor.apps.project.db.Project",t,Object(u.a)({fields:be},a));case 4:if(!((n=e.sent)&&n.data&&n.data[0])){e.next=7;break}return e.abrupt("return",n.data[0]);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var lt=a(23),st=a.n(lt),ut=a(486),dt=a(268),mt=a(488),pt=a(452),ft=a(490),bt=a(873),vt=a(126),gt=a(862),ht=a(808),kt=a(487),Et=a(866),jt=a(809),yt=a(88),Ot=a(882),Ct=a(137),xt=a.n(Ct),wt=a(467),St=a.n(wt),Tt=a(156),Nt=a.n(Tt),Dt=a(109),It=a.n(Dt),Pt=a(470),Ft=a.n(Pt),Mt=a(468),Bt=a.n(Mt),zt=a(469),At=a.n(zt),Lt=a(100),Rt=a.n(Lt),Ht=a(883),Vt=a(33),Wt=a(894),Yt=a(463),qt=a.n(Yt),Ut=a(253),_t=a.n(Ut),Xt=a(173),$t=a.n(Xt),Gt=a(252),Kt=a.n(Gt),Jt=a(446),Qt=a.n(Jt),Zt=a(447),ea=a.n(Zt),ta=a(154),aa=a(448),na=(a(378),a(379),Object(F.a)((function(){return{editorClass:{minHeight:100,border:"1px solid #eee",marginTop:-7,borderTop:"none",padding:10}}})));function ra(e){var t=e.onContentChange,a=e.content,n=e.onDescriptionChange,c=e.rest,i=Object(r.useState)(ta.EditorState.createEmpty()),l=Object(S.a)(i,2),s=l[0],u=l[1],d=Object(r.useState)(a),m=Object(S.a)(d,2),p=m[0],f=m[1],b=na();Object(r.useEffect)((function(){v(a),f(a)}),[a]);var v=function(e){var t=ea()(e),a=t.contentBlocks,n=t.entityMap,r=ta.ContentState.createFromBlockArray(a,n),o=ta.EditorState.createWithContent(r);u(o)};return o.a.createElement("div",c,o.a.createElement(aa.Editor,{editorState:s,editorClassName:b.editorClass,onEditorStateChange:function(e){u(e),f(function(e){return Qt()(Object(ta.convertToRaw)(e.getCurrentContent()))}(e)),t(p)},toolbar:{options:["inline","link","emoji","colorPicker","list","textAlign"],inline:{inDropdown:!0},list:{inDropdown:!0},textAlign:{inDropdown:!0}},onBlur:function(e){e.stopPropagation(),p!==a&&n(p)}}))}ra.Viewer=function(e){var t=e.html;return o.a.createElement("div",{className:"ax-base-draft-editor-viewer",dangerouslySetInnerHTML:{__html:t}})};var oa=ra,ca=a(449),ia=a.n(ca),la=a(899),sa=a(861),ua=a(245),da=a.n(ua),ma=Object(F.a)((function(){return{commentTag:{borderRadius:"50%",padding:"10px 15px 10px 15px",display:"flex",justifyContent:"center",alignItems:"center",fontWeight:"bold",color:"white",fontSize:15,height:25,width:15},commentContainer:{display:"flex",lineHeight:"20px",padding:"15px 0 15px 0",fontWeight:" normal",overflowX:"auto"},commentLoad:{display:"inline-block","-ms-flex-pack":"center",justifyContent:"center",backgroundColor:"gray",padding:"5px 20px 5px 20px",borderRadius:"20px",color:"white",cursor:"pointer"},cardView:{padding:"0px 15px",background:"#F6F8F9"},loadMore:{display:"flex",justifyContent:"center",padding:"10px 0px"}}}));var pa=function(e){var t=e.comments,a=void 0===t?[]:t,n=e.limit,r=e.total,c=e.offset,i=e.userId,l=ma();return o.a.createElement("div",{className:l.cardView},a&&a.map((function(t,a){var n="notification"===t.type?JSON.parse(t.body):"";return o.a.createElement("div",{key:a},o.a.createElement("div",{className:l.commentContainer},o.a.createElement(la.a,{alt:"User",src:da.a}),o.a.createElement("span",{style:{display:"flex",flex:1,flexDirection:"column",paddingLeft:20}},o.a.createElement("div",{style:{display:"flex"}},o.a.createElement("div",{style:{display:"flex",flex:1}},o.a.createElement("span",null,t.$author&&t.$author.fullName),o.a.createElement("span",{style:{color:"#D3D3D3",paddingLeft:"5px"}},"- ",P()(t.$eventTime).format("DD/MM HH:mm"))),Number(t.$author.id)===Number(i)&&t.$canDelete&&o.a.createElement("div",{style:{display:"flex",alignItems:"center"}},o.a.createElement("span",{style:{fontSize:"14px",marginTop:"-5px",cursor:"pointer"},onClick:function(){return e.removeComment(t)}},o.a.createElement(ia.a,null)))),n?o.a.createElement(o.a.Fragment,null,o.a.createElement("span",{style:{fontWeight:600,textAlign:"left"}},me(n.title)),o.a.createElement("ul",{style:{paddingLeft:20,display:n.tracks.length>0?"flex":"none",flexDirection:"column",textAlign:"left"}},n.tracks.map((function(e,t){return o.a.createElement("li",{key:t},e.displayValue?o.a.createElement("div",null,o.a.createElement("span",{style:{fontWeight:600}},me(e.title)," : "),o.a.createElement("span",null,e.oldDisplayValue&&me(e.oldDisplayValue)+" \xbb "," ",me(e.displayValue))):o.a.createElement("div",null,o.a.createElement("span",{style:{fontWeight:600}},me(e.title)," : "),o.a.createElement("span",null,e.oldValue&&me(e.oldValue)+" \xbb "," ",me(e.value))))})))):o.a.createElement("span",{style:{textOverflow:"ellipsis",wordBreak:"break-word",textAlign:"left"}},t.body))),o.a.createElement(sa.a,null))})),n+c<r&&o.a.createElement("div",{className:l.loadMore},o.a.createElement("span",{className:l.commentLoad,onClick:function(){return e.loadComment()}},me("Load more"))))},fa=a(7),ba=a(895);var va=Object(F.a)({autoComplete:{"& > div > label":{fontSize:14}},input:{fontSize:14,color:"black"},label:{fontSize:14}});function ga(e){var t=e.name,a=e.model,n=e.optionLabel,c=void 0===n?"name":n,i=e.multiple,l=void 0!==i&&i,s=e.required,m=e.index,p=e.value,f=e.update,b=e.disabled,v=e.criteriaIds,g=e.type,h=e.operator,k=void 0===h?"and":h,E=e.classes,j=void 0===E?{}:E,y=e.className,O=e.size,C=e.disableClearable,x=e.TextFieldProps,w=void 0===x?{}:x,T=e.options,N=e.criteria,D=e.label,I=o.a.useState(!1),P=Object(S.a)(I,2),F=P[0],B=P[1],z=Object(r.useState)([]),A=Object(S.a)(z,2),L=A[0],R=A[1],H=Object(r.useState)(null),V=Object(S.a)(H,2),W=V[0],Y=V[1],q=va(),U=Object(r.useCallback)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=[];e&&t.push({fieldName:c,operator:"like",value:e}),N&&N&&N.map((function(e){return t.push(e)}));var n={criteria:t,operator:k};return fe.search(a,{fields:["name","fullName"],data:n,limit:10,offset:0}).then((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.data;t&&t.length&&R(t)}))}),[a,k,c,N]);return function(e,t){var a=o.a.useRef(!1);o.a.useEffect((function(){if(a.current){var n=setTimeout((function(){return e()}),t);return function(){return clearTimeout(n)}}a.current=!0}),[e,t])}(o.a.useCallback((function(){W&&U(W)}),[U,W]),500),Object(r.useEffect)((function(){F||R([])}),[F]),Object(r.useEffect)((function(){F&&(T&&T.length>0?R(Object(d.a)(T)):U(null,v))}),[U,F,v,T]),o.a.createElement(ba.a,{classes:Object(u.a)({inputFocused:q.input,clearIndicator:q.input,popupIndicator:q.input,disabled:q.disabled},j),size:O,key:m,open:F,onOpen:function(e){e&&e.stopPropagation(),B(!0)},onClose:function(e){e&&e.stopPropagation(),B(!1)},onClick:function(e){return e&&e.stopPropagation()},disableClearable:C,clearOnEscape:!0,autoComplete:!0,className:Object(fa.a)(q.autoComplete,y),options:L,multiple:l,required:s,value:p||{},getOptionSelected:function(e,t){return e.id===t.id},onChange:function(e,a){var n=a;"multiple"===g&&(n=a&&a.filter((function(e,t,a){return t===a.findIndex((function(t){return t.id===e.id}))}))),f(Object(M.a)({},t,n),e)},name:t,disabled:b,onInputChange:function(e,t){return Y(t)},renderInput:function(e){return o.a.createElement(Wt.a,Object.assign({variant:"outlined",fullWidth:!0},w,e,{InputProps:Object(u.a)(Object(u.a)(Object(u.a)({},w.InputProps||{}),e.InputProps||{}),{},{onClick:function(e){return e&&e.stopPropagation()}}),inputProps:Object(u.a)(Object(u.a)({},e.inputProps||{}),{},{onClick:function(t){t&&t.stopPropagation(),e.inputProps&&e.inputProps.onClick&&e.inputProps.onClick(t)}}),InputLabelProps:{className:q&&q.label},className:y,label:D}))},getOptionLabel:function(e){return e[c]||""}})}var ha=a(902),ka=a(892),Ea=a(172),ja=a.n(Ea);function ya(e){return o.a.createElement(ka.a,Object.assign({elevation:6,variant:"filled"},e))}var Oa=Object(F.a)((function(e){return{root:{width:"100%","& > * + *":{marginTop:e.spacing(2)}},actionButton:{textTransform:"none"},close:{padding:0,marginLeft:e.spacing(1)}}}));function Ca(e){var t=Oa(),a=e.open,n=e.severity,r=void 0===n?"success":n,c=e.closeSnackbar,i=e.message,l=e.isAction,s=void 0!==l&&l,u=e.onActionClick,d=e.autoHideDuration,m=void 0===d?1e3:d,p=e.clickAway,f=void 0!==p&&p,b=function(e,t){("clickaway"!==t||!f)&&c()};return o.a.createElement("div",{className:t.root},o.a.createElement(ha.a,{anchorOrigin:{vertical:"bottom",horizontal:"left"},open:a,autoHideDuration:m,onClose:b},o.a.createElement(o.a.Fragment,null,o.a.createElement(ya,{onClose:b,severity:r,className:t.alert,action:s&&o.a.createElement(o.a.Fragment,null,o.a.createElement(dt.a,{size:"small",variant:"outlined",color:"inherit",className:t.actionButton,onClick:function(){u(),b()}},me("TaskEditor.undo")),f&&o.a.createElement(mt.a,{"aria-label":"close",color:"inherit",className:t.close,onClick:b},o.a.createElement(ja.a,null)))},me(i)))))}var xa=a(454),wa=a.n(xa),Sa=a(453),Ta=a.n(Sa),Na=a(249),Da=a.n(Na),Ia=a(867);var Pa=function(e){var t=e.files,a=e.maxFiles,n=e.removeAttachment,r=e.downloadAttachment,c="",i=[];if(t)return i=Array.prototype.slice.call(t).slice(0,a),o.a.createElement("div",{className:"attachment-list-container"},i.map((function(e,t){switch(e.fileType){case"image/png":case"image/jpeg":c=o.a.createElement(Ta.a,null);break;case"application/pdf":c=o.a.createElement(wa.a,null);break;default:c=o.a.createElement(Da.a,null)}return o.a.createElement("div",{className:"attachment-list-item",key:t},o.a.createElement("span",{style:{paddingBottom:15,display:"flex",alignItems:"center"}},o.a.createElement("span",{style:{padding:5}},c),o.a.createElement("span",{style:{paddingLeft:5}},e.fileName),o.a.createElement(mt.a,{onClick:function(){return n(e)}},o.a.createElement(ja.a,null)),o.a.createElement(mt.a,{onClick:function(){return r(e)}},o.a.createElement(Ia.a,null))))})))},Fa=Object(F.a)((function(e){return{select:Object(M.a)({marginBottom:0,minWidth:200,margin:0},e.breakpoints.only("xs"),{minWidth:150}),paper:Object(M.a)({width:200},e.breakpoints.only("xs"),{width:150})}}));function Ma(e){var t=e.value,a=e.onChange,n=e.model,c=e.title,i=e.name,l=e.optionLabel,s=e.options,d=e.criteria,m=e.label,p=Object(Vt.a)(e,["value","onChange","model","title","name","optionLabel","options","criteria","label"]),f=Fa(),b=o.a.useState(Object(u.a)({},t)),v=Object(S.a)(b,2),g=v[0],h=v[1];return Object(r.useEffect)((function(){h(Object(u.a)({},t))}),[t]),o.a.createElement(ga,Object.assign({model:n,title:c,value:g,optionLabel:l,name:i,data:g,update:function(e,t){a(e[i],t),h(e[i])},size:"small",className:st()(f.select,f.root),options:s,criteria:d,label:m,classes:{paper:f.paper},TextFieldProps:{margin:"dense",variant:"outlined"}},p))}Ma.defaultProps={value:{},onChange:function(){}};var Ba=Ma,za=a(811),Aa=a(868),La=a(813),Ra=a(869),Ha=a(814);function Va(e){var t=e.open,a=e.onClose,n=e.onConfirm,r=e.title,c=e.content,i=e.disabled;return o.a.createElement(za.a,{open:t,onClose:a,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description"},o.a.createElement(Aa.a,{id:"alert-dialog-title"},me(r)),o.a.createElement(La.a,null,o.a.createElement(Ra.a,{id:"alert-dialog-description"},me(c))),o.a.createElement(Ha.a,null,o.a.createElement(dt.a,{onClick:a,color:"primary",size:"small"},me("Cancel")),o.a.createElement(dt.a,{onClick:n,color:"primary",size:"small",autoFocus:!0,disabled:i},me("Confirm"))))}Va.defaultProps={onClose:function(){},onConfirm:function(){},open:!1,title:me("TaskEditor.deleteRecord"),content:me("TaskEditor.deleteRecordConfirm"),disabled:!1};var Wa=Va,Ya=a(870),qa=Object(F.a)((function(e){return{root:{minWidth:200,border:"1px solid lightgray",height:"fit-content",padding:"2px 10px",borderRadius:4}}}));function Ua(e){var t=e.value,a=e.onChange,n=e.className,c=e.inputClassName,i=o.a.useState(t),l=Object(S.a)(i,2),s=l[0],u=l[1],d=qa(),m=function(e){a(e),u(e)};return Object(r.useEffect)((function(){u(t)}),[t]),o.a.createElement(Ya.a,{className:st()(d.root,n),disableToolbar:!0,autoOk:!0,variant:"inline",format:"DD/MM/YYYY",classes:{root:c},InputProps:{disableUnderline:!0},value:s?P()(s):null,onChange:function(e){return m(e)}})}Ua.defaultProps={value:null,onChange:function(){}};var _a=Ua,Xa=a(900),$a=a(865),Ga=a(891),Ka=Object(F.a)((function(e){return{select:Object(M.a)({marginBottom:0,minWidth:200,textAlign:"left"},e.breakpoints.only("xs"),{minWidth:150}),selectPadding:{padding:10},formControl:Object(M.a)({minWidth:200},e.breakpoints.only("xs"),{minWidth:150}),valueChip:{height:20,color:"white"},itemChip:{height:25,color:"white",marginLeft:10},noneMenuItem:{paddingLeft:50},menuItemIcon:{fontSize:20,visibility:"hidden"},menuItemIconActive:{visibility:"visible"}}}));function Ja(e){var t=e.active,a=e.label,n=e.backgroundColor,r=Ka();return o.a.createElement(o.a.Fragment,null,o.a.createElement(It.a,{className:st()(r.menuItemIcon,Object(M.a)({},r.menuItemIconActive,t))}),a&&o.a.createElement(Xa.a,{label:a,className:r.itemChip,style:{backgroundColor:n}}))}function Qa(e){var t=e.name,a=e.className,n=e.value,r=e.onChange,c=e.options,i=e.getAvatarColor,l=e.hasNoneOption,s=void 0!==l&&l,u=(n||{}).id,d=Ka();function m(e){return e&&me("value:".concat(e.name))!=="value:".concat(e.name)?me("value:".concat(e.name)):e.name}function p(e){return e&&e.$background||e&&i&&i(e.name)||"lightgray"}function f(e){return c.find((function(t){return t.id===e}))}return o.a.createElement($a.a,{variant:"outlined",className:st()(d.formControl,a)},o.a.createElement(Ga.a,{classes:{select:d.selectPadding},className:d.select,inputProps:{name:"".concat(t),id:"outlined-".concat(t,"-native-simple")},value:u||"",onChange:function(e){r(f(e.target.value)||null,e)},renderValue:function(e){var t=f(e);return t&&o.a.createElement(Xa.a,{className:d.valueChip,label:m(t),style:{background:p(t)}})}},s&&o.a.createElement(bt.a,{className:d.noneMenuItem,value:""},o.a.createElement("em",null,me("None"))),c&&c.map((function(e){return o.a.createElement(bt.a,{value:e.id,key:e.id},o.a.createElement(Ja,{active:u===e.id,label:m(e),backgroundColor:p(e)}))}))))}Qa.defaultProps={options:[],onChange:function(){}};var Za=Qa,en=a(815),tn=a(810),an=a(872),nn=a(874),rn=a(875),on=a(881),cn=Object(F.a)((function(e){return{root:{display:"flex",borderBottom:"solid 1px rgba(0, 0, 0, 0.54)",marginBottom:"7px"},chip:{margin:"4px",height:30},list:{display:"flex",padding:"0 !important"},listItem:{padding:"0 !important"},divider:{width:1,height:28,margin:4},buttonContainer:{display:"flex",width:"100%",justifyContent:"flex-end",alignItems:"center",position:"relative",bottom:-3},inputIconBtn:{margin:0,padding:0,color:"#bbb"}}}));function ln(e){var t=e.value,a=e.onDelete,n=e.filters,r=e.handleClick,c=(Object(Vt.a)(e,["value","onDelete","filters","handleClick"]),cn()),i="";if(t.length>1)i="Filters ".concat(t.length);else if(t.length){var l=n.find((function(e){return e.id===t[0]}));i=l?l.title:"Custom"}return o.a.createElement("div",{className:c.root},o.a.createElement(tn.a,{className:c.list},o.a.createElement(Xa.a,{label:i,onDelete:function(){return a(t)},className:c.chip})),o.a.createElement("div",{className:c.buttonContainer},o.a.createElement(mt.a,{"aria-label":"open",onClick:r,className:c.inputIconBtn},o.a.createElement(nn.a,null)),o.a.createElement(mt.a,{"aria-label":"refresh",className:c.inputIconBtn},o.a.createElement(rn.a,null))))}var sn=a(455),un=a(200),dn=a(456),mn=a(457),pn=a(458);un.b.add(dn.a,mn.a,pn.a);var fn=sn.a,bn=a(863),vn=a(876),gn=Object(F.a)((function(e){return{container:{display:"flex",justifyContent:"center",flexDirection:"column"},subtitle1:{fontSize:12},chip:{margin:e.spacing(.5,.25)},link:{cursor:"pointer"}}}));function hn(e){var t=e.title,a=e.value,n=gn();return o.a.createElement("div",{className:n.container},o.a.createElement(vt.a,{variant:"subtitle1",className:n.subtitle1},t),o.a.createElement(vt.a,null,a))}function kn(e){var t=e.title,a=e.value,n=e.optionLabelKey,r=e.viewRecord,c=gn();function i(e){var t=e&&e[n];return t&&o.a.createElement(vn.a,{className:c.link,onClick:function(){return r&&r(e)}},t)}return Array.isArray(a)?o.a.createElement("div",null,o.a.createElement(vt.a,{variant:"subtitle1",className:c.subtitle1},t),a.map((function(e,t){return o.a.createElement(Xa.a,{key:t,label:i(e),className:c.chip})}))):o.a.createElement("div",null,o.a.createElement(vt.a,{variant:"subtitle1",className:c.subtitle1},t),a&&i(a))}function En(e){var t=e.title,a=e.value,n=e.customRender;return"object"!==typeof a||n?o.a.createElement(hn,{title:t,value:a}):o.a.createElement(kn,e)}function jn(e){var t=e.name,a=e.title,n=e.autoTitle,r=e.value,c=void 0===r?"":r,i=e.onChange,l=e.onBlur,s=e.readOnly,d=e.inline,m=e.InputProps,p=e.style,f=e.isControlled,b=void 0===f||f,v=Object(Vt.a)(e,["name","title","autoTitle","value","onChange","onBlur","readOnly","inline","InputProps","style","isControlled"]),g=o.a.useState(c),h=Object(S.a)(g,2),k=h[0],E=h[1];function j(e){i(k),l&&l(e)}function y(e){var t=e.target.value;b?E(t):i(t)}return o.a.useEffect((function(){E(c)}),[c]),d?s?o.a.createElement(En,{value:k}):o.a.createElement(bn.a,Object.assign({style:Object(u.a)({width:"100%"},p),placeholder:a,inputProps:{"aria-label":a},name:t,onChange:y,onBlur:j,autoComplete:"off",readOnly:s,disabled:s,value:k||""},v)):s?o.a.createElement(En,{title:a,value:k}):o.a.createElement(Wt.a,Object.assign({id:"filled-".concat(t),label:a||n,name:t,style:Object(u.a)({width:"100%"},p),onChange:y,onBlur:j,autoComplete:"off",fullWidth:!0,InputProps:Object(u.a)({readOnly:s},m),value:k||"",className:v.className},v))}jn.defaultProps={rows:3,readOnly:!1};var yn=jn,On=a(263),Cn=a(877),xn=a(878),wn=a(893),Sn=a(896);function Tn(e){var t=e.title,a=e.className,n=e.onClick,r=Object(Vt.a)(e,["title","className","onClick"]);return t&&o.a.createElement(vn.a,Object.assign({component:"button",variant:"body2",onClick:n,className:a},r),t)}function Nn(e){var t=e.name,a=e.className,n=e.onChange,r=e.value,c=e.classes,i=e.data;return o.a.createElement(Cn.a,{"aria-label":t,name:t,className:a,value:r,onChange:function(e){return n(e)}},i.map((function(e,t){var a=e.value,n=e.label;return o.a.createElement(xn.a,{key:t,value:a,control:o.a.createElement(wn.a,null),label:n,classes:{label:c&&c.label}})})))}function Dn(e){var t=e.name,a=e.value,n=e.onChange,r=e.title,c=e.inline,i=void 0!==c&&c,l=e.isDisabled,s=e.classes,u=Object(Vt.a)(e,["name","value","onChange","title","inline","isDisabled","classes"]);return i?o.a.createElement(Sn.a,Object.assign({checked:Boolean(a),onChange:function(e){var t=e.target.checked;return n(t)},value:t,name:t,disabled:l},u)):o.a.createElement(xn.a,{control:o.a.createElement(Sn.a,{checked:Boolean(a),onChange:function(e){var a=e.target.checked;return n({name:t,checked:a})},value:t}),label:r,classes:{label:s&&s.label}})}function In(e){var t=e.classes,a=e.onClick,n=e.title,r=e.hide,c=e.className,i=Object(Vt.a)(e,["classes","onClick","title","hide","className"]);return o.a.createElement(dt.a,Object.assign({variant:"contained",color:"primary",className:st()(t.button,c),onClick:a},i,{style:r?{display:"none"}:{}}),n)}function Pn(e){var t=e.name,a=e.value,n=void 0===a?"":a,r=e.onChange,c=e.options,i=Object(Vt.a)(e,["name","value","onChange","options"]),l={options:c,getOptionLabel:function(e){return e.title||""}};return o.a.createElement(ba.a,Object.assign({},l,{value:c.find((function(e){return e.name===n})),onChange:function(e,t){t&&r(t.name)},name:t,style:{marginRight:8,width:150}},i,{renderInput:function(e){return o.a.createElement(Wt.a,e)}}))}var Fn=a(460),Mn=a(890),Bn=a(461),zn=a.n(Bn),An=a(484);var Ln=Object(Mn.a)((function(e){return{formControl:{width:"100%",position:"relative","&.inline":{marginTop:3},".inline &":{paddingBottom:3}},inputRoot:{"& > div":{marginTop:"12px"}},root:{flexGrow:1},inputWrapper:{".inline & > *":{paddingBottom:3}},input:{display:"flex",padding:0,textOverflow:"ellipsis",position:"relative",whiteSpace:"nowrap",height:36,".single":{height:36},".inline &":{height:26}},valueContainer:{position:"relative",display:"flex",flexWrap:"wrap",flex:1,alignItems:"center",overflow:"hidden",".single > &":{flexWrap:"nowrap"},".inline &":{flexWrap:"nowrap"}},chip:{margin:e.spacing(.5,.25)},chipFocused:{backgroundColor:Object(Fn.emphasize)("light"===e.palette.type?e.palette.grey[300]:e.palette.grey[700],.08)},noOptionsMessage:{padding:e.spacing(1,2)},singleValue:{fontSize:16,textOverflow:"ellipsis",overflow:"hidden"},placeholder:{position:"absolute",left:2,bottom:6,fontSize:16,".inline &":{bottom:1}},divider:{height:e.spacing(2)},viewIcon:{display:"flex",justifyContent:"center",alignItems:"center",position:"absolute",right:70,bottom:8,zIndex:1,cursor:"pointer","& svg":{fontSize:20,color:"#ddd","&:hover":{color:"#555"}}}}}));function Rn(e){var t=e.inputRef,a=Object(Vt.a)(e,["inputRef"]);return o.a.createElement("div",Object.assign({ref:t},a))}var Hn={Control:function(e){var t=e.children,a=e.innerProps,n=e.innerRef,r=e.selectProps,c=r.classes,i=r.isMulti,l=r.TextFieldProps,s=r.InputProps;return o.a.createElement(Wt.a,Object.assign({className:c.inputWrapper,fullWidth:!0,classes:Object(u.a)({},l&&l.label&&{root:c.inputRoot}),InputProps:Object(u.a)(Object(u.a)({},s),{},{inputComponent:Rn,inputProps:Object(u.a)({className:st()(c.input,{single:!i}),ref:n,children:t},a)})},l))},MultiValue:function(e){var t={};return e.isDisabled||(t.onDelete=e.removeProps.onClick),o.a.createElement(Xa.a,Object.assign({tabIndex:-1,label:e.children,className:Object(fa.a)(e.selectProps.classes.chip,Object(M.a)({},e.selectProps.classes.chipFocused,e.isFocused)),deleteIcon:o.a.createElement(zn.a,e.removeProps)},t))},NoOptionsMessage:function(e){return o.a.createElement(vt.a,Object.assign({color:"textSecondary",className:e.selectProps.classes.noOptionsMessage},e.innerProps),e.children)},Option:function(e){return o.a.createElement(bt.a,Object.assign({ref:e.innerRef,selected:e.isFocused,component:"div",style:{fontWeight:e.isSelected?500:400}},e.innerProps,{className:"menu-item"}),e.children)},Placeholder:function(e){return o.a.createElement(vt.a,Object.assign({color:"textSecondary",className:e.selectProps.classes.placeholder},e.innerProps),e.children)},SingleValue:function(e){return o.a.createElement(vt.a,Object.assign({className:e.selectProps.classes.singleValue},e.innerProps),e.children)},ValueContainer:function(e){return o.a.createElement("div",{className:st()(e.selectProps.classes.valueContainer,e.selectProps.valueContainerClassName)},e.children)}};function Vn(e){var t=Ln(),a=Object(r.useState)(e.options||[]),n=Object(S.a)(a,2),c=n[0],i=n[1],l=Object(r.useState)(!1),s=Object(S.a)(l,2),d=s[0],m=s[1],p=o.a.useState(null),f=Object(S.a)(p,2),b=f[0],v=f[1],g=e.name,h=e.title,k=void 0===h?"":h,E=e.onChange,j=e.value,y=e.error,O=e.readOnly,C=void 0!==O&&O,x=e.isMulti,w=void 0!==x&&x,T=e.isSearchable,I=void 0!==T&&T,P=e.optionValueKey,F=void 0===P?"id":P,M=e.optionLabelKey,B=void 0===M?"title":M,z=e.fetchAPI,A=e.beforeFetchAPI,L=e.isPortal,R=e.inline,H=e.autoFocus,V=e.onFocus,W=e.InputProps,Y=e.formControlStyle,q=e.clearIndicatorStyle,U=e.onView,_=Object(Vt.a)(e,["name","title","onChange","value","error","readOnly","isMulti","isSearchable","optionValueKey","optionLabelKey","fetchAPI","beforeFetchAPI","isPortal","inline","autoFocus","onFocus","InputProps","formControlStyle","clearIndicatorStyle","onView"]),X=o.a.useCallback((function(t){var a;return null===(a=e.options)||void 0===a?void 0:a.find((function(e){return e[F]===t}))}),[e.options,F]);function $(){return G.apply(this,arguments)}function G(){return(G=Object(D.a)(N.a.mark((function t(){var a,n,r=arguments;return N.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a=r.length>0&&void 0!==r[0]?r[0]:"",m(!0),!A){t.next=5;break}return t.next=5,A();case 5:if(!z){t.next=12;break}return t.next=8,z({search:a});case 8:n=t.sent,i(n),t.next=13;break;case 12:i(e.options);case 13:m(!1);case 14:case"end":return t.stop()}}),t)})))).apply(this,arguments)}o.a.useEffect((function(){if("object"!==typeof j){var e=j.split(",");v(1===e.length?X(e[0].trim()):e.map((function(e){return X(e.trim())})))}else v(j)}),[j,X]);var K=function(e,t){var a=o.a.useRef(null),n=function(){return a.current&&clearTimeout(a.current)},r=function(e){return a.current=setTimeout(e,t)};return o.a.useEffect((function(){return function(){return n()}}),[]),function(){for(var t=arguments.length,a=new Array(t),o=0;o<t;o++)a[o]=arguments[o];n(),r((function(){return e.apply(void 0,a)}))}}($,400);return C?o.a.createElement(En,{title:k,value:function(e){var t=c.find((function(t){return"".concat(t.value)==="".concat(e)}));return t&&t[B]||e}(j)}):o.a.createElement($a.a,{className:st()(t.formControl,{inline:R}),style:Y},o.a.createElement(An.a,Object.assign({autoFocus:H,name:g,InputProps:W,TextFieldProps:Object(u.a)(Object(u.a)({},R?{}:{label:k,InputLabelProps:{shrink:!0}}),{},{error:y}),isLoading:d,onFocus:function(){V&&V(),$()},isClearable:!0,options:d?[]:c,onInputChange:function(e,t){"input-change"===t.action&&(m(!0),K(e))},onChange:function(e){E("object"!==typeof j?w?e.map((function(e){return e[F]})).join(","):e&&e[F]:e)},value:b,placeholder:I?"Search ".concat(k):"Select ".concat(k),classes:t,components:Hn,isDisabled:C,isMulti:w,isSearchable:I,getOptionLabel:function(e){return e[B]},getOptionValue:function(e){return e[F]},blurInputOnSelect:!0,menuShouldBlockScroll:!0,menuPlacement:"auto",styles:{menuPortal:function(e){return Object(u.a)(Object(u.a)({},e),{},{zIndex:1500})},container:function(e){return{width:"100%"}},clearIndicator:function(e){return Object(u.a)(Object(u.a)({},e),q)},menu:function(e){return Object(u.a)(Object(u.a)({},e),{},{marginTop:0,borderRadius:0})}}},_.options?{}:{filterOption:function(){return!0}},L?{menuPortalTarget:document.body}:{},_)),j&&U&&o.a.createElement("div",{onClick:function(e){e.stopPropagation(),U(j)},className:t.viewIcon},o.a.createElement(Da.a,null)))}Vn.defaultProps={isPortal:!0};var Wn=Vn,Yn=a(879),qn=a(888),Un={date:Ya.a,time:Yn.a,datetime:qn.a},_n={date:"DD/MM/YYYY",time:"LT",datetime:"DD/MM/YYYY h:mm a"};var Xn=function(e){var t=e.inline,a=e.type,n=void 0===a?"date":a,c=Object(Vt.a)(e,["inline","type"]),i=Object(r.useState)(!1),d=Object(S.a)(i,2),m=d[0],p=d[1],f=o.a.useRef(),b=(c.name,c.title),v=c.format,g=c.readOnly,h=void 0!==g&&g,k=(c.error,c.onChange),E=Object(Vt.a)(c,["name","title","format","readOnly","error","onChange"]);if(h){var j=c.value?P()(c.value).format(v||_n[n]):"";return o.a.createElement(En,{title:b,value:j})}var y=Un[n];return o.a.createElement(s.a,{utils:l.a,moment:P.a},o.a.createElement(y,Object.assign({autoOk:!0,open:m,onChange:function(e){f.current=e},PopoverProps:{anchorOrigin:{vertical:"bottom",horizontal:"left"},transformOrigin:{vertical:"top",horizontal:"left"}},disableToolbar:!0,variant:"inline"},t?{invalidDateMessage:""}:{},{style:Object(u.a)({width:"100%"},t?{margin:0}:{}),label:t?"":b,format:v||_n[n]},"time"!==n?{animateYearScrolling:!1}:{},E,{onKeyDown:function(e){40===e.keyCode&&p(!0)},onClose:function(){k(f.current),p(!1)},onOpen:function(){return p(!0)}})))},$n=a(462);function Gn(e){var t=e.inputRef,a=(e.onChange,e.thousandSeparator),n=void 0===a||a,r=Object(Vt.a)(e,["inputRef","onChange","thousandSeparator"]);return o.a.createElement($n.a,Object.assign({getInputRef:t,thousandSeparator:n},r))}function Kn(e){var t=e.type,a=void 0===t?"integer":t,n=e.title,c=e.onChange,i=e.value,l=void 0===i?0:i,s=e.readOnly,u=e.scale,d=void 0===u?2:u,m=e.customeFormat,p=e.onBlur,f=Object(Vt.a)(e,["type","title","onChange","value","readOnly","scale","customeFormat","onBlur"]),b=Object(r.useState)(l),v=Object(S.a)(b,2),g=v[0],h=v[1],k=Object(r.useCallback)((function(e){return Number(Number(e).toFixed("integer"===a?0:d))}),[a,d]);return o.a.useEffect((function(){h(k(l))}),[l,h,k]),s?o.a.createElement(En,{title:n,value:o.a.createElement(Gn,Object.assign({},m,{value:l,displayType:"text"})),customRender:!0}):o.a.createElement(yn,Object.assign({onChange:h,title:n,type:"number",value:"".concat(g),onBlur:function(e){c(k(e.target.value)),h(k(e.target.value)),p&&p(e)}},f))}Kn.defaultProps={readOnly:!1};var Jn=Kn,Qn={enum:["=","!=","isNull","notNull"],text:["like","notLike","isNull","notNull"],string:["=","!=","like","notLike","isNull","notNull"],integer:["=","!=",">=","<=",">","<","between","notBetween","isNull","notNull"],boolean:["isTrue","isFalse"]},Zn=[{name:"=",title:"equals"},{name:"!=",title:"not equal"},{name:">",title:"greater than"},{name:">=",title:"greater or equal"},{name:"<",title:"less than"},{name:"<=",title:"less or equal"},{name:"in",title:"in"},{name:"between",title:"between"},{name:"notBetween",title:"not Between"},{name:"notIn",title:"not in"},{name:"isNull",title:"is null"},{name:"notNull",title:"is not null"},{name:"like",title:"contains"},{name:"notLike",title:"doesn't contain"},{name:"isTrue",title:"true"},{name:"isFalse",title:"false"}];function er(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=[{name:e.targetName}];return e.targetSearch&&(n=e.targetSearch.map((function(e){return{name:e}}))),fe.search(e.target,Object(u.a)(Object(u.a)({},a),{},{limit:10,offset:0,fields:n.map((function(e){return e.name})),data:t?n.reduce((function(e,a){return Object(u.a)(Object(u.a)({},e),{},Object(M.a)({},a.name,t))}),{criteria:void 0,operator:void 0}):{}}))}var tr=Object(F.a)((function(e){return{group:{margin:"0px 8px",flexDirection:"row"},button:{margin:e.spacing(1)},label:{fontSize:"0.875rem"},list:{width:"100%",padding:0},listItem:{paddingLeft:0,paddingTop:0,paddingBottom:0},link:{margin:e.spacing(1)},textField:{margin:e.spacing(1),flexBasis:200},divider:{width:1,height:28,margin:4},criteriaValue:{width:"250px !important",alignItems:"normal"}}})),ar={title:"",operator:"and",isArchived:!1,isShare:!1,criteria:[{}],selected:!1},nr=function(e,t){e.map((function(e){return Qn[e]=t}))};function rr(e,t,a){var n=a.onChange,r=a.value,c=a.value2,i=a.classes,l=a.style,s=Object(Vt.a)(a,["onChange","value","value2","classes","style"]);return["=","!=",">",">=","<","<=","like","notLike"].includes(t)?o.a.createElement(e,Object.assign({name:"value",className:i.criteriaValue,onChange:function(e){return n({name:"value",value:e})},value:r},s)):["between","notBetween"].includes(t)?o.a.createElement(o.a.Fragment,null,o.a.createElement(e,Object.assign({name:"value",style:Object(u.a)({marginRight:8},l),className:i.criteriaValue,onChange:function(e){return n({name:"value",value:"".concat(e)})},value:r},s)),o.a.createElement(e,Object.assign({name:"value2",className:i.criteriaValue,onChange:function(e){return n({name:"value2",value:"".concat(e)})},value:c},s))):void 0}function or(e){var t=e.type,a=e.operator,n=e.onChange,r=e.value,c=e.classes,i=Object(Vt.a)(e,["type","operator","onChange","value","classes"]),l=Object(u.a)({value:r.value,value2:r.value2,onChange:n},i);switch(t){case"one_to_one":case"many_to_one":case"many_to_many":case"one_to_many":return function(e,t){var a=t.onChange,n=Object(Vt.a)(t,["onChange"]);if(["like","notLike"].includes(e))return o.a.createElement(yn,Object.assign({name:"value",onChange:function(e){return a({name:"value",value:e})},margin:"none",style:{width:250}},n));if(["in","notIn"].includes(e)){var r=n.field,c=n.value,i=r.targetName,l=function(){var e=Object(D.a)(N.a.mark((function e(t){var a,n,o;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.search,e.next=3,er(r,a);case 3:return n=e.sent,o=n.data,e.abrupt("return",o);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return o.a.createElement(Wn,{placeholder:"",fetchAPI:l,isSearchable:!0,optionLabelKey:i,optionValueKey:"id",name:"value",value:c,isMulti:!0,formControlStyle:{marginBottom:"5px",width:250},clearIndicatorStyle:{paddingLeft:"0 !important"},closeMenuOnScroll:!1,onChange:function(e){return a({name:"value",value:Array.isArray(e)?e.map((function(e){return Object(M.a)({id:e.id},i,e[i])})):e&&Object(M.a)({id:e.id},i,e[i])})}})}}(a,Object(u.a)({},l));case"date":case"time":case"dateTime":return rr(Xn,a,Object(u.a)(Object(u.a)({type:t},l),{},{format:"DD/MM/YYYY",margin:"none",classes:c}));case"integer":case"long":case"decimal":return rr(Jn,a,Object(u.a)(Object(u.a)({type:t},l),{},{margin:"none",classes:c}));case"enum":var s=i.field.selectionList.map((function(e){var t=e.title,a=e.value,n=e.data;return{name:n&&n.value||a,title:t}}));return rr(Pn,a,Object(u.a)({options:s,classes:c},l));default:return rr(yn,a,Object(u.a)(Object(u.a)({classes:c},l),{},{margin:"none"}))}}function cr(e){var t=e.className,a=e.onRemove,n=e.onChange,r=e.value,c=e.fields,i=e.classes,l=c.find((function(e){return e.name===r.fieldName})),s=(l&&l.type||"").toLowerCase();l&&l.selectionList&&(s="enum");var d=Zn.filter((function(e){return(Qn[s]||[]).includes(e.name)}));function m(e){var t=e.name,a=e.options,c=Object(Vt.a)(e,["name","options"]);return o.a.createElement(Pn,Object.assign({name:t,onChange:function(e){return n({name:t,value:e})},value:r[t],options:a},c))}return o.a.createElement("div",null,o.a.createElement(mt.a,{"aria-label":"close",className:t,onClick:a},o.a.createElement(on.a,null)),o.a.createElement(m,{name:"fieldName",options:c,className:"fieldName"}),o.a.createElement(m,{name:"operator",options:d,className:"operator"}),r.operator&&or(Object(u.a)({type:s,operator:r.operator,value:r,onChange:n,classes:i},{field:l})))}function ir(e){var t=e.customCriteria,a=e.setCustomCriteria,n=e.fields,r=e.clearFilters,c=e.applyFiltersClick,i=e.filterView,l=e.onSave,s=e.onDelete,d=tr(),m=o.a.useState(!1),p=Object(S.a)(m,2),f=p[0],b=p[1],v=t.id,g=t.operator,h=t.isArchived,k=t.criteria,E=t.title,j=t.isShare;function y(e){var n=e.target,r=n.name,o=n.value;a(Object(u.a)(Object(u.a)({},t),{},Object(M.a)({},r,o)))}function O(e,t,r){t instanceof P.a&&(t=P()(t).format("YYYY-MM-DD")),a(Object(On.a)((function(a){a.criteria[r][e]=t,"fieldName"===e&&(a.criteria[r].operator="",a.criteria[r].value=function(e){var t=n.find((function(t){return t.name===e})).type.toLowerCase();return["one_to_one","many_to_one","many_to_many","one_to_many"].includes(t)?null:["integer","long","decimal"].includes(t)?0:["date","time","dateTime"].includes(t)?null:""}(t))})))}function C(){var e=t.id,a=t.version,n=t.title,r=t.isShare,o=t.operator,c=t.criteria,s={shared:r||!1,title:n,filterCustom:JSON.stringify({operator:o,criteria:c}),filterView:i};e?(s.id=e,s.version=a):s.name=n.replace(" ","_").toLowerCase(),l(s)}return o.a.createElement(o.a.Fragment,null,o.a.createElement("div",null,o.a.createElement(Nn,{name:"operator",onChange:function(e){return y(e)},value:g,classes:d,className:d.group,data:[{label:"and",value:"and"},{label:"or",value:"or"}]}),o.a.createElement(Dn,{name:"isArchived",title:"Show Archived",value:h,onChange:function(e){var t=e.name;return y({target:{value:e.checked,name:t}})},classes:d,className:"archived"})),o.a.createElement("div",null,o.a.createElement(tn.a,{className:d.list},k.map((function(e,t){return o.a.createElement(en.a,{className:d.listItem,key:t},o.a.createElement(cr,{className:d.buttonLink,id:t,value:e,fields:n,onRemove:function(){return function(e){a(Object(On.a)((function(t){1===t.criteria.length?t.criteria=[{}]:t.criteria.splice(e,1)})))}(t)},onChange:function(e){return O(e.name,e.value,t)},classes:d}))})))),o.a.createElement("div",{className:d.buttonLink},o.a.createElement(Tn,{title:"Add filter",className:st()(d.link,"add-filter"),onClick:function(){a(Object(On.a)((function(e){e.criteria[e.criteria.length-1].operator&&e.criteria.push({})})))}}),o.a.createElement(sa.a,{className:d.divider}),o.a.createElement(Tn,{title:"Clear",className:st()(d.link,"clear"),onClick:function(){r(),a(ar)}}),o.a.createElement(sa.a,{className:d.divider}),o.a.createElement(Tn,{title:"Export",className:d.link}),o.a.createElement(sa.a,{className:d.divider}),o.a.createElement(Tn,{title:"Export full",className:d.link}),o.a.createElement(sa.a,{className:d.divider}),o.a.createElement(Tn,{title:"Apply",className:st()(d.link,"apply-filter"),onClick:function(){return c(t)}})),o.a.createElement(sa.a,{style:{marginTop:8}}),o.a.createElement("div",null,o.a.createElement(yn,{name:"title",value:E,onChange:function(e){return y({target:{value:e,name:"title"}})},className:st()(d.textField,"title")}),o.a.createElement(Dn,{title:"share",name:"isShare",value:j,onChange:function(e){var t=e.name;return y({target:{value:e.checked,name:t}})},className:"share"})),o.a.createElement("div",null,o.a.createElement(In,{classes:d,onClick:C,title:"Save",hide:""===E||null===E||void 0!==v,className:"save"}),o.a.createElement(In,{classes:d,onClick:C,title:"Update",hide:""===v||void 0===v||null===v}),o.a.createElement(In,{classes:d,onClick:function(){return b(!0)},title:"Delete",hide:""===v||void 0===v||null===v,className:"delete"}),o.a.createElement(za.a,{open:f,onClose:function(){return b(!1)},"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description"},o.a.createElement(Aa.a,{id:"alert-dialog-title"},"Question"),o.a.createElement(La.a,null,o.a.createElement(Ra.a,{id:"alert-dialog-description"},"Would you like to remove the filter?")),o.a.createElement(Ha.a,null,o.a.createElement(dt.a,{onClick:function(){return b(!1)},className:"cancel"},"Cancel"),o.a.createElement(dt.a,{onClick:function(){s(t),b(!1)},color:"primary",autoFocus:!0,className:"confirm-delete"},"ok")))))}nr(["long","decimal","date","time","datetime"],Qn.integer),nr(["one_to_many"],Qn.text),nr(["one_to_one","many_to_one","many_to_many"],["like","notLike","in","notIn","isNull"]);var lr=Object(F.a)((function(e){return{container:{width:200,zIndex:900,"& > div:last-child":{zIndex:1}},textField:{margin:e.spacing(1),flexBasis:200},divider:{width:1,height:28,margin:4},typography:{padding:e.spacing(1),fontWeight:600,flex:1},searchContainer:{display:"flex",flexDirection:"column","& div":{display:"flex",alignItems:"center"}},formControl:{margin:e.spacing(1)},group:{margin:"0px 8px",flexDirection:"row"},paper:{minWidth:480,boxShadow:"0 4px 12px rgb(0,0,0,0.4)"},link:{margin:e.spacing(1)},button:{margin:e.spacing(1)},list:{width:"100%",padding:0},listItem:{paddingLeft:0,paddingTop:0,paddingBottom:0},searchFilterContainer:{display:"flex",alignItems:"flex-start !important"},searchFilter:{flexDirection:"column",alignItems:"baseline !important",width:"100%"},filter:{flexDirection:"column",marginLeft:8,alignItems:"baseline !important"},inputIconBtn:{margin:0,padding:0,color:"#bbb"},label:{fontSize:"0.875rem"},filterLabel:{display:"flex",alignItems:"center",margin:"0 8px"},input:{"& input":{paddingTop:8,paddingBottom:8,fontSize:14},borderRadius:16}}}));function sr(e){try{return JSON.parse(e)}catch(t){return e}}function ur(e){var t=e.icon,a=e.title,n=e.classes;return o.a.createElement("div",{className:n.filterLabel},o.a.createElement(fn,{icon:t}),o.a.createElement(vt.a,{className:n.typography},a))}function dr(e){var t=e.filter,a=e.disabled,n=e.isChecked,r=e.onClick,c=e.onChange,i=e.classes,l=t.title;return o.a.createElement(en.a,{className:i.listItem},o.a.createElement(Dn,{name:l.replace(" ","_").toLowerCase(),value:n,onChange:function(e){c(e,t)},inline:!0,isDisabled:a}),o.a.createElement(Tn,{title:l,onClick:function(){return(!a||n)&&r(t,!n)},style:a&&!n?{color:"rgba(0, 0, 0, 0.54)"}:{}}))}function mr(e){var t=e.active,a=void 0===t?[]:t,n=e.data,r=void 0===n?[]:n,c=e.disabled,i=e.onClick,l=e.onChange,s=e.classes;return o.a.createElement("div",{className:s.filter},o.a.createElement(tn.a,{className:s.list},r.map((function(e){return o.a.createElement(dr,{key:e.id,filter:e,isChecked:a.includes(e.id),disabled:c,onClick:i,onChange:l,classes:s})}))))}function pr(e){var t=e.filters,a=e.value,n=void 0===a?[]:a,c=e.onOpen,i=e.onDelete,l=e.classes,s=e.onContentSearch,u=Object(r.useState)(""),d=Object(S.a)(u,2),m=d[0],p=d[1],f=o.a.useCallback((function(e){var t=e.target.value;s(t||m)}),[s,m]);return n.length>0?o.a.createElement(ln,{handleClick:c,value:n,onDelete:i,filters:t}):o.a.createElement(yn,{name:"search",margin:"none",placeholder:me("Search"),onChange:p,onKeyPress:function(e){return"Enter"===e.key&&f(e)},value:m,variant:"outlined",size:"small",InputProps:{className:l.input,endAdornment:o.a.createElement(an.a,{position:"end"},o.a.createElement(mt.a,{"aria-label":"open",onClick:c,className:l.inputIconBtn},o.a.createElement(nn.a,null)),o.a.createElement(mt.a,{"aria-label":"refresh",className:l.inputIconBtn,onClick:f},o.a.createElement(rn.a,null)))}})}function fr(e){var t=e.name,a=e.value,n=e.fields,c=e.filters,i=void 0===c?[]:c,l=e.domain,s=void 0===l?[]:l,m=e.onSave,p=e.onDelete,f=e.handleChange,b=e.onContentSearch,v=lr(),g=Object(r.useRef)(),h=o.a.useState(!1),k=Object(S.a)(h,2),E=k[0],j=k[1],y=o.a.useState([]),O=Object(S.a)(y,2),C=O[0],x=O[1],w=o.a.useState(!1),T=Object(S.a)(w,2),I=T[0],P=T[1],F=Object(r.useState)(ar),M=Object(S.a)(F,2),B=M[0],z=M[1],A=I?i.find((function(e){return e.id===C[0]})):null;function L(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=arguments.length>2?arguments[2]:void 0,n=i.filter((function(t){return e.includes(t.id)})),r=s.filter((function(t){return e.includes(t.id)})),o={criteria:[],operator:t.operator||"and"};if(a&&I)o.criteria=t.criteria;else{var c,l;if(n.length)(l=o.criteria).push.apply(l,Object(d.a)(n.map((function(e){var t=sr(e.filterCustom),a=t.criteria,n=void 0===a?[]:a;return{operator:t.operator,criteria:n}}))));(c=o.criteria).push.apply(c,Object(d.a)(t.criteria||[]))}return r.length&&(o._domains=r.map((function(e){return{title:e.title,domain:e.domain}}))),o}function R(e,t){var a=[];e.length>0&&(a=L(e,t)),f({selected:Object(d.a)(e),query:a})}function H(e,t){var a=!!e.domain,n=t&&e?[e.id]:[];P(!a&&t),x(n),R(n)}function V(e,t){var a=t.id,n=C.findIndex((function(e){return e===a}));n>-1?!e&&C.splice(n,1):e&&C.push(a),x(Object(d.a)(C))}function W(){f({}),x([]),P(!1),z(ar)}function Y(){return(Y=Object(D.a)(N.a.mark((function e(t){return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m(t);case 2:H(e.sent);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(r.useEffect)((function(){if(A){var e=sr(A.filterCustom),t=e.criteria,a=e.operator;z(Object(u.a)(Object(u.a)({},A),{},{operator:a,criteria:t.map((function(e){return Object(u.a)(Object(u.a)({},e),{},{operator:e.operator})}))}))}else z(ar)}),[z,A]),o.a.createElement("div",{className:v.container,ref:g},o.a.createElement(pr,{value:a&&a.selected,filters:i,onOpen:function(){j(!0)},onDelete:W,classes:v,onContentSearch:b}),o.a.createElement(gt.a,{open:E,anchorEl:g.current,placement:"bottom-start",disablePortal:!0},o.a.createElement(kt.a,{className:v.paper},o.a.createElement("div",{className:v.searchContainer},o.a.createElement("div",null,o.a.createElement(vt.a,{className:v.typography},me("Advanced Search")),o.a.createElement(mt.a,{"aria-label":"close",onClick:function(){j(!1)}},o.a.createElement(on.a,null))),o.a.createElement(sa.a,null),o.a.createElement("div",{className:v.searchFilterContainer},s.length>0&&o.a.createElement("div",{className:v.searchFilter},o.a.createElement(ur,{icon:"filter",title:"Filters",classes:v}),o.a.createElement(mr,{data:s,disabled:I,active:C,onClick:H,onChange:V,classes:v})),i.length>0&&o.a.createElement("div",{className:v.searchFilter},o.a.createElement(ur,{icon:"filter",title:"My Filter",classes:v}),o.a.createElement(mr,{data:i,disabled:I,active:C,onClick:H,onChange:V,classes:v}))),i.length>=1||s.length?o.a.createElement(sa.a,{style:{marginTop:8}}):"",o.a.createElement(ir,{fields:n,clearFilters:W,applyFiltersClick:function(e){C.length>0?R(C.length?Object(d.a)(C):[null]):e&&e.criteria.length&&function(e){f({selected:[null],query:L(C,e,!0)})}(Object(u.a)(Object(u.a)({},e),{},{criteria:(e.criteria||[]).filter((function(e){return e.fieldName&&e.operator}))})),j(!1)},filterView:t,onSave:function(e){return Y.apply(this,arguments)},onDelete:function(e){p(e),W()},customCriteria:B,setCustomCriteria:z})))))}var br=Object(F.a)((function(e){return{paper:{display:"flex",alignItems:"center"},main:{display:"flex",alignItems:"center",justifyContent:"center"},content:Object(M.a)({width:"50%",height:"100%"},e.breakpoints.only("xs"),{width:"100%"})}}));function vr(e){var t=e.open,a=e.handleFullScreenClose,n=e.children,r=e.toolbar,c=br();return o.a.createElement(za.a,{fullScreen:!0,open:t,onClose:a,classes:{paper:c.paper}},r,o.a.createElement("div",{className:c.main,onClick:a},o.a.createElement("div",{className:c.content,onClick:function(e){return e.stopPropagation()}},n)))}Object(F.a)({input:{fontSize:14,color:"black"},label:{fontSize:14},iconSelected:{fontSize:20},chip:{marginLeft:5},deleteIcon:{color:"white"}});var gr=a(871);a(887),Object(F.a)((function(e){return{typography:{fontSize:8,fontWeight:"bold"},circularProgress:{padding:3,color:"#0275D8"}}}));var hr=o.a.createContext();function kr(e){var t=e.children,a=Object(Vt.a)(e,["children"]);return o.a.createElement(hr.Provider,{value:a},t)}function Er(){return o.a.useContext(hr)}var jr=Object(F.a)((function(e){var t;return{paper:function(t){var a=t.collapsed;return{padding:e.spacing(1),transition:"transform 0.3s, margin 0.2s",boxShadow:"none",width:"100%",borderTop:a?"none":"1px solid #E8ECEE",borderBottom:a?"none":"1px solid #E8ECEE",borderRadius:"0",position:"relative"}},section:Object(M.a)({display:"flex",alignItems:"center",position:"sticky",left:0,width:"fit-content",background:"white",zIndex:200},e.breakpoints.down("xs"),{width:"100%"}),input:Object(M.a)({padding:e.spacing(.5),border:"1px solid transparent",width:"100%","&:hover":{borderColor:"#b4b6b8"}},e.breakpoints.only("xs"),{maxWidth:"max-content"}),arrowBtn:{color:"black",padding:e.spacing(0,1.5)},dragHandle:(t={color:"#b4b6b8",fontSize:"1.2rem",cursor:"grab",visibility:"hidden"},Object(M.a)(t,"$paper:hover &",{visibility:"visible"}),Object(M.a)(t,e.breakpoints.down("xs"),{visibility:"visible"}),t),actions:Object(M.a)({display:"flex",visibility:"hidden","$paper:hover &":{visibility:"visible"}},e.breakpoints.down("xs"),{visibility:"visible",marginLeft:"auto"}),action:{padding:2.5,color:"#b4b6b8"}}}));function yr(e){var t=e.column,a=e.disabled,n=e.disableColumnCollapse,c=e.disableColumnDelete,i=e.index,l=e.isCustom,s=e.ColumnHeader,d=Object(Vt.a)(e,["column","disabled","disableColumnCollapse","disableColumnDelete","index","isCustom","ColumnHeader"]),m=Er(),p=m.onColumnDelete,f=m.onColumnUpdate,b=m.onColumnToggle,v=m.selectedProject,g=m.openTaskInDrawer,h=m.addNewTask,k=t.collapsed,E=jr({collapsed:k}),j=Object(r.useState)(t.name),y=Object(S.a)(j,2),O=y[0],C=y[1],x=o.a.useState(!1),w=Object(S.a)(x,2),T=w[0],I=w[1],P=v||{},F=P.isShowPriority,M=void 0!==F&&F,B=P.isShowStatus,z=void 0!==B&&B,A=P.isShowProgress,L=void 0!==A&&A,R=P.isShowTaskCategory,H=void 0!==R&&R,V=t.records&&t.records.length,W=g?1:Boolean(M)+Boolean(z)+Boolean(L)+Boolean(H),Y=o.a.useCallback((function(e){I(!0)}),[]),q=o.a.useCallback((function(e){e&&e.stopPropagation(),I(!1)}),[]),U=o.a.useCallback((function(){q(),p({column:t})}),[p,t,q]),_=o.a.useCallback((function(e){C(e.target.value)}),[]),X=o.a.useCallback(Object(D.a)(N.a.mark((function e(){var a,n;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=O,t.name===O&&""!==O){e.next=7;break}return""===O&&(a=me("Untitled Section"),C(a)),e.next=5,Ie(Object(u.a)(Object(u.a)({},t),{},{name:a}));case 5:n=e.sent,f({column:Object(u.a)(Object(u.a)({},t),n)});case 7:case"end":return e.stop()}}),e)}))),[f,t,O]);if(Object(r.useEffect)((function(){C(t.name||"")}),[t.name]),l)return o.a.createElement(s,Object.assign({},d,{style:{width:"100%"}}));var $=k?Kt.a:_t.a;return o.a.createElement(kt.a,Object.assign({},d,{className:st()(E.paper,d.className),onClick:function(e){"INPUT"===document.activeElement.tagName&&"INPUT"!==e.target.tagName&&document.activeElement.blur()}}),o.a.createElement("div",{className:E.section},o.a.createElement($t.a,{className:E.dragHandle}),!n&&o.a.createElement(mt.a,{className:E.arrowBtn,onClick:function(){return b({column:t})}},o.a.createElement($,null)),o.a.createElement(Wt.a,{name:"name",value:O,className:E.input,placeholder:me("Add Section"),InputProps:{disableUnderline:!0},onChange:_,onBlur:X}),o.a.createElement("div",{className:E.actions},o.a.createElement(mt.a,{className:E.action,onClick:function(e){return h(e,i)}},o.a.createElement(Nt.a,null)),!a&&!c&&o.a.createElement(mt.a,{className:E.action,onClick:Y},o.a.createElement(qt.a,null)))),o.a.createElement("div",{style:{minWidth:216*W}}),o.a.createElement(Wa,{open:T,title:me("Delete Section"),content:me(V?"Cannot delete section with tasks":"TaskEditor.deleteRecordConfirm"),disabled:Boolean(V),onClose:q,onConfirm:U}))}yr.defaultProps={column:{},ColumnHeader:function(e){var t=e.title;return o.a.createElement(vt.a,{variant:"subtitle1",style:{fontSize:"1.08rem"}},o.a.createElement("b",null,t))}};var Or=a(266),Cr=a(465),xr=a.n(Cr),wr=a(464),Sr=a.n(wr),Tr=a(255),Nr=a.n(Tr);var Dr=Object(F.a)((function(e){return{input:{fontSize:14,color:"black"},container:Object(M.a)({minWidth:200},e.breakpoints.only("xs"),{minWidth:150}),label:{fontSize:14},iconSelected:{fontSize:"0.75rem",color:"white",margin:"0px 8px",height:28,width:28}}}));function Ir(e){var t=e.model,a=e.optionLabel,n=void 0===a?"name":a,c=e.index,i=e.value,l=void 0===i?[]:i,s=e.update,m=e.criteriaIds,p=e.operator,f=void 0===p?"and":p,b=e.classes,v=void 0===b?{}:b,g=e.className,h=e.disableClearable,k=e.TextFieldProps,E=void 0===k?{}:k,j=e.options,y=e.criteria,O=e.getAvatarColor,C=Object(r.useState)(!1),x=Object(S.a)(C,2),w=x[0],T=x[1],N=Object(r.useState)([]),D=Object(S.a)(N,2),I=D[0],P=D[1],F=Object(r.useState)(null),M=Object(S.a)(F,2),B=M[0],z=M[1],A=Dr(),L=Object(r.useCallback)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",a=[];e&&a.push({fieldName:n,operator:"like",value:e}),y&&y&&y.map((function(e){return a.push(e)}));var r={criteria:a,operator:f};return fe.search(t,{fields:["name","fullName"],data:r,limit:10,offset:0}).then((function(e){var t=e.data;t&&t.length&&P(Object(d.a)(t))}))}),[t,f,n,y]);return function(e,t){var a=o.a.useRef(!1);o.a.useEffect((function(){if(a.current){var n=setTimeout((function(){return e()}),t);return function(){return clearTimeout(n)}}a.current=!0}),[e,t])}(o.a.useCallback((function(){B&&L(B,m)}),[L,B,m]),500),Object(r.useEffect)((function(){w||P([])}),[w]),Object(r.useEffect)((function(){w&&(j&&j.length>0?P(Object(d.a)(j)):L(null,m))}),[L,w,m,j]),o.a.createElement(ba.a,{classes:Object(u.a)({inputFocused:A.input,clearIndicator:A.input,popupIndicator:A.input,disabled:A.disabled},v),className:st()(A.container,g),value:l,getOptionSelected:function(e,t){return e.id===t.id},size:"small",key:c,open:w,onOpen:function(e){e&&e.stopPropagation(),T(!0)},onClose:function(e){e&&e.stopPropagation(),T(!1)},options:I,disableCloseOnSelect:!0,disableClearable:h,clearOnEscape:!0,autoComplete:!0,onChange:function(e,t){s(t),T(!1)},getOptionLabel:function(e){return e[n]||""},renderOption:function(e,t){t.selected;return o.a.createElement(o.a.Fragment,null,o.a.createElement(la.a,{className:A.iconSelected,style:{backgroundColor:O(e.id),border:"1px solid ".concat(O(e.id))}},e&&(e[n].substring(0,2)||"").toUpperCase()),o.a.createElement(vt.a,{style:{fontSize:14}},e[n]))},onInputChange:function(e,t,a){"reset"!==a&&z(t)},renderInput:function(e){return o.a.createElement(Wt.a,Object.assign({},e,{variant:"outlined",fullWidth:!0},E,e,{InputProps:Object(u.a)(Object(u.a)(Object(u.a)({},E.InputProps||{}),e.InputProps||{}),{},{onClick:function(e){return e&&e.stopPropagation()},startAdornment:l&&o.a.createElement(an.a,{position:"start"},o.a.createElement(la.a,{className:A.iconSelected,style:{backgroundColor:O(l.id),border:"1px solid ".concat(O(l.id))}},l&&l[n]&&(l[n].substring(0,2)||"").toUpperCase()))}),inputProps:Object(u.a)(Object(u.a)({},e.inputProps||{}),{},{onClick:function(t){t&&t.stopPropagation(),e.inputProps&&e.inputProps.onClick&&e.inputProps.onClick(t)}}),InputLabelProps:{className:A&&A.label},className:g}))}})}var Pr=a(254),Fr=a.n(Pr),Mr=Object(F.a)((function(e){return{input:Object(M.a)({padding:4,"&:hover":{border:"1px solid #b4b6b8"},border:"1px solid transparent",width:"100%",minWidth:215,marginRight:2},e.breakpoints.only("xs"),{minWidth:"calc(100% - 36px)"}),cardTask:Object(M.a)({marginLeft:e.spacing(5),display:"flex",width:"100%",alignItems:"center"},e.breakpoints.only("xs"),{marginLeft:e.spacing(1),width:"fit-content"}),checkedIcon:{color:"#b4b6b8","&:hover":{color:"#25e8c8 !important"}},checkIconButton:{padding:e.spacing(1)}}}));function Br(e){var t=e.record,a=e.onEdit,n=Mr(),c=Object(r.useState)({name:t.name,status:t.status}),i=Object(S.a)(c,2),l=i[0],s=i[1],d=Object(r.useState)(!1),m=Object(S.a)(d,2),p=m[0],f=m[1],b=Er().selectedProject,v=o.a.useCallback((function(e){e.stopPropagation();var t=e.target,a=t.name,n=t.value;s((function(e){return Object(u.a)(Object(u.a)({},e),{},Object(M.a)({},a,n))}))}),[]),g=o.a.useCallback(function(){var e=Object(D.a)(N.a.mark((function e(n){var r,o;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n&&n.stopPropagation(),r=p?t.statusBeforeComplete:ue(b),s((function(e){return Object(u.a)(Object(u.a)({},e),{},{status:r})})),e.next=5,Oe(Object(u.a)(Object(u.a)({},t),{},{status:r,statusBeforeComplete:t.status}));case 5:(o=e.sent)&&a(Object(u.a)(Object(u.a)({},o),{},{"priority.technicalTypeSelect":t["priority.technicalTypeSelect"]}));case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[a,t,p,b]),h=o.a.useCallback(function(){var e=Object(D.a)(N.a.mark((function e(n){var r;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.stopPropagation(),t.name===l.name){e.next=6;break}return e.next=4,Oe(Object(u.a)(Object(u.a)({},t),{},{name:l.name}));case 4:r=e.sent,a(Object(u.a)(Object(u.a)({},r),{},{"priority.technicalTypeSelect":l["priority.technicalTypeSelect"]}));case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[l,a,t]);return Object(r.useEffect)((function(){s(t);var e=de(t,b);f(e)}),[t,b]),o.a.createElement("div",{className:n.cardTask},o.a.createElement(mt.a,{size:"small",onClick:g,className:n.checkIconButton},p?o.a.createElement(Fr.a,{fontSize:"small",style:{color:"#25e8c8"},className:n.checkedIcon}):o.a.createElement(xt.a,{fontSize:"small",style:{color:"#b4b6b8"},className:n.checkedIcon})),o.a.createElement(Wt.a,{onClick:function(e){return e.stopPropagation()},onChange:v,onBlur:h,name:"name",value:l.name,InputProps:{disableUnderline:!0},className:n.input},t.name))}var zr=Object(F.a)((function(e){return{progressSelect:{paddingBlock:"9.5px"}}}));function Ar(e){var t=e.options,a=Object(Vt.a)(e,["options"]),n=o.a.useMemo((function(){var e=X;return t.map((function(t){return Object(u.a)(Object(u.a)({},t),{},{$background:e[t.technicalTypeSelect]})}))}),[t]);return o.a.createElement(Za,Object.assign({name:"priority",options:n},a))}var Lr=[0,10,20,30,40,50,60,70,80,90,100];function Rr(e){var t=e.t,a=Object(Vt.a)(e,["t"]),n=zr();return o.a.createElement(Ga.a,Object.assign({native:!0,classes:{select:n.progressSelect},inputProps:{name:"progressSelect",id:"outlined-progressSelect"}},a),o.a.createElement("option",{"aria-label":t("TaskEditor.none"),value:""}),Lr.map((function(e){return o.a.createElement("option",{key:e,value:e},e," %")})))}a(609),a(610);var Hr=a(880),Vr=a(816),Wr=Object(F.a)((function(){return{paper:{minWidth:"50%",padding:15}}}));function Yr(e){var t=e.open,a=e.handleClose,n=e.task,c=e.attachmentList,i=e.onCardAdd,l=e.openSnackbar,s=Object(r.useState)({name:""}),d=Object(S.a)(s,2),m=d[0],p=d[1],f=o.a.useState({description:!1,parentTask:!1,attachments:!1,projectTaskSection:!0,taskEndDate:!1,priority:!1,status:!1,taskDate:!0,progressSelect:!1,projectTaskCategory:!1}),b=Object(S.a)(f,2),v=b[0],g=b[1],h=Wr(),k=function(e){g(Object(u.a)(Object(u.a)({},v),{},Object(M.a)({},e.target.name,e.target.checked))),e.target.checked&&p(Object(u.a)(Object(u.a)({},m),{},Object(M.a)({},e.target.name,n[e.target.name])))},E=function(){var e=Object(D.a)(N.a.mark((function e(t,a){var n;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={fileName:t.fileName,metaFile:t.metaFile,relatedId:a,relatedModel:"com.axelor.apps.project.db.ProjectTask"},e.next=3,Je(n);case 3:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),j=function(){var e=Object(D.a)(N.a.mark((function e(){var t;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return v.taskDate||p(Object(u.a)(Object(u.a)({},m),{},{taskDate:P()()})),v.projectTaskSection||p(Object(u.a)(Object(u.a)({},m),{},{projectTaskSection:null})),e.next=4,je(Object(u.a)({},m));case 4:(t=e.sent)&&(v.attachments&&c&&c.forEach((function(e){E(e,t.id)})),l({message:"".concat(m.name," ").concat(me("TaskEditor.projectCreateSuccess")),severity:"success",autoHideDuration:3e3}),i(t)),a();case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(r.useEffect)((function(){n&&p({name:"(COPY) ".concat(n.name),assignedTo:n.assignedTo,project:n.project,projectTaskSection:n.projectTaskSection,taskDate:n.taskDate})}),[n]),o.a.createElement(za.a,{open:t,onClose:a,"aria-labelledby":"form-dialog-title",classes:{paper:h.paper}},o.a.createElement(Aa.a,{id:"form-dialog-title"},me("Duplicate Task")),o.a.createElement(La.a,null,o.a.createElement(Hr.a,null,o.a.createElement(Wt.a,{style:{width:"100%",marginBottom:15},placeholder:"Task name",variant:"outlined",value:m.name,name:"name",onChange:function(e){p(Object(u.a)(Object(u.a)({},m),{},Object(M.a)({},e.target.name,e.target.value)))}})),o.a.createElement(Hr.a,null,o.a.createElement(vt.a,{variant:"caption"},me("Include")),o.a.createElement(Vr.a,null,_.map((function(e,t){return o.a.createElement(xn.a,{key:t,control:o.a.createElement(Sn.a,{color:"primary",checked:v[e.name],onChange:k,name:e.name}),label:e.label})}))))),o.a.createElement(Ha.a,null,o.a.createElement(dt.a,{onClick:j,variant:"outlined",color:"primary",style:{textTransform:"none"}},me("Create New Task"))))}var qr=Object(F.a)((function(e){var t;return{container:{border:function(e){return e.selected?"1px solid #058EE3":"inherit"}},title:{display:"flex",alignItems:"center",flex:1},details:Object(M.a)({visibility:"hidden",display:"flex",alignItems:"center","$cardItem:hover &":{visibility:"visible"}},e.breakpoints.down("xs"),{visibility:"visible"}),dragHandle:Object(M.a)({color:"#b4b6b8",fontSize:"1.2rem",cursor:"grab",visibility:"hidden","$cardItem:hover &":{visibility:"visible"}},e.breakpoints.down("xs"),{visibility:"visible"}),card:{cursor:"pointer","&:hover":{backgroundColor:"#f5f8fa"}},cardItem:Object(M.a)({display:"flex",alignItems:"center",justifyContent:"space-between",borderBottom:"1px solid #E8ECEE",borderRadius:0,boxShadow:"none",position:"relative",backgroundColor:function(e){return e.selected?"#EDF8FF":"white"},"&:hover":{backgroundColor:"#f5f8fa"}},e.breakpoints.down("xs"),{backgroundColor:"#f5f8fa !important"}),spacer:{paddingLeft:8,paddingRight:8},stickyElement:(t={backgroundColor:function(e){return e.selected?"#EDF8FF":"white"},"&:hover":{backgroundColor:"#f5f8fa"}},Object(M.a)(t,e.breakpoints.down("xs"),{backgroundColor:"#f5f8fa !important"}),Object(M.a)(t,"minWidth",430),Object(M.a)(t,"width","100%"),Object(M.a)(t,"display","flex"),Object(M.a)(t,"alignItems","center"),Object(M.a)(t,"position","sticky"),Object(M.a)(t,"zIndex",300),Object(M.a)(t,"left",0),Object(M.a)(t,"padding","0px 8px"),Object(M.a)(t,"background","white"),Object(M.a)(t,"justifyContent","space-between"),Object(M.a)(t,e.breakpoints.only("xs"),{minWidth:"100%"}),t),contextMenuItem:{fontSize:14},contextIcon:{color:"#a7a9ac",marginRight:10},contextSVGIcon:{fill:"#6f7782",height:16,width:16,marginRight:10},selection:{minWidth:200},select:Object(M.a)({marginBottom:0,minWidth:200,textAlign:"left"},e.breakpoints.only("xs"),{minWidth:150}),formControl:Object(M.a)({minWidth:200},e.breakpoints.only("xs"),{minWidth:150}),chip:{height:20,color:"white",maxWidth:55,marginRight:3},picker:{width:"100%",marginTop:0,padding:0},inputClassName:{padding:"2px 10.5px 2px 10.5px"}}})),Ur=o.a.forwardRef((function(e,t){var a=e.onDelete,n=e.record,c=e.style,i=(e.canDelete,e.canEdit,e.onEdit),l=(e.disabled,e.dragHandleProps),s=void 0===l?{}:l,d=Object(Vt.a)(e,["onDelete","record","style","canDelete","canEdit","onEdit","disabled","dragHandleProps"]),m=Object(r.useState)(!1),p=Object(S.a)(m,2),f=p[0],b=p[1],v=Object(r.useState)(!1),g=Object(S.a)(v,2),h=g[0],k=g[1],E=Object(r.useState)(!1),j=Object(S.a)(E,2),y=j[0],O=j[1],C=Object(r.useState)([]),x=Object(S.a)(C,2),w=x[0],T=x[1],I=Er(),F=I.getAvatarColor,B=I.selectedProject,z=I.tasks,A=I.openTaskInDrawer,L=void 0!==A&&A,R=I.selectedTaskId,H=I.copyToClipboard,V=I.language,W=I.onCardAdd,Y=I.openSnackbar,q=I.toggleTaskDrawer,U=I.toggleTaskFullScreen,_=Object(r.useMemo)((function(){return z.find((function(e){return e.id===R}))}),[z,R]),X=(B||{}).isShowProgress,$=void 0!==X&&X,G=z&&z.filter((function(e){return e.parentTask&&e.parentTask.id===n.id})).length,K=qr({selected:(n&&n.id)===(_&&_.id)}),J=Object(Ot.a)("(max-width:600px)"),Q=[{name:"markComplete",label:h?"Mark Incomplete":"Mark Complete",icon:xt.a},{name:"viewDetails",label:"View details",icon:Sr.a},{name:"fullScreen",label:"Full screen",iconType:"svg",icon:o.a.createElement("svg",{className:K.contextSVGIcon,focusable:"false",viewBox:"0 0 32 32"},o.a.createElement("path",{d:"M13.7,19.7L5.4,28H13c0.6,0,1,0.4,1,1s-0.4,1-1,1H3c-0.6,0-1-0.4-1-1V19c0-0.6,0.4-1,1-1s1,0.4,1,1v7.6l8.3-8.3c0.4-0.4,1-0.4,1.4,0S14.1,19.3,13.7,19.7z M29,2H19c-0.6,0-1,0.4-1,1s0.4,1,1,1h7.6l-8.3,8.3c-0.4,0.4-0.4,1,0,1.4c0.2,0.2,0.5,0.3,0.7,0.3s0.5-0.1,0.7-0.3L28,5.4V13c0,0.6,0.4,1,1,1s1-0.4,1-1V3C30,2.4,29.6,2,29,2z"}))},{name:"copyTaskLink",label:"Copy task link",iconType:"svg",icon:o.a.createElement("svg",{className:K.contextSVGIcon,focusable:"false",viewBox:"0 0 32 32"},o.a.createElement("path",{d:"M9,32c-2.3,0-4.6-0.9-6.4-2.6c-3.5-3.5-3.5-9.2,0-12.7l4-4c0.4-0.4,1-0.4,1.4,0c0.4,0.4,0.4,1,0,1.4l-4,4c-2.7,2.7-2.7,7.2,0,9.9s7.2,2.7,9.9,0l4-4c2.7-2.7,2.7-7.2,0-9.9c-0.8-0.8-1.8-1.4-2.9-1.7c-0.5-0.2-0.8-0.7-0.7-1.3c0.2-0.5,0.7-0.8,1.3-0.7c1.4,0.4,2.7,1.2,3.7,2.2c3.5,3.5,3.5,9.2,0,12.7l-4,4C13.6,31.1,11.3,32,9,32z M16.6,21.6c-0.1,0-0.2,0-0.3,0c-1.4-0.4-2.7-1.2-3.7-2.2c-1.7-1.7-2.6-4-2.6-6.4s0.9-4.7,2.6-6.4l4-4c3.5-3.5,9.2-3.5,12.7,0s3.5,9.2,0,12.7l-4,4c-0.4,0.4-1,0.4-1.4,0s-0.4-1,0-1.4l4-4c2.7-2.7,2.7-7.2,0-9.9S20.7,1.3,18,4l-4,4c-1.3,1.4-2,3.1-2,5s0.7,3.6,2.1,5c0.8,0.8,1.8,1.4,2.9,1.7c0.5,0.2,0.8,0.7,0.7,1.3C17.5,21.4,17.1,21.6,16.6,21.6z"}))},{name:"duplicateTask",label:"Duplicate task",iconType:"svg",icon:o.a.createElement("svg",{className:K.contextSVGIcon,focusable:"false",viewBox:"0 0 32 32"},o.a.createElement("path",{d:"M27,32H13c-2.8,0-5-2.2-5-5V13c0-2.8,2.2-5,5-5h14c2.8,0,5,2.2,5,5v14C32,29.8,29.8,32,27,32z M13,10c-1.7,0-3,1.3-3,3v14  c0,1.7,1.3,3,3,3h14c1.7,0,3-1.3,3-3V13c0-1.7-1.3-3-3-3H13z M6,23c0-0.6-0.4-1-1-1c-1.7,0-3-1.3-3-3V5c0-1.7,1.3-3,3-3h14  c1.7,0,3,1.3,3,3c0,0.6,0.4,1,1,1s1-0.4,1-1c0-2.8-2.2-5-5-5H5C2.2,0,0,2.2,0,5v14c0,2.8,2.2,5,5,5C5.6,24,6,23.6,6,23z"}))},{name:"copyTaskName",label:"Copy task name",iconType:"svg",icon:o.a.createElement("svg",{className:K.contextSVGIcon,focusable:"false",viewBox:"0 0 32 32"},o.a.createElement("path",{d:"M9,32c-2.3,0-4.6-0.9-6.4-2.6c-3.5-3.5-3.5-9.2,0-12.7l4-4c0.4-0.4,1-0.4,1.4,0c0.4,0.4,0.4,1,0,1.4l-4,4c-2.7,2.7-2.7,7.2,0,9.9s7.2,2.7,9.9,0l4-4c2.7-2.7,2.7-7.2,0-9.9c-0.8-0.8-1.8-1.4-2.9-1.7c-0.5-0.2-0.8-0.7-0.7-1.3c0.2-0.5,0.7-0.8,1.3-0.7c1.4,0.4,2.7,1.2,3.7,2.2c3.5,3.5,3.5,9.2,0,12.7l-4,4C13.6,31.1,11.3,32,9,32z M16.6,21.6c-0.1,0-0.2,0-0.3,0c-1.4-0.4-2.7-1.2-3.7-2.2c-1.7-1.7-2.6-4-2.6-6.4s0.9-4.7,2.6-6.4l4-4c3.5-3.5,9.2-3.5,12.7,0s3.5,9.2,0,12.7l-4,4c-0.4,0.4-1,0.4-1.4,0s-0.4-1,0-1.4l4-4c2.7-2.7,2.7-7.2,0-9.9S20.7,1.3,18,4l-4,4c-1.3,1.4-2,3.1-2,5s0.7,3.6,2.1,5c0.8,0.8,1.8,1.4,2.9,1.7c0.5,0.2,0.8,0.7,0.7,1.3C17.5,21.4,17.1,21.6,16.6,21.6z"}))},{name:"deleteTask",label:"Delete Task",icon:Nr.a}],Z=o.a.useCallback((function(e){b(!0)}),[]),ee=o.a.useCallback((function(e){e&&e.stopPropagation(),b(!1)}),[]),te=o.a.useCallback((function(e){e.stopPropagation(),ee(),a()}),[a,ee]),ae=o.a.useCallback(function(){var e=Object(D.a)(N.a.mark((function e(t,a,r){var o,c;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=Object(u.a)(Object(u.a)({},n),{},Object(M.a)({},t,a)),"status"===t&&(o.statusBeforeComplete=n.status),"priority"===t&&(o["priority.technicalTypeSelect"]=a.technicalTypeSelect),i(o),e.next=6,Oe(o);case 6:c=e.sent,i(Object(u.a)(Object(u.a)({},c),{},{"priority.technicalTypeSelect":o["priority.technicalTypeSelect"]}));case 8:case"end":return e.stop()}}),e)})));return function(t,a,n){return e.apply(this,arguments)}}(),[i,n]),ne=P()().format("YYYY-MM-DD"),re=_&&_.taskDate&&P()(_.taskDate).format("YYYY-MM-DD"),oe=_&&_.taskEndDate&&P()(_.taskEndDate).format("YYYY-MM-DD"),ce=re===ne||oe===ne?"green":re>ne||oe>ne?"#707883":"red",ie=o.a.useCallback(function(){var e=Object(D.a)(N.a.mark((function e(t){var a,r;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t&&t.stopPropagation(),a=h?n.statusBeforeComplete:ue(B),e.next=4,Oe(Object(u.a)(Object(u.a)({},n),{},{status:a,statusBeforeComplete:n.status}));case 4:(r=e.sent)&&i(Object(u.a)(Object(u.a)({},r),{},{"priority.technicalTypeSelect":n["priority.technicalTypeSelect"]}));case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[i,B,n,h]);var le=function(e){var t=P()(e);return V?(t.locale(V),t):t},se=function(e){O(e)};return Object(r.useEffect)((function(){var e=de(n,B);k(e)}),[n,B]),Object(r.useEffect)((function(){y&&tt(n.id).then((function(e){return T(e||[])}))}),[y,n.id]),o.a.createElement("div",{className:K.container},y&&o.a.createElement(Yr,{open:y,handleClose:function(){return se(!1)},task:n,attachmentList:w,onCardAdd:W,openSnackbar:Y}),o.a.createElement(Or.b,{id:"".concat(n.id),name:n.name,holdToDisplay:1e3},o.a.createElement(kt.a,Object.assign({ref:t},d,{className:st()(K.cardItem,K.card),style:c}),o.a.createElement("div",{className:K.stickyElement,style:{width:L?"50%":"100%"},onClick:function(){return q(!0,n.id)}},o.a.createElement("div",{className:K.title},o.a.createElement("div",s,o.a.createElement($t.a,{className:K.dragHandle})),o.a.createElement("div",{style:{display:"flex",alignItems:"center",flexGrow:J?1:0}},o.a.createElement(Br,{record:n,onEdit:i}),G>0&&o.a.createElement(mt.a,{style:{padding:10,marginLeft:J?"auto":0}},o.a.createElement("span",{style:{fontSize:10.5,color:"#707883"}},G),o.a.createElement("svg",{focusable:"false",viewBox:"0 0 32 32",style:{fill:"#6f7782",height:16,width:16}},o.a.createElement("path",{d:"M25,20c-2.4,0-4.4,1.7-4.9,4H11c-3.9,0-7-3.1-7-7v-5h16.1c0.5,2.3,2.5,4,4.9,4c2.8,0,5-2.2,5-5s-2.2-5-5-5c-2.4,0-4.4,1.7-4.9,4H4V3c0-0.6-0.4-1-1-1S2,2.4,2,3v14c0,5,4,9,9,9h9.1c0.5,2.3,2.5,4,4.9,4c2.8,0,5-2.2,5-5S27.8,20,25,20z M25,8c1.7,0,3,1.3,3,3s-1.3,3-3,3s-3-1.3-3-3S23.3,8,25,8z M25,28c-1.7,0-3-1.3-3-3s1.3-3,3-3s3,1.3,3,3S26.7,28,25,28z"}))))),o.a.createElement("div",{style:{display:"flex",alignItems:"center"}},o.a.createElement("div",{className:K.details},!J&&o.a.createElement(vt.a,{variant:"caption",style:{color:"#707883"}},me("Details")),o.a.createElement(xr.a,{className:K.dragHandle})),L&&_&&n&&n.id===_.id&&o.a.createElement("div",{style:{display:"flex"}},o.a.createElement(vt.a,{variant:"caption",style:{display:"flex",alignItems:"center",justifyContent:"center",padding:"0px 5px",whiteSpace:"nowrap",color:ce,textTransform:"capitalize"}},_.taskDate&&le(_.taskDate).format("DD MMM"),_.taskEndDate&&" - ".concat(le(_.taskEndDate).format("DD MMM"))),_.assignedTo&&o.a.createElement(vt.a,{variant:"caption"},o.a.createElement(la.a,{"aria-label":"recipe",style:{backgroundColor:F(n.assignedTo&&n.assignedTo.id),fontSize:"0.75rem",height:25,width:25}},_.assignedTo&&_.assignedTo.fullName&&(_.assignedTo.fullName.substring(0,2)||"").toUpperCase()))))),o.a.createElement("div",{style:{display:"flex",width:"fit-content",alignItems:"center"}},!L&&!J&&o.a.createElement(o.a.Fragment,null,o.a.createElement("div",{className:K.spacer},o.a.createElement(Ir,{model:"com.axelor.auth.db.User",title:me("Assigned To"),optionLabel:"fullName",name:"assignedTo",value:n.assignedTo,update:function(e,t){return ae("assignedTo",e,t)},options:B.membersUserSet,getAvatarColor:F})),o.a.createElement("div",{className:K.spacer},o.a.createElement(_a,{className:K.picker,inputClassName:K.inputClassName,value:n.taskDate,name:"taskDate",label:me("TaskEditor.taskDate"),onChange:function(e,t){return ae("taskDate",e,t)}})),o.a.createElement("div",{className:K.spacer},o.a.createElement(_a,{className:K.picker,inputClassName:K.inputClassName,value:n.taskEndDate,name:"taskEndDate",label:"Task end",onChange:function(e,t){return ae("taskEndDate",e,t)}})),$&&o.a.createElement("div",{className:K.spacer},o.a.createElement($a.a,{variant:"outlined",className:K.formControl},o.a.createElement(Rr,{t:me,className:K.select,value:n.progressSelect,onChange:function(e){return ae("progressSelect",e.target.value,e)},size:"small"}))))),o.a.createElement(Wa,{open:f,onClose:ee,onConfirm:te,title:me("Delete Task")}))),!J&&o.a.createElement(Or.a,{id:"".concat(n.id)},Q.map((function(e,t){return o.a.createElement(o.a.Fragment,{key:e.name},o.a.createElement(Or.c,{onClick:function(t){return function(e,t,a){switch(e.preventDefault(),e.stopPropagation(),a){case"markComplete":return void ie();case"viewDetails":return void q(!0,t.id);case"fullScreen":return void U(!0,t.id);case"copyTaskLink":return void H();case"duplicateTask":return void se(!0);case"copyTaskName":if(!t)return;return void H(t.name,"Task name is copied to clipboard");case"deleteTask":return void Z();default:return}}(t,n,e.name)}},"svg"===e.iconType?e.icon:o.a.createElement(e.icon,{fontSize:"small",className:K.contextIcon,style:{color:"deleteTask"===e.name?"red":"#a7a9ac"}}),o.a.createElement(vt.a,{className:K.contextMenuItem,style:{color:"deleteTask"===e.name?"red":"inherit"}},me(e.label))),t>3&&o.a.createElement(sa.a,null))}))))}));Ur.defaultProps={onDelete:function(){},record:{},style:{},canDelete:!0,canEdit:!0,onEdit:function(){},disabled:!1};var _r=Ur,Xr=o.a.memo((function(e){var t,a=e.disabled,n=e.column,r=Er(),c=r.onCardEdit,i=r.onCardDelete,l=r.tasksToBeDeleted,s=n.canMove,d=void 0===s||s,m=n.canDelete,p=void 0===m||m,f=n.canEdit,b=void 0===f||f,v=null===(t=n.records)||void 0===t?void 0:t.filter((function(e){return!l.some((function(t){return t.id===e.id}))}));return(null===v||void 0===v?void 0:v.length)?v.map((function(e,t){return o.a.createElement(yt.b,{key:"".concat(e.id),draggableId:"task_".concat(e.id),index:t,isDragDisabled:!d||a},(function(t){return o.a.createElement(_r,Object.assign({key:e.id,ref:t.innerRef},t.draggableProps,{dragHandleProps:t.dragHandleProps,canDelete:p,canEdit:b,record:e,disabled:a,style:Object(u.a)(Object(u.a)({},t.draggableProps.style),{},{width:"100%"}),onDelete:function(){return i(e.id)},onEdit:function(e){return c(e)}}))}))})):o.a.createElement(o.a.Fragment,null)}));Xr.defaultProps={onCardDelete:function(){},disabled:!1,onCardEdit:function(){},column:{}};var $r=Xr;function Gr(e){var t=e.disabled,a=e.scrollableColumn,n=e.gutterBottom,r=e.column,c=r.canDrop,i=void 0===c||c;return o.a.createElement(yt.c,{droppableId:"".concat(r.id),isDropDisabled:!i||t},(function(e){return o.a.createElement("div",Object.assign({style:{display:"flex",flexDirection:"column",backgroundColor:-1===r.id?"white":"inherit"}},e.droppableProps),o.a.createElement("div",{style:Object(u.a)({marginBottom:n?60:4,marginTop:4},a?{overflowX:"hidden",overflowY:"auto",padding:8,maxHeight:"".concat(200,"px")}:{}),ref:e.innerRef},o.a.createElement($r,{disabled:t,column:r}),e.placeholder))}))}Gr.defaultProps={disabled:!1,scrollableColumn:!1,gutterBottom:!1,column:{},CardListStyle:{}};var Kr=Object(F.a)((function(e){return{column:Object(M.a)({backgroundColor:"#fafafa",margin:8,position:"relative",boxShadow:"none"},e.breakpoints.only("xs"),{marginLeft:0,marginRight:0})}}));function Jr(e){var t=e.index,a=e.column,n=e.customHeader,r=void 0!==n&&n,c=a.collapsed,i=void 0!==c&&c,l=a.id,s=Kr();return o.a.createElement(yt.b,{draggableId:"column_".concat(l),index:t},(function(e){return o.a.createElement("div",Object.assign({},e.draggableProps,e.dragHandleProps,{ref:e.innerRef}),o.a.createElement(kt.a,{className:s.column},o.a.createElement(yr,Object.assign({column:a},e.dragHandleProps,{index:t,isCustom:r})),!i&&o.a.createElement(ft.a,{in:!0,timeout:500},o.a.createElement("div",null,o.a.createElement(Gr,{column:a})))))}))}Jr.defaultProps={index:null,column:{},isScroll:!1};var Qr=Object(F.a)((function(e){return{toolbar:Object(M.a)({padding:"8px 12px",textAlign:"left",display:"flex",height:50,boxSizing:"border-box",justifyContent:"space-between"},e.breakpoints.down("xs"),{height:100,minHeight:"".concat(100,"px !important"),flexDirection:"column"}),container:Object(M.a)({display:"flex"},e.breakpoints.down("xs"),{justifyContent:"space-between"}),contentWrapper:Object(M.a)({height:"calc(100% - ".concat(50,"px)"),width:"100%",display:"flex",backgroundColor:"white",overflow:"auto",flexDirection:"column"},e.breakpoints.down("xs"),{height:"calc(100% - ".concat(100,"px)"),overflowX:"hidden"}),menuItem:{"&:hover":{backgroundColor:"#e8ecee"}},addTaskButton:{textTransform:"none",borderRadius:0,borderTopLeftRadius:5,borderBottomLeftRadius:5,whiteSpace:"nowrap"},menuButton:{padding:5,borderRadius:0,border:"0.5px solid #9EA7DA",marginLeft:2,marginRight:10,borderTopRightRadius:5,borderBottomRightRadius:5,"&:hover":{border:"0.5px solid #3F51B5"}},addSectionButton:{width:"fit-content",textTransform:"none",color:"#b4b6b8","&:hover":{color:"#3F51B5 !important"}},toolbarHeader:{minWidth:216,borderLeft:"1px solid #E8ECEE",borderTop:"1px solid #E8ECEE",borderBottom:"1px solid #E8ECEE",padding:16,background:"white",textAlign:"left",cursor:"pointer",display:"flex",alignItems:"center"},toolbarSortIcon:{height:16,width:16,marginLeft:10,color:"#232933"},toolbarSortIconOnHover:{"& > .toolbarSortIcon":{height:16,width:16,marginLeft:10,color:"transparent"},"&:hover > .toolbarSortIcon":{color:"#232933"}},taskNameHeader:{minWidth:373,width:"100%",position:"sticky",left:0,background:"white",zIndex:500},parentHeader:Object(M.a)({display:"flex",padding:"0px 8px",position:"sticky",top:0,zIndex:500,width:"100%",background:"white"},e.breakpoints.only("xs"),{padding:0}),btnParent:{minWidth:430,maxWidth:430,position:"sticky",left:0,padding:"0px 16px",textAlign:"left"},contextMenuItem:{fontSize:14},contextSVGIcon:{fill:"#6f7782",height:16,width:16,marginRight:10},toolbarButton:{textTransform:"none",border:"none",color:"#32325d",marginRight:10,"&:hover":{background:"#e8ecee",borderColor:"#e8ecee",color:"#273240"}},iconSelected:{fontSize:20},clearIcon:{height:16,width:16,marginLeft:10},menuTypography:{fontSize:14,marginLeft:10},sortingOptions:{display:"flex",alignItems:"center"},menuPaper:{border:"1px solid #d3d4d5"},refreshIcon:{minWidth:"min-content",borderRadius:0}}})),Zr={vertical:"bottom",horizontal:"center"},eo={vertical:"top",horizontal:"center"};function to(){var e=Object(Ot.a)("(max-width:600px)"),t=Er(),a=t.columns,n=t.onCardMove,c=t.onColumnAdd,i=t.onColumnMove,l=t.sections,s=void 0===l?[]:l,m=t.searchFilter,p=t.filters,f=t.handleChangeFilter,b=t.handleSaveFilter,v=t.handleDeleteFilter,g=t.handleContentSearch,h=t.fields,k=void 0===h?[]:h,E=t.addNewTask,j=t.handleSetMenuFilter,y=t.menuFilter,O=t.filter,C=t.handleSetFilter,x=t.sortColumnName,w=t.handleSetSortColumnName,T=t.selectedProject,I=t.openTaskInDrawer,P=void 0!==I&&I,F=t.forceRefresh,M=Object(r.useState)(null),B=Object(S.a)(M,2),z=B[0],A=B[1],L=Boolean(z),R=Object(r.useState)(null),H=Object(S.a)(R,2),V=H[0],W=H[1],Y=Boolean(V),q=Object(r.useState)(null),U=Object(S.a)(q,2),_=U[0],X=U[1],K=Boolean(_),J=Object(r.useState)([]),Q=Object(S.a)(J,2),ee=Q[0],te=Q[1],ae=Object(r.useRef)(null),ne=(T||{}).isShowProgress,re=void 0!==ne&&ne,oe=Qr(),ce=[{code:"justMyTasks",value:"Just my tasks",icon:o.a.createElement("svg",{className:oe.contextSVGIcon,focusable:"false",viewBox:"0 0 32 32"},o.a.createElement("path",{d:"M16,18c-4.4,0-8-3.6-8-8s3.6-8,8-8s8,3.6,8,8S20.4,18,16,18z M16,4c-3.3,0-6,2.7-6,6s2.7,6,6,6s6-2.7,6-6S19.3,4,16,4z M29,32c-0.6,0-1-0.4-1-1v-4.2c0-2.6-2.2-4.8-4.8-4.8H8.8C6.2,22,4,24.2,4,26.8V31c0,0.6-0.4,1-1,1s-1-0.4-1-1v-4.2C2,23,5,20,8.8,20h14.4c3.7,0,6.8,3,6.8,6.8V31C30,31.6,29.6,32,29,32z"}))},{code:"dueThisWeek",value:"Due this week",icon:o.a.createElement("svg",{className:oe.contextSVGIcon,focusable:"false",viewBox:"0 0 32 32"},o.a.createElement("path",{d:"M24,2V1c0-0.6-0.4-1-1-1s-1,0.4-1,1v1H10V1c0-0.6-0.4-1-1-1S8,0.4,8,1v1C4.7,2,2,4.7,2,8v16c0,3.3,2.7,6,6,6h16c3.3,0,6-2.7,6-6V8C30,4.7,27.3,2,24,2z M28,24c0,2.2-1.8,4-4,4H8c-2.2,0-4-1.8-4-4V8c0-2.2,1.8-4,4-4v1c0,0.6,0.4,1,1,1s1-0.4,1-1V4h12v1c0,0.6,0.4,1,1,1s1-0.4,1-1V4c2.2,0,4,1.8,4,4V24z M12,10h8.8v2.1L15.5,22h-2.8l5.2-9.7H12V10z"}))},{code:"dueNextWeek",value:"Due next week",icon:o.a.createElement("svg",{className:oe.contextSVGIcon,focusable:"false",viewBox:"0 0 32 32"},o.a.createElement("path",{d:"M24,2V1c0-0.6-0.4-1-1-1s-1,0.4-1,1v1H10V1c0-0.6-0.4-1-1-1S8,0.4,8,1v1C4.7,2,2,4.7,2,8v16c0,3.3,2.7,6,6,6h16 c3.3,0,6-2.7,6-6V8C30,4.7,27.3,2,24,2z M28,24c0,2.2-1.8,4-4,4H8c-2.2,0-4-1.8-4-4V8c0-2.2,1.8-4,4-4v1c0,0.6,0.4,1,1,1s1-0.4,1-1 V4h12v1c0,0.6,0.4,1,1,1s1-0.4,1-1V4c2.2,0,4,1.8,4,4V24z M23.8,16.4c0.3,0.4,0.3,0.9,0,1.3l-4.5,5.5c-0.2,0.2-0.5,0.3-0.8,0.3 c-0.2,0-0.5-0.1-0.6-0.2c-0.4-0.4-0.5-1-0.1-1.4l3.1-3.9H10c-0.6,0-1-0.4-1-1s0.4-1,1-1h10.9l-3.1-3.9c-0.4-0.4-0.3-1.1,0.1-1.4 c0.4-0.4,1.1-0.3,1.4,0.1L23.8,16.4z"}))}],ie=function(){W(null)},le=Object(r.useCallback)((function(e){return a.find((function(t){return Number(t.id)===Number(e)}))}),[a]),se=Object(r.useCallback)((function(e){var t=e.source,r=e.destination,o=e.type;if(r&&(t.droppableId!==r.droppableId||t.index!==r.index))if("COLUMN"!==o){var c=le(t.droppableId),l=le(r.droppableId),s=le(t.droppableId).records[t.index];n({column:l,source:c,record:s,index:r.index})}else{if(0===r.index||0===t.index)return;i({column:a[t.index],index:r.index})}}),[a,n,le,i]),ue=Object(r.useRef)(null),de=Object(r.useState)(!1),pe=Object(S.a)(de,2),fe=pe[0],be=pe[1],ve=function(e){ue.current&&ue.current.contains(e.target)||be(!1)},ge=function(){var e=Object(D.a)(N.a.mark((function e(){var t,a,n=arguments;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.length>0&&void 0!==n[0]&&n[0],e.next=3,Ne({name:me("Untitled section"),sequence:s.length+1});case 3:(a=e.sent)&&c({column:Object(u.a)(Object(u.a)({},a),{},{records:[]})},t);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),he={disableDrag:!0,disableColumnAdd:!0,disableColumnCollapse:!0,disableColumnDelete:!0,customHeader:!0,CardListStyle:{backgroundColor:"white"}};return Object(r.useEffect)((function(){var e=function(e){var t=e||{},a=t.isShowPriority,n=void 0!==a&&a,r=t.isShowStatus,o=void 0!==r&&r,c=t.isShowProgress,i=void 0!==c&&c,l=t.isShowTaskCategory,s=void 0!==l&&l,u=Object(d.a)(G);return n||(u=u.filter((function(e){return"priority"!==e.code}))),o||(u=u.filter((function(e){return"status"!==e.code}))),i||(u=u.filter((function(e){return"progressSelect"!==e.code}))),s||(u=u.filter((function(e){return"projectTaskCategory"!==e.code}))),u}(T);te(e)}),[T]),o.a.createElement(yt.a,{onDragEnd:se},o.a.createElement("div",{className:oe.toolbar},o.a.createElement("div",{className:oe.container},o.a.createElement("div",{style:{display:"flex"}},o.a.createElement(dt.a,{variant:"outlined",color:"primary",onClick:E,className:oe.addTaskButton,startIcon:o.a.createElement(Nt.a,{size:"small"}),size:"small"},me("Add Task")),o.a.createElement(mt.a,{ref:ue,"aria-controls":fe?"menu-list-grow":void 0,"aria-haspopup":"true",onClick:function(){be((function(e){return!e}))},className:oe.menuButton,size:"small"},o.a.createElement(St.a,{size:"small",style:{color:"#32325d"}}))),o.a.createElement(fr,{fields:k,domain:[],handleChange:f,onSave:b,onDelete:v,filters:p,value:m,onContentSearch:g})),o.a.createElement("div",{className:oe.sortingOptions},o.a.createElement(dt.a,{variant:"outlined",onClick:function(e){W(e.currentTarget)},startIcon:o.a.createElement(xt.a,{size:"small"}),size:"small",className:oe.toolbarButton},y&&me(y.label||y.value)||me("All tasks")),o.a.createElement(dt.a,{variant:"outlined",onClick:function(e){return A(e.currentTarget)},startIcon:o.a.createElement(Bt.a,{size:"small"}),size:"small",className:oe.toolbarButton,style:{background:O&&(O.label||O.value)?"#CAEEFF":"inherit",color:O&&(O.label||O.value)?"#2CB3F6":"inherit"}},me("TaskEditor.filter")," ",O&&me(O.label||O.value),O&&O.value&&o.a.createElement(At.a,{size:"small",onClick:function(){return C(null)},className:oe.clearIcon})),o.a.createElement(dt.a,{variant:"outlined",onClick:function(e){X(e.currentTarget)},startIcon:o.a.createElement(Ft.a,{size:"small"}),size:"small",className:oe.toolbarButton},me("TaskEditor.sort"),x&&("sequence"===x.code?"":" : ".concat(me(x.name)))),o.a.createElement(pt.a,{id:"sort-menu",anchorEl:_,keepMounted:!0,open:K,onClose:function(){return X(null)},TransitionComponent:ft.a,classes:{paper:oe.menuPaper},elevation:0,getContentAnchorEl:null,anchorOrigin:Zr,transformOrigin:eo},ee&&ee.map((function(e){return o.a.createElement(bt.a,{key:e.code,onClick:function(){X(null),w(e)},className:oe.menuItem},o.a.createElement(It.a,{className:oe.iconSelected,style:{visibility:e.code===(x&&x.code)?"visible":"hidden"}}),o.a.createElement(vt.a,{className:oe.menuTypography},e.name))}))),o.a.createElement(pt.a,{id:"filter-menu",anchorEl:z,keepMounted:!0,open:L,onClose:function(){return A(null)},TransitionComponent:ft.a,classes:{paper:oe.menuPaper},elevation:0,getContentAnchorEl:null,anchorOrigin:Zr,transformOrigin:eo},ce.map((function(e){return o.a.createElement(bt.a,{key:e.code,className:oe.menuItem,onClick:function(){A(null),C(e)}},e.icon,o.a.createElement(vt.a,{className:oe.contextMenuItem},me(e.value)))}))),o.a.createElement(pt.a,{id:"fliter-list-menu",anchorEl:V,keepMounted:!0,open:Y,onClose:ie,TransitionComponent:ft.a,classes:{paper:oe.menuPaper},elevation:0,getContentAnchorEl:null,anchorOrigin:Zr,transformOrigin:eo},$.map((function(e){return e.items?o.a.createElement(ut.a,{parentMenuOpen:Y,key:e.code,label:e.value,style:{fontSize:14,marginLeft:28},onClick:function(){ie(),j(e)}},e.items.map((function(e){return o.a.createElement(bt.a,{key:e.code,className:oe.menuItem,onClick:function(){ie(),j(e)}},o.a.createElement(It.a,{className:oe.iconSelected,style:{visibility:e.value===(y&&y.value)?"visible":"hidden"}}),o.a.createElement(vt.a,{className:oe.menuTypography},e.value))}))):o.a.createElement(bt.a,{key:e.code,onClick:function(){ie(),j(e)},className:oe.menuItem},o.a.createElement(It.a,{className:oe.iconSelected,style:{visibility:e.value===(y&&y.value)?"visible":"hidden"}}),o.a.createElement(vt.a,{className:oe.menuTypography},e.value))}))))),o.a.createElement(yt.c,{droppableId:"board",type:"COLUMN",direction:"vertical"},(function(t,n){return o.a.createElement("div",Object.assign({ref:function(e){t.innerRef(e),ae.current=e}},t.droppableProps,{className:oe.contentWrapper}),o.a.createElement("div",{className:oe.parentHeader},o.a.createElement(mt.a,{onClick:function(){return F()},className:st()(oe.toolbarHeader,oe.refreshIcon)},o.a.createElement(Ht.a,null)),o.a.createElement("div",{className:st()(oe.toolbarHeader,oe.taskNameHeader,oe.toolbarSortIconOnHover),onClick:function(){return w({code:"name",name:"Alphabetical",sortFunction:Z})}},o.a.createElement(vt.a,{className:oe.menuTypography},me("Task Name")),x&&"name"===x.code?o.a.createElement(Rt.a,{className:oe.toolbarSortIcon}):o.a.createElement(Rt.a,{className:"toolbarSortIcon"})),!P&&!e&&o.a.createElement(o.a.Fragment,null,o.a.createElement("div",{className:st()(oe.toolbarHeader,oe.toolbarSortIconOnHover),onClick:function(){return w(G.find((function(e){return"assignedTo"===e.code})))}},o.a.createElement(vt.a,{className:oe.menuTypography},me("Assignee")),x&&"assignedTo"===x.code?o.a.createElement(Rt.a,{className:oe.toolbarSortIcon}):o.a.createElement(Rt.a,{className:"toolbarSortIcon"})),o.a.createElement("div",{className:st()(oe.toolbarHeader,oe.toolbarSortIconOnHover),onClick:function(){return w(G.find((function(e){return"taskDate"===e.code})))}},o.a.createElement(vt.a,{className:oe.menuTypography},me("TaskEditor.taskDate")),x&&"taskDate"===x.code?o.a.createElement(Rt.a,{className:oe.toolbarSortIcon}):o.a.createElement(Rt.a,{className:"toolbarSortIcon"})),o.a.createElement("div",{className:st()(oe.toolbarHeader,oe.toolbarSortIconOnHover),onClick:function(){return w(G.find((function(e){return"taskEndDate"===e.code})))}},o.a.createElement(vt.a,{className:oe.menuTypography},me("Due Date")),x&&"taskEndDate"===x.code?o.a.createElement(Rt.a,{className:oe.toolbarSortIcon}):o.a.createElement(Rt.a,{className:"toolbarSortIcon"})),re&&o.a.createElement("div",{className:st()(oe.toolbarHeader,oe.toolbarSortIconOnHover),onClick:function(){return w(G.find((function(e){return"progressSelect"===e.code})))}},o.a.createElement(vt.a,{className:oe.menuTypography},me("Progress")),x&&"progressSelect"===x.code?o.a.createElement(Rt.a,{className:oe.toolbarSortIcon}):o.a.createElement(Rt.a,{className:"toolbarSortIcon"})))),a.map((function(e,t){return o.a.createElement(Jr,Object.assign({key:e.id,index:t,column:e},-1===e.id?he:{}))})),!n.isDraggingOver&&o.a.createElement("div",{className:oe.btnParent},o.a.createElement(dt.a,{startIcon:o.a.createElement(Nt.a,null),className:oe.addSectionButton,onClick:function(){return ge(!0)}},me("Add Section"))),t.placeholder)})),o.a.createElement(gt.a,{open:fe,anchorEl:ue.current,role:void 0,transition:!0,disablePortal:!0,style:{zIndex:900}},(function(e){var t=e.TransitionProps;return o.a.createElement(ht.a,Object.assign({},t,{style:{transformOrigin:"right bottom"}}),o.a.createElement(kt.a,null,o.a.createElement(Et.a,{onClickAway:ve},o.a.createElement(jt.a,{autoFocusItem:fe,id:"menu-list-grow"},o.a.createElement(bt.a,{onClick:function(e){ge(),ve(e)}},me("Add Section"))))))})))}to.defaultProps={columns:[]};var ao={},no=Object(d.a)(K),ro=function(e){if(void 0!==e){if(ao[e])return ao[e];var t=no.length?no.splice(Math.floor(Math.random()*no.length),1)[0]:"gray";return t?ao[e]=t:void 0}};function oo(e,t,a,n){var r=n.userId,o=n.project;if(!t)return[];var c=function(e,t,a){var n=a.project,r=Object(d.a)(e||[]),o=ue(n).id;switch(t){case"allTasks":return r;case"incompleteTasks":return r=r.filter((function(e){return!e.status||e.status.id!==o}));case"completedTasks":case"allCompletedTasks":return r=r.filter((function(e){return e.status&&e.status.id===o}));case"yesterday":return r=r.filter((function(e){return e.status&&e.status.id===o&&ie(e.taskEndDate)===ie(P()().subtract(1,"days"))}));case"today":return r=r.filter((function(e){return e.status&&e.status.id===o&&ie(e.taskEndDate)===ie(P()())}));case"oneweek":return r=r.filter((function(e){return e.status&&e.status.id===o&&P()(e.taskEndDate).isSame(new Date,"week")}));case"twoWeeks":return r=r.filter((function(e){return e.status&&e.status.id===o&&P()(e.taskEndDate).isSame(P()().subtract(8,"days"),"week")}));case"threeWeeks":return r=r.filter((function(e){return e.status&&e.status.id===o&&P()(e.taskEndDate).isSame(P()().subtract(15,"days"),"week")}));default:return r}}(e,t,{project:o});switch(a){case"dueNextWeek":return c.filter((function(e){return P()(e.taskEndDate).isSame(P()().add(8,"days"),"week")}));case"justMyTasks":return c.filter((function(e){return(e.assignedTo&&e.assignedTo.id)===r}));case"dueThisWeek":return c.filter((function(e){return P()(e.taskEndDate).isSame(new Date,"week")}));default:return c}}var co=function(e,t){for(var a=[e],n=function(e){var n=a[e];t.forEach((function(e){e.parentTask&&e.parentTask.id===n&&!a.includes(e.id)&&a.push(e.id)}))},r=0;r<a.length;r++)n(r);return a},io=Object(F.a)((function(e){return{root:{display:"flex"},paper:{marginRight:e.spacing(2)},icon:{fill:"#6f7782",height:"1em",marginRight:8,width:"1em"},typography:{color:"#151b26",fontSize:14},menuPaper:{border:"1px solid #d3d4d5"}}}));function lo(e){var t=e.anchorEl,a=e.isFullScreen,n=e.onClose,r=e.onMenuTaskDelete,c=e.openPdfDialog,i=e.openSubtaskOfAlert,l=e.openDuplicateTaskDialog,s=e.openTaskToProjectDialog,u=io(),d=Er().toggleTaskFullScreen;return o.a.createElement("div",{className:u.root},o.a.createElement("div",null,o.a.createElement(pt.a,{anchorEl:t,open:Boolean(t),onClose:n,classes:{paper:u.menuPaper},elevation:0,getContentAnchorEl:null,anchorOrigin:{vertical:"bottom",horizontal:"center"},transformOrigin:{vertical:"top",horizontal:"center"}},!a&&o.a.createElement(bt.a,{onClick:function(){n(),d(!0)}},o.a.createElement("svg",{className:u.icon,focusable:"false",viewBox:"0 0 32 32"},o.a.createElement("path",{d:"M13.7,19.7L5.4,28H13c0.6,0,1,0.4,1,1s-0.4,1-1,1H3c-0.6,0-1-0.4-1-1V19c0-0.6,0.4-1,1-1s1,0.4,1,1v7.6l8.3-8.3c0.4-0.4,1-0.4,1.4,0S14.1,19.3,13.7,19.7z M29,2H19c-0.6,0-1,0.4-1,1s0.4,1,1,1h7.6l-8.3,8.3c-0.4,0.4-0.4,1,0,1.4c0.2,0.2,0.5,0.3,0.7,0.3s0.5-0.1,0.7-0.3L28,5.4V13c0,0.6,0.4,1,1,1s1-0.4,1-1V3C30,2.4,29.6,2,29,2z"})),o.a.createElement(vt.a,{className:u.typography},me("Full screen"))),o.a.createElement(bt.a,{onClick:function(){i(),n()}},o.a.createElement("svg",{className:u.icon,focusable:"false",viewBox:"0 0 32 32"},o.a.createElement("path",{d:"M15,13c0-0.6-0.4-1-1-1H3c-0.6,0-1-0.4-1-1V7c0-0.6,0.4-1,1-1h11c0.6,0,1-0.4,1-1s-0.4-1-1-1H3C1.3,4,0,5.3,0,7v4c0,1.7,1.3,3,3,3h11C14.6,14,15,13.6,15,13z M29,18h-3v-6c0-2.2-1.8-4-4-4h-4.6l2.3-2.3c0.4-0.4,0.4-1,0-1.4s-1-0.4-1.4,0l-4,4c-0.4,0.4-0.4,1,0,1.4c0,0,0,0,0,0l4,4c0.4,0.4,1,0.4,1.4,0c0,0,0,0,0,0c0.4-0.4,0.4-1,0-1.4c0,0,0,0,0,0L17.4,10H22c1.1,0,2,0.9,2,2v6H9c-1.7,0-3,1.3-3,3v4c0,1.7,1.3,3,3,3h20c1.7,0,3-1.3,3-3v-4C32,19.3,30.7,18,29,18z M30,25c0,0.6-0.4,1-1,1H9c-0.6,0-1-0.4-1-1v-4c0-0.6,0.4-1,1-1h20c0.6,0,1,0.4,1,1V25z"})),o.a.createElement(vt.a,{className:u.typography},me("Make a subtask of"))),o.a.createElement(sa.a,null),o.a.createElement(bt.a,{onClick:function(){n(),l()}},o.a.createElement(vt.a,{className:u.typography},me("Duplicate task"))),o.a.createElement(bt.a,{onClick:function(){n(),c()}},o.a.createElement(vt.a,{className:u.typography},me("Print"))),o.a.createElement(bt.a,{onClick:function(){n(),s()}},o.a.createElement(vt.a,{className:u.typography},me("Convert to project"))),o.a.createElement(sa.a,null),o.a.createElement(bt.a,{onClick:function(e){r(),n()}},o.a.createElement(vt.a,{className:u.typography,style:{color:"#ED4F5F"}},me("Delete Task"))))))}var so=Object(F.a)((function(e){return{drawerHeader:Object(u.a)(Object(u.a)({display:"flex",alignItems:"center",padding:e.spacing(0,1)},e.mixins.toolbar),{},{position:"fixed",justifyContent:"space-between",width:"50%",height:50,boxSizing:"border-box",minHeight:"".concat(50,"px !important"),boxShadow:e.shadows[4]}),fullScreenToolbar:Object(M.a)({zIndex:100,background:"white",width:"50%"},e.breakpoints.only("xs"),{width:"100%"}),markComplete:{textTransform:"none",color:"#6F7782","&:hover":{color:"#00bf9c",borderColor:"#00bf9c"}},toolbarIcon:{fill:"#6f7782",height:16,width:16},toolbarIconButton:{padding:10}}}));var uo=function(e){var t=e.isFullScreen,a=e.toggleStatus,n=e.isCompleted,c=e.attachmentList,i=e.selectFile,l=e.addNewSubtask,s=e.subTaskCount,u=e.copyToClipboard,d=e.handleClose,m=e.onMenuTaskDelete,p=e.openPdfDialog,f=e.openSubtaskOfAlert,b=e.openDuplicateTaskDialog,v=e.openTaskToProjectDialog,g=so(),h=Object(r.useState)(null),k=Object(S.a)(h,2),E=k[0],j=k[1];return o.a.createElement("div",{className:st()(g.drawerHeader,g.fullScreenToolbar)},o.a.createElement("div",null,o.a.createElement(dt.a,{variant:"outlined",size:"small",className:g.markComplete,startIcon:o.a.createElement(It.a,null),onClick:a,style:{color:n?"white":"#6F7782",background:n?"#00bf9c":"white"}},me(n?"Completed":"Mark Complete"))),o.a.createElement("div",null,o.a.createElement(mt.a,{onClick:function(){document.getElementById("inputFile").click()},className:g.toolbarIconButton},o.a.createElement("svg",{className:g.toolbarIcon,focusable:"false",viewBox:"0 0 32 32"},o.a.createElement("path",{d:"M19,32c-3.9,0-7-3.1-7-7V10c0-2.2,1.8-4,4-4s4,1.8,4,4v9c0,0.6-0.4,1-1,1s-1-0.4-1-1v-9c0-1.1-0.9-2-2-2s-2,0.9-2,2v15c0,2.8,2.2,5,5,5s5-2.2,5-5V10c0-4.4-3.6-8-8-8s-8,3.6-8,8v5c0,0.6-0.4,1-1,1s-1-0.4-1-1v-5C6,4.5,10.5,0,16,0s10,4.5,10,10v15C26,28.9,22.9,32,19,32z"})),c&&c.length>0&&o.a.createElement("span",{style:{fontSize:10.5,marginBottom:12}},c.length),o.a.createElement("input",{id:"inputFile",type:"file",name:"file",multiple:!0,onChange:i,style:{display:"none"}})),o.a.createElement(mt.a,{onClick:function(){return l()},className:g.toolbarIconButton},o.a.createElement("svg",{focusable:"false",viewBox:"0 0 32 32",style:{fill:"#6f7782",height:16,width:16}},o.a.createElement("path",{d:"M25,20c-2.4,0-4.4,1.7-4.9,4H11c-3.9,0-7-3.1-7-7v-5h16.1c0.5,2.3,2.5,4,4.9,4c2.8,0,5-2.2,5-5s-2.2-5-5-5c-2.4,0-4.4,1.7-4.9,4H4V3c0-0.6-0.4-1-1-1S2,2.4,2,3v14c0,5,4,9,9,9h9.1c0.5,2.3,2.5,4,4.9,4c2.8,0,5-2.2,5-5S27.8,20,25,20z M25,8c1.7,0,3,1.3,3,3s-1.3,3-3,3s-3-1.3-3-3S23.3,8,25,8z M25,28c-1.7,0-3-1.3-3-3s1.3-3,3-3s3,1.3,3,3S26.7,28,25,28z"})),s?o.a.createElement("span",{style:{fontSize:10.5,marginBottom:12}},s):null),o.a.createElement(mt.a,{onClick:function(){return u()},className:g.toolbarIconButton},o.a.createElement("svg",{className:g.toolbarIcon,focusable:"false",viewBox:"0 0 32 32"},o.a.createElement("path",{d:"M9,32c-2.3,0-4.6-0.9-6.4-2.6c-3.5-3.5-3.5-9.2,0-12.7l4-4c0.4-0.4,1-0.4,1.4,0c0.4,0.4,0.4,1,0,1.4l-4,4c-2.7,2.7-2.7,7.2,0,9.9s7.2,2.7,9.9,0l4-4c2.7-2.7,2.7-7.2,0-9.9c-0.8-0.8-1.8-1.4-2.9-1.7c-0.5-0.2-0.8-0.7-0.7-1.3c0.2-0.5,0.7-0.8,1.3-0.7c1.4,0.4,2.7,1.2,3.7,2.2c3.5,3.5,3.5,9.2,0,12.7l-4,4C13.6,31.1,11.3,32,9,32z M16.6,21.6c-0.1,0-0.2,0-0.3,0c-1.4-0.4-2.7-1.2-3.7-2.2c-1.7-1.7-2.6-4-2.6-6.4s0.9-4.7,2.6-6.4l4-4c3.5-3.5,9.2-3.5,12.7,0s3.5,9.2,0,12.7l-4,4c-0.4,0.4-1,0.4-1.4,0s-0.4-1,0-1.4l4-4c2.7-2.7,2.7-7.2,0-9.9S20.7,1.3,18,4l-4,4c-1.3,1.4-2,3.1-2,5s0.7,3.6,2.1,5c0.8,0.8,1.8,1.4,2.9,1.7c0.5,0.2,0.8,0.7,0.7,1.3C17.5,21.4,17.1,21.6,16.6,21.6z"}))),o.a.createElement(mt.a,{onClick:function(e){e.stopPropagation(),j(e.currentTarget)},className:g.toolbarIconButton},o.a.createElement("svg",{className:g.toolbarIcon,focusable:"false",viewBox:"0 0 32 32"},o.a.createElement("path",{d:"M16,13c1.7,0,3,1.3,3,3s-1.3,3-3,3s-3-1.3-3-3S14.3,13,16,13z M3,13c1.7,0,3,1.3,3,3s-1.3,3-3,3s-3-1.3-3-3S1.3,13,3,13z M29,13c1.7,0,3,1.3,3,3s-1.3,3-3,3s-3-1.3-3-3S27.3,13,29,13z"}))),o.a.createElement(mt.a,{onClick:d,className:g.toolbarIconButton},o.a.createElement("svg",{className:g.toolbarIcon,focusable:"false",viewBox:"0 0 32 32"},t?o.a.createElement("path",{d:"M18.1,16L27,7.1c0.6-0.6,0.6-1.5,0-2.1s-1.5-0.6-2.1,0L16,13.9l-8.9-9C6.5,4.3,5.6,4.3,5,4.9S4.4,6.4,5,7l8.9,8.9L5,24.8c-0.6,0.6-0.6,1.5,0,2.1c0.3,0.3,0.7,0.4,1.1,0.4s0.8-0.1,1.1-0.4l8.9-8.9l8.9,8.9c0.3,0.3,0.7,0.4,1.1,0.4s0.8-0.1,1.1-0.4c0.6-0.6,0.6-1.5,0-2.1L18.1,16z"}):o.a.createElement("path",{d:"M2,14.5h18.4l-7.4-7.4c-0.6-0.6-0.6-1.5,0-2.1c0.6-0.6,1.5-0.6,2.1,0l10,10c0.6,0.6,0.6,1.5,0,2.1l-10,10c-0.3,0.3-0.7,0.4-1.1,0.4c-0.4,0-0.8-0.1-1.1-0.4c-0.6-0.6-0.6-1.5,0-2.1l7.4-7.4H2c-0.8,0-1.5-0.7-1.5-1.5C0.5,15.3,1.2,14.5,2,14.5z M28,3.5C28,2.7,28.7,2,29.5,2S31,2.7,31,3.5v25c0,0.8-0.7,1.5-1.5,1.5S28,29.3,28,28.5V3.5z"}))),o.a.createElement(lo,{anchorEl:E,isFullScreen:t,onClose:function(){j(null)},onMenuTaskDelete:m,openPdfDialog:p,openSubtaskOfAlert:f,openDuplicateTaskDialog:b,openTaskToProjectDialog:v})))},mo=Object(F.a)((function(e){return{title:{display:"flex",alignItems:"center"},input:{padding:4,"&:hover":{border:"1px solid #b4b6b8"},border:"1px solid transparent",width:"100%"},checkedIcon:{color:"#b4b6b8","&:hover":{color:"#25e8c8 !important"}},dragHandle:{color:"#b4b6b8",fontSize:"1.2rem",cursor:"grab"},card:{cursor:"pointer","&:hover":{backgroundColor:"#f5f8fa"}},cardTask:Object(M.a)({marginLeft:e.spacing(5),display:"flex",width:"100%",alignItems:"center"},e.breakpoints.only("xs"),{marginLeft:e.spacing(1)}),checkIconButton:{padding:e.spacing(1)},cardItem:{display:"flex",alignItems:"center",justifyContent:"space-between",borderBottom:"1px solid #E8ECEE",borderRadius:0,boxShadow:"none",position:"relative"},stickyElement:{"&:hover":{backgroundColor:"#f5f8fa"},width:"100%",display:"flex",alignItems:"center"},menuPaper:{border:"1px solid #d3d4d5"}}}));function po(e){var t=e.onDelete,a=e.record,n=e.style,c=e.Card,i=e.canDelete,l=(e.canEdit,e.onEdit),s=e.dragHandleProps,d=void 0===s?{}:s,m=Object(Vt.a)(e,["onDelete","record","style","Card","canDelete","canEdit","onEdit","dragHandleProps"]),p=Object(r.useState)(null),f=Object(S.a)(p,2),b=f[0],v=f[1],g=Object(r.useState)(!1),h=Object(S.a)(g,2),k=h[0],E=h[1],j=o.a.useState(!1),y=Object(S.a)(j,2),O=y[0],C=y[1],x=Object(Ot.a)("(max-width:600px)"),w=mo(),T=function(){v(null)},N=o.a.useCallback((function(e){C(!0)}),[]),D=o.a.useCallback((function(e){e&&e.stopPropagation(),C(!1)}),[]),I=o.a.useCallback((function(e){e.stopPropagation(),D(),t(a)}),[t,a,D]);return o.a.createElement(kt.a,Object.assign({},m,{className:st()(w.cardItem,w.card),style:Object(u.a)({},n),onMouseEnter:function(){E(!0)},onMouseLeave:function(){E(!1)}}),o.a.createElement("div",{className:w.stickyElement},o.a.createElement("div",{className:w.title},o.a.createElement("div",d,o.a.createElement($t.a,{className:w.dragHandle,style:{visibility:k||x?"visible":"hidden"}})),o.a.createElement("div",{style:{display:"flex",alignItems:"center"}},o.a.createElement(c,{record:a,onEdit:l}),o.a.createElement("div",null,o.a.createElement(mt.a,{onClick:function(e){e.stopPropagation(),v(e.currentTarget)},size:"small"},o.a.createElement(_t.a,{style:{fontSize:15}})),o.a.createElement(pt.a,{anchorEl:b,open:Boolean(b),onClose:T,classes:{paper:w.menuPaper},elevation:0,getContentAnchorEl:null,anchorOrigin:{vertical:"bottom",horizontal:"center"},transformOrigin:{vertical:"top",horizontal:"center"}},i&&o.a.createElement(bt.a,{onClick:function(e){e.stopPropagation(),T(),N()}},me("Delete"))))))),o.a.createElement(Wa,{open:O,onClose:D,onConfirm:I,title:me("Delete Task")}))}po.defaultProps={onDelete:function(){},record:{},style:{},Card:function(e){var t=e.record,a=e.onEdit,n=mo(),c=Object(r.useState)({name:t.name,status:t.status}),i=Object(S.a)(c,2),l=i[0],s=i[1],d=Object(r.useState)(!1),m=Object(S.a)(d,2),p=m[0],f=m[1],b=Er().selectedProject,v=o.a.useCallback((function(e){var t=e.target,a=t.name,n=t.value;e.stopPropagation(),s((function(e){return Object(u.a)(Object(u.a)({},e),{},Object(M.a)({},a,n))}))}),[]),g=o.a.useCallback(function(){var e=Object(D.a)(N.a.mark((function e(n){var r,o;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n&&n.stopPropagation(),r=p?t.statusBeforeComplete:ue(b),s((function(e){return Object(u.a)(Object(u.a)({},e),{},{status:r})})),e.next=5,Oe(Object(u.a)(Object(u.a)({},t),{},{status:r,statusBeforeComplete:t.status}));case 5:(o=e.sent)&&a(Object(u.a)(Object(u.a)({},o),{},{"priority.technicalTypeSelect":t["priority.technicalTypeSelect"]}));case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[a,t,p,b]),h=o.a.useCallback(Object(D.a)(N.a.mark((function e(){var n;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.name===l.name){e.next=5;break}return e.next=3,Oe(Object(u.a)(Object(u.a)({},t),{},{name:l.name}));case 3:n=e.sent,a(Object(u.a)(Object(u.a)({},n),{},{"priority.technicalTypeSelect":l["priority.technicalTypeSelect"]}));case 5:case"end":return e.stop()}}),e)}))),[l,a,t]);return Object(r.useEffect)((function(){s(t);var e=de(t,b);f(e)}),[t,b]),o.a.createElement("div",{className:n.cardTask},o.a.createElement(mt.a,{size:"small",onClick:g,className:n.checkIconButton},p?o.a.createElement(Fr.a,{fontSize:"small",style:{color:"#25e8c8"},className:n.checkedIcon}):o.a.createElement(xt.a,{fontSize:"small",style:{color:"#b4b6b8"},className:n.checkedIcon})),o.a.createElement(Wt.a,{onClick:function(e){return e.stopPropagation()},onChange:v,onBlur:h,name:"name",value:l.name,InputProps:{disableUnderline:!0},className:n.input,style:{marginRight:2}},t.name))},canDelete:!0,canEdit:!0,onEdit:function(){}};var fo=Object(F.a)((function(e){return{typography:{textAlign:"left",textTransform:"none"},common:{width:"100%",marginBottom:15},drawerFooter:Object(M.a)({display:"flex",alignItems:"center",background:"#F6F8F9",padding:13,justifyContent:"space-between",width:"50%",position:"fixed",border:"1px solid lightgray",bottom:0,zIndex:100},e.breakpoints.only("xs"),{width:"100%"}),commentBtnActive:{backgroundColor:"#14aaf5",color:"white",fontSize:"9pt",fontWeight:600,borderRadius:50,border:"none",marginLeft:10,textTransform:"none","&:hover":{backgroundColor:"#098ccd !important"}},formControl:{width:"100%",marginBottom:15},commentBtnDisable:{backgroundColor:"#14aaf5","&:hover":{backgroundColor:"#098ccd !important"}},select:{padding:"18.5px 14px"},picker:{width:"100%",marginBottom:15,marginTop:0,padding:0},inputClassName:{padding:"4.5px 10.5px 3.5px 10.5px"},addSubtaskButton:{width:"fit-content",textTransform:"none",color:"#b4b6b8","&:hover":{color:"#3F51B5 !important"}},undeleteIcon:{"&:hover":{color:"black",border:"1px solid black"},textTransform:"none",padding:"2px 5px",color:"#9CA2A9",border:"1px solid #9CA2A9",marginRight:5},permanentlyDeleteIcon:{"&:hover":{background:"#E8384F",border:"1px solid #E8384F"},textTransform:"none",padding:"2px 5px",background:"#FF5263",border:"1px solid #FF5263",color:"white"},deleteContainer:{background:"#FFEDEF",justifyContent:"space-between",display:"flex",alignItems:"center",padding:12},selectContainer:{background:"#F6F8F9",justifyContent:"space-between",display:"flex",alignItems:"center",flexDirection:"column",padding:12},subtaskContainer:{display:"flex",justifyContent:"space-between",alignItems:"center",width:"100%"},subtaskHint:{color:"#6F7782",fontSize:14},commentInput:{width:"100%","& div":{borderRadius:16},"& input":{fontSize:14}}}}));function bo(e){var t=e.task,a=e.addNewSubtask,n=e.permanentlyDeleteTask,c=e.closeSubtaskOfClicked,i=e.isSubtaskOfClicked,l=e.removeAttachment,s=e.downloadAttachment,m=e.attachmentList,p=e.addComment,f=e.removeComment,b=e.loadMoreComments,v=e.comments,g=e.commentParameters,h=Er(),k=h.onCardEdit,E=h.onCardDelete,j=h.userId,y=h.maxFiles,O=h.selectedProject,C=void 0===O?{}:O,x=h.projectId,w=h.getAvatarColor,T=h.tasks,I=h.tasksToBeDeleted,F=h.removeTaskToBeDeleted,B=h.closeSnackbar,z=C||{},A=z.isShowPriority,L=void 0!==A&&A,R=z.isShowStatus,H=void 0!==R&&R,V=z.isShowProgress,W=void 0!==V&&V,Y=z.isShowTaskCategory,q=void 0!==Y&&Y,U=Object(r.useState)({name:"",project:{},parentTask:{},assignedTo:{},status:"",priority:"",projectTaskCategory:"",taskDate:null,progressSelect:0,taskEndDate:null,description:""}),_=Object(S.a)(U,2),X=_[0],$=_[1],G=X||{},K=G.name,J=G.project,Q=G.parentTask,Z=G.assignedTo,ee=G.status,te=G.priority,ae=G.taskDate,ne=G.progressSelect,re=G.taskEndDate,oe=G.description,ce=G.projectTaskCategory,ie=fo(),le=Object(r.useState)(null),se=Object(S.a)(le,2)[1],ue=Object(r.useState)([]),de=Object(S.a)(ue,2),pe=de[0],fe=de[1],be=Object(r.useState)(null),ve=Object(S.a)(be,2),ge=ve[0],he=ve[1],ke=Object(Ot.a)("(max-width:600px)"),Ee=function(){var e=Object(D.a)(N.a.mark((function e(t){var a;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Oe(t);case 2:(a=e.sent)&&(k(Object(u.a)(Object(u.a)({},a),{},{"priority.technicalTypeSelect":t["priority.technicalTypeSelect"]})),$(Object(u.a)({},a)));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),je=function(e){$(Object(u.a)(Object(u.a)({},X),{},Object(M.a)({},e.target.name,e.target.value))),"name"!==e.target.name&&Ce(e)},ye=function(e,t){var a=Object(u.a)(Object(u.a)({},X),{},Object(M.a)({},t,"taskDate"!==t&&"taskEndDate"!==t||!e?e:P()(e).format("YYYY-MM-DD")));"status"===t&&(a.statusBeforeComplete=X.status),"priority"===t&&(a["priority.technicalTypeSelect"]=e.technicalTypeSelect),$(a),Ee(a)},Ce=function(e){Ee(Object(u.a)(Object(u.a)({},X),{},Object(M.a)({},e.target.name,e.target.value)))},xe=o.a.useCallback(function(){var e=Object(D.a)(N.a.mark((function e(t){var a;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p(t);case 2:return a=e.sent,e.abrupt("return",a);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[p]);return Object(r.useEffect)((function(){if(ke){var e=window.top&&window.top.document&&window.top.document.getElementsByTagName("iframe"),t=e&&e[0]&&e[0].parentElement;if(t&&t.parentElement){var a=t.parentElement;"html-view ng-scope"===a.className&&a.style&&(a.style.height="100%")}}}),[ke]),Object(r.useEffect)((function(){$(Object(u.a)({},t))}),[t]),Object(r.useEffect)((function(){var e=T&&T.filter((function(e){return e.parentTask&&e.parentTask.id===t.id}));fe(Object(d.a)(e||[]))}),[T,t]),o.a.createElement(Hr.a,{container:!0},I.some((function(e){return e.id===t.id}))&&o.a.createElement(Hr.a,{item:!0,xs:12,className:ie.deleteContainer},o.a.createElement("div",{style:{display:"flex",alignItems:"center"}},o.a.createElement(Nr.a,{style:{color:"#E8384F"}}),o.a.createElement(vt.a,{style:{color:"#E8384F",fontSize:14}},me("This task is deleted"))),o.a.createElement("div",null,o.a.createElement(dt.a,{variant:"outlined",className:ie.undeleteIcon,onClick:function(){F(t.id),B()}},me("Undelete")),o.a.createElement(dt.a,{variant:"outlined",className:ie.permanentlyDeleteIcon,onClick:n},me("Delete Permanently")))),i&&o.a.createElement(Hr.a,{item:!0,xs:12,className:ie.selectContainer},o.a.createElement("div",{className:ie.subtaskContainer},o.a.createElement(vt.a,{className:ie.subtaskHint},me("Make this task a subtask of another project task.")),o.a.createElement(mt.a,{onClick:c},o.a.createElement(ja.a,null))),o.a.createElement("div",{style:{width:"100%"}},o.a.createElement(Ba,{model:"com.axelor.apps.project.db.ProjectTask",title:"Parent Task",optionLabel:"fullName",name:"parentTask",value:ge,onChange:function(e){he(e),ye(e,"parentTask"),c()},data:Q,label:me("Find a task"),criteria:[{fieldName:"id",operator:"!=",value:t.id},{fieldName:"project.id",operator:"!=",value:x}],operator:"and"}))),o.a.createElement(Hr.a,{item:!0,container:!0,style:{padding:15}},o.a.createElement(Hr.a,{item:!0,xs:12},o.a.createElement(Wt.a,{style:{width:"100%",marginBottom:15},name:"name",placeholder:me("Subject"),variant:"outlined",value:K,onChange:je,onBlur:Ce})),o.a.createElement(Hr.a,{item:!0,xs:4},o.a.createElement(vt.a,{variant:"overline",className:ie.typography,display:"block",gutterBottom:!0},me("Project"))),o.a.createElement(Hr.a,{item:!0,xs:8,className:ie.formControl},o.a.createElement(Ba,{model:"com.axelor.apps.project.db.Project",title:me("Project"),name:"project",optionLabel:"fullName",value:J,onChange:function(e){return ye(e,"project")}})),o.a.createElement(Hr.a,{item:!0,xs:4},o.a.createElement(vt.a,{variant:"overline",className:ie.typography,display:"block",gutterBottom:!0},me("Parent Task"))),o.a.createElement(Hr.a,{item:!0,xs:8,className:ie.formControl},o.a.createElement(Ba,{model:"com.axelor.apps.project.db.ProjectTask",title:me("Parent Task"),optionLabel:"fullName",name:"parentTask",value:Q,onChange:function(e){return ye(e,"parentTask")},disableClearable:!1,data:Q,criteria:[{fieldName:"id",operator:"!=",value:t.id},{fieldName:"project.id",operator:"=",value:x}],operator:"and"})),o.a.createElement(Hr.a,{item:!0,xs:4},o.a.createElement(vt.a,{variant:"overline",className:ie.typography,display:"block",gutterBottom:!0},me("Assigned To"))),o.a.createElement(Hr.a,{item:!0,xs:8,className:ie.formControl},o.a.createElement(Ir,{model:"com.axelor.auth.db.User",title:me("Assigned To"),optionLabel:"fullName",name:"assignedTo",value:Z,update:function(e){ye(e,"assignedTo")},options:C.membersUserSet,getAvatarColor:w})),H&&o.a.createElement(o.a.Fragment,null,o.a.createElement(Hr.a,{item:!0,xs:4},o.a.createElement(vt.a,{variant:"overline",className:ie.typography,display:"block",gutterBottom:!0},me("Status"))),o.a.createElement(Hr.a,{item:!0,xs:8},o.a.createElement(Za,{className:ie.formControl,value:ee,name:"status",options:C.projectTaskStatusSet,onChange:function(e,t){return ye(e,t.target.name)},getAvatarColor:w}))),L&&o.a.createElement(o.a.Fragment,null,o.a.createElement(Hr.a,{item:!0,xs:4},o.a.createElement(vt.a,{variant:"overline",className:ie.typography,display:"block",gutterBottom:!0},me("Priority"))),o.a.createElement(Hr.a,{item:!0,xs:8},o.a.createElement(Ar,{className:ie.formControl,value:te,options:C.projectTaskPrioritySet,onChange:function(e,t){return ye(e,t.target.name)}}))),q&&o.a.createElement(o.a.Fragment,null,o.a.createElement(Hr.a,{item:!0,xs:4},o.a.createElement(vt.a,{variant:"overline",className:ie.typography,display:"block",gutterBottom:!0},me("Category"))),o.a.createElement(Hr.a,{item:!0,xs:8},o.a.createElement(Za,{hasNoneOption:!0,className:ie.formControl,value:ce,name:"projectTaskCategory",options:C.projectTaskCategorySet,onChange:function(e,t){return ye(e,t.target.name)},getAvatarColor:w}))),W&&o.a.createElement(o.a.Fragment,null,o.a.createElement(Hr.a,{item:!0,xs:4},o.a.createElement(vt.a,{variant:"overline",className:ie.typography,display:"block",gutterBottom:!0},me("Progress"))),o.a.createElement(Hr.a,{item:!0,xs:8},o.a.createElement($a.a,{variant:"outlined",style:{width:"100%",marginBottom:15}},o.a.createElement(Rr,{t:me,value:ne,onChange:je})))),o.a.createElement(Hr.a,{item:!0,xs:4},o.a.createElement(vt.a,{variant:"overline",className:ie.typography,display:"block",gutterBottom:!0},me("TaskEditor.taskDate"))),o.a.createElement(Hr.a,{item:!0,xs:8},o.a.createElement(_a,{className:ie.picker,inputClassName:ie.inputClassName,value:ae,name:"taskDate",label:me("TaskEditor.taskDate"),onChange:function(e,t){return ye(e,"taskDate")}})),o.a.createElement(Hr.a,{item:!0,xs:4},o.a.createElement(vt.a,{variant:"overline",className:ie.typography,display:"block",gutterBottom:!0},me("Task end"))),o.a.createElement(Hr.a,{item:!0,xs:8},o.a.createElement(_a,{className:ie.picker,inputClassName:ie.inputClassName,value:re,name:"taskEndDate",label:"Task end",onChange:function(e,t){return ye(e,"taskEndDate")}})),o.a.createElement(Hr.a,{item:!0,xs:4},o.a.createElement(vt.a,{variant:"overline",className:ie.typography,display:"block",gutterBottom:!0},me("Description"))),o.a.createElement(Hr.a,{item:!0,xs:8,style:{width:"100%",marginBottom:15,border:"1px solid #C4C4C4",borderRadius:4}},o.a.createElement(oa,{placeholder:"editor",content:oe||"",onContentChange:function(e){return function(e){se(e)}(e)},onDescriptionChange:function(e){return function(e){Ee(Object(u.a)(Object(u.a)({},X),{},{description:e}))}(e)}})),m&&m.length>0&&o.a.createElement(o.a.Fragment,null,o.a.createElement(Hr.a,{item:!0,xs:12},o.a.createElement(vt.a,{variant:"overline",className:ie.typography,display:"block",gutterBottom:!0},me("Attachments"))),o.a.createElement(Hr.a,{item:!0,xs:12},o.a.createElement(Pa,{files:m,maxFiles:y,removeAttachment:l,downloadAttachment:s}))),pe&&pe.length>0&&o.a.createElement(Hr.a,{item:!0,xs:12},o.a.createElement(vt.a,{variant:"overline",className:ie.typography,display:"block",gutterBottom:!0},me("Sub Tasks"))),pe&&pe.length>0&&o.a.createElement(Hr.a,{item:!0,xs:12},o.a.createElement(yt.a,{onDragEnd:function(e){if(e.destination){var t=function(e,t,a){var n=Array.from(e),r=n.splice(t,1),o=Object(S.a)(r,1)[0];return n.splice(a,0,o),n}(pe,e.source.index,e.destination.index);fe(t)}}},o.a.createElement(yt.c,{droppableId:"droppable"},(function(e){return o.a.createElement("div",Object.assign({},e.droppableProps,{ref:e.innerRef}),pe.map((function(e,t){return e.parentTask&&e.parentTask.id===X.id&&o.a.createElement(yt.b,{key:e.id,draggableId:"".concat(e.id),index:t},(function(t){return o.a.createElement("div",Object.assign({ref:t.innerRef},t.draggableProps,t.dragHandleProps),o.a.createElement(po,{record:e,onDelete:function(e){return function(e){if(e){var t=Object(d.a)(pe),a=pe.findIndex((function(t){return t.id===e.id}));t.splice(a,1),fe(Object(d.a)(t)),E(e.id)}}(e)},onEdit:function(e){return function(e){var t=Object(d.a)(pe);t[pe.findIndex((function(t){return t.id===e.id}))]=Object(u.a)({},e),fe(Object(d.a)(t)),k(Object(u.a)({},e))}(e)}}))}))})),e.placeholder)})))),o.a.createElement(Hr.a,{item:!0,xs:12,style:{textAlign:"left"}},o.a.createElement(dt.a,{startIcon:o.a.createElement(Nt.a,null),className:ie.addSubtaskButton,onClick:function(){return a()}},me("Add Subtask")))),o.a.createElement(Hr.a,{item:!0,xs:12},o.a.createElement(pa,{limit:g.limit,offset:g.offset,total:g.total,comments:v,loadComment:b,removeComment:f,userId:j})),o.a.createElement(vo,{handleAddComment:xe,taskId:t.id}))}function vo(e){var t=e.handleAddComment,a=e.taskId,n=fo(),c=Object(r.useState)(""),i=Object(S.a)(c,2),l=i[0],s=i[1],u=function(){var e=Object(D.a)(N.a.mark((function e(){return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t(l);case 2:e.sent&&s("");case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(r.useEffect)((function(){s("")}),[a]),o.a.createElement(Hr.a,{className:n.drawerFooter},o.a.createElement(Hr.a,{style:{flex:1}},o.a.createElement(Wt.a,{className:n.commentInput,size:"small",name:"name",placeholder:me("TaskEditor.comment"),variant:"outlined",value:l,onChange:function(e){return s(e.target.value)},onKeyDown:function(e){"Enter"===e.key&&u()}})),o.a.createElement(Hr.a,null,o.a.createElement(dt.a,{variant:"contained",color:"primary",className:st()(n.commentBtnActive,Object(M.a)({},n.commentBtnDisable,!l)),onClick:u},me("Add"))))}var go=a(903);function ho(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=Object(r.useState)(e),a=Object(S.a)(t,2),n=a[0],o=a[1],c=Object(r.useCallback)((function(){o(!0)}),[]),i=Object(r.useCallback)((function(){o(!1)}),[]);return[n,c,i]}var ko=Object(F.a)((function(){return{paper:{minWidth:"50%",padding:15}}}));function Eo(e){var t=e.open,a=e.handleClose,n=e.task,c=e.openSnackbar,i=Object(r.useState)({name:"",code:"",projectTypeSelect:1,isProject:!0,statusSelect:1}),l=Object(S.a)(i,2),s=l[0],d=l[1],m=Object(r.useState)({description:!1,assignedTo:!1}),p=Object(S.a)(m,2),f=p[0],b=p[1],v=ko(),g=function(e){b(Object(u.a)(Object(u.a)({},f),{},Object(M.a)({},e.target.name,e.target.checked))),e.target.checked&&d(Object(u.a)(Object(u.a)({},s),{},Object(M.a)({},e.target.name,n[e.target.name])))},h=function(){var e=Object(D.a)(N.a.mark((function e(){var t;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=Object(u.a)({},s),f.assignedTo&&(t.membersUserSet=[Object(u.a)({},s.assignedTo)]),f.description||(t.description=null),e.next=5,ke(Object(u.a)({},t));case 5:e.sent&&c({message:"".concat(s.name," ").concat(me("TaskEditor.projectCreateSuccess")),severity:"success",autoHideDuration:3e3}),a();case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(r.useEffect)((function(){n&&d({name:n.name,code:n.name})}),[n]),o.a.createElement(za.a,{open:t,onClose:a,"aria-labelledby":"form-dialog-title",classes:{paper:v.paper}},o.a.createElement(Aa.a,{id:"form-dialog-title"},me("Convert Task to Project")),o.a.createElement(La.a,null,o.a.createElement(Hr.a,null,o.a.createElement(Wt.a,{style:{width:"100%",marginBottom:15},placeholder:me("Project name"),variant:"outlined",value:s.name,name:"name",onChange:function(e){var t;d(Object(u.a)(Object(u.a)({},s),{},(t={},Object(M.a)(t,e.target.name,e.target.value),Object(M.a)(t,"code",e.target.value),t)))}})),o.a.createElement(Hr.a,null,o.a.createElement(vt.a,{variant:"caption"},me("Include")),o.a.createElement(Vr.a,null,o.a.createElement(xn.a,{control:o.a.createElement(Sn.a,{color:"primary",checked:f.description,onChange:g,name:"description"}),label:me("Task Description as Project Description")}),o.a.createElement(xn.a,{control:o.a.createElement(Sn.a,{color:"primary",checked:f.assignedTo,onChange:g,name:"assignedTo"}),label:me("Task User as Project Members")})))),o.a.createElement(Ha.a,null,o.a.createElement(dt.a,{onClick:h,variant:"outlined",color:"primary",style:{textTransform:"none"}},me("Convert"))))}var jo=a(204),yo=a(25),Oo=a(884),Co=a(885),xo=a(886),wo=yo.e.create({page:{flexDirection:"column",padding:20,fontSize:14},header:{flexDirection:"row",justifyContent:"space-between",fontSize:14,margin:"5px 0px"},title:{fontSize:30,fontWeight:800},caption:{color:"#8DA3A6",fontSize:14},section:{margin:"5px 0px"},taskName:{fontSize:16},sectionDetails:{margin:"5px 0px",fontSize:12,marginLeft:15},avatar:{width:30,height:30,position:"relative",alignItems:"center",borderRadius:"50%",justifyContent:"center"},img:{color:"transparent",width:"100%",height:"100%",objectFit:"cover",textAlign:"center",textIndent:1e4},commentContainer:{flexDirection:"row",alignItems:"flex-start",marginBottom:10},commentList:{marginLeft:20}});function So(e){var t,a,n=e.task,r=e.comments,c=e.subTasks;return o.a.createElement(yo.a,null,o.a.createElement(yo.d,{size:"A4",style:wo.page},o.a.createElement(yo.g,{style:wo.header},o.a.createElement(yo.f,null,P()().format("DD/MM/YYYY")),o.a.createElement(yo.f,null,"\u2022 ",null===(t=n.project)||void 0===t?void 0:t.fullName," - ",n.name)),o.a.createElement(yo.g,{style:wo.section},o.a.createElement(yo.f,{style:wo.title},n.name),o.a.createElement(yo.f,{style:wo.caption},me("Printed from Axelor open platform"))),o.a.createElement(yo.g,{style:wo.header},o.a.createElement(yo.g,{style:{flexDirection:"row"}},o.a.createElement(yo.f,null,"\u2022"),o.a.createElement(yo.f,{style:[wo.taskName,{marginLeft:10}]},null===(a=n.assignedTo)||void 0===a?void 0:a.fullName," ",n.name)),n.taskEndDate&&o.a.createElement(yo.f,null,me("Due Date"),": ",P()(n.taskEndDate).format("DD/MM/YYYY"))),o.a.createElement(yo.g,{style:wo.sectionDetails},n.priority&&o.a.createElement(yo.f,null,me("Priority"),": ",n.priority.name),n.status&&o.a.createElement(yo.f,null,me("Status"),": ",n.status.name),o.a.createElement(yo.f,null,me("Section"),": ",n.projectTaskSection&&n.projectTaskSection.name)),n.description&&o.a.createElement(yo.g,{style:wo.section},o.a.createElement(yo.f,null,me("Description"),": ",n.description)),o.a.createElement(yo.g,{style:wo.section},c&&c.length>0&&c.map((function(e,t){return o.a.createElement(yo.g,{key:t,style:{flexDirection:"row"}},o.a.createElement(yo.f,{style:[wo.taskName,{marginLeft:10}]},"\u2022"),o.a.createElement(yo.f,{style:[wo.taskName,{marginLeft:15}]},e.name))}))),o.a.createElement(yo.g,{style:wo.section},r&&r.map((function(e,t){var a="notification"===e.type?JSON.parse(e.body):"";return o.a.createElement(yo.g,{key:t,style:wo.commentList},o.a.createElement(yo.g,{style:wo.commentContainer},o.a.createElement(yo.g,{style:wo.avatar},o.a.createElement(yo.b,{style:wo.img,source:"User",src:da.a})),o.a.createElement(yo.g,{style:{flexDirection:"column"}},o.a.createElement(yo.g,{style:{flexDirection:"column",paddingLeft:20}},o.a.createElement(yo.g,{style:{flexDirection:"row"}},o.a.createElement(yo.f,null,e.$author&&e.$author.fullName),o.a.createElement(yo.f,{style:{color:"#D3D3D3",paddingLeft:"5px"}}," ","- ",P()(e.$eventTime).format("DD/MM h:mm")," ")),a?o.a.createElement(yo.g,{style:{flexDirection:"column"}},o.a.createElement(yo.f,{style:{fontWeight:600,textAlign:"left"}},a.title),o.a.createElement(yo.g,{style:{paddingLeft:20,display:a.tracks.length>0?"flex":"none",flexDirection:"column",textAlign:"left"}},a.tracks.map((function(e,t){return o.a.createElement(yo.f,{key:t},e.displayValue?o.a.createElement(yo.g,null,o.a.createElement(yo.f,{style:{fontWeight:600}},"\u2022 ",e.title," : "),o.a.createElement(yo.f,null,e.oldDisplayValue&&e.oldDisplayValue+" \xbb "," ",e.displayValue)):o.a.createElement(yo.g,null,o.a.createElement(yo.f,{style:{fontWeight:600}},"\u2022 ",e.title," : "),o.a.createElement(yo.f,null,e.oldValue&&e.oldValue+" \xbb "," ",e.value)))})))):o.a.createElement(yo.f,{style:{textOverflow:"ellipsis",wordBreak:"break-word"}},e.body)))))})))))}var To=Object(F.a)((function(){return{paper:{minWidth:"50%",width:"100%",height:"100%"},pdfViewer:{width:"100%",height:"100%"},dialogContent:{overflow:"hidden",padding:0},pdfNavigation:{display:"flex",justifyContent:"space-between"},button:{margin:10,color:"#3f51b5",border:"1px solid rgba(63, 81, 181, 0.5)",textTransform:"none"},pdfView:{overflow:"auto",height:"100%",width:"100%",display:"flex",flexDirection:"column",justifyContent:"space-between"}}}));function No(e){var t=e.open,a=e.handleClose,n=e.task,c=e.subTasks,i=To(),l=Object(r.useState)(null),s=Object(S.a)(l,2),u=s[0],d=s[1],m=Object(r.useState)(1),p=Object(S.a)(m,2),f=p[0],b=p[1],v=Object(r.useState)(1),g=Object(S.a)(v,2),h=g[0],k=g[1],E=Object(r.useState)(!0),j=Object(S.a)(E,2),y=j[0],O=j[1],C=Object(r.useState)(),x=Object(S.a)(C,2),w=x[0],T=x[1],I=Object(Ot.a)("(max-width:600px)"),P=Object(r.useRef)(null);return Object(r.useEffect)((function(){var e=n&&n.id;e&&t&&function(){var t=Object(D.a)(N.a.mark((function t(){var a,r,i;return N.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return O(!0),t.next=3,Be({id:e,relatedModel:"com.axelor.apps.project.db.ProjectTask",limit:25});case 3:return a=t.sent,r=a&&a.comments,t.next=7,Object(yo.h)(o.a.createElement(So,{task:n,comments:r,subTasks:c})).toBlob();case 7:i=t.sent,P.current=window.URL.createObjectURL(i),T(P.current),d(r||null),O(!1);case 12:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}()();return function(){P.current&&(window.URL.revokeObjectURL(P.current),P.current=null)}}),[n,c,t]),o.a.createElement(za.a,{open:t,onClose:a,"aria-labelledby":"form-dialog-title",classes:{paper:i.paper}},o.a.createElement(Aa.a,{id:"form-dialog-title"},me("Download")),o.a.createElement(La.a,{className:i.dialogContent},t&&!y&&w&&(I?o.a.createElement("div",{className:i.pdfView},o.a.createElement(jo.a,{file:w,onLoadSuccess:function(e){return b(e.numPages)},loading:o.a.createElement(gr.a,null)},o.a.createElement(jo.b,{renderMode:"svg",pageNumber:h,width:window.innerWidth-64,height:window.innerHeight-64})),o.a.createElement("div",{className:i.pdfNavigation},o.a.createElement(mt.a,{disabled:h<=1,onClick:function(){return k((function(e){return e-1}))}},o.a.createElement(Oo.a,null)),o.a.createElement("p",null,me("Page")," ",h," of ",f),o.a.createElement(mt.a,{disabled:h>=f,onClick:function(){return k((function(e){return e+1}))}},o.a.createElement(Co.a,null)))):o.a.createElement(yo.c,{className:i.pdfViewer},o.a.createElement(So,{task:n,comments:u,subTasks:c})))),o.a.createElement(Ha.a,null,I&&o.a.createElement(dt.a,{variant:"outlined",className:i.button,startIcon:o.a.createElement(xo.a,null),onClick:function(){var e=document.createElement("a");e.href=w,e.download="".concat(n&&n.name||"Task",".pdf"),e.dispatchEvent(new MouseEvent("click"))}},me("Download")),o.a.createElement(dt.a,{variant:"outlined",color:"primary",style:{textTransform:"none"},onClick:a},me("Ok"))))}jo.c.GlobalWorkerOptions.workerSrc="//cdnjs.cloudflare.com/ajax/libs/pdf.js/".concat(jo.c.version,"/pdf.worker.js");var Do=Object(F.a)((function(e){return{drawer:{flexShrink:0,height:"100%",overflow:"hidden"},drawerPaper:Object(M.a)({width:"50%"},e.breakpoints.only("xs"),{width:"100%"}),formView:{height:"calc(100% - ".concat(50,"px - 66px)"),marginTop:50,overflowY:"auto"},fullScreenForm:{marginTop:50,height:"100%",boxShadow:"0px 2px 4px -1px rgba(0,0,0,0.2), 0px 4px 5px 0px rgba(0,0,0,0.14), 0px 1px 10px 0px rgba(0,0,0,0.12)"}}}));var Io=function(e){var t=e.taskId,a=e.showFullScreen,n=e.showDrawer,c=e.onFullScreenClose,i=e.onDrawerClose,l=e.openSnackbar,s=e.copyToClipboard,m=Er(),p=m.tasks,f=m.onCardAdd,b=m.onCardEdit,v=m.project,g=m.userId,h=m.maxFiles,k=m.refresh,E=m.addTaskToBeDeleted,j=ho(),y=Object(S.a)(j,3),O=y[0],C=y[1],x=y[2],w=ho(),T=Object(S.a)(w,3),I=T[0],F=T[1],M=T[2],B=ho(),z=Object(S.a)(B,3),A=z[0],L=z[1],R=z[2],H=ho(),V=Object(S.a)(H,3),W=V[0],Y=V[1],q=V[2],U=ho(),_=Object(S.a)(U,3),X=_[0],$=_[1],G=_[2],K=Object(r.useState)([]),J=Object(S.a)(K,2),Q=J[0],Z=J[1],ee=Object(r.useState)([]),te=Object(S.a)(ee,2),ne=te[0],re=te[1],oe=Object(r.useState)({limit:4,total:0,offset:0}),ce=Object(S.a)(oe,2),ie=ce[0],pe=ce[1],fe=Do(),be=Object(r.useMemo)((function(){return p.find((function(e){return e.id===t}))}),[p,t]),ve=Object(r.useMemo)((function(){return p.filter((function(e){return t&&e.parentTask&&e.parentTask.id===t}))}),[p,t]),ge=Object(r.useMemo)((function(){return de(be,v)}),[be,v]),he=v&&v.id,ke=Object(r.useCallback)(Object(D.a)(N.a.mark((function e(){var t;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(be){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,je({name:"New Sub Task",sequence:1,project:{id:he},taskDate:P()(),assignedTo:{id:g},parentTask:{id:be.id},projectTaskSection:be.projectTaskSection&&be.projectTaskSection.id?{id:be.projectTaskSection.id,$version:be.projectTaskSection.version}:null});case 4:(t=e.sent)&&f(t);case 6:case"end":return e.stop()}}),e)}))),[be,f,he,g]),Ee=Object(r.useCallback)((function(){E(t,1e4)}),[t,E]),ye=Object(r.useCallback)(function(){var e=Object(D.a)(N.a.mark((function e(t){var a,n;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t&&t.stopPropagation(),a=ge?be.statusBeforeComplete:ue(v),e.next=4,Oe(Object(u.a)(Object(u.a)({},be),{},{status:a,statusBeforeComplete:be.status}));case 4:(n=e.sent)&&b(Object(u.a)(Object(u.a)({},n),{},{"priority.technicalTypeSelect":be["priority.technicalTypeSelect"]}));case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[b,ge,be,v]),Ce=function(){var e=Object(D.a)(N.a.mark((function e(t){var a,n,r,o,c,i,l,s=arguments;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=s.length>1&&void 0!==s[1]?s[1]:0,n=le(t),o=a+(r=1e5)<n&&n.size?a+r:n&&n.size,c=n&&n.slice(a,o),i=se(t,a),e.next=8,Ze(c,i);case 8:(l=e.sent)&&l.id?xe(l):a<n&&n.size&&(l.fileId&&(t.id=l.fileId),Ce(t,r+a));case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),xe=function(){var e=Object(D.a)(N.a.mark((function e(t){var a,n;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={fileName:t.fileName,metaFile:{id:t.id},relatedId:be.id,relatedModel:"com.axelor.apps.project.db.ProjectTask"},e.next=3,Je(a);case 3:(n=e.sent)&&n.length?(Z((function(e){return[].concat(Object(d.a)(e||[]),[n[0]])})),l({severity:"success",message:"TaskEditor.uploadSuccess"})):l({severity:"error",message:"TaskEditor.uploadError"});case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),we=function(e){!function(e){for(var t=0;t<e.length;t++)e[t].id||Ce(e[t])}(Q?Q.concat(Object(d.a)(ae(e.target.files,h))):ae(e.target.files))},Se=function(){var e=Object(D.a)(N.a.mark((function e(t){var a;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,nt([{id:t.id,version:t.version}]);case 2:e.sent?(a=Q.findIndex((function(e){return JSON.stringify(e)===JSON.stringify(t)})),Q.splice(a,1),Z(Q),l({severity:"success",message:"TaskEditor.deleteSuccess"})):l({severity:"error",message:"TaskEditor.error"});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Te=Object(r.useCallback)((function(e){!function(e){ot.apply(this,arguments)}(e)}),[]),Ne=function(){var e=Object(D.a)(N.a.mark((function e(){var a,n,r,o;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=ie.limit,n=ie.offset,e.next=3,Be({offset:n+4,limit:a,id:t,relatedModel:"com.axelor.apps.project.db.ProjectTask"});case 3:if(!(r=e.sent)){e.next=9;break}return o=[].concat(Object(d.a)(ne),Object(d.a)(r.comments)),re(o),pe(Object(u.a)(Object(u.a)({},ie),{},{offset:r.offset,total:r.total})),e.abrupt("return",r);case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),De=function(){var e=Object(D.a)(N.a.mark((function e(t){var a,n,r;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=ie.total,e.next=3,Ae(t);case 3:(n=e.sent)&&n.id?(r=ne.findIndex((function(e){return e.id===n.id})),ne.splice(r,1),re(ne),pe(Object(u.a)(Object(u.a)({},ie),{},{total:a-1})),l({message:"TaskEditor.removeSuccess"})):l({message:"TaskEditor.error",severity:"error"});case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Ie=Object(r.useCallback)(function(){var e=Object(D.a)(N.a.mark((function e(a){var n;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,Re({id:t,entityModel:"com.axelor.apps.project.db.ProjectTask",body:a});case 4:if(!(n=e.sent)){e.next=8;break}return re((function(e){return[n].concat(Object(d.a)(e))})),e.abrupt("return",n);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[t]);Object(r.useEffect)((function(){var e=!0;return t&&tt(t).then((function(t){return t&&e&&Z(t)})),function(){e=!1,Z([]),re([]),G()}}),[t,k,G]);var Pe=be&&be.version;return Object(r.useEffect)((function(){var e=!0;return t&&(a||n)&&Object(D.a)(N.a.mark((function a(){var n;return N.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,Be({id:t,relatedModel:"com.axelor.apps.project.db.ProjectTask"});case 2:(n=a.sent)&&e&&(re(n.comments),pe({limit:4,offset:n.offset,total:n.total}));case 4:case"end":return a.stop()}}),a)})))(),function(){e=!1}}),[t,Pe,a,n,k]),Object(r.useEffect)((function(){be||!n&&!a||(c(),i())})),o.a.createElement(o.a.Fragment,null,a&&o.a.createElement(vr,{open:a,handleFullScreenClose:c,toolbar:o.a.createElement(uo,{isFullScreen:!0,toggleStatus:ye,isCompleted:ge,attachmentList:Q,selectFile:we,addNewSubtask:ke,subTaskCount:ve.length,copyToClipboard:s,handleClose:c,onMenuTaskDelete:Ee,openPdfDialog:L,openSubtaskOfAlert:$,openDuplicateTaskDialog:Y,openTaskToProjectDialog:F})},o.a.createElement("div",{className:fe.fullScreenForm},o.a.createElement(bo,{task:be,addNewSubtask:ke,permanentlyDeleteTask:C,closeSubtaskOfClicked:G,isSubtaskOfClicked:X,removeAttachment:Se,downloadAttachment:Te,attachmentList:Q,removeComment:De,addComment:Ie,loadMoreComments:Ne,comments:ne,commentParameters:ie}))),o.a.createElement(go.a,{className:fe.drawer,variant:"persistent",anchor:"right",open:n,classes:{paper:fe.drawerPaper}},be&&o.a.createElement(o.a.Fragment,null,o.a.createElement(uo,{isFullScreen:!1,toggleStatus:ye,isCompleted:ge,attachmentList:Q,selectFile:we,addNewSubtask:ke,subTaskCount:ve.length,copyToClipboard:s,handleClose:i,onMenuTaskDelete:Ee,openPdfDialog:L,openSubtaskOfAlert:$,openDuplicateTaskDialog:Y,openTaskToProjectDialog:F}),o.a.createElement("div",{className:fe.formView},o.a.createElement(bo,{task:be,addNewSubtask:ke,permanentlyDeleteTask:C,closeSubtaskOfClicked:G,isSubtaskOfClicked:X,removeAttachment:Se,downloadAttachment:Te,attachmentList:Q,removeComment:De,addComment:Ie,loadMoreComments:Ne,comments:ne,commentParameters:ie})))),be&&o.a.createElement(o.a.Fragment,null,O&&o.a.createElement(Wa,{open:O,onClose:x,onConfirm:function(){i(),c(),x(),E(t)},title:me("Delete Task")}),o.a.createElement(Eo,{open:I,handleClose:M,task:be,openSnackbar:l}),A&&o.a.createElement(No,{open:A,handleClose:R,task:be,subTasks:ve}),o.a.createElement(Yr,{open:W,handleClose:q,task:be,attachmentList:Q,onCardAdd:f,openSnackbar:l})))},Po=Object(F.a)((function(e){return{root:{height:"100%",overflow:"hidden",position:"relative"},overlay:{position:"absolute",height:"100%",width:"100%",background:"rgba(0, 0, 0, 0.1)",zIndex:1e3}}})),Fo=function(){var e=Object(D.a)(N.a.mark((function e(){var t,a=arguments;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.length>0&&void 0!==a[0]?a[0]:[],e.abrupt("return",Promise.all(t.map((function(e){return Oe(e,!0)}))));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Mo=function(){var e=Object(D.a)(N.a.mark((function e(){var t,a=arguments;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.length>0&&void 0!==a[0]?a[0]:[],e.abrupt("return",Promise.all(t.map((function(e){return Ie(e,!0)}))));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();function Bo(e){return zo.apply(this,arguments)}function zo(){return(zo=Object(D.a)(N.a.mark((function e(t){var a,n,r,o,c,i,l,s,m,p,f,b,v,g,h,k,E,j,y,O,C,x,w;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=t.columns,n=t.sourceColumn,r=t.destinationColumn,o=t.sourceIndex,c=t.destinationIndex,i=function(e){return a.findIndex((function(t){return t.id===e}))},s=function(e,t){return t.find((function(t){return t.id===e})).sequence},m=function(e,t){return(t.find((function(t){return t.id===e})).projectTaskSection||{}).id},p=function(e){return e.map((function(e,t){return Object(u.a)(Object(u.a)({},e),{},{sequence:t+1})}))},f=function(e,t){return e.filter((function(e){return e.sequence!==s(e.id,t)||(e.projectTaskSection||{}).id!==m(e.id,t)}))},b=(l=function(e){return Object(d.a)(a.find((function(t){return t.id===e})).records||[])})(n.id),!(n.id===r.id)){e.next=16;break}return v=p(ce(b,o,c)),g=f(v,b),h=a.slice(),k=i(n.id),h[k]=Object(u.a)(Object(u.a)({},h[k]),{},{records:v}),e.abrupt("return",[h,Fo(g)]);case 16:return E=l(r.id),j=b[o],b.splice(o,1),E.splice(c,0,j),y=p(E).map((function(e,t){return Object(u.a)(Object(u.a)({},e),{},{projectTaskSection:r&&-1===r.id?null:{id:r.id,name:r.name,$version:r.version}})})),O=f(y,E),C=a.slice(),x=i(n.id),C[x]=Object(u.a)(Object(u.a)({},C[x]),{},{records:b}),w=i(r.id),C[w]=Object(u.a)(Object(u.a)({},C[w]),{},{records:y}),e.abrupt("return",[C,Fo(O)]);case 28:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ao(e){var t=e.projectId,a=Object(r.useReducer)((function(e){return e+1}),0),n=Object(S.a)(a,2),c=n[0],i=n[1],l=Object(r.useState)([]),s=Object(S.a)(l,2),m=s[0],p=s[1],f=Object(r.useState)(!1),b=Object(S.a)(f,2),v=b[0],g=b[1],h=Object(r.useState)(!1),k=Object(S.a)(h,2),E=k[0],j=k[1],y=Object(r.useState)(null),O=Object(S.a)(y,2),C=O[0],x=O[1],w=Object(r.useState)([]),T=Object(S.a)(w,2),I=T[0],F=T[1],M=Object(r.useState)(null),B=Object(S.a)(M,2),z=B[0],A=B[1],L=Object(r.useState)(),R=Object(S.a)(L,2),H=R[0],V=R[1],W=Object(r.useState)([]),Y=Object(S.a)(W,2),q=Y[0],U=Y[1],_=Object(r.useState)(),X=Object(S.a)(_,2),$=X[0],G=X[1],K=Object(r.useState)({message:"",open:!1,severity:"success"}),J=Object(S.a)(K,2),Q=J[0],ee=J[1],te=Object(r.useState)([]),ae=Object(S.a)(te,2),re=ae[0],ie=ae[1],le=Object(r.useState)([]),se=Object(S.a)(le,2),ue=se[0],de=se[1],pe=Object(r.useState)([]),fe=Object(S.a)(pe,2),be=fe[0],ve=fe[1],ge=Object(r.useState)(null),ke=Object(S.a)(ge,2),Ee=ke[0],ye=ke[1],Oe=Object(r.useState)({code:"incompleteTasks",value:"Incomplete tasks"}),Ce=Object(S.a)(Oe,2),we=Ce[0],Te=Ce[1],Ne=Object(r.useState)(null),De=Object(S.a)(Ne,2),Ie=De[0],Pe=De[1],Me=Object(r.useState)(null),Be=Object(S.a)(Me,2),ze=Be[0],Ae=Be[1],Le=Object(r.useState)(!1),Re=Object(S.a)(Le,2),He=Re[0],We=Re[1],qe=Po(),_e=z&&z["user.id"],$e=function(){ee(Object(u.a)(Object(u.a)({},Q),{},{open:!1}))},Ke=function(e){ee(Object(u.a)({open:!0},e))},Je=o.a.useCallback((function(e){return V(e)}),[]),Qe=o.a.useCallback(function(){var e=Object(D.a)(N.a.mark((function e(t){var a;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ue(t);case 2:return a=e.sent,U((function(e){return-1===e.find((function(e){return e.id===a.id}))&&e.push(a),Object(d.a)(e)})),e.abrupt("return",a);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[]),Ze=o.a.useCallback(function(){var e=Object(D.a)(N.a.mark((function e(t){return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Xe(t);case 2:U((function(e){var a=e.find((function(e){return e.id===t.id}));return-1!==a&&e.splice(a,1),Object(d.a)(e)}));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[]),et=o.a.useCallback((function(e){G(e)}),[]),tt=o.a.useCallback((function(e){return m.findIndex((function(t){return t.id===e}))}),[m]),at=o.a.useCallback((function(e,t){var a=ue.find((function(t){return t.id===e}))||{};if(t||a.id){var n=m[tt(t)]&&m[tt(t)].records.findIndex((function(t){return t.id===e}));return n<0&&(n=m[tt(t)].records.length),n}}),[m,tt,ue]),nt=o.a.useCallback((function(e,t){var a=e.column;-1===tt(a.id)?F((function(e){return[].concat(Object(d.a)(e||[]),[a])})):alert("Column with same name already exists.")}),[tt]),rt=o.a.useCallback(function(){var e=Object(D.a)(N.a.mark((function e(t){var a,n,r,o,c=arguments;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=!(c.length>1&&void 0!==c[1])||c[1],n=!(c.length>2&&void 0!==c[2])||c[2],!ue.find((function(e){return e.id===t}))){e.next=7;break}return e.next=5,xe(t);case 5:-1!==(r=e.sent).status?(o=co(t,ue),de(ue.filter((function(e){return!o.includes(e.id)}))),ve((function(e){return e.filter((function(e){return!o.includes(e.id)}))})),a&&Ke({severity:"success",message:"TaskEditor.taskDeleteSuccess"})):n&&Ke({severity:"error",message:r&&r.data&&r.data.title});case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[ue]),ot=o.a.useCallback((function(e){de((function(t){return[].concat(Object(d.a)(t),[Object(u.a)({},e)])}))}),[]),it=function(e){var t=co(e,ue);ve((function(a){return a.filter((function(a){return a.id===e&&a.timer&&clearTimeout(a.timer),!t.includes(a.id)}))}))},lt=o.a.useCallback((function(e){var t=Object(d.a)(ue),a=t&&t.findIndex((function(t){return t.id===e.id}));a>-1&&(t[a]=e,de(t))}),[ue]),st=o.a.useCallback(function(){var e=Object(D.a)(N.a.mark((function e(t){var a,n,r,o,c,i,l,s;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.column,n=t.index,r=t.source,o=t.record,e.next=3,Bo({columns:m,destinationColumn:a,destinationIndex:n,sourceColumn:r,sourceIndex:at(o.id,r.id)});case 3:c=e.sent,i=Object(S.a)(c,2),l=i[0],s=i[1],We(!0),s.then((function(e){e.some((function(e){return-1===e.status}))?(de((function(e){return Object(d.a)(e)})),Ke({severity:"error",message:"TaskEditor.concurrencyError"})):de((function(t){var a=Object(d.a)(t);return e.forEach((function(e){var t=e&&e.data&&e.data[0];if(t){var n=a.findIndex((function(e){return e.id===t.id}));n>-1&&(a[n]=Object(u.a)(Object(u.a)({},a[n]),t))}})),a})),We(!1)})).catch((function(){We(!1)})),p(l);case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[m,at]),ut=o.a.useCallback((function(e){var t=e.column,a=e.index,n=tt(t.id),r=ce(m,n,a).map((function(e,t){return Object(u.a)(Object(u.a)({},e),{},{sequence:t})})),o=r.filter((function(e){return e.sequence!==(t=e.id,m.find((function(e){return e.id===t})).sequence);var t})).map((function(e){return{id:e.id,version:e.version,sequence:e.sequence}}));We(!0),Mo(o).then((function(e){e.some((function(e){return-1===e.status}))?(F((function(e){return Object(d.a)(e)})),Ke({severity:"error",message:"TaskEditor.concurrencyError"})):F((function(t){var a=Object(d.a)(t);return e.forEach((function(e){var t=e&&e.data&&e.data[0];if(t){var n=a.findIndex((function(e){return e.id===t.id}));n>-1&&(a[n]=Object(u.a)(Object(u.a)({},a[n]),t))}})),a})),We(!1)})).catch((function(){We(!1)})),p(r)}),[m,tt]),dt=o.a.useCallback((function(e){var t=e.column,a=tt(t.id);p((function(e){var t=e.slice();return t[a]=Object(u.a)(Object(u.a)({},t[a]),{},{collapsed:!t[a].collapsed}),t}))}),[tt]),mt=o.a.useCallback((function(e){var t=e.column;F((function(e){return e.map((function(e){return e.id===t.id?Object(u.a)(Object(u.a)({},e),{},{name:t.name,version:t.version}):e}))}))}),[]),pt=o.a.useCallback(function(){var e=Object(D.a)(N.a.mark((function e(t){var a,n;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.column,e.next=3,Fe(a.id);case 3:-1!==(n=e.sent).status?(F((function(e){return e.filter((function(e){return e.id!==a.id}))})),Ke({severity:"success",message:"TaskEditor.sectionDeleteSuccess"})):Ke({severity:"error",message:n&&n.data&&n.data.title});case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[]),ft=function(){var e=Object(D.a)(N.a.mark((function e(a){var n,r,o,c=arguments;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=c.length>1&&void 0!==c[1]?c[1]:1,(r=m[n])||(r=m[0]),e.prev=3,e.next=6,je({name:me("New Task"),sequence:1,project:t&&{id:t},taskDate:P()(),assignedTo:{id:_e},projectTaskSection:-1===r.id?null:{id:r.id,$version:r.version,name:r.name}});case 6:(o=e.sent)&&(de((function(e){return[o].concat(Object(d.a)(e))})),Ke({severity:"success",message:"TaskEditor.taskAddSuccess"})),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(3),Ke({severity:"error",message:"TaskEditor.taskAddError"});case 13:case"end":return e.stop()}}),e,null,[[3,10]])})));return function(t){return e.apply(this,arguments)}}();var bt=o.a.useCallback((function(e,t){navigator.clipboard.writeText(e||window.location.href),ee({open:!0,message:t||me("Copied to clipboard")})}),[]),vt=function(e,t){j(e),e&&t&&x(t)},gt=function(e,t){g(e),e&&t&&x(t)};Object(r.useEffect)((function(){Object(D.a)(N.a.mark((function e(){var a;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ct(t,{related:{projectTaskPrioritySet:["id","name","technicalTypeSelect","version"],projectTaskStatusSet:["id","isCompleted","isDefaultCompleted","name","sequence","version"]}});case 2:a=e.sent,ye(a);case 4:case"end":return e.stop()}}),e)})))()}),[t,c]),Object(r.useEffect)((function(){Object(D.a)(N.a.mark((function e(){var t,a,n,r,o,i,l,s,u,m;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ve();case 2:return t=e.sent,e.next=5,Ye();case 5:return a=e.sent,e.next=8,Se();case 8:return n=e.sent,e.next=11,Ge("com.axelor.apps.project.db.ProjectTask");case 11:if(e.t0=e.sent,e.t0){e.next=14;break}e.t0={};case 14:r=e.t0,o=r.jsonFields,i=void 0===o?{}:o,l=r.fields,u=(s=void 0===l?[]:l).filter((function(e){return!i[e.name]&&!["id","version"].includes(e.name)})),m=Object.keys(i).reduce((function(e,t){var a=i[t],n=s.find((function(e){return e.name===t}));return[].concat(Object(d.a)(e),Object(d.a)(Object.keys(a).map((function(e){return oe(n||{name:t},a[e])}))))}),[]),ie([].concat(Object(d.a)(u),Object(d.a)(m))),A(t),U(a),F(n),c&&Ke({severity:"success",message:"Refreshed!!"});case 26:case"end":return e.stop()}}),e)})))()}),[c]);var ht=H&&H.query;Object(r.useEffect)((function(){if(re.length>0){var e=[].concat(ht?[ht]:[]),a=function(t,a,n){return e.push({fieldName:t,operator:a,value:n})};t&&a("project.id","=",t),$&&a("name","like",$);var n={},r=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];function a(e){var n=e.criteria,r=e.fieldName,o=e.operator,c=e.value;if(n&&Array.isArray(n))return Object(u.a)(Object(u.a)({},e),{},{criteria:n.map(a)});if(r&&o){var i=t.find((function(e){return e.name===r}));if(i&&i.target){var l=i.targetName,s=function(e){return e&&("object"===typeof e?e.id:e)},d="".concat(r).concat(l?".".concat(l):"");return["in","notin"].includes(o.toLowerCase())&&(d="".concat(r,".id")),Object(u.a)(Object(u.a)({},e),{},{fieldName:d,value:Array.isArray(c)?c.map(s):s(c)})}if(["isTrue","isFalse"].includes(o))return Object(u.a)(Object(u.a)({},e),{},{operator:"=",value:"isTrue"===o?"true":"false"})}return e}return a({criteria:e})}(e,re);r.criteria.length>0&&(n=Object(u.a)(Object(u.a)({},r),{},{operator:"and"})),function(e){return he.apply(this,arguments)}({data:n}).then((function(e){return e&&de(e)}))}}),[re,ht,$,t]);var kt=null===we||void 0===we?void 0:we.code,Et=null===Ie||void 0===Ie?void 0:Ie.code;return Object(r.useEffect)((function(){var e=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],a=[{id:-1,sequence:0,records:e&&e.length&&Z((e||[]).filter((function(e){return!e.projectTaskSection})),"sequence")}];return t&&t.forEach((function(t){a.push(Object(u.a)(Object(u.a)({},t),{},{records:ne(e,t)}))})),Z(a,"sequence")}(oo(ue,kt,Et,{userId:_e,project:Ee}),I)||[],t=ze||{},a=t.code,n=void 0===a?"sequence":a,r=t.sortFunction,o=void 0===r?Z:r,c=t.fieldName;p((function(t){return e.map((function(e){var a=(t||[]).find((function(t){return t.id===e.id}));return Object(u.a)(Object(u.a)(Object(u.a)({},a),e),{},{records:o(e.records||[],n,c)})}))}))}),[ue,I,ze,kt,Et,_e,Ee]),Object(r.useEffect)((function(){var e=be.find((function(e){return e.deleteNow}));e&&(C===e.id&&(E||v)||rt(e.id))}),[E,v,be,C,rt]),o.a.createElement(kr,Object.assign({columns:m,onCardAdd:ot,onCardEdit:lt,onCardMove:st,onCardDelete:rt,onColumnAdd:nt,onColumnMove:ut,onColumnToggle:dt,onColumnDelete:pt,onColumnUpdate:mt,sections:I,searchFilter:H,filters:q,handleChangeFilter:Je,handleSaveFilter:Qe,handleDeleteFilter:Ze,handleContentSearch:et,fields:re,addNewTask:ft,project:Ee,tasks:ue,selectedTaskId:C,copyToClipboard:bt,handleSetMenuFilter:function(e){Te(e)},menuFilter:we,filter:Ie,handleSetFilter:function(e){Pe(e)},sortColumnName:ze,handleSetSortColumnName:function(e){ze&&ze.code===e.code&&(e={code:"sequence",name:me("TaskEditor.none"),sortFunction:Z}),Ae(e)},selectedProject:Ee,userId:_e,language:z&&z["user.lang"],projectId:t,userData:z,handleListKeyDown:function(e){"Tab"===e.key&&e.preventDefault()},getAvatarColor:ro,openTaskInDrawer:E,toggleTaskDrawer:vt,toggleTaskFullScreen:gt,openSnackbar:Ke,closeSnackbar:$e,forceRefresh:i,refresh:c,addTaskToBeDeleted:function e(t){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(t){var n=a<=0,r=co(t,ue),o=null;n||(o=setTimeout((function(){e(t)}),a),Ke({severity:"success",message:"TaskEditor.taskDeleteSuccess",isAction:!0,onActionClick:function(){clearTimeout(o),it(t)},autoHideDuration:a,clickAway:!0}));var c=function(e){var a=e.id===t;return a&&e.timer&&clearTimeout(e.timer),a};ve((function(e){return e.some(c)?e.map((function(e){return e.id===t?Object(u.a)(Object(u.a)({},e),{},{deleteNow:n,timer:o}):e})):[].concat(Object(d.a)(e),Object(d.a)(r.map((function(e){return{id:e,deleteNow:e===t&&n,timer:e===t?o:null}}))))}))}},removeTaskToBeDeleted:it,tasksToBeDeleted:be},e),o.a.createElement("div",{className:qe.root},He&&o.a.createElement("div",{className:qe.overlay}),o.a.createElement(to,null),o.a.createElement(Io,{taskId:C,showFullScreen:v,showDrawer:E,onFullScreenClose:function(){return gt(!1)},onDrawerClose:function(){return vt(!1)},openSnackbar:Ke,copyToClipboard:bt}),o.a.createElement(Ca,Object.assign({},Q,{closeSnackbar:$e}))))}function Lo(){var e=o.a.useMemo((function(){return new URL(window.location).searchParams.get("id")}),[]);return o.a.createElement(Ao,{projectId:e})}var Ro=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.language,a=e.theme,n={};return"ar"!==t&&"he"!==t||(n.direction="rtl"),"dark"===a&&(n.palette={type:"dark"}),n}({}),Ho=Ro.direction,Vo=Ro.palette;var Wo=function(){return o.a.createElement(x,{direction:Ho,palette:Vo},o.a.createElement(s.a,{utils:l.a},o.a.createElement("div",{className:"app"},o.a.createElement(Lo,null))))};a(801);i.a.render(o.a.createElement(Wo,null),document.getElementById("root"))}},[[508,1,2]]]);