<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<object-views xmlns="http://axelor.com/xml/ns/object-views"
  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
  xsi:schemaLocation="http://axelor.com/xml/ns/object-views http://axelor.com/xml/ns/object-views/object-views_7.2.xsd">

  <grid name="move-line-grid" orderBy="-date,-name" title="Move lines"
    model="com.axelor.apps.account.db.MoveLine" canArchive="false" canDelete="false" canNew="false">
    <toolbar>
      <button name="accountingReconcileBtn" title="Accounting Reconcile"
        onClick="action-method-accounting-reconcile"/>
      <button name="calculateBtn" title="Calculation of totals"
        onClick="action-account-move-line-method-calculate-balance"/>
    </toolbar>
    <hilite color="info" if="$get('move.statusSelect') == 1"/>
    <hilite color="danger" if="$get('move.statusSelect') == 4"/>
    <field name="name" width="135"/>
    <field name="date" width="90" onChange="account-move-line-method-date-onchange"/>
    <field name="move.period" width="100" canView="false"/>
    <field name="move.journal" width="140"/>
    <field name="partner" form-view="partner-form" grid-view="partner-grid"/>
    <field name="account" form-view="account-form" grid-view="account-grid"
      onChange="action-move-line-method-compute-analytic-distribution"/>
    <field name="account.analyticDistributionAuthorized" hidden="true"/>
    <field name="account.analyticDistributionRequiredOnMoveLines" hidden="true"/>
    <field name="move.company" form-view="company-form" grid-view="company-grid" width="120"
      if="__config__.app.getApp('base')?.getEnableMultiCompany()"/>
    <field name="debit" aggregate="sum" width="100" x-scale="companyCurrencyDecimals"/>
    <field name="credit" aggregate="sum" width="100" x-scale="companyCurrencyDecimals"/>
    <field name="amountRemaining" aggregate="sum" width="100"
      x-scale="companyCurrencyDecimals"/>
    <field name="taxLineSet" domain="self.endDate > :date OR self.endDate IS NULL"
      readonlyIf="!account.isTaxAuthorizedOnMoveLine || move.statusSelect == 3"
      requiredIf="(account.isTaxAuthorizedOnMoveLine &amp;&amp; account.accountType.technicalTypeSelect == 'tax' &amp;&amp; [3,4].includes(move.functionalOriginSelect)) || account.isTaxRequiredOnMoveLine"
      onChange="account-move-line-update-tax-equiv" widget="TagSelect"/>
    <field name="analyticDistributionTemplate"
      if="__config__.app.getApp('account')?.getManageAnalyticAccounting()"
      grid-view="analytic-distribution-template-grid"
      form-view="analytic-distribution-template-form"
      onChange="action-move-line-method-analytic-distribution-template-onchange"
      requiredIf="(!analyticMoveLineList || !analyticMoveLineList.length > 0) &amp;&amp; account.analyticDistributionAuthorized &amp;&amp; account.analyticDistributionRequiredOnMoveLines"/>
    <field name="move.statusSelect" width="90"/>
    <field name="reconcileGroup" width="120"/>
    <field name="origin" width="120"/>
    <field name="description"/>
    <field name="dueDate"/>
    <button name="viewMoveBtn" title="View entry" icon="fa-external-link"
      onClick="action-move-line-view-open-move"/>
    <field name="analyticMoveLineList" hidden="true"/>
    <field name="taxEquiv" hidden="true" grid-view="tax-equiv-grid" form-view="tax-equiv-form"/>
    <field name="companyCurrencyDecimals" hidden="true"/>
    <field name="taxLineBeforeReverseSet" hidden="true"/>
  </grid>

  <grid name="move-line-account-grid" title="Move lines"
    model="com.axelor.apps.account.db.MoveLine">
    <field name="name" title="Reference"/>
    <field name="date"/>
    <field name="move.period"/>
    <field name="move.journal"/>
    <field name="partner"/>
    <field name="debit" x-scale="companyCurrencyDecimals"/>
    <field name="credit" x-scale="companyCurrencyDecimals"/>
    <field name="amountRemaining" x-scale="companyCurrencyDecimals"/>
    <field name="taxLineSet" onChange="account-move-line-update-tax-equiv" widget="TagSelect"/>
    <field name="move.statusSelect"/>
    <field name="description"/>
    <field name="dueDate"/>
    <button name="editMoveBtn" title="Edit Move" icon="fa-external-link"
      onClick="action-move-line-view-open-move"/>
    <field name="taxEquiv" hidden="true" grid-view="tax-equiv-grid" form-view="tax-equiv-form"/>
    <field name="companyCurrencyDecimals" hidden="true"/>
    <field name="taxLineBeforeReverseSet" hidden="true"/>
  </grid>

  <grid name="move-line-account-reconcile-group-grid" title="Move lines"
    model="com.axelor.apps.account.db.MoveLine">
    <toolbar>
      <button name="accountingReconcileBtn" title="Accounting Reconcile"
        onClick="action-method-accounting-reconcile"/>
      <button name="calculateBtn" title="Calculation of totals"
        onClick="action-account-move-line-method-calculate-balance"/>
    </toolbar>
    <field name="name"/>
    <field name="date"/>
    <field name="move.period"/>
    <field name="move.journal"/>
    <field name="partner"/>
    <field name="debit" x-scale="companyCurrencyDecimals"/>
    <field name="credit" x-scale="companyCurrencyDecimals"/>
    <field name="amountRemaining" x-scale="companyCurrencyDecimals"/>
    <field name="taxLineSet" onChange="account-move-line-update-tax-equiv" widget="TagSelect"/>
    <field name="move.statusSelect"/>
    <field name="reconcileGroup"/>
    <field name="description"/>
    <field name="dueDate"/>
    <button name="editMoveBtn" title="Edit Move" icon="fa-external-link"
      onClick="action-move-line-view-open-move"/>
    <field name="taxEquiv" hidden="true" grid-view="tax-equiv-grid" form-view="tax-equiv-form"/>
    <field name="companyCurrencyDecimals" hidden="true"/>
    <field name="taxLineBeforeReverseSet" hidden="true"/>
  </grid>

  <grid name="move-line-account-batch-auto-move-lettering-grid" title="Move lines reconciled"
    model="com.axelor.apps.account.db.MoveLine" orderBy="reconcileGroup.id" groupBy="reconcileGroup">
    <toolbar>
      <button name="validateAllReconcileGroupsBtn" title="Validate all reconcile groups"
        onClick="action-method-batch-auto-lettering-validate-all-reconcile-groups"
        showIf="batch != null"/>
      <button name="validateSelectedReconcileGroupsBtn"
        title="Validate selected reconcile groups"
        onClick="action-method-batch-auto-lettering-validate-selected-reconcile-groups"/>
      <button name="cancelSelectedReconcileGroupsBtn"
        title="Cancel selected reconcile groups"
        onClick="action-method-batch-auto-lettering-cancel-selected-reconcile-groups"/>
      <button name="partiallyValidateSelectedReconcileGroupsBtn"
        title="Temporarily reconcile selected lines"
        onClick="action-method-batch-auto-lettering-partially-validate-selected-reconcile-groups"/>
    </toolbar>
    <field name="name"/>
    <field name="date"/>
    <field name="dueDate"/>
    <field name="move.paymentMode"/>
    <field name="origin"/>
    <field name="partner"/>
    <field name="account"/>
    <field name="debit"/>
    <field name="credit"/>
    <field name="reconcileGroup"/>
    <field name="reconcileGroup.statusSelect"/>
    <field name="externalOrigin"/>
    <field name="reconcileGroup.isProposal" hidden="true"/>
    <button name="validateReconcileGroupBtn" title="Validate reconcile group"
      onClick="action-reconcile-group-method-validate-proposal" icon="fa-check-circle"
      readonlyIf="!$get('reconcileGroup.isProposal')" help="Validate reconcile group"/>
    <button name="cancelReconcileGroupBtn" title="Cancel reconcile group"
      readonlyIf="!$get('reconcileGroup.isProposal')" icon="fa-minus-circle"
      onClick="action-reconcile-group-method-cancel-proposal" help="Cancel reconcile group"/>
  </grid>

  <grid name="move-line-move-grid" model="com.axelor.apps.account.db.MoveLine"
    title="Move lines" canArchive="false" onNew="action-move-line-method-onnew">
    <field name="counter" hidden="true" width="50" readonly="true"/>
    <field name="date" width="100" onChange="account-move-line-method-date-onchange"
      hidden="true"/>
    <field name="partner" form-view="partner-form" grid-view="partner-grid"
      onSelect="action-move-line-method-partner-onselect"
      onChange="action-move-line-method-partner-onchange" width="120" canEdit="false"
      readonly="false"/>
    <field name="account" form-view="account-form" grid-view="account-grid"
      onSelect="action-move-line-method-account-onselect" width="150" canEdit="false"
      readonlyIf="amountPaid &gt; 0" onChange="action-move-line-group-account-onchange"/>
    <field name="currencyAmount"
      onChange="action-move-line-method-currency-amount-rate-onchange" readonlyIf="!isOtherCurrency"
      width="90" x-scale="currencyDecimals"/>
    <field name="currencyRate"
      onChange="action-move-line-method-currency-amount-rate-onchange" readonlyIf="!isOtherCurrency"
      width="90"/>
    <field name="debit" onChange="action-move-line-method-debit-onchange" width="90"
      readonlyIf="amountPaid &gt; 0" x-scale="companyCurrencyDecimals"/>
    <field name="credit" onChange="action-move-line-method-credit-onchange" width="90"
      readonlyIf="amountPaid &gt; 0" x-scale="companyCurrencyDecimals"/>
    <field name="amountRemaining" hidden="true" width="80" x-scale="companyCurrencyDecimals"/>
    <field name="amountPaid" hidden="true"/>
    <field name="taxLineSet"
      readonlyIf="!account.isTaxAuthorizedOnMoveLine || move.statusSelect == 3" canNew="false"
      requiredIf="(account.isTaxAuthorizedOnMoveLine &amp;&amp; account.accountType.technicalTypeSelect == 'tax' &amp;&amp; [3,4].includes(move.functionalOriginSelect)) || account.isTaxRequiredOnMoveLine"
      domain="self.endDate > :date OR self.endDate IS NULL"
      onChange="account-move-line-update-tax-equiv" width="80" widget="TagSelect"/>
    <field name="vatSystemSelect"
      validIf="vatSystemSelect &gt; 0 || account.accountType.technicalTypeSelect != 'tax'"
      readonlyIf="account.useForPartnerBalance || !account.isTaxAuthorizedOnMoveLine"
      requiredIf="account.accountType.technicalTypeSelect == 'tax' &amp;&amp; !account.useForPartnerBalance &amp;&amp; account.isTaxAuthorizedOnMoveLine"
      width="80"/>
    <field name="account.useForPartnerBalance" hidden="true"/>
    <field name="account.accountType.technicalTypeSelect" hidden="true"/>
    <field name="analyticDistributionTemplate"
      if="__config__.app.getApp('account')?.getManageAnalyticAccounting()"
      grid-view="analytic-distribution-template-grid"
      form-view="analytic-distribution-template-form"
      onChange="action-move-line-method-analytic-distribution-template-onchange"
      onSelect="action-move-line-method-analytic-distribution-template-onselect"
      readonlyIf="!account || !account.analyticDistributionAuthorized"
      requiredIf="(!analyticMoveLineList || !analyticMoveLineList.length) &amp;&amp; account.analyticDistributionAuthorized &amp;&amp; account.analyticDistributionRequiredOnMoveLines &amp;&amp; (axis1AnalyticAccount == null &amp;&amp; axis2AnalyticAccount == null &amp;&amp; axis3AnalyticAccount == null &amp;&amp; axis4AnalyticAccount == null &amp;&amp; axis5AnalyticAccount == null)"
      width="80"/>
    <field name="axis1AnalyticAccount" grid-view="analytic-account-grid"
      form-view="analytic-account-form"
      readonlyIf="account.analyticDistributionAuthorized == false || !account || analyticDistributionTemplate || account.company.accountConfig.analyticDistributionTypeSelect != 1"
      onSelect="action-move-line-attrs-set-domain-axis"
      onChange="action-move-line-method-analytic-axis-onchange" width="80"/>
    <field name="axis2AnalyticAccount" grid-view="analytic-account-grid"
      form-view="analytic-account-form"
      readonlyIf="account.analyticDistributionAuthorized == false || !account || analyticDistributionTemplate || account.company.accountConfig.analyticDistributionTypeSelect != 1"
      onSelect="action-move-line-attrs-set-domain-axis"
      onChange="action-move-line-method-analytic-axis-onchange" width="80"/>
    <field name="axis3AnalyticAccount" grid-view="analytic-account-grid"
      form-view="analytic-account-form"
      readonlyIf="account.analyticDistributionAuthorized == false || !account || analyticDistributionTemplate || account.company.accountConfig.analyticDistributionTypeSelect != 1"
      onSelect="action-move-line-attrs-set-domain-axis"
      onChange="action-move-line-method-analytic-axis-onchange"/>
    <field name="axis4AnalyticAccount" grid-view="analytic-account-grid"
      form-view="analytic-account-form"
      readonlyIf="account.analyticDistributionAuthorized == false || !account || analyticDistributionTemplate || account.company.accountConfig.analyticDistributionTypeSelect != 1"
      onSelect="action-move-line-attrs-set-domain-axis"
      onChange="action-move-line-method-analytic-axis-onchange"/>
    <field name="axis5AnalyticAccount" grid-view="analytic-account-grid"
      form-view="analytic-account-form"
      readonlyIf="account.analyticDistributionAuthorized == false || !account || analyticDistributionTemplate || account.company.accountConfig.analyticDistributionTypeSelect != 1"
      onSelect="action-move-line-attrs-set-domain-axis"
      onChange="action-move-line-method-analytic-axis-onchange"/>
    <field name="origin" width="120" hidden="true"/>
    <field name="description" requiredIf="$isDescriptionRequired"/>
    <field name="analyticMoveLineList" grid-view="analytic-move-line-move-line-grid"
      form-view="analytic-move-line-move-line-form"
      readonlyIf="account.company.accountConfig.analyticDistributionTypeSelect != 1"
      onChange="action-move-line-method-analytic-distribution-template-onchange-light"/>
    <field name="reconcileGroup" hidden="true"/>
    <field name="$isDescriptionRequired" type="boolean" hidden="true"/>
    <field name="isOtherCurrency" hidden="true"/>
    <field name="account.accountType" hidden="true"/>
    <field name="account.accountType.technicalTypeSelect" hidden="true"/>
    <field name="taxEquiv" hidden="true" grid-view="tax-equiv-grid" form-view="tax-equiv-form"/>
    <field name="taxLineBeforeReverseSet" hidden="true"/>
    <field name="move.functionalOriginSelect" hidden="true"/>
    <field name="account.company.accountConfig.analyticDistributionTypeSelect" hidden="true"/>
    <field name="account.isTaxRequiredOnMoveLine" hidden="true"/>
    <field name="account.isTaxAuthorizedOnMoveLine" hidden="true"/>
    <field name="account.analyticDistributionAuthorized" hidden="true"/>
    <field name="account.analyticDistributionRequiredOnMoveLines" hidden="true"/>
    <field name="currencyDecimals" hidden="true"/>
    <field name="companyCurrencyDecimals" hidden="true"/>
    <field name="move.functionalOriginSelect" hidden="true"/>
  </grid>

  <grid name="move-line-journal-grid" orderBy="account,-date" title="Move lines"
    model="com.axelor.apps.account.db.MoveLine" canDelete="false" canNew="false" groupBy="account"
    canArchive="false">
    <hilite color="info" if="$get('move.statusSelect') == 1"/>
    <hilite color="danger" if="$get('move.statusSelect') == 4"/>
    <field name="name" width="135"/>
    <field name="date" onChange="account-move-line-method-date-onchange"/>
    <field name="move.period" canView="false"/>
    <field name="partner" form-view="partner-form" grid-view="partner-grid"/>
    <field name="account" form-view="account-form" grid-view="account-grid"
      onChange="action-move-line-method-compute-analytic-distribution"/>
    <field name="account.analyticDistributionAuthorized" hidden="true"/>
    <field name="account.analyticDistributionRequiredOnMoveLines" hidden="true"/>
    <field name="move.company" form-view="company-form" grid-view="company-grid"
      if="__config__.app.getApp('base')?.getEnableMultiCompany()"/>
    <field name="debit" aggregate="sum" x-scale="companyCurrencyDecimals"/>
    <field name="credit" aggregate="sum" x-scale="companyCurrencyDecimals"/>
    <field name="amountRemaining" aggregate="sum" x-scale="companyCurrencyDecimals"/>
    <field name="taxLineSet"
      requiredIf="(account.isTaxAuthorizedOnMoveLine &amp;&amp; account.accountType.technicalTypeSelect == 'tax' &amp;&amp; [3,4].includes(move.functionalOriginSelect)) || account.isTaxRequiredOnMoveLine"
      readonlyIf="!account.isTaxAuthorizedOnMoveLine || move.statusSelect == 3"
      domain="self.endDate > :date OR self.endDate IS NULL"
      onChange="account-move-line-update-tax-equiv" widget="TagSelect"/>
    <field name="analyticDistributionTemplate"
      if="__config__.app.getApp('account')?.getManageAnalyticAccounting()"
      grid-view="analytic-distribution-template-grid"
      form-view="analytic-distribution-template-form"
      onChange="action-move-line-method-analytic-distribution-template-onchange"
      requiredIf="(!analyticMoveLineList || !analyticMoveLineList.length > 0) &amp;&amp; account.analyticDistributionAuthorized &amp;&amp; account.analyticDistributionRequiredOnMoveLines"/>
    <field name="move.statusSelect"/>
    <field name="reconcileGroup" width="120"/>
    <field name="origin" width="120"/>
    <field name="description"/>
    <field name="analyticMoveLineList" hidden="true"/>
    <field name="taxEquiv" hidden="true" grid-view="tax-equiv-grid" form-view="tax-equiv-form"/>
    <field name="companyCurrencyDecimals" hidden="true"/>
    <field name="taxLineBeforeReverseSet" hidden="true"/>
  </grid>

  <grid name="move-line-accounting-situation-grid" orderBy="-date" title="Move lines"
    model="com.axelor.apps.account.db.MoveLine" canDelete="false" canNew="false" canArchive="false">
    <hilite color="info" if="$get('move.statusSelect') == 1"/>
    <hilite color="danger" if="$get('move.statusSelect') == 4"/>
    <field name="name" width="135"/>
    <field name="date" onChange="account-move-line-method-date-onchange"/>
    <field name="move.period" canView="false"/>
    <field name="move.journal"/>
    <field name="description"/>
    <field name="account" form-view="account-form" grid-view="account-grid"
      onChange="action-move-line-method-compute-analytic-distribution"/>
    <field name="account.analyticDistributionAuthorized" hidden="true"/>
    <field name="account.analyticDistributionRequiredOnMoveLines" hidden="true"/>
    <field name="debit" aggregate="sum"/>
    <field name="credit" aggregate="sum"/>
    <field name="amountRemaining" aggregate="sum"/>
    <field name="taxLineSet"
      requiredIf="(account.isTaxAuthorizedOnMoveLine &amp;&amp; account.accountType.technicalTypeSelect == 'tax' &amp;&amp; [3,4].includes(move.functionalOriginSelect)) || account.isTaxRequiredOnMoveLine"
      readonlyIf="!account.isTaxAuthorizedOnMoveLine || move.statusSelect == 3"
      domain="self.endDate > :date OR self.endDate IS NULL"
      onChange="account-move-line-update-tax-equiv" widget="TagSelect"/>
    <field name="analyticDistributionTemplate"
      if="__config__.app.getApp('account')?.getManageAnalyticAccounting()"
      grid-view="analytic-distribution-template-grid"
      form-view="analytic-distribution-template-form"
      onChange="action-move-line-method-analytic-distribution-template-onchange"
      requiredIf="(!analyticMoveLineList || !analyticMoveLineList.length > 0) &amp;&amp; account.analyticDistributionAuthorized &amp;&amp; account.analyticDistributionRequiredOnMoveLines"/>
    <field name="move.statusSelect"/>
    <field name="reconcileGroup" width="120"/>
    <field name="origin" width="120"/>
    <field name="dueDate"/>
    <field name="description"/>
    <field name="analyticMoveLineList" hidden="true"/>
    <field name="taxEquiv" hidden="true" grid-view="tax-equiv-grid" form-view="tax-equiv-form"/>
    <field name="taxLineBeforeReverseSet" hidden="true"/>
  </grid>

  <grid name="move-line-cut-off-grid" title="Move lines concerned by cut off"
    model="com.axelor.apps.account.db.MoveLine" groupBy="move">
    <toolbar>
      <button name="validateBtn" title="Validate" icon="fa-check"
        onClick="action-move-line-method-validate-preview-batch"/>
    </toolbar>
    <hilite color="danger" if="$get('move.cutOffMoveGenerated')"/>
    <field name="move.reference"/>
    <field name="name"/>
    <field name="move.date"/>
    <field name="partner"/>
    <field name="move.journal"/>
    <field name="account"/>
    <field name="description"/>
    <field name="move.statusSelect"/>
    <field name="amountBeforeCutOffProrata"/>
    <field name="durationCutOffProrata"/>
    <field name="cutOffProrataAmount"/>
    <field name="cutOffStartDate"/>
    <field name="cutOffEndDate"/>
    <field name="move.cutOffMoveGenerated" hidden="true"/>
    <field name="move" hidden="true"/>
    <field name="id" hidden="true"/>
  </grid>

  <grid name="move-line-doubtful-customer-grid" title="Move lines"
    model="com.axelor.apps.account.db.MoveLine">
    <toolbar>
      <button name="validateBtn" title="Validate" icon="fa-check"
        onClick="action-move-line-method-validate-preview-batch"/>
    </toolbar>
    <field name="name" title="Reference"/>
    <field name="date"/>
    <field name="move.period"/>
    <field name="move.journal"/>
    <field name="partner"/>
    <field name="debit"/>
    <field name="credit"/>
    <field name="amountRemaining"/>
    <field name="move.statusSelect"/>
    <field name="description"/>
    <field name="dueDate"/>
  </grid>

  <form name="incl-analytic-distribution-move-line-form"
    model="com.axelor.apps.account.db.MoveLine" title="Move line" canArchive="false"
    onLoad="action-move-line-method-analytic-distribution-onload">
    <panel name="analyticDistributionPanel" title="Analytic distribution"
      readonlyIf="move.period.statusSelect == 2 || $validatePeriod" itemSpan="12">
      <field name="analyticDistributionTemplate"
        grid-view="analytic-distribution-template-grid"
        form-view="analytic-distribution-template-form"
        onChange="action-move-line-method-analytic-distribution-template-onchange"
        onSelect="action-move-line-method-analytic-distribution-template-onselect"
        readonlyIf="!account.analyticDistributionAuthorized"
        requiredIf="(!analyticMoveLineList || !analyticMoveLineList.length) &amp;&amp; account.analyticDistributionAuthorized &amp;&amp; account.analyticDistributionRequiredOnMoveLines &amp;&amp; (axis1AnalyticAccount == null &amp;&amp; axis2AnalyticAccount == null &amp;&amp; axis3AnalyticAccount == null &amp;&amp; axis4AnalyticAccount == null &amp;&amp; axis5AnalyticAccount == null)"/>
      <panel name="analyticAccountPanel"
        readonlyIf="account.analyticDistributionAuthorized == false || !account || analyticDistributionTemplate || account.company.accountConfig.analyticDistributionTypeSelect != 1">
        <field name="axis1AnalyticAccount" grid-view="analytic-account-grid"
          form-view="analytic-account-form" onSelect="action-move-line-attrs-set-domain-axis"
          onChange="action-move-line-method-analytic-axis-onchange"/>
        <field name="axis2AnalyticAccount" grid-view="analytic-account-grid"
          form-view="analytic-account-form" onSelect="action-move-line-attrs-set-domain-axis"
          onChange="action-move-line-method-analytic-axis-onchange"/>
        <field name="axis3AnalyticAccount" grid-view="analytic-account-grid"
          form-view="analytic-account-form" onSelect="action-move-line-attrs-set-domain-axis"
          onChange="action-move-line-method-analytic-axis-onchange"/>
        <field name="axis4AnalyticAccount" grid-view="analytic-account-grid"
          form-view="analytic-account-form" onSelect="action-move-line-attrs-set-domain-axis"
          onChange="action-move-line-method-analytic-axis-onchange"/>
        <field name="axis5AnalyticAccount" grid-view="analytic-account-grid"
          form-view="analytic-account-form" onSelect="action-move-line-attrs-set-domain-axis"
          onChange="action-move-line-method-analytic-axis-onchange"/>
      </panel>
      <panel-related name="analyticMoveLineListPanelCanNew"
        field="analyticMoveLineList" grid-view="analytic-move-line-distribution-grid"
        form-view="analytic-move-line-distribution-form"
        onChange="action-move-line-group-analytic-move-line-onchange" hidden="true"
        showIf="$analyticDistributionTypeSelect == 1"
        readonlyIf="account.company.accountConfig.analyticDistributionTypeSelect != 1"/>
      <panel-related name="analyticMoveLineListPanel" field="analyticMoveLineList"
        canNew="false" grid-view="analytic-move-line-distribution-grid"
        form-view="analytic-move-line-distribution-form"
        onChange="action-move-line-group-analytic-move-line-onchange" hidden="true"
        showIf="$analyticDistributionTypeSelect != 1"
        readonlyIf="account.company.accountConfig.analyticDistributionTypeSelect != 1"/>
      <panel name="hiddenFieldsPanel" hidden="true">
        <field name="account.analyticDistributionAuthorized"/>
        <field name="account.analyticDistributionRequiredOnMoveLines"/>
        <field name="account.company"/>
        <field name="account.company.accountConfig"/>
        <field name="account.company.accountConfig.analyticDistributionTypeSelect"/>
        <field name="move.period.statusSelect"/>
        <field name="$validatePeriod"/>
        <field name="$isValidAnalyticMoveLineList" type="boolean" hidden="true"/>
        <field name="$analyticDistributionTypeSelect" type="integer" hidden="true"/>
      </panel>
    </panel>
  </form>

  <form name="move-line-infos-form" title="Move line information"
    model="com.axelor.apps.account.db.MoveLine" width="large">
    <panel name="informationsPanel" title="Information" showTitle="false" colSpan="12"
      canArchive="false">
      <field name="name" colSpan="6" showTitle="false">
        <viewer depends="name">
					<![CDATA[
						<>
							<h3>
								{name}
							</h3>
						</>
					]]>
        </viewer>
      </field>
      <field name="reimbursementStatusSelect"
        showIf="id &amp;&amp; move.statusSelect > 1 &amp;&amp; reimbursementStatusSelect != 0"
        showTitle="false" colSpan="4" readonly="true">
        <viewer depends="reimbursementStatusSelect">
        			<![CDATA[
                        <>
                            {reimbursementStatusSelect == 1 && <Badge bg="info">{_t('Reimbursement ongoing')}</Badge>}
                            {reimbursementStatusSelect == 2 && <Badge bg="info">{_t('Reimbursed')}</Badge>}
                        </>
          			]]>
        </viewer>
      </field>
      <field name="reconcileGroup.code" colSpan="2" showTitle="false">
        <viewer depends="reconcileGroup.code">
					<![CDATA[
						<>
							<h3>
								<Box as="span" d="flex" justifyContent="flex-end">{reconcileGroup.code}</Box>
							</h3>
						</>
					]]>
        </viewer>
      </field>
      <field name="account" form-view="account-form" grid-view="account-grid"
        onSelect="action-move-line-method-account-onselect" canEdit="false" colSpan="8"
        readonlyIf="amountPaid &gt; 0" onChange="action-move-line-group-account-onchange"/>
      <field name="partner" form-view="partner-form" grid-view="partner-grid"
        onSelect="action-move-line-method-partner-onselect" canEdit="false" colSpan="4"
        onChange="action-move-line-method-partner-onchange"
        requiredIf="account.useForPartnerBalance"/>
      <panel name="datesPanel" colSpan="12" itemSpan="3">
        <field name="date" onChange="account-move-line-method-date-onchange"/>
        <field name="dueDate" showIf="dueDate"/>
        <field name="accountingDate" showIf="accountingDate"/>
      </panel>
      <panel name="amountPanel" colSpan="12" itemSpan="3">
        <field name="debit"
          onChange="action-move-line-method-debit-credit-invoice-term-onchange"
          readonlyIf="credit &gt; 0 || amountPaid &gt; 0 || reconcileGroup != null"
          css="label-bold bold" x-scale="companyCurrencyDecimals"/>
        <field name="credit"
          onChange="action-move-line-method-debit-credit-invoice-term-onchange"
          readonlyIf="debit &gt; 0 || amountPaid &gt; 0 || reconcileGroup != null"
          css="label-bold bold" x-scale="companyCurrencyDecimals"/>
        <field name="amountRemaining"
          hideIf="!account.reconcileOk || move.statusSelect == 1 || move.statusSelect == 4 || move.statusSelect == 5"
          x-scale="companyCurrencyDecimals"/>
        <field name="amountPaid"
          hideIf="!account.reconcileOk || move.statusSelect == 1 || move.statusSelect == 4"
          x-scale="companyCurrencyDecimals"/>
        <field name="currencyAmount" x-scale="currencyDecimals"
          onChange="action-move-line-method-currency-amount-rate-onchange"
          readonlyIf="!isOtherCurrency"/>
        <field name="currencyRate"
          onChange="action-move-line-method-currency-amount-rate-onchange"
          readonlyIf="!isOtherCurrency"/>
        <field name="taxAmount" hidden="true" x-scale="companyCurrencyDecimals"/>
      </panel>
    </panel>

    <panel name="originPanel" colSpan="12">
      <field name="origin" colSpan="2" onChange="action-move-line-method-update-invoice-terms"/>
      <field name="originDate" colSpan="4"
        onChange="action-move-line-method-update-invoice-terms"/>
      <field name="description" colSpan="6" requiredIf="$isDescriptionRequired"
        readonlyIf="move.period.statusSelect == 2 || move.period.statusSelect == 5 || $validatePeriod"/>
    </panel>
  </form>

  <form name="move-line-tabs-form" title="Move line details"
    model="com.axelor.apps.account.db.MoveLine" width="large">
    <panel-tabs name="mainPanelTab">
      <panel name="detailsPanel" title="Details">
        <panel name="currencyPanel" title="Currency" colSpan="6">
          <field name="currencyAmount" title="Currency and exchange rate"
            x-scale="currencyDecimals">
            <viewer>
              <![CDATA[<><span>{currencyRate}</span> x <span>{$fmt('currencyAmount')}</span> <span>{move.currencyCode}</span></>]]>
            </viewer>
            <editor layout="table" x-show-titles="false">
              <field name="currencyRate"
                onChange="action-move-line-method-currency-amount-rate-onchange" readonly="true"/>
              <field name="currencyAmount" x-scale="currencyDecimals"
                onChange="action-move-line-method-currency-amount-rate-onchange" readonly="true"/>
              <field name="move.currencyCode" readonly="true"/>
              <field name="currencyDecimals" hidden="true"/>
            </editor>
          </field>
        </panel>
        <panel name="taxPanel" title="Tax" colSpan="6"
          showIf="account.isTaxAuthorizedOnMoveLine || account.accountType.technicalTypeSelect == 'tax'">
          <field name="taxLineSet" canEdit="false" canNew="false"
            readonlyIf="!account.isTaxAuthorizedOnMoveLine || move.statusSelect == 3"
            showIf="account.isTaxAuthorizedOnMoveLine" colSpan="6" form-view="tax-line-form"
            grid-view="tax-line-grid" domain="self.endDate > :date OR self.endDate IS NULL"
            onChange="account-move-line-update-tax-equiv" widget="TagSelect"/>
          <field name="vatSystemSelect"
            validIf="vatSystemSelect &gt; 0 || account.accountType.technicalTypeSelect != 'tax'"
            readonlyIf="account.useForPartnerBalance || !account.isTaxAuthorizedOnMoveLine || ![1,5].includes(move.statusSelect)"
            requiredIf="account.accountType.technicalTypeSelect == 'tax' &amp;&amp; !account.useForPartnerBalance &amp;&amp; account.isTaxAuthorizedOnMoveLine"/>
        </panel>
        <panel name="das2Panel" title="DAS2" colSpan="6">
          <field name="account.serviceType"/>
          <field name="move.partner.das2Activity"/>
        </panel>
      </panel>
      <panel name="invoiceTermPanel" title="Term(s)"
        if="__config__.app.getApp('account').allowMultiInvoiceTerms"
        showIf="account.useForPartnerBalance &amp;&amp; move.invoice == null" colSpan="12">
        <panel name="financialDiscountPanel" colSpan="12"
          readonlyIf="[3,4].includes(move.statusSelect)"
          if="__config__.app.getApp('account').getManageFinancialDiscount()">
          <field name="financialDiscount" readonlyIf="amountPaid > 0"
            onChange="action-move-line-method-compute-financial-discount"/>
          <field name="financialDiscountRate" showIf="financialDiscount" readonly="true"/>
          <panel name="financialDiscountAmountPanel" showIf="financialDiscount" colSpan="12"
            readonly="true">
            <field name="financialDiscountTotalAmount" x-scale="currencyDecimals"/>
            <field name="remainingAmountAfterFinDiscount" x-scale="currencyDecimals"/>
          </panel>
        </panel>
        <button name="showInvoiceTermsBtn" title="Show related invoice term(s)"
          onClick="save,action-move-line-view-show-related-invoice-terms"
          readonlyIf="!invoiceTermList.length"/>
        <field name="invoiceTermList" colSpan="12" form-view="invoice-term-related-form"
          grid-view="invoice-term-move-line-grid"
          onChange="action-group-moveline-invoice-term-list-onchange"/>
      </panel>
      <panel name="invoiceTermFromInvoicePanel" title="Term(s)"
        if="__config__.app.getApp('account').allowMultiInvoiceTerms"
        showIf="account.useForPartnerBalance  &amp;&amp; move.invoice != null" colSpan="12">
        <button name="showInvoiceTermsFromInvoiceBtn" title="Show related invoice term(s)"
          onClick="save,action-move-line-view-show-related-invoice-terms-from-invoice"
          readonlyIf="!invoiceTermList.length"/>
        <field name="$invoiceTermListPercentageWarningText" hidden="true" colSpan="12"
          showTitle="false" readonly="true">
          <viewer>
          <![CDATA[<><Badge bg="danger">{_t('The sum of the percentage(s) displayed in the table below are not equal to 100% due to the existence of another move line which also contains invoice terms from the same invoice.')}</Badge></>]]>
          </viewer>
        </field>
        <field name="invoiceTermList" colSpan="12" form-view="invoice-term-related-form"
          grid-view="invoice-term-move-line-invoice-grid"
          onChange="action-move-line-method-update-due-dates"/>
      </panel>
      <panel name="generateFixedAssetPanel" title="Generate fixed asset">
        <field name="$generateFixedAsset" title="Generate a fixed asset from this line ?"
          readonlyIf="fixedAssetCategory != null" type="boolean" widget="boolean"/>
        <field name="fixedAssetCategory"
          showIf="fixedAssetCategory != null || $generateFixedAsset" canNew="false"/>
      </panel>
      <panel-include view="incl-analytic-distribution-move-line-form"/>
      <panel-related name="debitReconcileListPanel"
        showIf="id &amp;&amp; (account.reconcileOk &amp;&amp; (move.statusSelect == 2 || move.statusSelect == 3)) &amp;&amp; $number(debit) &gt; 0.00"
        field="debitReconcileList" form-view="reconcile-form" grid-view="move-line-reconcile-grid"
        canNew="false" canRemove="false"/>
      <panel-related name="creditReconcileListPanel"
        showIf="id &amp;&amp; (account.reconcileOk &amp;&amp; (move.statusSelect == 2 || move.statusSelect == 3)) &amp;&amp; $number(credit) &gt; 0.00"
        field="creditReconcileList" form-view="reconcile-form" grid-view="move-line-reconcile-grid"
        canNew="false" canRemove="false"/>
      <panel-related name="taxPaymentMoveLinePanel"
        showIf="taxPaymentMoveLineList != null &amp;&amp; taxPaymentMoveLineList.length > 0"
        readonlyIf="move.statusSelect &gt; 2" field="taxPaymentMoveLineList" canNew="false"
        canRemove="false" onChange="account-move-line-compute-tax-amount-method-on-change"/>
      <panel name="irrecoverablePanel" title="Irrecoverable"
        showIf="id &amp;&amp; (move.statusSelect == 2 || move.statusSelect == 3)" colSpan="12">
        <panel name="irrecoverableActionPanel" colSpan="12">
          <button name="passInIrrecoverableBtn" title="Shift into irrecoverable"
            onClick="com.axelor.apps.account.web.MoveLineController:passInIrrecoverable" colSpan="6"
            showIf="irrecoverableStatusSelect == 0"/>
          <button name="notPassInIrrecoverableBtn" title="Do not shift into irrecoverable"
            onClick="com.axelor.apps.account.web.MoveLineController:notPassInIrrecoverable"
            showIf="irrecoverableStatusSelect == 1" colSpan="6"/>
        </panel>
        <panel name="irrecoverableDetailsPanel" colSpan="12">
          <field name="passageReason" showIf="$number(debit) > 0.00" colSpan="6"
            title="Doubtful Shift Reason"/>
          <field name="usherPassageOk"
            onChange="action-group-account-moveline-usher-process-onchange" colSpan="6"/>
          <field name="interbankCodeLine" showIf="interbankCodeLine"
            form-view="interbank-code-line-form" grid-view="interbank-code-line-grid"
            canEdit="false" colSpan="12"/>
          <field name="irrecoverableStatusSelect" colSpan="6"/>
          <field name="managementObject" form-view="management-object-form"
            grid-view="management-object-grid" colSpan="6"/>
        </panel>
      </panel>
      <panel name="cutOffPanel" title="Cut off period">
        <field name="cutOffStartDate"
          validIf="!cutOffEndDate || cutOffStartDate &lt;= cutOffEndDate"
          onChange="action-move-line-method-set-is-cut-off-generated-false"/>
        <field name="cutOffEndDate"
          validIf="!cutOffStartDate || cutOffEndDate &gt;= cutOffStartDate"
          onChange="action-move-line-method-set-is-cut-off-generated-false"/>
        <field name="move.statusSelect" hidden="true"/>
      </panel>
      <panel name="bankReconciliationPanel" title="Bank reconciliation"
        showIf="account.accountType.technicalTypeSelect == 'cash'" itemSpan="12">
        <field name="bankReconciledAmount" if-module="axelor-bank-payment" readonly="true"
          x-scale="currencyDecimals"/>
        <panel-dashlet name="bankReconciliationLinePanel"
          title="Bank reconciliation lines" action="action-move-line-view-bank-reconciliation-lines"
          showIf="account.accountType.technicalTypeSelect == 'cash'" canAttach="false"/>
      </panel>
      <panel name="hiddenFields" readonly="true" itemSpan="4" hidden="true">
        <field name="$validatePeriod"/>
        <field name="$isDescriptionRequired" type="boolean"/>
        <field name="account.manageCutOffPeriod"/>
        <field name="account.useForPartnerBalance"/>
        <field name="account.reconcileOk"/>
        <field name="account.isTaxRequiredOnMoveLine"/>
        <field name="account.isTaxAuthorizedOnMoveLine"/>
        <field name="account.accountType.technicalTypeSelect"/>
        <field name="move.invoice"/>
        <field name="move.period.statusSelect"/>
        <field name="move.statusSelect"/>
        <field name="move.technicalOriginSelect"/>
        <field name="exportedDirectDebitOk"/>
        <field name="taxLineBeforeReverseSet"/>
        <field name="taxEquiv"/>
        <field name="isOtherCurrency"/>
        <field name="currencyDecimals"/>
        <field name="companyCurrencyDecimals"/>
      </panel>
    </panel-tabs>
  </form>
  <form name="move-line-form" title="Move line" model="com.axelor.apps.account.db.MoveLine"
    onNew="action-move-line-method-onnew" canNew="false" canDelete="false" canEdit="false"
    onLoad="action-move-line-method-onload" canArchive="false">
    <toolbar>
      <button name="viewMoveBtn" title="View entry" onClick="action-move-line-view-open-move"/>
    </toolbar>
    <panel-include view="move-line-infos-form"/>
    <panel-include view="move-line-tabs-form"/>
    <panel name="movePanel" title="Move" sidebar="true">
      <field name="move.statusSelect" showTitle="false" colSpan="12" widget="SingleSelect"/>
      <field name="$technicalOriginSelectTags" showTitle="false" colSpan="6">
        <viewer depends="move.technicalOriginSelect">
                    <![CDATA[
                        <>
                            <Badge bg="primary">
                                {_t(['Entry','Automatic','Template','Import','Mass entry'][move.technicalOriginSelect-1])}
                            </Badge>
                        </>
                    ]]>
        </viewer>
      </field>
      <field name="$functionalOriginTags" showTitle="false" colSpan="6">
        <viewer depends="move.functionalOriginSelect">
                    <![CDATA[
                        <>
                            <Badge bg="danger">
                                {_t(['Opening','Closure','Sale','Purchase','Payment','Cut Off','Fixed asset','Doubtful customer','Irrecoverable'][move.functionalOriginSelect-1])}
                            </Badge>
                        </>
                    ]]>
        </viewer>
      </field>
      <field name="move" readonly="true" form-view="move-form" grid-view="move-grid"
        colSpan="6"/>
      <field name="move.company" colSpan="6"/>
      <field name="move.journal" colSpan="6"/>
      <field name="move.period" canView="false" colSpan="6"/>
    </panel>
  </form>
  <form name="move-line-move-form" title="Move line"
    model="com.axelor.apps.account.db.MoveLine" onNew="action-move-line-method-onnew"
    onLoad="action-move-line-method-onload-move" width="large">
    <panel-include view="move-line-infos-form"/>
    <panel-include view="move-line-tabs-form"/>
    <panel-mail name="mailPanel">
      <mail-messages limit="4"/>
      <mail-followers/>
    </panel-mail>
  </form>

  <form name="account-move-line-calculation-wizard-form" title="Calculation"
    model="com.axelor.utils.db.Wizard" onNew="action-account-move-line-record-calculate-balance"
    canArchive="false">
    <panel name="mainPanel" colSpan="12" title="Total of the selected lines (without New) :">
      <field name="$debit" title="Debit :" readonly="true" colSpan="4"/>
      <field name="$credit" title="Credit :" readonly="true" colSpan="4"/>
      <field name="$balance" title="Balance :" readonly="true" colSpan="4"/>
    </panel>
  </form>

  <action-group name="action-group-account-moveline-usher-process-onchange">
    <action name="save"/>
    <action name="action-method-account-moveline-usher-process"/>
  </action-group>

  <action-group name="action-group-moveline-invoice-term-list-onchange">
    <action name="action-move-line-method-update-due-dates"/>
    <action name="action-move-line-method-generate-pfp-partial-terms"/>
    <action name="save" if="move?.statusSelect != 4 &amp;&amp; move?.statusSelect &gt;= 2"/>
  </action-group>

  <action-group name="action-move-line-group-analytic-move-line-onchange">
    <action name="action-move-line-method-analytic-move-line-onchange"/>
    <action name="action-analytic-move-line-group-analytic-move-line-list-onchange"/>
  </action-group>

  <action-group name="action-move-line-group-account-onchange">
    <action name="action-move-line-method-account-onchange"/>
    <action name="save"
      if="account?.useForPartnerBalance &amp;&amp; __parent__?.statusSelect != 4 &amp;&amp; __parent__?.statusSelect &gt;= 2"/>
  </action-group>

  <action-method name="action-move-line-method-onnew">
    <call class="com.axelor.apps.account.web.MoveLineController" method="onNew"/>
  </action-method>

  <action-method name="action-move-line-method-debit-credit-onchange">
    <call class="com.axelor.apps.account.web.MoveLineController" method="debitCreditOnChange"/>
  </action-method>

  <action-method name="action-move-line-method-debit-credit-invoice-term-onchange">
    <call class="com.axelor.apps.account.web.MoveLineController"
      method="debitCreditInvoiceTermOnChange"/>
  </action-method>

  <action-method name="action-move-line-method-onload">
    <call class="com.axelor.apps.account.web.MoveLineController" method="onLoad"/>
  </action-method>

  <action-method name="action-move-line-method-onload-move">
    <call class="com.axelor.apps.account.web.MoveLineController" method="onLoadMove"/>
  </action-method>

  <action-method name="action-move-line-method-account-onchange">
    <call class="com.axelor.apps.account.web.MoveLineController" method="accountOnChange"/>
  </action-method>

  <action-method name="action-move-line-mass-entry-method-account-onchange">
    <call class="com.axelor.apps.account.web.MoveLineMassEntryController"
      method="accountOnChange"/>
  </action-method>

  <action-method name="action-move-line-method-analytic-axis-onchange">
    <call class="com.axelor.apps.account.web.MoveLineController" method="analyticAxisOnChange"/>
  </action-method>

  <action-method name="account-move-line-method-date-onchange">
    <call class="com.axelor.apps.account.web.MoveLineController" method="dateOnChange"/>
  </action-method>

  <action-method
    name="action-move-line-method-analytic-distribution-template-onchange">
    <call class="com.axelor.apps.account.web.MoveLineController"
      method="analyticDistributionTemplateOnChange"/>
  </action-method>

  <action-method name="action-move-line-method-currency-amount-rate-onchange">
    <call class="com.axelor.apps.account.web.MoveLineController"
      method="currencyAmountRateOnChange"/>
  </action-method>

  <action-method name="action-method-accounting-reconcile">
    <call class="com.axelor.apps.account.web.MoveLineController" method="accountingReconcile"/>
  </action-method>

  <action-method name="account-move-line-compute-tax-amount-method-on-change"
    model="com.axelor.apps.account.db.MoveLine">
    <call class="com.axelor.apps.account.web.MoveLineController" method="computeTaxAmount"/>
  </action-method>

  <action-method name="action-move-line-method-compute-analytic-distribution">
    <call class="com.axelor.apps.account.web.MoveLineController"
      method="computeAnalyticDistribution"/>
  </action-method>

  <action-method name="action-method-account-moveline-usher-process">
    <call class="com.axelor.apps.account.web.MoveLineController" method="usherProcess"/>
  </action-method>

  <action-method name="action-account-move-line-method-calculate-balance">
    <call class="com.axelor.apps.account.web.MoveLineController" method="showCalculatedBalance"/>
  </action-method>

  <action-method name="action-move-line-method-account-onselect">
    <call class="com.axelor.apps.account.web.MoveLineController" method="accountOnSelect"/>
  </action-method>

  <action-method name="action-move-line-method-partner-onselect">
    <call class="com.axelor.apps.account.web.MoveLineController" method="partnerOnSelect"/>
  </action-method>

  <action-method
    name="action-move-line-method-analytic-distribution-template-onselect">
    <call class="com.axelor.apps.account.web.MoveLineController"
      method="analyticDistributionTemplateOnSelect"/>
  </action-method>

  <action-method name="action-move-line-method-analytic-distribution-onload">
    <call class="com.axelor.apps.account.web.MoveLineController"
      method="onLoadAnalyticDistribution"/>
  </action-method>

  <action-method name="action-move-line-method-debit-onchange">
    <call class="com.axelor.apps.account.web.MoveLineController" method="debitOnChange"/>
  </action-method>

  <action-method name="action-move-line-method-credit-onchange">
    <call class="com.axelor.apps.account.web.MoveLineController" method="creditOnChange"/>
  </action-method>

  <action-method name="action-move-line-method-partner-onchange">
    <call class="com.axelor.apps.account.web.MoveLineController" method="partnerOnChange"/>
  </action-method>

  <action-method name="action-move-line-method-set-is-cut-off-generated-false">
    <call class="com.axelor.apps.account.web.MoveLineController"
      method="setIsCutOffGeneratedFalse"/>
  </action-method>

  <action-method name="action-move-line-attrs-set-domain-axis">
    <call class="com.axelor.apps.account.web.MoveLineController" method="setAxisDomains"/>
  </action-method>

  <action-method name="action-move-line-method-compute-financial-discount">
    <call class="com.axelor.apps.account.web.MoveLineController"
      method="computeFinancialDiscount"/>
  </action-method>

  <action-method name="action-move-line-method-validate-preview-batch">
    <call class="com.axelor.apps.account.web.MoveLineController" method="validatePreviewBatch"/>
  </action-method>

  <action-method name="action-move-line-method-update-invoice-terms">
    <call class="com.axelor.apps.account.web.MoveLineController" method="updateInvoiceTerms"/>
  </action-method>

  <action-method name="action-move-line-method-update-due-dates">
    <call class="com.axelor.apps.account.web.MoveLineController" method="updateDueDates"/>
  </action-method>

  <action-method name="action-move-line-method-generate-pfp-partial-terms">
    <call class="com.axelor.apps.account.web.MoveLineController"
      method="generatePfpPartialTerms"/>
  </action-method>

  <action-method name="account-move-line-update-tax-equiv">
    <call class="com.axelor.apps.account.web.MoveLineController" method="updateTaxEquiv"/>
  </action-method>

  <action-method
    name="action-move-line-method-analytic-distribution-template-onchange-light">
    <call class="com.axelor.apps.account.web.MoveLineController"
      method="analyticDistributionTemplateOnChangeLight"/>
  </action-method>

  <action-method name="action-move-line-method-analytic-move-line-onchange">
    <call class="com.axelor.apps.account.web.MoveLineController"
      method="analyticMoveLineOnChange"/>
  </action-method>

  <action-record name="action-account-move-line-record-calculate-balance"
    model="com.axelor.utils.db.Wizard">
    <field name="$credit" expr="eval: _credit" if="_credit != null"/>
    <field name="$debit" expr="eval: _debit" if="_debit != null"/>
    <field name="$balance" expr="eval: _balance" if="_balance != null"/>
  </action-record>

  <action-method
    name="action-method-batch-auto-lettering-validate-all-reconcile-groups">
    <call class="com.axelor.apps.account.web.BatchAccountController"
      method="validateAllReconcileGroups"/>
  </action-method>

  <action-method
    name="action-method-batch-auto-lettering-validate-selected-reconcile-groups">
    <call class="com.axelor.apps.account.web.BatchAccountController"
      method="validateSelectedReconcileGroups"/>
  </action-method>

  <action-method
    name="action-method-batch-auto-lettering-cancel-selected-reconcile-groups">
    <call class="com.axelor.apps.account.web.BatchAccountController"
      method="cancelSelectedReconcileGroups"/>
  </action-method>

  <action-method
    name="action-method-batch-auto-lettering-partially-validate-selected-reconcile-groups">
    <call class="com.axelor.apps.account.web.BatchAccountController"
      method="partialReconcileSelectedMoveLines"/>
  </action-method>

  <action-view name="action-move-line-view-open-move" title="Account move"
    model="com.axelor.apps.account.db.Move">
    <view type="form" name="move-form"/>
    <view type="grid" name="move-grid"/>
    <view-param name="forceEdit" value="true"/>
    <context name="_showRecord" expr="eval: __repo__(MoveLine).find(id).move.id"/>
  </action-view>

  <action-view name="action-move-line-view-show-related-invoice-terms"
    title="Invoice terms" model="com.axelor.apps.account.db.InvoiceTerm">
    <view type="grid" name="invoice-term-move-line-grid"/>
    <view type="form" name="invoice-term-related-form"/>
    <domain>self.moveLine.id = :_moveLineId</domain>
    <context name="_moveLineId" expr="eval: id"/>
  </action-view>

  <action-view name="action-move-line-view-show-related-invoice-terms-from-invoice"
    title="Invoice terms" model="com.axelor.apps.account.db.InvoiceTerm">
    <view type="grid" name="invoice-term-move-line-invoice-grid"/>
    <view type="form" name="invoice-term-related-form"/>
    <domain>self.moveLine.id = :_moveLineId</domain>
    <context name="_moveLineId" expr="eval: id"/>
  </action-view>

  <action-view name="action-account-view-show-move-lines" title="${label} move lines"
    model="com.axelor.apps.account.db.MoveLine">
    <view type="grid" name="move-line-account-grid" if="!reconcileOk"/>
    <view type="grid" name="move-line-account-reconcile-group-grid" if="reconcileOk"/>
    <view type="form" name="move-line-form"/>
    <domain>self.account.id = :_id</domain>
  </action-view>

  <action-view name="action-move-line-view-bank-reconciliation-lines"
    title="Bank reconciliation lines" model="com.axelor.apps.bankpayment.db.BankReconciliationLine">
    <view type="grid" name="bank-reconciliation-line-grid"/>
    <view type="form" name="bank-reconciliation-line-form"/>
    <domain>self.moveLine = :_id</domain>
    <context name="_id" expr="eval: id"/>
  </action-view>

  <action-view name="action-move-view-show-move-lines" title="Move lines"
    model="com.axelor.apps.account.db.MoveLine">
    <view type="grid" name="move-line-grid"/>
    <view type="form" name="move-line-form"/>
    <domain>self.move.id = :_moveId</domain>
    <context name="_moveId" expr="eval: id"/>
  </action-view>

  <search-filters name="move-line-filters"
    model="com.axelor.apps.account.db.MoveLine" title="Move line filters">
    <field name="move.period" title="Period"/>
    <field name="move.journal" title="Journal"/>
    <field name="move.statusSelect" title="Status"/>
    <field name="move.company" title="Company" hidden="true"
      if="!__config__.app.getApp('base')?.getEnableMultiCompany()"/>
    <field name="account.reconcileOk" title="Reconcilable"/>
    <field name="analyticMoveLineList" hidden="true"
      if="!__config__.app.getApp('account')?.getManageAnalyticAccounting()"/>
    <field name="analyticDistributionTemplate" hidden="true"
      if="!__config__.app.getApp('account')?.getManageAnalyticAccounting()"/>
    <filter name="move-line-filters-sale-entries" title="Sale Entries">
      <domain>self.move.invoice.operationTypeSelect = 3 OR self.move.invoice.operationTypeSelect = 4</domain>
    </filter>
    <filter name="move-line-filters-due-sale-entries" title="Due Sale Entries">
      <domain>(self.move.invoice.operationTypeSelect = 3 OR self.move.invoice.operationTypeSelect =
        4) AND self.dueDate &lt; CURRENT_DATE AND self.amountRemaining &gt; 0</domain>
    </filter>
    <filter name="move-line-filters-purchase-entries" title="Purchase Entries">
      <domain>self.move.invoice.operationTypeSelect = 1 OR self.move.invoice.operationTypeSelect = 2</domain>
    </filter>
    <filter name="move-line-filters-simulated-move-lines" title="Simulated Move Lines">
      <domain>self.move.statusSelect = 5</domain>
    </filter>
    <filter name="move-line-filters-payment-entries" title="Payment Entries">
      <domain>self.move.functionalOriginSelect = 5</domain>
    </filter>
    <filter name="move-line-filters-depreciation-entries" title="Depreciation Entries">
      <domain>self.move.functionalOriginSelect = 7</domain>
    </filter>
    <filter name="move-line-filters-cut-off-entries" title="Cut off Entries">
      <domain>self.move.functionalOriginSelect = 6</domain>
    </filter>
    <filter name="move-line-filters-entries-to-reconcile" title="Entries to reconcile">
      <domain>self.account.reconcileOk = TRUE AND self.account.statusSelect = 1 AND
        self.amountRemaining != 0 AND (self.reconcileGroup = null OR
        self.reconcileGroup.statusSelect = 3) AND (self.move.statusSelect = 2 OR
        self.move.statusSelect = 3)</domain>
    </filter>
    <filter name="move-line-filters-partially-reconciled-entries"
      title="Partially reconciled entries">
      <domain>self.account.reconcileOk = TRUE AND self.account.statusSelect = 1 AND
        self.amountRemaining != 0 AND self.reconcileGroup != null AND
        (self.reconcileGroup.statusSelect = 1 OR self.reconcileGroup.statusSelect = 2) AND
        (self.move.statusSelect = 2 OR self.move.statusSelect = 3)</domain>
    </filter>
    <filter name="move-line-filters-unreconcilied-and-partially-reconciled-entries"
      title="Unreconcilied and partially reconciled entries">
      <domain>self.account.reconcileOk = TRUE AND self.account.statusSelect = 1 AND
        self.amountRemaining != 0 AND (self.move.statusSelect = 2 OR self.move.statusSelect = 3)</domain>
    </filter>
    <filter name="move-line-filters-fully-reconcilied-entries"
      title="Fully reconcilied entries">
      <domain>self.account.reconcileOk = TRUE AND self.account.statusSelect = 1 AND
        self.amountRemaining = 0 AND (self.reconcileGroup != null AND
        (self.reconcileGroup.statusSelect = 1 OR self.reconcileGroup.statusSelect = 2)) AND
        (self.move.statusSelect = 2 OR self.move.statusSelect = 3)</domain>
    </filter>
  </search-filters>
</object-views>
