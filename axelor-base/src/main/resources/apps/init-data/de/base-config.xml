<?xml version="1.0" encoding="UTF-8"?>
<csv-inputs xmlns="http://axelor.com/xml/ns/data-import"
  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
  xsi:schemaLocation="http://axelor.com/xml/ns/data-import http://axelor.com/xml/ns/data-import/data-import_7.2.xsd">

  <input file="base_sequence.csv" separator=";" type="com.axelor.apps.base.db.Sequence"
    search="self.importId = :importId" call="com.axelor.csv.script.ImportSequence:importSequence">
    <bind to="yearlyResetOk" column="yearlyResetOk" eval="yearlyResetOk == '1' ? true : false"/>
    <bind to="nextNum" column="nextNum" eval="nextNum?.empty ? '1' : nextNum"/>
    <bind to="padding" column="padding" eval="padding?.empty ? '1' : padding"/>
    <bind to="toBeAdded" column="toBeAdded" eval="toBeAdded?.empty ? '1' : toBeAdded"/>
    <bind to="resetDate"
      eval="call:com.axelor.apps.base.service.app.AppBaseService:getTodayDate(null)"/>
  </input>

  <input file="studio_appBase.csv" separator=";" type="com.axelor.studio.db.AppBase"
    search="self.app.code = :code">
    <bind to="app" column="code" search="self.code = :code"/>
  </input>

  <input file="base_fakerApiField.csv" type="com.axelor.apps.base.db.FakerApiField"
    search="self.importId = :importId" update="false"/>

  <input file="base_fakerApiFieldParameters.csv"
    type="com.axelor.apps.base.db.FakerApiFieldParameters"/>

  <!-- PRINT SETTING IMPORT -->
  <input file="base_printSetting.csv" separator=";"
    type="com.axelor.apps.base.db.PrintingSettings" search="self.importId = :importId"/>

  <!-- IMPORT COUNTRIES -->
  <input file="base_country_de.csv" separator=";" type="com.axelor.apps.base.db.Country"
    search="self.importId = :importId"/>

  <!-- IMPORT CITIZENSHIP -->
  <input file="base_citizenship_de.csv" separator=";"
    type="com.axelor.apps.base.db.Citizenship"/>

  <!-- CITY IMPORT -->
  <input file="base_city.csv" separator=";" type="com.axelor.apps.base.db.City"
    search="self.importId = :importId">
    <bind to="country" column="country_alpha3Code"
      search="self.alpha3Code = :country_alpha3Code" update="true"/>
  </input>

  <!-- ADDRESS IMPORT -->
  <input file="base_address.csv" separator=";" type="com.axelor.apps.base.db.Address"
    search="self.importId = :importId" call="com.axelor.csv.script.ImportAddress:importAddress">
    <bind column="cityName" to="city" search="self.name = :cityName" update="true"/>
  </input>

  <!-- IMPORT PARTNER -->
  <input file="base_partner.csv" separator=";" type="com.axelor.apps.base.db.Partner"
    search="self.importId = :importId" call="com.axelor.csv.script.ImportPartner:importPartner">
    <bind to="emailAddress" if="email &amp;&amp; email.trim() != ''"
      search="self.partner.importId = :importId">
      <bind to="address" column="email"/>
    </bind>
    <bind to="partnerAddressList"
      search="self.address.importId = :address AND self.partner.importId = :importId"
      if="address != null &amp;&amp; isContact == 'false'">
      <bind to="address" search="self.importId = :address" update="true"/>
      <bind to="isInvoicingAddr" eval="true"/>
      <bind to="isDeliveryAddr" eval="true"/>
      <bind to="isDefaultAddr" eval="true"/>
    </bind>
    <bind to="mainAddress" search="self.importId = :address" if="address != null" update="true"/>
    <bind to="inPaymentMode" column="inPaymentMode.importId" if="false"/>
    <bind to="outPaymentMode" column="outPaymentMode.importId" if="false"/>
    <bind to="paymentCondition" column="paymentCondition.importId" if="false"/>
  </input>

  <input file="base_partner.csv" separator=";" search="self.importId = :importId"
    update="true" type="com.axelor.apps.base.db.Partner">
    <bind column="companySet_importId" to="companySet"
      search="self.importId in :companySet_importId" eval="companySet_importId.split('\\|') as List"
      update="true"/>
    <bind to="mainPartner" search="self.importId = :mainPartner_importId" update="true"/>
    <bind to="mainPartner" search="self.importId = :mainPartner_importId" update="true"
      if="mainPartner_importId"/>
    <bind to="inPaymentMode" column="inPaymentMode.importId" if="false"/>
    <bind to="outPaymentMode" column="outPaymentMode.importId" if="false"/>
    <bind to="paymentCondition" column="paymentCondition.importId" if="false"/>
  </input>

  <input file="base_partner.csv" separator=";" search="self.importId = :importId"
    update="true" type="com.axelor.apps.base.db.Partner"
    call="com.axelor.csv.script.ImportPartner:updateContacts">
    <bind column="importId" to="importId"/>
  </input>

  <!-- IMPORT BANK -->
  <input file="base_bank.csv" separator=";" type="com.axelor.apps.base.db.Bank"/>

  <input file="base_bankDetails.csv" separator=";" type="com.axelor.apps.base.db.BankDetails">
    <bind to="partner" column="partner_importId" search="self.importId =:partner_importId"
      update="true"/>
    <bind to="isDefault" eval="true"/>
  </input>

  <!-- IMPORT COMPANY -->
  <input file="base_company.csv" separator=";" type="com.axelor.apps.base.db.Company"
    search="self.importId = :importId" call="com.axelor.csv.script.ImportCompany:importCompany"/>

  <input file="base_company.csv" separator=";" type="com.axelor.apps.base.db.Company"
    search="self.importId = :importId" call="com.axelor.csv.script.ImportCompany:importCompany"/>

  <input file="base_company.csv" separator=";" type="com.axelor.apps.base.db.Company"
    search="self.importId = :importId" update="true"
    call="com.axelor.csv.script.UpdateAll:updatePeriod">
    <bind column="importId" to="importId"/>
  </input>

  <!-- ECONOMIC AREA IMPORT -->
  <input file="base_economicArea.csv" separator=";"
    type="com.axelor.apps.base.db.EconomicArea" search="self.importId = :importId"/>

  <!-- LANGUAGE IMPORT -->
  <input file="base_language.csv" separator=";" type="com.axelor.apps.base.db.Language"
    search="self.code = :code"/>

  <input file="base_localization.csv" separator=";"
    type="com.axelor.apps.base.db.Localization" search="self.code = :code"/>

  <!-- PARTNER CATEGORY IMPORT -->
  <input file="base_partnerCategory.csv" separator=";"
    type="com.axelor.apps.base.db.PartnerCategory" search="self.importId = :importId"/>

  <!-- UNIT IMPORT -->
  <input file="base_unit.csv" separator=";" type="com.axelor.apps.base.db.Unit"
    search="self.importId = :importId"/>

  <!-- UNIT CONVERSION IMPORT -->
  <input file="base_unitConversion.csv" separator=";"
    type="com.axelor.apps.base.db.UnitConversion" search="self.importId = :importId"/>

  <!-- YEAR IMPORT -->
  <input file="base_year.csv" separator=";" type="com.axelor.apps.base.db.Year"
    search="self.importId = :importId" call="com.axelor.csv.script.ImportYear:importYear">
    <bind to="company" search="self.importId = :company_importId"/>
    <bind to="fromDate" eval="call:com.axelor.csv.script.ImportDateTime:importDate(fromDate)"
      column="fromDate"/>
    <bind to="toDate" eval="call:com.axelor.csv.script.ImportDateTime:importDate(toDate)"
      column="toDate"/>
    <bind to="reportedBalanceDate"
      eval="call:com.axelor.csv.script.ImportDateTime:importDate(reportedBalanceDate)"
      column="reportedBalanceDate"/>
  </input>

  <!-- THEME IMPORT -->
  <input file="meta_theme.csv" separator=";" type="com.axelor.meta.db.MetaTheme"
    search="self.name = :name"/>

  <!-- TRANSLATIONS IMPORT -->
  <input file="axelor_account_de.csv" separator="," type="com.axelor.meta.db.MetaTranslation"
    search="self.key = :key AND self.language = :language"/>

  <input file="axelor_bank_payment_de.csv" separator=","
    type="com.axelor.meta.db.MetaTranslation" search="self.key = :key AND self.language = :language"/>

  <input file="axelor_budget_de.csv" separator="," type="com.axelor.meta.db.MetaTranslation"
    search="self.key = :key AND self.language = :language"/>

  <input file="axelor_business_production_de.csv" separator=","
    type="com.axelor.meta.db.MetaTranslation" search="self.key = :key AND self.language = :language"/>

  <input file="axelor_business_project_de.csv" separator=","
    type="com.axelor.meta.db.MetaTranslation" search="self.key = :key AND self.language = :language"/>

  <input file="axelor_business_support_de.csv" separator=","
    type="com.axelor.meta.db.MetaTranslation" search="self.key = :key AND self.language = :language"/>

  <input file="axelor_cash_management_de.csv" separator=","
    type="com.axelor.meta.db.MetaTranslation" search="self.key = :key AND self.language = :language"/>

  <input file="axelor_client_portal_de.csv" separator=","
    type="com.axelor.meta.db.MetaTranslation" search="self.key = :key AND self.language = :language"/>

  <input file="axelor_contract_de.csv" separator="," type="com.axelor.meta.db.MetaTranslation"
    search="self.key = :key AND self.language = :language"/>

  <input file="axelor_core_de.csv" separator="," type="com.axelor.meta.db.MetaTranslation"
    search="self.key = :key AND self.language = :language"/>

  <input file="axelor_crm_de.csv" separator="," type="com.axelor.meta.db.MetaTranslation"
    search="self.key = :key AND self.language = :language"/>

  <input file="axelor_erp_de.csv" separator="," type="com.axelor.meta.db.MetaTranslation"
    search="self.key = :key AND self.language = :language"/>

  <input file="axelor_fleet_de.csv" separator="," type="com.axelor.meta.db.MetaTranslation"
    search="self.key = :key AND self.language = :language"/>

  <input file="axelor_gdpr_de.csv" separator="," type="com.axelor.meta.db.MetaTranslation"
    search="self.key = :key AND self.language = :language"/>

  <input file="axelor_helpdesk_de.csv" separator="," type="com.axelor.meta.db.MetaTranslation"
    search="self.key = :key AND self.language = :language"/>

  <input file="axelor_human_resource_de.csv" separator=","
    type="com.axelor.meta.db.MetaTranslation" search="self.key = :key AND self.language = :language"/>

  <input file="axelor_intervention_de.csv" separator=","
    type="com.axelor.meta.db.MetaTranslation" search="self.key = :key AND self.language = :language"/>

  <input file="axelor_maintenance_de.csv" separator=","
    type="com.axelor.meta.db.MetaTranslation" search="self.key = :key AND self.language = :language"/>

  <input file="axelor_marketing_de.csv" separator=","
    type="com.axelor.meta.db.MetaTranslation" search="self.key = :key AND self.language = :language"/>

  <input file="axelor_message_de.csv" separator="," type="com.axelor.meta.db.MetaTranslation"
    search="self.key = :key AND self.language = :language"/>

  <input file="axelor_mobile_settings_de.csv" separator=","
    type="com.axelor.meta.db.MetaTranslation" search="self.key = :key AND self.language = :language"/>

  <input file="axelor_production_de.csv" separator=","
    type="com.axelor.meta.db.MetaTranslation" search="self.key = :key AND self.language = :language"/>

  <input file="axelor_project_de.csv" separator="," type="com.axelor.meta.db.MetaTranslation"
    search="self.key = :key AND self.language = :language"/>

  <input file="axelor_purchase_de.csv" separator="," type="com.axelor.meta.db.MetaTranslation"
    search="self.key = :key AND self.language = :language"/>

  <input file="axelor_quality_de.csv" separator="," type="com.axelor.meta.db.MetaTranslation"
    search="self.key = :key AND self.language = :language"/>

  <input file="axelor_sale_de.csv" separator="," type="com.axelor.meta.db.MetaTranslation"
    search="self.key = :key AND self.language = :language"/>

  <input file="axelor_stock_de.csv" separator="," type="com.axelor.meta.db.MetaTranslation"
    search="self.key = :key AND self.language = :language"/>

  <input file="axelor_studio_de.csv" separator="," type="com.axelor.meta.db.MetaTranslation"
    search="self.key = :key AND self.language = :language"/>

  <input file="axelor_supplier_management_de.csv" separator=","
    type="com.axelor.meta.db.MetaTranslation" search="self.key = :key AND self.language = :language"/>

  <input file="axelor_supplier_portal_de.csv" separator=","
    type="com.axelor.meta.db.MetaTranslation" search="self.key = :key AND self.language = :language"/>

  <input file="axelor_supplychain_de.csv" separator=","
    type="com.axelor.meta.db.MetaTranslation" search="self.key = :key AND self.language = :language"/>

  <input file="axelor_talent_de.csv" separator="," type="com.axelor.meta.db.MetaTranslation"
    search="self.key = :key AND self.language = :language"/>

  <input file="axelor_utils_de.csv" separator="," type="com.axelor.meta.db.MetaTranslation"
    search="self.key = :key AND self.language = :language"/>

  <input file="axelor_web_de.csv" separator="," type="com.axelor.meta.db.MetaTranslation"
    search="self.key = :key AND self.language = :language"/>

</csv-inputs>