<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<object-views xmlns="http://axelor.com/xml/ns/object-views"
	xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
	xsi:schemaLocation="http://axelor.com/xml/ns/object-views http://axelor.com/xml/ns/object-views/object-views_5.0.xsd">
	
	<form name="app-base-config-form" title="App base" model="com.axelor.apps.base.db.AppBase" canDelete="false" canNew="false" width="large">
		<panel>
			<field name="today"/>
		</panel>
		<panel-tabs>
			<panel name="configuration" title="Configuration" colSpan="12">
		    	<field name="defaultPartnerLanguage" />
		    	<field name="activateSendingEmail" widget="boolean-switch"/>
		    	<field name="mailAccountByUser" widget="boolean-switch"/>
		    	<field name="productInAtiSelect"/>
		    	<field name="nbDecimalDigitForUnitPrice"/>
		    	<field name="computeMethodDiscountSelect"/>
		    	<field name="timeLoggingPreferenceSelect"/>
		    	<field name="dailyWorkHours"/>
		    	<field name="unitDays" form-view="unit-form" grid-view="unit-grid"/>
		    	<field name="unitHours" form-view="unit-form" grid-view="unit-grid"/>
		    	<field name="unitMinutes" form-view="unit-form" grid-view="unit-grid"/>
		    	<field name="teamManagement" widget="boolean-switch"/>
		    	<field name="activateBarCodeGeneration" widget="Boolean-switch"/>
		    </panel> 
		    <panel name="interfaces" title="Interfaces"  colSpan="12">
				<panel name="map" title="Mapping"  colSpan="12">
					<field name="mapApiSelect"/>
					<button name="checkMapApi" title="Test mapping service connection"   onClick="com.axelor.apps.base.web.AppBaseController:checkMapApi"/>
				</panel>
				<panel name="qas" title="Addresses validation"  colSpan="12">
					<field name="qasWsdlUrl"/>
					<button name="checkQasWsdl" title="Test connection to QAS webservice"   onClick="com.axelor.apps.base.web.AddressController:check"/>
					<field name="hasQasValidation" widget="boolean-switch"/>
				</panel>
				<panel name="ws" title="Webservices"  colSpan="12">
					<field name="currencyWsURL" colSpan="12"/>
				</panel>
		    </panel>
		    <panel name="currencyConversion" title="Currency conversion" colSpan="12">
				<button name="updateCurrencyConversion" title="Update &amp; Historize conversion rate"  onClick="save,action-base-method-update-currency-conversion"/>
				<field name="currencyConversionLineList" colSpan="12" grid-view="currency-conversion-line-grid" form-view="currency-conversion-line-form"/>
			</panel>
		</panel-tabs>
	</form>
	
	<form model="com.axelor.apps.base.db.Wizard" title="Check duplicate" name="wizard-check-duplicate-form" onNew="action-check-duplicate-on-new-attrs">
		<panel-related field="$fieldsSet" title="Fields" help="Key fields to check duplicate records" readonly="true" colSpan="12" type="many-to-many" target="com.axelor.meta.db.MetaField" grid-view="meta-field-light-grid"/>
  		<panel name="main" >
    		<button name="showDuplicate" title="Show" colSpan="6" onClick="action-base-method-show-duplicate"/>
  		</panel>
	</form>
	
	
	<!-- ACTION METHOD -->

	<action-method name="action-base-method-update-currency-conversion">
		<call class="com.axelor.apps.base.web.AppBaseController" method="updateCurrencyConversion" />
	</action-method>
	
	<action-method name="action-base-method-show-duplicate">
		<call method="showDuplicate" class="com.axelor.apps.base.web.AppBaseController"/>
	</action-method>
	
	<action-method name="action-base-general-export-objects">
	    <call method="exportObjects" class="com.axelor.apps.base.web.AppBaseController"/>
	</action-method>
	
	<action-validate name="action-check-string-camel-case">
		<error message="Please input first character as capital and other as lower case" if="firstName != null &amp;&amp; !firstName.matches('^[A-Z][a-z. \\-,_;0-9]*')" action="action-check-string-camel-case-first-name-clear" />
	</action-validate>
	
	<action-attrs name="action-check-duplicate-on-new-attrs" model="com.axelor.apps.base.db.Wizard">
    	<attribute name="value" for="$fieldsSet" expr="call:com.axelor.apps.base.web.AppBaseController:setFields(object)" />
    </action-attrs>
    
	<action-record name="action-check-string-camel-case-first-name-clear" model="com.axelor.apps.base.db.General">
		<field name="firstName"  expr="eval:com.axelor.apps.tool.StringTool.deleteAccent(com.axelor.apps.tool.StringTool.toFirstUpper(firstName))"/>
	</action-record>
	
	<action-view name="action-general-check-duplicate-records" title="Check duplicate" model="com.axelor.apps.base.db.Wizard">
		<view type="form" name="wizard-check-duplicate-form" />
		<view-param name="show-toolbar" value="false"/>
		<view-param name="width" value="500" />
		<view-param name="popup" value="true" />  
		<context name="object" expr="eval:_model"/>
	</action-view>
	
	<action-method name="action-method-general-remind-timesheet">
		<call class="com.axelor.apps.base.web.MailBatchController" method="remindTimesheetGeneral"/>
	</action-method>
	
	<action-attrs name="action-general-attrs-default-invoice-type-domain">
		<attribute name="selection-in" for="defaultInvoiceTypeSelect" expr="[1,2]"/>
	</action-attrs>
	
</object-views>