<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<object-views xmlns="http://axelor.com/xml/ns/object-views"
              xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
              xsi:schemaLocation="http://axelor.com/xml/ns/object-views http://axelor.com/xml/ns/object-views/object-views_5.2.xsd">

    <grid name="print-template-grid" title="Print templates" model="com.axelor.apps.base.db.PrintTemplate">
        <field name="name"/>
        <field name="metaModel"/>
        <field name="language"/>
    </grid>

    <form name="print-template-form" title="Print template" model="com.axelor.apps.base.db.PrintTemplate" width="large">
        <panel>
            <field name="name"/>
            <field name="metaModel" grid-view="meta-model-grid" form-view="meta-model-form"/>
            <field name="metaModelDefaultPath"/>
            <field name="company" grid-view="company-grid" form-view="company-form"/>            
            <field name="language" grid-view="language-grid" form-view="language-form"/>
            <field name="printSettings" grid-view="printing-setting-grid" form-view="printing-setting-form" hideIf="hidePrintSettings"/>
            <field name="hidePrintSettings" widget="boolean-switch" onChange="action-print-template-attrs-hidePrintSettings-onchange"/>
            <field name="formatSelect"/>
            <field name="displayTypeSelect"/>
            <field name="documentName"/>
            <field name="isEditable"/>
            <field name="attach"/>
            <field name="metaFileField" help="Name of the field in the model where to save the file"/>
            <panel-related name="printTemplateLineListPanel" field="printTemplateLineList" grid-view="print-template-line-grid" form-view="print-template-line-form" colSpan="12" orderBy="sequence" canMove="true"/>
            <field name="birtTemplateSet" widget="TagSelect" grid-view="birt-template-grid" form-view="birt-template-form" colSpan="12"/>
            <panel-related name="printTemplateSetPanel" field="printTemplateSet" grid-view="print-template-grid" form-view="print-template-form" colSpan="12"/>
        </panel>
    </form>

    <form name="select-print-template-wizard-form" title="Select print template" model="com.axelor.apps.base.db.Wizard"
          onNew="action-print-template-wizard-attrs-set-template-domain">
        <panel>
            <field name="$language" title="Language" widget="ManyToOne" target="com.axelor.apps.base.db.Language"
                   onChange="action-print-template-wizard-attrs-reset-template" canEdit="false" required="true" grid-view="language-grid" form-view="language-form"/>
            <field name="$template" title="Print template" widget="ManyToOne" target="com.axelor.apps.base.db.PrintTemplate"
                   onSelect="action-print-template-wizard-attrs-set-template-domain" grid-view="print-template-grid" form-view="print-template-form"/>
            <button name="validate" title="Validate" colOffset="3" onClick="action-print-template-wizard-method-generate-print" readonlyIf="!$language || !$template"/>
        </panel>
    </form>

    <action-attrs name="action-print-template-wizard-attrs-set-template-domain" model="com.axelor.apps.base.db.PrintTemplate">
        <attribute for="$template" name="domain" expr="eval: &quot;self.id = -1&quot;"/>
        <attribute for="$template" name="domain" expr="eval: &quot;self.metaModel.fullName = :_templateContextModel AND self.language.id = ${language.id}&quot;"
                   if="language != null"/>
    </action-attrs>

    <action-attrs name="action-print-template-wizard-attrs-reset-template">
        <attribute for="$template" name="value" expr="eval: null"/>
    </action-attrs>

    <action-method name="action-print-template-wizard-method-generate-print">
        <call class="com.axelor.apps.base.web.PrintTemplateController" method="generatePrint"/>
    </action-method>

    <action-method name="action-print-template-method-open-print">
        <call class="com.axelor.apps.base.web.PrintTemplateController" method="openPrint"/>
    </action-method>
    
    <action-attrs name="action-print-template-attrs-hidePrintSettings-onchange">
        <attribute for="printSettings" name="value" expr="eval: null"/>
    </action-attrs>

</object-views>
