(this["webpackJsonpgeneric-builder"]=this["webpackJsonpgeneric-builder"]||[]).push([[0],{166:function(e,t,n){},167:function(e,t,n){"use strict";n.r(t);var a,o=n(0),l=n.n(o),c=n(17),r=n.n(c),i=n(14),u=n(10),s=n.n(u),d=n(62),m=n(18),f=n(24),p=n(7),j=n(42),b=n(171),v=n(178),h=n(228),g=n(173),O=n(229),y=n(174),x=n(221),N=n(222),_=n(223),C=n(224),w=n(225),M=n(226),V=n(227),F=n(84),k=n.n(F),L=n(83),I=n.n(L),T=n(50),R=n(80),S=n.n(R),E=n(49),A=n.n(E),B=n(28),P=n(34),$=n.n(P),D=n(239),J=n(220),Y=n(232),z=n(172),G=n(217),H=n(218),K=n(219),q=n(116),U=n(117),W={};var Q=new(function(){function e(){Object(q.a)(this,e);var t=new Headers;t.append("Accept","application/json"),t.append("Content-Type","application/json"),t.append("X-Requested-With","XMLHttpRequest"),t.append("X-CSRF-Token",function(e){var t=document.cookie||"";return t!==a&&(a=t,W=t.split("; ").reduce((function(e,t){var n=t.split("=");return e[n[0]]=n[1],e}),{})),W[e]}("CSRF-TOKEN")),this.baseURL="..",this.headers=t}return Object(U.a)(e,[{key:"fetch",value:function(e){function t(t,n,a){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(e,t,n){return fetch(e,n).then((function(e){return-1!==["head","delete"].indexOf(t.toLowerCase())?e:e.headers.get("content-type").includes("application/json")?e.json():e})).catch((function(e){}))}))},{key:"request",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=Object.assign({method:"POST",credentials:"include",headers:this.headers,mode:"cors",body:JSON.stringify(n)},t);return"GET"===t.method&&delete a.body,this.fetch("".concat(this.baseURL).concat(0===e.indexOf("/")?e:"/".concat(e)),t.method,a)}},{key:"get",value:function(e){return this.request(e,{method:"GET"})}},{key:"post",value:function(e,t){return this.request(e,{method:"POST"},t)}},{key:"search",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=Object(p.a)({offset:0},t),a="ws/rest/".concat(e,"/search");return this.post(a,n)}},{key:"fields",value:function(e){return this.post("/ws/meta/view/fields",e)}},{key:"fetchRecord",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a="ws/rest/".concat(e,"/").concat(t,"/fetch");return this.post(a,n)}},{key:"add",value:function(e,t){var n={data:t},a="ws/rest/".concat(e);return this.post(a,n)}},{key:"action",value:function(e,t){var n="ws/action/".concat(e);return this.post(n,t)}}]),e}());function X(e){return"bpmQuery"===e}function Z(e){if(e)return e.charAt(0).toLowerCase()+e.slice(1)}function ee(e){return e?{_domain:e}:null}function te(e){return window._t&&"string"===typeof e?window._t(e):e}function ne(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;return e.sort((function(e,n){var a=e[t],o=n[t];return a<o?-1:a>o?1:0}))}function ae(e){return!!e&&!!JSON.parse(String(e).toLowerCase())}function oe(e,t){return(""+e).replace(/["'\\\n\r\u2028\u2029]/g,(function(n){switch(n){case'"':case"\\":return"\\"+n;case"'":return t?"\\"+n:'"';case"\n":return"\\n";case"\r":return"\\r";case"\u2028":return"\\u2028";case"\u2029":return"\\u2029";default:return e}}))}var le=[{name:"and",title:"AND"},{name:"or",title:"OR"}],ce={and:"&&",or:"||"},re={and:"and",or:"or"},ie={JS:".",GROOVY:"?.",BPM:"."},ue={date:"DD/MM/YYYY",time:"HH:mm:ss",datetime:"DD/MM/YYYY HH:mm"},se=["=",">=","<=",">","<","like","isNull","between","contains","in","isTrue"],de=["many_to_many","many-to-many","json_many_to_many","json-many-to-many","one_to_one","one-to-one","json_one_to_one","json-one-to-one","enum"],me=["long","decimal","date","time","datetime","enum","text","integer","boolean","many_to_one","many-to-one","json_many_to_one","json-many-to-one","one_to_one","one-to-one","json_one_to_one","json-one-to-one","string"],fe={enum:["=","!=","isNull","isNotNull"],text:["like","notLike","isNull","isNotNull"],integer:["=","!=",">=","<=",">","<","between","notBetween","isNull","isNotNull"],boolean:["isTrue","isFalse"]},pe={JS:{"=":"===","!=":"!==",">":">",">=":">=","<":"<","<=":"<=",in:"in",notIn:"in",like:"LIKE",notLike:"NOT LIKE",isNotNull:"!== null",isNull:"=== null",isTrue:"===",isFalse:"==="},GROOVY:{"=":"==","!=":"!=",">":">",">=":">=","<":"<","<=":"<=",isNotNull:"!= null",isNull:"== null",isTrue:"==",isFalse:"==",in:"contains",notIn:"contains",like:"contains",notLike:"contains",contains:"contains",notContains:"contains"},BPM:{"=":"=","!=":"!=",">":">",">=":">=","<":"<","<=":"<=",isNotNull:"is NOT NULL",isNull:"is NULL",isTrue:"is",isFalse:"is",in:"IN",notIn:"NOT IN",like:"LIKE",notLike:"NOT LIKE",contains:"MEMBER OF",notContains:"NOT MEMBER OF"}},je=["many-to-one","json-many-to-one","many_to_one","json_many_to_one"],be=["many-to-one","one-to-many","one-to-one","many-to-many","json-many-to-one","json-one-to-many","json-one-to-one","json-many-to-many"],ve=[{name:"=",title:"equals"},{name:"!=",title:"not equal"},{name:">",title:"greater than"},{name:">=",title:"greater or equal"},{name:"<",title:"less than"},{name:"<=",title:"less or equal"},{name:"in",title:"in"},{name:"between",title:"between"},{name:"notBetween",title:"not Between"},{name:"notIn",title:"not in"},{name:"isNull",title:"is null"},{name:"isNotNull",title:"is not null"},{name:"like",title:"contains"},{name:"notLike",title:"doesn't contain"},{name:"isTrue",title:"is true"},{name:"isFalse",title:"is false"},{name:"contains",title:"contains"},{name:"notContains",title:"not contains"}],he=function(e,t,n){var a=arguments.length>3&&void 0!==arguments[3]&&arguments[3],o=e&&e.data,l=o&&o.fields,c=Object.values(o&&o.jsonFields||[{}]),r=[];return r=l&&l.filter((function(e){return!e.json&&me.includes((e.type||"").toLowerCase())}))||[],!t||a||c&&c.forEach((function(e){var o=(Object.values(e||{})||[]).filter((function(e){return me.includes((e.type||"").toLowerCase())&&("many-to-many"!==e.type||e.targetName)}))||[];t&&!a&&(o=o.filter((function(e){return![].concat(Object(f.a)(de),Object(f.a)(n?["many_to_one","json_many_to_one","many-to-one","json-many-to-one"]:[])).includes((e.type||"").toLowerCase())}))||[]),r=[].concat(Object(f.a)(r),Object(f.a)(o))})),r};function ge(e){return Oe.apply(this,arguments)}function Oe(){return(Oe=Object(m.a)(s.a.mark((function e(t){var n;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return",[]);case 2:return e.next=4,Q.action("com.axelor.apps.tool.web.QueryBuilderController:getCommonFields",{model:"com.axelor.meta.db.MetaModel",data:{context:{package:t},model:"com.axelor.meta.db.MetaModel"}});case 4:return n=e.sent,e.abrupt("return",n&&n.data);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ye(e,t){return xe.apply(this,arguments)}function xe(){return(xe=Object(m.a)(s.a.mark((function e(t,n){var a,o,l,c,r,i;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return",[]);case 2:if("metaModel"!==t.type){e.next=17;break}return e.next=5,Q.get("ws/meta/fields/".concat(t.fullName?t.fullName:"".concat(t.packageName,".").concat(t.name)));case 5:return a=e.sent,o=he(a,n),e.next=9,Q.search("com.axelor.meta.db.MetaField",{data:{_domain:"self.metaModel.name = '".concat(t.name,"' AND self.typeName = 'ZonedDateTime'"),_domainContext:{_model:"com.axelor.meta.db.MetaField"}},fields:["name","typeName","metaModel"]});case 9:if(l=e.sent,!((c=l&&l.data&&l.data.length>0&&l.data.map((function(e){return e.name})))&&c.length>0&&o&&o.length>0)){e.next=14;break}return o.forEach((function(e){c.includes(e.name)&&(e.typeName="ZonedDateTime")})),e.abrupt("return",o);case 14:return e.abrupt("return",o);case 17:return e.next=19,Q.get("ws/meta/fields/com.axelor.meta.db.MetaJsonRecord?jsonModel=".concat(t.name));case 19:return r=e.sent,i=he(r,n),e.abrupt("return",ne(i,"sequence")||[]);case 22:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ne(e){return _e.apply(this,arguments)}function _e(){return(_e=Object(m.a)(s.a.mark((function e(t){var n;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Q.search("com.axelor.meta.db.MetaModel",t);case 2:return n=e.sent,e.abrupt("return",n&&n.data&&n.data[0]);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ce(){return(Ce=Object(m.a)(s.a.mark((function e(t){var n,a,o,l,c,r,i,u,d,m,f,p,j=arguments;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=!(j.length>1&&void 0!==j[1])||j[1],a=j.length>2&&void 0!==j[2]&&j[2],o=j.length>3?j[3]:void 0,l=j.length>4&&void 0!==j[4]&&j[4],c=j.length>5?j[5]:void 0,"com.axelor.meta.db.MetaJsonRecord"!==t||!o){e.next=16;break}return e.next=8,Q.get("ws/meta/fields/com.axelor.meta.db.MetaJsonRecord?jsonModel=".concat(o));case 8:if(r=e.sent,i=(i=he(r,a,l,c)||[]).filter((function(e){return me.includes((e.type||"").toLowerCase())&&(!a||!e.json)&&("many-to-many"!==(e.type||"").toLowerCase()||e.targetName)})),!(!n&&i&&i.length>0)){e.next=13;break}return e.abrupt("return",i.filter((function(e){return!["many_to_many","json_many_to_many"].includes((e&&(e.type||"")).toLowerCase().replaceAll("-","_"))})));case 13:return e.abrupt("return",ne(i,"sequence")||[]);case 16:return u={criteria:[{fieldName:"fullName",operator:"=",value:t}]},e.next=19,Ne({data:u});case 19:if(d=e.sent){e.next=22;break}return e.abrupt("return",[]);case 22:return m=d&&d.metaFields.map((function(e){return e.name})),e.next=25,Q.fields({fields:m,model:d.fullName});case 25:if(f=e.sent,p=(p=f&&f.data&&f.data.fields).filter((function(e){return me.includes((e.type||"").toLowerCase())&&(!a||!e.json)&&("many-to-many"!==e.type||e.targetName)})),!(!n&&p&&p.length>0)){e.next=30;break}return e.abrupt("return",p.filter((function(e){return!["many_to_many","json_many_to_many"].includes((e&&(e.type||"")).toLowerCase().replaceAll("-","_"))})));case 30:return e.abrupt("return",p);case 31:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function we(e){return Me.apply(this,arguments)}function Me(){return(Me=Object(m.a)(s.a.mark((function e(t){var n;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Q.search(t);case 2:if(!(n=e.sent)||-1!==n.status){e.next=5;break}return e.abrupt("return",[]);case 5:return e.abrupt("return",n&&n.data);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ve(e){return Fe.apply(this,arguments)}function Fe(){return(Fe=Object(m.a)(s.a.mark((function e(t){var n;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Q.search("com.axelor.meta.db.MetaJsonRecord",{data:{criteria:[{fieldName:"jsonModel",operator:"=",value:t}],operator:"and"}});case 2:if(!(n=e.sent)||-1!==n.status){e.next=5;break}return e.abrupt("return",[]);case 5:return e.abrupt("return",n&&n.data);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ke(e){return Le.apply(this,arguments)}function Le(){return(Le=Object(m.a)(s.a.mark((function e(t){var n;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Q.search("com.axelor.meta.db.MetaJsonField",{data:{criteria:[{fieldName:"jsonModel",operator:"=",value:t},{fieldName:"nameField",operator:"=",value:!0}],operator:"and"},fields:["name"]});case 2:if(!((n=e.sent)&&n.status>-1)){e.next=5;break}return e.abrupt("return",n.data&&n.data[0]);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ie(){return Te.apply(this,arguments)}function Te(){return(Te=Object(m.a)(s.a.mark((function e(){var t,n,a,o,l,c,r,i=arguments;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=i.length>0&&void 0!==i[0]?i[0]:{},n=i.length>1?i[1]:void 0,e.t1=!n||"metaModel"===n,!e.t1){e.next=7;break}return e.next=6,Re(t);case 6:e.t1=e.sent;case 7:if(e.t0=e.t1,e.t0){e.next=10;break}e.t0=[];case 10:if(a=e.t0,e.t3=!n||"metaJsonModel"===n,!e.t3){e.next=16;break}return e.next=15,Ee(t);case 15:e.t3=e.sent;case 16:if(e.t2=e.t3,e.t2){e.next=19;break}e.t2=[];case 19:for(o=e.t2,l=[],c=0;c<a.length;c++)l.push(Object(p.a)(Object(p.a)({},a[c]),{},{type:"metaModel"}));for(r=0;r<o.length;r++)l.push(Object(p.a)(Object(p.a)({},o[r]),{},{type:"metaJsonModel"}));return e.abrupt("return",l||[]);case 24:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Re(){return Se.apply(this,arguments)}function Se(){return(Se=Object(m.a)(s.a.mark((function e(){var t,n,a,o,l=arguments;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=l.length>0&&void 0!==l[0]?l[0]:{},e.next=3,Q.search("com.axelor.meta.db.MetaModel",{data:t});case 3:if(!(n=e.sent)||-1!==n.status){e.next=6;break}return e.abrupt("return",[]);case 6:return a=(n||{}).data,o=void 0===a?[]:a,e.abrupt("return",o);case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ee(){return Ae.apply(this,arguments)}function Ae(){return(Ae=Object(m.a)(s.a.mark((function e(){var t,n,a,o,l=arguments;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=l.length>0&&void 0!==l[0]?l[0]:{},e.next=3,Q.search("com.axelor.meta.db.MetaJsonModel",{data:t});case 3:if(!(n=e.sent)||-1!==n.status){e.next=6;break}return e.abrupt("return",[]);case 6:return a=(n||{}).data,o=void 0===a?[]:a,e.abrupt("return",o);case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Be(e,t,n){return Pe.apply(this,arguments)}function Pe(){return(Pe=Object(m.a)(s.a.mark((function e(t,n,a){var o;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Q.fetchRecord(t,n,a);case 2:if(!(o=e.sent)||-1!==o.status){e.next=5;break}return e.abrupt("return",[]);case 5:return e.abrupt("return",o&&o.data&&o.data[0]);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function $e(e,t){return De.apply(this,arguments)}function De(){return(De=Object(m.a)(s.a.mark((function e(t,n){var a;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Q.add(t,n);case 2:if(!(a=e.sent)||-1!==a.status){e.next=5;break}return e.abrupt("return",[]);case 5:return e.abrupt("return",a&&a.data&&a.data[0]);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Je=n(236),Ye=n(210),ze=n(234),Ge=n(231),He=n(4),Ke=Object(j.a)((function(e){return{root:{display:"flex",flexWrap:"wrap"},select:{width:"150px"}}}));function qe(e){var t=e.name,n=e.value,a=void 0===n?"":n,o=e.onChange,l=e.options,c=e.title,r=e.className,i=e.disableUnderline,u=void 0!==i&&i,s=Object(B.a)(e,["name","value","onChange","options","title","className","disableUnderline"]),d=Ke();return Object(He.jsxs)(Ye.a,{className:$()(d.formControl,r),children:[Object(He.jsx)(ze.a,{children:c}),Object(He.jsx)(Ge.a,Object(p.a)(Object(p.a)({disableUnderline:u,value:a,onChange:function(e){return o(e.target.value)},name:t,style:{marginRight:8},classes:{select:$()(d.select,r)}},s),{},{children:l&&Array.isArray(l)&&l.map((function(e,t){var n=e.name,a=e.title;return Object(He.jsx)(Je.a,{value:n,children:a},t)}))}))]})}var Ue=n(212),We=n(237);function Qe(e){var t=e.name,n=e.title,a=e.autoTitle,o=e.value,l=void 0===o?"":o,c=e.onChange,r=e.onBlur,i=e.readOnly,u=e.inline,s=e.InputProps,d=e.style,m=Object(B.a)(e,["name","title","autoTitle","value","onChange","onBlur","readOnly","inline","InputProps","style"]);return u?Object(He.jsx)(Ue.a,Object(p.a)({style:Object(p.a)({width:"100%"},d),placeholder:n,inputProps:{"aria-label":n},name:t,onChange:function(e){return c(e.target.value)},onBlur:r,autoComplete:"off",readOnly:i,disabled:i,value:l||""},m)):Object(He.jsx)(We.a,Object(p.a)({id:"filled-".concat(t),label:n||a,name:t,style:Object(p.a)({width:"100%"},d),onChange:function(e){return c(e.target.value)},onBlur:r,autoComplete:"off",InputProps:Object(p.a)({readOnly:i},s),value:l||"",className:m.className},m))}Qe.defaultProps={rows:3,readOnly:!1};var Xe=Qe,Ze=n(95),et=Object(j.a)((function(e){return{button:{textTransform:"none",color:"#0275d8"},buttonLabel:{maxHeight:30}}}));var tt=function(e){var t=e.title,n=e.Icon,a=e.onClick,o=e.className,l=e.disabled,c=void 0!==l&&l,r=et();return t?n?Object(He.jsx)(Ze.a,{className:$()(r.button,r.buttonLabel,o),endIcon:Object(He.jsx)(n,{}),onClick:a,disabled:c,children:t}):Object(He.jsx)(Ze.a,{className:$()(r.button,r.buttonLabel,o),onClick:a,disabled:c,children:t}):Object(He.jsx)(z.a,{size:"medium",onClick:a,className:$()(r.button,o),style:{padding:"0px 12px"},disabled:c,children:Object(He.jsx)(n,{fontSize:"small"})})};function nt(e){var t=e.type,n=void 0===t?"integer":t,a=e.title,c=e.onChange,r=e.value,u=void 0===r?0:r,s=(e.readOnly,e.scale),d=void 0===s?2:s,m=(e.customeFormat,e.onBlur),f=Object(B.a)(e,["type","title","onChange","value","readOnly","scale","customeFormat","onBlur"]),j=Object(o.useState)(u),b=Object(i.a)(j,2),v=b[0],h=b[1],g=Object(o.useCallback)((function(e){return Number(Number(e).toFixed("integer"===n?0:d))}),[n,d]);return l.a.useEffect((function(){h(g(u))}),[u,h,g]),Object(He.jsx)(Xe,Object(p.a)({onChange:h,title:a,type:"number",value:"".concat(v),onBlur:function(e){c(g(v)),h(g(v)),m&&m(e)}},f))}nt.defaultProps={readOnly:!1};var at=nt,ot=n(122),lt=n(214),ct=n(216),rt=n(230),it=n(20),ut={date:lt.a,time:ct.a,datetime:rt.a};var st=function(e){var t=e.inline,n=e.type,a=void 0===n?"date":n,c=Object(B.a)(e,["inline","type"]),r=Object(o.useState)(!1),u=Object(i.a)(r,2),s=u[0],d=u[1],m=l.a.useRef(),f=(c.name,c.title),j=c.format,b=(c.error,c.onChange),v=Object(B.a)(c,["name","title","format","error","onChange"]),h=ut[a];return Object(He.jsx)(it.a,{utils:ot.a,children:Object(He.jsx)(h,Object(p.a)(Object(p.a)(Object(p.a)(Object(p.a)({autoOk:!0,open:s,ampm:!1,views:"date"===a?["date"]:"datetime"===a?["date","hours","minutes"]:"time"===a?["hours","minutes","seconds"]:["date"],onChange:function(e){m.current=e,b(e)},PopoverProps:{anchorOrigin:{vertical:"bottom",horizontal:"left"},transformOrigin:{vertical:"top",horizontal:"left"}},disableToolbar:!0,variant:"inline"},t?{invalidDateMessage:""}:{}),{},{style:Object(p.a)({width:"100%"},t?{margin:0}:{}),label:t?"":f,format:j||ue[a]},"time"!==a?{animateYearScrolling:!1}:{}),v),{},{onKeyDown:function(e){40===e.keyCode&&d(!0)},onClose:function(){b(m.current),d(!1)},onOpen:function(){return d(!0)}}))})},dt=n(238),mt=n(215),ft=n(176),pt=n(233),jt=n(123),bt=n.n(jt),vt=Object(ft.a)((function(e){return{listbox:{maxHeight:"300px !important"},chip:{"&.MuiChip-outlined .MuiChip-deleteIconSmall":{color:"#0275d8"},border:"1px solid #0275d8",color:"#0275d8"}}}));function ht(e){var t=Object(o.useState)(!1),n=Object(i.a)(t,2),a=n[0],c=n[1],r=Object(o.useState)([]),u=Object(i.a)(r,2),d=u[0],f=u[1],j=Object(o.useState)(e.isMulti?[]:null),b=Object(i.a)(j,2),v=b[0],h=b[1],g=Object(o.useState)(""),O=Object(i.a)(g,2),y=O[0],x=O[1],N=e.name,_=e.value,C=e.onChange,w=e.options,M=e.optionLabelKey,V=void 0===M?"title":M,F=e.optionValueKey,k=void 0===F?"id":F,L=e.isMulti,I=void 0!==L&&L,T=e.title,R=e.fetchAPI,S=e.inline,E=e.InputProps,A=e.error,P=e.filterSelectedOptions,$=void 0!==P&&P,D=e.disableCloseOnSelect,J=void 0===D||D,Y=e.readOnly,z=void 0!==Y&&Y,G=e.className,H=Object(B.a)(e,["name","value","onChange","options","optionLabelKey","optionValueKey","isMulti","title","fetchAPI","inline","InputProps","error","filterSelectedOptions","disableCloseOnSelect","readOnly","className"]),K=vt(),q=Object(o.useState)(!1),U=Object(i.a)(q,2),W=U[0],Q=U[1],X=l.a.useCallback((function(e){return w&&w.find((function(t){return t&&t[k]===e.trim()}))}),[w,k]);function Z(){return(Z=Object(m.a)(s.a.mark((function e(){var t,n=arguments;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=n.length>0&&void 0!==n[0]?n[0]:"",x(t);case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var ee=function(e,t){var n=l.a.useRef(null),a=function(){return n.current&&clearTimeout(n.current)},o=function(e){return n.current=setTimeout(e,t)};return l.a.useEffect((function(){return function(){return a()}}),[]),function(){for(var t=arguments.length,n=new Array(t),l=0;l<t;l++)n[l]=arguments[l];a(),o((function(){return e.apply(void 0,n)}))}}((function(){return Z.apply(this,arguments)}),400);function ne(e){"Backspace"===e.key&&v&&v[V]===y&&C(null)}function ae(e){C("string"===typeof _?I?e.map((function(e){return e&&e[k]})).join(",")||[]:e&&e[k]:e)}Object(o.useEffect)((function(){var e=!0;return a&&(Q(!0),R?Object(m.a)(s.a.mark((function t(){var n;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,R({search:y});case 2:n=t.sent,e&&(f(n),Q(!1));case 4:case"end":return t.stop()}}),t)})))():(f(w),Q(!1))),function(){e=!1,Q(!1)}}),[R,w,y,a]),Object(o.useEffect)((function(){if("string"===typeof _){var e=_.split(",");h(I?e.map((function(e){return X(e)})):X(e[0]))}else h(_||(I?[]:null))}),[_,I,X]);var oe=function(e){return"metaJsonModel"===(e&&e.type)?"".concat(e&&e[V]?e[V]:""," (Custom model)")||!1:"fieldName"===N?"".concat(te(e&&e.title?e.title:"")," (").concat(e&&e[V],")"):e?e[V]?e[V]:e.id?e.id.toString():"":""};return Object(He.jsx)(pt.a,Object(p.a)(Object(p.a)({getOptionSelected:function(e,t){return I?e[k]===t[k]:oe(e)===oe(t)},getOptionLabel:function(e){return oe(e)},className:G,loading:W,id:bt()("select-widget"),open:a,onOpen:function(){return c(!0)},onClose:function(){return c(!1)},disabled:z,value:v?I?Array.isArray(v)?v:[]:v:I?[]:null,renderTags:function(e,t){return e.map((function(e,n){return Object(He.jsx)(dt.a,Object(p.a)({variant:"outlined",label:e[V],size:"small",classes:{root:K.chip}},t({index:n})))}))},onChange:function(e,t){return ae(t)},options:d||[],multiple:I,filterSelectedOptions:$,onInputChange:function(e,t){return ee(t)},classes:{option:"menu-item",listbox:K.listbox},renderInput:function(e){return Object(He.jsx)(We.a,Object(p.a)(Object(p.a)({},e),{},{error:A,label:S?"":T,fullWidth:!0,onClick:function(){z||c(!0)},InputProps:Object(p.a)(Object(p.a)(Object(p.a)({},E),e.InputProps),{},{endAdornment:Object(He.jsxs)(l.a.Fragment,{children:[W?Object(He.jsx)(mt.a,{className:K.circularProgress,size:15}):null,e.InputProps.endAdornment]})})},I?{}:{onKeyDown:ne}))}},I?{disableCloseOnSelect:J}:{}),H))}var gt=Object(j.a)((function(){return{MuiAutocompleteRoot:{width:"250px",marginRight:"10px"},iconButton:{marginRight:10},icon:{color:"#0275d8"}}}));function Ot(e){var t=e.initValue,n=void 0===t?"":t,a=e.getMetaFields,c=e.editor,r=e.onChange,u=e.value,d=e.classNames,j=e.expression,b=void 0===j?"GROOVY":j,v=e.type,h=e.isParent,g=void 0!==h&&h,O=e.isBPM,y=e.isField,x=e.setInitialField,N=void 0===x?function(){}:x,_=u||{},C=_.fieldName,w=void 0===C?"":C,M=_.allField,V=void 0===M?[]:M,F=Object(o.useState)([]),k=Object(i.a)(F,2),L=k[0],I=k[1],T=gt(),R="context"===y&&X(v)&&O,S=X(v)?"BPM":b,E=Object(o.useState)(null),A=Object(i.a)(E,2),B=A[0],P=A[1],D=Object(o.useState)(null),J=Object(i.a)(D,2),Y=J[0],q=J[1],U=B||[],W=Object(i.a)(U,1)[0],Q=w&&g&&L&&L.some((function(e){return e.name===W})),Z=Q&&(L.find((function(e){return e.name===W}))||{}).target,ee=Q&&(L.find((function(e){return e.name===W}))||{}).jsonTarget,ne=(L&&L.find((function(e){return e.name===W}))||{}).type,ae=V&&V.length>0&&V.find((function(e){return["many_to_many","json_many_to_many"].includes((e&&(e.type||"")).toLowerCase().replaceAll("-","_"))})),oe=V&&V.length>0&&V.find((function(e){return["many_to_one","json_many_to_one"].includes((e&&(e.type||"")).toLowerCase().replaceAll("-","_"))})),le=["one_to_one","json_one_to_one"].includes((ne||"").toLowerCase().replaceAll("-","_"));function ce(e){var t=e&&L.some((function(t){return t.name===e.name&&t.target}));if(O){var a,o=g?e&&e.name?"".concat(n).concat(e.name):"".concat(function(){var e=n&&n.split(ie[S]);return e&&e.length>0&&(e.filter(Boolean)||[]).join(ie[S])}()):e&&e.name?"".concat(t?R?"?.":ie[S]:"").concat(n).concat(e.name):"";if(e&&V.findIndex((function(t){return t.name===e.name}))<=-1){var l=(o||"").split(R?"?.":ie[S])||[],i=V&&V.filter((function(e){return l.includes(e.name)}))||[];a=[].concat(Object(f.a)(i),[e])}else{var u=Object(f.a)(V||[]),s=(w||"").split(R?"?.":ie[S]);s&&s.length>0&&s.forEach((function(e){var t=u.findIndex((function(t){return t.name===e}));t>-1&&u.splice(t,1)})),a=u}r({name:"fieldName",value:e,fieldNameValue:o||void 0,allField:a,isShow:Y},c)}else{var d=g?"".concat(n).concat(e?e.name:""):e?e.name:"";if(d=X(v)?e&&e.name?d:d.slice(0,-1):d,r({name:"fieldName",value:d},c),r({name:"fieldType",value:e&&e.type||""},c),r({name:"field",value:e},c),r({name:"isShow",value:Y},c),e&&V.findIndex((function(t){return t.name===e.name}))<=-1){var m=(d||"").split(ie[S])||[],p=V&&V.filter((function(e){return m.includes(e.name)}))||[];r({name:"allField",value:[].concat(Object(f.a)(p),[e])},c)}else{var j=Object(f.a)(V||[]),b=(w||"").split(ie[S]),h="".concat(n).concat(ie[S]).concat(W).split(ie[S]);if(b&&b.length>0&&b.forEach((function(e){var t=j.findIndex((function(t){return t.name===e}));t>-1&&!(h||[]).includes(e)&&j.splice(t,1)})),b&&1===b.length&&(j=j&&j.filter((function(e){return e.name!==b[0]}))),r({name:"allField",value:j},c),r({name:"fieldValue",value:null},c),j&&1===j.length){var y=j[0];r({name:"fieldType",value:y&&y.type||""},c),r({name:"field",value:y},c),N()}else{var x=j[j.length-1];r({name:"fieldType",value:x&&x.type||""},c),r({name:"field",value:x},c),N()}}}}var re=L&&L.find((function(e){return e.name===W}))||V&&V.find((function(e){return e.name===W}));return Object(o.useEffect)((function(){var e=w&&ie[S]&&w.split(R?"?.":ie[S]);P(e);var t=e&&e.slice(1)&&e.slice(1).join(R?"?.":ie[S]);q(!(!t||["toLocalDateTime()","getTarget()"].includes(t)))}),[w,R,S]),Object(o.useEffect)((function(){var e=!0;return Object(m.a)(s.a.mark((function t(){var n;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,a();case 2:n=t.sent,e&&I(n);case 4:case"end":return t.stop()}}),t)})))(),function(){e=!1}}),[a]),Object(He.jsxs)(l.a.Fragment,{children:[Object(He.jsx)(ht,{name:"fieldName",title:"Field Name",placeholder:"field name",options:L,optionLabelKey:"name",onChange:function(e){return ce(e)},value:re,classes:{root:$()(T.MuiAutocompleteRoot,d&&d.root)}}),Q&&Z&&Object(He.jsxs)(l.a.Fragment,{children:[Y&&!le&&Object(He.jsx)(z.a,{size:"small",onClick:function(){if(q((function(e){return!e})),V&&V.length>0&&W){var e=V.find((function(e){return e.name===W}));ce(Object(p.a)({},e||{}))}},className:T.iconButton,children:Object(He.jsx)(G.a,{title:te("Remove sub field"),children:Object(He.jsx)(H.a,{className:T.icon,fontSize:"small"})})}),(Y||le)&&Object(He.jsx)(Ot,{getMetaFields:function(){return function(e){return Ce.apply(this,arguments)}(Z,!!X(v)||ae&&B&&B.length>0&&B.includes(ae.name)&&B[0]!==ae.name,X(v),ee,oe,O)},editor:c,initValue:"".concat(n).concat(W).concat(R?"?.":ie[S]),value:{fieldName:B.slice(1).join(R?"?.":ie[S]),allField:V},onChange:r,classNames:d,expression:S,type:v,isParent:!!Z,isBPM:O,setInitialField:N,isField:y}),!Y&&!le&&Object(He.jsx)(z.a,{size:"small",onClick:function(){return q((function(e){return!e}))},className:T.iconButton,children:Object(He.jsx)(G.a,{title:te("Add sub field"),children:Object(He.jsx)(K.a,{className:T.icon,fontSize:"small"})})})]})]})}var yt=n(51),xt=Object(j.a)((function(e){return{Container:{display:"flex"},rulesGroupHeader:{display:"flex"},paper:{margin:e.spacing(1,0),padding:e.spacing(3,2),overflow:"auto"},rules:{display:"flex",alignItems:"flex-end",justifyContent:"flex-start",marginBottom:15},MuiAutocompleteRoot:{width:"250px",marginRight:"10px"},disabled:{pointerEvents:"none",opacity:.5},valueFrom:{fontSize:12,color:"rgba(0, 0, 0, 0.54)",fontFamily:'"Roboto", "Helvetica", "Arial", sans-serif'},radio:{padding:"1px 9px",color:"#0275d8","&.MuiRadio-colorSecondary.Mui-checked":{color:"#0275d8"}},operators:{minWidth:75},iconButton:{marginRight:10},timelineConnector:{backgroundColor:"#0275d8"},combinator:{width:"fit-content"},icon:{color:"#0275d8"},timelineOppositeContent:{display:"flex",alignItems:"center",justifyContent:"flex-end",padding:0,maxWidth:80}}}));function Nt(e,t){return _t.apply(this,arguments)}function _t(){return(_t=Object(m.a)(s.a.mark((function e(t,n){var a,o;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=X(n),e.next=3,ye(t,a);case 3:if(e.t0=e.sent,e.t0){e.next=6;break}e.t0=[];case 6:return o=e.t0,e.abrupt("return",o.filter((function(e){return me.includes((e.type||"").toLowerCase())&&(!a||!e.json)})));case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ct(e){var t=e.operator,n=e.editor,a=e.internalProps,l=e.parentType,c=a.onChange,r=a.value,u=Object(B.a)(a,["onChange","value"]),d=xt(),f=u.field,j=void 0===f?{}:f,b=j.targetName,v=j.target,h=j.targetModel,g=j.jsonTarget,O=Object(o.useState)(null),y=Object(i.a)(O,2),x=y[0],N=y[1],_=function(){var e=Object(m.a)(s.a.mark((function e(){var t,n;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!g){e.next=10;break}return e.next=3,Ve(g);case 3:return t=e.sent,e.next=6,ke(g);case 6:n=e.sent,N(n&&n.name),e.next=13;break;case 10:return e.next=12,we(v||h);case 12:t=e.sent;case 13:return e.abrupt("return",t);case 14:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return["like","notLike"].includes(t)?Object(He.jsx)(Xe,Object(p.a)({name:"fieldValue",onChange:function(e){var t;"string"===typeof e||X(l)||(t=e&&e.length>0?e&&e.find((function(e){return e&&b&&e[b]})):e&&e[b],c({name:"nameField",value:t?x:"id"},n)),c({name:"fieldValue",value:e},n)},margin:"none",style:{marginTop:"15px",width:"250px !important"},value:r},u)):["contains","notContains","in","notIn","=","!="].includes(t)?Object(He.jsx)(ht,{name:"fieldValue",title:"Value",placeholder:"Value",fetchAPI:_,isMulti:!(X(l)&&["contains","notContains"].includes(t)||["=","!="].includes(t)),optionLabelKey:b,onChange:function(e){var t;"string"===typeof e||X(l)||(t=e&&e.length>0?e.find((function(e){return e&&e[b]})):e[b],c({name:"nameField",value:t?x:"id"},n)),c({name:"fieldValue",value:e},n)},value:r||[],classes:{root:d.MuiAutocompleteRoot}}):null}function wt(e){var t=e.Component,n=e.operator,a=e.editor,o=e.internalProps,c=o.onChange,r=o.value,i=o.value2,u=o.classes,s=o.style,d=o.targetName,m=Object(B.a)(o,["onChange","value","value2","classes","style","targetName"]);return["=","!=",">",">=","<","<=","like","notLike"].includes(n)?Object(He.jsx)(t,Object(p.a)({name:"fieldValue",onChange:function(e){return c({name:"fieldValue",value:e},a)},value:r,style:s},m)):["between","notBetween"].includes(n)?Object(He.jsxs)(l.a.Fragment,{children:[Object(He.jsx)(t,Object(p.a)({name:"fieldValue",style:Object(p.a)({marginRight:8},s),onChange:function(e){return c({name:"fieldValue",value:e},a)},value:r},m)),Object(He.jsx)(t,Object(p.a)({name:"fieldValue2",onChange:function(e){return c({name:"fieldValue2",value:e},a)},value:i,style:s},m))]}):["in","notIn"].includes(n)?Object(He.jsx)(ht,Object(p.a)({name:"fieldValue",title:"Value",placeholder:"Value",isMulti:!0,optionLabelKey:d,onChange:function(e){c({name:"fieldValue",value:e},a)},value:r||[],classes:{root:u.MuiAutocompleteRoot},optionValueKey:"name"},m)):null}function Mt(e){var t=e.type,n=e.operator,a=e.onChange,o=e.value,l=e.classes,c=e.parentType,r=e.editor,i=Object(B.a)(e,["type","operator","onChange","value","classes","parentType","editor"]),u=Object(p.a)({value:o.fieldValue,value2:o.fieldValue2,onChange:a},i),s=[],d={};switch(t){case"one_to_one":case"many_to_one":case"many_to_many":case"one_to_many":case"json_one_to_one":case"json_many_to_one":case"json_many_to_many":case"json_one_to_many":return Object(He.jsx)(Ct,{operator:n,editor:r,internalProps:Object(p.a)({},u),parentType:c});case"date":case"time":case"datetime":var m=function(e){return e?A()(e,ue[t]):null};return Object(He.jsx)(wt,{Component:st,operator:n,editor:r,internalProps:Object(p.a)(Object(p.a)({type:t,value:m(o.fieldValue),value2:m(o.fieldValue2),onChange:function(e,n){var o=e.name,l=e.value;return a({name:o,value:l&&l.format(ue[t])},n)}},i),{},{margin:"none",classes:l,style:{marginTop:"15px",width:"250px !important"}})});case"integer":case"long":case"decimal":return d={Component:(s=i.field.selectionList&&i.field.selectionList.map((function(e){var t=e.title,n=e.value,a=e.data;return{name:a&&a.value||n,title:t}})))?qe:at,operator:n,editor:r,internalProps:Object(p.a)({},s?Object(p.a)({options:s,classes:l},u):Object(p.a)(Object(p.a)({type:t},u),{},{margin:"none",classes:l,style:{marginTop:"15px",width:"250px !important"}}))},Object(He.jsx)(wt,Object(p.a)({},d));case"enum":return s=i.field.selectionList.map((function(e){var t=e.title,n=e.value,a=e.data;return{name:a&&a.value||n,title:t}})),Object(He.jsx)(wt,{Component:qe,operator:n,editor:r,internalProps:Object(p.a)({options:s,classes:l},u)});default:return d={Component:(s=i.field&&i.field.selectionList&&i.field.selectionList.map((function(e){var t=e.title,n=e.value,a=e.data;return{name:a&&a.value||n,title:t}})))?qe:Xe,operator:n,editor:r,internalProps:Object(p.a)({},s?Object(p.a)({options:s,classes:l},u):Object(p.a)(Object(p.a)({classes:l},u),{},{margin:"none",style:{marginTop:"15px",width:"250px !important"}}))},Object(He.jsx)(wt,Object(p.a)({},d))}}function Vt(e){var t=e.getMetaFields,n=e.onChange,a=e.onRemoveRule,c=e.editor,r=e.value,u=e.expression,s=e.parentType,d=e.parentMetaModal,m=e.element,f=e.isCondition,p=r.fieldType,j=void 0===p?"":p,b=r.field,v=r.operator,h=r.fieldValue,g=r.fieldValue2,O=void 0===g?"":g,y=r.relatedValueModal,x=r.relatedValueFieldName,N=r.relatedElseValueModal,_=r.relatedElseValueFieldName,C=xt(),w=j&&j.toLowerCase().replaceAll("-","_"),M=Object(o.useState)("none"),V=Object(i.a)(M,2),F=V[0],k=V[1],L=Object(o.useState)(y||null),T=Object(i.a)(L,2),R=T[0],S=T[1],E=Object(o.useState)(!1),A=Object(i.a)(E,2),B=A[0],P=A[1],$=Object(o.useState)(null),q=Object(i.a)($,2),U=q[0],W=q[1],Q=Object(o.useState)(),ne=Object(i.a)(Q,2),ae=ne[0],oe=ne[1],le=Object(o.useState)(null),ce=Object(i.a)(le,2),re=ce[0],ue=ce[1],se=Object(o.useState)(null),de=Object(i.a)(se,2),me=de[0],pe=de[1],je=function(e){if(e&&"string"===typeof e){var t=e.toString().split(".");return t&&t.length>1?t.slice(1).join("."):e}},be=function(e,t){e.map((function(e){return fe[e]=t}))};be(["long","decimal","date","time","datetime"],fe.integer),be(["one_to_many","json_one_to_many"],fe.text),be(["many_to_many","json_many_to_many"],["in","notIn","isNull","contains","notContains"]),be(["many_to_one","one_to_one","json_many_to_one","json_one_to_one"],["=","!=","in","notIn","isNull","isNotNull"]),be(["string"],["=","!=","isNull","isNotNull","like","notLike"]);var he=ve.filter((function(e){var t=w;if(""===t&&r.fieldName&&r.allField.length>0){var n=r.allField.find((function(e){return e.name===r.fieldName}));t=(n&&n.type||"").toLowerCase()}return(fe[t]||[]).includes(e.name)})),ge=function(e,t){n({name:e,value:t},c)};return Object(o.useEffect)((function(){var e=r.fieldValue,t=r.allField,n=void 0===t?[]:t,a=r.fieldValue2,o=void 0===a?"":a,l=r.isRelationalValue,c=r.relatedValueModal,i=r.relatedValueFieldName,u=r.relatedElseValueModal,s=r.relatedElseValueFieldName,d=r.isShowMetaModelField,m=r.isShowElseMetaModelField,f=r.isField;ue({allField:n,field:s,fieldName:je(o)||s&&s.name,fieldType:s&&s.type,fieldValue:null,fieldValue2:null,operator:null,isRelationalValue:l||"none",relatedValueFieldName:i,relatedValueModal:c,relatedElseValueFieldName:s,relatedElseValueModal:u,isShow:m}),pe({allField:n,field:i,fieldName:je(e)||i&&i.fieldName,fieldType:i&&i.type,fieldValue:null,fieldValue2:null,operator:null,isRelationalValue:l||f||"none",relatedValueFieldName:i,relatedValueModal:c,isShow:d}),k(l||f||"none"),P(d),oe(m),S(c),W(u)}),[r]),Object(He.jsxs)("div",{className:C.rules,children:[Object(He.jsx)(Ot,{getMetaFields:t,isField:F,editor:c,onChange:n,value:r,expression:u,type:s,isParent:!0,setInitialField:function(){k("none")}}),Object(He.jsxs)(l.a.Fragment,{children:[Object(He.jsx)(qe,{name:"operator",title:"Operator",options:b&&b.selectionList?ve.filter((function(e){return(F&&!["none","param"].includes(F)?["=","!=","isNull","isNotNull"]:["=","!=","isNull","isNotNull","in","notIn"]).includes(e.name)})):F&&!["none","param"].includes(F)?he.filter((function(e){return"in"!==e.name&&"notIn"!==e.name})):he,onChange:function(e){n({name:"operator",value:e},c),k(null),ge("isField",null)},value:v,className:C.operators}),v&&!["isNull","isNotNull"].includes(v)&&Object(He.jsxs)(D.a,{"aria-label":"radioType",name:"radioType",value:F||"none",onChange:function(e){k(e.target.value),pe({fieldValue:null}),ge("fieldValue",null),ue({fieldValue2:null}),ge("fieldValue2",null),!e.target.value||"in"!==v&&"notIn"!==v||["none","param"].includes(e.target.value)||(n({name:"operator",value:void 0},c),k(null),ge("isField",null)),e.target.value?(ge("isRelationalValue",["none","param"].includes(e.target.value)?null:e.target.value),ge("isField",e.target.value),ge("fieldValue",null),ge("fieldValue2",null),"self"===e.target.value?(S(d),W(d),ge("relatedValueModal",d),ge("relatedElseValueModal",d)):(S(null),W(null),oe(!1),P(!1),ge("relatedValueModal",null),ge("relatedElseValueModal",null))):(ge("relatedValueFieldName",null),ge("relatedValueModal",null),ge("relatedElseValueFieldName",null),ge("relatedElseValueModal",null))},children:[Object(He.jsx)("label",{className:C.valueFrom,children:"Value from"}),!["isTrue","isFalse"].includes(v)&&!f&&Object(He.jsxs)(l.a.Fragment,{children:[Object(He.jsx)(J.a,{value:"self",control:Object(He.jsx)(Y.a,{className:C.radio,size:"small"}),label:"Self"}),Object(He.jsx)(J.a,{value:"context",control:Object(He.jsx)(Y.a,{className:C.radio,size:"small"}),label:"Context"})]}),X(s)&&Object(He.jsx)(J.a,{value:"param",control:Object(He.jsx)(Y.a,{className:C.radio,size:"small"}),label:"Is parameter"}),Object(He.jsx)(J.a,{value:"none",control:Object(He.jsx)(Y.a,{className:C.radio,size:"small"}),label:"None"})]})]}),F&&!["none","param"].includes(F)&&v&&!["isNull","isNotNull","isTrue","isFalse"].includes(v)?Object(He.jsxs)(l.a.Fragment,{children:["context"===F&&Object(He.jsxs)(l.a.Fragment,{children:[Object(He.jsx)(ht,{name:"metaModal",title:"Meta Modal",placeholder:"meta modal",fetchAPI:function(){return Ie(ee(m),"metaModel")},optionLabelKey:"name",onChange:function(e){S(e),e?(pe({fieldValue:Object(yt.firstCharLowerCase)(e.name)}),ge("relatedValueModal",e),ge("fieldValue",Object(yt.firstCharLowerCase)(e.name))):(pe({fieldValue:null}),ge("fieldValue",null))},value:R,classes:{root:C.MuiAutocompleteRoot}}),B&&"context"===F&&Object(He.jsx)(z.a,{size:"small",onClick:function(){if(P(!1),ge("isShowMetaModelField",!1),R){var e=R.name;pe({fieldValue:Object(yt.firstCharLowerCase)(e)}),ge("relatedValueModal",R),ge("fieldValue",Object(yt.firstCharLowerCase)(e))}},className:C.iconButton,children:Object(He.jsx)(G.a,{title:te("Remove sub field"),children:Object(He.jsx)(H.a,{color:"primary",fontSize:"small"})})})]}),(B||"self"===F)&&Object(He.jsx)(Ot,{getMetaFields:function(){return"context"===F?Nt(R,s):t()},editor:c,isField:F,onChange:function(e,t){var n=e.value,a=e.fieldNameValue,o=e.allField,l=e.isShow;pe({allField:o,field:n,fieldName:a,fieldType:n&&n.type,fieldValue:null,fieldValue2:null,operator:null,isRelationalValue:"none"===F?null:F,relatedValueFieldName:null,relatedValueModal:null,isShow:l,isShowMetaModelField:B}),ge("isRelationalValue","none"===F?null:F),ge("relatedValueFieldName",n),ge("relatedValueModal",R);var c=X(s),r="context"===F&&c;ge("fieldValue",a?(d&&d.id)===(R&&R.id)?c?"self.".concat(a):"".concat(Z(R&&R.name||d&&d.name||"self")).concat(r?"?.":ie[c?"BPM":u]).concat(a).concat(n&&n.typeName&&!c?"".concat(r?"?.":ie[u],"toLocalDateTime()"):""):"".concat(Z(R&&R.name)).concat(r?"?.":ie[c?"BPM":u]).concat(a).concat(n&&["json-many-to-one","MANY_TO_ONE","many-to-one"].includes(n.type)&&c&&"context"===F?"".concat(r?"?.":ie[u],"getTarget()"):"").concat(n&&n.typeName&&!c?"".concat(r?"?.":ie[u],"toLocalDateTime()"):""):void 0)},value:me,expression:u,type:s,isParent:!0,isBPM:!0}),!B&&R&&"context"===F&&Object(He.jsx)(z.a,{size:"small",onClick:function(){P(!0),ge("isShowMetaModelField",!0)},className:C.iconButton,children:Object(He.jsx)(G.a,{title:te("Add sub field"),children:Object(He.jsx)(K.a,{className:C.icon,fontSize:"small"})})}),["between","notBetween"].includes(v)&&Object(He.jsxs)(l.a.Fragment,{children:["context"===F&&Object(He.jsxs)(l.a.Fragment,{children:[Object(He.jsx)(ht,{name:"metaModal",title:"Meta Modal Else",placeholder:"meta modal",fetchAPI:function(){return Ie(ee(m),"metaModel")},optionLabelKey:"name",onChange:function(e){W(e),e?(ue({fieldValue2:Object(yt.firstCharLowerCase)(e.name)}),ge("relatedElseValueModal",e),ge("fieldValue2",Object(yt.firstCharLowerCase)(e.name))):(ue({fieldValue2:null}),ge("fieldValue2",null))},value:U,classes:{root:C.MuiAutocompleteRoot}}),ae&&"context"===F&&Object(He.jsx)(z.a,{size:"small",onClick:function(){if(oe(!1),ge("isShowElseMetaModelField",!1),U){var e=U.name;pe({fieldValue:Object(yt.firstCharLowerCase)(e)}),ge("relatedElseValueModal",U),ge("fieldValue2",Object(yt.firstCharLowerCase)(e))}},className:C.iconButton,children:Object(He.jsx)(G.a,{title:te("Remove sub field"),children:Object(He.jsx)(H.a,{className:C.icon,fontSize:"small"})})})]}),(ae||"self"===F)&&Object(He.jsx)(Ot,{getMetaFields:function(){return Nt(U,w)},editor:c,isField:F,onChange:function(e,t){var n=e.value,a=e.fieldNameValue,o=e.allField,l=e.isShow;ue({allField:o,field:n,fieldName:a,fieldType:n&&n.type,fieldValue:null,fieldValue2:null,operator:null,isRelationalValue:"none"===F?null:F,relatedValueFieldName:x,relatedValueModal:N,relatedElseValueFieldName:_,relatedElseValueModal:N,isShow:l,isShowMetaModelField:B,isShowElseMetaModelField:ae}),ge("relatedElseValueFieldName",n),ge("relatedElseValueModal",U);var c=X(s),r="context"===F&&c;ge("fieldValue2",a?(d&&d.id)===(U&&U.id)?c?"self.".concat(a):"".concat(Z(R&&R.name||d&&d.name||(c?"self":""))).concat(r?"?.":ie[c?"BPM":u]).concat(a).concat(n&&n.typeName&&!c?"".concat(r?"?.":ie[u],"toLocalDateTime()"):""):"".concat(Z(U&&U.name)).concat(r?"?.":ie[c?"BPM":u]).concat(a).concat(n&&["json-many-to-one","MANY_TO_ONE","many-to-one"].includes(n.type)&&c&&"context"===F?"".concat(r?"?.":ie[u],"getTarget()"):"").concat(n&&n.typeName&&!c?"".concat(r?"?.":ie[u],"toLocalDateTime()"):""):void 0)},value:re,expression:u,type:s,isParent:!0,isBPM:!0}),!ae&&U&&"context"===F&&Object(He.jsx)(z.a,{size:"small",onClick:function(){oe(!0),ge("isShowElseMetaModelField",!0)},className:C.iconButton,children:Object(He.jsx)(G.a,{title:te("Add sub field"),children:Object(He.jsx)(K.a,{color:"primary",fontSize:"small"})})})]})]}):v&&Object(He.jsx)(Mt,{type:w,parentType:s,operator:v,onChange:function(e,t){n(e,t),ge("isField",F),ge("isRelationalValue",null),ge("relatedValueFieldName",null),ge("relatedValueModal",null)},value:{fieldValue:h,fieldValue2:O},classes:C,editor:c,field:b}),Object(He.jsx)("div",{children:Object(He.jsx)(tt,{Icon:I.a,onClick:a})})]})}function Ft(e){var t=e.onAddGroup,n=e.isRemoveGroup,a=e.onRemoveGroup,c=e.onAddRule,r=e.onRemoveRule,u=e.editor,s=void 0===u?{}:u,d=e.getChildEditors,m=e.onChange,f=e.getMetaFields,p=e.isDisable,j=e.expression,v=e.type,h=e.parentMetaModal,g=e.element,O=e.isCondition,y=xt(),F=Object(o.useState)(!1),L=Object(i.a)(F,2),T=L[0],R=L[1],S=s.id,E=s.rules,A=void 0===E?[]:E,B=d(s.id);return Object(o.useEffect)((function(){var e=X(v);R(e)}),[v]),Object(He.jsx)(b.a,{variant:"outlined",className:$()(y.paper,p&&y.disabled),children:Object(He.jsx)("div",{className:$()(y.rulesGroupHeader),children:Object(He.jsx)(x.a,{align:"alternate",style:{height:"100%",padding:0,margin:0},children:Object(He.jsxs)(N.a,{children:[Object(He.jsx)(_.a,{className:y.timelineOppositeContent,children:Object(He.jsx)(qe,{name:"combinator",className:y.combinator,disableUnderline:!0,options:le,value:s.combinator,onChange:function(e){return m({name:"combinator",value:e},s)}})}),Object(He.jsxs)(C.a,{children:[Object(He.jsx)(w.a,{variant:"outlined",style:{borderColor:"#0275d8"}}),Object(He.jsx)(M.a,{className:y.timelineConnector})]}),Object(He.jsxs)(V.a,{children:[Object(He.jsx)(tt,{title:"Add Group",Icon:k.a,onClick:function(){return t(S)}}),n&&Object(He.jsx)(tt,{title:"Remove Group",Icon:I.a,onClick:function(){return a(S)}}),A.map((function(e,t){return Object(He.jsx)(l.a.Fragment,{children:Object(He.jsx)(Vt,{getMetaFields:f,onRemoveRule:function(){return r(s.id,t)},onChange:function(e,n){return m(e,n,t)},editor:s,value:e,expression:j,parentType:v,isBPM:T,parentMetaModal:h,element:g,isCondition:O})},t)})),Object(He.jsx)(tt,{title:"Add Rule",Icon:k.a,onClick:function(){return c(S)}}),B.map((function(e,n){return Object(He.jsx)(l.a.Fragment,{children:Object(He.jsx)(Ft,{isRemoveGroup:!0,onAddGroup:t,onRemoveGroup:a,onAddRule:c,onRemoveRule:r,getChildEditors:d,getMetaFields:f,onChange:function(e,t,n){return m(e,t,n)},editor:e,type:v,element:g,expression:j,isCondition:O})},e.id)}))]})]})})})})}var kt=Object(j.a)((function(e){return{Container:{display:"flex"},rulesGroupHeader:{display:"flex"},paper:{margin:e.spacing(1),padding:e.spacing(3,2)},rules:{display:"flex"},MuiAutocompleteRoot:{width:"50%",marginRight:"10px"},MuiAutocompleteRoot1:{width:"500px"},title:{flexGrow:1},disabled:{pointerEvents:"none",opacity:.5},popoverContainer:{display:"flex",flexDirection:"column",padding:e.spacing(2)},typography:{display:"flex"},popoverHeader:{display:"flex",alignItems:"center",borderBottom:"solid 1px #DDD"},hideModel:{display:"none"}}})),Lt=0,It={id:Lt,parentId:-1,combinator:"and",rules:[{}]},Tt={rules:[It]};var Rt=function(e){var t=e.value,n=void 0===t?Tt:t,a=e.setValue,c=e.index,r=e.element,u=e.type,j=e.queryModel,v=e.isCondition,h=e.isPackage,g=void 0!==h&&h,O=n||{},y=O.metaModals,x=O.rules,N=Object(o.useState)("GROOVY"),_=Object(i.a)(N,1)[0],C=Object(o.useState)(y),w=Object(i.a)(C,2),M=w[0],V=w[1],F=Object(o.useState)(x),k=Object(i.a)(F,2),L=k[0],I=k[1],R=kt();function S(e){Lt=(L?L.length:Lt)+1,I((function(t){return[].concat(Object(f.a)(t),[{id:Lt,parentId:e,combinator:"and",rules:[Object(p.a)(Object(p.a)({},It||{}),{},{id:Lt,parentId:e})]}])}))}function E(e){I(Object(T.a)((function(t){var n=L.findIndex((function(t){return t.id===e}));t.splice(n,1)})))}function A(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};I(Object(T.a)((function(n){var a=L.findIndex((function(t){return t.id===e}));n[a].rules=[].concat(Object(f.a)(n[a].rules),[t])})))}function B(e,t){I(Object(T.a)((function(n){n[L.findIndex((function(t){return t.id===e}))].rules.splice(t,1)})))}var P=function(e){return L&&L.filter((function(t){return t.parentId===e}))};function $(){return D.apply(this,arguments)}function D(){return(D=Object(m.a)(s.a.mark((function e(){var t,n,a,o;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=X(u),!(g&&t&&j)){e.next=10;break}return e.next=4,ge(j);case 4:if(e.t0=e.sent,e.t0){e.next=7;break}e.t0={};case 7:return n=e.t0,a=n.fields,e.abrupt("return",a&&a.filter((function(e){return me.includes((e.type||"").toLowerCase())&&(!t||!e.json)})));case 10:return e.next=12,ye(M,t);case 12:if(e.t1=e.sent,e.t1){e.next=15;break}e.t1=[];case 15:return o=e.t1,e.abrupt("return",o.filter((function(e){return me.includes((e.type||"").toLowerCase())&&(!t||!e.json)})));case 17:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(o.useEffect)((function(){a({metaModals:M,rules:L},c)}),[c,a,M,L]),Object(o.useEffect)((function(){V(y),I(x)}),[y,x]),Object(He.jsx)("div",{style:{width:"100%"},children:Object(He.jsxs)(b.a,{variant:"outlined",className:R.paper,children:[Object(He.jsx)("div",{style:{display:"flex",width:"100%",flexDirection:"column"},children:Object(He.jsx)("div",{style:{display:"flex"},children:(!X(u)||0===c)&&Object(He.jsx)(ht,{name:"metaModal",title:"Meta Modal",placeholder:"meta modal",fetchAPI:function(){return Ie(ee(r),X(u)?void 0:"metaModel")},className:v&&X(u)||g?R.hideModel:"",optionLabelKey:"name",onChange:function(e){V(e),I([It])},value:M,classes:{root:R.MuiAutocompleteRoot},readOnly:!(!j||!X(u))})})}),(L&&L.filter((function(e){return-1===e.parentId}))||[]).map((function(e){return Object(He.jsxs)(l.a.Fragment,{children:[Object(He.jsx)(Ft,{onAddGroup:S,onRemoveGroup:E,onAddRule:A,onRemoveRule:B,getChildEditors:P,getMetaFields:$,onChange:function(e,t,n){return function(e,t,n){var a=e.name,o=e.value;I(Object(T.a)((function(e){var l=L.findIndex((function(e){return e.id===t.id}));n>=0?Object.assign(e[l].rules[n]=Object(p.a)(Object(p.a)(Object(p.a)({},e[l].rules[n]),{},Object(d.a)({},a,o),"fieldName"===a?{operator:"",fieldValue:null,fieldValue2:null,isRelationalValue:null,relatedValueFieldName:null,relatedValueModal:null}:{}),"operator"===a?{fieldValue:null,fieldValue2:null,isRelationalValue:null,relatedValueFieldName:null,relatedValueModal:null}:{})):e[l][a]=o})))}(e,t,n)},editor:e,isDisable:!Boolean(M)&&!g,expression:_,type:u,parentMetaModal:M,element:r,isCondition:v}),Object(He.jsx)("br",{})]},e.id)}))]})})},St=Object(j.a)((function(e){return{paper:{padding:e.spacing(3,2),width:"calc(100% - 40px)"},expressionContainer:{display:"flex",alignItems:"center"},root:{display:"flex",flexDirection:"column",alignItems:"flex-start",height:"calc(100% - 50px)",overflow:"auto"},expression:{display:"flex",alignItems:"flex-start"},dialog:{minWidth:300},container:{height:"100%",overflow:"hidden"},actions:{width:"100%",display:"flex",alignItems:"center",justifyContent:"flex-end"},combinator:{width:"fit-content"},timelineConnector:{backgroundColor:"#0275d8"},save:{margin:e.spacing(1),backgroundColor:"#0275d8",borderColor:"#0267bf",color:"white","&:hover":{backgroundColor:"#025aa5",borderColor:"#014682",color:"white"}},timeline:{height:"100%",width:"100%",padding:0,margin:0},timelineOppositeContent:{display:"flex",alignItems:"center",justifyContent:"flex-end",padding:0,maxWidth:80},timelineItem:{width:"100%","&.MuiTimelineItem-missingOppositeContent:before":{padding:0}}}})),Et=0,At=0;var Bt=function(e){var t=e.parameters||{},n=t.type,a=void 0===n?"expressionBuilder":n,c=t.id,r=t.model,u=t.resultField,j=t.resultMetaField,F=t.modelFilter,L=t.queryModel,E=t.withParam,B=t.isCondition,P=t.isPackage,$=X(a)?"BPM":"GROOVY",D=Object(o.useState)("and"),J=Object(i.a)(D,2),Y=J[0],z=J[1],G=Object(o.useState)(null),H=Object(i.a)(G,2),K=H[0],q=H[1],U=Object(o.useState)(!1),W=Object(i.a)(U,2),Q=W[0],ee=W[1],te=Object(o.useState)(null),ne=Object(i.a)(te,2),ae=ne[0],de=ne[1],me=Object(o.useState)([{Component:Rt}]),fe=Object(i.a)(me,2),ve=fe[0],he=fe[1],ge=St();function Oe(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],o=arguments.length>3?arguments[3]:void 0,l=pe[X(a)?"BPM":$],c=e.fieldName,r=e.operator,i=e.allField,u=e.fieldValue,s=e.fieldValue2,d=e.isRelationalValue,m=e.relatedValueFieldName,f=e.relatedValueModal,p=e.relatedElseValueFieldName,j=e.relatedElseValueModal,b=e.parent,v=e.nameField,h=c,g=h&&h.split(ie[X(a)?"BPM":$]).filter((function(e){return""!==e})),O=g[0],y=i.find((function(e){return e.name===O})),x=y||{},N=x.targetName,_=x.selectionList,C=x.nameField,w=y&&y.type&&y.type.toLowerCase().replaceAll("-","_"),M=y&&y.typeName,V=g&&g.splice(1)||[];if(["many_to_many","one_to_many","json_many_to_many","json_one_to_many"].includes(w)){var F=t.match(/\$\$/g);if(F&&F.length>0){var k=V.length>=1?"".concat(O,".find{it->it.$$$$}").concat(se.includes(r)?" != null":" == null"):"".concat(O,".").concat(V.length>0?"find":"collect","{it->it$$$$}").concat(V.length>0?se.includes(r)?" != null":" == null":"");t=t.replace(/\$\$/g,k)}else{var L=V.length>=1?"".concat(O,".find{it->it.$$}").concat(se.includes(r)?" != null":" == null"):"".concat(O,".").concat(V.length>0?"find":"collect","{it->it$$}").concat(V.length>0?se.includes(r)?" != null":" == null":"");t+=L}var I=V.join(ie[$]);return Oe({fieldName:I,operator:r,allField:i,fieldValue:u,fieldValue2:s,isRelationalValue:d,relatedValueFieldName:m,relatedValueModal:f,relatedElseValueFieldName:p,relatedElseValueModal:j,parent:g&&g[0],nameField:C||v},t,V.length>1,o)}if(["json_many_to_one","json_one_to_one","many_to_one","one_to_one"].includes(w)){var T=V.join(ie[$]),R=t.match(/\$\$/g),S=V.length>=1?"".concat(O).concat(ie[$]):O;return R&&R.length>0?t=t.replace(/\$\$/g,"".concat(S,"$$$$")):t+="".concat(S,"$$"),Oe({fieldName:T,operator:r,allField:i,fieldValue:u,fieldValue2:s,isRelationalValue:d,relatedValueFieldName:m,relatedValueModal:f,relatedElseValueFieldName:p,relatedElseValueModal:j,nameField:C||v,parent:g&&g[0]},t,V.length>1,o)}var A=["long","integer","decimal","boolean"].includes(w),B=["date","time","datetime"].includes(w);if(A&&(u||!1===u||_||d||(u=0),["between","notBetween"].includes(r)&&!s&&(s=0)),d||A||"object"===typeof u||(u="'".concat(oe(u,E),"'"),s="'".concat(oe(s,E),"'")),B&&(d||(u=ye(w,u),s=ye(w,s)),h=M?"".concat(h,"?.toLocalDateTime()"):h),["in","notIn"].includes(r)){var P=t&&t.includes("{it->it$$}"),D=i.find((function(e){return e.name===b}))||{},J="string"===typeof(e&&e.fieldValue)?e.fieldValue:e.fieldValue.map((function(e){return A?"".concat(e.nameField||e.targetName||e.fullName||e.name||e.id):e.nameField||e.targetName||e.fullName||e.name?"'".concat(e.nameField||e.targetName||e.fullName||e.name,"'"):e.id})).join(","),Y=n||V.length>=1?"":"".concat(h).concat(_?"":"".concat(ie[$]).concat(v||D&&D.targetName||N||"fullName")),z="".concat("notIn"===r?"!":"","(".concat(J,")")).concat(ie[$]).concat(l[r]).concat(P?"All":"","(").concat(o).concat(ie[$]).concat(t.replace(/\$\$/g,Y),")");return z}if(["contains","notContains"].includes(r)){var G=t&&t.includes("{it->it$$}"),H=i.find((function(e){return e.name===b}))||{},K="string"===typeof(e&&e.fieldValue)?e.fieldValue:e.fieldValue&&e.fieldValue.map((function(e){return A?"".concat(e.nameField||e.targetName||e.fullName||e.name||e.id):e.nameField||e.targetName||e.fullName||e.name?"'".concat(e.nameField||e.targetName||e.fullName||e.name,"'"):e.id})).join(","),q=n||V.length>=1?"":"".concat(h).concat(_?"":"".concat(ie[$]).concat(v||H&&H.targetName||N||"fullName")),U="".concat("notContains"===r?"!":"","(").concat(o).concat(ie[$]).concat(t.replace(/\$\$/g,q),")").concat(ie[$]).concat(l[r]).concat(G?"All":"","(").concat(K,")");return U}if(["between","notBetween"].includes(r)){var W=t.match(/it.\$\$/g);if(W&&W.length){var Q="(it.".concat(o).concat(ie[$]).concat(h," >= ").concat(u," && it.").concat(o).concat(ie[$]).concat(h," <= ").concat(s,")");return"notBetween"===r?"".concat(t.replace(/it.\$\$/g,"!".concat(Q))):t.replace(/it.\$\$/g,Q)}var Z=function(e){var t=e&&e.replace(/\$\$/g,h)||h;return"notBetween"===r?"!(".concat(o).concat(ie[$]).concat(t," >= ").concat(u," && ").concat(o).concat(ie[$]).concat(t," <= ").concat(s,")"):"(".concat(o).concat(ie[$]).concat(t," >= ").concat(u," && ").concat(o).concat(ie[$]).concat(t," <= ").concat(s,")")};return Z(t)}if(["isNotNull","isNull"].includes(r)){var ee="".concat(h," ").concat(l[r]),te=i.find((function(e){return e.name===b}))||{},ne=t&&t.includes("{it->it$$}");if(ne){var ae=n||V.length>=1?"":"".concat(h).concat(_?"":"".concat(ie[$]).concat(te&&te.targetName||N||"fullName"));return"".concat(o).concat(ie[$]).concat(t.replace(/\$\$/g,"".concat(ae," ").concat(ee)))}return"".concat(o).concat(ie[$]).concat(t.replace(/\$\$/g,ee))}if(["isTrue","isFalse"].includes(r)){var le="isTrue"===r,ce="".concat(h," ").concat(l[r]," ").concat(le);return"".concat(o).concat(ie[$]).concat(t.replace(/\$\$/g,ce))}if(["like","notLike"].includes(r)){var re="".concat(h).concat(ie[$]).concat(l[r],"(").concat(u,")");return"".concat("notLike"===r?"!":"").concat(o).concat(ie[$]).concat(t.replace(/\$\$/g,re))}var ue=y||i.find((function(e){return e.name===b}))||{},de="object"===typeof u&&u?"'".concat(oe(u[v]||u[N]||u.fullName||u.name||u.id||"",E),"'"):u,me="".concat("object"===typeof u&&u?"".concat(h).concat(ie[$]).concat(v||ue.targetName||"fullName"):h," ").concat(l[r]," ").concat(de);return"".concat(o).concat(ie[$]).concat(t.replace(/\$\$/g,me))}function ye(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],o=X(a);if("date"===e){var l="'".concat(A()(t,ue.date).format("YYYY-MM-DD"),"'");return n||o?l:"LocalDate.parse(".concat(l,")")}if("datetime"===e)return n||o?"'".concat(A()(t,ue.datetime).toISOString(),"'"):"LocalDateTime.of(".concat(A()(t,ue.datetime).format("YYYY-M-D-H-m-s").split("-"),")");var c="'".concat(A()(t,ue.time).format("HH:mm:ss"),"'");return n||o?c:"LocalTime.parse(".concat(c,")")}function xe(e,t){for(var n=X(a),o=n?"self":t,l=pe[n?"BPM":$],c=[],r=function(t){var a=e[t],r=a.fieldName,i=a.field,u=void 0===i?{}:i,s=a.operator,d=a.allField,m=u||{},f=m.targetName,p=m.selectionList,j=u&&u.type&&u.type.toLowerCase(),b=u&&u.typeName,v=["long","integer","decimal","boolean"].includes(j),h=["date","time","datetime"].includes(j),g=a.fieldValue,O=a.fieldValue2,y=a.isRelationalValue,x=r;if(v&&!p&&!y&&(g||(g=0),["between","notBetween"].includes(s)&&!O&&(O=0),!x||""===x))return ee(!0),c.push(null),{v:void 0};var N=x&&x.split(ie[$])[0],_=d&&d.find((function(e){return e.name===N}));if(["many_to_many","one_to_many","many_to_one","one_to_one","json_many_to_many","json_one_to_many","json_many_to_one","json_one_to_one"].includes(_&&_.type&&_.type.toLowerCase()&&_.type.toLowerCase().replaceAll("-","_")))c.push(Oe(a,void 0,!1,o));else{y||v||"object"===typeof g||(g="'".concat(oe(g,E),"'"),O="'".concat(oe(O,E),"'")),h&&(y||(g=ye(j,g),O=ye(j,O)),x=b?"".concat(x,"?.toLocalDateTime()"):x);var C=n?re:ce;if(["in","notIn"].includes(s)){var w=a&&a.fieldValue&&a.fieldValue.map((function(e){return v?"".concat(e.targetName||e.fullName||e.name):"'".concat(e.targetName||e.fullName||e.name,"'")})).filter((function(e){return""!==e})).join(",");c.push("".concat("notIn"===s?"!":"","(".concat(w,")")).concat(ie[$]).concat(l[s],"(").concat(o).concat(ie[$]).concat(x).concat(p?" ":"".concat(ie[$]," ").concat(f||"fullName"),")"))}else if(["between","notBetween"].includes(s))"notBetween"===s&&c.push("!(".concat(o).concat(ie[$]).concat(x," >= ").concat(g," ").concat(C.and," ").concat(o).concat(ie[$]).concat(x," <= ").concat(O,")")),c.push("(".concat(o).concat(ie[$]).concat(x," >= ").concat(g," ").concat(C.and," ").concat(o).concat(ie[$]).concat(x," <= ").concat(O,")"));else if(["isNotNull","isNull"].includes(s))c.push("".concat(o).concat(ie[$]).concat(x," ").concat(l[s]));else if(["isTrue","isFalse"].includes(s)){var M="isTrue"===s;c.push("".concat(o).concat(ie[$]).concat(x," ").concat(l[s]," ").concat(M))}else if(["like","notLike"].includes(s))c.push("".concat("notLike"===s?"!":"").concat(o).concat(ie[$]).concat(x).concat(ie[$]).concat(l[s],"(").concat(g,")"));else{var V="object"===typeof g&&g?"'".concat(oe(g[f]||g.fullName||g.name||"",E),"'"):g;c.push("".concat(o).concat(ie[$]).concat("many_to_one"===j||"json_many_to_one"===j?"".concat(x).concat(ie[$]).concat(u.targetName||"fullName"):x," ").concat(l[s]," ").concat(V))}}},i=0;i<(e&&e.length);i++){var u=r(i);if("object"===typeof u)return u.v}return c}var Ne=function(e,t){if(X(a)&&t&&e&&e.allField&&e.allField.find((function(e){return e.name===t&&be.includes(e.type)&&(e.modelField||"com.axelor.meta.db.MetaJsonRecord"===e.model||"com.axelor.meta.db.MetaJsonRecord"===e.target)})))return!0};function _e(e){var t,n=e.jsonFieldName,a=e.parentCustomField,o=e.field,l=e.value,c=e.values,r=e.targetName,i=e.operator,u=e.map_operators,s=e.rule,d=l;if(n&&je.includes(a?a.type:o.type)){var m=(s||{}).relatedValueFieldName,f=(t=a?a.target:o.target)&&t.split(".").pop(),p="".concat(["in","notIn"].includes(i)?"(".concat(l||"",")"):["like","notLike"].includes(i)?"CONCAT('%',".concat(l,",'%')"):l||"").concat("MetaJsonRecord"===f?" and jsonModel = '".concat(a?a.jsonTarget:o.jsonTarget,"'"):""),j="select id from ".concat(f),b=["isNull","isNotNull"].includes(i),v=["in","notIn"].includes(i);if(["between","notBetween"].includes(i))return"(".concat(j);d="".concat(v?"":"(").concat(j," where ").concat(c&&c.length>1?"".concat(c.slice(1).join(ie[$])):"").concat(r?"".concat(c&&c.length>1&&!b?".":"").concat(b?"":r):""," ").concat(u[i]," ").concat(p).concat(r&&m&&m.targetName?".".concat(m.targetName):"").concat(v?"":")")}return d}function Ce(e,t,n){var o=e&&e[0]||{},l=o.rules,c=o.combinator,r=void 0===c?"and":c,i=o.children,u=function(e,t){for(var n=X(a),o=n?"self":t,l=pe[n?"BPM":$],c=[],r=function(a){var r=e[a],i=r.fieldName,u=r.field,s=void 0===u?{}:u,d=r.operator,m=r.allField,f="param"===r.isField,j=s||{},b=j.targetName,v=j.selectionList,h=j.model,g=j.target,O=j.jsonField,y=s&&s.type&&s.type.toLowerCase(),x=i&&i.split(ie[$])[0],N=m&&m.find((function(e){return e.name===x})),_=["many_to_many","one_to_many","many_to_one","one_to_one","json_many_to_many","json_one_to_many","json_many_to_one","json_one_to_one"].includes(N&&N.type&&N.type.toLowerCase()&&N.type.toLowerCase().replaceAll("-","_")),C=["long","integer","decimal","boolean"].includes(y),w=["date","time","datetime"].includes(y),M="com.axelor.meta.db.MetaJsonRecord"===h||"com.axelor.meta.db.MetaJsonRecord"===g||O,V=void 0,F=i&&i.split(ie[$]);if(F&&F.length>1){var k=m&&m.find((function(e){return F&&F.find((function(t){return e.name===t&&("com.axelor.meta.db.MetaJsonRecord"===e.model||"com.axelor.meta.db.MetaJsonRecord"===e.target||e.jsonField)}))}));k&&(M=!0,V=k)}var L=M?"".concat(function(e,t,n){var a=e.type,o=e.jsonField;switch(a){case"text":case"string":case"date":case"datetime":case"time":return"json_extract_text(".concat(t,".").concat(o,",'").concat(n,"')");case"many-to-one":case"json-many-to-one":case"many_to_one":case"json_many_to_one":return"json_extract_integer(".concat(t,".").concat(o,",'").concat(e.name,"','id')");case"integer":return"json_extract_integer(".concat(t,".").concat(o,",'").concat(n,"')");case"decimal":return"json_extract_decimal(".concat(t,".").concat(o,",'").concat(n,"')");case"boolean":return"json_extract_boolean(".concat(t,".").concat(o,",'").concat(n,"')")}}(V?Object(p.a)(Object(p.a)({},V),{},{targetName:s&&s.targetName}):s,o,i)):void 0,I=r||{},T=I.fieldValue,R=I.fieldValue2,S=I.isRelationalValue,A=I.relatedValueModal,P=void 0===A?{}:A,D=I.relatedElseValueModal,J=void 0===D?{}:D;if(C&&!v&&!S&&(T||(T=0),["between","notBetween"].includes(d)&&!R&&(R=0),!i||""===i))return ee(!0),c.push(null),{v:void 0};var Y=Z(P&&P.name),z=Z(J&&J.name),G=Y===t||!E,H=z===t||!E;["isNotNull","isNull"].includes(d)||G||++At,f&&++Et,S||C||"object"===typeof T||(T="'".concat(oe(T,E),"'"),R="'".concat(oe(R,E),"'")),w&&(S||(T=ye(y,T,M),R=ye(y,R,M)));var K=n?re:ce;if(["in","notIn"].includes(d)){var q=r&&r.fieldValue&&r.fieldValue.map((function(e){return C?"".concat(e.targetName||e.fullName||e.name):"'".concat(e.targetName||e.fullName||e.name,"'")})).filter((function(e){return""!==e}));q=_e({jsonFieldName:L,parentCustomField:V,field:s,value:f?B?"?":":param".concat(Et):q,values:F,targetName:b,operator:d,map_operators:l,rule:r}),c.push({condition:"".concat(L||"".concat(o,".").concat(i).concat(v?"":".".concat(b||"fullName"))," ").concat(L?"IN":l[d]," ").concat(G?E?L?q:T:"(".concat(q,")"):"?".concat(At)),values:G?void 0:[[f?B?"?":":param".concat(Et):q]]})}else if(["between","notBetween"].includes(d)){var U=G&&H?void 0:G?[f?B?"?":":param".concat(Et):R]:H?[f?B?"?":":param".concat(Et):T]:[f?B?"?":":param".concat(Et):T,f?B?"?":":param".concat(++Et):R],W=_e({jsonFieldName:L,parentCustomField:V,field:s,value:null,values:i&&i.split(ie[$]),targetName:b,operator:d,map_operators:l,rule:r});if(w&&n)c.push({condition:"".concat(L?"".concat(L).concat(W?" IN ":""):"".concat(o,".").concat(i)).concat(W?"".concat(W," "):"").concat(b?".".concat(b," "):"").concat("notBetween"===d?"NOT BETWEEN":"BETWEEN"," ").concat(G?f?B?"?":":param".concat(Et):T:"?".concat(At)," ").concat(K.and," ").concat(H?f?B?"?":":param".concat(++Et):R:"?".concat(++At)).concat(W?")":""),values:U});else{if(W){var Q=i&&i.split(ie[$]);c.push({condition:"(".concat(L).concat(W?" IN ":"").concat(W||"").concat("notBetween"===d?" NOT(":""," self").concat(Q&&Q.length>1?".".concat(Q.slice(1).join(ie[$])):"").concat(b?".".concat(b):""," >= ").concat(G?f?B?"?":":param".concat(Et):T:"?".concat(At)," ").concat(K.and," self").concat(Q&&Q.length>1?".".concat(Q.slice(1).join(ie[$])):"").concat(b?".".concat(b):""," <= ").concat(H?f?B?"?":":param".concat(++Et):R:"?".concat(++At),")").concat(W?")":"").concat("notBetween"===d?")":""),values:U})}c.push({condition:"".concat("notBetween"===d?"NOT ":"","(").concat(L||"".concat(o,".").concat(i)," >= ").concat(G?f?B?"?":":param".concat(Et):T:"?".concat(At)," ").concat(K.and," ").concat(L||"".concat(o,".").concat(i)," <= ").concat(H?f?B?"?":":param".concat(++Et):R:"?".concat(++At),")"),values:U})}}else if(["isNotNull","isNull"].includes(d)){var X,te=L&&je.includes(V?V.type:s.type),ne=i&&i.split("."),ae=ne&&ne.length>1;te&&ae&&(X=r&&r.fieldValue&&r.fieldValue.map((function(e){return C?"".concat(e.targetName||e.fullName||e.name):"'".concat(e.targetName||e.fullName||e.name,"'")})).filter((function(e){return""!==e})),X=_e({jsonFieldName:L,parentCustomField:V,field:s,value:f?B?"?":":param".concat(Et):X,values:F,targetName:b,operator:d,map_operators:l,rule:r})),c.push({condition:"".concat(L||"".concat(o,".").concat(i)," ").concat(te&&ae?"IN ".concat(X):l[d])})}else if(["isTrue","isFalse"].includes(d)){--At;var le="isTrue"===d;le=_e({jsonFieldName:L,parentCustomField:V,field:s,value:f?B?"?":":param".concat(Et):"".concat(le),values:F,targetName:b,operator:d,map_operators:l,rule:r});var ue=Ne(r,F&&F[0]);c.push({condition:"".concat(L||"".concat(o,".").concat(i)," ").concat(L&&_||f?ue?"IN":"=":l[d]," ").concat(G?E?f?B?"?":":param".concat(Et):T:le:"?".concat(At)),values:G?void 0:[f?B?"?":":param".concat(Et):le]})}else if(["contains","notContains"].includes(d)){var se="object"===typeof T&&T?"'".concat(oe(T[s.targetName]||"",E),"'"):T;c.push({condition:"".concat(G?E?f?B?"?":":param".concat(Et):T:se:"?".concat(At)," ").concat(l[d]," ").concat(L||"".concat(o,".").concat(i)),values:G?void 0:[f?B?"?":":param".concat(Et):se]})}else{var de="object"===typeof T&&T?"'".concat(oe(T[s.targetName]||"",E),"'"):T;de=_e({jsonFieldName:L,parentCustomField:V,field:s,value:f?B?"?":":param".concat(Et):"".concat(de),values:F,targetName:b,operator:d,map_operators:l,rule:r});var me=Ne(r,F&&F[0]);c.push({condition:"".concat(L||"".concat(o,".").concat(["many_to_one","json_many_to_one","one_to_one","json_one_to_one"].includes(y)&&!S?"".concat(i,".").concat(s.targetName||"fullName"):i)," ").concat(L&&_?me?"IN":"=":l[d]," ").concat(G?["like","notLike"].includes(d)&&(!L||L&&!me)?"CONCAT('%',".concat(f?B?"?":":param".concat(Et):T,",'%')"):E?L?de:f?B?"?":":param".concat(Et):T:de:["like","notLike"].includes(d)&&(!L||L&&!je.includes(d))?"CONCAT('%',?".concat(At,",'%')"):"?".concat(At)),values:G?void 0:[f?B?"?":":param".concat(Et):de]})}},i=0;i<(e&&e.length);i++){var u=r(i);if("object"===typeof u)return u.v}return c}(l,t),s=u&&u.filter((function(e){return e}))||[],d=[];i&&i.length>0&&i.forEach((function(e){var n=Ce([e],t,!0)||{},a=n.condition,o=n.values,l=[].concat.apply([],o);d.push({condition:a,values:l&&l.length>0?l:void 0})}));var m=X(a)?re:ce,j=s&&s.map((function(e){return e&&e.condition})),b=d&&(d.map((function(e){return e&&e.condition}))||[]).filter((function(e){return e})),v=d&&d.filter((function(e){return null!==e}));if(i.length>0){var h=b&&b.length>0;return{condition:"".concat(h?"(":"").concat(j?j.join(" "+m[r]+" "):""," ").concat(h?"".concat(m[r]," ").concat(b.join(" "+m[r]+" ")):"").concat(h?")":""),values:[].concat(Object(f.a)(s&&s.map((function(e){return e&&e.values})).filter((function(e){return e}))||[]),Object(f.a)(v&&v.map((function(e){return e&&e.values})).filter((function(e){return e}))||[]))}}return n&&s&&j&&0!==j.length?{condition:"(".concat(j.join(" "+m[r]+" "),")"),values:s&&s.map((function(e){return e&&e.values})).filter((function(e){return e}))}:{condition:j.join(" "+m[r]+" "),values:s&&s.map((function(e){return e&&e.values})).filter((function(e){return e}))}}function we(e,t,n){var o=e[0],l=o.rules,c=o.combinator,r=void 0===c?"and":c,i=o.children,u=(xe(l,t)||[]).filter((function(e){return""!==e})),s=[];i&&i.length>0&&i.forEach((function(e){var n=we([e],t,!0);n&&s.push(n)}));var d=X(a)?re:ce;if(i.length>0&&u&&u.length>0){var m=s&&0!==s.length;return"".concat(m?"(":"").concat(u?u.join(" "+d[r]+" "):""," ").concat(m?" ".concat(d[r]," ").concat(s.join(" "+d[r]+" ")):"").concat(m?")":"")}return n&&u&&u.length>0?"("+u.join(" "+d[r]+" ")+")":u&&u.length>0?u.join(" "+d[r]+" "):void 0}function Me(e){for(var t,n={},a=[],o=e&&e.map((function(e,t){return n[e.id]=t,Object(p.a)(Object(p.a)({},e),{},{children:[]})})),l=0;l<o.length;l+=1)(t=o[l]).parentId>=0?o[n[t.parentId]]&&o[n[t.parentId]].children.push(t):a.push(t);return a}var Ve=l.a.useCallback((function(e,t){he(Object(T.a)((function(n){n[t].value=e})))}),[]),Fe=function(){var e=Object(m.a)(s.a.mark((function e(t,n){var a,o,l;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,$e(r,Object(p.a)(Object(p.a)({},K||{}),{},(a={},Object(d.a)(a,u,t&&t.trim()),Object(d.a)(a,j,n?JSON.stringify(n):n),a)));case 4:o=window.top&&window.top.document&&window.top.document.getElementsByClassName("button-close"),(l=o&&o[o.length-1])&&l.click&&l.click();case 7:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}();function ke(e,t){var n,o=[],l=[],c=[];if(function(){for(var e=!0,t=[],n=0;n<(ve&&ve.length);n++){var a=ve[n].value||{},o=a.rules;if(!a.metaModals&&!P)return e;t.push(o)}for(var l=S.a.flattenDeep(t||[]),c=l&&l.map((function(e){return e.rules})),r=S.a.flattenDeep(c||[]),i=0;i<(r&&r.length);i++){var u=r&&r[i],s=u||{},d=s.fieldName,m=s.field,f=void 0===m?{}:m,p=s.operator,j=(f||{}).selectionList,b=f&&f.type&&f.type.toLowerCase(),v=["long","integer","decimal","boolean","button","double"].includes(b),h=u.fieldValue,g=u.fieldValue2,O=u.isRelationalValue,y=d;!v||j||O||(h||!1===h||(h=0),["between","notBetween"].includes(p)&&!g&&(g=0));var x=isNaN(h)?h:"".concat(h);if(!y){e=!1;break}if(Object(R.isEmpty)(x)&&!["isNull","isNotNull","isTrue","isFalse"].includes(p)){e=!1;break}if(""===p||j&&!h&&!["isNull","isNotNull","isTrue","isFalse"].includes(p)||v&&O&&!h||(!v&&!h||h&&Array.isArray(h)&&h.length<=0||(!v&&!g||g&&Array.isArray(g)&&g.length<=0)&&["between","notBetween"].includes(p))&&!["isNull","isNotNull","isTrue","isFalse"].includes(p)){e=!1;break}}return e}()){for(var r=0;r<ve.length;r++){var i=ve[r].value||{},u=i.rules,s=i.metaModals,d=s&&s.name,m=s||{},p=m.fullName,j=m.type;n=X(t)?"metaJsonModel"===j?d:p:d;var b="",v=Me(u),h=X(t)?Ce(v,Z(d),void 0):we(v,Z(d),void 0);if(l.push.apply(l,Object(f.a)(h&&((h.values||[]).filter((function(e){return Array.isArray(e)}))||[])||[])),!s&&!P)break;b+=X(t)?h&&h.condition:h;var g={metaModalName:d,metaModalType:s&&s.type,rules:u};o.push(g),c.push("".concat(b))}var O=X(a)?re:ce,y=(c.filter((function(e){return""!==e}))||[]).map((function(e){return c.length>1?"(".concat(e,")"):e})).join(" "+O[e]+" "),x=y;if(X(t)){var N="";l&&l.forEach((function(e){e&&Array.isArray(e[0])&&e[0]?N+=", (".concat(e[0],")"):(e&&Array.isArray(e)&&e.length>0&&(e=e.join(", ")),N=N+", "+e)}));var _=!L||E;x=y?"".concat(_?"(":"").concat(L?"":"".concat(E?'"'.concat(n,'"'):"".concat(n),", ")).concat(E?'" '.concat(y,' "'):" ".concat(y," ")).concat(l&&l.length>0?"".concat(N):"").concat(_?")":""):null}Et=0,At=0,Fe(x,x?{values:o,combinator:e}:null)}else ee(!0)}var Le=l.a.useCallback(Object(m.a)(s.a.mark((function e(){var t,n,o,l,c,r;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(L&&X(a)){e.next=2;break}return e.abrupt("return");case 2:return t=[],n=L.split(".")||[],o=n.length,l={criteria:[{fieldName:"name",operator:"=",value:o>1?n[o-1]:L}],operator:"and"},e.next=8,Ie(l,o>1?"metaModel":"metaJsonModel");case 8:if(c=e.sent){e.next=11;break}return e.abrupt("return");case 11:r={metaModals:c&&c[0],rules:[{id:0,parentId:-1,combinator:"and",rules:[{}]}]},t.push({Component:Rt,value:r}),de(r),he(t);case 15:case"end":return e.stop()}}),e)}))),[L,a]);return Object(o.useEffect)((function(){function e(){return(e=Object(m.a)(s.a.mark((function e(){var t,n,a,o,l,i,u,d,m,f,p,b,v;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r&&c){e.next=4;break}return e.next=3,Le();case 3:return e.abrupt("return");case 4:return e.next=6,Be(r,c);case 6:if(t=e.sent,q(t),t){e.next=12;break}return e.next=11,Le();case 11:return e.abrupt("return");case 12:if(n=t&&t[j],a=n&&JSON.parse(n)||{},o=a.values,l=a.combinator,i=[],o&&0!==o.length){e.next=19;break}return e.next=18,Le();case 18:return e.abrupt("return");case 19:u=0;case 20:if(!(u<o.length)){e.next=36;break}if(d=o[u],m=d.metaModalName,f=d.metaModalType,m||P){e.next=25;break}return e.abrupt("return");case 25:return p={criteria:[{fieldName:"name",operator:"=",value:m}],operator:"and"},e.next=28,Ie(p,f);case 28:if((b=e.sent)||P){e.next=31;break}return e.abrupt("return");case 31:v={metaModals:b&&b[0],rules:d.rules},i.push({Component:Rt,value:v});case 33:u++,e.next=20;break;case 36:he(i),z(l||"and");case 38:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[a,j,c,r,u,Le,L,P]),Object(He.jsxs)("div",{className:ge.container,children:[Object(He.jsxs)("div",{className:ge.root,children:[Object(He.jsx)(b.a,{variant:"outlined",className:ge.paper,style:{display:"flex"},children:Object(He.jsx)("div",{style:{height:"100%",width:"100%"},children:Object(He.jsx)("div",{className:ge.expression,style:{height:"100%",width:"100%"},children:Object(He.jsx)(x.a,{align:"alternate",className:ge.timeline,children:Object(He.jsxs)(N.a,{style:{minHeight:"100%"},children:[Object(He.jsx)(_.a,{className:ge.timelineOppositeContent,children:Object(He.jsx)(qe,{name:"expression",options:le,value:Y,disableUnderline:!0,className:ge.combinator,onChange:function(e){z(e)}})}),Object(He.jsxs)(C.a,{children:[Object(He.jsx)(w.a,{variant:"outlined",style:{borderColor:"#0275d8"}}),Object(He.jsx)(M.a,{className:ge.timelineConnector})]}),Object(He.jsxs)(V.a,{children:[Object(He.jsx)(tt,{title:X(a)?"Add group":"Add Expression",Icon:k.a,onClick:function(){he(Object(T.a)((function(e){e.push({Component:Rt.bind({}),value:X(a)?L&&ae?ae:{metaModals:ve&&ve[0]&&ve[0].value&&ve[0].value.metaModals,rules:[{id:0,parentId:-1,combinator:"and",rules:[{}]}]}:void 0})})))},disabled:!!X(a)&&(!ve||!(ve[0]&&ve[0].value&&ve[0].value.metaModals||0===ve.length))}),Object(He.jsx)("div",{children:ve&&ve.map((function(e,t){var n=e.Component,o=e.value;return Object(He.jsxs)("div",{className:ge.expressionContainer,children:[Object(He.jsx)(n,{value:o,index:t,setValue:Ve,element:K&&F&&K[F],type:a,queryModel:L,isCondition:B,isPackage:P}),Object(He.jsx)(tt,{Icon:I.a,onClick:function(){return function(e){he(Object(T.a)((function(t){t.splice(e,1)})))}(t)}})]},t)}))})]})]})})})})}),Object(He.jsxs)(v.a,{open:Q,onClose:function(){return ee(!1)},"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",classes:{paper:ge.dialog},children:[Object(He.jsx)(h.a,{id:"alert-dialog-title",children:"Error"}),Object(He.jsx)(g.a,{children:Object(He.jsx)(O.a,{id:"alert-dialog-description",children:"Add all values"})}),Object(He.jsx)(y.a,{children:Object(He.jsx)(tt,{title:"Ok",onClick:function(){return ee(!1)}})})]})]}),Object(He.jsx)("div",{className:ge.actions,children:Object(He.jsx)(tt,{title:"Save",className:ge.save,onClick:function(){return ke(Y,a)}})})]})};var Pt=function(){var e=Object(o.useState)(null),t=Object(i.a)(e,2),n=t[0],a=t[1];return Object(o.useEffect)((function(){var e=window&&window.top&&window.top.document&&window.top.document.getElementsByClassName("html-view ng-scope"),t=e&&e[0];t&&t.style&&(t.style.height="100%",t.style.minHeight="450px")}),[]),Object(o.useEffect)((function(){var e=function(){for(var e,t,n,a,o,l,c,r,i,u,s,d,m,f,p,j,b=/[?&]type=query([^&#]*)/g,v=/[?&]id=([^&#]*)/g,h=/[?&]model=([^&#]*)/g,g=/[?&]resultField=([^&#]*)/g,O=/[?&]resultMetaField=([^&#]*)/g,y=/[?&]modelFilter=([^&#]*)/g,x=/[?&]queryModel=([^&#]*)/g,N=/[?&]withParam=([^&#]*)/g,_=/[?&]isCondition=([^&#]*)/g,C=window.location.href,w="expressionBuilder",M=!1;b.exec(C);)w="bpmQuery";for(;u=v.exec(C);)e=u[1];for(;s=h.exec(C);)t=s[1];for(;d=g.exec(C);)n=d[1];for(;m=O.exec(C);)a=m[1];for(;i=y.exec(C);)o=i[1];for(;p=N.exec(C);)c=p[1];for(;j=_.exec(C);)r=j[1];for(;f=x.exec(C);)l=f[1],M=!!(ae(r)&&l.indexOf("*")>-1);return{type:w,id:e,model:t,resultField:n,resultMetaField:a,modelFilter:o,queryModel:l,withParam:ae(c),isCondition:ae(r),isPackage:M}}()||{};a(e)}),[]),Object(He.jsx)(Bt,{parameters:n})};n(166);r.a.render(Object(He.jsx)(Pt,{}),document.getElementById("root"))}},[[167,1,2]]]);
//# sourceMappingURL=main.eccbe15c.chunk.js.map