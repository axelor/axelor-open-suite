<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<object-views xmlns="http://axelor.com/xml/ns/object-views"
  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
  xsi:schemaLocation="http://axelor.com/xml/ns/object-views http://axelor.com/xml/ns/object-views/object-views_5.4.xsd">

  <form name="incl-activities-partner-form" title="Partner"
    model="com.axelor.apps.base.db.Partner">
    <panel-dashlet name="partnerEventsPanel" colSpan="12"
      action="action-partner-view-all-events" height="550"/>
  </form>

  <form name="incl-activities-contact-form" title="Contact"
    model="com.axelor.apps.base.db.Partner">
    <panel-dashlet name="contactEventsPanel" colSpan="12"
      action="action-contact-view-all-events" height="550"/>
  </form>

  <form name="incl-events-partner-form" title="Partner" model="com.axelor.apps.base.db.Partner">
    <panel-dashlet name="customerCrmActivitiesPanel" colSpan="12" title="Events"
      showIf="id != null" action="dashlet.customer.crm.activities" height="350"/>
  </form>

  <form name="incl-event-actions-partner-form" title="Partner"
    model="com.axelor.apps.base.db.Partner" id="incl-event-actions-crm-partner-form">
    <menubar>
      <menu name="partnerToolsMenu" title="Tools" icon="fa-wrench" showTitle="true">
        <item name="generateProjectItem" title="Generate Project"
          action="action-partner-method-generate-project" readonlyIf="id == null || id &lt; 1"
          if-module="axelor-project" if="__config__.app.isApp('project')" hideIf="isContact"/>
        <item title="Customer recovery" name="customerRecoveryItem"
          action="action-partner-view-show-customer-debt-recovery"
          if="__config__.app.isApp('account')"/>
      </menu>
    </menubar>
  </form>

  <!-- CREATE CRM OBJECT FROM PARTNER -->

  <action-view name="action-partner-view-schedule-event"
    title="Schedule Event (${ fullName })" model="com.axelor.apps.crm.db.Event">
    <view type="form" name="event-form"/>
    <context name="_partner" expr="eval: __this__"/>
  </action-view>

  <action-view name="action-contact-partner-view-schedule-event"
    title="Schedule Event (${ fullName })" model="com.axelor.apps.crm.db.Event">
    <view type="form" name="event-form"/>
    <context name="_contactPartner" expr="eval: __this__"/>
    <context name="_contactMainPartner" expr="eval: __this__.mainPartner"/>
  </action-view>

  <action-view name="action-partner-view-create-opportunity"
    title="Create opportunity (${ fullName })" model="com.axelor.apps.crm.db.Opportunity">
    <view type="form" name="opportunity-form"/>
    <context name="_partner" expr="eval: __this__"/>
    <context name="_internalUserId" expr="eval: __user__.id"/>
  </action-view>

  <action-view name="action-partner-view-meeting-event"
    title="Meeting Event (${ fullName })" model="com.axelor.apps.crm.db.Event">
    <view type="form" name="event-form"/>
    <view-param name="popup" value="reload"/>
    <view-param name="show-toolbar" value="false"/>
    <context name="_partner" expr="eval: __this__"/>
    <context name="_meeting" expr="eval: true"/>
  </action-view>

  <action-view name="action-partner-view-call-event" title="Call Event (${ fullName })"
    model="com.axelor.apps.crm.db.Event">
    <view type="form" name="event-form"/>
    <view-param name="popup" value="reload"/>
    <view-param name="show-toolbar" value="false"/>
    <context name="_partner" expr="eval: __this__"/>
    <context name="_call" expr="eval: true"/>
  </action-view>

  <action-view name="action-partner-view-task-event" title="Task Event (${ fullName })"
    model="com.axelor.apps.crm.db.Event">
    <view type="form" name="event-form"/>
    <view-param name="popup" value="reload"/>
    <view-param name="show-toolbar" value="false"/>
    <context name="_partner" expr="eval: __this__"/>
    <context name="_task" expr="eval: true"/>
  </action-view>

  <action-view name="action-partner-view-note-event" title="Note Event (${ fullName })"
    model="com.axelor.apps.crm.db.Event">
    <view type="form" name="event-form"/>
    <view-param name="popup" value="reload"/>
    <view-param name="show-toolbar" value="false"/>
    <context name="_partner" expr="eval: __this__"/>
    <context name="_note" expr="eval: true"/>
  </action-view>

  <!-- CREATE SALE OBJECT FROM PARTNER -->

  <action-view name="action-partner-view-create-order"
    title="Create order (${ fullName })" model="com.axelor.apps.sale.db.SaleOrder">
    <view type="form" name="sale-order-form-partner"/>
    <context name="_partner" expr="eval: __this__"/>
  </action-view>

  <!-- CREATE PURCHASE OBJECT FROM PARTNER -->

  <action-view name="action-partner-view-create-purchase-quotation"
    title="Create order (${ fullName })" model="com.axelor.apps.purchase.db.PurchaseOrder">
    <view type="form" name="purchase-order-form"/>
    <context name="_partner" expr="eval: __this__"/>
  </action-view>

  <!-- PORTLET -->

  <action-view name="action-partner-view-all-events" title="Events"
    model="com.axelor.apps.crm.db.Event">
    <view type="cards" name="event-cards"/>
    <view type="grid" name="list-event-grid"/>
    <view type="form" name="event-form"/>
    <domain>self.partner.id = :id</domain>
    <context name="id" expr="eval: id"/>
  </action-view>

  <action-view name="action-contact-view-all-events" title="Events"
    model="com.axelor.apps.crm.db.Event">
    <view type="cards" name="event-cards"/>
    <view type="grid" name="list-event-grid"/>
    <view type="form" name="event-form"/>
    <domain>self.contactPartner.id = :id</domain>
    <context name="id" expr="eval: id"/>
  </action-view>

  <action-view name="action-partner-view-opportunities" title="Opportunities"
    model="com.axelor.apps.crm.db.Opportunity">
    <view type="cards" name="opportunity-cards"/>
    <view type="grid" name="opportunity-dashlet-grid"/>
    <view type="form" name="opportunity-form"/>
    <domain>self.partner.id = :id</domain>
    <context name="id" expr="eval: id"/>
  </action-view>

  <action-view name="action-contact-view-opportunities" title="Opportunities"
    model="com.axelor.apps.crm.db.Opportunity">
    <view type="cards" name="opportunity-cards"/>
    <view type="grid" name="opportunity-dashlet-grid"/>
    <view type="form" name="opportunity-form"/>
    <domain>self.contact.id = :id</domain>
    <context name="id" expr="eval: id"/>
  </action-view>

  <action-view name="action-partner-view-events" title="Events"
    model="com.axelor.apps.crm.db.Event">
    <view type="grid" name="list-event-grid"/>
    <view type="form" name="event-form"/>
    <domain>self.partner.id = :_id</domain>
  </action-view>

  <action-view name="action-contact-view-events" title="Events"
    model="com.axelor.apps.crm.db.Event">
    <view type="grid" name="list-event-grid"/>
    <view type="form" name="event-form"/>
    <domain>self.contactPartner.id = :_id</domain>
  </action-view>

</object-views>
