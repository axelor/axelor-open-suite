<?xml version="1.0" encoding="UTF-8"?>
<domain-models xmlns="http://axelor.com/xml/ns/domain-models"
  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
  xsi:schemaLocation="http://axelor.com/xml/ns/domain-models http://axelor.com/xml/ns/domain-models/domain-models_5.4.xsd">

  <module name="crm" package="com.axelor.apps.crm.db"/>

  <entity name="Lead" lang="java">
  
 	<string name="titleSelect" title="Title" selection="partner.title.type.select"/>
    <string name="name" required="true" title="Last name"/>
    <string name="firstName" title="First name"/>
    <string name="enterpriseName" title="Enterprise"/>
    <string name="officeName" title="Office name"/>
    <many-to-one name="jobTitleFunction" title="Job Title" ref="com.axelor.apps.base.db.Function"/>
    <string name="mobilePhone" title="Mobile NÂ°"/>
    <string name="fixedPhone" title="Fixed Phone"/>
  	<string name="department" title="Dep./Div."/>
  	<string name="webSite" title="Website"/>
  	
<!--   Primary address group -->
	<string name="primaryAddress" title="Address"/>
	<many-to-one name="primaryCity" title="City" ref="com.axelor.apps.base.db.City"/>
	<many-to-one name="primaryState" title="Region" ref="com.axelor.apps.base.db.Region"/>
	<string name="primaryPostalCode" title="Postal code"/>
  	<many-to-one name="primaryCountry" ref="com.axelor.apps.base.db.Country" title="Country"/>
  
    <one-to-one name="emailAddress" ref="com.axelor.apps.message.db.EmailAddress" title="Email"/>
	<binary name="picture" title="Picture" />
	
	<string name="description" title="Description" large="true"/>
	<date name="contactDate" title="Contact date" />
	
	<integer name="statusSelect" title="Status" selection="crm.lead.status.select" default="1" required="true" massUpdate="true"/>
	<boolean name="isRecycled" title="Recycled"/>
	<many-to-one name="source" ref="com.axelor.apps.base.db.Source" title="Source"/>
  	<string name="statusDescription" title="Status description" large="true"/>
    <decimal name="estimatedBudget" title="Estimated budget"/>
 	<string name="sourceDescription" title="Source description" large="true"/>
    <string name="referredBy" title="Referred by"/>
    <boolean name="isDoNotCall" title="Rejection of calls"/>
    <boolean name="isDoNotSendEmail" title="Rejection of e-mails"/>
    
    <many-to-one name="partner" ref="com.axelor.apps.base.db.Partner" title="Contact" readonly="true"/>
    
    
    <many-to-one name="user" column="user_id" ref="com.axelor.auth.db.User" title="Assigned to" massUpdate="true"/>
  	<many-to-one name="team" ref="com.axelor.team.db.Team" title="Team"  massUpdate="true" />
  	<many-to-one name="industrySector" title="Industry sector" ref="com.axelor.apps.base.db.IndustrySector" massUpdate="true"/>

  	<one-to-many name="eventList" ref="com.axelor.apps.crm.db.Event" title="Events" mappedBy="lead"/>
  	<one-to-many name="opportunitiesList" ref="com.axelor.apps.crm.db.Opportunity" title="Opportunities" mappedBy="lead"/>
  	<many-to-one name="lostReason" ref="LostReason" title="Lost reason" />

    <string name="lostReasonStr" title="Lost reason" large="true"/>
    <string name="fullName" title="Contact name" namecolumn="true" />
    
    <integer name="closedReason" title="Closed reason" selection="crm.lead.closed.reason.select"/>
    <boolean name="isNurturing" title="Nurturing"/>

    <extra-code>
    <![CDATA[
    	public static final int LEAD_STATUS_NEW = 1;
    	public static final int LEAD_STATUS_IN_PROCESS = 2;
    	public static final int LEAD_STATUS_CLOSED = 3;
    	
		public static final int CLOSED_REASON_CANCELED = 1;
    	public static final int CLOSED_REASON_LOST = 2;
    	public static final int CLOSED_REASON_CONVERTED = 3;
    	
    	public static final int CONVERT_LEAD_CREATE_PARTNER = 1;
    	public static final int CONVERT_LEAD_SELECT_PARTNER = 2;
    	public static final int CONVERT_LEAD_CREATE_CONTACT = 1;
    	public static final int CONVERT_LEAD_SELECT_CONTACT = 2;
    	
    ]]>
    </extra-code>

    <track>
      <field name="name" />
      <field name="statusSelect" on="UPDATE"/>
      <message if="true" on="CREATE">Lead created</message>
      <message if="statusSelect == 2" tag="important">Lead In progress</message>
      <message if="statusSelect == 3" tag="success">Lead Converted/Closed</message>
    </track>
    
  </entity>

</domain-models>
