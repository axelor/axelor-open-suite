<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<object-views xmlns="http://axelor.com/xml/ns/object-views"
	xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
	xsi:schemaLocation="http://axelor.com/xml/ns/object-views http://axelor.com/xml/ns/object-views/object-views_5.0.xsd">

	<menuitem name="maintenance-root" title="Maintenance" order="-84" if="__config__.app.isApp('maintenance')"
		icon="fa-recycle" icon-background="olive"/>
	
	<menuitem name="maintenance-root-equipement-maintenances" parent="maintenance-root" 
		title="Equipement maintenances" action="maintenance.root.equipement.maintenances" order="5"/>

	<action-view name="maintenance.root.equipement.maintenances" title="Equipement maintenances"
		model="com.axelor.apps.maintenance.db.EquipementMaintenance" >
		<view type="cards" name="equipement-maintenance-cards" />
		<view type="grid" name="equipement-maintenance-grid" />
		<view type="form" name="equipement-maintenance-form" />
	</action-view>
	
	<menuitem name="maintenance-root-current-maintenance-requests" parent="maintenance-root" 
		title="Current requests" action="maintenance.root.current.maintenance.requests" order="10"/>
	
	<action-view name="maintenance.root.current.maintenance.requests" title="Current requests"
		model="com.axelor.apps.maintenance.db.MaintenanceRequest" >
		<view type="kanban" name="maintenance-request-kanban" />
		<view type="calendar" name="maintenance-request-calendar-per-user" />
		<view type="grid" name="maintenance-request-grid" />
		<view type="form" name="maintenance-request-form" />
		<view-param name="kanban-hide-columns" value="2,3"/>
		<domain>self.statusSelect in (0,1)</domain>
		<context name="_todayDate" expr="eval:__config__.app.getTodayDate()"/>
	</action-view>
	
	<menuitem name="maintenance-root-my-maintenance-requests" parent="maintenance-root" 
		title="My Maintenance requests" action="maintenance.root.my.maintenance.requests" order="15"/>
	
	<action-view name="maintenance.root.my.maintenance.requests" title="My Maintenance requests"
		model="com.axelor.apps.maintenance.db.MaintenanceRequest" >
		<view type="kanban" name="maintenance-request-kanban" />
		<view type="calendar" name="maintenance-request-calendar-per-user" />
		<view type="form" name="maintenance-request-form" />
		<view-param name="kanban-hide-columns" value="2,3"/>
		<domain>self.statusSelect in (0,1) and self.assignedTo = :__user__</domain>
		<context name="_todayDate" expr="eval:__config__.app.getTodayDate()"/>
	</action-view>
	
	<menuitem name="maintenance-root-machine-unavailable" parent="maintenance-root" 
		title="Machines unavailable" action="maintenance.root.machine.unavailable" order="25"/>
	
	<action-view name="maintenance.root.machine.unavailable" title="Machines unavailable"
		model="com.axelor.apps.maintenance.db.MaintenanceRequest" >
		<view type="calendar" name="maintenance-request-calendar-per-machine" />
		<domain>self.statusSelect in (0,1,2) and self.equipementMaintenance.machine is not null</domain>
		<context name="_todayDate" expr="eval:__config__.app.getTodayDate()"/>
	</action-view>
	
	<menuitem name="maintenance-root-maintenance-request-history" parent="maintenance-root" 
		title="Request history" action="maintenance.root.maintenance.request.history" order="30"/>
	
	<action-view name="maintenance.root.maintenance.request.history" title="Request history"
		model="com.axelor.apps.maintenance.db.MaintenanceRequest" >
		<view type="grid" name="maintenance-request-grid" />
		<view type="kanban" name="maintenance-request-kanban" />
		<view type="calendar" name="maintenance-request-calendar-per-user" />
		<view type="form" name="maintenance-request-form" />
		<context name="_todayDate" expr="eval:__config__.app.getTodayDate()"/>
	</action-view>
	
	<menuitem name="maintenance-root-manuf-order" parent="maintenance-root" order="33"
		title="Manufacturing orders" action="maintenance.manufacturing.root.manuf.order"/>

	<action-view name="maintenance.manufacturing.root.manuf.order" title="Manufacturing orders"
    model="com.axelor.apps.production.db.ManufOrder">
    <view type="grid" name="maintenance-manuf-order-grid" />
    <view type="form" name="manuf-order-form" />
    <view-param name="search-filters" value="manuf-order-filters"/>
    <domain>(self.isPermanent is null OR self.isPermanent = false) AND self.typeSelect = 2</domain>
    <context name="_todayDateTime" expr="eval:__config__.app.getTodayDateTime()"/>
    <context name="_maintenance" expr="eval: true"/>
	</action-view>

	<menuitem name="maintenance-root-config" parent="maintenance-root" title="Configuration" order="35"/>
	
	<menuitem name="maintenance-root-config-maintenance-category" parent="maintenance-root-config" 
		title="Maintenance Category" action="maintenance.root.config.maintenance.category" order="5"/>
	
	<action-view name="maintenance.root.config.maintenance.category" title="Maintenance Category"
		model="com.axelor.apps.maintenance.db.MaintenanceCategory" >
		<view type="grid" name="maintenance-category-grid" />
		<view type="form" name="maintenance-category-form" />
	</action-view>
	
	<menuitem name="maintenance-root-config-machines" parent="maintenance-root-config" order="10"
		title="Machines" action="manufacturing.conf.machine" />

	<menuitem name="maintenance-root-config-prod-process" parent="maintenance-root-config" order="15"
		title="Production processes" action="maintenance.manufacturing.root.prod.process"/>

  <action-view name="maintenance.manufacturing.root.prod.process" title="Production processes"
    model="com.axelor.apps.production.db.ProdProcess" >
    <view type="grid" name="maintenance-prod-process-grid" />
    <view type="form" name="prod-process-form" />
    <domain>self.typeSelect = 2</domain>
    <context name="_maintenance" expr="eval: true"/>
  </action-view>

	<menuitem name="maintenance-root-config-bill-of-material" parent="maintenance-root-config" order="20"
		title="Bills of materials" action="maintenance.manufacturing.root.bill.of.material"/>

  <action-view name="maintenance.manufacturing.root.bill.of.material" title="Bills of materials"
    model="com.axelor.apps.production.db.BillOfMaterial" >
    <view type="grid" name="maintenance-bill-of-material-grid" />
    <view type="form" name="bill-of-material-form" />
    <domain>self.defineSubBillOfMaterial = true AND self.personalized = false AND self.typeSelect = 2</domain>
    <context name="_maintenance" expr="eval: true"/>
  </action-view>

  <action-view id="addons.maintenance.manufacturing.root.bill.of.material" name="manufacturing.root.bill.of.material" title="Bills of materials"
    model="com.axelor.apps.production.db.BillOfMaterial" >
    <view type="grid" name="bill-of-material-grid" />
    <view type="form" name="bill-of-material-form" />
    <domain>self.defineSubBillOfMaterial = true AND self.personalized = false AND self.typeSelect = 1</domain>
  </action-view>

  <action-view id="addons.maintenance.manufacturing.root.prod.process" name="manufacturing.root.prod.process" title="Production processes"
    model="com.axelor.apps.production.db.ProdProcess" >
    <view type="grid" name="prod-process-grid" />
    <view type="form" name="prod-process-form" />
    <domain>self.typeSelect = 1</domain>
  </action-view>

  <action-view id="addons.maintenance.manufacturing.root.manuf.order" name="manufacturing.root.manuf.order" title="Manufacturing orders"
    model="com.axelor.apps.production.db.ManufOrder" >
    <view type="grid" name="manuf-order-grid" />
    <view type="form" name="manuf-order-form" />
    <view-param name="search-filters" value="manuf-order-filters"/>
    <domain>(self.isPermanent is null OR self.isPermanent = false) AND self.typeSelect = 1</domain>
    <context name="_todayDateTime" expr="eval:__config__.app.getTodayDateTime()"/>
  </action-view>

  <action-view id="addons.maintenance.manufacturing.conf.manuf.order" name="manufacturing.conf.manuf.order" title="Permanent manufacturing orders"
    model="com.axelor.apps.production.db.ManufOrder" >
    <view type="grid" name="manuf-order-grid" />
    <view type="form" name="manuf-order-form" />
    <view-param name="search-filters" value="manuf-order-filters"/>
    <domain>self.typeSelect = 3</domain>
    <context name="_todayDateTime" expr="eval:__config__.app.getTodayDateTime()"/>
    <context name="_createPermanent" expr="eval: true"/>
  </action-view>
</object-views>
